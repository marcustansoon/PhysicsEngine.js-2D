'use strict';(async()=>{function k(a,b){return Math.floor(a*Math.pow(10,b))/Math.pow(10,b)}function q(a){a.interactive=!0;a.buttonMode=!0;a.cursor="pointer"}function C(){H="background-music";y&&w&&w.play({volume:.35,loop:1})}function l(a,b){A&&x&&PIXI.Assets.get(a).play(b)}function M(a){window&&window.webkit&&v&&v.uuid&&window.webkit.messageHandlers.cordova_iab.postMessage(JSON.stringify({type:"update-game-level",data:{gameLevel:a}}))}class Q{constructor(a){this.app=a;this.type="loading-scene";this.container=
new PIXI.Container;this.objects=[];this.isDestroyed=!1;this.createScene()}async createScene(){var a=await PIXI.Assets.load({alias:"bg-main-menu",src:"https://cdn.jsdelivr.net/gh/marcustansoon/PhysicsEngine.js-2D@master/temp/Games/BBQ-Sort/temp/bbq-grill-bg-6-compressed.jpg"}),b=this.app.renderer.width/a.width,c=this.app.renderer.height/a.height;let d=b>c?b:c;b=Math.round(d/.3*240)/10;c=new PIXI.BlurFilter;c.blur=5;a=new PIXI.Sprite(a);a.anchor.set(.5);a.filters=[c];a.scale.set(k(d,2));a.position.set(this.app.screen.width/
2,this.app.screen.height/2);this.objects.push(a);this.container.addChild(a);a=new PIXI.Graphics;a.beginFill("#000000");a.alpha=.5;a.drawRect(Math.round(-this.app.renderer.width/2),Math.round(-this.app.renderer.height/2),Math.round(this.app.renderer.width),Math.round(this.app.renderer.height));a.endFill();a.filters=[c];a.position.set(this.app.screen.width/2,this.app.screen.height/2);this.objects.push(a);this.container.addChild(a);a=new PIXI.TextStyle({fontFamily:"Trebuchet MS, sans-serif",fontSize:b,
fill:"#FFFFFF",dropShadow:!1,fontWeight:"bold",wordWrap:!0,wordWrapWidth:440,letterSpacing:2,lineJoin:"round"});a=new PIXI.Text("Loading ...",a);a.anchor.set(.5);a.position.set(this.app.screen.width/2,this.app.screen.height/2);this.objects.push(a);this.container.addChild(a);this.loadingText=a;this.progress=0;await PIXI.Assets.load([{alias:"bg-main-menu-button",src:"https://cdn.jsdelivr.net/gh/marcustansoon/PhysicsEngine.js-2D@master/temp/Games/BBQ-Sort/temp/text-bg-transparent.png"},{alias:"patty-running",
src:"https://cdn.jsdelivr.net/gh/marcustansoon/PhysicsEngine.js-2D@master/temp/Games/BBQ-Sort/temp/patty-run.png"},{alias:"star",src:"https://cdn.jsdelivr.net/gh/marcustansoon/PhysicsEngine.js-2D@master/temp/Games/BBQ-Sort/temp/star.png"},{alias:"bg-level-selection",src:"https://cdn.jsdelivr.net/gh/marcustansoon/PhysicsEngine.js-2D@master/temp/Games/BBQ-Sort/temp/level-selection-bg.jpg"},{alias:"left-button",src:"https://cdn.jsdelivr.net/gh/marcustansoon/PhysicsEngine.js-2D@master/temp/Games/BBQ-Sort/temp/left-button.png"},
{alias:"right-arrow",src:"https://cdn.jsdelivr.net/gh/marcustansoon/PhysicsEngine.js-2D@master/temp/Games/BBQ-Sort/temp/right-arrow.png"},{alias:"close-button",src:"https://cdn.jsdelivr.net/gh/marcustansoon/PhysicsEngine.js-2D@master/temp/Games/BBQ-Sort/temp/close-button-3.png"},{alias:"banner",src:"https://cdn.jsdelivr.net/gh/marcustansoon/PhysicsEngine.js-2D@master/temp/Games/BBQ-Sort/temp/paper-cropped-2-brighter.png"},{alias:"bg-gameplay-1",src:"https://cdn.jsdelivr.net/gh/marcustansoon/PhysicsEngine.js-2D@master/temp/Games/BBQ-Sort/temp/bbq-grill-bg-5.jpg"},
{alias:"tick",src:"https://cdn.jsdelivr.net/gh/marcustansoon/PhysicsEngine.js-2D@master/temp/Games/BBQ-Sort/temp/tick.png"},{alias:"untick",src:"https://cdn.jsdelivr.net/gh/marcustansoon/PhysicsEngine.js-2D@master/temp/Games/BBQ-Sort/temp/untick.png"},{alias:"level-completion-bg",src:"https://cdn.jsdelivr.net/gh/marcustansoon/PhysicsEngine.js-2D@master/temp/Games/BBQ-Sort/temp/level-completed-sprite-transparent.png"},{alias:"level-failed-banner-1",src:"https://cdn.jsdelivr.net/gh/marcustansoon/PhysicsEngine.js-2D@master/temp/Games/BBQ-Sort/temp/patty-burnt-2.png"},
{alias:"level-failed-banner-2",src:"https://cdn.jsdelivr.net/gh/marcustansoon/PhysicsEngine.js-2D@master/temp/Games/BBQ-Sort/temp/patty-burnt-4.png"},{alias:"level-failed-banner-3",src:"https://cdn.jsdelivr.net/gh/marcustansoon/PhysicsEngine.js-2D@master/temp/Games/BBQ-Sort/temp/patty-burnt-6.png"},{alias:"level-failed-bg",src:"https://cdn.jsdelivr.net/gh/marcustansoon/PhysicsEngine.js-2D@master/temp/Games/BBQ-Sort/temp/level-failure-banner.png"},{alias:"cloud",src:"https://cdn.jsdelivr.net/gh/marcustansoon/PhysicsEngine.js-2D@master/temp/Games/BBQ-Sort/temp/cloud-rotated.png"},
{alias:"setting-icon",src:"https://cdn.jsdelivr.net/gh/marcustansoon/PhysicsEngine.js-2D@master/temp/Games/BBQ-Sort/temp/setting-icon-cropped.png"},{alias:"wooden-banner",src:"https://cdn.jsdelivr.net/gh/marcustansoon/PhysicsEngine.js-2D@master/temp/Games/BBQ-Sort/temp/wooden-banner-3.png"},{alias:"light-rotate-2",src:"https://pixijs.com/assets/light_rotate_2.png"},{alias:"light-rotate-1",src:"https://pixijs.com/assets/light_rotate_1.png"},{alias:"bbq-stick",src:"https://cdn.jsdelivr.net/gh/marcustansoon/PhysicsEngine.js-2D@master/temp/Games/BBQ-Sort/media/bbq-stick.png"},
{alias:"cucumber-slice",src:"https://cdn.jsdelivr.net/gh/marcustansoon/PhysicsEngine.js-2D@master/temp/Games/BBQ-Sort/media/cucumber-slice.png"},{alias:"cucumber",src:"https://cdn.jsdelivr.net/gh/marcustansoon/PhysicsEngine.js-2D@master/temp/Games/BBQ-Sort/media/cucumber.png"},{alias:"meat",src:"https://cdn.jsdelivr.net/gh/marcustansoon/PhysicsEngine.js-2D@master/temp/Games/BBQ-Sort/media/meat.png"},{alias:"chicken-wing",src:"https://cdn.jsdelivr.net/gh/marcustansoon/PhysicsEngine.js-2D@master/temp/Games/BBQ-Sort/media/chicken-wing.png"},
{alias:"prawn",src:"https://cdn.jsdelivr.net/gh/marcustansoon/PhysicsEngine.js-2D@master/temp/Games/BBQ-Sort/temp/miniprawn.png"},{alias:"lobster",src:"https://cdn.jsdelivr.net/gh/marcustansoon/PhysicsEngine.js-2D@master/temp/Games/BBQ-Sort/temp/bigprawn.png"},{alias:"eggplant",src:"https://cdn.jsdelivr.net/gh/marcustansoon/PhysicsEngine.js-2D@master/temp/Games/BBQ-Sort/temp/bigeggplant.png"},{alias:"eggplant-slice",src:"https://cdn.jsdelivr.net/gh/marcustansoon/PhysicsEngine.js-2D@master/temp/Games/BBQ-Sort/temp/minieggplant.png"},
{alias:"sausage",src:"https://cdn.jsdelivr.net/gh/marcustansoon/PhysicsEngine.js-2D@master/temp/Games/BBQ-Sort/temp/bigsausage.png"},{alias:"mini-sausage",src:"https://cdn.jsdelivr.net/gh/marcustansoon/PhysicsEngine.js-2D@master/temp/Games/BBQ-Sort/temp/minisausage.png"},{alias:"salmon",src:"https://cdn.jsdelivr.net/gh/marcustansoon/PhysicsEngine.js-2D@master/temp/Games/BBQ-Sort/temp/bigfish.png"},{alias:"salmon-slice",src:"https://cdn.jsdelivr.net/gh/marcustansoon/PhysicsEngine.js-2D@master/temp/Games/BBQ-Sort/temp/minisalmon.png"},
{alias:"carrot",src:"https://cdn.jsdelivr.net/gh/marcustansoon/PhysicsEngine.js-2D@master/temp/Games/BBQ-Sort/temp/bigcarrot.png"},{alias:"carrot-slice",src:"https://cdn.jsdelivr.net/gh/marcustansoon/PhysicsEngine.js-2D@master/temp/Games/BBQ-Sort/temp/minicarrot.png"},{alias:"cheese",src:"https://cdn.jsdelivr.net/gh/marcustansoon/PhysicsEngine.js-2D@master/temp/Games/BBQ-Sort/temp/bigcheese.png"},{alias:"cheese-slice",src:"https://cdn.jsdelivr.net/gh/marcustansoon/PhysicsEngine.js-2D@master/temp/Games/BBQ-Sort/temp/minicheese.png"},
{alias:"crab",src:"https://cdn.jsdelivr.net/gh/marcustansoon/PhysicsEngine.js-2D@master/temp/Games/BBQ-Sort/temp/bigcrab.png"},{alias:"crab-slice",src:"https://cdn.jsdelivr.net/gh/marcustansoon/PhysicsEngine.js-2D@master/temp/Games/BBQ-Sort/temp/minicrab.png"},{alias:"drumstick",src:"https://cdn.jsdelivr.net/gh/marcustansoon/PhysicsEngine.js-2D@master/temp/Games/BBQ-Sort/temp/bigdrum.png"},{alias:"drumstick-slice",src:"https://cdn.jsdelivr.net/gh/marcustansoon/PhysicsEngine.js-2D@master/temp/Games/BBQ-Sort/temp/minidrum.png"},
{alias:"marshmallow",src:"https://cdn.jsdelivr.net/gh/marcustansoon/PhysicsEngine.js-2D@master/temp/Games/BBQ-Sort/temp/bigmallow.png"},{alias:"marshmallow-slice",src:"https://cdn.jsdelivr.net/gh/marcustansoon/PhysicsEngine.js-2D@master/temp/Games/BBQ-Sort/temp/minimarsh.png"},{alias:"greenpepper",src:"https://cdn.jsdelivr.net/gh/marcustansoon/PhysicsEngine.js-2D@master/temp/Games/BBQ-Sort/temp/bigpepper.png"},{alias:"greenpepper-slice",src:"https://cdn.jsdelivr.net/gh/marcustansoon/PhysicsEngine.js-2D@master/temp/Games/BBQ-Sort/temp/minipepper.png"},
{alias:"potato",src:"https://cdn.jsdelivr.net/gh/marcustansoon/PhysicsEngine.js-2D@master/temp/Games/BBQ-Sort/temp/bigpotato.png"},{alias:"potato-slice",src:"https://cdn.jsdelivr.net/gh/marcustansoon/PhysicsEngine.js-2D@master/temp/Games/BBQ-Sort/temp/minipotato.png"},{alias:"squid",src:"https://cdn.jsdelivr.net/gh/marcustansoon/PhysicsEngine.js-2D@master/temp/Games/BBQ-Sort/temp/bigsquid.png"},{alias:"squid-slice",src:"https://cdn.jsdelivr.net/gh/marcustansoon/PhysicsEngine.js-2D@master/temp/Games/BBQ-Sort/temp/minisquid.png"},
{alias:"steak",src:"https://cdn.jsdelivr.net/gh/marcustansoon/PhysicsEngine.js-2D@master/temp/Games/BBQ-Sort/temp/bigsteak.png"},{alias:"steak-slice",src:"https://cdn.jsdelivr.net/gh/marcustansoon/PhysicsEngine.js-2D@master/temp/Games/BBQ-Sort/temp/ministeak.png"},{alias:"cabbage",src:"https://cdn.jsdelivr.net/gh/marcustansoon/PhysicsEngine.js-2D@master/temp/Games/BBQ-Sort/temp/bigveggie.png"},{alias:"cabbage-slice",src:"https://cdn.jsdelivr.net/gh/marcustansoon/PhysicsEngine.js-2D@master/temp/Games/BBQ-Sort/temp/minicabbage.png"},
{alias:"mushroom",src:"https://cdn.jsdelivr.net/gh/marcustansoon/PhysicsEngine.js-2D@master/temp/Games/BBQ-Sort/temp/bigmushroom.png"},{alias:"mushroom-slice",src:"https://cdn.jsdelivr.net/gh/marcustansoon/PhysicsEngine.js-2D@master/temp/Games/BBQ-Sort/temp/minimushroom.png"},{alias:"background-music",src:"https://cdn.jsdelivr.net/gh/marcustansoon/PhysicsEngine.js-2D@master/temp/Games/BBQ-Sort/media/audioblocks-cinematic-night-jazz-club-background-music.mp3"},{alias:"error",src:"https://cdn.jsdelivr.net/gh/marcustansoon/PhysicsEngine.js-2D@master/temp/Games/BBQ-Sort/media/error.mp3"},
{alias:"up",src:"https://cdn.jsdelivr.net/gh/marcustansoon/PhysicsEngine.js-2D@master/temp/Games/BBQ-Sort/media/poink.mp3"},{alias:"down",src:"https://cdn.jsdelivr.net/gh/marcustansoon/PhysicsEngine.js-2D@master/temp/Games/BBQ-Sort/media/poink-retrace.mp3"},{alias:"level-entry",src:"https://cdn.jsdelivr.net/gh/marcustansoon/PhysicsEngine.js-2D@master/temp/Games/BBQ-Sort/media/entry-level.mp3"},{alias:"level-completion",src:"https://cdn.jsdelivr.net/gh/marcustansoon/PhysicsEngine.js-2D@master/temp/Games/BBQ-Sort/media/completion-level.wav"},
{alias:"level-failure",src:"https://cdn.jsdelivr.net/gh/marcustansoon/PhysicsEngine.js-2D@master/temp/Games/BBQ-Sort/media/brass-fail.mp3"},{alias:"single-completion",src:"https://cdn.jsdelivr.net/gh/marcustansoon/PhysicsEngine.js-2D@master/temp/Games/BBQ-Sort/media/audioblocks-happy-happy-award-achievement.mp3"},{alias:"button-click",src:"https://cdn.jsdelivr.net/gh/marcustansoon/PhysicsEngine.js-2D@master/temp/Games/BBQ-Sort/temp/text-notification.mp3"},{alias:"tick-checkbox",src:"https://cdn.jsdelivr.net/gh/marcustansoon/PhysicsEngine.js-2D@master/temp/Games/BBQ-Sort/temp/tick.mp3"},
{alias:"button-close-sound",src:"https://cdn.jsdelivr.net/gh/marcustansoon/PhysicsEngine.js-2D@master/temp/Games/BBQ-Sort/temp/analog-appliance-button-7.mp3"},{alias:"gameplay-music",src:"https://cdn.jsdelivr.net/gh/marcustansoon/PhysicsEngine.js-2D@master/temp/Games/BBQ-Sort/temp/8bittownthemesong.mp3"},{alias:"game-restart-sound",src:"https://cdn.jsdelivr.net/gh/marcustansoon/PhysicsEngine.js-2D@master/temp/Games/BBQ-Sort/temp/game-restart-audio.wav"},{alias:"game-start-sound",src:"https://cdn.jsdelivr.net/gh/marcustansoon/PhysicsEngine.js-2D@master/temp/Games/BBQ-Sort/temp/game-start.mp3"},
{alias:"ChunkFive",src:"https://cdn.jsdelivr.net/gh/marcustansoon/PhysicsEngine.js-2D@master/temp/Games/BBQ-Sort/temp/ChunkFive-Regular.otf"},{alias:"firework",src:"https://cdn.jsdelivr.net/gh/marcustansoon/PhysicsEngine.js-2D@master/temp/Games/BBQ-Sort/temp/firework-2.gif"},{alias:"raindrop",src:"https://cdn.jsdelivr.net/gh/marcustansoon/PhysicsEngine.js-2D@master/temp/Games/BBQ-Sort/temp/raindrop.gif"}],this.loadProgressCallback.bind(this));window&&window.webkit&&window.webkit.messageHandlers.cordova_iab.postMessage(JSON.stringify({type:"loadDone",
data:null}));this.isComplete=!0}loadProgressCallback(a){this.progress=k(100*a,2)}show(){this.app.stage.addChild(this.container)}hide(){this.app.stage.removeChild(this.container)}destroy(){this.objects.forEach(a=>{this.container.removeChild(a);a.destroy()});this.objects=[];this.isDestroyed=!0}update(){this.loadingText&&(this.loadingText.text=`Loading: ${this.progress}%`)}}class R{constructor(a){this.app=a;this.type="main-menu-scene";this.container=new PIXI.Container;this.objects=[];this.isDestroyed=
!1;this.createScene()}createScene(){var a=PIXI.Assets.get("bg-main-menu"),b=this.app.renderer.width/a.width;a=this.app.renderer.height/a.height;b=b>a?b:a;a=new PIXI.TextStyle({fontFamily:"Chunkfive Regular",fontSize:Math.round(b/.3*240)/10,fill:"#000000",dropShadow:!1,fontWeight:"normal",wordWrap:!0,wordWrapWidth:440,letterSpacing:2,lineJoin:"round"});var c=new PIXI.BlurFilter;c.blur=20;var d=new PIXI.Sprite(PIXI.Assets.get("bg-main-menu"));d.anchor.set(.5);d.scale.set(k(b,2));d.position.set(this.app.screen.width/
2,this.app.screen.height/2);this.objects.push(d);this.container.addChild(d);d=new PIXI.Graphics;d.beginFill("#000000");d.alpha=0;d.drawRect(Math.round(-b/.4*200),Math.round(-b/.4*150),Math.round(b/.4*400),Math.round(b/.4*300));d.endFill();d.position.set(this.app.screen.width/2,this.app.screen.height/2);d.filters=[c];this.objects.push(d);this.container.addChild(d);c=new PIXI.Sprite(PIXI.Assets.get("bg-main-menu-button"));c.anchor.set(.5);c.scale.set(k(b/.3*.5,2));c.position.set(this.app.screen.width/
2,this.app.screen.height/2);c.y-=b/.3*55;q(c);c.on("pointerdown",()=>{l("button-click");this.switchToPlayScene=!0});this.objects.push(c);this.container.addChild(c);d=new PIXI.Text("PLAY",a);d.anchor.set(.5);d.position.set(c.x,c.y);this.objects.push(d);this.container.addChild(d);c=new PIXI.Sprite(PIXI.Assets.get("bg-main-menu-button"));c.anchor.set(.5);c.scale.set(k(b/.3*.5,2));c.position.set(this.app.screen.width/2,this.app.screen.height/2);q(c);c.on("pointerdown",()=>{l("button-click");this.switchToSettingScene=
!0});this.objects.push(c);this.container.addChild(c);d=new PIXI.Text("SETTING",a);d.anchor.set(.5);d.position.set(c.x,c.y);this.objects.push(d);this.container.addChild(d);c=new PIXI.Sprite(PIXI.Assets.get("bg-main-menu-button"));c.anchor.set(.5);c.scale.set(k(b/.3*.5,2));c.position.set(this.app.screen.width/2,this.app.screen.height/2);q(c);c.on("pointerdown",()=>{l("button-click");window&&window.webkit&&window.webkit.messageHandlers.cordova_iab.postMessage(JSON.stringify({type:"quit",data:null}))});
c.y+=b/.3*55;this.objects.push(c);this.container.addChild(c);b=new PIXI.Text("QUIT",a);b.anchor.set(.5);b.position.set(c.x,c.y);this.objects.push(b);this.container.addChild(b);w=PIXI.Assets.get("background-music");x=PIXI.Assets.get("gameplay-music");C()}show(){this.app.stage.addChild(this.container)}hide(){this.app.stage.removeChild(this.container)}destroy(){this.objects.forEach(a=>{this.container.removeChild(a);a.destroy()});this.objects=[];this.isDestroyed=!0}update(){}}class S{constructor(a){this.app=
a;this.type="level-selection-scene";this.container=new PIXI.Container;this.objects=[];this.isDestroyed=!1;this.currentSelectedPage=0;this.createScene()}createScene(){var a=PIXI.Assets.get("bg-main-menu"),b=this.app.renderer.width/a.width,c=this.app.renderer.height/a.height;c=b>c?b:c;b=new PIXI.TextStyle({fontFamily:"Chunkfive Regular",fontSize:Math.round(c/.3*180)/10,fill:"#000000",dropShadow:!1,fontWeight:"normal",wordWrap:!0,wordWrapWidth:440,letterSpacing:2,lineJoin:"round"});var d=new PIXI.BlurFilter;
d.blur=5;a=new PIXI.Sprite(a);a.anchor.set(.5);a.scale.set(k(c,2));a.position.set(this.app.screen.width/2,this.app.screen.height/2);a.filters=[d];this.objects.push(a);this.container.addChild(a);a=new PIXI.Graphics;a.beginFill("#000000");a.alpha=.5;a.drawRect(Math.round(-this.app.renderer.width/2),Math.round(-this.app.renderer.height/2),Math.round(this.app.renderer.width),Math.round(this.app.renderer.height));a.endFill();a.position.set(this.app.screen.width/2,this.app.screen.height/2);this.objects.push(a);
this.container.addChild(a);c=PIXI.Assets.get("banner");a=.9*this.app.renderer.height/c.height;d=.9*this.app.renderer.width/c.width;a=d>a?a:d;c=new PIXI.Sprite(c);c.anchor.set(.5);c.scale.set(a);c.position.set(this.app.screen.width/2,this.app.screen.height/2);this.objects.push(c);this.container.addChild(c);d=PIXI.Assets.get("patty-running");var e=this.app.renderer.width/5/d.width,f=this.app.renderer.height/5/d.height;e=e<f?e:f;this.levelSelectionPages=[[]];f=0;for(let m=0;136>m;m++){9<=f&&(f=0,this.levelSelectionPages.push([]));
var g=-1.3+1.3*Math.floor(f/3);let u=-1.3+f%3*1.3,n=new PIXI.Sprite(d);n.anchor.set(.5);n.scale.set(k(e,2));n.position.set(this.app.screen.width/2+u*k(n.width,2),this.app.screen.height/2+g*k(n.height,2));n.level=m;m>t&&(n.tint="#3d3d3d");q(n);n.on("pointerdown",()=>{l("button-click");n.level>t||(this.selectedGameLevel=n.level,this.switchToGameScene=!0)});this.objects.push(n);this.container.addChild(n);g=new PIXI.Text(m+1,b);g.anchor.set(.5);g.position.set(n.x,n.y+n.height/2*1.1);this.objects.push(g);
this.container.addChild(g);this.levelSelectionPages[this.levelSelectionPages.length-1].push({levelSprite:n,textSprite:g});f++}b=new PIXI.Sprite(PIXI.Assets.get("left-button"));b.anchor.set(.5);b.scale.set(k(a/.67*.25,2));b.scale.x*=-1;b.position.set(this.app.screen.width/5,c.y+k(.5*c.height,2));q(b);b.on("pointerdown",()=>{l("button-click");this.currentSelectedPage?this.currentSelectedPage--:this.currentSelectedPage=this.levelSelectionPages.length-1});this.objects.push(b);this.container.addChild(b);
b=new PIXI.Sprite(PIXI.Assets.get("left-button"));b.anchor.set(.5);b.scale.set(k(a/.67*.25,2));b.position.set(this.app.screen.width/5*4,c.y+k(.5*c.height,2));q(b);b.on("pointerdown",()=>{l("button-click");this.currentSelectedPage=(this.currentSelectedPage+1)%this.levelSelectionPages.length});this.objects.push(b);this.container.addChild(b);b=new PIXI.Sprite(PIXI.Assets.get("close-button"));b.anchor.set(.5);b.scale.set(k(a/.67*.25,2));b.position.set(this.app.screen.width/6*5,c.y-k(.5*c.height,2));q(b);
b.on("pointerdown",()=>{l("button-close-sound");this.switchToMainMenuScene=!0});this.objects.push(b);this.container.addChild(b)}show(){this.app.stage.addChild(this.container)}hide(){this.app.stage.removeChild(this.container)}destroy(){this.levelSelectionPages=null;this.objects.forEach(a=>{this.container.removeChild(a);a.destroy()});this.objects=[];this.isDestroyed=!0}update(){for(let a=0;a<this.levelSelectionPages.length;a++)this.levelSelectionPages[a].forEach(b=>{this.currentSelectedPage===a?(b.textSprite.visible=
!0,b.levelSprite.visible=!0):(b.textSprite.visible=!1,b.levelSprite.visible=!1);b.levelSprite.tint=b.levelSprite.level<=t?"#ffffff":"#3d3d3d"})}}class T{constructor(a){this.app=a;this.type="setting-scene";this.container=new PIXI.Container;this.objects=[];this.isDestroyed=!1;this.createScene()}createScene(){var a=PIXI.Assets.get("bg-main-menu"),b=Math.max(this.app.renderer.width/a.width,this.app.renderer.height/a.height),c=new PIXI.TextStyle({fontFamily:"Chunkfive Regular",fontSize:Math.round(b/.18*
110)/10,fill:"#000000",dropShadow:!1,fontWeight:"normal",wordWrap:!0,wordWrapWidth:440,letterSpacing:2,lineJoin:"round"}),d=new PIXI.BlurFilter;d.blur=5;a=new PIXI.Sprite(a);a.anchor.set(.5);a.scale.set(k(b,2));a.position.set(this.app.screen.width/2,this.app.screen.height/2);a.filters=[d];this.objects.push(a);this.container.addChild(a);b=new PIXI.Graphics;b.beginFill("#000000");b.alpha=.5;b.drawRect(Math.round(-this.app.renderer.width/2),Math.round(-this.app.renderer.height/2),Math.round(this.app.renderer.width),
Math.round(this.app.renderer.height));b.endFill();b.position.set(this.app.screen.width/2,this.app.screen.height/2);this.objects.push(b);this.container.addChild(b);d=PIXI.Assets.get("banner");b=Math.min(.9*this.app.renderer.height/d.height,.9*this.app.renderer.width/d.width);d=new PIXI.Sprite(d);d.anchor.set(.5);d.scale.set(b);d.position.set(this.app.screen.width/2,this.app.screen.height/2);this.objects.push(d);this.container.addChild(d);a=new PIXI.Text("SOUND EFFECT",c);a.anchor.set(.5);let e=new PIXI.Sprite(A?
PIXI.Assets.get("tick"):PIXI.Assets.get("untick"));e.anchor.set(.5);e.scale.set(b/.5*.15);q(e);e.on("pointerdown",()=>{A=!A;window.localStorage.setItem("sound-effect",A?1:0);e.texture=A?PIXI.Assets.get("tick"):PIXI.Assets.get("untick");l("tick-checkbox")});a.position.set(this.app.renderer.width/2-(a.width+2*e.width)/2+a.width/2,this.app.renderer.height/2-d.height/4);this.objects.push(a);this.container.addChild(a);e.position.set(this.app.screen.width/2+(a.width+2*e.width)/2-e.width/2,this.app.renderer.height/
2-d.height/4);this.objects.push(e);this.container.addChild(e);let f=new PIXI.Text("MUSIC",c);f.anchor.set(.5);f.position.set(a.x,this.app.renderer.height/2);this.objects.push(f);this.container.addChild(f);let g=new PIXI.Sprite(y?PIXI.Assets.get("tick"):PIXI.Assets.get("untick"));g.anchor.set(.5);g.scale.set(b/.5*.15);g.position.set(e.x,this.app.renderer.height/2);q(g);g.on("pointerdown",()=>{(y=!y)?"background-music"===H?!w.isPlaying&&C():!gameplayMusic.isPlaying&&gameplayMusicPlay():"background-music"===
H?w.stop():gameplayMusic.stop();window.localStorage.setItem("music",y?1:0);g.texture=y?PIXI.Assets.get("tick"):PIXI.Assets.get("untick");l("tick-checkbox")});this.objects.push(g);this.container.addChild(g);c=new PIXI.Text("VIBRATION",c);c.anchor.set(.5);c.position.set(a.x,this.app.renderer.height/2+d.height/4);this.objects.push(c);this.container.addChild(c);let m=new PIXI.Sprite(D?PIXI.Assets.get("tick"):PIXI.Assets.get("untick"));m.anchor.set(.5);m.scale.set(b/.5*.15);m.position.set(e.x,this.app.renderer.height/
2+d.height/4);q(m);m.on("pointerdown",()=>{D=!D;window.localStorage.setItem("vibration",D?1:0);m.texture=D?PIXI.Assets.get("tick"):PIXI.Assets.get("untick");l("tick-checkbox")});this.objects.push(m);this.container.addChild(m);c=new PIXI.Sprite(PIXI.Assets.get("close-button"));c.anchor.set(.5);c.scale.set(k(b/.67*.25,2));c.position.set(this.app.screen.width/6*5,d.y-k(.5*d.height,2));q(c);c.on("pointerdown",()=>{l("button-close-sound");this.switchToMainMenuScene=!0});this.objects.push(c);this.container.addChild(c)}show(){this.app.stage.addChild(this.container)}hide(){this.app.stage.removeChild(this.container)}destroy(){this.objects.forEach(a=>
{this.container.removeChild(a);a.destroy()});this.objects=[];this.isDestroyed=!0}update(){}}class U{constructor(){}createRectGraphic(a,b,c,d,e){return(new PIXI.Graphics).rect(a,b,c,d).fill(e)}createGlowFilter(){let a=new PIXI.ColorMatrixFilter;a.brightness(1.1,!1);a.contrast(1.1,!1);a.hue(100,!1);a.saturate(1.1,!1);return a}getParentSpriteNameByChildName(a){switch(a){case "carrot-slice":return"carrot";case "cheese-slice":return"cheese";case "crab-slice":return"crab";case "drumstick-slice":return"drumstick";
case "marshmallow-slice":return"marshmallow";case "mushroom-slice":return"mushroom";case "greenpepper-slice":return"greenpepper";case "potato-slice":return"potato";case "squid-slice":return"squid";case "steak-slice":return"steak";case "cabbage-slice":return"cabbage";case "eggplant-slice":return"eggplant";case "prawn":return"lobster";case "mini-sausage":return"sausage";case "salmon-slice":return"salmon";case "cucumber-slice":return"cucumber";case "meat":return"chicken-wing";default:return"chicken-wing"}}}
class V extends U{constructor(a,b){super();this.maxFoodPerStick=b;this.content=[];this.container=new PIXI.Container;this.scale=a;this.createStick();this.createInteractiveRect();this.filter=super.createGlowFilter();this.isSelected=!1}createStick(){let a=new PIXI.Sprite(PIXI.Assets.get("bbq-stick"));a.anchor.set(.5);a.scale.set(this.scale);this.stick={type:"bbq-stick",obj:a};this.container.addChild(a)}createInteractiveRect(){let a=super.createRectGraphic(-110*this.scale,.5*-this.stick.obj.height,220*
this.scale,this.stick.obj.height,"#0f0");a.interactive=!0;a.buttonMode=!0;a.alpha=0;a.cursor="pointer";a.on("pointerdown",()=>this.onClick());this.rect={obj:a,type:"rect"};this.container.addChild(a)}onClick(){this.completedPuzzleSprite||((this.isSelected=!this.isSelected)?(this.selectionTimestamp=Date.now(),this.playUpAnimation()):(this.selectionTimestamp=null,this.playDownAnimation()))}createChildSprite(a){let b=new PIXI.Sprite(PIXI.Assets.get(a));b.anchor.set(.5);b.x=-500;b.y=-500;this.content.push({obj:b,
type:a});this.scaleTo(this.scale);this.container.addChild(b)}createParentSprite(a){let b=new PIXI.Sprite(PIXI.Assets.get(super.getParentSpriteNameByChildName(a)));b.anchor.set(.5);b.x=this.stick.obj.x;b.y=this.stick.obj.y;this.completedPuzzleSprite={obj:b,type:a};this.scaleTo(this.stick.obj.scale.x);this.container.addChild(b)}getTopSpriteInfo(){let a=this.content.length?this.content[this.content.length-1].type:null,b=0;for(let c=this.content.length-1;0<=c&&a===this.content[c].type;c--)b++;return{type:a,
length:b}}setCompletion(){let a=this.getTopSpriteInfo();for(let b=0;b<a.length;b++){let c=this.content.pop();this.container.removeChild(c.obj);c.obj.destroy()}this.createParentSprite(a.type)}unloadTopSprites(){let a=this.getTopSpriteInfo();for(let b=0;b<a.length;b++){let c=this.content.pop();this.container.removeChild(c.obj);c.obj.destroy()}a.length&&this.isSelected&&(this.isSelected=!1,this.selectionTimestamp=null)}loadTopSprites(a,b){for(let c=0;c<b;c++)this.createChildSprite(a);this.isSelected=
!1;this.selectionTimestamp=null;this.playPlacementAnimation(b)}getDefaultYCoordinate(a){let b=this.stick.obj.height/6;return this.stick.obj.y+this.stick.obj.height/2-b*(.5+(6-this.maxFoodPerStick))-b*a}moveTo(a,b){this.stick.obj.x=a;this.stick.obj.y=b;this.rect.obj.x=this.stick.obj.x;this.rect.obj.y=this.stick.obj.y;this.content.forEach((c,d)=>{c.obj.y=this.getDefaultYCoordinate(d);c.obj.x=this.stick.obj.x})}scaleTo(a){this.scale=a;this.stick.obj.scale.set(a);this.content.forEach((b,c)=>{b.obj.scale.set(a)});
this.completedPuzzleSprite&&this.completedPuzzleSprite.obj.scale.set(Math.floor(a/.4*8.5)/10)}playUpAnimation(){this.animation="UP";this.selectionNextState=this.selectionCurrentState="WAIT";this.selectionAnimation={maxUpDistance:Math.floor(50*this.stick.obj.scale.x/.4*10)/10,speed:Math.floor(6*this.stick.obj.scale.x/.4*10)/10}}playDownAnimation(){this.animation="DOWN";this.selectionNextState=this.selectionCurrentState="WAIT";this.selectionAnimation={maxDownDistance:Math.floor(50*this.stick.obj.scale.x/
.4*10)/10,speed:Math.floor(6*this.stick.obj.scale.x/.4*10)/10}}playPlacementAnimation(a){this.animation="PLACEMENT";this.selectionNextState=this.selectionCurrentState="WAIT";this.selectionAnimation={maxDownDistance:Math.floor(50*this.stick.obj.scale.x/.4*10)/10,speed:Math.floor(6*this.stick.obj.scale.x/.4*10)/10,count:a}}destroy(){this.container.removeChild(this.stick.obj);this.stick.obj.destroy();this.stick=null;this.container.removeChild(this.rect.obj);this.rect.obj.destroy();this.rect=null;this.completedPuzzleSprite&&
(this.container.removeChild(this.completedPuzzleSprite.obj),this.completedPuzzleSprite.obj.destroy(),this.completedPuzzleSprite=null);this.content.forEach(a=>{this.container.removeChild(a.obj);a.obj.destroy()});this.content=[];this.container.destroy();this.container=null;this.filter.destroy();this.filter=null;this.isDestroyed=!0}update(){var a=null;switch(this.selectionCurrentState){case "IDLE":this.selectionNextState="WAIT";break;case "WAIT":this.selectionNextState="UP"===this.animation?"PRE-UP":
"DOWN"===this.animation?"PRE-DOWN":"PLACEMENT"===this.animation?"PRE-PLACEMENT":"WAIT";break;case "PRE-PLACEMENT":a=this.content.length-this.selectionAnimation.count;for(var b=this.content.length-1;0<=b;b--){if(b>=a){var c=this.getDefaultYCoordinate(b)-this.selectionAnimation.maxDownDistance;this.content[b].obj.y=c}else this.content[b].obj.y=this.getDefaultYCoordinate(b);this.content[b].obj.x=this.stick.obj.x;this.content[b].obj.filters=null}this.selectionNextState="PLACEMENT";break;case "PLACEMENT":a=
this.content.length-this.selectionAnimation.count;for(b=this.content.length-1;0<=b&&!(b<a);b--)c=this.getDefaultYCoordinate(b)-this.selectionAnimation.maxDownDistance,Math.abs(c-this.content[b].obj.y)>=this.selectionAnimation.maxDownDistance?(this.selectionNextState="WAIT",this.animation=null,this.content[b].obj.y=this.getDefaultYCoordinate(b)):(this.content[b].obj.y+=this.selectionAnimation.speed,this.selectionNextState="PLACEMENT");break;case "PRE-UP":l("up");b=!1;for(c=this.content.length-1;0<=
c;c--)this.content[c].obj.y=this.getDefaultYCoordinate(c),this.content[c].obj.x=this.stick.obj.x,a||(a=this.content[c].type),a!==this.content[c].type||b?b=!0:this.content[c].obj.filters=[this.filter];this.selectionNextState="UP";break;case "UP":for(b=this.content.length-1;0<=b;b--){a||(a=this.content[b].type);if(a!==this.content[b].type)break;c=this.getDefaultYCoordinate(b);Math.abs(c-this.content[b].obj.y)>=this.selectionAnimation.maxUpDistance?(this.selectionNextState="WAIT",this.animation=null,
this.content[b].obj.y=c-this.selectionAnimation.maxUpDistance):(this.content[b].obj.y-=this.selectionAnimation.speed,this.selectionNextState="UP")}break;case "PRE-DOWN":l("down");for(b=this.content.length-1;0<=b;b--){a||(a=this.content[b].type);if(a!==this.content[b].type)break;this.content[b].obj.filters=null;c=this.getDefaultYCoordinate(b)-this.selectionAnimation.maxDownDistance;this.content[b].obj.y=c;this.content[b].obj.x=this.stick.obj.x}this.selectionNextState="DOWN";break;case "DOWN":for(b=
this.content.length-1;0<=b;b--){a||(a=this.content[b].type);if(a!==this.content[b].type)break;c=this.getDefaultYCoordinate(b)-this.selectionAnimation.maxDownDistance;Math.abs(c-this.content[b].obj.y)>=this.selectionAnimation.maxDownDistance?(this.selectionNextState="WAIT",this.animation=null,this.content[b].obj.y=this.getDefaultYCoordinate(b)):(this.content[b].obj.y+=this.selectionAnimation.speed,this.selectionNextState="DOWN")}break;default:this.selectionNextState="IDLE"}this.selectionCurrentState=
this.selectionNextState}}class I{constructor(a,b){this.app=a;this.level=b;this.type="gameplay-scene";this.container=new PIXI.Container;this.objects=[];this.sticksGroup=[];this.isPuzzleFailed=this.isPuzzleCompleted=this.isDestroyed=!1;this.createScene()}createScene(){var a=PIXI.Assets.get("bg-gameplay-1"),b=this.app.renderer.width/a.width,c=this.app.renderer.height/a.height;b=b>c?b:c;var d=new PIXI.TextStyle({fontFamily:"Chunkfive Regular",fontSize:Math.round(b/.3*240)/10,fill:"#FFFFFF",dropShadow:!1,
fontWeight:"normal",wordWrap:!0,wordWrapWidth:440,letterSpacing:2,lineJoin:"round"});c=new PIXI.TextStyle({fontFamily:"Chunkfive Regular",fontSize:Math.round(b/.46*250)/10,fill:"#000000",dropShadow:!1,fontWeight:"normal",wordWrap:!0,wordWrapWidth:440,letterSpacing:2,lineJoin:"round"});this.blurFilter=new PIXI.BlurFilter;this.blurFilter.blur=5;a=new PIXI.Sprite(a);a.anchor.set(.5);a.scale.set(k(b,2));a.position.set(this.app.screen.width/2,this.app.screen.height/2);a.filters=[this.blurFilter];this.objects.push(a);
this.container.addChild(a);a=new PIXI.Graphics;a.beginFill("#000000");a.alpha=.4;a.drawRect(Math.round(-this.app.renderer.width/2),Math.round(-this.app.renderer.height/2),Math.round(this.app.renderer.width),Math.round(this.app.renderer.height));a.endFill();a.position.set(this.app.screen.width/2,this.app.screen.height/2);this.objects.push(a);this.container.addChild(a);a=new PIXI.Sprite(PIXI.Assets.get("wooden-banner"));a.anchor.set(.5);a.scale.set(k(b/.25*.15,2));a.position.set(this.app.screen.width/
2,a.height/2);this.objects.push(a);this.container.addChild(a);d=new PIXI.Text(this.level+1,d);d.anchor.set(.5);d.position.set(a.x,a.y);this.objects.push(d);this.container.addChild(d);d=new PIXI.Sprite(PIXI.Assets.get("setting-icon"));d.anchor.set(.5);d.scale.set(k(b/.45*.16,2));d.position.set(5*this.app.screen.width/6,a.height/2);q(d);d.on("pointerdown",()=>{l("button-close-sound");this.showPrompt()});this.settingIcon=d;this.objects.push(d);this.container.addChild(d);var e;let f;switch(this.level){case 0:d=
2;a=4;f=e=3;var g=["drumstick-slice","mini-sausage"];break;case 1:case 2:case 3:case 4:d=2;a=4;e=3;f=4;g=["drumstick-slice","mini-sausage"];break;case 5:case 6:case 7:case 8:case 9:d=3;a=4;e=5;f=3;g=["drumstick-slice","mini-sausage","cabbage-slice"];break;case 10:case 11:case 12:case 13:case 14:d=3;a=4;f=e=5;g=["drumstick-slice","mini-sausage","cabbage-slice"];break;case 15:case 16:case 17:case 18:case 19:d=3;a=4;e=6;f=3;g=["drumstick-slice","mini-sausage","cabbage-slice","eggplant-slice"];break;
case 20:case 21:case 22:case 23:case 24:d=3;a=4;e=6;f=4;g=["drumstick-slice","mini-sausage","cabbage-slice","eggplant-slice"];break;case 25:case 26:case 27:case 28:case 29:d=3;a=4;e=6;f=5;g=["drumstick-slice","mini-sausage","cabbage-slice","eggplant-slice"];break;case 30:case 31:case 32:case 33:case 34:d=3;a=5;e=7;f=3;g=["drumstick-slice","mini-sausage","cabbage-slice","eggplant-slice","salmon-slice"];break;case 35:case 36:case 37:case 38:case 39:d=3;a=5;e=7;f=4;g=["drumstick-slice","mini-sausage",
"cabbage-slice","eggplant-slice","salmon-slice"];break;case 40:case 41:case 42:case 43:case 44:case 45:d=3;a=5;e=7;f=5;g=["drumstick-slice","mini-sausage","cabbage-slice","eggplant-slice","salmon-slice"];break;case 46:case 47:case 48:case 49:case 50:d=3;a=6;e=8;f=3;g="drumstick-slice mini-sausage cabbage-slice eggplant-slice salmon-slice prawn".split(" ");break;case 51:case 52:case 53:case 54:case 55:d=3;a=6;e=8;f=4;g="drumstick-slice mini-sausage cabbage-slice eggplant-slice salmon-slice prawn".split(" ");
break;case 56:case 57:case 58:case 59:case 60:d=3;a=6;e=8;f=5;g="drumstick-slice mini-sausage cabbage-slice eggplant-slice salmon-slice prawn".split(" ");break;case 61:case 62:case 63:case 64:case 65:d=3;a=6;e=9;f=3;g="drumstick-slice mini-sausage cabbage-slice eggplant-slice salmon-slice prawn cheese-slice".split(" ");break;case 66:case 67:case 68:case 69:case 70:d=3;a=6;e=9;f=4;g="drumstick-slice mini-sausage cabbage-slice eggplant-slice salmon-slice prawn cheese-slice".split(" ");break;case 71:case 72:case 73:case 74:case 75:d=
3;a=6;e=9;f=5;g="drumstick-slice mini-sausage cabbage-slice eggplant-slice salmon-slice prawn cheese-slice".split(" ");break;case 76:case 77:case 78:case 79:case 80:d=3;a=6;e=10;f=3;g="drumstick-slice mini-sausage cabbage-slice eggplant-slice salmon-slice prawn cheese-slice crab-slice".split(" ");break;case 81:case 82:case 83:case 84:case 85:d=3;a=6;e=10;f=4;g="drumstick-slice mini-sausage cabbage-slice eggplant-slice salmon-slice prawn cheese-slice crab-slice".split(" ");break;case 86:case 87:case 88:case 89:case 90:d=
3;a=6;e=10;f=5;g="drumstick-slice mini-sausage cabbage-slice eggplant-slice salmon-slice prawn cheese-slice crab-slice".split(" ");break;case 91:case 92:case 93:case 94:case 95:d=3;a=7;e=12;f=3;g="drumstick-slice mini-sausage cabbage-slice eggplant-slice salmon-slice prawn cheese-slice crab-slice marshmallow-slice potato-slice".split(" ");break;case 96:case 97:case 98:case 99:case 100:d=3;a=7;e=12;f=4;g="drumstick-slice mini-sausage cabbage-slice eggplant-slice salmon-slice prawn cheese-slice crab-slice marshmallow-slice potato-slice".split(" ");
break;case 101:case 102:case 103:case 104:case 105:d=3;a=7;e=12;f=5;g="drumstick-slice mini-sausage cabbage-slice eggplant-slice salmon-slice prawn cheese-slice crab-slice marshmallow-slice potato-slice".split(" ");break;case 106:case 107:case 108:case 109:case 110:d=4;a=6;e=14;f=3;g="drumstick-slice mini-sausage cabbage-slice eggplant-slice salmon-slice prawn cheese-slice crab-slice marshmallow-slice potato-slice carrot-slice squid-slice".split(" ");break;case 111:case 112:case 113:case 114:case 115:d=
4;a=6;e=14;f=4;g="drumstick-slice mini-sausage cabbage-slice eggplant-slice salmon-slice prawn cheese-slice crab-slice marshmallow-slice potato-slice carrot-slice squid-slice".split(" ");break;case 116:case 117:case 118:case 119:case 120:d=4;a=6;e=14;f=5;g="drumstick-slice mini-sausage cabbage-slice eggplant-slice salmon-slice prawn cheese-slice crab-slice marshmallow-slice potato-slice carrot-slice squid-slice".split(" ");break;case 121:case 122:case 123:case 124:case 125:d=4;a=7;e=16;f=3;g="drumstick-slice mini-sausage cabbage-slice eggplant-slice salmon-slice prawn cheese-slice crab-slice marshmallow-slice potato-slice carrot-slice squid-slice steak-slice greenpepper-slice".split(" ");
break;case 126:case 127:case 128:case 129:case 130:d=4;a=7;e=16;f=4;g="drumstick-slice mini-sausage cabbage-slice eggplant-slice salmon-slice prawn cheese-slice crab-slice marshmallow-slice potato-slice carrot-slice squid-slice steak-slice greenpepper-slice".split(" ");break;case 131:case 132:case 133:case 134:case 135:d=4;a=7;e=16;f=5;g="drumstick-slice mini-sausage cabbage-slice eggplant-slice salmon-slice prawn cheese-slice crab-slice marshmallow-slice potato-slice carrot-slice squid-slice steak-slice greenpepper-slice".split(" ");
break;default:d=4,a=7,e=16,f=5,g="drumstick-slice mini-sausage cabbage-slice eggplant-slice salmon-slice prawn cheese-slice crab-slice marshmallow-slice potato-slice carrot-slice squid-slice steak-slice greenpepper-slice".split(" ")}let m=Math.min(r.renderer.width/220/a,r.renderer.height/d/900),u=[];g.forEach(E=>{let z=f;for(;z--;)u.push(E)});this.shuffle(u);this.shuffle(u);this.shuffle(u);let n=g=0,J=0;for(let E=0;E<e;E++){let z=new V(m,f);for(let N=0;N<f;N++){let O=u.pop();if(!O)break;z.createChildSprite(O)}z.scaleTo(m);
n++;g+=r.renderer.width/a;E||(J=r.renderer.height/d);0===n%a&&(n=1,g=r.renderer.width/a,J+=r.renderer.height/d);z.moveTo(g,J);this.container.addChild(z.container);this.sticksGroup.push(z)}this.maxFoodPerStick=f;d=PIXI.Assets.get("banner");a=Math.min(.9*this.app.renderer.height/d.height,.9*this.app.renderer.width/d.width);d=new PIXI.Sprite(d);d.anchor.set(.5);d.scale.set(a);d.position.set(this.app.screen.width/2,this.app.screen.height/2);this.banner=d;this.objects.push(d);e=new PIXI.Sprite(PIXI.Assets.get("close-button"));
e.anchor.set(.5);e.scale.set(k(a/.67*.25,2));e.position.set(this.app.screen.width/6*5,d.y-k(.5*d.height,2));q(e);e.on("pointerdown",()=>{l("button-close-sound");this.hidePrompt()});this.backButton=e;this.objects.push(e);a=new PIXI.Sprite(PIXI.Assets.get("bg-main-menu-button"));a.anchor.set(.5);a.alpha=1;a.scale.set(k(b/.46*.5,2));a.position.set(d.x,d.y-a.height);q(a);a.on("pointerdown",()=>{l("game-restart-sound");this.switchToSameGameLevelScene=!0});this.bgTextRestart=a;this.objects.push(a);e=new PIXI.Text("RESTART",
c);e.anchor.set(.5);e.position.set(a.x,a.y);this.restartText=e;this.objects.push(e);a=new PIXI.Sprite(PIXI.Assets.get("bg-main-menu-button"));a.anchor.set(.5);a.alpha=1;a.scale.set(k(b/.46*.5,2));a.position.set(d.x,d.y+a.height);q(a);a.on("pointerdown",()=>{l("button-click");x.stop();w.stop();C();this.switchToMainMenuScene=!0});this.bgTextQuit=a;this.objects.push(a);b=new PIXI.Text("QUIT",c);b.anchor.set(.5);b.position.set(a.x,a.y);this.quitText=b;this.objects.push(b);this.createClouds()}shuffle(a){for(let b=
a.length-1;0<b;b--){const c=Math.floor(Math.random()*(b+1));[a[b],a[c]]=[a[c],a[b]]}}showPrompt(){this.sticksGroup.forEach(a=>{this.container.removeChild(a.container)});this.container.addChild(this.banner);this.container.addChild(this.backButton);this.container.addChild(this.bgTextRestart);this.container.addChild(this.restartText);this.container.addChild(this.bgTextQuit);this.container.addChild(this.quitText);this.container.removeChild(this.settingIcon)}hidePrompt(){this.sticksGroup.forEach(a=>{this.container.addChild(a.container)});
this.container.removeChild(this.backButton);this.container.removeChild(this.banner);this.container.removeChild(this.bgTextRestart);this.container.removeChild(this.restartText);this.container.removeChild(this.bgTextQuit);this.container.removeChild(this.quitText);this.container.addChild(this.settingIcon)}show(){this.app.stage.addChild(this.container);this.showCloudsExitEffect()}createClouds(){let a=PIXI.Assets.get("cloud");var b=new PIXI.Sprite(a);b.anchor.set(.5);b.scale.set(this.app.renderer.height/
a.height);b.position.set(b.width/2,this.app.screen.height/2);this.leftCloud=b;this.objects.push(b);b=new PIXI.Sprite(a);b.anchor.set(.5);b.scale.set(this.app.renderer.height/a.height);b.scale.x=-b.scale.x;b.position.set(this.app.renderer.width-b.width/2,this.app.screen.height/2);this.rightCloud=b;this.objects.push(b)}showCloudsExitEffect(){this.cloudSpeed=0;this.displayCloudExitEffect=!0;this.container.addChild(this.leftCloud);this.container.addChild(this.rightCloud)}hide(){this.app.stage.removeChild(this.container)}destroy(){this.blurFilter.destroy();
this.blurFilter=null;this.objects.forEach(a=>{this.container.removeChild(a);a.destroy()});this.sticksGroup.forEach(a=>{this.container.removeChild(a.container);a.destroy()});this.sticksGroup=[];this.container.destroy();this.rightCloud=this.leftCloud=this.settingIcon=this.backButton=this.banner=this.restartText=this.bgTextRestart=this.quitText=this.bgTextQuit=this.container=null;this.isDestroyed=!0}updateCloudAnimation(){this.displayCloudExitEffect&&(this.leftCloud.x-=this.cloudSpeed,this.rightCloud.x+=
this.cloudSpeed,this.cloudSpeed+=.1,this.leftCloud.x<-this.leftCloud.width&&(this.displayCloudExitEffect=!1,this.container.removeChild(this.leftCloud),this.container.removeChild(this.rightCloud),console.log("stop")))}update(){this.updateCloudAnimation();let a=!0,b=!0;for(let g=0;g<this.sticksGroup.length;g++){var c=this.sticksGroup[g];c.completedPuzzleSprite||0===c.content.length||(a=!1);var d=c.getTopSpriteInfo(),e=this.sticksGroup.filter((m,u)=>g!==u&&!m.completedPuzzleSprite);for(var f=0;f<e.length;f++){let m=
e[f].getTopSpriteInfo();if(0===e[f].content.length||m.type===d.type&&e[f].content.length+d.length<=this.maxFoodPerStick){b=!1;break}}c.update();if(c.isSelected)if(e=this.sticksGroup.filter((m,u)=>m.isSelected&&g!==u),e.length||c.content.length)for(f=0;f<e.length;){c.selectionTimestamp<=e[f].selectionTimestamp?(d=c,c=e[f]):d=e[f];e=d.getTopSpriteInfo();f=c.getTopSpriteInfo();if(f.length&&e.type!==f.type){d.onClick();c.onClick();l("error");console.log("err");break}if(c.content.length+e.length>this.maxFoodPerStick){d.onClick();
c.onClick();l("error");console.log("err2");break}l("single-completion");d.unloadTopSprites();c.loadTopSprites(e.type,e.length);c.getTopSpriteInfo().length===this.maxFoodPerStick&&c.setCompletion();break}else console.log("empty"),c.onClick()}a&&(this.isPuzzleCompleted=!0,l("level-completion",{volume:2}));b&&(this.isPuzzleFailed=!0,l("level-failure",{volume:2}))}}class W{constructor(a){this.app=a;this.level=0;this.type="game-complete-scene";this.container=new PIXI.Container;this.objects=[];this.isDestroyed=
!1;this.createScene()}createScene(){var a=PIXI.Assets.get("bg-gameplay-1"),b=this.app.renderer.width/a.width;a=this.app.renderer.height/a.height;b=b>a?b:a;a=new PIXI.TextStyle({fontFamily:"Chunkfive Regular",fontSize:Math.round(b/.46*240)/10,fill:"#000000",dropShadow:!1,fontWeight:"normal",wordWrap:!0,wordWrapWidth:440,letterSpacing:2,lineJoin:"round"});var c=new PIXI.Graphics;c.beginFill("#000000");c.alpha=0;c.drawRect(Math.round(-this.app.renderer.width/2),Math.round(-this.app.renderer.height/2),
Math.round(this.app.renderer.width),Math.round(this.app.renderer.height));c.endFill();c.position.set(this.app.screen.width/2,this.app.screen.height/2);this.rect=c;this.objects.push(c);this.container.addChild(c);var d=PIXI.Assets.get("level-completion-bg");this.scaleBanner=c=Math.min(this.app.renderer.width/d.width,this.app.renderer.height/d.height);var e=new PIXI.Sprite(PIXI.Assets.get("light-rotate-1"));e.anchor.set(.5);e.alpha=0;e.scale.set(k(c/.644,2));e.position.set(this.app.screen.width/2,this.app.screen.height/
2);this.light1=e;this.objects.push(e);this.container.addChild(e);e=new PIXI.Sprite(PIXI.Assets.get("light-rotate-2"));e.anchor.set(.5);e.alpha=0;e.scale.set(k(c/.644,2));e.position.set(this.app.screen.width/2,this.app.screen.height/2);this.light2=e;this.objects.push(e);this.container.addChild(e);d=new PIXI.Sprite(d);d.anchor.set(.5);d.alpha=0;d.scale.set(k(c,2));d.position.set(this.app.screen.width/2,this.app.screen.height/2);this.banner=d;this.objects.push(d);this.container.addChild(d);c=new PIXI.Sprite(PIXI.Assets.get("bg-main-menu-button"));
c.anchor.set(.5);c.alpha=0;c.scale.set(k(b/.46*.5,2));c.position.set(this.app.screen.width/2,this.app.screen.height/2+2*d.width/3);c.y-=b/.46*55;q(c);c.on("pointerdown",()=>{l("game-start-sound");this.switchToNextGameLevelScene=!0});this.bgTextPlay=c;this.objects.push(c);this.container.addChild(c);a=new PIXI.Text("NEXT LEVEL",a);a.anchor.set(.5);a.alpha=0;a.position.set(c.x,c.y);this.playText=a;this.objects.push(a);this.container.addChild(a);a=new PIXI.Sprite(PIXI.Assets.get("close-button"));a.anchor.set(.5);
a.alpha=0;a.scale.set(k(b/.46*.25,2));a.position.set(this.app.screen.width/6*5,d.y-k(.5*d.height,2));q(a);a.on("pointerdown",()=>{l("button-close-sound");this.switchToMainMenuScene=!0;x.stop();w.stop();C()});this.backButton=a;this.objects.push(a);this.container.addChild(a);this.container.addChild(PIXI.Assets.get("firework"))}show(){this.app.stage.addChild(this.container);PIXI.Assets.get("firework").play()}hide(){PIXI.Assets.get("firework").stop();this.app.stage.removeChild(this.container)}reset(){this.banner.alpha=
0;this.backButton.alpha=0;this.bgTextPlay.alpha=0;this.playText.alpha=0;this.light1.alpha=0;this.light2.alpha=0;this.rect.alpha=0;this.animation="PRE-ZOOM-IN-1"}destroy(){this.objects.forEach(a=>{this.container.removeChild(a);a.destroy()});this.objects=null;this.container.destroy();this.rect=this.light2=this.light1=this.playText=this.bgTextPlay=this.backButton=this.banner=this.container=null;this.isDestroyed=!0}update(){switch(this.animation){case "PRE-ZOOM-IN-1":this.banner.scale.x=3*this.scaleBanner;
this.banner.scale.y=3*this.scaleBanner;this.delayFirework=160;this.alpha=this.count=0;this.animation="PRE-ZOOM-IN-2";break;case "PRE-ZOOM-IN-2":--this.delayFirework;0>=this.delayFirework&&(this.animation="ZOOM-IN-ACC");break;case "ZOOM-IN-ACC":this.banner.scale.x=4*this.scaleBanner+this.count;this.banner.scale.y=4*this.scaleBanner+this.count;this.count-=4*this.scaleBanner/90;this.alpha+=.01;this.light1.alpha=Math.min(1,this.alpha);this.light2.alpha=Math.min(1,this.alpha);this.banner.alpha=Math.min(1,
this.alpha);this.rect.alpha=Math.min(.4,this.alpha);this.banner.scale.x<=2*this.scaleBanner&&(this.animation="ZOOM-IN");break;case "ZOOM-IN":this.banner.scale.x=4*this.scaleBanner+this.count;this.banner.scale.y=4*this.scaleBanner+this.count;this.count-=4*this.scaleBanner/90*1.2;this.alpha+=.012;this.light1.alpha=Math.min(1,this.alpha);this.light2.alpha=Math.min(1,this.alpha);this.banner.alpha=Math.min(1,this.alpha);this.rect.alpha=Math.min(.4,this.alpha);this.banner.scale.x<=this.scaleBanner&&(this.animation=
"IDLE");break;case "IDLE":this.banner.scale.x=this.scaleBanner,this.banner.scale.y=this.scaleBanner,this.light1.alpha=1,this.light2.alpha=1,this.banner.alpha=1,this.backButton.alpha=1,this.bgTextPlay.alpha=1,this.playText.alpha=1}this.light2.rotation+=.01;this.light1.rotation+=.02;this.light2.rotation>=2*Math.PI&&(this.light2.rotation=0);this.light1.rotation>=2*Math.PI&&(this.light1.rotation=0)}}class X{constructor(a){this.app=a;this.level=0;this.type="game-fail-scene";this.container=new PIXI.Container;
this.objects=[];this.isDestroyed=!1;this.createScene()}createScene(){var a=PIXI.Assets.get("bg-gameplay-1"),b=this.app.renderer.width/a.width;a=this.app.renderer.height/a.height;b=b>a?b:a;a=new PIXI.TextStyle({fontFamily:"Chunkfive Regular",fontSize:Math.round(b/.46*250)/10,fill:"#000000",dropShadow:!1,fontWeight:"normal",wordWrap:!0,wordWrapWidth:440,letterSpacing:2,lineJoin:"round"});var c=new PIXI.Graphics;c.beginFill("#000000");c.alpha=0;c.drawRect(Math.round(-this.app.renderer.width/2),Math.round(-this.app.renderer.height/
2),Math.round(this.app.renderer.width),Math.round(this.app.renderer.height));c.endFill();c.position.set(this.app.screen.width/2,this.app.screen.height/2);this.rect=c;this.objects.push(c);this.container.addChild(c);this.banners=["level-failed-banner-1","level-failed-banner-2","level-failed-banner-3"];c=PIXI.Assets.get("level-failed-banner-1");var d=Math.min(this.app.renderer.width/c.width,this.app.renderer.height/c.height);this.scaleBanner=d;c=new PIXI.Sprite(c);c.anchor.set(.5);c.alpha=0;c.scale.set(k(d,
2));c.position.set(this.app.screen.width/2,this.app.screen.height/2);this.banner=c;this.objects.push(c);this.container.addChild(c);let e=new PIXI.Sprite(PIXI.Assets.get("level-failed-bg"));e.anchor.set(.5);e.alpha=0;e.rotation=.1;e.scale.set(k(d/.15*.22,2));e.position.set(this.app.screen.width/2,this.app.screen.height/2);this.bannerBg=e;this.objects.push(e);this.container.addChild(e);d=new PIXI.Sprite(PIXI.Assets.get("bg-main-menu-button"));d.anchor.set(.5);d.alpha=0;d.scale.set(k(b/.46*.5,2));d.position.set(this.app.screen.width/
2,this.app.screen.height/2+2*c.width/3);d.y-=b/.46*55;q(d);d.on("pointerdown",()=>{l("game-restart-sound");this.switchToSameGameLevelScene=!0});this.bgTextPlay=d;this.objects.push(d);this.container.addChild(d);a=new PIXI.Text("RESTART",a);a.anchor.set(.5);a.alpha=0;a.position.set(d.x,d.y);this.playText=a;this.objects.push(a);this.container.addChild(a);a=new PIXI.Sprite(PIXI.Assets.get("close-button"));a.anchor.set(.5);a.alpha=0;a.scale.set(k(b/.46*.25,2));a.position.set(this.app.screen.width/6*5,
c.y-k(.5*c.height,2));q(a);a.on("pointerdown",()=>{l("button-close-sound");this.switchToMainMenuScene=!0;x.stop();w.stop();C()});this.backButton=a;this.objects.push(a);this.container.addChild(a);this.container.addChild(PIXI.Assets.get("raindrop"))}show(){this.app.stage.addChild(this.container);PIXI.Assets.get("raindrop").play();this.banner.texture=PIXI.Assets.get(this.banners[Math.floor(this.banners.length*Math.random())])}hide(){PIXI.Assets.get("raindrop").stop();this.app.stage.removeChild(this.container)}reset(){this.banner.alpha=
0;this.bannerBg.alpha=0;this.backButton.alpha=0;this.bgTextPlay.alpha=0;this.playText.alpha=0;this.rect.alpha=0;this.animation="PRE-ZOOM-IN-1"}destroy(){this.objects.forEach(a=>{this.container.removeChild(a);a.destroy()});this.objects=null;this.container.destroy();this.rect=this.playText=this.bgTextPlay=this.backButton=this.bannerBg=this.banner=this.container=null;this.isDestroyed=!0}update(){switch(this.animation){case "PRE-ZOOM-IN-1":this.banner.scale.x=4*this.scaleBanner;this.banner.scale.y=4*
this.scaleBanner;this.delayFirework=140;this.alpha=this.count=0;this.animation="PRE-ZOOM-IN-2";break;case "PRE-ZOOM-IN-2":--this.delayFirework;0>=this.delayFirework&&(this.animation="ZOOM-IN-ACC");break;case "ZOOM-IN-ACC":this.banner.scale.x=4*this.scaleBanner+this.count;this.banner.scale.y=4*this.scaleBanner+this.count;this.count-=4*this.scaleBanner/90;this.alpha+=.007;this.banner.alpha=Math.min(1,this.alpha);this.rect.alpha=Math.min(.4,this.alpha);this.banner.scale.x<=2*this.scaleBanner&&(this.animation=
"ZOOM-IN");break;case "ZOOM-IN":this.banner.scale.x=4*this.scaleBanner+this.count;this.banner.scale.y=4*this.scaleBanner+this.count;this.count-=4*this.scaleBanner/90*1.5;this.alpha+=.01;this.banner.alpha=Math.min(1,this.alpha);this.rect.alpha=Math.min(.4,this.alpha);this.banner.scale.x<=this.scaleBanner&&(this.animation="ZOOM-IN-2",this.alpha=0);break;case "ZOOM-IN-2":this.banner.scale.x=this.scaleBanner;this.banner.scale.y=this.scaleBanner;this.banner.alpha=1;this.backButton.alpha=1;this.bgTextPlay.alpha=
1;this.playText.alpha=1;this.bannerBg.alpha=Math.min(1,this.alpha);this.alpha+=.015;1<=this.alpha&&(this.animation="IDLE");break;case "IDLE":this.banner.scale.x=this.scaleBanner,this.banner.scale.y=this.scaleBanner,this.banner.alpha=1,this.bannerBg.alpha=1,this.backButton.alpha=1,this.bgTextPlay.alpha=1,this.playText.alpha=1}}}const r=new PIXI.Application;await r.init({background:"#000",resizeTo:window});document.body.appendChild(r.canvas);let w,x,H,h,P=new Q(r);P.show();let F,K,L,p,G,B;h=P;let t=
parseInt(window.localStorage.getItem("level")??0),A=parseInt(window.localStorage.getItem("sound-effect")??1),y=parseInt(window.localStorage.getItem("music")??1),D=parseInt(window.localStorage.getItem("vibration")??1);r.ticker.add(a=>{h.update();h.isComplete&&!h.isDestroyed&&"loading-scene"===h.type?(F=new R(r),F.show(),h.hide(),h.destroy(),h=F):h.switchToPlayScene?(h.switchToPlayScene=!1,h.hide(),K||=new S(r),K.show(),h=K):h.switchToMainMenuScene?(h.switchToMainMenuScene=!1,h.hide(),F.show(),h=F,
p&&(p.hide(),p.destroy(),p=null)):h.switchToSettingScene?(h.switchToSettingScene=!1,h.hide(),L||=new T(r),L.show(),h=L):h.switchToGameScene?(w.stop(),x.stop(),H="gameplay-music",y&&x&&x.play({volume:.5,loop:1}),h.switchToGameScene=!1,h.hide(),p=new I(r,h.selectedGameLevel),p.show(),h=p):h.isPuzzleCompleted?(h.container.interactiveChildren=!1,console.log("win "+h.level),window.localStorage.setItem("level",p.level===t?++t:t),v&&v.uuid&&t>v.gameLevel&&(M(t),v.gameLevel=t),G||=new W(r),G.level=h.level,
G.reset(),G.show(),h=G):h.isPuzzleFailed?(h.container.interactiveChildren=!1,console.log("f"),console.log(h.level),B||=new X(r),B.level=h.level,console.log("f "+B.level),B.reset(),B.show(),h=B):h.switchToNextGameLevelScene?(h.switchToNextGameLevelScene=!1,h.hide(),p.hide(),p.destroy(),p=null,p=new I(r,++h.level),console.log("nex lv "+h.level),p.show(),h=p):h.switchToSameGameLevelScene&&(h.switchToSameGameLevelScene=!1,console.log("res"+h.level),h.hide(),p.hide(),p.destroy(),p=null,p=new I(r,h.level),
p.show(),h=p)});var v;window.addEventListener("message",a=>{if(a.detail&&a.detail.type)switch(a.detail.type){case "get-user-data":a.detail.data&&a.detail.data.uuid&&(v=a.detail.data,clearInterval(Y),t>v.gameLevel?(M(t),v.gameLevel=t):(t=v.gameLevel,window.localStorage.setItem("level",t)))}});var Y=setInterval(function(){window&&window.webkit&&window.webkit.messageHandlers.cordova_iab.postMessage(JSON.stringify({type:"get-user-data",data:null}))},3E4)})();
