!function(global,factory){"use strict";"object"==typeof module&&"object"==typeof module.exports?module.exports=global.document?factory(global,!0):function(w){if(w.document)return factory(w);throw new Error("jQuery requires a window with a document")}:factory(global)}("undefined"!=typeof window?window:this,function(window,noGlobal){"use strict";var arr=[],document=window.document,getProto=Object.getPrototypeOf,slice=arr.slice,concat=arr.concat,push=arr.push,indexOf=arr.indexOf,class2type={},toString=class2type.toString,hasOwn=class2type.hasOwnProperty,fnToString=hasOwn.toString,ObjectFunctionString=fnToString.call(Object),support={};function DOMEval(code,doc){var script=(doc=doc||document).createElement("script");script.text=code,doc.head.appendChild(script).parentNode.removeChild(script)}function fcamelCase(all,letter){return letter.toUpperCase()}var jQuery=function(selector,context){return new jQuery.fn.init(selector,context)},rtrim=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,rmsPrefix=/^-ms-/,rdashAlpha=/-([a-z])/g;function isArrayLike(obj){var length=!!obj&&"length"in obj&&obj.length,type=jQuery.type(obj);return"function"!==type&&!jQuery.isWindow(obj)&&("array"===type||0===length||"number"==typeof length&&0<length&&length-1 in obj)}jQuery.fn=jQuery.prototype={jquery:"3.1.1",constructor:jQuery,length:0,toArray:function(){return slice.call(this)},get:function(num){return null==num?slice.call(this):num<0?this[num+this.length]:this[num]},pushStack:function(elems){elems=jQuery.merge(this.constructor(),elems);return elems.prevObject=this,elems},each:function(callback){return jQuery.each(this,callback)},map:function(callback){return this.pushStack(jQuery.map(this,function(elem,i){return callback.call(elem,i,elem)}))},slice:function(){return this.pushStack(slice.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(i){var len=this.length,i=+i+(i<0?len:0);return this.pushStack(0<=i&&i<len?[this[i]]:[])},end:function(){return this.prevObject||this.constructor()},push:push,sort:arr.sort,splice:arr.splice},jQuery.extend=jQuery.fn.extend=function(){var options,name,copy,copyIsArray,src,target=arguments[0]||{},i=1,length=arguments.length,deep=!1;for("boolean"==typeof target&&(deep=target,target=arguments[i]||{},i++),"object"==typeof target||jQuery.isFunction(target)||(target={}),i===length&&(target=this,i--);i<length;i++)if(null!=(options=arguments[i]))for(name in options)src=target[name],target!==(copy=options[name])&&(deep&&copy&&(jQuery.isPlainObject(copy)||(copyIsArray=jQuery.isArray(copy)))?(src=copyIsArray?(copyIsArray=!1,src&&jQuery.isArray(src)?src:[]):src&&jQuery.isPlainObject(src)?src:{},target[name]=jQuery.extend(deep,src,copy)):void 0!==copy&&(target[name]=copy));return target},jQuery.extend({expando:"jQuery"+("3.1.1"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(msg){throw new Error(msg)},noop:function(){},isFunction:function(obj){return"function"===jQuery.type(obj)},isArray:Array.isArray,isWindow:function(obj){return null!=obj&&obj===obj.window},isNumeric:function(obj){var type=jQuery.type(obj);return("number"===type||"string"===type)&&!isNaN(obj-parseFloat(obj))},isPlainObject:function(obj){return!(!obj||"[object Object]"!==toString.call(obj)||(obj=getProto(obj))&&("function"!=typeof(obj=hasOwn.call(obj,"constructor")&&obj.constructor)||fnToString.call(obj)!==ObjectFunctionString))},isEmptyObject:function(obj){for(var name in obj)return!1;return!0},type:function(obj){return null==obj?obj+"":"object"==typeof obj||"function"==typeof obj?class2type[toString.call(obj)]||"object":typeof obj},globalEval:function(code){DOMEval(code)},camelCase:function(string){return string.replace(rmsPrefix,"ms-").replace(rdashAlpha,fcamelCase)},nodeName:function(elem,name){return elem.nodeName&&elem.nodeName.toLowerCase()===name.toLowerCase()},each:function(obj,callback){var length,i=0;if(isArrayLike(obj))for(length=obj.length;i<length&&!1!==callback.call(obj[i],i,obj[i]);i++);else for(i in obj)if(!1===callback.call(obj[i],i,obj[i]))break;return obj},trim:function(text){return null==text?"":(text+"").replace(rtrim,"")},makeArray:function(arr,results){results=results||[];return null!=arr&&(isArrayLike(Object(arr))?jQuery.merge(results,"string"==typeof arr?[arr]:arr):push.call(results,arr)),results},inArray:function(elem,arr,i){return null==arr?-1:indexOf.call(arr,elem,i)},merge:function(first,second){for(var len=+second.length,j=0,i=first.length;j<len;j++)first[i++]=second[j];return first.length=i,first},grep:function(elems,callback,invert){for(var matches=[],i=0,length=elems.length,callbackExpect=!invert;i<length;i++)!callback(elems[i],i)!=callbackExpect&&matches.push(elems[i]);return matches},map:function(elems,callback,arg){var length,value,i=0,ret=[];if(isArrayLike(elems))for(length=elems.length;i<length;i++)null!=(value=callback(elems[i],i,arg))&&ret.push(value);else for(i in elems)null!=(value=callback(elems[i],i,arg))&&ret.push(value);return concat.apply([],ret)},guid:1,proxy:function(fn,context){var args,tmp;if("string"==typeof context&&(tmp=fn[context],context=fn,fn=tmp),jQuery.isFunction(fn))return args=slice.call(arguments,2),(tmp=function(){return fn.apply(context||this,args.concat(slice.call(arguments)))}).guid=fn.guid=fn.guid||jQuery.guid++,tmp},now:Date.now,support:support}),"function"==typeof Symbol&&(jQuery.fn[Symbol.iterator]=arr[Symbol.iterator]),jQuery.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(i,name){class2type["[object "+name+"]"]=name.toLowerCase()});function dir(elem,dir,until){for(var matched=[],truncate=void 0!==until;(elem=elem[dir])&&9!==elem.nodeType;)if(1===elem.nodeType){if(truncate&&jQuery(elem).is(until))break;matched.push(elem)}return matched}function siblings(n,elem){for(var matched=[];n;n=n.nextSibling)1===n.nodeType&&n!==elem&&matched.push(n);return matched}var arr=function(window){function funescape(_,escaped,escapedWhitespace){var high="0x"+escaped-65536;return high!=high||escapedWhitespace?escaped:high<0?String.fromCharCode(65536+high):String.fromCharCode(high>>10|55296,1023&high|56320)}function fcssescape(ch,asCodePoint){return asCodePoint?"\0"===ch?"ï¿½":ch.slice(0,-1)+"\\"+ch.charCodeAt(ch.length-1).toString(16)+" ":"\\"+ch}function unloadHandler(){setDocument()}var i,support,Expr,getText,isXML,tokenize,compile,select,outermostContext,sortInput,hasDuplicate,setDocument,document,docElem,documentIsHTML,rbuggyQSA,rbuggyMatches,matches,contains,expando="sizzle"+ +new Date,preferredDoc=window.document,dirruns=0,done=0,classCache=createCache(),tokenCache=createCache(),compilerCache=createCache(),sortOrder=function(a,b){return a===b&&(hasDuplicate=!0),0},hasOwn={}.hasOwnProperty,arr=[],pop=arr.pop,push_native=arr.push,push=arr.push,slice=arr.slice,indexOf=function(list,elem){for(var i=0,len=list.length;i<len;i++)if(list[i]===elem)return i;return-1},booleans="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",whitespace="[\\x20\\t\\r\\n\\f]",identifier="(?:\\\\.|[\\w-]|[^\0-\\xa0])+",attributes="\\["+whitespace+"*("+identifier+")(?:"+whitespace+"*([*^$|!~]?=)"+whitespace+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+identifier+"))|)"+whitespace+"*\\]",pseudos=":("+identifier+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+attributes+")*)|.*)\\)|)",rwhitespace=new RegExp(whitespace+"+","g"),rtrim=new RegExp("^"+whitespace+"+|((?:^|[^\\\\])(?:\\\\.)*)"+whitespace+"+$","g"),rcomma=new RegExp("^"+whitespace+"*,"+whitespace+"*"),rcombinators=new RegExp("^"+whitespace+"*([>+~]|"+whitespace+")"+whitespace+"*"),rattributeQuotes=new RegExp("="+whitespace+"*([^\\]'\"]*?)"+whitespace+"*\\]","g"),rpseudo=new RegExp(pseudos),ridentifier=new RegExp("^"+identifier+"$"),matchExpr={ID:new RegExp("^#("+identifier+")"),CLASS:new RegExp("^\\.("+identifier+")"),TAG:new RegExp("^("+identifier+"|[*])"),ATTR:new RegExp("^"+attributes),PSEUDO:new RegExp("^"+pseudos),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+whitespace+"*(even|odd|(([+-]|)(\\d*)n|)"+whitespace+"*(?:([+-]|)"+whitespace+"*(\\d+)|))"+whitespace+"*\\)|)","i"),bool:new RegExp("^(?:"+booleans+")$","i"),needsContext:new RegExp("^"+whitespace+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+whitespace+"*((?:-\\d)?\\d*)"+whitespace+"*\\)|)(?=[^-]|$)","i")},rinputs=/^(?:input|select|textarea|button)$/i,rheader=/^h\d$/i,rnative=/^[^{]+\{\s*\[native \w/,rquickExpr=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,rsibling=/[+~]/,runescape=new RegExp("\\\\([\\da-f]{1,6}"+whitespace+"?|("+whitespace+")|.)","ig"),rcssescape=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,disabledAncestor=addCombinator(function(elem){return!0===elem.disabled&&("form"in elem||"label"in elem)},{dir:"parentNode",next:"legend"});try{push.apply(arr=slice.call(preferredDoc.childNodes),preferredDoc.childNodes),arr[preferredDoc.childNodes.length].nodeType}catch(e){push={apply:arr.length?function(target,els){push_native.apply(target,slice.call(els))}:function(target,els){for(var j=target.length,i=0;target[j++]=els[i++];);target.length=j-1}}}function Sizzle(selector,context,results,seed){var m,i,elem,nid,match,groups,newSelector,newContext=context&&context.ownerDocument,nodeType=context?context.nodeType:9;if(results=results||[],"string"!=typeof selector||!selector||1!==nodeType&&9!==nodeType&&11!==nodeType)return results;if(!seed&&((context?context.ownerDocument||context:preferredDoc)!==document&&setDocument(context),context=context||document,documentIsHTML)){if(11!==nodeType&&(match=rquickExpr.exec(selector)))if(m=match[1]){if(9===nodeType){if(!(elem=context.getElementById(m)))return results;if(elem.id===m)return results.push(elem),results}else if(newContext&&(elem=newContext.getElementById(m))&&contains(context,elem)&&elem.id===m)return results.push(elem),results}else{if(match[2])return push.apply(results,context.getElementsByTagName(selector)),results;if((m=match[3])&&support.getElementsByClassName&&context.getElementsByClassName)return push.apply(results,context.getElementsByClassName(m)),results}if(support.qsa&&!compilerCache[selector+" "]&&(!rbuggyQSA||!rbuggyQSA.test(selector))){if(1!==nodeType)newContext=context,newSelector=selector;else if("object"!==context.nodeName.toLowerCase()){for((nid=context.getAttribute("id"))?nid=nid.replace(rcssescape,fcssescape):context.setAttribute("id",nid=expando),i=(groups=tokenize(selector)).length;i--;)groups[i]="#"+nid+" "+toSelector(groups[i]);newSelector=groups.join(","),newContext=rsibling.test(selector)&&testContext(context.parentNode)||context}if(newSelector)try{return push.apply(results,newContext.querySelectorAll(newSelector)),results}catch(qsaError){}finally{nid===expando&&context.removeAttribute("id")}}}return select(selector.replace(rtrim,"$1"),context,results,seed)}function createCache(){var keys=[];function cache(key,value){return keys.push(key+" ")>Expr.cacheLength&&delete cache[keys.shift()],cache[key+" "]=value}return cache}function markFunction(fn){return fn[expando]=!0,fn}function assert(fn){var el=document.createElement("fieldset");try{return!!fn(el)}catch(e){return!1}finally{el.parentNode&&el.parentNode.removeChild(el)}}function addHandle(attrs,handler){for(var arr=attrs.split("|"),i=arr.length;i--;)Expr.attrHandle[arr[i]]=handler}function siblingCheck(a,b){var cur=b&&a,diff=cur&&1===a.nodeType&&1===b.nodeType&&a.sourceIndex-b.sourceIndex;if(diff)return diff;if(cur)for(;cur=cur.nextSibling;)if(cur===b)return-1;return a?1:-1}function createDisabledPseudo(disabled){return function(elem){return"form"in elem?elem.parentNode&&!1===elem.disabled?"label"in elem?"label"in elem.parentNode?elem.parentNode.disabled===disabled:elem.disabled===disabled:elem.isDisabled===disabled||elem.isDisabled!==!disabled&&disabledAncestor(elem)===disabled:elem.disabled===disabled:"label"in elem&&elem.disabled===disabled}}function createPositionalPseudo(fn){return markFunction(function(argument){return argument=+argument,markFunction(function(seed,matches){for(var j,matchIndexes=fn([],seed.length,argument),i=matchIndexes.length;i--;)seed[j=matchIndexes[i]]&&(seed[j]=!(matches[j]=seed[j]))})})}function testContext(context){return context&&void 0!==context.getElementsByTagName&&context}for(i in support=Sizzle.support={},isXML=Sizzle.isXML=function(elem){elem=elem&&(elem.ownerDocument||elem).documentElement;return!!elem&&"HTML"!==elem.nodeName},setDocument=Sizzle.setDocument=function(node){var node=node?node.ownerDocument||node:preferredDoc;return node!==document&&9===node.nodeType&&node.documentElement&&(docElem=(document=node).documentElement,documentIsHTML=!isXML(document),preferredDoc!==document&&(node=document.defaultView)&&node.top!==node&&(node.addEventListener?node.addEventListener("unload",unloadHandler,!1):node.attachEvent&&node.attachEvent("onunload",unloadHandler)),support.attributes=assert(function(el){return el.className="i",!el.getAttribute("className")}),support.getElementsByTagName=assert(function(el){return el.appendChild(document.createComment("")),!el.getElementsByTagName("*").length}),support.getElementsByClassName=rnative.test(document.getElementsByClassName),support.getById=assert(function(el){return docElem.appendChild(el).id=expando,!document.getElementsByName||!document.getElementsByName(expando).length}),support.getById?(Expr.filter.ID=function(id){var attrId=id.replace(runescape,funescape);return function(elem){return elem.getAttribute("id")===attrId}},Expr.find.ID=function(id,context){if(void 0!==context.getElementById&&documentIsHTML)return(context=context.getElementById(id))?[context]:[]}):(Expr.filter.ID=function(id){var attrId=id.replace(runescape,funescape);return function(elem){elem=void 0!==elem.getAttributeNode&&elem.getAttributeNode("id");return elem&&elem.value===attrId}},Expr.find.ID=function(id,context){if(void 0!==context.getElementById&&documentIsHTML){var node,i,elems,elem=context.getElementById(id);if(elem){if((node=elem.getAttributeNode("id"))&&node.value===id)return[elem];for(elems=context.getElementsByName(id),i=0;elem=elems[i++];)if((node=elem.getAttributeNode("id"))&&node.value===id)return[elem]}return[]}}),Expr.find.TAG=support.getElementsByTagName?function(tag,context){return void 0!==context.getElementsByTagName?context.getElementsByTagName(tag):support.qsa?context.querySelectorAll(tag):void 0}:function(tag,context){var elem,tmp=[],i=0,results=context.getElementsByTagName(tag);if("*"!==tag)return results;for(;elem=results[i++];)1===elem.nodeType&&tmp.push(elem);return tmp},Expr.find.CLASS=support.getElementsByClassName&&function(className,context){if(void 0!==context.getElementsByClassName&&documentIsHTML)return context.getElementsByClassName(className)},rbuggyMatches=[],rbuggyQSA=[],(support.qsa=rnative.test(document.querySelectorAll))&&(assert(function(el){docElem.appendChild(el).innerHTML="<a id='"+expando+"'></a><select id='"+expando+"-\r\\' msallowcapture=''><option selected=''></option></select>",el.querySelectorAll("[msallowcapture^='']").length&&rbuggyQSA.push("[*^$]="+whitespace+"*(?:''|\"\")"),el.querySelectorAll("[selected]").length||rbuggyQSA.push("\\["+whitespace+"*(?:value|"+booleans+")"),el.querySelectorAll("[id~="+expando+"-]").length||rbuggyQSA.push("~="),el.querySelectorAll(":checked").length||rbuggyQSA.push(":checked"),el.querySelectorAll("a#"+expando+"+*").length||rbuggyQSA.push(".#.+[+~]")}),assert(function(el){el.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var input=document.createElement("input");input.setAttribute("type","hidden"),el.appendChild(input).setAttribute("name","D"),el.querySelectorAll("[name=d]").length&&rbuggyQSA.push("name"+whitespace+"*[*^$|!~]?="),2!==el.querySelectorAll(":enabled").length&&rbuggyQSA.push(":enabled",":disabled"),docElem.appendChild(el).disabled=!0,2!==el.querySelectorAll(":disabled").length&&rbuggyQSA.push(":enabled",":disabled"),el.querySelectorAll("*,:x"),rbuggyQSA.push(",.*:")})),(support.matchesSelector=rnative.test(matches=docElem.matches||docElem.webkitMatchesSelector||docElem.mozMatchesSelector||docElem.oMatchesSelector||docElem.msMatchesSelector))&&assert(function(el){support.disconnectedMatch=matches.call(el,"*"),matches.call(el,"[s!='']:x"),rbuggyMatches.push("!=",pseudos)}),rbuggyQSA=rbuggyQSA.length&&new RegExp(rbuggyQSA.join("|")),rbuggyMatches=rbuggyMatches.length&&new RegExp(rbuggyMatches.join("|")),node=rnative.test(docElem.compareDocumentPosition),contains=node||rnative.test(docElem.contains)?function(a,b){var adown=9===a.nodeType?a.documentElement:a,b=b&&b.parentNode;return a===b||!(!b||1!==b.nodeType||!(adown.contains?adown.contains(b):a.compareDocumentPosition&&16&a.compareDocumentPosition(b)))}:function(a,b){if(b)for(;b=b.parentNode;)if(b===a)return!0;return!1},sortOrder=node?function(a,b){var compare;return a===b?(hasDuplicate=!0,0):(compare=!a.compareDocumentPosition-!b.compareDocumentPosition)||(1&(compare=(a.ownerDocument||a)===(b.ownerDocument||b)?a.compareDocumentPosition(b):1)||!support.sortDetached&&b.compareDocumentPosition(a)===compare?a===document||a.ownerDocument===preferredDoc&&contains(preferredDoc,a)?-1:b===document||b.ownerDocument===preferredDoc&&contains(preferredDoc,b)?1:sortInput?indexOf(sortInput,a)-indexOf(sortInput,b):0:4&compare?-1:1)}:function(a,b){if(a===b)return hasDuplicate=!0,0;var cur,i=0,aup=a.parentNode,bup=b.parentNode,ap=[a],bp=[b];if(!aup||!bup)return a===document?-1:b===document?1:aup?-1:bup?1:sortInput?indexOf(sortInput,a)-indexOf(sortInput,b):0;if(aup===bup)return siblingCheck(a,b);for(cur=a;cur=cur.parentNode;)ap.unshift(cur);for(cur=b;cur=cur.parentNode;)bp.unshift(cur);for(;ap[i]===bp[i];)i++;return i?siblingCheck(ap[i],bp[i]):ap[i]===preferredDoc?-1:bp[i]===preferredDoc?1:0}),document},Sizzle.matches=function(expr,elements){return Sizzle(expr,null,null,elements)},Sizzle.matchesSelector=function(elem,expr){if((elem.ownerDocument||elem)!==document&&setDocument(elem),expr=expr.replace(rattributeQuotes,"='$1']"),support.matchesSelector&&documentIsHTML&&!compilerCache[expr+" "]&&(!rbuggyMatches||!rbuggyMatches.test(expr))&&(!rbuggyQSA||!rbuggyQSA.test(expr)))try{var ret=matches.call(elem,expr);if(ret||support.disconnectedMatch||elem.document&&11!==elem.document.nodeType)return ret}catch(e){}return 0<Sizzle(expr,document,null,[elem]).length},Sizzle.contains=function(context,elem){return(context.ownerDocument||context)!==document&&setDocument(context),contains(context,elem)},Sizzle.attr=function(elem,name){(elem.ownerDocument||elem)!==document&&setDocument(elem);var fn=Expr.attrHandle[name.toLowerCase()],fn=fn&&hasOwn.call(Expr.attrHandle,name.toLowerCase())?fn(elem,name,!documentIsHTML):void 0;return void 0!==fn?fn:support.attributes||!documentIsHTML?elem.getAttribute(name):(fn=elem.getAttributeNode(name))&&fn.specified?fn.value:null},Sizzle.escape=function(sel){return(sel+"").replace(rcssescape,fcssescape)},Sizzle.error=function(msg){throw new Error("Syntax error, unrecognized expression: "+msg)},Sizzle.uniqueSort=function(results){var elem,duplicates=[],j=0,i=0;if(hasDuplicate=!support.detectDuplicates,sortInput=!support.sortStable&&results.slice(0),results.sort(sortOrder),hasDuplicate){for(;elem=results[i++];)elem===results[i]&&(j=duplicates.push(i));for(;j--;)results.splice(duplicates[j],1)}return sortInput=null,results},getText=Sizzle.getText=function(elem){var node,ret="",i=0,nodeType=elem.nodeType;if(nodeType){if(1===nodeType||9===nodeType||11===nodeType){if("string"==typeof elem.textContent)return elem.textContent;for(elem=elem.firstChild;elem;elem=elem.nextSibling)ret+=getText(elem)}else if(3===nodeType||4===nodeType)return elem.nodeValue}else for(;node=elem[i++];)ret+=getText(node);return ret},(Expr=Sizzle.selectors={cacheLength:50,createPseudo:markFunction,match:matchExpr,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(match){return match[1]=match[1].replace(runescape,funescape),match[3]=(match[3]||match[4]||match[5]||"").replace(runescape,funescape),"~="===match[2]&&(match[3]=" "+match[3]+" "),match.slice(0,4)},CHILD:function(match){return match[1]=match[1].toLowerCase(),"nth"===match[1].slice(0,3)?(match[3]||Sizzle.error(match[0]),match[4]=+(match[4]?match[5]+(match[6]||1):2*("even"===match[3]||"odd"===match[3])),match[5]=+(match[7]+match[8]||"odd"===match[3])):match[3]&&Sizzle.error(match[0]),match},PSEUDO:function(match){var excess,unquoted=!match[6]&&match[2];return matchExpr.CHILD.test(match[0])?null:(match[3]?match[2]=match[4]||match[5]||"":unquoted&&rpseudo.test(unquoted)&&(excess=(excess=tokenize(unquoted,!0))&&unquoted.indexOf(")",unquoted.length-excess)-unquoted.length)&&(match[0]=match[0].slice(0,excess),match[2]=unquoted.slice(0,excess)),match.slice(0,3))}},filter:{TAG:function(nodeNameSelector){var nodeName=nodeNameSelector.replace(runescape,funescape).toLowerCase();return"*"===nodeNameSelector?function(){return!0}:function(elem){return elem.nodeName&&elem.nodeName.toLowerCase()===nodeName}},CLASS:function(className){var pattern=classCache[className+" "];return pattern||(pattern=new RegExp("(^|"+whitespace+")"+className+"("+whitespace+"|$)"))&&classCache(className,function(elem){return pattern.test("string"==typeof elem.className&&elem.className||void 0!==elem.getAttribute&&elem.getAttribute("class")||"")})},ATTR:function(name,operator,check){return function(elem){elem=Sizzle.attr(elem,name);return null==elem?"!="===operator:!operator||(elem+="","="===operator?elem===check:"!="===operator?elem!==check:"^="===operator?check&&0===elem.indexOf(check):"*="===operator?check&&-1<elem.indexOf(check):"$="===operator?check&&elem.slice(-check.length)===check:"~="===operator?-1<(" "+elem.replace(rwhitespace," ")+" ").indexOf(check):"|="===operator&&(elem===check||elem.slice(0,check.length+1)===check+"-"))}},CHILD:function(type,what,argument,first,last){var simple="nth"!==type.slice(0,3),forward="last"!==type.slice(-4),ofType="of-type"===what;return 1===first&&0===last?function(elem){return!!elem.parentNode}:function(elem,context,xml){var cache,uniqueCache,outerCache,node,nodeIndex,start,dir=simple!=forward?"nextSibling":"previousSibling",parent=elem.parentNode,name=ofType&&elem.nodeName.toLowerCase(),useCache=!xml&&!ofType,diff=!1;if(parent){if(simple){for(;dir;){for(node=elem;node=node[dir];)if(ofType?node.nodeName.toLowerCase()===name:1===node.nodeType)return!1;start=dir="only"===type&&!start&&"nextSibling"}return!0}if(start=[forward?parent.firstChild:parent.lastChild],forward&&useCache){for(diff=(nodeIndex=(cache=(uniqueCache=(outerCache=(node=parent)[expando]||(node[expando]={}))[node.uniqueID]||(outerCache[node.uniqueID]={}))[type]||[])[0]===dirruns&&cache[1])&&cache[2],node=nodeIndex&&parent.childNodes[nodeIndex];node=++nodeIndex&&node&&node[dir]||(diff=nodeIndex=0,start.pop());)if(1===node.nodeType&&++diff&&node===elem){uniqueCache[type]=[dirruns,nodeIndex,diff];break}}else if(!1===(diff=useCache?nodeIndex=(cache=(uniqueCache=(outerCache=(node=elem)[expando]||(node[expando]={}))[node.uniqueID]||(outerCache[node.uniqueID]={}))[type]||[])[0]===dirruns&&cache[1]:diff))for(;(node=++nodeIndex&&node&&node[dir]||(diff=nodeIndex=0,start.pop()))&&((ofType?node.nodeName.toLowerCase()!==name:1!==node.nodeType)||!++diff||(useCache&&((uniqueCache=(outerCache=node[expando]||(node[expando]={}))[node.uniqueID]||(outerCache[node.uniqueID]={}))[type]=[dirruns,diff]),node!==elem)););return(diff-=last)===first||diff%first==0&&0<=diff/first}}},PSEUDO:function(pseudo,argument){var args,fn=Expr.pseudos[pseudo]||Expr.setFilters[pseudo.toLowerCase()]||Sizzle.error("unsupported pseudo: "+pseudo);return fn[expando]?fn(argument):1<fn.length?(args=[pseudo,pseudo,"",argument],Expr.setFilters.hasOwnProperty(pseudo.toLowerCase())?markFunction(function(seed,matches){for(var idx,matched=fn(seed,argument),i=matched.length;i--;)seed[idx=indexOf(seed,matched[i])]=!(matches[idx]=matched[i])}):function(elem){return fn(elem,0,args)}):fn}},pseudos:{not:markFunction(function(selector){var input=[],results=[],matcher=compile(selector.replace(rtrim,"$1"));return matcher[expando]?markFunction(function(seed,matches,context,xml){for(var elem,unmatched=matcher(seed,null,xml,[]),i=seed.length;i--;)(elem=unmatched[i])&&(seed[i]=!(matches[i]=elem))}):function(elem,context,xml){return input[0]=elem,matcher(input,null,xml,results),input[0]=null,!results.pop()}}),has:markFunction(function(selector){return function(elem){return 0<Sizzle(selector,elem).length}}),contains:markFunction(function(text){return text=text.replace(runescape,funescape),function(elem){return-1<(elem.textContent||elem.innerText||getText(elem)).indexOf(text)}}),lang:markFunction(function(lang){return ridentifier.test(lang||"")||Sizzle.error("unsupported lang: "+lang),lang=lang.replace(runescape,funescape).toLowerCase(),function(elem){var elemLang;do{if(elemLang=documentIsHTML?elem.lang:elem.getAttribute("xml:lang")||elem.getAttribute("lang"))return(elemLang=elemLang.toLowerCase())===lang||0===elemLang.indexOf(lang+"-")}while((elem=elem.parentNode)&&1===elem.nodeType);return!1}}),target:function(elem){var hash=window.location&&window.location.hash;return hash&&hash.slice(1)===elem.id},root:function(elem){return elem===docElem},focus:function(elem){return elem===document.activeElement&&(!document.hasFocus||document.hasFocus())&&!!(elem.type||elem.href||~elem.tabIndex)},enabled:createDisabledPseudo(!1),disabled:createDisabledPseudo(!0),checked:function(elem){var nodeName=elem.nodeName.toLowerCase();return"input"===nodeName&&!!elem.checked||"option"===nodeName&&!!elem.selected},selected:function(elem){return elem.parentNode&&elem.parentNode.selectedIndex,!0===elem.selected},empty:function(elem){for(elem=elem.firstChild;elem;elem=elem.nextSibling)if(elem.nodeType<6)return!1;return!0},parent:function(elem){return!Expr.pseudos.empty(elem)},header:function(elem){return rheader.test(elem.nodeName)},input:function(elem){return rinputs.test(elem.nodeName)},button:function(elem){var name=elem.nodeName.toLowerCase();return"input"===name&&"button"===elem.type||"button"===name},text:function(elem){return"input"===elem.nodeName.toLowerCase()&&"text"===elem.type&&(null==(elem=elem.getAttribute("type"))||"text"===elem.toLowerCase())},first:createPositionalPseudo(function(){return[0]}),last:createPositionalPseudo(function(matchIndexes,length){return[length-1]}),eq:createPositionalPseudo(function(matchIndexes,length,argument){return[argument<0?argument+length:argument]}),even:createPositionalPseudo(function(matchIndexes,length){for(var i=0;i<length;i+=2)matchIndexes.push(i);return matchIndexes}),odd:createPositionalPseudo(function(matchIndexes,length){for(var i=1;i<length;i+=2)matchIndexes.push(i);return matchIndexes}),lt:createPositionalPseudo(function(matchIndexes,length,argument){for(var i=argument<0?argument+length:argument;0<=--i;)matchIndexes.push(i);return matchIndexes}),gt:createPositionalPseudo(function(matchIndexes,length,argument){for(var i=argument<0?argument+length:argument;++i<length;)matchIndexes.push(i);return matchIndexes})}}).pseudos.nth=Expr.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})Expr.pseudos[i]=function(type){return function(elem){return"input"===elem.nodeName.toLowerCase()&&elem.type===type}}(i);for(i in{submit:!0,reset:!0})Expr.pseudos[i]=function(type){return function(elem){var name=elem.nodeName.toLowerCase();return("input"===name||"button"===name)&&elem.type===type}}(i);function setFilters(){}function toSelector(tokens){for(var i=0,len=tokens.length,selector="";i<len;i++)selector+=tokens[i].value;return selector}function addCombinator(matcher,combinator,base){var dir=combinator.dir,skip=combinator.next,key=skip||dir,checkNonElements=base&&"parentNode"===key,doneName=done++;return combinator.first?function(elem,context,xml){for(;elem=elem[dir];)if(1===elem.nodeType||checkNonElements)return matcher(elem,context,xml);return!1}:function(elem,context,xml){var oldCache,outerCache,newCache=[dirruns,doneName];if(xml){for(;elem=elem[dir];)if((1===elem.nodeType||checkNonElements)&&matcher(elem,context,xml))return!0}else for(;elem=elem[dir];)if(1===elem.nodeType||checkNonElements)if(outerCache=(outerCache=elem[expando]||(elem[expando]={}))[elem.uniqueID]||(outerCache[elem.uniqueID]={}),skip&&skip===elem.nodeName.toLowerCase())elem=elem[dir]||elem;else{if((oldCache=outerCache[key])&&oldCache[0]===dirruns&&oldCache[1]===doneName)return newCache[2]=oldCache[2];if((outerCache[key]=newCache)[2]=matcher(elem,context,xml))return!0}return!1}}function elementMatcher(matchers){return 1<matchers.length?function(elem,context,xml){for(var i=matchers.length;i--;)if(!matchers[i](elem,context,xml))return!1;return!0}:matchers[0]}function condense(unmatched,map,filter,context,xml){for(var elem,newUnmatched=[],i=0,len=unmatched.length,mapped=null!=map;i<len;i++)!(elem=unmatched[i])||filter&&!filter(elem,context,xml)||(newUnmatched.push(elem),mapped&&map.push(i));return newUnmatched}function setMatcher(preFilter,selector,matcher,postFilter,postFinder,postSelector){return postFilter&&!postFilter[expando]&&(postFilter=setMatcher(postFilter)),postFinder&&!postFinder[expando]&&(postFinder=setMatcher(postFinder,postSelector)),markFunction(function(seed,results,context,xml){var temp,i,elem,preMap=[],postMap=[],preexisting=results.length,elems=seed||function(selector,contexts,results){for(var i=0,len=contexts.length;i<len;i++)Sizzle(selector,contexts[i],results);return results}(selector||"*",context.nodeType?[context]:context,[]),matcherIn=!preFilter||!seed&&selector?elems:condense(elems,preMap,preFilter,context,xml),matcherOut=matcher?postFinder||(seed?preFilter:preexisting||postFilter)?[]:results:matcherIn;if(matcher&&matcher(matcherIn,matcherOut,context,xml),postFilter)for(temp=condense(matcherOut,postMap),postFilter(temp,[],context,xml),i=temp.length;i--;)(elem=temp[i])&&(matcherOut[postMap[i]]=!(matcherIn[postMap[i]]=elem));if(seed){if(postFinder||preFilter){if(postFinder){for(temp=[],i=matcherOut.length;i--;)(elem=matcherOut[i])&&temp.push(matcherIn[i]=elem);postFinder(null,matcherOut=[],temp,xml)}for(i=matcherOut.length;i--;)(elem=matcherOut[i])&&-1<(temp=postFinder?indexOf(seed,elem):preMap[i])&&(seed[temp]=!(results[temp]=elem))}}else matcherOut=condense(matcherOut===results?matcherOut.splice(preexisting,matcherOut.length):matcherOut),postFinder?postFinder(null,results,matcherOut,xml):push.apply(results,matcherOut)})}function matcherFromGroupMatchers(elementMatchers,setMatchers){function superMatcher(seed,context,xml,results,outermost){var elem,j,matcher,matchedCount=0,i="0",unmatched=seed&&[],setMatched=[],contextBackup=outermostContext,elems=seed||byElement&&Expr.find.TAG("*",outermost),dirrunsUnique=dirruns+=null==contextBackup?1:Math.random()||.1,len=elems.length;for(outermost&&(outermostContext=context===document||context||outermost);i!==len&&null!=(elem=elems[i]);i++){if(byElement&&elem){for(j=0,context||elem.ownerDocument===document||(setDocument(elem),xml=!documentIsHTML);matcher=elementMatchers[j++];)if(matcher(elem,context||document,xml)){results.push(elem);break}outermost&&(dirruns=dirrunsUnique)}bySet&&((elem=!matcher&&elem)&&matchedCount--,seed)&&unmatched.push(elem)}if(matchedCount+=i,bySet&&i!==matchedCount){for(j=0;matcher=setMatchers[j++];)matcher(unmatched,setMatched,context,xml);if(seed){if(0<matchedCount)for(;i--;)unmatched[i]||setMatched[i]||(setMatched[i]=pop.call(results));setMatched=condense(setMatched)}push.apply(results,setMatched),outermost&&!seed&&0<setMatched.length&&1<matchedCount+setMatchers.length&&Sizzle.uniqueSort(results)}return outermost&&(dirruns=dirrunsUnique,outermostContext=contextBackup),unmatched}var bySet=0<setMatchers.length,byElement=0<elementMatchers.length;return bySet?markFunction(superMatcher):superMatcher}return setFilters.prototype=Expr.filters=Expr.pseudos,Expr.setFilters=new setFilters,tokenize=Sizzle.tokenize=function(selector,parseOnly){var matched,match,tokens,type,soFar,groups,preFilters,cached=tokenCache[selector+" "];if(cached)return parseOnly?0:cached.slice(0);for(soFar=selector,groups=[],preFilters=Expr.preFilter;soFar;){for(type in matched&&!(match=rcomma.exec(soFar))||(match&&(soFar=soFar.slice(match[0].length)||soFar),groups.push(tokens=[])),matched=!1,(match=rcombinators.exec(soFar))&&(matched=match.shift(),tokens.push({value:matched,type:match[0].replace(rtrim," ")}),soFar=soFar.slice(matched.length)),Expr.filter)!(match=matchExpr[type].exec(soFar))||preFilters[type]&&!(match=preFilters[type](match))||(matched=match.shift(),tokens.push({value:matched,type:type,matches:match}),soFar=soFar.slice(matched.length));if(!matched)break}return parseOnly?soFar.length:soFar?Sizzle.error(selector):tokenCache(selector,groups).slice(0)},compile=Sizzle.compile=function(selector,match){var i,setMatchers=[],elementMatchers=[],cached=compilerCache[selector+" "];if(!cached){for(i=(match=match||tokenize(selector)).length;i--;)((cached=function matcherFromTokens(tokens){for(var checkContext,matcher,j,len=tokens.length,leadingRelative=Expr.relative[tokens[0].type],implicitRelative=leadingRelative||Expr.relative[" "],i=leadingRelative?1:0,matchContext=addCombinator(function(elem){return elem===checkContext},implicitRelative,!0),matchAnyContext=addCombinator(function(elem){return-1<indexOf(checkContext,elem)},implicitRelative,!0),matchers=[function(elem,context,xml){return elem=!leadingRelative&&(xml||context!==outermostContext)||((checkContext=context).nodeType?matchContext:matchAnyContext)(elem,context,xml),checkContext=null,elem}];i<len;i++)if(matcher=Expr.relative[tokens[i].type])matchers=[addCombinator(elementMatcher(matchers),matcher)];else{if((matcher=Expr.filter[tokens[i].type].apply(null,tokens[i].matches))[expando]){for(j=++i;j<len&&!Expr.relative[tokens[j].type];j++);return setMatcher(1<i&&elementMatcher(matchers),1<i&&toSelector(tokens.slice(0,i-1).concat({value:" "===tokens[i-2].type?"*":""})).replace(rtrim,"$1"),matcher,i<j&&matcherFromTokens(tokens.slice(i,j)),j<len&&matcherFromTokens(tokens=tokens.slice(j)),j<len&&toSelector(tokens))}matchers.push(matcher)}return elementMatcher(matchers)}(match[i]))[expando]?setMatchers:elementMatchers).push(cached);(cached=compilerCache(selector,matcherFromGroupMatchers(elementMatchers,setMatchers))).selector=selector}return cached},select=Sizzle.select=function(selector,context,results,seed){var i,tokens,token,type,find,compiled="function"==typeof selector&&selector,match=!seed&&tokenize(selector=compiled.selector||selector);if(results=results||[],1===match.length){if(2<(tokens=match[0]=match[0].slice(0)).length&&"ID"===(token=tokens[0]).type&&9===context.nodeType&&documentIsHTML&&Expr.relative[tokens[1].type]){if(!(context=(Expr.find.ID(token.matches[0].replace(runescape,funescape),context)||[])[0]))return results;compiled&&(context=context.parentNode),selector=selector.slice(tokens.shift().value.length)}for(i=matchExpr.needsContext.test(selector)?0:tokens.length;i--&&(token=tokens[i],!Expr.relative[type=token.type]);)if((find=Expr.find[type])&&(seed=find(token.matches[0].replace(runescape,funescape),rsibling.test(tokens[0].type)&&testContext(context.parentNode)||context))){if(tokens.splice(i,1),selector=seed.length&&toSelector(tokens))break;return push.apply(results,seed),results}}return(compiled||compile(selector,match))(seed,context,!documentIsHTML,results,!context||rsibling.test(selector)&&testContext(context.parentNode)||context),results},support.sortStable=expando.split("").sort(sortOrder).join("")===expando,support.detectDuplicates=!!hasDuplicate,setDocument(),support.sortDetached=assert(function(el){return 1&el.compareDocumentPosition(document.createElement("fieldset"))}),assert(function(el){return el.innerHTML="<a href='#'></a>","#"===el.firstChild.getAttribute("href")})||addHandle("type|href|height|width",function(elem,name,isXML){if(!isXML)return elem.getAttribute(name,"type"===name.toLowerCase()?1:2)}),support.attributes&&assert(function(el){return el.innerHTML="<input/>",el.firstChild.setAttribute("value",""),""===el.firstChild.getAttribute("value")})||addHandle("value",function(elem,name,isXML){if(!isXML&&"input"===elem.nodeName.toLowerCase())return elem.defaultValue}),assert(function(el){return null==el.getAttribute("disabled")})||addHandle(booleans,function(elem,name,isXML){if(!isXML)return!0===elem[name]?name.toLowerCase():(isXML=elem.getAttributeNode(name))&&isXML.specified?isXML.value:null}),Sizzle}(window),rneedsContext=(jQuery.find=arr,jQuery.expr=arr.selectors,jQuery.expr[":"]=jQuery.expr.pseudos,jQuery.uniqueSort=jQuery.unique=arr.uniqueSort,jQuery.text=arr.getText,jQuery.isXMLDoc=arr.isXML,jQuery.contains=arr.contains,jQuery.escapeSelector=arr.escape,jQuery.expr.match.needsContext),rsingleTag=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i,risSimple=/^.[^:#\[\.,]*$/;function winnow(elements,qualifier,not){return jQuery.isFunction(qualifier)?jQuery.grep(elements,function(elem,i){return!!qualifier.call(elem,i,elem)!==not}):qualifier.nodeType?jQuery.grep(elements,function(elem){return elem===qualifier!==not}):"string"!=typeof qualifier?jQuery.grep(elements,function(elem){return-1<indexOf.call(qualifier,elem)!==not}):risSimple.test(qualifier)?jQuery.filter(qualifier,elements,not):(qualifier=jQuery.filter(qualifier,elements),jQuery.grep(elements,function(elem){return-1<indexOf.call(qualifier,elem)!==not&&1===elem.nodeType}))}jQuery.filter=function(expr,elems,not){var elem=elems[0];return not&&(expr=":not("+expr+")"),1===elems.length&&1===elem.nodeType?jQuery.find.matchesSelector(elem,expr)?[elem]:[]:jQuery.find.matches(expr,jQuery.grep(elems,function(elem){return 1===elem.nodeType}))},jQuery.fn.extend({find:function(selector){var i,ret,len=this.length,self=this;if("string"!=typeof selector)return this.pushStack(jQuery(selector).filter(function(){for(i=0;i<len;i++)if(jQuery.contains(self[i],this))return!0}));for(ret=this.pushStack([]),i=0;i<len;i++)jQuery.find(selector,self[i],ret);return 1<len?jQuery.uniqueSort(ret):ret},filter:function(selector){return this.pushStack(winnow(this,selector||[],!1))},not:function(selector){return this.pushStack(winnow(this,selector||[],!0))},is:function(selector){return!!winnow(this,"string"==typeof selector&&rneedsContext.test(selector)?jQuery(selector):selector||[],!1).length}});var rootjQuery,rquickExpr=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/,rparentsprev=((jQuery.fn.init=function(selector,context,root){if(selector){if(root=root||rootjQuery,"string"!=typeof selector)return selector.nodeType?(this[0]=selector,this.length=1,this):jQuery.isFunction(selector)?void 0!==root.ready?root.ready(selector):selector(jQuery):jQuery.makeArray(selector,this);if(!(match="<"===selector[0]&&">"===selector[selector.length-1]&&3<=selector.length?[null,selector,null]:rquickExpr.exec(selector))||!match[1]&&context)return(!context||context.jquery?context||root:this.constructor(context)).find(selector);if(match[1]){if(context=context instanceof jQuery?context[0]:context,jQuery.merge(this,jQuery.parseHTML(match[1],context&&context.nodeType?context.ownerDocument||context:document,!0)),rsingleTag.test(match[1])&&jQuery.isPlainObject(context))for(var match in context)jQuery.isFunction(this[match])?this[match](context[match]):this.attr(match,context[match])}else(root=document.getElementById(match[2]))&&(this[0]=root,this.length=1)}return this}).prototype=jQuery.fn,rootjQuery=jQuery(document),/^(?:parents|prev(?:Until|All))/),guaranteedUnique={children:!0,contents:!0,next:!0,prev:!0};function sibling(cur,dir){for(;(cur=cur[dir])&&1!==cur.nodeType;);return cur}jQuery.fn.extend({has:function(target){var targets=jQuery(target,this),l=targets.length;return this.filter(function(){for(var i=0;i<l;i++)if(jQuery.contains(this,targets[i]))return!0})},closest:function(selectors,context){var cur,i=0,l=this.length,matched=[],targets="string"!=typeof selectors&&jQuery(selectors);if(!rneedsContext.test(selectors))for(;i<l;i++)for(cur=this[i];cur&&cur!==context;cur=cur.parentNode)if(cur.nodeType<11&&(targets?-1<targets.index(cur):1===cur.nodeType&&jQuery.find.matchesSelector(cur,selectors))){matched.push(cur);break}return this.pushStack(1<matched.length?jQuery.uniqueSort(matched):matched)},index:function(elem){return elem?"string"==typeof elem?indexOf.call(jQuery(elem),this[0]):indexOf.call(this,elem.jquery?elem[0]:elem):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(selector,context){return this.pushStack(jQuery.uniqueSort(jQuery.merge(this.get(),jQuery(selector,context))))},addBack:function(selector){return this.add(null==selector?this.prevObject:this.prevObject.filter(selector))}}),jQuery.each({parent:function(elem){elem=elem.parentNode;return elem&&11!==elem.nodeType?elem:null},parents:function(elem){return dir(elem,"parentNode")},parentsUntil:function(elem,i,until){return dir(elem,"parentNode",until)},next:function(elem){return sibling(elem,"nextSibling")},prev:function(elem){return sibling(elem,"previousSibling")},nextAll:function(elem){return dir(elem,"nextSibling")},prevAll:function(elem){return dir(elem,"previousSibling")},nextUntil:function(elem,i,until){return dir(elem,"nextSibling",until)},prevUntil:function(elem,i,until){return dir(elem,"previousSibling",until)},siblings:function(elem){return siblings((elem.parentNode||{}).firstChild,elem)},children:function(elem){return siblings(elem.firstChild)},contents:function(elem){return elem.contentDocument||jQuery.merge([],elem.childNodes)}},function(name,fn){jQuery.fn[name]=function(until,selector){var matched=jQuery.map(this,fn,until);return(selector="Until"!==name.slice(-5)?until:selector)&&"string"==typeof selector&&(matched=jQuery.filter(selector,matched)),1<this.length&&(guaranteedUnique[name]||jQuery.uniqueSort(matched),rparentsprev.test(name))&&matched.reverse(),this.pushStack(matched)}});var rnothtmlwhite=/[^\x20\t\r\n\f]+/g;function Identity(v){return v}function Thrower(ex){throw ex}function adoptValue(value,resolve,reject){var method;try{value&&jQuery.isFunction(method=value.promise)?method.call(value).done(resolve).fail(reject):value&&jQuery.isFunction(method=value.then)?method.call(value,resolve,reject):resolve.call(void 0,value)}catch(value){reject.call(void 0,value)}}jQuery.Callbacks=function(options){options="string"==typeof options?function(options){var object={};return jQuery.each(options.match(rnothtmlwhite)||[],function(_,flag){object[flag]=!0}),object}(options):jQuery.extend({},options);function fire(){for(locked=options.once,fired=firing=!0;queue.length;firingIndex=-1)for(memory=queue.shift();++firingIndex<list.length;)!1===list[firingIndex].apply(memory[0],memory[1])&&options.stopOnFalse&&(firingIndex=list.length,memory=!1);options.memory||(memory=!1),firing=!1,locked&&(list=memory?[]:"")}var firing,memory,fired,locked,list=[],queue=[],firingIndex=-1,self={add:function(){return list&&(memory&&!firing&&(firingIndex=list.length-1,queue.push(memory)),function add(args){jQuery.each(args,function(_,arg){jQuery.isFunction(arg)?options.unique&&self.has(arg)||list.push(arg):arg&&arg.length&&"string"!==jQuery.type(arg)&&add(arg)})}(arguments),memory)&&!firing&&fire(),this},remove:function(){return jQuery.each(arguments,function(_,arg){for(var index;-1<(index=jQuery.inArray(arg,list,index));)list.splice(index,1),index<=firingIndex&&firingIndex--}),this},has:function(fn){return fn?-1<jQuery.inArray(fn,list):0<list.length},empty:function(){return list=list&&[],this},disable:function(){return locked=queue=[],list=memory="",this},disabled:function(){return!list},lock:function(){return locked=queue=[],memory||firing||(list=memory=""),this},locked:function(){return!!locked},fireWith:function(context,args){return locked||(args=[context,(args=args||[]).slice?args.slice():args],queue.push(args),firing)||fire(),this},fire:function(){return self.fireWith(this,arguments),this},fired:function(){return!!fired}};return self},jQuery.extend({Deferred:function(func){var tuples=[["notify","progress",jQuery.Callbacks("memory"),jQuery.Callbacks("memory"),2],["resolve","done",jQuery.Callbacks("once memory"),jQuery.Callbacks("once memory"),0,"resolved"],["reject","fail",jQuery.Callbacks("once memory"),jQuery.Callbacks("once memory"),1,"rejected"]],state="pending",promise={state:function(){return state},always:function(){return deferred.done(arguments).fail(arguments),this},catch:function(fn){return promise.then(null,fn)},pipe:function(){var fns=arguments;return jQuery.Deferred(function(newDefer){jQuery.each(tuples,function(i,tuple){var fn=jQuery.isFunction(fns[tuple[4]])&&fns[tuple[4]];deferred[tuple[1]](function(){var returned=fn&&fn.apply(this,arguments);returned&&jQuery.isFunction(returned.promise)?returned.promise().progress(newDefer.notify).done(newDefer.resolve).fail(newDefer.reject):newDefer[tuple[0]+"With"](this,fn?[returned]:arguments)})}),fns=null}).promise()},then:function(onFulfilled,onRejected,onProgress){var maxDepth=0;function resolve(depth,deferred,handler,special){return function(){function mightThrow(){var returned,then;if(!(depth<maxDepth)){if((returned=handler.apply(that,args))===deferred.promise())throw new TypeError("Thenable self-resolution");then=returned&&("object"==typeof returned||"function"==typeof returned)&&returned.then,jQuery.isFunction(then)?special?then.call(returned,resolve(maxDepth,deferred,Identity,special),resolve(maxDepth,deferred,Thrower,special)):(maxDepth++,then.call(returned,resolve(maxDepth,deferred,Identity,special),resolve(maxDepth,deferred,Thrower,special),resolve(maxDepth,deferred,Identity,deferred.notifyWith))):(handler!==Identity&&(that=void 0,args=[returned]),(special||deferred.resolveWith)(that,args))}}var that=this,args=arguments,process=special?mightThrow:function(){try{mightThrow()}catch(e){jQuery.Deferred.exceptionHook&&jQuery.Deferred.exceptionHook(e,process.stackTrace),maxDepth<=depth+1&&(handler!==Thrower&&(that=void 0,args=[e]),deferred.rejectWith(that,args))}};depth?process():(jQuery.Deferred.getStackHook&&(process.stackTrace=jQuery.Deferred.getStackHook()),window.setTimeout(process))}}return jQuery.Deferred(function(newDefer){tuples[0][3].add(resolve(0,newDefer,jQuery.isFunction(onProgress)?onProgress:Identity,newDefer.notifyWith)),tuples[1][3].add(resolve(0,newDefer,jQuery.isFunction(onFulfilled)?onFulfilled:Identity)),tuples[2][3].add(resolve(0,newDefer,jQuery.isFunction(onRejected)?onRejected:Thrower))}).promise()},promise:function(obj){return null!=obj?jQuery.extend(obj,promise):promise}},deferred={};return jQuery.each(tuples,function(i,tuple){var list=tuple[2],stateString=tuple[5];promise[tuple[1]]=list.add,stateString&&list.add(function(){state=stateString},tuples[3-i][2].disable,tuples[0][2].lock),list.add(tuple[3].fire),deferred[tuple[0]]=function(){return deferred[tuple[0]+"With"](this===deferred?void 0:this,arguments),this},deferred[tuple[0]+"With"]=list.fireWith}),promise.promise(deferred),func&&func.call(deferred,deferred),deferred},when:function(singleValue){function updateFunc(i){return function(value){resolveContexts[i]=this,resolveValues[i]=1<arguments.length?slice.call(arguments):value,--remaining||master.resolveWith(resolveContexts,resolveValues)}}var remaining=arguments.length,i=remaining,resolveContexts=Array(i),resolveValues=slice.call(arguments),master=jQuery.Deferred();if(remaining<=1&&(adoptValue(singleValue,master.done(updateFunc(i)).resolve,master.reject),"pending"===master.state()||jQuery.isFunction(resolveValues[i]&&resolveValues[i].then)))return master.then();for(;i--;)adoptValue(resolveValues[i],updateFunc(i),master.reject);return master.promise()}});var rerrorNames=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/,readyList=(jQuery.Deferred.exceptionHook=function(error,stack){window.console&&window.console.warn&&error&&rerrorNames.test(error.name)&&window.console.warn("jQuery.Deferred exception: "+error.message,error.stack,stack)},jQuery.readyException=function(error){window.setTimeout(function(){throw error})},jQuery.Deferred());function completed(){document.removeEventListener("DOMContentLoaded",completed),window.removeEventListener("load",completed),jQuery.ready()}jQuery.fn.ready=function(fn){return readyList.then(fn).catch(function(error){jQuery.readyException(error)}),this},jQuery.extend({isReady:!1,readyWait:1,holdReady:function(hold){hold?jQuery.readyWait++:jQuery.ready(!0)},ready:function(wait){(!0===wait?--jQuery.readyWait:jQuery.isReady)||(jQuery.isReady=!0)!==wait&&0<--jQuery.readyWait||readyList.resolveWith(document,[jQuery])}}),jQuery.ready.then=readyList.then,"complete"===document.readyState||"loading"!==document.readyState&&!document.documentElement.doScroll?window.setTimeout(jQuery.ready):(document.addEventListener("DOMContentLoaded",completed),window.addEventListener("load",completed));function access(elems,fn,key,value,chainable,emptyGet,raw){var i=0,len=elems.length,bulk=null==key;if("object"===jQuery.type(key))for(i in chainable=!0,key)access(elems,fn,i,key[i],!0,emptyGet,raw);else if(void 0!==value&&(chainable=!0,jQuery.isFunction(value)||(raw=!0),fn=bulk?raw?(fn.call(elems,value),null):(bulk=fn,function(elem,key,value){return bulk.call(jQuery(elem),value)}):fn))for(;i<len;i++)fn(elems[i],key,raw?value:value.call(elems[i],i,fn(elems[i],key)));return chainable?elems:bulk?fn.call(elems):len?fn(elems[0],key):emptyGet}function acceptData(owner){return 1===owner.nodeType||9===owner.nodeType||!+owner.nodeType}function Data(){this.expando=jQuery.expando+Data.uid++}Data.uid=1,Data.prototype={cache:function(owner){var value=owner[this.expando];return value||(value={},acceptData(owner)&&(owner.nodeType?owner[this.expando]=value:Object.defineProperty(owner,this.expando,{value:value,configurable:!0}))),value},set:function(owner,data,value){var prop,cache=this.cache(owner);if("string"==typeof data)cache[jQuery.camelCase(data)]=value;else for(prop in data)cache[jQuery.camelCase(prop)]=data[prop];return cache},get:function(owner,key){return void 0===key?this.cache(owner):owner[this.expando]&&owner[this.expando][jQuery.camelCase(key)]},access:function(owner,key,value){return void 0===key||key&&"string"==typeof key&&void 0===value?this.get(owner,key):(this.set(owner,key,value),void 0!==value?value:key)},remove:function(owner,key){var i,cache=owner[this.expando];if(void 0!==cache){if(void 0!==key){i=(key=jQuery.isArray(key)?key.map(jQuery.camelCase):(key=jQuery.camelCase(key))in cache?[key]:key.match(rnothtmlwhite)||[]).length;for(;i--;)delete cache[key[i]]}void 0!==key&&!jQuery.isEmptyObject(cache)||(owner.nodeType?owner[this.expando]=void 0:delete owner[this.expando])}},hasData:function(owner){owner=owner[this.expando];return void 0!==owner&&!jQuery.isEmptyObject(owner)}};var dataPriv=new Data,dataUser=new Data,rbrace=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,rmultiDash=/[A-Z]/g;function dataAttr(elem,key,data){var name;if(void 0===data&&1===elem.nodeType)if(name="data-"+key.replace(rmultiDash,"-$&").toLowerCase(),"string"==typeof(data=elem.getAttribute(name))){try{data=function(data){return"true"===data||"false"!==data&&("null"===data?null:data===+data+""?+data:rbrace.test(data)?JSON.parse(data):data)}(data)}catch(e){}dataUser.set(elem,key,data)}else data=void 0;return data}jQuery.extend({hasData:function(elem){return dataUser.hasData(elem)||dataPriv.hasData(elem)},data:function(elem,name,data){return dataUser.access(elem,name,data)},removeData:function(elem,name){dataUser.remove(elem,name)},_data:function(elem,name,data){return dataPriv.access(elem,name,data)},_removeData:function(elem,name){dataPriv.remove(elem,name)}}),jQuery.fn.extend({data:function(key,value){var i,name,data,elem=this[0],attrs=elem&&elem.attributes;if(void 0!==key)return"object"==typeof key?this.each(function(){dataUser.set(this,key)}):access(this,function(value){var data;if(elem&&void 0===value)return void 0!==(data=dataUser.get(elem,key))||void 0!==(data=dataAttr(elem,key))?data:void 0;this.each(function(){dataUser.set(this,key,value)})},null,value,1<arguments.length,null,!0);if(this.length&&(data=dataUser.get(elem),1===elem.nodeType)&&!dataPriv.get(elem,"hasDataAttrs")){for(i=attrs.length;i--;)attrs[i]&&0===(name=attrs[i].name).indexOf("data-")&&(name=jQuery.camelCase(name.slice(5)),dataAttr(elem,name,data[name]));dataPriv.set(elem,"hasDataAttrs",!0)}return data},removeData:function(key){return this.each(function(){dataUser.remove(this,key)})}}),jQuery.extend({queue:function(elem,type,data){var queue;if(elem)return queue=dataPriv.get(elem,type=(type||"fx")+"queue"),data&&(!queue||jQuery.isArray(data)?queue=dataPriv.access(elem,type,jQuery.makeArray(data)):queue.push(data)),queue||[]},dequeue:function(elem,type){type=type||"fx";var queue=jQuery.queue(elem,type),startLength=queue.length,fn=queue.shift(),hooks=jQuery._queueHooks(elem,type);"inprogress"===fn&&(fn=queue.shift(),startLength--),fn&&("fx"===type&&queue.unshift("inprogress"),delete hooks.stop,fn.call(elem,function(){jQuery.dequeue(elem,type)},hooks)),!startLength&&hooks&&hooks.empty.fire()},_queueHooks:function(elem,type){var key=type+"queueHooks";return dataPriv.get(elem,key)||dataPriv.access(elem,key,{empty:jQuery.Callbacks("once memory").add(function(){dataPriv.remove(elem,[type+"queue",key])})})}}),jQuery.fn.extend({queue:function(type,data){var setter=2;return"string"!=typeof type&&(data=type,type="fx",setter--),arguments.length<setter?jQuery.queue(this[0],type):void 0===data?this:this.each(function(){var queue=jQuery.queue(this,type,data);jQuery._queueHooks(this,type),"fx"===type&&"inprogress"!==queue[0]&&jQuery.dequeue(this,type)})},dequeue:function(type){return this.each(function(){jQuery.dequeue(this,type)})},clearQueue:function(type){return this.queue(type||"fx",[])},promise:function(type,obj){function resolve(){--count||defer.resolveWith(elements,[elements])}var tmp,count=1,defer=jQuery.Deferred(),elements=this,i=this.length;for("string"!=typeof type&&(obj=type,type=void 0),type=type||"fx";i--;)(tmp=dataPriv.get(elements[i],type+"queueHooks"))&&tmp.empty&&(count++,tmp.empty.add(resolve));return resolve(),defer.promise(obj)}});function isHiddenWithinTree(elem,el){return"none"===(elem=el||elem).style.display||""===elem.style.display&&jQuery.contains(elem.ownerDocument,elem)&&"none"===jQuery.css(elem,"display")}function swap(elem,options,callback,args){var name,old={};for(name in options)old[name]=elem.style[name],elem.style[name]=options[name];for(name in callback=callback.apply(elem,args||[]),options)elem.style[name]=old[name];return callback}var arr=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,rcssNum=new RegExp("^(?:([+-])=|)("+arr+")([a-z%]*)$","i"),cssExpand=["Top","Right","Bottom","Left"];function adjustCSS(elem,prop,valueParts,tween){var adjusted,scale=1,maxIterations=20,currentValue=tween?function(){return tween.cur()}:function(){return jQuery.css(elem,prop,"")},initial=currentValue(),unit=valueParts&&valueParts[3]||(jQuery.cssNumber[prop]?"":"px"),initialInUnit=(jQuery.cssNumber[prop]||"px"!==unit&&+initial)&&rcssNum.exec(jQuery.css(elem,prop));if(initialInUnit&&initialInUnit[3]!==unit)for(unit=unit||initialInUnit[3],valueParts=valueParts||[],initialInUnit=+initial||1;initialInUnit/=scale=scale||".5",jQuery.style(elem,prop,initialInUnit+unit),scale!==(scale=currentValue()/initial)&&1!==scale&&--maxIterations;);return valueParts&&(initialInUnit=+initialInUnit||+initial||0,adjusted=valueParts[1]?initialInUnit+(valueParts[1]+1)*valueParts[2]:+valueParts[2],tween)&&(tween.unit=unit,tween.start=initialInUnit,tween.end=adjusted),adjusted}var defaultDisplayMap={};function showHide(elements,show){for(var display,elem,values=[],index=0,length=elements.length;index<length;index++)(elem=elements[index]).style&&(display=elem.style.display,show?("none"===display&&(values[index]=dataPriv.get(elem,"display")||null,values[index]||(elem.style.display="")),""===elem.style.display&&isHiddenWithinTree(elem)&&(values[index]=function(elem){var doc=elem.ownerDocument,elem=elem.nodeName,display=defaultDisplayMap[elem];return display||(doc=doc.body.appendChild(doc.createElement(elem)),display=jQuery.css(doc,"display"),doc.parentNode.removeChild(doc),defaultDisplayMap[elem]=display="none"===display?"block":display),display}(elem))):"none"!==display&&(values[index]="none",dataPriv.set(elem,"display",display)));for(index=0;index<length;index++)null!=values[index]&&(elements[index].style.display=values[index]);return elements}jQuery.fn.extend({show:function(){return showHide(this,!0)},hide:function(){return showHide(this)},toggle:function(state){return"boolean"==typeof state?state?this.show():this.hide():this.each(function(){isHiddenWithinTree(this)?jQuery(this).show():jQuery(this).hide()})}});var rcheckableType=/^(?:checkbox|radio)$/i,rtagName=/<([a-z][^\/\0>\x20\t\r\n\f]+)/i,rscriptType=/^$|\/(?:java|ecma)script/i,wrapMap={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function getAll(context,tag){var ret=void 0!==context.getElementsByTagName?context.getElementsByTagName(tag||"*"):void 0!==context.querySelectorAll?context.querySelectorAll(tag||"*"):[];return void 0===tag||tag&&jQuery.nodeName(context,tag)?jQuery.merge([context],ret):ret}function setGlobalEval(elems,refElements){for(var i=0,l=elems.length;i<l;i++)dataPriv.set(elems[i],"globalEval",!refElements||dataPriv.get(refElements[i],"globalEval"))}wrapMap.optgroup=wrapMap.option,wrapMap.tbody=wrapMap.tfoot=wrapMap.colgroup=wrapMap.caption=wrapMap.thead,wrapMap.th=wrapMap.td;var div,rhtml=/<|&#?\w+;/;function buildFragment(elems,context,scripts,selection,ignored){for(var elem,tmp,tag,contains,j,fragment=context.createDocumentFragment(),nodes=[],i=0,l=elems.length;i<l;i++)if((elem=elems[i])||0===elem)if("object"===jQuery.type(elem))jQuery.merge(nodes,elem.nodeType?[elem]:elem);else if(rhtml.test(elem)){for(tmp=tmp||fragment.appendChild(context.createElement("div")),tag=(rtagName.exec(elem)||["",""])[1].toLowerCase(),tag=wrapMap[tag]||wrapMap._default,tmp.innerHTML=tag[1]+jQuery.htmlPrefilter(elem)+tag[2],j=tag[0];j--;)tmp=tmp.lastChild;jQuery.merge(nodes,tmp.childNodes),(tmp=fragment.firstChild).textContent=""}else nodes.push(context.createTextNode(elem));for(fragment.textContent="",i=0;elem=nodes[i++];)if(selection&&-1<jQuery.inArray(elem,selection))ignored&&ignored.push(elem);else if(contains=jQuery.contains(elem.ownerDocument,elem),tmp=getAll(fragment.appendChild(elem),"script"),contains&&setGlobalEval(tmp),scripts)for(j=0;elem=tmp[j++];)rscriptType.test(elem.type||"")&&scripts.push(elem);return fragment}div=document.createDocumentFragment().appendChild(document.createElement("div")),(input=document.createElement("input")).setAttribute("type","radio"),input.setAttribute("checked","checked"),input.setAttribute("name","t"),div.appendChild(input),support.checkClone=div.cloneNode(!0).cloneNode(!0).lastChild.checked,div.innerHTML="<textarea>x</textarea>",support.noCloneChecked=!!div.cloneNode(!0).lastChild.defaultValue;var documentElement=document.documentElement,rkeyEvent=/^key/,rmouseEvent=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,rtypenamespace=/^([^.]*)(?:\.(.+)|)/;function returnTrue(){return!0}function returnFalse(){return!1}function safeActiveElement(){try{return document.activeElement}catch(err){}}function on(elem,types,selector,data,fn,one){var origFn,type;if("object"==typeof types){for(type in"string"!=typeof selector&&(data=data||selector,selector=void 0),types)on(elem,type,selector,data,types[type],one);return elem}if(null==data&&null==fn?(fn=selector,data=selector=void 0):null==fn&&("string"==typeof selector?(fn=data,data=void 0):(fn=data,data=selector,selector=void 0)),!1===fn)fn=returnFalse;else if(!fn)return elem;return 1===one&&(origFn=fn,(fn=function(event){return jQuery().off(event),origFn.apply(this,arguments)}).guid=origFn.guid||(origFn.guid=jQuery.guid++)),elem.each(function(){jQuery.event.add(this,types,fn,data,selector)})}jQuery.event={global:{},add:function(elem,types,handler,data,selector){var handleObjIn,eventHandle,events,t,special,handlers,type,tmp,origType,elemData=dataPriv.get(elem);if(elemData)for(handler.handler&&(handler=(handleObjIn=handler).handler,selector=handleObjIn.selector),selector&&jQuery.find.matchesSelector(documentElement,selector),handler.guid||(handler.guid=jQuery.guid++),events=(events=elemData.events)||(elemData.events={}),eventHandle=(eventHandle=elemData.handle)||(elemData.handle=function(e){return void 0!==jQuery&&jQuery.event.triggered!==e.type?jQuery.event.dispatch.apply(elem,arguments):void 0}),t=(types=(types||"").match(rnothtmlwhite)||[""]).length;t--;)type=origType=(tmp=rtypenamespace.exec(types[t])||[])[1],tmp=(tmp[2]||"").split(".").sort(),type&&(special=jQuery.event.special[type]||{},type=(selector?special.delegateType:special.bindType)||type,special=jQuery.event.special[type]||{},origType=jQuery.extend({type:type,origType:origType,data:data,handler:handler,guid:handler.guid,selector:selector,needsContext:selector&&jQuery.expr.match.needsContext.test(selector),namespace:tmp.join(".")},handleObjIn),(handlers=events[type])||((handlers=events[type]=[]).delegateCount=0,special.setup&&!1!==special.setup.call(elem,data,tmp,eventHandle))||elem.addEventListener&&elem.addEventListener(type,eventHandle),special.add&&(special.add.call(elem,origType),origType.handler.guid||(origType.handler.guid=handler.guid)),selector?handlers.splice(handlers.delegateCount++,0,origType):handlers.push(origType),jQuery.event.global[type]=!0)},remove:function(elem,types,handler,selector,mappedTypes){var j,origCount,tmp,events,t,handleObj,special,handlers,type,namespaces,origType,elemData=dataPriv.hasData(elem)&&dataPriv.get(elem);if(elemData&&(events=elemData.events)){for(t=(types=(types||"").match(rnothtmlwhite)||[""]).length;t--;)if(type=origType=(tmp=rtypenamespace.exec(types[t])||[])[1],namespaces=(tmp[2]||"").split(".").sort(),type){for(special=jQuery.event.special[type]||{},handlers=events[type=(selector?special.delegateType:special.bindType)||type]||[],tmp=tmp[2]&&new RegExp("(^|\\.)"+namespaces.join("\\.(?:.*\\.|)")+"(\\.|$)"),origCount=j=handlers.length;j--;)handleObj=handlers[j],!mappedTypes&&origType!==handleObj.origType||handler&&handler.guid!==handleObj.guid||tmp&&!tmp.test(handleObj.namespace)||selector&&selector!==handleObj.selector&&("**"!==selector||!handleObj.selector)||(handlers.splice(j,1),handleObj.selector&&handlers.delegateCount--,special.remove&&special.remove.call(elem,handleObj));origCount&&!handlers.length&&(special.teardown&&!1!==special.teardown.call(elem,namespaces,elemData.handle)||jQuery.removeEvent(elem,type,elemData.handle),delete events[type])}else for(type in events)jQuery.event.remove(elem,type+types[t],handler,selector,!0);jQuery.isEmptyObject(events)&&dataPriv.remove(elem,"handle events")}},dispatch:function(nativeEvent){var i,j,matched,handleObj,handlerQueue,event=jQuery.event.fix(nativeEvent),args=new Array(arguments.length),nativeEvent=(dataPriv.get(this,"events")||{})[event.type]||[],special=jQuery.event.special[event.type]||{};for(args[0]=event,i=1;i<arguments.length;i++)args[i]=arguments[i];if(event.delegateTarget=this,!special.preDispatch||!1!==special.preDispatch.call(this,event)){for(handlerQueue=jQuery.event.handlers.call(this,event,nativeEvent),i=0;(matched=handlerQueue[i++])&&!event.isPropagationStopped();)for(event.currentTarget=matched.elem,j=0;(handleObj=matched.handlers[j++])&&!event.isImmediatePropagationStopped();)event.rnamespace&&!event.rnamespace.test(handleObj.namespace)||(event.handleObj=handleObj,event.data=handleObj.data,void 0!==(handleObj=((jQuery.event.special[handleObj.origType]||{}).handle||handleObj.handler).apply(matched.elem,args))&&!1===(event.result=handleObj)&&(event.preventDefault(),event.stopPropagation()));return special.postDispatch&&special.postDispatch.call(this,event),event.result}},handlers:function(event,handlers){var i,handleObj,sel,matchedHandlers,matchedSelectors,handlerQueue=[],delegateCount=handlers.delegateCount,cur=event.target;if(delegateCount&&cur.nodeType&&!("click"===event.type&&1<=event.button))for(;cur!==this;cur=cur.parentNode||this)if(1===cur.nodeType&&("click"!==event.type||!0!==cur.disabled)){for(matchedHandlers=[],matchedSelectors={},i=0;i<delegateCount;i++)void 0===matchedSelectors[sel=(handleObj=handlers[i]).selector+" "]&&(matchedSelectors[sel]=handleObj.needsContext?-1<jQuery(sel,this).index(cur):jQuery.find(sel,this,null,[cur]).length),matchedSelectors[sel]&&matchedHandlers.push(handleObj);matchedHandlers.length&&handlerQueue.push({elem:cur,handlers:matchedHandlers})}return cur=this,delegateCount<handlers.length&&handlerQueue.push({elem:cur,handlers:handlers.slice(delegateCount)}),handlerQueue},addProp:function(name,hook){Object.defineProperty(jQuery.Event.prototype,name,{enumerable:!0,configurable:!0,get:jQuery.isFunction(hook)?function(){if(this.originalEvent)return hook(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[name]},set:function(value){Object.defineProperty(this,name,{enumerable:!0,configurable:!0,writable:!0,value:value})}})},fix:function(originalEvent){return originalEvent[jQuery.expando]?originalEvent:new jQuery.Event(originalEvent)},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==safeActiveElement()&&this.focus)return this.focus(),!1},delegateType:"focusin"},blur:{trigger:function(){if(this===safeActiveElement()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if("checkbox"===this.type&&this.click&&jQuery.nodeName(this,"input"))return this.click(),!1},_default:function(event){return jQuery.nodeName(event.target,"a")}},beforeunload:{postDispatch:function(event){void 0!==event.result&&event.originalEvent&&(event.originalEvent.returnValue=event.result)}}}},jQuery.removeEvent=function(elem,type,handle){elem.removeEventListener&&elem.removeEventListener(type,handle)},jQuery.Event=function(src,props){if(!(this instanceof jQuery.Event))return new jQuery.Event(src,props);src&&src.type?(this.originalEvent=src,this.type=src.type,this.isDefaultPrevented=src.defaultPrevented||void 0===src.defaultPrevented&&!1===src.returnValue?returnTrue:returnFalse,this.target=src.target&&3===src.target.nodeType?src.target.parentNode:src.target,this.currentTarget=src.currentTarget,this.relatedTarget=src.relatedTarget):this.type=src,props&&jQuery.extend(this,props),this.timeStamp=src&&src.timeStamp||jQuery.now(),this[jQuery.expando]=!0},jQuery.Event.prototype={constructor:jQuery.Event,isDefaultPrevented:returnFalse,isPropagationStopped:returnFalse,isImmediatePropagationStopped:returnFalse,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=returnTrue,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=returnTrue,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=returnTrue,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},jQuery.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(event){var button=event.button;return null==event.which&&rkeyEvent.test(event.type)?null!=event.charCode?event.charCode:event.keyCode:!event.which&&void 0!==button&&rmouseEvent.test(event.type)?1&button?1:2&button?3:4&button?2:0:event.which}},jQuery.event.addProp),jQuery.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(orig,fix){jQuery.event.special[orig]={delegateType:fix,bindType:fix,handle:function(event){var ret,related=event.relatedTarget,handleObj=event.handleObj;return related&&(related===this||jQuery.contains(this,related))||(event.type=handleObj.origType,ret=handleObj.handler.apply(this,arguments),event.type=fix),ret}}}),jQuery.fn.extend({on:function(types,selector,data,fn){return on(this,types,selector,data,fn)},one:function(types,selector,data,fn){return on(this,types,selector,data,fn,1)},off:function(types,selector,fn){var handleObj,type;if(types&&types.preventDefault&&types.handleObj)handleObj=types.handleObj,jQuery(types.delegateTarget).off(handleObj.namespace?handleObj.origType+"."+handleObj.namespace:handleObj.origType,handleObj.selector,handleObj.handler);else{if("object"!=typeof types)return!1!==selector&&"function"!=typeof selector||(fn=selector,selector=void 0),!1===fn&&(fn=returnFalse),this.each(function(){jQuery.event.remove(this,types,fn,selector)});for(type in types)this.off(type,selector,types[type])}return this}});var rxhtmlTag=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([a-z][^\/\0>\x20\t\r\n\f]*)[^>]*)\/>/gi,rnoInnerhtml=/<script|<style|<link/i,rchecked=/checked\s*(?:[^=]|=\s*.checked.)/i,rscriptTypeMasked=/^true\/(.*)/,rcleanScript=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function manipulationTarget(elem,content){return jQuery.nodeName(elem,"table")&&jQuery.nodeName(11!==content.nodeType?content:content.firstChild,"tr")&&elem.getElementsByTagName("tbody")[0]||elem}function disableScript(elem){return elem.type=(null!==elem.getAttribute("type"))+"/"+elem.type,elem}function restoreScript(elem){var match=rscriptTypeMasked.exec(elem.type);return match?elem.type=match[1]:elem.removeAttribute("type"),elem}function cloneCopyEvent(src,dest){var i,l,type,pdataOld,pdataCur,events;if(1===dest.nodeType){if(dataPriv.hasData(src)&&(pdataOld=dataPriv.access(src),pdataCur=dataPriv.set(dest,pdataOld),events=pdataOld.events))for(type in delete pdataCur.handle,pdataCur.events={},events)for(i=0,l=events[type].length;i<l;i++)jQuery.event.add(dest,type,events[type][i]);dataUser.hasData(src)&&(pdataOld=dataUser.access(src),pdataCur=jQuery.extend({},pdataOld),dataUser.set(dest,pdataCur))}}function domManip(collection,args,callback,ignored){args=concat.apply([],args);var fragment,first,scripts,hasScripts,node,doc,i=0,l=collection.length,iNoClone=l-1,value=args[0],isFunction=jQuery.isFunction(value);if(isFunction||1<l&&"string"==typeof value&&!support.checkClone&&rchecked.test(value))return collection.each(function(index){var self=collection.eq(index);isFunction&&(args[0]=value.call(this,index,self.html())),domManip(self,args,callback,ignored)});if(l&&(first=(fragment=buildFragment(args,collection[0].ownerDocument,!1,collection,ignored)).firstChild,1===fragment.childNodes.length&&(fragment=first),first||ignored)){for(hasScripts=(scripts=jQuery.map(getAll(fragment,"script"),disableScript)).length;i<l;i++)node=fragment,i!==iNoClone&&(node=jQuery.clone(node,!0,!0),hasScripts)&&jQuery.merge(scripts,getAll(node,"script")),callback.call(collection[i],node,i);if(hasScripts)for(doc=scripts[scripts.length-1].ownerDocument,jQuery.map(scripts,restoreScript),i=0;i<hasScripts;i++)node=scripts[i],rscriptType.test(node.type||"")&&!dataPriv.access(node,"globalEval")&&jQuery.contains(doc,node)&&(node.src?jQuery._evalUrl&&jQuery._evalUrl(node.src):DOMEval(node.textContent.replace(rcleanScript,""),doc))}return collection}function remove(elem,selector,keepData){for(var node,nodes=selector?jQuery.filter(selector,elem):elem,i=0;null!=(node=nodes[i]);i++)keepData||1!==node.nodeType||jQuery.cleanData(getAll(node)),node.parentNode&&(keepData&&jQuery.contains(node.ownerDocument,node)&&setGlobalEval(getAll(node,"script")),node.parentNode.removeChild(node));return elem}jQuery.extend({htmlPrefilter:function(html){return html.replace(rxhtmlTag,"<$1></$2>")},clone:function(elem,dataAndEvents,deepDataAndEvents){var i,l,srcElements,destElements,src,dest,nodeName,clone=elem.cloneNode(!0),inPage=jQuery.contains(elem.ownerDocument,elem);if(!(support.noCloneChecked||1!==elem.nodeType&&11!==elem.nodeType||jQuery.isXMLDoc(elem)))for(destElements=getAll(clone),i=0,l=(srcElements=getAll(elem)).length;i<l;i++)src=srcElements[i],dest=destElements[i],nodeName=void 0,"input"===(nodeName=dest.nodeName.toLowerCase())&&rcheckableType.test(src.type)?dest.checked=src.checked:"input"!==nodeName&&"textarea"!==nodeName||(dest.defaultValue=src.defaultValue);if(dataAndEvents)if(deepDataAndEvents)for(srcElements=srcElements||getAll(elem),destElements=destElements||getAll(clone),i=0,l=srcElements.length;i<l;i++)cloneCopyEvent(srcElements[i],destElements[i]);else cloneCopyEvent(elem,clone);return 0<(destElements=getAll(clone,"script")).length&&setGlobalEval(destElements,!inPage&&getAll(elem,"script")),clone},cleanData:function(elems){for(var data,elem,type,special=jQuery.event.special,i=0;void 0!==(elem=elems[i]);i++)if(acceptData(elem)){if(data=elem[dataPriv.expando]){if(data.events)for(type in data.events)special[type]?jQuery.event.remove(elem,type):jQuery.removeEvent(elem,type,data.handle);elem[dataPriv.expando]=void 0}elem[dataUser.expando]&&(elem[dataUser.expando]=void 0)}}}),jQuery.fn.extend({detach:function(selector){return remove(this,selector,!0)},remove:function(selector){return remove(this,selector)},text:function(value){return access(this,function(value){return void 0===value?jQuery.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=value)})},null,value,arguments.length)},append:function(){return domManip(this,arguments,function(elem){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||manipulationTarget(this,elem).appendChild(elem)})},prepend:function(){return domManip(this,arguments,function(elem){var target;1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(target=manipulationTarget(this,elem)).insertBefore(elem,target.firstChild)})},before:function(){return domManip(this,arguments,function(elem){this.parentNode&&this.parentNode.insertBefore(elem,this)})},after:function(){return domManip(this,arguments,function(elem){this.parentNode&&this.parentNode.insertBefore(elem,this.nextSibling)})},empty:function(){for(var elem,i=0;null!=(elem=this[i]);i++)1===elem.nodeType&&(jQuery.cleanData(getAll(elem,!1)),elem.textContent="");return this},clone:function(dataAndEvents,deepDataAndEvents){return dataAndEvents=null!=dataAndEvents&&dataAndEvents,deepDataAndEvents=null==deepDataAndEvents?dataAndEvents:deepDataAndEvents,this.map(function(){return jQuery.clone(this,dataAndEvents,deepDataAndEvents)})},html:function(value){return access(this,function(value){var elem=this[0]||{},i=0,l=this.length;if(void 0===value&&1===elem.nodeType)return elem.innerHTML;if("string"==typeof value&&!rnoInnerhtml.test(value)&&!wrapMap[(rtagName.exec(value)||["",""])[1].toLowerCase()]){value=jQuery.htmlPrefilter(value);try{for(;i<l;i++)1===(elem=this[i]||{}).nodeType&&(jQuery.cleanData(getAll(elem,!1)),elem.innerHTML=value);elem=0}catch(e){}}elem&&this.empty().append(value)},null,value,arguments.length)},replaceWith:function(){var ignored=[];return domManip(this,arguments,function(elem){var parent=this.parentNode;jQuery.inArray(this,ignored)<0&&(jQuery.cleanData(getAll(this)),parent)&&parent.replaceChild(elem,this)},ignored)}}),jQuery.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(name,original){jQuery.fn[name]=function(selector){for(var elems,ret=[],insert=jQuery(selector),last=insert.length-1,i=0;i<=last;i++)elems=i===last?this:this.clone(!0),jQuery(insert[i])[original](elems),push.apply(ret,elems.get());return this.pushStack(ret)}});function getStyles(elem){var view=elem.ownerDocument.defaultView;return(view=view&&view.opener?view:window).getComputedStyle(elem)}var rmargin=/^margin/,rnumnonpx=new RegExp("^("+arr+")(?!px)[a-z%]+$","i");function curCSS(elem,name,computed){var maxWidth,ret,style=elem.style;return(computed=computed||getStyles(elem))&&(""!==(ret=computed.getPropertyValue(name)||computed[name])||jQuery.contains(elem.ownerDocument,elem)||(ret=jQuery.style(elem,name)),!support.pixelMarginRight())&&rnumnonpx.test(ret)&&rmargin.test(name)&&(elem=style.width,name=style.minWidth,maxWidth=style.maxWidth,style.minWidth=style.maxWidth=style.width=ret,ret=computed.width,style.width=elem,style.minWidth=name,style.maxWidth=maxWidth),void 0!==ret?ret+"":ret}function addGetHookIf(conditionFn,hookFn){return{get:function(){if(!conditionFn())return(this.get=hookFn).apply(this,arguments);delete this.get}}}!function(){function computeStyleTests(){var divStyle;div&&(div.style.cssText="box-sizing:border-box;position:relative;display:block;margin:auto;border:1px;padding:1px;top:1%;width:50%",div.innerHTML="",documentElement.appendChild(container),divStyle=window.getComputedStyle(div),pixelPositionVal="1%"!==divStyle.top,reliableMarginLeftVal="2px"===divStyle.marginLeft,boxSizingReliableVal="4px"===divStyle.width,div.style.marginRight="50%",pixelMarginRightVal="4px"===divStyle.marginRight,documentElement.removeChild(container),div=null)}var pixelPositionVal,boxSizingReliableVal,pixelMarginRightVal,reliableMarginLeftVal,container=document.createElement("div"),div=document.createElement("div");div.style&&(div.style.backgroundClip="content-box",div.cloneNode(!0).style.backgroundClip="",support.clearCloneStyle="content-box"===div.style.backgroundClip,container.style.cssText="border:0;width:8px;height:0;top:0;left:-9999px;padding:0;margin-top:1px;position:absolute",container.appendChild(div),jQuery.extend(support,{pixelPosition:function(){return computeStyleTests(),pixelPositionVal},boxSizingReliable:function(){return computeStyleTests(),boxSizingReliableVal},pixelMarginRight:function(){return computeStyleTests(),pixelMarginRightVal},reliableMarginLeft:function(){return computeStyleTests(),reliableMarginLeftVal}}))}();var rdisplayswap=/^(none|table(?!-c[ea]).+)/,cssShow={position:"absolute",visibility:"hidden",display:"block"},cssNormalTransform={letterSpacing:"0",fontWeight:"400"},cssPrefixes=["Webkit","Moz","ms"],emptyStyle=document.createElement("div").style;function vendorPropName(name){if(name in emptyStyle)return name;for(var capName=name[0].toUpperCase()+name.slice(1),i=cssPrefixes.length;i--;)if((name=cssPrefixes[i]+capName)in emptyStyle)return name}function setPositiveNumber(elem,value,subtract){var matches=rcssNum.exec(value);return matches?Math.max(0,matches[2]-(subtract||0))+(matches[3]||"px"):value}function augmentWidthOrHeight(elem,name,extra,isBorderBox,styles){for(var val=0,i=extra===(isBorderBox?"border":"content")?4:"width"===name?1:0;i<4;i+=2)"margin"===extra&&(val+=jQuery.css(elem,extra+cssExpand[i],!0,styles)),isBorderBox?("content"===extra&&(val-=jQuery.css(elem,"padding"+cssExpand[i],!0,styles)),"margin"!==extra&&(val-=jQuery.css(elem,"border"+cssExpand[i]+"Width",!0,styles))):(val+=jQuery.css(elem,"padding"+cssExpand[i],!0,styles),"padding"!==extra&&(val+=jQuery.css(elem,"border"+cssExpand[i]+"Width",!0,styles)));return val}function getWidthOrHeight(elem,name,extra){var val,valueIsBorderBox=!0,styles=getStyles(elem),isBorderBox="border-box"===jQuery.css(elem,"boxSizing",!1,styles);if((val=elem.getClientRects().length?elem.getBoundingClientRect()[name]:val)<=0||null==val){if(((val=curCSS(elem,name,styles))<0||null==val)&&(val=elem.style[name]),rnumnonpx.test(val))return val;valueIsBorderBox=isBorderBox&&(support.boxSizingReliable()||val===elem.style[name]),val=parseFloat(val)||0}return val+augmentWidthOrHeight(elem,name,extra||(isBorderBox?"border":"content"),valueIsBorderBox,styles)+"px"}function Tween(elem,options,prop,end,easing){return new Tween.prototype.init(elem,options,prop,end,easing)}jQuery.extend({cssHooks:{opacity:{get:function(elem,computed){if(computed)return""===(computed=curCSS(elem,"opacity"))?"1":computed}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{float:"cssFloat"},style:function(elem,name,value,extra){if(elem&&3!==elem.nodeType&&8!==elem.nodeType&&elem.style){var ret,type,hooks,origName=jQuery.camelCase(name),style=elem.style;if(name=jQuery.cssProps[origName]||(jQuery.cssProps[origName]=vendorPropName(origName)||origName),hooks=jQuery.cssHooks[name]||jQuery.cssHooks[origName],void 0===value)return hooks&&"get"in hooks&&void 0!==(ret=hooks.get(elem,!1,extra))?ret:style[name];"string"===(type=typeof value)&&(ret=rcssNum.exec(value))&&ret[1]&&(value=adjustCSS(elem,name,ret),type="number"),null==value||value!=value||("number"===type&&(value+=ret&&ret[3]||(jQuery.cssNumber[origName]?"":"px")),support.clearCloneStyle||""!==value||0!==name.indexOf("background")||(style[name]="inherit"),hooks&&"set"in hooks&&void 0===(value=hooks.set(elem,value,extra)))||(style[name]=value)}},css:function(elem,name,extra,styles){var val,origName=jQuery.camelCase(name);return name=jQuery.cssProps[origName]||(jQuery.cssProps[origName]=vendorPropName(origName)||origName),"normal"===(val=void 0===(val=(origName=jQuery.cssHooks[name]||jQuery.cssHooks[origName])&&"get"in origName?origName.get(elem,!0,extra):val)?curCSS(elem,name,styles):val)&&name in cssNormalTransform&&(val=cssNormalTransform[name]),(""===extra||extra)&&(origName=parseFloat(val),!0===extra||isFinite(origName))?origName||0:val}}),jQuery.each(["height","width"],function(i,name){jQuery.cssHooks[name]={get:function(elem,computed,extra){if(computed)return!rdisplayswap.test(jQuery.css(elem,"display"))||elem.getClientRects().length&&elem.getBoundingClientRect().width?getWidthOrHeight(elem,name,extra):swap(elem,cssShow,function(){return getWidthOrHeight(elem,name,extra)})},set:function(elem,value,extra){var styles=extra&&getStyles(elem),extra=extra&&augmentWidthOrHeight(elem,name,extra,"border-box"===jQuery.css(elem,"boxSizing",!1,styles),styles);return extra&&(styles=rcssNum.exec(value))&&"px"!==(styles[3]||"px")&&(elem.style[name]=value,value=jQuery.css(elem,name)),setPositiveNumber(0,value,extra)}}}),jQuery.cssHooks.marginLeft=addGetHookIf(support.reliableMarginLeft,function(elem,computed){if(computed)return(parseFloat(curCSS(elem,"marginLeft"))||elem.getBoundingClientRect().left-swap(elem,{marginLeft:0},function(){return elem.getBoundingClientRect().left}))+"px"}),jQuery.each({margin:"",padding:"",border:"Width"},function(prefix,suffix){jQuery.cssHooks[prefix+suffix]={expand:function(value){for(var i=0,expanded={},parts="string"==typeof value?value.split(" "):[value];i<4;i++)expanded[prefix+cssExpand[i]+suffix]=parts[i]||parts[i-2]||parts[0];return expanded}},rmargin.test(prefix)||(jQuery.cssHooks[prefix+suffix].set=setPositiveNumber)}),jQuery.fn.extend({css:function(name,value){return access(this,function(elem,name,value){var styles,len,map={},i=0;if(jQuery.isArray(name)){for(styles=getStyles(elem),len=name.length;i<len;i++)map[name[i]]=jQuery.css(elem,name[i],!1,styles);return map}return void 0!==value?jQuery.style(elem,name,value):jQuery.css(elem,name)},name,value,1<arguments.length)}}),((jQuery.Tween=Tween).prototype={constructor:Tween,init:function(elem,options,prop,end,easing,unit){this.elem=elem,this.prop=prop,this.easing=easing||jQuery.easing._default,this.options=options,this.start=this.now=this.cur(),this.end=end,this.unit=unit||(jQuery.cssNumber[prop]?"":"px")},cur:function(){var hooks=Tween.propHooks[this.prop];return(hooks&&hooks.get?hooks:Tween.propHooks._default).get(this)},run:function(percent){var eased,hooks=Tween.propHooks[this.prop];return this.options.duration?this.pos=eased=jQuery.easing[this.easing](percent,this.options.duration*percent,0,1,this.options.duration):this.pos=eased=percent,this.now=(this.end-this.start)*eased+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),(hooks&&hooks.set?hooks:Tween.propHooks._default).set(this),this}}).init.prototype=Tween.prototype,(Tween.propHooks={_default:{get:function(tween){return 1!==tween.elem.nodeType||null!=tween.elem[tween.prop]&&null==tween.elem.style[tween.prop]?tween.elem[tween.prop]:(tween=jQuery.css(tween.elem,tween.prop,""))&&"auto"!==tween?tween:0},set:function(tween){jQuery.fx.step[tween.prop]?jQuery.fx.step[tween.prop](tween):1!==tween.elem.nodeType||null==tween.elem.style[jQuery.cssProps[tween.prop]]&&!jQuery.cssHooks[tween.prop]?tween.elem[tween.prop]=tween.now:jQuery.style(tween.elem,tween.prop,tween.now+tween.unit)}}}).scrollTop=Tween.propHooks.scrollLeft={set:function(tween){tween.elem.nodeType&&tween.elem.parentNode&&(tween.elem[tween.prop]=tween.now)}},jQuery.easing={linear:function(p){return p},swing:function(p){return.5-Math.cos(p*Math.PI)/2},_default:"swing"},jQuery.fx=Tween.prototype.init,jQuery.fx.step={};var fxNow,timerId,rfxtypes=/^(?:toggle|show|hide)$/,rrun=/queueHooks$/;function raf(){timerId&&(window.requestAnimationFrame(raf),jQuery.fx.tick())}function createFxNow(){return window.setTimeout(function(){fxNow=void 0}),fxNow=jQuery.now()}function genFx(type,includeWidth){var which,i=0,attrs={height:type};for(includeWidth=includeWidth?1:0;i<4;i+=2-includeWidth)attrs["margin"+(which=cssExpand[i])]=attrs["padding"+which]=type;return includeWidth&&(attrs.opacity=attrs.width=type),attrs}function createTween(value,prop,animation){for(var tween,collection=(Animation.tweeners[prop]||[]).concat(Animation.tweeners["*"]),index=0,length=collection.length;index<length;index++)if(tween=collection[index].call(animation,prop,value))return tween}function Animation(elem,properties,options){var result,stopped,index=0,length=Animation.prefilters.length,deferred=jQuery.Deferred().always(function(){delete tick.elem}),tick=function(){if(stopped)return!1;for(var currentTime=fxNow||createFxNow(),currentTime=Math.max(0,animation.startTime+animation.duration-currentTime),percent=1-(currentTime/animation.duration||0),index=0,length=animation.tweens.length;index<length;index++)animation.tweens[index].run(percent);return deferred.notifyWith(elem,[animation,percent,currentTime]),percent<1&&length?currentTime:(deferred.resolveWith(elem,[animation]),!1)},animation=deferred.promise({elem:elem,props:jQuery.extend({},properties),opts:jQuery.extend(!0,{specialEasing:{},easing:jQuery.easing._default},options),originalProperties:properties,originalOptions:options,startTime:fxNow||createFxNow(),duration:options.duration,tweens:[],createTween:function(prop,end){end=jQuery.Tween(elem,animation.opts,prop,end,animation.opts.specialEasing[prop]||animation.opts.easing);return animation.tweens.push(end),end},stop:function(gotoEnd){var index=0,length=gotoEnd?animation.tweens.length:0;if(!stopped){for(stopped=!0;index<length;index++)animation.tweens[index].run(1);gotoEnd?(deferred.notifyWith(elem,[animation,1,0]),deferred.resolveWith(elem,[animation,gotoEnd])):deferred.rejectWith(elem,[animation,gotoEnd])}return this}}),props=animation.props;for(!function(props,specialEasing){var index,name,easing,value,hooks;for(index in props)if(easing=specialEasing[name=jQuery.camelCase(index)],value=props[index],jQuery.isArray(value)&&(easing=value[1],value=props[index]=value[0]),index!==name&&(props[name]=value,delete props[index]),(hooks=jQuery.cssHooks[name])&&"expand"in hooks)for(index in value=hooks.expand(value),delete props[name],value)index in props||(props[index]=value[index],specialEasing[index]=easing);else specialEasing[name]=easing}(props,animation.opts.specialEasing);index<length;index++)if(result=Animation.prefilters[index].call(animation,elem,props,animation.opts))return jQuery.isFunction(result.stop)&&(jQuery._queueHooks(animation.elem,animation.opts.queue).stop=jQuery.proxy(result.stop,result)),result;return jQuery.map(props,createTween,animation),jQuery.isFunction(animation.opts.start)&&animation.opts.start.call(elem,animation),jQuery.fx.timer(jQuery.extend(tick,{elem:elem,anim:animation,queue:animation.opts.queue})),animation.progress(animation.opts.progress).done(animation.opts.done,animation.opts.complete).fail(animation.opts.fail).always(animation.opts.always)}jQuery.Animation=jQuery.extend(Animation,{tweeners:{"*":[function(prop,value){var tween=this.createTween(prop,value);return adjustCSS(tween.elem,prop,rcssNum.exec(value),tween),tween}]},tweener:function(props,callback){for(var prop,index=0,length=(props=jQuery.isFunction(props)?(callback=props,["*"]):props.match(rnothtmlwhite)).length;index<length;index++)prop=props[index],Animation.tweeners[prop]=Animation.tweeners[prop]||[],Animation.tweeners[prop].unshift(callback)},prefilters:[function(elem,props,opts){var prop,value,toggle,hooks,oldfire,propTween,restoreDisplay,isBox="width"in props||"height"in props,anim=this,orig={},style=elem.style,hidden=elem.nodeType&&isHiddenWithinTree(elem),dataShow=dataPriv.get(elem,"fxshow");for(prop in opts.queue||(null==(hooks=jQuery._queueHooks(elem,"fx")).unqueued&&(hooks.unqueued=0,oldfire=hooks.empty.fire,hooks.empty.fire=function(){hooks.unqueued||oldfire()}),hooks.unqueued++,anim.always(function(){anim.always(function(){hooks.unqueued--,jQuery.queue(elem,"fx").length||hooks.empty.fire()})})),props)if(value=props[prop],rfxtypes.test(value)){if(delete props[prop],toggle=toggle||"toggle"===value,value===(hidden?"hide":"show")){if("show"!==value||!dataShow||void 0===dataShow[prop])continue;hidden=!0}orig[prop]=dataShow&&dataShow[prop]||jQuery.style(elem,prop)}if((propTween=!jQuery.isEmptyObject(props))||!jQuery.isEmptyObject(orig))for(prop in isBox&&1===elem.nodeType&&(opts.overflow=[style.overflow,style.overflowX,style.overflowY],null==(restoreDisplay=dataShow&&dataShow.display)&&(restoreDisplay=dataPriv.get(elem,"display")),"none"===(isBox=jQuery.css(elem,"display"))&&(restoreDisplay?isBox=restoreDisplay:(showHide([elem],!0),restoreDisplay=elem.style.display||restoreDisplay,isBox=jQuery.css(elem,"display"),showHide([elem]))),"inline"===isBox||"inline-block"===isBox&&null!=restoreDisplay)&&"none"===jQuery.css(elem,"float")&&(propTween||(anim.done(function(){style.display=restoreDisplay}),null==restoreDisplay&&(isBox=style.display,restoreDisplay="none"===isBox?"":isBox)),style.display="inline-block"),opts.overflow&&(style.overflow="hidden",anim.always(function(){style.overflow=opts.overflow[0],style.overflowX=opts.overflow[1],style.overflowY=opts.overflow[2]})),propTween=!1,orig)propTween||(dataShow?"hidden"in dataShow&&(hidden=dataShow.hidden):dataShow=dataPriv.access(elem,"fxshow",{display:restoreDisplay}),toggle&&(dataShow.hidden=!hidden),hidden&&showHide([elem],!0),anim.done(function(){for(prop in hidden||showHide([elem]),dataPriv.remove(elem,"fxshow"),orig)jQuery.style(elem,prop,orig[prop])})),propTween=createTween(hidden?dataShow[prop]:0,prop,anim),prop in dataShow||(dataShow[prop]=propTween.start,hidden&&(propTween.end=propTween.start,propTween.start=0))}],prefilter:function(callback,prepend){prepend?Animation.prefilters.unshift(callback):Animation.prefilters.push(callback)}}),jQuery.speed=function(speed,easing,fn){var opt=speed&&"object"==typeof speed?jQuery.extend({},speed):{complete:fn||!fn&&easing||jQuery.isFunction(speed)&&speed,duration:speed,easing:fn&&easing||easing&&!jQuery.isFunction(easing)&&easing};return jQuery.fx.off||document.hidden?opt.duration=0:"number"!=typeof opt.duration&&(opt.duration in jQuery.fx.speeds?opt.duration=jQuery.fx.speeds[opt.duration]:opt.duration=jQuery.fx.speeds._default),null!=opt.queue&&!0!==opt.queue||(opt.queue="fx"),opt.old=opt.complete,opt.complete=function(){jQuery.isFunction(opt.old)&&opt.old.call(this),opt.queue&&jQuery.dequeue(this,opt.queue)},opt},jQuery.fn.extend({fadeTo:function(speed,to,easing,callback){return this.filter(isHiddenWithinTree).css("opacity",0).show().end().animate({opacity:to},speed,easing,callback)},animate:function(prop,speed,easing,callback){function doAnimation(){var anim=Animation(this,jQuery.extend({},prop),optall);(empty||dataPriv.get(this,"finish"))&&anim.stop(!0)}var empty=jQuery.isEmptyObject(prop),optall=jQuery.speed(speed,easing,callback);return doAnimation.finish=doAnimation,empty||!1===optall.queue?this.each(doAnimation):this.queue(optall.queue,doAnimation)},stop:function(type,clearQueue,gotoEnd){function stopQueue(hooks){var stop=hooks.stop;delete hooks.stop,stop(gotoEnd)}return"string"!=typeof type&&(gotoEnd=clearQueue,clearQueue=type,type=void 0),clearQueue&&!1!==type&&this.queue(type||"fx",[]),this.each(function(){var dequeue=!0,index=null!=type&&type+"queueHooks",timers=jQuery.timers,data=dataPriv.get(this);if(index)data[index]&&data[index].stop&&stopQueue(data[index]);else for(index in data)data[index]&&data[index].stop&&rrun.test(index)&&stopQueue(data[index]);for(index=timers.length;index--;)timers[index].elem!==this||null!=type&&timers[index].queue!==type||(timers[index].anim.stop(gotoEnd),dequeue=!1,timers.splice(index,1));!dequeue&&gotoEnd||jQuery.dequeue(this,type)})},finish:function(type){return!1!==type&&(type=type||"fx"),this.each(function(){var index,data=dataPriv.get(this),queue=data[type+"queue"],hooks=data[type+"queueHooks"],timers=jQuery.timers,length=queue?queue.length:0;for(data.finish=!0,jQuery.queue(this,type,[]),hooks&&hooks.stop&&hooks.stop.call(this,!0),index=timers.length;index--;)timers[index].elem===this&&timers[index].queue===type&&(timers[index].anim.stop(!0),timers.splice(index,1));for(index=0;index<length;index++)queue[index]&&queue[index].finish&&queue[index].finish.call(this);delete data.finish})}}),jQuery.each(["toggle","show","hide"],function(i,name){var cssFn=jQuery.fn[name];jQuery.fn[name]=function(speed,easing,callback){return null==speed||"boolean"==typeof speed?cssFn.apply(this,arguments):this.animate(genFx(name,!0),speed,easing,callback)}}),jQuery.each({slideDown:genFx("show"),slideUp:genFx("hide"),slideToggle:genFx("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(name,props){jQuery.fn[name]=function(speed,easing,callback){return this.animate(props,speed,easing,callback)}}),jQuery.timers=[],jQuery.fx.tick=function(){var timer,i=0,timers=jQuery.timers;for(fxNow=jQuery.now();i<timers.length;i++)(timer=timers[i])()||timers[i]!==timer||timers.splice(i--,1);timers.length||jQuery.fx.stop(),fxNow=void 0},jQuery.fx.timer=function(timer){jQuery.timers.push(timer),timer()?jQuery.fx.start():jQuery.timers.pop()},jQuery.fx.interval=13,jQuery.fx.start=function(){timerId=timerId||(window.requestAnimationFrame?window.requestAnimationFrame(raf):window.setInterval(jQuery.fx.tick,jQuery.fx.interval))},jQuery.fx.stop=function(){window.cancelAnimationFrame?window.cancelAnimationFrame(timerId):window.clearInterval(timerId),timerId=null},jQuery.fx.speeds={slow:600,fast:200,_default:400},jQuery.fn.delay=function(time,type){return time=jQuery.fx&&jQuery.fx.speeds[time]||time,this.queue(type=type||"fx",function(next,hooks){var timeout=window.setTimeout(next,time);hooks.stop=function(){window.clearTimeout(timeout)}})},function(){var input=document.createElement("input"),opt=document.createElement("select").appendChild(document.createElement("option"));input.type="checkbox",support.checkOn=""!==input.value,support.optSelected=opt.selected,(input=document.createElement("input")).value="t",input.type="radio",support.radioValue="t"===input.value}();var boolHook,attrHandle=jQuery.expr.attrHandle,rfocusable=(jQuery.fn.extend({attr:function(name,value){return access(this,jQuery.attr,name,value,1<arguments.length)},removeAttr:function(name){return this.each(function(){jQuery.removeAttr(this,name)})}}),jQuery.extend({attr:function(elem,name,value){var ret,hooks,nType=elem.nodeType;if(3!==nType&&8!==nType&&2!==nType)return void 0===elem.getAttribute?jQuery.prop(elem,name,value):(1===nType&&jQuery.isXMLDoc(elem)||(hooks=jQuery.attrHooks[name.toLowerCase()]||(jQuery.expr.match.bool.test(name)?boolHook:void 0)),void 0!==value?null===value?void jQuery.removeAttr(elem,name):hooks&&"set"in hooks&&void 0!==(ret=hooks.set(elem,value,name))?ret:(elem.setAttribute(name,value+""),value):!(hooks&&"get"in hooks&&null!==(ret=hooks.get(elem,name)))&&null==(ret=jQuery.find.attr(elem,name))?void 0:ret)},attrHooks:{type:{set:function(elem,value){var val;if(!support.radioValue&&"radio"===value&&jQuery.nodeName(elem,"input"))return val=elem.value,elem.setAttribute("type",value),val&&(elem.value=val),value}}},removeAttr:function(elem,value){var name,i=0,attrNames=value&&value.match(rnothtmlwhite);if(attrNames&&1===elem.nodeType)for(;name=attrNames[i++];)elem.removeAttribute(name)}}),boolHook={set:function(elem,value,name){return!1===value?jQuery.removeAttr(elem,name):elem.setAttribute(name,name),name}},jQuery.each(jQuery.expr.match.bool.source.match(/\w+/g),function(i,name){var getter=attrHandle[name]||jQuery.find.attr;attrHandle[name]=function(elem,name,isXML){var ret,handle,lowercaseName=name.toLowerCase();return isXML||(handle=attrHandle[lowercaseName],attrHandle[lowercaseName]=ret,ret=null!=getter(elem,name,isXML)?lowercaseName:null,attrHandle[lowercaseName]=handle),ret}}),/^(?:input|select|textarea|button)$/i),rclickable=/^(?:a|area)$/i;function stripAndCollapse(value){return(value.match(rnothtmlwhite)||[]).join(" ")}function getClass(elem){return elem.getAttribute&&elem.getAttribute("class")||""}jQuery.fn.extend({prop:function(name,value){return access(this,jQuery.prop,name,value,1<arguments.length)},removeProp:function(name){return this.each(function(){delete this[jQuery.propFix[name]||name]})}}),jQuery.extend({prop:function(elem,name,value){var ret,hooks,nType=elem.nodeType;if(3!==nType&&8!==nType&&2!==nType)return 1===nType&&jQuery.isXMLDoc(elem)||(name=jQuery.propFix[name]||name,hooks=jQuery.propHooks[name]),void 0!==value?hooks&&"set"in hooks&&void 0!==(ret=hooks.set(elem,value,name))?ret:elem[name]=value:hooks&&"get"in hooks&&null!==(ret=hooks.get(elem,name))?ret:elem[name]},propHooks:{tabIndex:{get:function(elem){var tabindex=jQuery.find.attr(elem,"tabindex");return tabindex?parseInt(tabindex,10):rfocusable.test(elem.nodeName)||rclickable.test(elem.nodeName)&&elem.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),support.optSelected||(jQuery.propHooks.selected={get:function(elem){elem=elem.parentNode;return elem&&elem.parentNode&&elem.parentNode.selectedIndex,null},set:function(elem){elem=elem.parentNode;elem&&(elem.selectedIndex,elem.parentNode)&&elem.parentNode.selectedIndex}}),jQuery.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){jQuery.propFix[this.toLowerCase()]=this}),jQuery.fn.extend({addClass:function(value){var classes,elem,cur,clazz,j,curValue,i=0;if(jQuery.isFunction(value))return this.each(function(j){jQuery(this).addClass(value.call(this,j,getClass(this)))});if("string"==typeof value&&value)for(classes=value.match(rnothtmlwhite)||[];elem=this[i++];)if(curValue=getClass(elem),cur=1===elem.nodeType&&" "+stripAndCollapse(curValue)+" "){for(j=0;clazz=classes[j++];)cur.indexOf(" "+clazz+" ")<0&&(cur+=clazz+" ");curValue!==(curValue=stripAndCollapse(cur))&&elem.setAttribute("class",curValue)}return this},removeClass:function(value){var classes,elem,cur,clazz,j,curValue,i=0;if(jQuery.isFunction(value))return this.each(function(j){jQuery(this).removeClass(value.call(this,j,getClass(this)))});if(!arguments.length)return this.attr("class","");if("string"==typeof value&&value)for(classes=value.match(rnothtmlwhite)||[];elem=this[i++];)if(curValue=getClass(elem),cur=1===elem.nodeType&&" "+stripAndCollapse(curValue)+" "){for(j=0;clazz=classes[j++];)for(;-1<cur.indexOf(" "+clazz+" ");)cur=cur.replace(" "+clazz+" "," ");curValue!==(curValue=stripAndCollapse(cur))&&elem.setAttribute("class",curValue)}return this},toggleClass:function(value,stateVal){var type=typeof value;return"boolean"==typeof stateVal&&"string"==type?stateVal?this.addClass(value):this.removeClass(value):jQuery.isFunction(value)?this.each(function(i){jQuery(this).toggleClass(value.call(this,i,getClass(this),stateVal),stateVal)}):this.each(function(){var className,i,self,classNames;if("string"==type)for(i=0,self=jQuery(this),classNames=value.match(rnothtmlwhite)||[];className=classNames[i++];)self.hasClass(className)?self.removeClass(className):self.addClass(className);else void 0!==value&&"boolean"!=type||((className=getClass(this))&&dataPriv.set(this,"__className__",className),this.setAttribute&&this.setAttribute("class",!className&&!1!==value&&dataPriv.get(this,"__className__")||""))})},hasClass:function(selector){for(var elem,i=0,className=" "+selector+" ";elem=this[i++];)if(1===elem.nodeType&&-1<(" "+stripAndCollapse(getClass(elem))+" ").indexOf(className))return!0;return!1}});var rreturn=/\r/g,rfocusMorph=(jQuery.fn.extend({val:function(value){var hooks,ret,isFunction,elem=this[0];return arguments.length?(isFunction=jQuery.isFunction(value),this.each(function(i){1!==this.nodeType||(null==(i=isFunction?value.call(this,i,jQuery(this).val()):value)?i="":"number"==typeof i?i+="":jQuery.isArray(i)&&(i=jQuery.map(i,function(value){return null==value?"":value+""})),(hooks=jQuery.valHooks[this.type]||jQuery.valHooks[this.nodeName.toLowerCase()])&&"set"in hooks&&void 0!==hooks.set(this,i,"value"))||(this.value=i)})):elem?(hooks=jQuery.valHooks[elem.type]||jQuery.valHooks[elem.nodeName.toLowerCase()])&&"get"in hooks&&void 0!==(ret=hooks.get(elem,"value"))?ret:"string"==typeof(ret=elem.value)?ret.replace(rreturn,""):null==ret?"":ret:void 0}}),jQuery.extend({valHooks:{option:{get:function(elem){var val=jQuery.find.attr(elem,"value");return null!=val?val:stripAndCollapse(jQuery.text(elem))}},select:{get:function(elem){for(var option,options=elem.options,index=elem.selectedIndex,one="select-one"===elem.type,values=one?null:[],max=one?index+1:options.length,i=index<0?max:one?index:0;i<max;i++)if(((option=options[i]).selected||i===index)&&!option.disabled&&(!option.parentNode.disabled||!jQuery.nodeName(option.parentNode,"optgroup"))){if(option=jQuery(option).val(),one)return option;values.push(option)}return values},set:function(elem,value){for(var optionSet,option,options=elem.options,values=jQuery.makeArray(value),i=options.length;i--;)((option=options[i]).selected=-1<jQuery.inArray(jQuery.valHooks.option.get(option),values))&&(optionSet=!0);return optionSet||(elem.selectedIndex=-1),values}}}}),jQuery.each(["radio","checkbox"],function(){jQuery.valHooks[this]={set:function(elem,value){if(jQuery.isArray(value))return elem.checked=-1<jQuery.inArray(jQuery(elem).val(),value)}},support.checkOn||(jQuery.valHooks[this].get=function(elem){return null===elem.getAttribute("value")?"on":elem.value})}),/^(?:focusinfocus|focusoutblur)$/),location=(jQuery.extend(jQuery.event,{trigger:function(event,data,elem,onlyHandlers){var i,tmp,bubbleType,ontype,handle,special,eventPath=[elem||document],type=hasOwn.call(event,"type")?event.type:event,namespaces=hasOwn.call(event,"namespace")?event.namespace.split("."):[],cur=tmp=elem=elem||document;if(3!==elem.nodeType&&8!==elem.nodeType&&!rfocusMorph.test(type+jQuery.event.triggered)&&(-1<type.indexOf(".")&&(type=(namespaces=type.split(".")).shift(),namespaces.sort()),ontype=type.indexOf(":")<0&&"on"+type,(event=event[jQuery.expando]?event:new jQuery.Event(type,"object"==typeof event&&event)).isTrigger=onlyHandlers?2:3,event.namespace=namespaces.join("."),event.rnamespace=event.namespace?new RegExp("(^|\\.)"+namespaces.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,event.result=void 0,event.target||(event.target=elem),data=null==data?[event]:jQuery.makeArray(data,[event]),special=jQuery.event.special[type]||{},onlyHandlers||!special.trigger||!1!==special.trigger.apply(elem,data))){if(!onlyHandlers&&!special.noBubble&&!jQuery.isWindow(elem)){for(bubbleType=special.delegateType||type,rfocusMorph.test(bubbleType+type)||(cur=cur.parentNode);cur;cur=cur.parentNode)eventPath.push(cur),tmp=cur;tmp===(elem.ownerDocument||document)&&eventPath.push(tmp.defaultView||tmp.parentWindow||window)}for(i=0;(cur=eventPath[i++])&&!event.isPropagationStopped();)event.type=1<i?bubbleType:special.bindType||type,(handle=(dataPriv.get(cur,"events")||{})[event.type]&&dataPriv.get(cur,"handle"))&&handle.apply(cur,data),(handle=ontype&&cur[ontype])&&handle.apply&&acceptData(cur)&&(event.result=handle.apply(cur,data),!1===event.result)&&event.preventDefault();return event.type=type,onlyHandlers||event.isDefaultPrevented()||special._default&&!1!==special._default.apply(eventPath.pop(),data)||!acceptData(elem)||ontype&&jQuery.isFunction(elem[type])&&!jQuery.isWindow(elem)&&((tmp=elem[ontype])&&(elem[ontype]=null),elem[jQuery.event.triggered=type](),jQuery.event.triggered=void 0,tmp)&&(elem[ontype]=tmp),event.result}},simulate:function(type,elem,event){event=jQuery.extend(new jQuery.Event,event,{type:type,isSimulated:!0});jQuery.event.trigger(event,null,elem)}}),jQuery.fn.extend({trigger:function(type,data){return this.each(function(){jQuery.event.trigger(type,data,this)})},triggerHandler:function(type,data){var elem=this[0];if(elem)return jQuery.event.trigger(type,data,elem,!0)}}),jQuery.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(i,name){jQuery.fn[name]=function(data,fn){return 0<arguments.length?this.on(name,null,data,fn):this.trigger(name)}}),jQuery.fn.extend({hover:function(fnOver,fnOut){return this.mouseenter(fnOver).mouseleave(fnOut||fnOver)}}),support.focusin="onfocusin"in window,support.focusin||jQuery.each({focus:"focusin",blur:"focusout"},function(orig,fix){function handler(event){jQuery.event.simulate(fix,event.target,jQuery.event.fix(event))}jQuery.event.special[fix]={setup:function(){var doc=this.ownerDocument||this,attaches=dataPriv.access(doc,fix);attaches||doc.addEventListener(orig,handler,!0),dataPriv.access(doc,fix,(attaches||0)+1)},teardown:function(){var doc=this.ownerDocument||this,attaches=dataPriv.access(doc,fix)-1;attaches?dataPriv.access(doc,fix,attaches):(doc.removeEventListener(orig,handler,!0),dataPriv.remove(doc,fix))}}}),window.location),nonce=jQuery.now(),rquery=/\?/,rbracket=(jQuery.parseXML=function(data){var xml;if(!data||"string"!=typeof data)return null;try{xml=(new window.DOMParser).parseFromString(data,"text/xml")}catch(e){xml=void 0}return xml&&!xml.getElementsByTagName("parsererror").length||jQuery.error("Invalid XML: "+data),xml},/\[\]$/),rCRLF=/\r?\n/g,rsubmitterTypes=/^(?:submit|button|image|reset|file)$/i,rsubmittable=/^(?:input|select|textarea|keygen)/i;jQuery.param=function(a,traditional){function add(key,valueOrFunction){valueOrFunction=jQuery.isFunction(valueOrFunction)?valueOrFunction():valueOrFunction,s[s.length]=encodeURIComponent(key)+"="+encodeURIComponent(null==valueOrFunction?"":valueOrFunction)}var prefix,s=[];if(jQuery.isArray(a)||a.jquery&&!jQuery.isPlainObject(a))jQuery.each(a,function(){add(this.name,this.value)});else for(prefix in a)!function buildParams(prefix,obj,traditional,add){if(jQuery.isArray(obj))jQuery.each(obj,function(i,v){traditional||rbracket.test(prefix)?add(prefix,v):buildParams(prefix+"["+("object"==typeof v&&null!=v?i:"")+"]",v,traditional,add)});else if(traditional||"object"!==jQuery.type(obj))add(prefix,obj);else for(var name in obj)buildParams(prefix+"["+name+"]",obj[name],traditional,add)}(prefix,a[prefix],traditional,add);return s.join("&")},jQuery.fn.extend({serialize:function(){return jQuery.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var elements=jQuery.prop(this,"elements");return elements?jQuery.makeArray(elements):this}).filter(function(){var type=this.type;return this.name&&!jQuery(this).is(":disabled")&&rsubmittable.test(this.nodeName)&&!rsubmitterTypes.test(type)&&(this.checked||!rcheckableType.test(type))}).map(function(i,elem){var val=jQuery(this).val();return null==val?null:jQuery.isArray(val)?jQuery.map(val,function(val){return{name:elem.name,value:val.replace(rCRLF,"\r\n")}}):{name:elem.name,value:val.replace(rCRLF,"\r\n")}}).get()}});var r20=/%20/g,rhash=/#.*$/,rantiCache=/([?&])_=[^&]*/,rheaders=/^(.*?):[ \t]*([^\r\n]*)$/gm,rnoContent=/^(?:GET|HEAD)$/,rprotocol=/^\/\//,prefilters={},transports={},allTypes="*/".concat("*"),originAnchor=document.createElement("a");function addToPrefiltersOrTransports(structure){return function(dataTypeExpression,func){"string"!=typeof dataTypeExpression&&(func=dataTypeExpression,dataTypeExpression="*");var dataType,i=0,dataTypes=dataTypeExpression.toLowerCase().match(rnothtmlwhite)||[];if(jQuery.isFunction(func))for(;dataType=dataTypes[i++];)"+"===dataType[0]?(dataType=dataType.slice(1)||"*",(structure[dataType]=structure[dataType]||[]).unshift(func)):(structure[dataType]=structure[dataType]||[]).push(func)}}function inspectPrefiltersOrTransports(structure,options,originalOptions,jqXHR){var inspected={},seekingTransport=structure===transports;function inspect(dataType){var selected;return inspected[dataType]=!0,jQuery.each(structure[dataType]||[],function(_,prefilterOrFactory){prefilterOrFactory=prefilterOrFactory(options,originalOptions,jqXHR);return"string"!=typeof prefilterOrFactory||seekingTransport||inspected[prefilterOrFactory]?seekingTransport?!(selected=prefilterOrFactory):void 0:(options.dataTypes.unshift(prefilterOrFactory),inspect(prefilterOrFactory),!1)}),selected}return inspect(options.dataTypes[0])||!inspected["*"]&&inspect("*")}function ajaxExtend(target,src){var key,deep,flatOptions=jQuery.ajaxSettings.flatOptions||{};for(key in src)void 0!==src[key]&&((flatOptions[key]?target:deep=deep||{})[key]=src[key]);return deep&&jQuery.extend(!0,target,deep),target}originAnchor.href=location.href,jQuery.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:location.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(location.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":allTypes,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":jQuery.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(target,settings){return settings?ajaxExtend(ajaxExtend(target,jQuery.ajaxSettings),settings):ajaxExtend(jQuery.ajaxSettings,target)},ajaxPrefilter:addToPrefiltersOrTransports(prefilters),ajaxTransport:addToPrefiltersOrTransports(transports),ajax:function(url,options){"object"==typeof url&&(options=url,url=void 0);var transport,cacheURL,responseHeadersString,responseHeaders,timeoutTimer,completed,fireGlobals,i,s=jQuery.ajaxSetup({},options=options||{}),callbackContext=s.context||s,globalEventContext=s.context&&(callbackContext.nodeType||callbackContext.jquery)?jQuery(callbackContext):jQuery.event,deferred=jQuery.Deferred(),completeDeferred=jQuery.Callbacks("once memory"),statusCode=s.statusCode||{},requestHeaders={},requestHeadersNames={},strAbort="canceled",jqXHR={readyState:0,getResponseHeader:function(key){var match;if(completed){if(!responseHeaders)for(responseHeaders={};match=rheaders.exec(responseHeadersString);)responseHeaders[match[1].toLowerCase()]=match[2];match=responseHeaders[key.toLowerCase()]}return null==match?null:match},getAllResponseHeaders:function(){return completed?responseHeadersString:null},setRequestHeader:function(name,value){return null==completed&&(name=requestHeadersNames[name.toLowerCase()]=requestHeadersNames[name.toLowerCase()]||name,requestHeaders[name]=value),this},overrideMimeType:function(type){return null==completed&&(s.mimeType=type),this},statusCode:function(map){if(map)if(completed)jqXHR.always(map[jqXHR.status]);else for(var code in map)statusCode[code]=[statusCode[code],map[code]];return this},abort:function(statusText){statusText=statusText||strAbort;return transport&&transport.abort(statusText),done(0,statusText),this}};if(deferred.promise(jqXHR),s.url=((url||s.url||location.href)+"").replace(rprotocol,location.protocol+"//"),s.type=options.method||options.type||s.method||s.type,s.dataTypes=(s.dataType||"*").toLowerCase().match(rnothtmlwhite)||[""],null==s.crossDomain){url=document.createElement("a");try{url.href=s.url,url.href=url.href,s.crossDomain=originAnchor.protocol+"//"+originAnchor.host!=url.protocol+"//"+url.host}catch(e){s.crossDomain=!0}}if(s.data&&s.processData&&"string"!=typeof s.data&&(s.data=jQuery.param(s.data,s.traditional)),inspectPrefiltersOrTransports(prefilters,s,options,jqXHR),!completed){for(i in(fireGlobals=jQuery.event&&s.global)&&0==jQuery.active++&&jQuery.event.trigger("ajaxStart"),s.type=s.type.toUpperCase(),s.hasContent=!rnoContent.test(s.type),cacheURL=s.url.replace(rhash,""),s.hasContent?s.data&&s.processData&&0===(s.contentType||"").indexOf("application/x-www-form-urlencoded")&&(s.data=s.data.replace(r20,"+")):(url=s.url.slice(cacheURL.length),s.data&&(cacheURL+=(rquery.test(cacheURL)?"&":"?")+s.data,delete s.data),!1===s.cache&&(cacheURL=cacheURL.replace(rantiCache,"$1"),url=(rquery.test(cacheURL)?"&":"?")+"_="+nonce+++url),s.url=cacheURL+url),s.ifModified&&(jQuery.lastModified[cacheURL]&&jqXHR.setRequestHeader("If-Modified-Since",jQuery.lastModified[cacheURL]),jQuery.etag[cacheURL])&&jqXHR.setRequestHeader("If-None-Match",jQuery.etag[cacheURL]),(s.data&&s.hasContent&&!1!==s.contentType||options.contentType)&&jqXHR.setRequestHeader("Content-Type",s.contentType),jqXHR.setRequestHeader("Accept",s.dataTypes[0]&&s.accepts[s.dataTypes[0]]?s.accepts[s.dataTypes[0]]+("*"!==s.dataTypes[0]?", "+allTypes+"; q=0.01":""):s.accepts["*"]),s.headers)jqXHR.setRequestHeader(i,s.headers[i]);if(s.beforeSend&&(!1===s.beforeSend.call(callbackContext,jqXHR,s)||completed))return jqXHR.abort();if(strAbort="abort",completeDeferred.add(s.complete),jqXHR.done(s.success),jqXHR.fail(s.error),transport=inspectPrefiltersOrTransports(transports,s,options,jqXHR)){if(jqXHR.readyState=1,fireGlobals&&globalEventContext.trigger("ajaxSend",[jqXHR,s]),completed)return jqXHR;s.async&&0<s.timeout&&(timeoutTimer=window.setTimeout(function(){jqXHR.abort("timeout")},s.timeout));try{completed=!1,transport.send(requestHeaders,done)}catch(e){if(completed)throw e;done(-1,e)}}else done(-1,"No Transport")}return jqXHR;function done(status,nativeStatusText,responses,headers){var success,error,response,statusText=nativeStatusText;completed||(completed=!0,timeoutTimer&&window.clearTimeout(timeoutTimer),transport=void 0,responseHeadersString=headers||"",jqXHR.readyState=0<status?4:0,headers=200<=status&&status<300||304===status,responses&&(response=function(s,jqXHR,responses){for(var ct,type,finalDataType,firstDataType,contents=s.contents,dataTypes=s.dataTypes;"*"===dataTypes[0];)dataTypes.shift(),void 0===ct&&(ct=s.mimeType||jqXHR.getResponseHeader("Content-Type"));if(ct)for(type in contents)if(contents[type]&&contents[type].test(ct)){dataTypes.unshift(type);break}if(dataTypes[0]in responses)finalDataType=dataTypes[0];else{for(type in responses){if(!dataTypes[0]||s.converters[type+" "+dataTypes[0]]){finalDataType=type;break}firstDataType=firstDataType||type}finalDataType=finalDataType||firstDataType}if(finalDataType)return finalDataType!==dataTypes[0]&&dataTypes.unshift(finalDataType),responses[finalDataType]}(s,jqXHR,responses)),response=function(s,response,jqXHR,isSuccess){var conv2,current,conv,tmp,prev,converters={},dataTypes=s.dataTypes.slice();if(dataTypes[1])for(conv in s.converters)converters[conv.toLowerCase()]=s.converters[conv];for(current=dataTypes.shift();current;)if(s.responseFields[current]&&(jqXHR[s.responseFields[current]]=response),!prev&&isSuccess&&s.dataFilter&&(response=s.dataFilter(response,s.dataType)),prev=current,current=dataTypes.shift())if("*"===current)current=prev;else if("*"!==prev&&prev!==current){if(!(conv=converters[prev+" "+current]||converters["* "+current]))for(conv2 in converters)if((tmp=conv2.split(" "))[1]===current&&(conv=converters[prev+" "+tmp[0]]||converters["* "+tmp[0]])){!0===conv?conv=converters[conv2]:!0!==converters[conv2]&&(current=tmp[0],dataTypes.unshift(tmp[1]));break}if(!0!==conv)if(conv&&s.throws)response=conv(response);else try{response=conv(response)}catch(e){return{state:"parsererror",error:conv?e:"No conversion from "+prev+" to "+current}}}return{state:"success",data:response}}(s,response,jqXHR,headers),headers?(s.ifModified&&((responses=jqXHR.getResponseHeader("Last-Modified"))&&(jQuery.lastModified[cacheURL]=responses),responses=jqXHR.getResponseHeader("etag"))&&(jQuery.etag[cacheURL]=responses),204===status||"HEAD"===s.type?statusText="nocontent":304===status?statusText="notmodified":(statusText=response.state,success=response.data,headers=!(error=response.error))):(error=statusText,!status&&statusText||(statusText="error",status<0&&(status=0))),jqXHR.status=status,jqXHR.statusText=(nativeStatusText||statusText)+"",headers?deferred.resolveWith(callbackContext,[success,statusText,jqXHR]):deferred.rejectWith(callbackContext,[jqXHR,statusText,error]),jqXHR.statusCode(statusCode),statusCode=void 0,fireGlobals&&globalEventContext.trigger(headers?"ajaxSuccess":"ajaxError",[jqXHR,s,headers?success:error]),completeDeferred.fireWith(callbackContext,[jqXHR,statusText]),fireGlobals&&(globalEventContext.trigger("ajaxComplete",[jqXHR,s]),--jQuery.active||jQuery.event.trigger("ajaxStop")))}},getJSON:function(url,data,callback){return jQuery.get(url,data,callback,"json")},getScript:function(url,callback){return jQuery.get(url,void 0,callback,"script")}}),jQuery.each(["get","post"],function(i,method){jQuery[method]=function(url,data,callback,type){return jQuery.isFunction(data)&&(type=type||callback,callback=data,data=void 0),jQuery.ajax(jQuery.extend({url:url,type:method,dataType:type,data:data,success:callback},jQuery.isPlainObject(url)&&url))}}),jQuery._evalUrl=function(url){return jQuery.ajax({url:url,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,throws:!0})},jQuery.fn.extend({wrapAll:function(html){return this[0]&&(jQuery.isFunction(html)&&(html=html.call(this[0])),html=jQuery(html,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&html.insertBefore(this[0]),html.map(function(){for(var elem=this;elem.firstElementChild;)elem=elem.firstElementChild;return elem}).append(this)),this},wrapInner:function(html){return jQuery.isFunction(html)?this.each(function(i){jQuery(this).wrapInner(html.call(this,i))}):this.each(function(){var self=jQuery(this),contents=self.contents();contents.length?contents.wrapAll(html):self.append(html)})},wrap:function(html){var isFunction=jQuery.isFunction(html);return this.each(function(i){jQuery(this).wrapAll(isFunction?html.call(this,i):html)})},unwrap:function(selector){return this.parent(selector).not("body").each(function(){jQuery(this).replaceWith(this.childNodes)}),this}}),jQuery.expr.pseudos.hidden=function(elem){return!jQuery.expr.pseudos.visible(elem)},jQuery.expr.pseudos.visible=function(elem){return!!(elem.offsetWidth||elem.offsetHeight||elem.getClientRects().length)},jQuery.ajaxSettings.xhr=function(){try{return new window.XMLHttpRequest}catch(e){}};var input,xhrSuccessStatus={0:200,1223:204},xhrSupported=jQuery.ajaxSettings.xhr(),oldCallbacks=(support.cors=!!xhrSupported&&"withCredentials"in xhrSupported,support.ajax=xhrSupported=!!xhrSupported,jQuery.ajaxTransport(function(options){var callback,errorCallback;if(support.cors||xhrSupported&&!options.crossDomain)return{send:function(headers,complete){var i,xhr=options.xhr();if(xhr.open(options.type,options.url,options.async,options.username,options.password),options.xhrFields)for(i in options.xhrFields)xhr[i]=options.xhrFields[i];for(i in options.mimeType&&xhr.overrideMimeType&&xhr.overrideMimeType(options.mimeType),options.crossDomain||headers["X-Requested-With"]||(headers["X-Requested-With"]="XMLHttpRequest"),headers)xhr.setRequestHeader(i,headers[i]);callback=function(type){return function(){callback&&(callback=errorCallback=xhr.onload=xhr.onerror=xhr.onabort=xhr.onreadystatechange=null,"abort"===type?xhr.abort():"error"===type?"number"!=typeof xhr.status?complete(0,"error"):complete(xhr.status,xhr.statusText):complete(xhrSuccessStatus[xhr.status]||xhr.status,xhr.statusText,"text"!==(xhr.responseType||"text")||"string"!=typeof xhr.responseText?{binary:xhr.response}:{text:xhr.responseText},xhr.getAllResponseHeaders()))}},xhr.onload=callback(),errorCallback=xhr.onerror=callback("error"),void 0!==xhr.onabort?xhr.onabort=errorCallback:xhr.onreadystatechange=function(){4===xhr.readyState&&window.setTimeout(function(){callback&&errorCallback()})},callback=callback("abort");try{xhr.send(options.hasContent&&options.data||null)}catch(e){if(callback)throw e}},abort:function(){callback&&callback()}}}),jQuery.ajaxPrefilter(function(s){s.crossDomain&&(s.contents.script=!1)}),jQuery.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(text){return jQuery.globalEval(text),text}}}),jQuery.ajaxPrefilter("script",function(s){void 0===s.cache&&(s.cache=!1),s.crossDomain&&(s.type="GET")}),jQuery.ajaxTransport("script",function(s){var script,callback;if(s.crossDomain)return{send:function(_,complete){script=jQuery("<script>").prop({charset:s.scriptCharset,src:s.url}).on("load error",callback=function(evt){script.remove(),callback=null,evt&&complete("error"===evt.type?404:200,evt.type)}),document.head.appendChild(script[0])},abort:function(){callback&&callback()}}}),[]),rjsonp=/(=)\?(?=&|$)|\?\?/;function getWindow(elem){return jQuery.isWindow(elem)?elem:9===elem.nodeType&&elem.defaultView}jQuery.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var callback=oldCallbacks.pop()||jQuery.expando+"_"+nonce++;return this[callback]=!0,callback}}),jQuery.ajaxPrefilter("json jsonp",function(s,originalSettings,jqXHR){var callbackName,overwritten,responseContainer,jsonProp=!1!==s.jsonp&&(rjsonp.test(s.url)?"url":"string"==typeof s.data&&0===(s.contentType||"").indexOf("application/x-www-form-urlencoded")&&rjsonp.test(s.data)&&"data");if(jsonProp||"jsonp"===s.dataTypes[0])return callbackName=s.jsonpCallback=jQuery.isFunction(s.jsonpCallback)?s.jsonpCallback():s.jsonpCallback,jsonProp?s[jsonProp]=s[jsonProp].replace(rjsonp,"$1"+callbackName):!1!==s.jsonp&&(s.url+=(rquery.test(s.url)?"&":"?")+s.jsonp+"="+callbackName),s.converters["script json"]=function(){return responseContainer||jQuery.error(callbackName+" was not called"),responseContainer[0]},s.dataTypes[0]="json",overwritten=window[callbackName],window[callbackName]=function(){responseContainer=arguments},jqXHR.always(function(){void 0===overwritten?jQuery(window).removeProp(callbackName):window[callbackName]=overwritten,s[callbackName]&&(s.jsonpCallback=originalSettings.jsonpCallback,oldCallbacks.push(callbackName)),responseContainer&&jQuery.isFunction(overwritten)&&overwritten(responseContainer[0]),responseContainer=overwritten=void 0}),"script"}),support.createHTMLDocument=((input=document.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===input.childNodes.length),jQuery.parseHTML=function(data,context,keepScripts){var base;return"string"!=typeof data?[]:("boolean"==typeof context&&(keepScripts=context,context=!1),context||(support.createHTMLDocument?((base=(context=document.implementation.createHTMLDocument("")).createElement("base")).href=document.location.href,context.head.appendChild(base)):context=document),base=!keepScripts&&[],(keepScripts=rsingleTag.exec(data))?[context.createElement(keepScripts[1])]:(keepScripts=buildFragment([data],context,base),base&&base.length&&jQuery(base).remove(),jQuery.merge([],keepScripts.childNodes)))},jQuery.fn.load=function(url,params,callback){var selector,type,response,self=this,off=url.indexOf(" ");return-1<off&&(selector=stripAndCollapse(url.slice(off)),url=url.slice(0,off)),jQuery.isFunction(params)?(callback=params,params=void 0):params&&"object"==typeof params&&(type="POST"),0<self.length&&jQuery.ajax({url:url,type:type||"GET",dataType:"html",data:params}).done(function(responseText){response=arguments,self.html(selector?jQuery("<div>").append(jQuery.parseHTML(responseText)).find(selector):responseText)}).always(callback&&function(jqXHR,status){self.each(function(){callback.apply(this,response||[jqXHR.responseText,status,jqXHR])})}),this},jQuery.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(i,type){jQuery.fn[type]=function(fn){return this.on(type,fn)}}),jQuery.expr.pseudos.animated=function(elem){return jQuery.grep(jQuery.timers,function(fn){return elem===fn.elem}).length},jQuery.offset={setOffset:function(elem,options,i){var curCSSTop,curTop,curOffset,curCSSLeft,position=jQuery.css(elem,"position"),curElem=jQuery(elem),props={};"static"===position&&(elem.style.position="relative"),curOffset=curElem.offset(),curCSSTop=jQuery.css(elem,"top"),curCSSLeft=jQuery.css(elem,"left"),position=("absolute"===position||"fixed"===position)&&-1<(curCSSTop+curCSSLeft).indexOf("auto")?(curTop=(position=curElem.position()).top,position.left):(curTop=parseFloat(curCSSTop)||0,parseFloat(curCSSLeft)||0),null!=(options=jQuery.isFunction(options)?options.call(elem,i,jQuery.extend({},curOffset)):options).top&&(props.top=options.top-curOffset.top+curTop),null!=options.left&&(props.left=options.left-curOffset.left+position),"using"in options?options.using.call(elem,props):curElem.css(props)}},jQuery.fn.extend({offset:function(options){var win,rect,elem;return arguments.length?void 0===options?this:this.each(function(i){jQuery.offset.setOffset(this,options,i)}):(elem=this[0])?elem.getClientRects().length?(rect=elem.getBoundingClientRect()).width||rect.height?(win=getWindow(elem=elem.ownerDocument),elem=elem.documentElement,{top:rect.top+win.pageYOffset-elem.clientTop,left:rect.left+win.pageXOffset-elem.clientLeft}):rect:{top:0,left:0}:void 0},position:function(){var offsetParent,offset,elem,parentOffset;if(this[0])return elem=this[0],parentOffset={top:0,left:0},"fixed"===jQuery.css(elem,"position")?offset=elem.getBoundingClientRect():(offsetParent=this.offsetParent(),offset=this.offset(),parentOffset={top:(parentOffset=jQuery.nodeName(offsetParent[0],"html")?parentOffset:offsetParent.offset()).top+jQuery.css(offsetParent[0],"borderTopWidth",!0),left:parentOffset.left+jQuery.css(offsetParent[0],"borderLeftWidth",!0)}),{top:offset.top-parentOffset.top-jQuery.css(elem,"marginTop",!0),left:offset.left-parentOffset.left-jQuery.css(elem,"marginLeft",!0)}},offsetParent:function(){return this.map(function(){for(var offsetParent=this.offsetParent;offsetParent&&"static"===jQuery.css(offsetParent,"position");)offsetParent=offsetParent.offsetParent;return offsetParent||documentElement})}}),jQuery.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(method,prop){var top="pageYOffset"===prop;jQuery.fn[method]=function(val){return access(this,function(elem,method,val){var win=getWindow(elem);if(void 0===val)return win?win[prop]:elem[method];win?win.scrollTo(top?win.pageXOffset:val,top?val:win.pageYOffset):elem[method]=val},method,val,arguments.length)}}),jQuery.each(["top","left"],function(i,prop){jQuery.cssHooks[prop]=addGetHookIf(support.pixelPosition,function(elem,computed){if(computed)return computed=curCSS(elem,prop),rnumnonpx.test(computed)?jQuery(elem).position()[prop]+"px":computed})}),jQuery.each({Height:"height",Width:"width"},function(name,type){jQuery.each({padding:"inner"+name,content:type,"":"outer"+name},function(defaultExtra,funcName){jQuery.fn[funcName]=function(margin,value){var chainable=arguments.length&&(defaultExtra||"boolean"!=typeof margin),extra=defaultExtra||(!0===margin||!0===value?"margin":"border");return access(this,function(elem,type,value){var doc;return jQuery.isWindow(elem)?0===funcName.indexOf("outer")?elem["inner"+name]:elem.document.documentElement["client"+name]:9===elem.nodeType?(doc=elem.documentElement,Math.max(elem.body["scroll"+name],doc["scroll"+name],elem.body["offset"+name],doc["offset"+name],doc["client"+name])):void 0===value?jQuery.css(elem,type,extra):jQuery.style(elem,type,value,extra)},type,chainable?margin:void 0,chainable)}})}),jQuery.fn.extend({bind:function(types,data,fn){return this.on(types,null,data,fn)},unbind:function(types,fn){return this.off(types,null,fn)},delegate:function(selector,types,data,fn){return this.on(types,selector,data,fn)},undelegate:function(selector,types,fn){return 1===arguments.length?this.off(selector,"**"):this.off(types,selector||"**",fn)}}),jQuery.parseJSON=JSON.parse,"function"==typeof define&&define.amd&&define("jquery",[],function(){return jQuery});var _jQuery=window.jQuery,_$=window.$;return jQuery.noConflict=function(deep){return window.$===jQuery&&(window.$=_$),deep&&window.jQuery===jQuery&&(window.jQuery=_jQuery),jQuery},noGlobal||(window.jQuery=window.$=jQuery),jQuery});;
!function(global,factory){"function"==typeof define&&define.amd?define(factory):"object"==typeof module&&module.exports?module.exports=factory():global.numeral=factory()}(this,function(){var numeral,_,formats={},locales={},defaults={currentLocale:"en",zeroFormat:null,nullFormat:null,defaultFormat:"0,0"},options={currentLocale:defaults.currentLocale,zeroFormat:defaults.zeroFormat,nullFormat:defaults.nullFormat,defaultFormat:defaults.defaultFormat};function Numeral(input,number){this._input=input,this._value=number}return(numeral=function(input){var value,kind,unformatFunction,regexp;if(numeral.isNumeral(input))value=input.value();else if(0===input||void 0===input)value=0;else if(null===input||_.isNaN(input))value=null;else if("string"==typeof input)if(options.zeroFormat&&input===options.zeroFormat)value=0;else if(options.nullFormat&&input===options.nullFormat||!input.replace(/[^0-9]+/g,"").length)value=null;else{for(kind in formats)if((regexp="function"==typeof formats[kind].regexps.unformat?formats[kind].regexps.unformat():formats[kind].regexps.unformat)&&input.match(regexp)){unformatFunction=formats[kind].unformat;break}value=(unformatFunction=unformatFunction||numeral._.stringToNumber)(input)}else value=Number(input)||null;return new Numeral(input,value)}).version="2.0.4",numeral.isNumeral=function(obj){return obj instanceof Numeral},numeral._=_={numberToFormat:function(value,format,roundingFunction){var abbrForce,abs,signed,thousands,precision,locale=locales[numeral.options.currentLocale],negP=!1,optDec=!1,abbr="",decimal="",neg=!1;if(value=value||0,abs=Math.abs(value),numeral._.includes(format,"(")?(negP=!0,format=format.replace(/[\(|\)]/g,"")):(numeral._.includes(format,"+")||numeral._.includes(format,"-"))&&(signed=numeral._.includes(format,"+")?format.indexOf("+"):value<0?format.indexOf("-"):-1,format=format.replace(/[\+|\-]/g,"")),numeral._.includes(format,"a")&&(abbrForce=!!(abbrForce=format.match(/a(k|m|b|t)?/))&&abbrForce[1],numeral._.includes(format," a")&&(abbr=" "),format=format.replace(new RegExp(abbr+"a[kmbt]?"),""),1e12<=abs&&!abbrForce||"t"===abbrForce?(abbr+=locale.abbreviations.trillion,value/=1e12):abs<1e12&&1e9<=abs&&!abbrForce||"b"===abbrForce?(abbr+=locale.abbreviations.billion,value/=1e9):abs<1e9&&1e6<=abs&&!abbrForce||"m"===abbrForce?(abbr+=locale.abbreviations.million,value/=1e6):(abs<1e6&&1e3<=abs&&!abbrForce||"k"===abbrForce)&&(abbr+=locale.abbreviations.thousand,value/=1e3)),numeral._.includes(format,"[.]")&&(optDec=!0,format=format.replace("[.]",".")),abs=value.toString().split(".")[0],precision=format.split(".")[1],thousands=format.indexOf(","),precision?(abs=(decimal=numeral._.includes(precision,"[")?(precision=(precision=precision.replace("]","")).split("["),numeral._.toFixed(value,precision[0].length+precision[1].length,roundingFunction,precision[1].length)):numeral._.toFixed(value,precision.length,roundingFunction)).split(".")[0],decimal=numeral._.includes(decimal,".")?locale.delimiters.decimal+decimal.split(".")[1]:"",optDec&&0===Number(decimal.slice(1))&&(decimal="")):abs=numeral._.toFixed(value,null,roundingFunction),abbr&&!abbrForce&&1e3<=Number(abs)&&abbr!==locale.abbreviations.trillion)switch(abs=String(Number(abs)/1e3),abbr){case locale.abbreviations.thousand:abbr=locale.abbreviations.million;break;case locale.abbreviations.million:abbr=locale.abbreviations.billion;break;case locale.abbreviations.billion:abbr=locale.abbreviations.trillion}return numeral._.includes(abs,"-")&&(abs=abs.slice(1),neg=!0),-1<thousands&&(abs=abs.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1"+locale.delimiters.thousands)),precision=(abs=0===format.indexOf(".")?"":abs)+decimal+(abbr||""),negP?precision=(negP&&neg?"(":"")+precision+(negP&&neg?")":""):0<=signed?precision=0===signed?(neg?"-":"+")+precision:precision+(neg?"-":"+"):neg&&(precision="-"+precision),precision},stringToNumber:function(string){var abbreviation,value,regexp,locale=locales[options.currentLocale],stringOriginal=string,abbreviations={thousand:3,million:6,billion:9,trillion:12};if(options.zeroFormat&&string===options.zeroFormat)value=0;else if(options.nullFormat&&string===options.nullFormat||!string.replace(/[^0-9]+/g,"").length)value=null;else{for(abbreviation in value=1,"."!==locale.delimiters.decimal&&(string=string.replace(/\./g,"").replace(locale.delimiters.decimal,".")),abbreviations)if(regexp=new RegExp("[^a-zA-Z]"+locale.abbreviations[abbreviation]+"(?:\\)|(\\"+locale.currency.symbol+")?(?:\\))?)?$"),stringOriginal.match(regexp)){value*=Math.pow(10,abbreviations[abbreviation]);break}value*=(string.split("-").length+Math.min(string.split("(").length-1,string.split(")").length-1))%2?1:-1,string=string.replace(/[^0-9\.]+/g,""),value*=Number(string)}return value},isNaN:function(value){return"number"==typeof value&&isNaN(value)},includes:function(string,search){return-1!==string.indexOf(search)},insert:function(string,subString,start){return string.slice(0,start)+subString+string.slice(start)},reduce:function(array,callback){if(null===this)throw new TypeError("Array.prototype.reduce called on null or undefined");if("function"!=typeof callback)throw new TypeError(callback+" is not a function");var value,t=Object(array),len=t.length>>>0,k=0;if(3===arguments.length)value=arguments[2];else{for(;k<len&&!(k in t);)k++;if(len<=k)throw new TypeError("Reduce of empty array with no initial value");value=t[k++]}for(;k<len;k++)k in t&&(value=callback(value,t[k],k,t));return value},multiplier:function(x){x=x.toString().split(".");return x.length<2?1:Math.pow(10,x[1].length)},correctionFactor:function(){return Array.prototype.slice.call(arguments).reduce(function(accum,next){next=_.multiplier(next);return next<accum?accum:next},1)},toFixed:function(value,maxDecimals,roundingFunction,optionals){var splitValue=value.toString().split("."),minDecimals=maxDecimals-(optionals||0),splitValue=2===splitValue.length?Math.min(Math.max(splitValue[1].length,minDecimals),maxDecimals):minDecimals,minDecimals=Math.pow(10,splitValue),roundingFunction=(roundingFunction(value*minDecimals)/minDecimals).toFixed(splitValue);return maxDecimals-splitValue<optionals&&(value=new RegExp("\\.?0{1,"+(optionals-(maxDecimals-splitValue))+"}$"),roundingFunction=roundingFunction.replace(value,"")),roundingFunction}},numeral.options=options,numeral.formats=formats,numeral.locales=locales,numeral.locale=function(key){return key&&(options.currentLocale=key.toLowerCase()),options.currentLocale},numeral.localeData=function(key){if(!key)return locales[options.currentLocale];if(key=key.toLowerCase(),locales[key])return locales[key];throw new Error("Unknown locale : "+key)},numeral.reset=function(){for(var property in defaults)options[property]=defaults[property]},numeral.zeroFormat=function(format){options.zeroFormat="string"==typeof format?format:null},numeral.nullFormat=function(format){options.nullFormat="string"==typeof format?format:null},numeral.defaultFormat=function(format){options.defaultFormat="string"==typeof format?format:"0.0"},numeral.register=function(type,name,format){if(name=name.toLowerCase(),this[type+"s"][name])throw new TypeError(name+" "+type+" already registered.");return this[type+"s"][name]=format},numeral.validate=function(val,culture){var _decimalSep,_abbrObj,localeData,temp;if("string"!=typeof val&&(val+="",console.warn)&&console.warn("Numeral.js: Value is not string. It has been co-erced to: ",val),(val=val.trim()).match(/^\d+$/))return!0;if(""===val)return!1;try{localeData=numeral.localeData(culture)}catch(e){localeData=numeral.localeData(numeral.locale())}return culture=localeData.currency.symbol,_abbrObj=localeData.abbreviations,_decimalSep=localeData.delimiters.decimal,localeData="."===localeData.delimiters.thousands?"\\.":localeData.delimiters.thousands,(null===(temp=val.match(/^[^\d]+/))||(val=val.substr(1),temp[0]===culture))&&!(null!==(temp=val.match(/[^\d]+$/))&&(val=val.slice(0,-1),temp[0]!==_abbrObj.thousand)&&temp[0]!==_abbrObj.million&&temp[0]!==_abbrObj.billion&&temp[0]!==_abbrObj.trillion||(culture=new RegExp(localeData+"{2}"),val.match(/[^\d.,]/g))||2<(temp=val.split(_decimalSep)).length||(temp.length<2?!temp[0].match(/^\d+.*\d$/)||temp[0].match(culture):1===temp[0].length?!temp[0].match(/^\d+$/)||temp[0].match(culture)||!temp[1].match(/^\d+$/):!temp[0].match(/^\d+.*\d$/)||temp[0].match(culture)||!temp[1].match(/^\d+$/)))},numeral.fn=Numeral.prototype={clone:function(){return numeral(this)},format:function(inputString,roundingFunction){var kind,output,formatFunction,value=this._value,format=inputString||options.defaultFormat;if(roundingFunction=roundingFunction||Math.round,0===value&&null!==options.zeroFormat)output=options.zeroFormat;else if(null===value&&null!==options.nullFormat)output=options.nullFormat;else{for(kind in formats)if(format.match(formats[kind].regexps.format)){formatFunction=formats[kind].format;break}output=(formatFunction=formatFunction||numeral._.numberToFormat)(value,format,roundingFunction)}return output},value:function(){return this._value},input:function(){return this._input},set:function(value){return this._value=Number(value),this},add:function(value){var corrFactor=_.correctionFactor.call(null,this._value,value);return this._value=_.reduce([this._value,value],function(accum,curr,currI,O){return accum+Math.round(corrFactor*curr)},0)/corrFactor,this},subtract:function(value){var corrFactor=_.correctionFactor.call(null,this._value,value);return this._value=_.reduce([value],function(accum,curr,currI,O){return accum-Math.round(corrFactor*curr)},Math.round(this._value*corrFactor))/corrFactor,this},multiply:function(value){return this._value=_.reduce([this._value,value],function(accum,curr,currI,O){var corrFactor=_.correctionFactor(accum,curr);return Math.round(accum*corrFactor)*Math.round(curr*corrFactor)/Math.round(corrFactor*corrFactor)},1),this},divide:function(value){return this._value=_.reduce([this._value,value],function(accum,curr,currI,O){var corrFactor=_.correctionFactor(accum,curr);return Math.round(accum*corrFactor)/Math.round(curr*corrFactor)}),this},difference:function(value){return Math.abs(numeral(this._value).subtract(value).value())}},numeral.register("locale","en",{delimiters:{thousands:",",decimal:"."},abbreviations:{thousand:"k",million:"m",billion:"b",trillion:"t"},ordinal:function(number){var b=number%10;return 1==~~(number%100/10)?"th":1==b?"st":2==b?"nd":3==b?"rd":"th"},currency:{symbol:"$"}}),numeral});;
!function(factory){var OldCookies,api,registeredInModuleLoader=!1;"function"==typeof define&&define.amd&&(define(factory),registeredInModuleLoader=!0),"object"==typeof exports&&(module.exports=factory(),registeredInModuleLoader=!0),registeredInModuleLoader||(OldCookies=window.Cookies,(api=window.Cookies=factory()).noConflict=function(){return window.Cookies=OldCookies,api})}(function(){function extend(){for(var i=0,result={};i<arguments.length;i++){var key,attributes=arguments[i];for(key in attributes)result[key]=attributes[key]}return result}return function init(converter){function api(key,value,attributes){var result,expires;if("undefined"!=typeof document){if(1<arguments.length){"number"==typeof(attributes=extend({path:"/"},api.defaults,attributes)).expires&&((expires=new Date).setMilliseconds(expires.getMilliseconds()+864e5*attributes.expires),attributes.expires=expires),attributes.expires=attributes.expires?attributes.expires.toUTCString():"";try{result=JSON.stringify(value),/^[\{\[]/.test(result)&&(value=result)}catch(e){}value=converter.write?converter.write(value,key):encodeURIComponent(String(value)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),key=(key=(key=encodeURIComponent(String(key))).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent)).replace(/[\(\)]/g,escape);var attributeName,stringifiedAttributes="";for(attributeName in attributes)attributes[attributeName]&&(stringifiedAttributes+="; "+attributeName,!0!==attributes[attributeName])&&(stringifiedAttributes+="="+attributes[attributeName]);return document.cookie=key+"="+value+stringifiedAttributes}key||(result={});for(var cookies=document.cookie?document.cookie.split("; "):[],rdecode=/(%[0-9A-Z]{2})+/g,i=0;i<cookies.length;i++){var parts=cookies[i].split("=");'"'===(cookie=parts.slice(1).join("=")).charAt(0)&&(cookie=cookie.slice(1,-1));try{var name=parts[0].replace(rdecode,decodeURIComponent),cookie=converter.read?converter.read(cookie,name):converter(cookie,name)||cookie.replace(rdecode,decodeURIComponent);if(this.json)try{cookie=JSON.parse(cookie)}catch(e){}if(key===name){result=cookie;break}key||(result[name]=cookie)}catch(e){}}return result}}return(api.set=api).get=function(key){return api.call(api,key)},api.getJSON=function(){return api.apply({json:!0},[].slice.call(arguments))},api.defaults={},api.remove=function(key,attributes){api(key,"",extend(attributes,{expires:-1}))},api.withConverter=init,api}(function(){})});;
var Common=function(numeral,Cookies){var topics,hOP,code,symbol,pub={symbolsInfoForSearch:[],symbolInfo:{},coinInfo:{}},assetsInfo=window.ASSETS_INFO,coins=assetsInfo.coins,quote_coins=assetsInfo.quote_coins,exchanges=assetsInfo.exchanges,exchangeCodeBySlug={},exchangeFuturesExtraData=assetsInfo.exchangeFuturesExtraData,symbols=assetsInfo.symbols,futuresContractsIntervals=assetsInfo.futuresContractsIntervals,futuresExtraData=assetsInfo.futuresExtraData,MT=assetsInfo.MT,fcNameOnExchange={};for(symbol in symbols){var market_type=(symbolInfo=symbols[symbol])[3],symbol_on_exchange=symbolInfo[7];market_type===MT.FUTURES&&(fcNameOnExchange[symbol]=symbol_on_exchange)}for(code in exchanges)exchangeCodeBySlug[exchanges[code].slug]=code;for(symbol in assetsInfo.exchangeCodeBySlug=exchangeCodeBySlug,symbols){var symbolInfo,coin=(symbolInfo=symbols[symbol])[0],coin_info_arr=coins[coin],coin_info_arr={slug:coin_info_arr[0],display:coin_info_arr[1],name:coin_info_arr[2],market_cap:coin_info_arr[3],vol_24h:coin_info_arr[4],url_markets:coin_info_arr[5],url_major_market_chart:coin_info_arr[6],url_oi:coin_info_arr[7],url_fr:coin_info_arr[8],url_lq:coin_info_arr[9],url_lsr:coin_info_arr[10]},quote_coin=symbolInfo[1],quote_coin_info=quote_coins[quote_coin],exchange=symbolInfo[2],exchange_info=exchanges[exchange],market_type=symbolInfo[3],decimals=symbolInfo[4],fc_expire_formatted=symbolInfo[5],fc_interval=symbolInfo[6],symbol_on_exchange=symbolInfo[7],decimals={symbol:symbol,symbol_f2:exchange_info.slug+":"+symbol.split(".")[0],symbol_on_exchange:symbol_on_exchange,coin:coin,coin_display:coin_info_arr.display,coin_name:coin_info_arr.name,coin_slug:coin_info_arr.slug,quote_coin:quote_coin,quote_coin_display:quote_coin_info.display,quote_coin_name:quote_coin_info.display,exchange_name:exchange_info.display,exchange_slug:exchange_info.slug,decimals:decimals,market_type:market_type,fc_interval:fc_interval,fc_expire_formatted:fc_expire_formatted,is_futures_extra_data:!!futuresExtraData[market_type],is_liquidation:0<=[6,7,8].indexOf(market_type),is_short_long_liquidation:0<=[6,7].indexOf(market_type),is_long_short_ratio:0<=[9,10,11].indexOf(market_type),is_pfr:0<=[12].indexOf(market_type),tv_subscribe_to_bardata:0<=[5,9,10,11].indexOf(market_type),has_oi:market_type===MT.FUTURES&&exchangeFuturesExtraData[exchange]&&!0===exchangeFuturesExtraData[exchange].has_oi,has_fr:market_type===MT.FUTURES&&exchangeFuturesExtraData[exchange]&&!0===exchangeFuturesExtraData[exchange].has_fr&&"PERP"===fc_interval,has_pfr:market_type===MT.FUTURES&&exchangeFuturesExtraData[exchange]&&!0===exchangeFuturesExtraData[exchange].has_fr&&"PERP"===fc_interval,has_pi:market_type===MT.FUTURES&&exchangeFuturesExtraData[exchange]&&!0===exchangeFuturesExtraData[exchange].has_pi&&"PERP"===fc_interval,has_lq:market_type===MT.FUTURES&&exchangeFuturesExtraData[exchange]&&!0===exchangeFuturesExtraData[exchange].has_lq,has_lsr:market_type===MT.FUTURES&&("A"===exchange&&"PERP"===fc_interval&&0<=["USD","USDT","BUSD"].indexOf(quote_coin)||"6"===exchange&&"PERP"===fc_interval)};if(decimals.is_futures_extra_data&&(decimals.has_no_volume=!0),1===market_type)decimals.url="/"+coin_info_arr.slug+"/"+quote_coin_info.slug+"/"+exchange_info.slug+"/price-chart-live/",decimals.pair_display=decimals.coin_display+" / "+decimals.quote_coin_display,decimals.name=decimals.coin_display+"/"+decimals.quote_coin_display,decimals.name_in_search=decimals.coin_display+""+decimals.quote_coin_display+" "+decimals.exchange_name;else if(2===market_type){var nameOnExchange=fcNameOnExchange[symbol]?fcNameOnExchange[symbol].toUpperCase():"",intervalShortName=(decimals.fcNameOnExchange=nameOnExchange,decimals.url="/"+coin_info_arr.slug+"/"+quote_coin_info.slug+"/"+exchange_info.slug+"/"+symbol.split(".")[0].toLowerCase()+"/price-chart-live/","");fc_interval?intervalShortName=futuresContractsIntervals[fc_interval].short_name:fc_expire_formatted&&(intervalShortName=fc_expire_formatted),decimals.pair_display=decimals.coin_display+" / "+decimals.quote_coin_display+" "+intervalShortName,decimals.name=decimals.coin_display+"/"+decimals.quote_coin_display+" "+intervalShortName,decimals.name_in_search=decimals.coin_display+""+decimals.quote_coin_display+" "+intervalShortName+" "+decimals.exchange_name+" ("+nameOnExchange+")"}else if(0<=[3,4,5,6,7,8,12].indexOf(market_type)){var quote_coin=symbol.replace(/_[A-Z]+\./,"."),nameOnExchange=fcNameOnExchange[quote_coin]?fcNameOnExchange[quote_coin].toUpperCase():"",intervalShortName=(decimals.fcNameOnExchange=nameOnExchange,decimals.url="/"+coin_info_arr.slug+"/"+quote_coin_info.slug+"/"+exchange_info.slug+"/"+futuresExtraData[market_type].slug_chart+"/"+symbol.split(".")[0].toLowerCase()+"/","");fc_interval?intervalShortName=futuresContractsIntervals[fc_interval].short_name:fc_expire_formatted&&(intervalShortName=fc_expire_formatted),decimals.pair_display=decimals.coin_display+" / "+decimals.quote_coin_display+" "+intervalShortName+" "+futuresExtraData[market_type].name,decimals.name=decimals.coin_display+"/"+decimals.quote_coin_display+" "+intervalShortName+" "+futuresExtraData[market_type].name,decimals.name_in_search=decimals.coin_display+""+decimals.quote_coin_display+" "+intervalShortName+" "+futuresExtraData[market_type].name+" "+decimals.exchange_name+" ("+nameOnExchange+")"}else if(0<=[9,10,11].indexOf(market_type)){intervalShortName="";fc_interval?intervalShortName=futuresContractsIntervals[fc_interval].short_name:fc_expire_formatted&&(intervalShortName=fc_expire_formatted),decimals.pair_display=decimals.coin_display+" / "+decimals.quote_coin_display+" "+intervalShortName+" "+futuresExtraData[market_type].name,decimals.name=decimals.coin_display+"/"+decimals.quote_coin_display+" "+intervalShortName+" "+futuresExtraData[market_type].name,decimals.supported_resolutions=["5","15","30","60","120","240","360","720","1D"]}else{if(!(0<=[MT.LR].indexOf(market_type)))continue;decimals.name=decimals.symbol}pub.symbolsInfoForSearch.push(decimals),pub.symbolInfo[decimals.symbol]=decimals,pub.coinInfo[coin]=coin_info_arr}function decimalsToZeros(decimals){return["0","0","0","0","0","0","0","0"].slice(0,decimals).join("")}return pub.fr8h=function(symbol,fr){return symbol in ASSETS_INFO.fr8hMultiplier?fr*ASSETS_INFO.fr8hMultiplier[symbol]:fr},pub.logErrror=function(e){},pub.lzw_decode=function(s){for(var dict={},data=(s+"").split(""),currChar=data[0],oldPhrase=currChar,out=[currChar],code=256,i=1;i<data.length;i++){var currCode=data[i].charCodeAt(0),currCode=currCode<256?data[i]:dict[currCode]||oldPhrase+currChar;out.push(currCode),currChar=currCode.charAt(0),dict[code]=oldPhrase+currChar,code++,oldPhrase=currCode}return out.join("")},pub.jsonPost=function(args){var k,url=args.url,data=args.data,ajaxSettings=args.ajaxSettings||{},successHandler=args.success||function(){},errorHandler=args.error||function(){},completeHandler=args.complete||function(){},settings={url:url,method:"POST",contentType:"application/json",async:!0,data:JSON.stringify(data),success:function(data,textStatus,jqXHR){successHandler(data,textStatus,jqXHR)},error:function(jqXHR,textStatus,errorThrown){errorHandler(jqXHR,textStatus,errorThrown)},complete:function(jqXHR,textStatus){completeHandler(jqXHR,textStatus)}};for(k in ajaxSettings)settings[k]=ajaxSettings[k];$.ajax(settings)},pub.loadSignupWidget=function(args){$(".modal-widget").remove(),pub.jsonPost({url:"/auth/signup-widget/",data:{widgetParams:args.widgetParams},success:function(response){!0!==response.success?alert("Something hasn't worked properly, please try again."):($("body").eq(0).append(response.widgetHtml),$("#signup-widget").show(),window.signupWidget.onSignupSuccess=function(data){try{window.tolt_referral&&window.tolt.signup(data.email)}catch(e){console.error("window.tolt.signup error",err)}args.onSignupSuccess&&args.onSignupSuccess(data)})},error:function(){alert("Something hasn't worked properly, please try again.")}})},pub.loadLoginWidget=function(args){$(".modal-widget").remove(),pub.jsonPost({url:"/auth/login-widget/",data:{widgetParams:args.widgetParams},success:function(response){!0!==response.success?alert("Something hasn't worked properly, please try again."):($("body").eq(0).append(response.widgetHtml),$("#login-widget").show(),window.loginWidget.onLoginSuccess=function(){args.onLoginSuccess&&args.onLoginSuccess()})},error:function(){alert("Something hasn't worked properly, please try again.")}})},pub.gaEvent=function(category,action,label,value){try{var obj={hitType:"event",eventCategory:category,eventAction:action};void 0!==label&&(obj.eventLabel=label),void 0!==value&&(obj.eventValue=value),void 0!==window.ga&&ga("send",obj),void 0!==window.gtag&&(delete obj.hitType,delete obj.eventCategory,gtag("event",category,obj))}catch(e){pub.logErrror(e)}},pub.showModal=function(args){var title=args.title,args=args.content;function _destroy(){$("body").children(".modal-widget").remove()}_destroy();var html="",title=(html=(html=(html=(html=(html=(html+='<div class="modal modal-widget">')+'<div class="modal-content">'+'<div class="modal-header">')+'<span class="close">&times;</span>'+("<h4>"+title+"</h4>"))+"</div>"+'<div class="modal-body">')+args+"</div>")+"</div>"+"</div>",$("body").append(html),$("body").children(".modal-widget"));title.show(),title.find(".close").on("click",function(){_destroy()})},pub.pageUrlPath=function(){try{return document.location.pathname}catch(e){return null}},pub.fromCodePoint=function(codePoint){return String.fromCodePoint(codePoint)},pub.emojiWidget=function(jqPicket,jqInput,jqEmojies){jqPicket.on("click",function(){jqEmojies.css({display:"flex"})}),jqEmojies.on("click",function(event){var event=$(event.target).text(),cursorPos=jqInput.getCursorPosition(),inputVal=jqInput.val(),event=inputVal.substring(0,cursorPos)+event+inputVal.substring(cursorPos);jqInput.val(event).setCursorPosition(cursorPos+2).focus(),jqEmojies.css("display","none")}),$(document).on("mouseup",function(e){jqEmojies.is(e.target)||jqEmojies.css("display","none")})},pub.emojify=function(str){for(var emojis=[["&#x1F923;","^(:\\)\\)) "," (:\\)\\))$","^(:\\)\\))$"," (:\\)\\)) "],["&#x1F642;","^(:\\)) "," (:\\))$","^(:\\))$"," (:\\)) "],["&#x1F641;","^(:\\() "," (:\\()$","^(:\\()$"," (:\\() "],["&#x1F610;","^(:\\|) "," (:\\|)$","^(:\\|)$"," (:\\|) "],["&#x1F61B;","^(:P) "," (:P)$","^(:P)$"," (:P) "],["&#x1F609;","^(;\\)) "," (;\\))$","^(;\\))$"," (;\\)) "],["&#x1F62C;","^(:D) "," (:D)$","^(:D)$"," (:D) "],["&#x1F60E;","^(8\\)) "," (8\\))$","^(8\\))$"," (8\\)) "]],newStr=str,i=0;i<emojis.length;i++)for(var row=emojis[i],uc=row[0],j=1;j<row.length;j++)newStr=newStr.replace(new RegExp(row[j],"g"),uc);return newStr},pub.pubsub=(hOP=(topics={}).hasOwnProperty,{subscribe:function(topic,listener){hOP.call(topics,topic)||(topics[topic]=[]);var index=topics[topic].push(listener)-1;return{remove:function(){delete topics[topic][index]}}},publish:function(topic,info){hOP.call(topics,topic)&&topics[topic].forEach(function(item){item(void 0!==info?info:{})})}}),pub.taskQueue=function(taskHandler){var tasks=[],running=!1;function _run(){running=!0;var task=tasks.shift();taskHandler(task.data,function(err,result){task.cb(err,result),tasks.length?setTimeout(_run,0):running=!1})}this.push=function(task,cb){tasks.push({task:task,cb:cb}),running||_run()}},pub.ReconnectingWebSocket=function(url,options){var reconnectSetTimeoutId,self=this,settings=Object.assign({minReconnectInterval:3e3,maxReconnectInterval:8e3,maxReconnectAttempts:10},options||{}),ws=null,connectedCnt=0,reconnectAttempt=0;this.onopen=function(){},this.onreconnected=function(){},this.onerror=function(){},this.onclose=function(){},this.onmessage=function(){},this.send=function(message){ws.send(message)},function connect(){clearTimeout(reconnectSetTimeoutId),null!==ws&&ws.readyState===WebSocket.OPEN||((ws=new WebSocket(url)).onopen=function(){clearTimeout(reconnectSetTimeoutId),0===connectedCnt?self.onopen():(reconnectAttempt=0,self.onreconnected()),connectedCnt++},ws.onerror=function(err){self.onerror(err)},ws.onclose=function(err){var max;self.onclose(err),clearTimeout(reconnectSetTimeoutId),++reconnectAttempt>settings.maxReconnectAttempts||(reconnectSetTimeoutId=setTimeout(connect,(err=settings.minReconnectInterval,max=settings.maxReconnectInterval,err=Math.ceil(err),max=Math.floor(max),Math.floor(Math.random()*(max-err)+err))))},ws.onmessage=function(event){self.onmessage(event)})}()},pub.ws=function(url){var self=this,ws=new pub.ReconnectingWebSocket(url),idMsg=(ws.onopen=function(){self.onopen()},ws.onerror=function(err){self.onerror(err)},ws.onclose=function(err){self.onclose(err)},ws.onreconnected=function(){self.onreconnected()},ws.onmessage=function(event){var event=JSON.parse(event.data),id=event.id;id&&msgCallbacks["msg_"+id]?(delete event.id,msgCallbacks["msg_"+id](!1,event),delete msgCallbacks["msg_"+id]):self.onmessage(event)},1),msgCallbacks={};this.onopen=function(){},this.onerror=function(){},this.onclose=function(){},this.onmessage=function(){},this.onreconnected=function(){},this.send=function(message,cb){try{cb&&(message.id=idMsg,msgCallbacks["msg_"+idMsg]=cb,idMsg++),ws.send(JSON.stringify(message))}catch(e){return cb?setTimeout(cb,0,e):e}},this.close=function(){ws.close()}},pub.rtd=function(url){var self=this,subscribers={},ws=new pub.ws(url);ws.onopen=function(){self.onopen()},ws.onerror=function(err){self.onerror(err)},ws.onclose=function(err){self.onclose(err)},ws.onreconnected=function(){for(var channel in subscribers)ws.send({type:"subscribe",data:{channels:[channel]}});self.onreconnected()},ws.onmessage=function(message){try{var channel=message.channel;if(void 0!==channel){var handlers=subscribers[channel];if(void 0!==handlers&&handlers.length)for(var i=0;i<handlers.length;i++)handlers[i](message)}}catch(e){}},this.onopen=function(){},this.onerror=function(){},this.onclose=function(){},this.onreconnected=function(){},this.close=function(){ws.close()},this.send=function(message,cb){ws.send(message,cb)},this.subscribe=function(channels,handler,cb,channelsData){try{!function(channels,channelsData,cb){try{for(var channelsToSubscribe=[],i=0;i<channels.length;i++){var channel=channels[i];void 0!==subscribers[channel]&&subscribers[channel].length||channelsToSubscribe.push(channel)}if(!channelsToSubscribe.length)return cb(!1);var msg={type:"subscribe",data:{channels:channelsToSubscribe}};channelsData&&(msg.data.channelsData=channelsData),ws.send(msg,function(err,result){return err?cb(err):result.error?cb(result.error,result):cb(!1,result)})}catch(e){return setTimeout(cb,0,e)}}(channels,channelsData,function(err,result){try{if(err)return cb(err);for(var i=0;i<channels.length;i++){var channel=channels[i];void 0===subscribers[channel]&&(subscribers[channel]=[]),subscribers[channel].push(handler)}return cb(!1,result)}catch(e){return cb(e)}})}catch(e){return setTimeout(cb,0,e)}},this.unsubscribe=function(channels,handler,cb,doServerUnsubscribe){try{for(var _doServerUnsubscribe=void 0===doServerUnsubscribe||doServerUnsubscribe,channelsToUnsubscribe=[],i=0;i<channels.length;i++){var idx,channel=channels[i],handlers=subscribers[channel];handlers&&handlers.length&&(-1<(idx=handlers.indexOf(handler))&&handlers.splice(idx,1),0===handlers.length)&&channelsToUnsubscribe.push(channel)}if(!(0<channelsToUnsubscribe.length&&!0===_doServerUnsubscribe))return setTimeout(cb,0);var msg={type:"unsubscribe",data:{channels:channelsToUnsubscribe}};ws.send(msg,cb)}catch(e){return setTimeout(cb,0,e)}}},pub.session={set:function(key,value){Cookies.set(key,value)},get:function(key){return Cookies.get(key)},remove:function(key){return Cookies.remove(key)}},pub.cookie=function(){var ret={set:function(key,value,options){Cookies.set(key,value,options)},get:function(key){return Cookies.get(key)},remove:function(key){return Cookies.remove(key)}};return ret}(),pub.hdFormatPrice=function(val,format){return numeral(val).format(format)},pub.hdFormatSpread=function(val,decimals){decimals=["0","0","0","0","0","0","0","0"].slice(0,""+decimals||2).join("");return numeral(val).format("0,0."+decimals)},pub.hdFormatHighLow=function(val,format){return numeral(val).format(format)},pub.hdFormatVolume=function(val){return numeral(val).format("0,0.0a")},pub.hdFormatPchange=function(val){return numeral(val).format("+0,0.00a")},pub.formatPrice=function(price,decimals){decimals=decimals||4,decimals=["0","0","0","0","0","0","0","0"].slice(0,decimals).join("");return numeral(price).format("0,0."+decimals)},pub.formatZeros=function(number){for(var decimalsPart=number,idx=0,i=decimalsPart.length-1;0<=i;i--)if("0"!==decimalsPart[i]){idx=i;break}return decimalsPart.substring(0,idx+1)+'<span class="number-zeros-part">'+decimalsPart.substring(idx+1)+"</span>"},pub.formatTradeDate=function(ts){return new Date(ts).toISOString().substr(11,8)},pub.formatVolume=function(val){return numeral(val).format("0,0")},pub.formatPchange=function(val,decimals){decimals=decimals||4;return numeral(val).format("+0,0."+decimalsToZeros(decimals))},pub.formatHighLow=function(val,decimals){decimals=decimals||4;return numeral(val).format("0,0."+decimalsToZeros(decimals))},pub.tradeColorClass=function(tradeSide){return 0<=["buy","b"].indexOf(tradeSide)?"green":0<=["sell","s"].indexOf(tradeSide)?"red":""},pub.colorClass=function(change){return null===change?"":0<change?"green":change<0?"red":""},pub.currentVolume=function(val){return isNaN(val)?0:parseInt(val)},pub.formatOrderBookPrice=function(number,decimals){decimals=decimals||4,decimals=["0","0","0","0","0","0","0","0"].slice(0,decimals).join(""),number=numeral(number).format("0."+decimals).split(".");return'<span class="number-integer-part">'+number[0]+'</span>.<span class="number-decimal-part">'+number[1]+"</span>"},pub.formatOrderBookAmount=function(number){number=numeral(number).format("0.00000000").split(".");return'<span class="number-integer-part">'+number[0]+'</span>.<span class="number-decimal-part">'+pub.formatZeros(number[1])+"</span>"},pub.randomInt=function(min,max){return min=Math.ceil(min),max=Math.floor(max),Math.floor(Math.random()*(max-min))+min},pub.escapeHtml=function(str){var entityMap={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"};return String(str).replace(/[&<>"'`=\/]/g,function(s){return entityMap[s]})},pub.trimRight=function(str,chars){return void 0===chars&&(chars="s"),str.replace(new RegExp("["+chars+"]+$"),"")},pub.pageTitlePrice=function(price,decimals){return parseFloat(price)<1e-6?parseFloat(price).toFixed(8):(decimals=decimalsToZeros(decimals),numeral(price).format("0,0.["+decimals+"]"))},pub.globalSearchNoFocus=function(args){const elmGlobalSearchInput=args.elmGlobalSearchInput;function handleKeydownEvent(event){try{var evt=event;evt.shiftKey||evt.metaKey||evt.altKey||evt.ctrlKey||"BODY"!==evt.target.tagName||!/^[a-z]$/i.test(evt.key)||(evt.preventDefault(),elmGlobalSearchInput.focus(),elmGlobalSearchInput.value=evt.key,elmGlobalSearchInput.dispatchEvent(new InputEvent("input")))}catch(e){console.error("handleKeydownEvent tc error",e)}}document.addEventListener("keydown",event=>{handleKeydownEvent(event)}),window.addEventListener("load",function(){window.chartWidget&&chartWidget.onChartReady(function(){try{chartWidget._iFrame.contentDocument.addEventListener("keydown",event=>{handleKeydownEvent(event)})}catch(e){console.error("nav-desktop onChartReady tc error",e)}})})},pub.globalSearch=function(args){var itemCopy,symbolsInfo=args.symbolsInfo,coinInfo=args.coinInfo;const itemsCoin=[];for(const coin in coinInfo)itemsCoin.push(Object.assign({coin:coin},coinInfo[coin]));itemsCoin.sort(function(a,b){a=a.vol_24h??0;return(b.vol_24h??0)-a});const itemsSymbol=[];for(const item of symbolsInfo)item.is_short_long_liquidation||item.is_long_short_ratio||item.is_pfr||((itemCopy=Object.assign({},item)).name_in_search&&(itemCopy.name_in_search_words=itemCopy.name_in_search.replace(/[(\/)]/g,"").replace(/\s+/," ").split(" ")),itemsSymbol.push(itemCopy));var adItem=args.adItem,input=args.jqInput,ul=args.jqUL,onSelect=args.onSelect,selectedLI=null,filteredItems=[],symbolsInfo=args.window||window,mousePageX=null,mousePageY=null;function _close(){selectedLI=null,ul.empty(),ul.hide()}function _select(){if(selectedLI)for(var symbol=selectedLI.attr("data-symbol"),i=0;i<filteredItems.length;i++){var item=filteredItems[i];if(item.symbol===symbol){_close(),input.trigger("blur"),onSelect(item);break}}}function _scroll(key){var ulHeight,selectedLIHeight;selectedLI&&(ulHeight=ul.outerHeight(),selectedLIHeight=selectedLI.outerHeight(),"down"===key?selectedLI.position().top+selectedLIHeight>ulHeight&&ul.scrollTop(ul.scrollTop()+selectedLIHeight):selectedLI.position().top-selectedLIHeight<0&&ul.scrollTop(ul.scrollTop()-selectedLIHeight))}function _showSearchResults(results){if(selectedLI=null,ul.show(),ul.empty(),adItem&&results.length&&results.unshift({type:"ad",symbol:"__ad__",url:adItem.url,text:adItem.text}),results.length){for(const item of results)"market"===item.type?ul.append('<li data-symbol="'+item.symbol+'"><div class="pair">'+item.pair_display+" "+item.exchange_name+(item.fcNameOnExchange?" ("+item.fcNameOnExchange+")":"")+"</div></li>"):"coin"===item.type?ul.append('<li data-symbol="'+item.symbol+'"><div class="pair">'+item.text+"</div></li>"):"ad"===item.type&&ul.append('<li data-symbol="'+item.symbol+'"><div class="pair" style="color: var(--color-link)">'+item.text+"</div></li>");ul.scrollTop(0)}else ul.html("No item found");filteredItems=results}function _coinResults(item){var results=[];return results.push({type:"coin",symbol:`coin_${item.coin}_chart`,text:`${item.display} ${item.name} Chart Realtime`,url:item.url_major_market_chart}),item.url_oi&&(results.push({type:"coin",symbol:`coin_${item.coin}_oi`,text:`${item.display} ${item.name} Open Interest`,url:item.url_oi}),results.push({type:"coin",symbol:`coin_${item.coin}_fr`,text:`${item.display} ${item.name} Funding Rate`,url:item.url_fr}),results.push({type:"coin",symbol:`coin_${item.coin}_lq`,text:`${item.display} ${item.name} Liquidations`,url:item.url_lq}),results.push({type:"coin",symbol:`coin_${item.coin}_lsr`,text:`${item.display} ${item.name} Long/Short Ratio`,url:item.url_lsr})),results.push({type:"coin",symbol:`coin_${item.coin}_markets`,text:`${item.display} ${item.name} Markets`,url:item.url_markets}),results}function _showDefaultSearchResults(){let results=[];for(const item of itemsCoin.slice(0,10))results=results.concat(_coinResults(item));_showSearchResults(results)}input.on("focus",function(){_showDefaultSearchResults()}),input.on("input",function(){selectedLI=null;var textToSearch=input.val().trim().replace(/\//g,"");if(!textToSearch)return _showDefaultSearchResults();let filteredItems=[];var wordsUserInput=textToSearch.replace(/\s+/," ").split(" "),regexCoin=new RegExp("^"+textToSearch+".*","i"),regexCoin2=new RegExp("^[0-9]+"+textToSearch+".*","i");for(const item of itemsCoin)(regexCoin.test(item.display)||regexCoin.test(item.name)||regexCoin2.test(item.display))&&(filteredItems=filteredItems.concat(_coinResults(item)));for(const item of itemsSymbol)if(item.name_in_search){var word1,wordsNameInSearch=item.name_in_search_words;let matched=!0;for(word1 of wordsUserInput){var word2,word1_matched=!1;for(word2 of wordsNameInSearch)if(!0===new RegExp("^"+word1,"i").test(word2)){word1_matched=!0;break}if(!word1_matched){matched=!1;break}}matched&&(item.type="market",filteredItems.push(item))}_showSearchResults(filteredItems)}),input.on("keydown",function(e){var LIs,next;"ArrowDown"===e.key?(e.preventDefault(),(LIs=ul.children("li")).removeClass("hover"),null===selectedLI?selectedLI=LIs.eq(0):(next=selectedLI.next()).length&&(selectedLI=next),selectedLI.addClass("hover"),_scroll("down")):"ArrowUp"===e.key?(e.preventDefault(),(LIs=ul.children("li")).removeClass("hover"),null!==selectedLI&&((selectedLI=(next=selectedLI.prev()).length?next:selectedLI).addClass("hover"),_scroll("up"))):"Enter"===e.key?_select():"Escape"===e.key&&(_close(),input.val(""),input.trigger("blur"))}),ul.on("click","li",function(){selectedLI=$(this),_select()}),ul.on("mouseover","li",function(e){mousePageX===e.pageX&&mousePageY===e.pageY||(ul.children("li").removeClass("hover"),(e=$(this)).addClass("hover"),selectedLI=e)}),$(symbolsInfo).on("mouseup",function(e){ul.is(e.target)||0!==ul.has(e.target).length||input.is(e.target)||0!==input.has(e.target).length||(_close(),input.val(""))}),$(symbolsInfo).on("mousemove",function(e){mousePageX=e.pageX,mousePageY=e.pageY}),ul.on("mouseout",function(){})},pub.symbolSearch=function(args){for(var items=[],coins={},i=0;i<args.items.length;i++){var item=args.items[i];if(!(item.is_short_long_liquidation||item.is_long_short_ratio||item.is_pfr)&&(!0!==args.without_futures_extra_data||!0!==item.is_futures_extra_data)){var k,itemCopy={};for(k in item)itemCopy[k]=item[k];itemCopy.name_in_search&&(itemCopy.name_in_search_words=itemCopy.name_in_search.replace(/[(\/)]/g,"").replace(/\s+/," ").split(" ")),items.push(itemCopy),!0!==args.without_coins&&(coins[itemCopy.coin]={display:itemCopy.coin_display,name:itemCopy.coin_name,url:"/"+itemCopy.coin_slug+"/price-live/"})}}!0===args.only_coins&&(items=[]);var adItem=args.adItem,input=args.jqInput,ul=args.jqUL,onSelect=args.onSelect,selectedLI=null,filteredItems=[],inputOrigVal=input.val(),_window=args.window||window,mousePageX=null,mousePageY=null;function _close(){selectedLI=null,ul.empty(),ul.hide()}function _select(){if(selectedLI)for(var symbol=selectedLI.attr("data-symbol"),i=0;i<filteredItems.length;i++){var item=filteredItems[i];if(item.symbol===symbol){_close(),input.trigger("blur"),onSelect(item),inputOrigVal=input.val();break}}}function _scroll(key){var ulHeight,selectedLIHeight;selectedLI&&(ulHeight=ul.outerHeight(),selectedLIHeight=selectedLI.outerHeight(),"down"===key?selectedLI.position().top+selectedLIHeight>ulHeight&&ul.scrollTop(ul.scrollTop()+selectedLIHeight):selectedLI.position().top-selectedLIHeight<0&&ul.scrollTop(ul.scrollTop()-selectedLIHeight))}input.on("focus",function(){var jqElm=$(this);inputOrigVal=jqElm.val(),jqElm.get(0).select()}),input.on("input",function(){selectedLI=null;var textToSearch=input.val().trim().replace(/\//g,"");if(1<textToSearch.length){var regex=new RegExp("^"+textToSearch+".*","i");new RegExp(".*"+textToSearch+".*","i");if(filteredItems=[],textToSearch.length){var c,wordsUserInput=textToSearch.replace(/\s+/," ").split(" ");for(let item of items)if(item.name_in_search){var word1,wordsNameInSearch=item.name_in_search_words;let matched=!0;for(word1 of wordsUserInput){var word2,word1_matched=!1;for(word2 of wordsNameInSearch)if(!0===new RegExp("^"+word1,"i").test(word2)){word1_matched=!0;break}if(!word1_matched){matched=!1;break}}matched&&(item.type="market",filteredItems.push(item))}for(c in coins){var coin_info=coins[c];(regex.test(coin_info.name)||regex.test(coin_info.display))&&(filteredItems.push({type:"coin",symbol:"coin_"+c,name:coin_info.name,url:coin_info.url}),"coin_"+c,0)}if(adItem&&filteredItems.length&&filteredItems.unshift({type:"ad",symbol:"__ad__",url:adItem.url,text:adItem.text}),ul.show(),ul.empty(),filteredItems.length){for(var i=0;i<filteredItems.length;i++){var item=filteredItems[i];"market"===item.type?ul.append('<li data-symbol="'+item.symbol+'"><div class="pair">'+item.pair_display+" "+item.exchange_name+(item.fcNameOnExchange?" ("+item.fcNameOnExchange+")":"")+"</div></li>"):"coin"===item.type?ul.append('<li data-symbol="'+item.symbol+'"><div class="pair">'+item.name+"</div></li>"):"ad"===item.type&&ul.append('<li data-symbol="'+item.symbol+'"><div class="pair" style="color: var(--color-link)">'+item.text+"</div></li>")}ul.scrollTop(0)}else ul.html("No item found")}else filteredItems=[],ul.empty(),ul.hide()}}),input.on("keydown",function(e){var LIs,next;"ArrowDown"===e.key?(e.preventDefault(),(LIs=ul.children("li")).removeClass("hover"),null===selectedLI?selectedLI=LIs.eq(0):(next=selectedLI.next()).length&&(selectedLI=next),selectedLI.addClass("hover"),_scroll("down")):"ArrowUp"===e.key?(e.preventDefault(),(LIs=ul.children("li")).removeClass("hover"),null!==selectedLI&&((selectedLI=(next=selectedLI.prev()).length?next:selectedLI).addClass("hover"),_scroll("up"))):"Enter"===e.key?_select():"Escape"===e.key&&(_close(),input.val(inputOrigVal),input.trigger("blur"))}),ul.on("click","li",function(){selectedLI=$(this),_select()}),ul.on("mouseover","li",function(e){mousePageX===e.pageX&&mousePageY===e.pageY||(ul.children("li").removeClass("hover"),(e=$(this)).addClass("hover"),selectedLI=e)}),$(_window).on("mouseup",function(e){ul.is(e.target)||0!==ul.has(e.target).length||input.is(e.target)||0!==input.has(e.target).length||(_close(),input.val(inputOrigVal))}),$(_window).on("mousemove",function(e){mousePageX=e.pageX,mousePageY=e.pageY}),ul.on("mouseout",function(){})},pub.topHoverMenu=function(config){var jqTrigger=config.jqTrigger,jqMenu=config.jqMenu,jqMenuDesiredTop=config.menuDesiredTop||45,config=config.menuAlign||"left",parent=jqTrigger.parent(),jqTriggerHeight=jqTrigger.outerHeight(!0),jqTrigger=jqTrigger.outerWidth(!0),jqMenuDesiredTop=jqMenuDesiredTop-(parent.offset().top+jqTriggerHeight),jqMenuTop=jqMenuDesiredTop+jqTriggerHeight,jqTriggerHeight=(parent.css("z-index","110"),$("<div></div>").css({position:"absolute",left:"0px",top:jqTriggerHeight+"px",width:jqTrigger+"px",height:jqMenuDesiredTop+"px"})),jqTriggerHeight=parent.append(jqTriggerHeight),jqTrigger={position:"absolute",top:jqMenuTop+"px","z-index":"110"};"left"===config?jqTrigger.left="0px":"right"===config&&(jqTrigger.right="0px"),jqMenu.css(jqTrigger),parent.on("mouseenter",function(){jqMenu.show()}).on("mouseleave",function(){jqMenu.hide()}),jqTriggerHeight.on("mouseenter",function(){jqMenu.show()}).on("mouseleave",function(){jqMenu.hide()})},pub.topHoverMenuBk=function(config){var jqTrigger=config.jqTrigger,jqMenu=config.jqMenu,config=jqTrigger.parent(),jqTrigerTop=(jqMenu.position().top,jqTrigger.position().top),jqTriggerHeight=jqTrigger.outerHeight(!0),jqTriggerWidth=jqTrigger.outerWidth(!0),jqTrigger=(jqTrigger.position().top,jqTrigger.outerHeight(!0),jqTrigger.position().left),jqTrigerTop=(config.css("z-index","110"),jqMenu.css({position:"absolute",left:jqTrigger+"px","z-index":"110"}),$("<div></div>").css({position:"absolute",top:jqTrigerTop+jqTriggerHeight+"px",left:jqTrigger+"px",width:jqTriggerWidth+"px",height:"50px"})),jqTrigerTop=config.append(jqTrigerTop);config.on("mouseenter",function(){jqMenu.show()}).on("mouseleave",function(){jqMenu.hide()}),jqTrigerTop.on("mouseenter",function(){jqMenu.show()}).on("mouseleave",function(){jqMenu.hide()})},pub}(numeral,Cookies);!function($){var originalMethod=$.fn.text;$.fn.text=function(value){var self=this;return void 0!==value&&self.hasClass("flash")&&self.text()!==value&&(self.removeClass("do-flash").addClass("do-flash"),setTimeout(function(){self.removeClass("do-flash")},1e3)),originalMethod.apply(self,arguments)},$.fn.coinalyzeDropdown=function(config){return this.each(function(){var navCurrentLI,liKeyboardSelected,jqDropdown=$(this),jqDropdownValue=jqDropdown.find("div.value"),jqDropdownUL=jqDropdown.children("ul"),jqDropdownLIs=jqDropdownUL.children("li:not(.search)"),jqItemSelected=jqDropdownUL.children('li[data-selected="true"]'),jqSearchLI=jqDropdownUL.children("li.search"),jqSearchInput=jqSearchLI.find("input"),lastValueSelected=(jqDropdownUL.outerWidth(jqDropdown.outerWidth(!0)),jqItemSelected.length||(jqItemSelected=jqDropdownLIs.eq(0)),jqDropdownValue.attr("data-value",jqItemSelected.attr("data-value")),jqDropdownValue.text(jqItemSelected.text()),jqItemSelected.attr("data-value"));jqDropdown.on("change",function(){config.onChange.call(jqDropdown.get(0),lastValueSelected)}),jqDropdownValue.on("click",function(){jqDropdownUL.toggle(),jqSearchLI.length&&jqDropdownUL.is(":visible")&&(jqDropdownLIs.show(),jqSearchInput.focus(),jqSearchInput.val(""))}),jqDropdownLIs.on("click",function(){var jqThis=$(this),valueSelected=jqThis.attr("data-value");jqDropdownValue.attr("data-value",valueSelected),jqDropdownValue.text(jqThis.text()),jqDropdownUL.hide(),jqDropdownValue.attr("data-value")!==lastValueSelected&&(lastValueSelected=valueSelected,config.onChange.call(jqDropdown.get(0),valueSelected))}),$(document).on("mouseup",function(e){jqDropdown.is(e.target)||0!==jqDropdown.has(e.target).length||jqDropdownUL.hide()}),$(document).on("keyup",function(e){27===e.keyCode&&jqDropdownUL.hide()}),jqSearchLI.length&&(jqSearchInput.on("keyup",function(){var searchVal=$(this).val();jqDropdownLIs.each(function(){for(var jqLI=$(this),jqCode=jqLI.children(".item-code"),jqName=jqLI.children(".item-name"),searchIn=[],searchIn=jqCode.length&&jqName.length?[jqCode.text().trim(),jqName.text().trim()]:[jqLI.text().trim()],regex=new RegExp("^"+searchVal,"i"),found=!1,i=0;i<searchIn.length;i++)if(regex.test(searchIn[i])){found=!0;break}!0===found?jqLI.show():jqLI.hide()})}),navCurrentLI=0,liKeyboardSelected=null,jqSearchInput.on("keydown",function(e){if(40===e.keyCode){e.preventDefault();for(var idxVisible=0,i=0;i<jqDropdownLIs.length;i++)if((li=jqDropdownLIs.eq(i)).is(":visible")&&idxVisible++,idxVisible===navCurrentLI+1){navCurrentLI++,liKeyboardSelected=li,jqDropdownLIs.removeClass("hover"),li.addClass("hover");break}}else if(38===e.keyCode){e.preventDefault();for(var li,idxVisible=0,i=0;i<jqDropdownLIs.length;i++)if((li=jqDropdownLIs.eq(i)).is(":visible")&&idxVisible++,idxVisible===navCurrentLI-1){navCurrentLI--,liKeyboardSelected=li,jqDropdownLIs.removeClass("hover"),li.addClass("hover");break}}else 13===e.keyCode?null!==liKeyboardSelected&&liKeyboardSelected.trigger("click"):(navCurrentLI=0,liKeyboardSelected=null,jqDropdownLIs.removeClass("hover"))}))})},$.fn.coinalyzeSelectBk=function(config){return this.each(function(){var navCurrentLI,liKeyboardSelected,self=this,jqSelect=$(this),jqSelectOpener=jqSelect.children("div:first-child"),jqSelectValue=jqSelect.find("div.value"),jqSelectUL=jqSelect.children("ul"),jqSelectLIs=jqSelectUL.children("li:not(.search)"),jqSelectedItemLi=jqSelectUL.children('li[data-selected="true"]'),jqSearchLI=jqSelectUL.children("li.search"),jqSearchInput=jqSearchLI.find("input"),selectName=jqSelect.attr("data-select-name"),selectedItem=null,selectedItem=jqSelectedItemLi.length?JSON.parse(jqSelectedItemLi.attr("data-item")):JSON.parse(jqSelectLIs.eq(0).attr("data-item")),valueFormatter=config.valueFormatter||function(selectedItem){return null===selectedItem?"":selectedItem.id};jqSelectValue.html(valueFormatter.call(self,selectedItem,selectName)),self.coinalyzeSelect={selectedItem:function(){return selectedItem},selectName:function(){return selectName}},jqSelect.on("change",function(){config.onChange.call(self,selectedItem,selectName)}),jqSelectOpener.on("click",function(){jqSelectUL.toggle(),jqSearchLI.length&&jqSelectUL.is(":visible")&&(jqSelectLIs.show(),jqSearchInput.focus(),jqSearchInput.val(""))}),jqSelectLIs.on("click",function(){var jqThis=$(this),jqThis=JSON.parse(jqThis.attr("data-item"));jqSelectUL.hide(),jqThis.id!==selectedItem.id&&(selectedItem=jqThis,jqSelectValue.html(valueFormatter.call(self,selectedItem,selectName)),config.onChange.call(self,selectedItem,selectName))}),$(document).on("mouseup",function(e){jqSelect.is(e.target)||0!==jqSelect.has(e.target).length||jqSelectUL.hide()}),$(document).on("keyup",function(e){27===e.keyCode&&jqSelectUL.hide()}),jqSearchLI.length&&(jqSearchInput.on("keyup",function(){var searchVal=$(this).val();jqSelectLIs.each(function(){for(var jqLI=$(this),jqCode=jqLI.children(".item-code"),jqName=jqLI.children(".item-name"),searchIn=[],searchIn=jqCode.length&&jqName.length?[jqCode.text().trim(),jqName.text().trim()]:[jqLI.text().trim()],regex=new RegExp("^"+searchVal,"i"),found=!1,i=0;i<searchIn.length;i++)if(regex.test(searchIn[i])){found=!0;break}!0===found?jqLI.show():jqLI.hide()})}),navCurrentLI=0,liKeyboardSelected=null,jqSearchInput.on("keydown",function(e){if(40===e.keyCode){e.preventDefault();for(var idxVisible=0,i=0;i<jqSelectLIs.length;i++)if((li=jqSelectLIs.eq(i)).is(":visible")&&idxVisible++,idxVisible===navCurrentLI+1){navCurrentLI++,liKeyboardSelected=li,jqSelectLIs.removeClass("hover"),li.addClass("hover");break}}else if(38===e.keyCode){e.preventDefault();for(var li,idxVisible=0,i=0;i<jqSelectLIs.length;i++)if((li=jqSelectLIs.eq(i)).is(":visible")&&idxVisible++,idxVisible===navCurrentLI-1){navCurrentLI--,liKeyboardSelected=li,jqSelectLIs.removeClass("hover"),li.addClass("hover");break}}else 13===e.keyCode?null!==liKeyboardSelected&&liKeyboardSelected.trigger("click"):(navCurrentLI=0,liKeyboardSelected=null,jqSelectLIs.removeClass("hover"))}))})},$.fn.coinalyzeSelect=function(config){var jqSelectOpener,jqSelectValue,jqSelectUL,jqSelectLIs,jqSelectedItemLi,jqSearchLI,jqSearchInput,selectName,selectedItem,valueFormatter,navCurrentLI,liKeyboardSelected,jqBody=$("body"),jqSelect=this;if(jqSelect.length)return jqSelectOpener=jqSelect.children("div:first-child"),jqSelectValue=jqSelect.find("div.value"),jqSelectUL=jqSelect.children("ul"),jqSelectLIs=jqSelectUL.children("li:not(.search)"),jqSelectedItemLi=jqSelectUL.children('li[data-selected="true"]'),jqSearchLI=jqSelectUL.children("li.search"),jqSearchInput=jqSearchLI.find("input"),selectName=jqSelect.attr("data-select-name"),selectedItem=null,selectedItem=jqSelectedItemLi.length?JSON.parse(jqSelectedItemLi.attr("data-item")):JSON.parse(jqSelectLIs.eq(0).attr("data-item")),valueFormatter=config.valueFormatter||function(selectedItem){return null===selectedItem?"":selectedItem.id},jqSelectValue.html(valueFormatter.call(jqSelect,selectedItem,selectName)),this.selectedItem=function(){return selectedItem},jqSelect.on("change",function(){config.onChange.call(jqSelect,selectedItem,selectName)}),jqSelectUL.on("click",function(evt){evt.clientY<90&&(jqSelectUL.hide(),removeBodyDisable())}),jqSelectOpener.on("click",function(){jqSelectUL.toggle(),jqSelectUL.is(":visible")&&jqBody.hasClass("phone-version")&&(jqBody.prepend('<div class="body-disable"></div>'),jqBody.css("overflow-y","hidden")),jqSearchLI.length&&jqSelectUL.is(":visible")&&(jqSelectLIs.show(),jqSearchInput.focus(),jqSearchInput.val(""))}),jqSelectLIs.on("click",function(){var jqThis=$(this),jqThis=JSON.parse(jqThis.attr("data-item"));jqSelectUL.hide(),removeBodyDisable(),jqThis.id!==selectedItem.id&&(selectedItem=jqThis,jqSelectValue.html(valueFormatter.call(jqSelect,selectedItem,selectName)),config.onChange.call(jqSelect,selectedItem,selectName))}),$(document).on("mouseup",function(e){jqSelect.is(e.target)||0!==jqSelect.has(e.target).length||(jqSelectUL.hide(),removeBodyDisable())}),$(document).on("keyup",function(e){27===e.keyCode&&(jqSelectUL.hide(),removeBodyDisable())}),jqSearchLI.length&&(jqSearchInput.on("keyup",function(){var searchVal=$(this).val();jqSelectLIs.each(function(){for(var jqLI=$(this),jqCode=jqLI.children(".item-code"),jqName=jqLI.children(".item-name"),searchIn=[],searchIn=jqCode.length&&jqName.length?[jqCode.text().trim(),jqName.text().trim()]:[jqLI.text().trim()],regex=new RegExp("^"+searchVal,"i"),found=!1,i=0;i<searchIn.length;i++)if(regex.test(searchIn[i])){found=!0;break}!0===found?jqLI.show():jqLI.hide()})}),navCurrentLI=0,liKeyboardSelected=null,jqSearchInput.on("keydown",function(e){if(40===e.keyCode){e.preventDefault();for(var idxVisible=0,i=0;i<jqSelectLIs.length;i++)if((li=jqSelectLIs.eq(i)).is(":visible")&&idxVisible++,idxVisible===navCurrentLI+1){navCurrentLI++,liKeyboardSelected=li,jqSelectLIs.removeClass("hover"),li.addClass("hover");break}}else if(38===e.keyCode){e.preventDefault();for(var li,idxVisible=0,i=0;i<jqSelectLIs.length;i++)if((li=jqSelectLIs.eq(i)).is(":visible")&&idxVisible++,idxVisible===navCurrentLI-1){navCurrentLI--,liKeyboardSelected=li,jqSelectLIs.removeClass("hover"),li.addClass("hover");break}}else 13===e.keyCode?null!==liKeyboardSelected&&liKeyboardSelected.trigger("click"):(navCurrentLI=0,liKeyboardSelected=null,jqSelectLIs.removeClass("hover"))})),this;function removeBodyDisable(){jqBody.hasClass("phone-version")&&(jqBody.css("overflow-y","auto"),jqBody.children("div.body-disable").remove())}}}(jQuery),function($){$.fn.setCursorPosition=function(pos){var input=this.get(0);return input.setSelectionRange?(input.focus(),input.setSelectionRange(pos,pos)):input.createTextRange&&((input=input.createTextRange()).collapse(!0),input.moveEnd("character",pos),input.moveStart("character",pos),input.select()),this},$.fn.getCursorPosition=function(){var sel,selLen,input=this.get(0);if(input)return"selectionStart"in input?input.selectionStart:document.selection?(input.focus(),sel=document.selection.createRange(),selLen=document.selection.createRange().text.length,sel.moveStart("character",-input.value.length),sel.text.length-selLen):void 0}}(jQuery);;
var treemap;!function(treemap){var InternalNode=function(){function InternalNode(weight,data){this.weight=0,this.frame={x:0,y:0,width:0,height:0},this.weight=weight,this.data=data}return InternalNode.weigh=function(node){var nodeLevel2Nodes=new Array,nodeList=new Array;for(node.level=0,nodeList.push(node);0<nodeList.length;){var searchNode=nodeList.pop();if(nodeLevel2Nodes[searchNode.level]||(nodeLevel2Nodes[searchNode.level]=new Array),nodeLevel2Nodes[searchNode.level].push(searchNode),searchNode.nodes)for(var i=0;i<searchNode.nodes.length;++i){var nextNode=searchNode.nodes[i];nextNode.level=searchNode.level+1,nextNode.parent=searchNode,nodeList.push(nextNode)}}for(i=nodeLevel2Nodes.length-2;0<=i;--i)for(var j=0;j<nodeLevel2Nodes[i].length;++j){for(var weight=0,k=0;k<nodeLevel2Nodes[i][j].nodes.length;++k)weight+=nodeLevel2Nodes[i][j].nodes[k].weight;nodeLevel2Nodes[i][j].weight=weight}},InternalNode}();treemap.InternalNode=InternalNode}(treemap=treemap||{}),function(treemap){function tileMarginPercentage(){return.05}treemap.Size=function(){},treemap.maxFontSize=function(size){return.1*(size.width+size.height)},treemap.minFontSize=function(size){return 8},treemap.fontSize=function(canvasSize,tileSize){var min=this.minFontSize(canvasSize),max=this.maxFontSize(canvasSize);return Math.max(min,(tileSize.width+tileSize.height)/(canvasSize.width+canvasSize.height)*max)},treemap.tileMarginPercentage=tileMarginPercentage,treemap.xMargin=function(tileSize){return.05*tileSize.width},treemap.yMargin=function(tileSize){return.05*tileSize.height}}(treemap=treemap||{}),function(treemap){var Squarifier=function(){function Squarifier(){}return Squarifier.squarify=function(nodes,width,height,createRectangle){for(var children=nodes.slice(0),vertical=(this.scaleWeights(nodes,width,height),children.sort(function(a,b){return b.weight-a.weight}),children.push(new treemap.InternalNode(0,null)),height<width),w=vertical?height:width,x=0,y=0,rw=width,rh=height,row=[];0<children.length;){var c=children[0],r=c.weight,s=this.sum(row),min=this.min(row),max=this.max(row),r=this.worst(s+r,Math.min(min,r),Math.max(max,r),w),min=this.worst(s,min,max,w);if(0==row.length||r<min)row.push(c),children.shift();else{for(var rx=x,ry=y,z=s/w,j=0;j<row.length;++j){var d=row[j].weight/z;vertical?(createRectangle(rx,ry,z,d,row[j]),ry+=d):(createRectangle(rx,ry,d,z,row[j]),rx+=d)}vertical?(x+=z,rw-=z):(y+=z,rh-=z),w=(vertical=rh<rw)?rh:rw,row=[]}}},Squarifier.worst=function(s,min,max,w){return Math.max(w*w*max/(s*s),s*s/(w*w*min))},Squarifier.scaleWeights=function(weights,width,height){for(var scale=width*height/this.sum(weights),i=0;i<weights.length;i++)weights[i].weight=scale*weights[i].weight},Squarifier.max=function(array){return Math.max.apply(Math,this.weights(array))},Squarifier.min=function(array){return Math.min.apply(Math,this.weights(array))},Squarifier.sum=function(array){for(var total=0,i=0;i<array.length;++i)total+=array[i].weight;return total},Squarifier.weights=function(array){return array.map(function(d){return d.weight},array)},Squarifier}();treemap.squarify=function(rootNode,f){treemap.InternalNode.weigh(rootNode);var node,nodes=new Array;for(nodes.push(rootNode);0<nodes.length;)if((node=nodes.shift()).nodes&&0<node.nodes.length){Squarifier.squarify(node.nodes,node.frame.width,node.frame.height,function(x,y,width,height,n){n.frame={x:node.frame.x+x,y:node.frame.y+y,width:width,height:height}});for(var i=0;i<node.nodes.length;++i){var childNode=node.nodes[i];childNode.nodes&&0<childNode.nodes.length&&nodes.push(childNode)}}for(nodes.push(rootNode);0<nodes.length;)if(f((node=nodes.pop()).frame.x,node.frame.y,node.frame.width,node.frame.height,node),node.nodes)for(i=0;i<node.nodes.length;++i)nodes.push(node.nodes[i])}}(treemap=treemap||{});;
class ConfirmPopup extends HTMLElement{constructor(title,text,onYes,onCancel){super(),this._title=title,this._text=text,this._onYes=onYes,this._onCancel=onCancel,this._dom=this,document.getElementsByTagName("body")[0].append(this._dom)}connectedCallback(){this.innerHTML=this.render(),this._dom.querySelector(".popup-box-close").addEventListener("click",()=>{this.remove()}),this._dom.querySelector(".action-button.yes").addEventListener("click",()=>{this.remove(),this._onYes()}),this._dom.querySelector(".action-button.cancel").addEventListener("click",()=>{this.remove(),this._onCancel()})}render(){return`
<style>
confirm-popup .action-button.yes {
    color: var(--color-orange);
    background-color: #000;
    border: 1px solid;
    border-color: var(--color-orange);
    margin-right: 8px;
}
confirm-popup .action-button.cancel {
    margin-left:8px;
}

</style>
<div class="popup-box">
    <div class="popup-box-content">
        <div class="popup-box-header">
            <div class="popup-box-close" title="Close"></div>
            <div class="popup-box-title">${this._title}</div>
        </div>        
        <div class="popup-box-body">${this._text}</div>
        <div class="popup-box-footer">
            <input class="action-button yes" type="button" value="Yes"><input class="action-button cancel" type="button" value="Cancel">
        </div>
    </div>
</div>
    `}}customElements.define("confirm-popup",ConfirmPopup);class InfoPopup extends HTMLElement{constructor(title,text,onClose,popupBoxExtraCSSClass){super(),this._title=title,this._text=text,this._onClose=onClose,this._popupBoxExtraCSSClass=popupBoxExtraCSSClass,this._dom=this,document.getElementsByTagName("body")[0].append(this._dom)}connectedCallback(){this.innerHTML=this.render(),this._dom.querySelector(".popup-box-close").addEventListener("click",()=>{this.remove(),this._onClose()}),this._dom.querySelector(".action-button.close-button").addEventListener("click",()=>{this.remove(),this._onClose()})}render(){return`
<style>
</style>
<div class="popup-box${this._popupBoxExtraCSSClass?" "+this._popupBoxExtraCSSClass:""}">
    <div class="popup-box-content">
        <div class="popup-box-header">
            <div class="popup-box-close" title="Close"></div>
            <div class="popup-box-title">${this._title}</div>
        </div>        
        <div class="popup-box-body">${this._text}</div>
        <div class="popup-box-footer">
            <input class="action-button close-button" type="button" value="Close" />
        </div>
    </div>
</div>
    `}}customElements.define("info-popup",InfoPopup);;
function CHART_CUSTOM_INDICATORS(b,t){function h(t){let e;var i=t.match(/"symbol":"([^"]+)"/),i=(e=null!==i?i[1]:t.replace(/["}]/g,"")).split(":");return e=2===i.length?i[1]+"."+window.ASSETS_INFO.exchangeCodeBySlug[i[0]]:e}function v(e,i,o){var n=Object.keys(o);for(let t=n.length-1;0<=t;t--){var r=n[t];if(r<i&&void 0!==o[r]&&o[r].hasOwnProperty(e))return Object.assign({},o[r][e])}return null}function S(t,e,i,o){let n=NaN;return n=void 0!==i&&void 0!==i[o]&&(o=(i=i[o])[3]-i[0],0<(i=t-e)&&o<0||i<0&&0<o)?i:n}for(var B=(t=t||{}).symbolCoin,F=t.chartSymbol,R=Common.symbolsInfoForSearch.find(function(t){return t.symbol===F}),o=void 0!==R?R.symbol_f2:void 0,e=t.futuresContractsForAggregatedIndicators||[],g=t.futuresContractsForAggregatedFundingRate||[],m=t.futuresContractsForAggregatedPredictedFundingRate||[],n=t.coinsCategoryForAggregatedIndicators||[],r=t.coinsCategorySelected||"ALL",d=t.exchangesForAggregatedOIIndicatorGlobal||[],u=t.exchangesForAggregatedLQIndicatorGlobal||[],p=t.exchangesForAggregatedVolumeIndicatorGlobal||[],_=t.exchangesForAggregatedVolumeSpotIndicatorGlobal||[],y=t.exchangesForAggregatedFRIndicatorGlobal||[],f=t.exchangesForAggregatedPFRIndicatorGlobal||[],k=t.coinExchangeForLendinRateIndicator||[],R=k.find(function(t){return t.coin===B}),x=t.futuresContractsForAggregatedOi||[],w=(x.push({symbol:"EXPIRED_CONTRACTS",name:"Expired Contracts",symbolOI:"EXPIRED_CONTRACTS_OI",symbolLQB:"EXPIRED_CONTRACTS_LQB",symbolLQS:"EXPIRED_CONTRACTS_LQS"}),t.futuresContractsForAggregatedLq||[]),l=(w.push({symbol:"EXPIRED_CONTRACTS",name:"Expired Contracts",symbolOI:"EXPIRED_CONTRACTS_OI",symbolLQB:"EXPIRED_CONTRACTS_LQB",symbolLQS:"EXPIRED_CONTRACTS_LQS"}),t.futuresContractsForAggregatedVolume||[]),C=(l.push({symbol:"EXPIRED_CONTRACTS",name:"Expired Contracts"}),t.marketsForAggregatedCVDSpot||[]),I=t.futuresContractsForAggregatedLongShortAccountsRatio||[],A=[],N=[],V=[],H=[],$=[],X=[],i=0;i<e.length;i++){var a=Object.assign({},e[i]);!0===a.hasOI&&("i"===a.fc_type?(A.push(a),"PERP"===a.fc_interval&&H.push(a)):"l"===a.fc_type&&(N.push(a),"PERP"===a.fc_interval)&&$.push(a),"PERP"===a.fc_interval&&X.push(a),V.push(a))}var O=[],P=[],D=[];ASSETS_INFO.marketsForAggregatedCvdFutsFcType={};for(i=0;i<e.length;i++){var s=Object.assign({},e[i]);"i"===s.fc_type?O.push(s):"l"===s.fc_type&&P.push(s),D.push(s),ASSETS_INFO.marketsForAggregatedCvdFutsFcType[s.symbol]=s.fc_type}var j=[],J=[],L=[];ASSETS_INFO.marketsForAggregatedLqCoinAndUsdDenominatedFcType={};for(i=0;i<e.length;i++){var c=Object.assign({},e[i]);!0===c.hasLQ&&("i"===c.fc_type?j.push(c):"l"===c.fc_type&&J.push(c),L.push(c),ASSETS_INFO.marketsForAggregatedLqCoinAndUsdDenominatedFcType[c.symbolLQB]=c.fc_type,ASSETS_INFO.marketsForAggregatedLqCoinAndUsdDenominatedFcType[c.symbolLQS]=c.fc_type)}t=[{name:"BuySellVolume",metainfo:{_metainfoVersion:51,id:"BuySellVolume@tv-basicstudies-1",name:"BuySellVolume",description:"Buy / Sell Volume",shortDescription:"BuySellVolume",scriptIdPart:"",is_price_study:!1,is_hidden_study:!1,isCustomIndicator:!0,isTVScript:!1,isTVScriptStub:!1,plots:[{id:"Buy Volume",type:"line"},{id:"Sell Volume",type:"line"},{id:"Delta",type:"line"},{id:"Delta/PriceChange Divergence",type:"line"},{id:"Cumulative Delta",type:"line"},{id:"delta_colorer",type:"colorer",target:"Delta",palette:"palette_delta_colorer"}],palettes:{palette_delta_colorer:{colors:[{name:"Positive"},{name:"Negative"}]}},inputs:[{id:"output_as",name:"Show Output As",type:"text",options:["value","percentage"],defval:"value"},{id:"cumulative_delta_length",name:"Cumulative Delta Length",type:"integer",defval:10}],defaults:{palettes:{palette_delta_colorer:{colors:[{color:"#2FA215",width:1,style:0},{color:"#e12c2c",width:1,style:0}]}},styles:{"Buy Volume":{visible:!0,plottype:5,color:"#2FA215",transparency:50,opacity:1,linewidth:1},"Sell Volume":{visible:!0,plottype:5,color:"#e12c2c",transparency:50,linewidth:1},Delta:{visible:!1,plottype:0,color:"#777",transparency:0,linewidth:1,histogramBase:0},"Delta/PriceChange Divergence":{visible:!0,plottype:5,color:"#b2b5be",transparency:0,linewidth:1,histogramBase:0},"Cumulative Delta":{visible:!0,plottype:0,color:"#ff9800",transparency:25,linewidth:1}},inputs:{output_as:"value",cumulative_delta_length:10},precision:0},styles:{"Buy Volume":{title:"Buy Volume",histogramBase:0},"Sell Volume":{title:"Sell Volume",histogramBase:0},Delta:{title:"Delta",histogramBase:0},"Delta/PriceChange Divergence":{title:"Delta/PriceChange Divergence",histogramBase:0},"Cumulative Delta":{title:"Cumulative Delta",histogramBase:0}},format:{type:"volume",precision:0}},constructor:function(){function g(t){return!isNaN(parseFloat(t))}this.init=function(t,e){this._context=t,this._input=e;t=h(b.Std.ticker(this._context))+"#buy_sell_volume";this._context.new_sym(t,b.Std.period(this._context))},this.main=function(t,e){this._context=t,this._input=e;var t=this._input(0),i=this._input(1),e=(this._context.select_sym(1),b.Std.open(this._context)),o=b.Std.high(this._context),n=this._context.new_var(b.Std.open(this._context)),r=this._context.new_var(b.Std.high(this._context)),a=n.get(i-1),s=r.get(i-1);if("value"===t){if(u=e,h=o,!isNaN(a)&&!isNaN(s))for(var l=0;l<i;l++){var c,d=n.get(l),p=r.get(l);g(d)&&g(p)&&(c=(c||0)+(d-p))}}else if("percentage"===t){var t=e+o,u=e/t*100,h=o/t*100;if(!isNaN(a)&&!isNaN(s))for(l=0;l<i;l++){var _,d=n.get(l),p=r.get(l);g(d)&&g(p)&&(c=(c||0)+(d/(_=d+p)*100-p/_*100))}}e=0<=u-h?0:1;return[u,-1*h,u-h,S(u,h,this._context.symbol.script._symbols[0].info.coinalyze_main_symbol_ohlcv,this._context.symbol.time),c,e]}}},{name:"BuySellCount",metainfo:{_metainfoVersion:51,id:"BuySellCount@tv-basicstudies-1",name:"BuySellCount",description:"Buy / Sell Count",shortDescription:"BuySellCount",scriptIdPart:"",is_price_study:!1,is_hidden_study:!1,isCustomIndicator:!0,isTVScript:!1,isTVScriptStub:!1,plots:[{id:"Buy Count",type:"line"},{id:"Sell Count",type:"line"},{id:"Delta",type:"line"},{id:"Total Count",type:"line"}],inputs:[{id:"output_as",name:"Show Output As",type:"text",options:["value","percentage"],defval:"value"}],defaults:{styles:{"Buy Count":{visible:!0,plottype:5,color:"#2FA215",transparency:50,linewidth:1},"Sell Count":{visible:!0,plottype:5,color:"#e12c2c",transparency:50,linewidth:1},Delta:{visible:!1,plottype:0,color:"#777",transparency:0,linewidth:1},"Total Count":{visible:!1,plottype:5,color:"#26a69a",transparency:50,linewidth:1}},inputs:{output_as:"value"},precision:0},styles:{"Buy Count":{title:"Buy Count",histogramBase:0},"Sell Count":{title:"Sell Count",histogramBase:0},Delta:{title:"Delta",histogramBase:0},"Total Count":{title:"Total Count",histogramBase:0}},format:{type:"volume",precision:0}},constructor:function(){this.init=function(t,e){this._context=t,this._input=e;t=h(b.Std.ticker(this._context))+"#buy_sell_count";this._context.new_sym(t,b.Std.period(this._context))},this.main=function(t,e){this._context=t,this._input=e;var i,o,t=this._input(0),e=(this._context.select_sym(1),b.Std.open(this._context)),n=b.Std.high(this._context);return"value"===t?(i=e,o=n):"percentage"===t&&(i=e/(t=e+n)*100,o=n/t*100),[i,-1*o,i-o,i+o]}}},{name:"BuySellPressure",metainfo:{_metainfoVersion:51,id:"BuySellPressure@tv-basicstudies-1",name:"BuySellPressure",description:"Buy Sell Pressure",shortDescription:"BuySellPressure",scriptIdPart:"",is_price_study:!1,is_hidden_study:!1,isCustomIndicator:!0,isTVScript:!1,isTVScriptStub:!1,plots:[{id:"Buy Volume Avg.",type:"line"},{id:"Sell Volume Avg.",type:"line"},{id:"Delta",type:"line"}],inputs:[{id:"average_length",name:"Average Length",type:"integer",defval:10},{id:"average_type",name:"Average Type",type:"text",options:["SMA","EMA"],defval:"SMA"}],defaults:{styles:{"Buy Volume Avg.":{visible:!0,plottype:0,color:"#2FA215",transparency:0,linewidth:1},"Sell Volume Avg.":{visible:!0,plottype:0,color:"#e12c2c",transparency:0,linewidth:1},Delta:{visible:!0,plottype:1,color:"#ff9800",transparency:0,linewidth:1}},inputs:{average_length:10,average_type:"SMA"},precision:0},styles:{"Buy Volume Avg.":{title:"Buy Volume Avg."},"Sell Volume Avg.":{title:"Sell Volume Avg."},Delta:{title:"Delta",histogramBase:0}},format:{type:"volume",precision:0}},constructor:function(){this.init=function(t,e){this._context=t,this._input=e;t=h(b.Std.ticker(this._context))+"#buy_sell_pressure";this._context.new_sym(t,b.Std.period(this._context))},this.main=function(t,e){this._context=t,this._input=e;var i,o,t=this._input(0),e=this._input(1).toLowerCase(),n=(this._context.select_sym(1),this._context.new_var(b.Std.open(this._context))),r=this._context.new_var(b.Std.high(this._context));return"sma"===e?(i=b.Std.sma(n,t,this._context),o=b.Std.sma(r,t,this._context)):"ema"===e&&(i=b.Std.ema(n,t,this._context),o=b.Std.ema(r,t,this._context)),[i,o,i-o]}}},{name:"ALMA_ENV",metainfo:{_metainfoVersion:51,id:"ALMA_ENV@tv-basicstudies-1",name:"ALMA_ENV",description:"Arnaud Legoux Moving Average With Envelope",shortDescription:"ALMA_ENV",scriptIdPart:"",is_price_study:!0,is_hidden_study:!1,isCustomIndicator:!0,isTVScript:!1,isTVScriptStub:!1,plots:[{id:"Upper",type:"line"},{id:"Median",type:"line"},{id:"Lower",type:"line"}],area:[{name:"Upper"},{name:"Lower"}],inputs:[{id:"window_size",name:"Window Size",type:"integer",defval:9},{id:"offset",name:"Offset",type:"float",defval:.85},{id:"sigma",name:"Sigma",type:"integer",defval:6},{id:"envelope_percent",name:"Envelope Percent",type:"integer",defval:10}],defaults:{styles:{Upper:{visible:!0,plottype:0,color:"#3C78D8",transparency:0,linewidth:1},Median:{visible:!0,plottype:0,color:"#ed9b49",transparency:0,linewidth:1},Lower:{visible:!0,plottype:0,color:"#3C78D8",transparency:0,linewidth:1}},areaBackground:{backgroundColor:"#3C78D8",fillBackground:!0,transparency:75},inputs:{window_size:9,offset:.85,sigma:6,envelope_percent:10},precision:2},styles:{Upper:{title:"Upper"},Median:{title:"Median"},Lower:{title:"Lower"}},format:{type:"price",precision:2}},constructor:function(){this.init=function(t,e){this._context=t,this._input=e},this.main=function(t,e){this._context=t,this._input=e;var t=this._input(0),e=this._input(1),i=this._input(2),o=this._input(3),n=(this._context.select_sym(0),this._context.new_var(b.Std.close(this._context))),n=b.Std.alma(n,t,e,i,this._context);return[n+n*(o/100),n,n-n*(o/100)]}}},{name:"CVD",metainfo:{_metainfoVersion:51,id:"CVD@tv-basicstudies-1",name:"CVD",description:"Cumulative Volume Delta",shortDescription:"CVD",scriptIdPart:"",is_price_study:!1,is_hidden_study:!1,isCustomIndicator:!0,isTVScript:!1,isTVScriptStub:!1,plots:[{id:"Buy Volume",type:"line"},{id:"Sell Volume",type:"line"},{id:"Delta",type:"line"},{id:"Cumulative Delta",type:"line"},{id:"Delta/PriceChange Divergence",type:"line"},{id:"delta_colorer",type:"colorer",target:"Delta",palette:"palette_delta_colorer"}],palettes:{palette_delta_colorer:{colors:[{name:"Positive"},{name:"Negative"}]}},inputs:[{id:"start_bar_offset",name:"Only last N bars (0 for all)",type:"integer",defval:0},{id:"symbol",name:"Symbol",type:"symbol",optional:!0}],defaults:{palettes:{palette_delta_colorer:{colors:[{color:"#2FA215",width:1,style:0},{color:"#e12c2c",width:1,style:0}]}},styles:{"Buy Volume":{visible:!1,plottype:5,color:"#2FA215",transparency:50,opacity:1,linewidth:1},"Sell Volume":{visible:!1,plottype:5,color:"#e12c2c",transparency:50,linewidth:1},Delta:{visible:!1,plottype:0,color:"#777",transparency:0,linewidth:1,histogramBase:0},"Cumulative Delta":{visible:!0,plottype:0,color:"#ff9800",transparency:25,linewidth:1},"Delta/PriceChange Divergence":{visible:!1,plottype:5,color:"#b2b5be",transparency:0,linewidth:1,histogramBase:0}},inputs:{start_bar_offset:0,symbol:""},precision:0}},constructor:function(){this.init=function(t,e){this._context=t,this._input=e,t=this._input(1)?h(this._input(1)):h(o),this.selectedSymbol=t;e=h(b.Std.ticker(this._context));this._context.new_sym(e+","+t+"#aggregated_cvd_spot",b.Std.period(this._context))},this.main=function(t,e){try{this._context=t,this._input=e;var i,o,n,r,a,s,l,c,d,p,u,h=parseInt(this._input(0)),_=this.selectedSymbol,g=(this._context.select_sym(1),[NaN,NaN,NaN,NaN,NaN,NaN]),m=this._context.symbol.time;return isNaN(m)?g:void 0!==(o=(i=this._context.symbol.info.coinalyze_indicator_data)[m])&&(a=!1,void(r=n=0)!==(s=o[_]))&&(a=null!==s.volume_buy||null!==s.volume_sell||a)&&(n=s.volume_buy,r=s.volume_sell,0==h||0<=this._context.symbol.index&&(l=Object.keys(i).length,!(this._context.symbol.index+1>l))&&(c=l-h-1,this._context.symbol.index>=c))?(p=0<=(d=n-r)?0:1,u=this._context.new_var(d),[n,-1*r,d,b.Std.cum(u,this._context),S(n,r,this._context.symbol.script._symbols[0].info.coinalyze_main_symbol_ohlcv,this._context.symbol.time),p]):g}catch(t){console.log("CVD.main() tc error",t)}}}},{name:"AggregatedCVDSpot",metainfo:{_metainfoVersion:51,id:"AggregatedCVDSpot@tv-basicstudies-1",name:"AggregatedCVDSpot",description:"Aggregated CVD Spot",shortDescription:"Aggregated CVD Spot",scriptIdPart:"",is_price_study:!1,is_hidden_study:!1,isCustomIndicator:!0,plots:[{id:"Volume",type:"line"},{id:"Buy Volume",type:"line"},{id:"Sell Volume",type:"line"},{id:"Delta",type:"line"},{id:"Cumulative Delta",type:"line"},{id:"Delta/PriceChange Divergence",type:"line"},{id:"delta_colorer",type:"colorer",target:"Delta",palette:"palette_delta_colorer"}],palettes:{palette_delta_colorer:{colors:[{name:"Positive"},{name:"Negative"}]}},inputs:function(){for(var t=[{id:"start_bar_offset",name:"Only last N bars (0 for all)",type:"integer",defval:0},{id:"convert_to_usd",name:"Convert to USD",type:"bool"}],e=0;e<C.length;e++){var i=C[e];t.push({id:"market#"+i.symbol,name:i.name,type:"bool"})}return t}(),defaults:{palettes:{palette_delta_colorer:{colors:[{color:"#2FA215",width:1,style:0},{color:"#e12c2c",width:1,style:0}]}},styles:{Volume:{visible:!1,plottype:5,color:"#26a69a",transparency:50,linewidth:1},"Buy Volume":{visible:!1,plottype:5,color:"#2FA215",transparency:50,opacity:1,linewidth:1},"Sell Volume":{visible:!1,plottype:5,color:"#e12c2c",transparency:50,linewidth:1},Delta:{visible:!1,plottype:0,color:"#777",transparency:0,linewidth:1,histogramBase:0},"Cumulative Delta":{visible:!0,plottype:0,color:"#ff9800",transparency:25,linewidth:1},"Delta/PriceChange Divergence":{visible:!1,plottype:5,color:"#b2b5be",transparency:0,linewidth:1,histogramBase:0}},inputs:function(){for(var t={start_bar_offset:0,convert_to_usd:!1},e=0;e<C.length;e++)t["market#"+C[e].symbol]=C[e].selectedByDefault;return t}(),precision:0}},constructor:function(){this.init=function(t,e){this._context=t,this._input=e;t=h(b.Std.ticker(this._context))+","+C.map(function(t){return t.symbol}).join(",")+"#aggregated_cvd_spot";this._context.new_sym(t,b.Std.period(this._context))},this.main=function(t,e){try{this._context=t,this._input=e;var i=parseInt(this._input(0)),o=this._input(1),n=(this._context.select_sym(1),[NaN,NaN,NaN,NaN,NaN,NaN,NaN]),r=this._context.symbol.time;if(isNaN(r))return n;var a=this._context.symbol.info.coinalyze_indicator_data,s=a[r];if(void 0===s)return n;for(var l,c,d,p,u,h=0,_=0,g=!1,m=!0===o?"_usd":"",y=0;y<C.length;y++){var v,f=C[y];this._input(y+2)&&void 0!==(v=s[f.symbol])&&(null===v.volume_buy&&null===v.volume_sell||(g=!0),h+=v["volume_buy"+m],_+=v["volume_sell"+m])}return g?0==i||0<=this._context.symbol.index&&(l=Object.keys(a).length,!(this._context.symbol.index+1>l))&&(c=l-i-1,this._context.symbol.index>=c)?(p=0<=(d=h-_)?0:1,u=this._context.new_var(d),[h+_,h,-1*_,h-_,b.Std.cum(u,this._context),S(h,_,this._context.symbol.script._symbols[0].info.coinalyze_main_symbol_ohlcv,this._context.symbol.time),p]):n:n}catch(t){console.log("AggregatedCVDSpot.main() tc error",t)}}}},{name:"AggregatedCvdFuts",metainfo:{_metainfoVersion:51,id:"AggregatedCvdFuts@tv-basicstudies-1",name:"AggregatedCvdFuts",description:"Aggregated CVD Futures",shortDescription:"Aggregated CVD Futures",scriptIdPart:"",is_price_study:!1,is_hidden_study:!1,isCustomIndicator:!0,plots:[{id:"Volume",type:"line"},{id:"Buy Volume",type:"line"},{id:"Sell Volume",type:"line"},{id:"Delta",type:"line"},{id:"Cumulative Delta",type:"line"},{id:"Delta/PriceChange Divergence",type:"line"},{id:"delta_colorer",type:"colorer",target:"Delta",palette:"palette_delta_colorer"}],palettes:{palette_delta_colorer:{colors:[{name:"Positive"},{name:"Negative"}]}},inputs:function(){for(var t=[{id:"start_bar_offset",name:"Only last N bars (0 for all)",type:"integer",defval:0},{id:"convert_to_usd",name:"Convert to USD",type:"bool"}],e=0;e<D.length;e++){var i=D[e];t.push({id:"market#"+i.symbol,name:`${i.nameWithoutExchange} (${"l"===i.fc_type?"stable-m":"coin-m"}) - `+i.exchangeName,type:"bool"})}return t}(),defaults:{palettes:{palette_delta_colorer:{colors:[{color:"#2FA215",width:1,style:0},{color:"#e12c2c",width:1,style:0}]}},styles:{Volume:{visible:!1,plottype:5,color:"#26a69a",transparency:50,linewidth:1},"Buy Volume":{visible:!1,plottype:5,color:"#2FA215",transparency:50,opacity:1,linewidth:1},"Sell Volume":{visible:!1,plottype:5,color:"#e12c2c",transparency:50,linewidth:1},Delta:{visible:!1,plottype:0,color:"#777",transparency:0,linewidth:1,histogramBase:0},"Cumulative Delta":{visible:!0,plottype:0,color:"#ff9800",transparency:25,linewidth:1},"Delta/PriceChange Divergence":{visible:!1,plottype:5,color:"#b2b5be",transparency:0,linewidth:1,histogramBase:0}},inputs:function(){for(var t={start_bar_offset:0,convert_to_usd:!1},e=0;e<D.length;e++)t["market#"+D[e].symbol]=!0;return t}(),precision:0}},constructor:function(){this.init=function(t,e){this._context=t,this._input=e;t=h(b.Std.ticker(this._context))+","+D.map(function(t){return t.symbol}).join(",")+"#aggregated_cvd_futs";this._context.new_sym(t,b.Std.period(this._context))},this.main=function(t,e){try{this._context=t,this._input=e;var i=parseInt(this._input(0)),o=this._input(1),n=(this._context.select_sym(1),[NaN,NaN,NaN,NaN,NaN,NaN,NaN]),r=this._context.symbol.time;if(isNaN(r))return n;var a=this._context.symbol.info.coinalyze_indicator_data,s=a[r];if(void 0===s)return n;for(var l,c,d,p,u,h=0,_=0,g=!1,m=!0===o?"_usd":"",y=0;y<D.length;y++){var v,f=D[y];this._input(y+2)&&void 0!==(v=s[f.symbol])&&(null===v.volume_buy&&null===v.volume_sell||(g=!0),h+=v["volume_buy"+m],_+=v["volume_sell"+m])}return g?0==i||0<=this._context.symbol.index&&(l=Object.keys(a).length,!(this._context.symbol.index+1>l))&&(c=l-i-1,this._context.symbol.index>=c)?(p=0<=(d=h-_)?0:1,u=this._context.new_var(d),[h+_,h,-1*_,h-_,b.Std.cum(u,this._context),S(h,_,this._context.symbol.script._symbols[0].info.coinalyze_main_symbol_ohlcv,this._context.symbol.time),p]):n:n}catch(t){console.log("AggregatedCvdFuts.main() tc error",t)}}}},{name:"AggregatedCvdFutsUsdDenominated",metainfo:{_metainfoVersion:51,id:"AggregatedCvdFutsUsdDenominated@tv-basicstudies-1",name:"AggregatedCvdFutsUsdDenominated",description:"Aggregated CVD Futs. COIN-margined Contracts",shortDescription:"Aggregated CVD Futs. COIN-margined Contracts",scriptIdPart:"",is_price_study:!1,is_hidden_study:!1,isCustomIndicator:!0,plots:[{id:"Volume",type:"line"},{id:"Buy Volume",type:"line"},{id:"Sell Volume",type:"line"},{id:"Delta",type:"line"},{id:"Cumulative Delta",type:"line"},{id:"Delta/PriceChange Divergence",type:"line"},{id:"delta_colorer",type:"colorer",target:"Delta",palette:"palette_delta_colorer"}],palettes:{palette_delta_colorer:{colors:[{name:"Positive"},{name:"Negative"}]}},inputs:function(){for(var t=[{id:"start_bar_offset",name:"Only last N bars (0 for all)",type:"integer",defval:0}],e=0;e<O.length;e++){var i=O[e];t.push({id:"market#"+i.symbol,name:i.name,type:"bool"})}return t}(),defaults:{palettes:{palette_delta_colorer:{colors:[{color:"#2FA215",width:1,style:0},{color:"#e12c2c",width:1,style:0}]}},styles:{Volume:{visible:!1,plottype:5,color:"#26a69a",transparency:50,linewidth:1},"Buy Volume":{visible:!1,plottype:5,color:"#2FA215",transparency:50,opacity:1,linewidth:1},"Sell Volume":{visible:!1,plottype:5,color:"#e12c2c",transparency:50,linewidth:1},Delta:{visible:!1,plottype:0,color:"#777",transparency:0,linewidth:1,histogramBase:0},"Cumulative Delta":{visible:!0,plottype:0,color:"#ff9800",transparency:25,linewidth:1},"Delta/PriceChange Divergence":{visible:!1,plottype:5,color:"#b2b5be",transparency:0,linewidth:1,histogramBase:0}},inputs:function(){for(var t={start_bar_offset:0},e=0;e<O.length;e++)t["market#"+O[e].symbol]=!0;return t}(),precision:0}},constructor:function(){this.init=function(t,e){this._context=t,this._input=e;t=h(b.Std.ticker(this._context))+","+O.map(function(t){return t.symbol}).join(",")+"#aggregated_cvd_futs_usd_denominated";this._context.new_sym(t,b.Std.period(this._context))},this.main=function(t,e){try{this._context=t,this._input=e;var i=parseInt(this._input(0)),o=(this._context.select_sym(1),[NaN,NaN,NaN,NaN,NaN,NaN,NaN]),n=this._context.symbol.time;if(isNaN(n))return o;var r=this._context.symbol.info.coinalyze_indicator_data,a=r[n];if(void 0===a)return o;for(var s,l,c,d,p,u=0,h=0,_=!1,g=0;g<O.length;g++){var m,y=O[g];this._input(g+1)&&void 0!==(m=a[y.symbol])&&(null===m.volume_buy&&null===m.volume_sell||(_=!0),u+=m.volume_buy,h+=m.volume_sell)}return _?0==i||0<=this._context.symbol.index&&(s=Object.keys(r).length,!(this._context.symbol.index+1>s))&&(l=s-i-1,this._context.symbol.index>=l)?(d=0<=(c=u-h)?0:1,p=this._context.new_var(c),[u+h,u,-1*h,u-h,b.Std.cum(p,this._context),S(u,h,this._context.symbol.script._symbols[0].info.coinalyze_main_symbol_ohlcv,this._context.symbol.time),d]):o:o}catch(t){console.log("AggregatedCvdFutsUsdDenominated.main() tc error",t)}}}},{name:"AggregatedCvdFutsCoinDenominated",metainfo:{_metainfoVersion:51,id:"AggregatedCvdFutsCoinDenominated@tv-basicstudies-1",name:"AggregatedCvdFutsCoinDenominated",description:"Aggregated CVD Futs. STABLECOIN-margined Contracts",shortDescription:"Aggregated CVD Futs. STABLECOIN-margined Contracts",scriptIdPart:"",is_price_study:!1,is_hidden_study:!1,isCustomIndicator:!0,plots:[{id:"Volume",type:"line"},{id:"Buy Volume",type:"line"},{id:"Sell Volume",type:"line"},{id:"Delta",type:"line"},{id:"Cumulative Delta",type:"line"},{id:"Delta/PriceChange Divergence",type:"line"},{id:"delta_colorer",type:"colorer",target:"Delta",palette:"palette_delta_colorer"}],palettes:{palette_delta_colorer:{colors:[{name:"Positive"},{name:"Negative"}]}},inputs:function(){for(var t=[{id:"start_bar_offset",name:"Only last N bars (0 for all)",type:"integer",defval:0},{id:"convert_to_usd",name:"Convert to USD",type:"bool"}],e=0;e<P.length;e++){var i=P[e];t.push({id:"market#"+i.symbol,name:i.name,type:"bool"})}return t}(),defaults:{palettes:{palette_delta_colorer:{colors:[{color:"#2FA215",width:1,style:0},{color:"#e12c2c",width:1,style:0}]}},styles:{Volume:{visible:!1,plottype:5,color:"#26a69a",transparency:50,linewidth:1},"Buy Volume":{visible:!1,plottype:5,color:"#2FA215",transparency:50,opacity:1,linewidth:1},"Sell Volume":{visible:!1,plottype:5,color:"#e12c2c",transparency:50,linewidth:1},Delta:{visible:!1,plottype:0,color:"#777",transparency:0,linewidth:1,histogramBase:0},"Cumulative Delta":{visible:!0,plottype:0,color:"#ff9800",transparency:25,linewidth:1},"Delta/PriceChange Divergence":{visible:!1,plottype:5,color:"#b2b5be",transparency:0,linewidth:1,histogramBase:0}},inputs:function(){for(var t={start_bar_offset:0,convert_to_usd:!1},e=0;e<P.length;e++)t["market#"+P[e].symbol]=!0;return t}(),precision:0}},constructor:function(){this.init=function(t,e){this._context=t,this._input=e;t=h(b.Std.ticker(this._context))+","+P.map(function(t){return t.symbol}).join(",")+"#aggregated_cvd_futs_coin_denominated";this._context.new_sym(t,b.Std.period(this._context))},this.main=function(t,e){try{this._context=t,this._input=e;var i=parseInt(this._input(0)),o=this._input(1),n=(this._context.select_sym(1),[NaN,NaN,NaN,NaN,NaN,NaN,NaN]),r=this._context.symbol.time;if(isNaN(r))return n;var a=this._context.symbol.info.coinalyze_indicator_data,s=a[r];if(void 0===s)return n;for(var l,c,d,p,u,h=0,_=0,g=!1,m=!0===o?"_usd":"",y=0;y<P.length;y++){var v,f=P[y];this._input(y+2)&&void 0!==(v=s[f.symbol])&&(null===v.volume_buy&&null===v.volume_sell||(g=!0),h+=v["volume_buy"+m],_+=v["volume_sell"+m])}return g?0==i||0<=this._context.symbol.index&&(l=Object.keys(a).length,!(this._context.symbol.index+1>l))&&(c=l-i-1,this._context.symbol.index>=c)?(p=0<=(d=h-_)?0:1,u=this._context.new_var(d),[h+_,h,-1*_,h-_,b.Std.cum(u,this._context),S(h,_,this._context.symbol.script._symbols[0].info.coinalyze_main_symbol_ohlcv,this._context.symbol.time),p]):n:n}catch(t){console.log("AggregatedCvdFutsCoinDenominated.main() tc error",t)}}}},{name:"Liquidations",metainfo:{_metainfoVersion:51,id:"Liquidations@tv-basicstudies-1",name:"Liquidations",description:"Liquidations",shortDescription:"Liquidations",scriptIdPart:"",is_price_study:!1,is_hidden_study:!1,isCustomIndicator:!0,plots:[{id:"shorts_liquidation",type:"line"},{id:"longs_liquidation",type:"line"}],inputs:[{id:"overlap_bars",name:"Overlap bars",type:"bool"},{id:"contract",name:"Contract",type:"symbol",optional:!0}],defaults:{styles:{shorts_liquidation:{plottype:5,color:"#2FA215",transparency:50,opacity:1,linewidth:1},longs_liquidation:{plottype:5,color:"#e12c2c",transparency:50,linewidth:1}},inputs:{overlap_bars:!1,contract:""},precision:0},styles:{shorts_liquidation:{title:"Shorts liquidation (Buy)",histogramBase:0},longs_liquidation:{title:"Longs liquidation (Sell)",histogramBase:0}}},constructor:function(){this.init=function(t,e){this._context=t,this._input=e;var t=(this._input(1)?h(this._input(1)):h(o)).split("."),e=t[0]+"_LQB."+t[1],t=t[0]+"_LQS."+t[1],i=h(b.Std.ticker(this._context));this._context.new_sym(i+","+e+","+t+"#liquidations",b.Std.period(this._context)),this._symbolLQB=e,this._symbolLQS=t},this.main=function(t,e){try{this._context=t,this._input=e;var i,o,n,r=this._input(0),a=(this._context.select_sym(1),[0,0]),s=this._context.symbol.time;return isNaN(s)?a:void 0===(i=this._context.symbol.info.coinalyze_indicator_data[s])?a:(o=i[this._symbolLQB]?i[this._symbolLQB].lq_volume:0,n=i[this._symbolLQS]?i[this._symbolLQS].lq_volume:0,[o,r?n:-1*n])}catch(t){console.log("Liquidations.main() tc error",t)}}}},{name:"AggregatedLiquidations",metainfo:{_metainfoVersion:51,id:"AggregatedLiquidations@tv-basicstudies-1",name:"AggregatedLiquidations",description:"Aggregated Liquidations",shortDescription:"Aggregated Liquidations",scriptIdPart:"",is_price_study:!1,is_hidden_study:!0,isCustomIndicator:!0,plots:[{id:"shorts_liquidation",type:"line"},{id:"longs_liquidation",type:"line"}],inputs:function(){for(var t=[{id:"overlap_bars",name:"Overlap bars",type:"bool"}],e=0;e<w.length;e++){var i=w[e];t.push({id:"market#"+i.symbol,name:i.name,type:"bool"})}return t}(),defaults:{styles:{shorts_liquidation:{plottype:5,color:"#2FA215",transparency:50,opacity:1,linewidth:1},longs_liquidation:{plottype:5,color:"#e12c2c",transparency:50,linewidth:1}},inputs:function(){for(var t={overlap_bars:!1},e=0;e<w.length;e++)t["market#"+w[e].symbol]=!0;return t}(),precision:0},styles:{shorts_liquidation:{title:"Shorts liquidation (Buy)",histogramBase:0},longs_liquidation:{title:"Longs liquidation (Sell)",histogramBase:0}}},constructor:function(){this.init=function(t,e){this._context=t,this._input=e;t=h(b.Std.ticker(this._context))+","+w.map(function(t){return t.symbolLQB+","+t.symbolLQS}).join(",")+"#aggregated_lq";this._context.new_sym(t,b.Std.period(this._context))},this.main=function(t,e){try{this._context=t,this._input=e;var i=this._input(0),o=(this._context.select_sym(1),[0,0]),n=this._context.symbol.time;if(isNaN(n))return o;var r=this._context.symbol.info.coinalyze_indicator_data[n];if(void 0===r)return o;for(var a=0,s=0,l=0;l<w.length;l++){var c,d,p=w[l];this._input(l+1)&&(c=r[p.symbolLQB],d=r[p.symbolLQS],a+=c?c.lq_volume:0,s+=d?d.lq_volume:0)}return[a,i?s:-1*s]}catch(t){console.log("AggregatedLq.main() tc error",t)}}}},{name:"AggregatedLiquidationsGlobal",metainfo:{_metainfoVersion:51,id:"AggregatedLiquidationsGlobal@tv-basicstudies-1",name:"AggregatedLiquidationsGlobal",description:"Aggregated Liquidations Global",shortDescription:"Aggregated Liquidations Global",scriptIdPart:"",is_price_study:!1,is_hidden_study:!0,isCustomIndicator:!0,plots:[{id:"shorts_liquidation",type:"line"},{id:"longs_liquidation",type:"line"}],inputs:function(){for(var t=[{id:"overlap_bars",name:"Overlap bars",type:"bool"},{id:"coins_category",name:"Coins category",type:"text",options:n,defval:r}],e=0;e<u.length;e++){var i=u[e];t.push({id:"exchange_"+i.exchange,name:i.name,type:"bool"})}return t}(),defaults:{styles:{shorts_liquidation:{plottype:5,color:"#2FA215",transparency:50,opacity:1,linewidth:1},longs_liquidation:{plottype:5,color:"#e12c2c",transparency:50,linewidth:1}},inputs:function(){for(var t={overlap_bars:!1,coins_category:r},e=0;e<u.length;e++)t["exchange_"+u[e].exchange]=!0;return t}(),precision:0},styles:{shorts_liquidation:{title:"Shorts liquidation (Buy)",histogramBase:0},longs_liquidation:{title:"Longs liquidation (Sell)",histogramBase:0}}},constructor:function(){this.init=function(t,e){this._context=t,this._input=e;t=h(b.Std.ticker(this._context))+","+this._input(1)+","+u.map(t=>t.exchange).join(",")+"#aggregated_lq_global";this._context.new_sym(t,b.Std.period(this._context))},this.main=function(t,e){try{this._context=t,this._input=e;var i=this._input(0),o=(this._input(1),this._context.select_sym(1),[0,0]),n=this._context.symbol.time;if(isNaN(n))return o;var r=this._context.symbol.info.coinalyze_indicator_data[n];if(void 0===r)return o;for(var a=0,s=0,l=!1,c=0;c<u.length;c++){var d,p=u[c];this._input(c+2)&&void 0!==(d=r[p.exchange])&&(l=!0,a+=d[0],s+=d[1])}return l?[a,i?s:-1*s]:o}catch(t){console.log("AggregatedLqGlobal.main() tc error",t)}}}},{name:"AggregatedLqUsdDenominated",metainfo:{_metainfoVersion:51,id:"AggregatedLqUsdDenominated@tv-basicstudies-1",name:"AggregatedLqUsdDenominated",description:"Aggregated Liquidations COIN-margined Contracts",shortDescription:"Aggregated Liquidations COIN-margined Contracts",scriptIdPart:"",is_price_study:!1,is_hidden_study:!1,isCustomIndicator:!0,plots:[{id:"shorts_liquidation",type:"line"},{id:"longs_liquidation",type:"line"}],inputs:function(){for(var t=[{id:"overlap_bars",name:"Overlap bars",type:"bool"}],e=0;e<j.length;e++){var i=j[e];t.push({id:"market#"+i.symbol,name:i.name,type:"bool"})}return t}(),defaults:{styles:{shorts_liquidation:{plottype:5,color:"#2FA215",transparency:50,opacity:1,linewidth:1},longs_liquidation:{plottype:5,color:"#e12c2c",transparency:50,linewidth:1}},inputs:function(){for(var t={overlap_bars:!1},e=0;e<j.length;e++)t["market#"+j[e].symbol]=!0;return t}(),precision:0},styles:{shorts_liquidation:{title:"Shorts liquidation (Buy)",histogramBase:0},longs_liquidation:{title:"Longs liquidation (Sell)",histogramBase:0}}},constructor:function(){this.init=function(t,e){this._context=t,this._input=e;t=h(b.Std.ticker(this._context))+","+j.map(function(t){return t.symbolLQB+","+t.symbolLQS}).join(",")+"#aggregated_lq_usd_denominated";this._context.new_sym(t,b.Std.period(this._context))},this.main=function(t,e){try{this._context=t,this._input=e;var i=this._input(0),o=(this._context.select_sym(1),[0,0]),n=this._context.symbol.time;if(isNaN(n))return o;var r=this._context.symbol.info.coinalyze_indicator_data[n];if(void 0===r)return o;for(var a=0,s=0,l=0;l<j.length;l++){var c,d,p=j[l];this._input(l+1)&&(c=r[p.symbolLQB],d=r[p.symbolLQS],a+=c?c.lq_volume:0,s+=d?d.lq_volume:0)}return[a,i?s:-1*s]}catch(t){console.log("AggregatedLqUsdDenominated.main() tc error",t)}}}},{name:"AggregatedLqCoinDenominated",metainfo:{_metainfoVersion:51,id:"AggregatedLqCoinDenominated@tv-basicstudies-1",name:"AggregatedLqCoinDenominated",description:"Aggregated Liquidations STABLECOIN-margined Contracts",shortDescription:"Aggregated Liquidations STABLECOIN-margined Contracts",scriptIdPart:"",is_price_study:!1,is_hidden_study:!1,isCustomIndicator:!0,plots:[{id:"shorts_liquidation",type:"line"},{id:"longs_liquidation",type:"line"}],inputs:function(){for(var t=[{id:"overlap_bars",name:"Overlap bars",type:"bool"},{id:"convert_to_usd",name:"Convert to USD",type:"bool"}],e=0;e<J.length;e++){var i=J[e];t.push({id:"market#"+i.symbol,name:i.name,type:"bool"})}return t}(),defaults:{styles:{shorts_liquidation:{plottype:5,color:"#2FA215",transparency:50,opacity:1,linewidth:1},longs_liquidation:{plottype:5,color:"#e12c2c",transparency:50,linewidth:1}},inputs:function(){for(var t={overlap_bars:!1,convert_to_usd:!1},e=0;e<J.length;e++)t["market#"+J[e].symbol]=!0;return t}(),precision:0},styles:{shorts_liquidation:{title:"Shorts liquidation (Buy)",histogramBase:0},longs_liquidation:{title:"Longs liquidation (Sell)",histogramBase:0}}},constructor:function(){this.init=function(t,e){this._context=t,this._input=e;t=h(b.Std.ticker(this._context))+","+J.map(function(t){return t.symbolLQB+","+t.symbolLQS}).join(",")+"#aggregated_lq_coin_denominated";this._context.new_sym(t,b.Std.period(this._context))},this.main=function(t,e){try{this._context=t,this._input=e;var i=this._input(0),o=this._input(1),n=(this._context.select_sym(1),[0,0]),r=this._context.symbol.time;if(isNaN(r))return n;var a=this._context.symbol.info.coinalyze_indicator_data[r];if(void 0===a)return n;for(var s=0,l=0,c=!0===o?"lq_volume_usd":"lq_volume",d=0;d<J.length;d++){var p,u,h=J[d];this._input(d+2)&&(p=a[h.symbolLQB],u=a[h.symbolLQS],s+=p?p[c]:0,l+=u?u[c]:0)}return[s,i?l:-1*l]}catch(t){console.log("AggregatedLqCoinDenominated.main() tc error",t)}}}},{name:"AggregatedLqCoinAndUsdDenominated",metainfo:{_metainfoVersion:51,id:"AggregatedLqCoinAndUsdDenominated@tv-basicstudies-1",name:"AggregatedLqCoinAndUsdDenominated",description:"Aggregated Liquidations STABLECOIN+COIN-margined Contracts",shortDescription:"Aggregated Liquidations STABLECOIN+COIN-margined Contracts",scriptIdPart:"",is_price_study:!1,is_hidden_study:!1,isCustomIndicator:!0,plots:[{id:"shorts_liquidation",type:"line"},{id:"longs_liquidation",type:"line"}],inputs:function(){for(var t=[{id:"overlap_bars",name:"Overlap bars",type:"bool"},{id:"convert_to_usd",name:"Convert to USD",type:"bool"}],e=0;e<L.length;e++){var i=L[e];t.push({id:"market#"+i.symbol,name:`${i.nameWithoutExchange} (${"l"===i.fc_type?"stable-m":"coin-m"}) - `+i.exchangeName,type:"bool"})}return t}(),defaults:{styles:{shorts_liquidation:{plottype:5,color:"#2FA215",transparency:50,opacity:1,linewidth:1},longs_liquidation:{plottype:5,color:"#e12c2c",transparency:50,linewidth:1}},inputs:function(){for(var t={overlap_bars:!1,convert_to_usd:!1},e=0;e<L.length;e++)t["market#"+L[e].symbol]=!0;return t}(),precision:0},styles:{shorts_liquidation:{title:"Shorts liquidation (Buy)",histogramBase:0},longs_liquidation:{title:"Longs liquidation (Sell)",histogramBase:0}}},constructor:function(){this.init=function(t,e){this._context=t,this._input=e;t=h(b.Std.ticker(this._context))+","+L.map(function(t){return t.symbolLQB+","+t.symbolLQS}).join(",")+"#aggregated_lq_coin_and_usd_denominated";this._context.new_sym(t,b.Std.period(this._context))},this.main=function(t,e){try{this._context=t,this._input=e;var i=this._input(0),o=this._input(1),n=(this._context.select_sym(1),[0,0]),r=this._context.symbol.time;if(isNaN(r))return n;var a=this._context.symbol.info.coinalyze_indicator_data[r];if(void 0===a)return n;for(var s=0,l=0,c=!0===o?"lq_volume_usd":"lq_volume",d=0;d<L.length;d++){var p,u,h=L[d];this._input(d+2)&&(p=a[h.symbolLQB],u=a[h.symbolLQS],s+=p?p[c]:0,l+=u?u[c]:0)}return[s,i?l:-1*l]}catch(t){console.log("AggregatedLqCoinAndUsdDenominated.main() tc error",t)}}}},{name:"AggregatedVolume",metainfo:{_metainfoVersion:51,id:"AggregatedVolume@tv-basicstudies-1",name:"AggregatedVolume",description:"Aggregated Volume",shortDescription:"Aggregated Volume",scriptIdPart:"",is_price_study:!1,is_hidden_study:!0,isCustomIndicator:!0,plots:[{id:"volume",type:"line"}],inputs:function(){for(var t=[],e=0;e<l.length;e++){var i=l[e];t.push({id:"market#"+i.symbol,name:i.name,type:"bool"})}return t}(),defaults:{styles:{volume:{visible:!0,plottype:5,color:"#26a69a",transparency:50,linewidth:1}},inputs:function(){for(var t={},e=0;e<l.length;e++)t["market#"+l[e].symbol]=!0;return t}(),precision:0},styles:{volume:{title:"Volume",histogramBase:0}}},constructor:function(){this.init=function(t,e){this._context=t,this._input=e;t=h(b.Std.ticker(this._context))+","+l.map(function(t){return t.symbol}).join(",")+"#aggregated_volume";this._context.new_sym(t,b.Std.period(this._context))},this.main=function(t,e){try{this._context=t,this._input=e,this._context.select_sym(1);var i=[NaN],o=this._context.symbol.time;if(isNaN(o))return i;var n=this._context.symbol.info.coinalyze_indicator_data[o];if(void 0===n)return i;for(var r=0,a=0;a<l.length;a++){var s=l[a];this._input(a)&&(r+=n[s.symbol]||0)}return[r]}catch(t){console.log("AggregatedVolume.main() tc error",t)}}}},{name:"AggregatedVolumeSpot",metainfo:{_metainfoVersion:51,id:"AggregatedVolumeSpot@tv-basicstudies-1",name:"AggregatedVolumeSpot",description:"Aggregated Volume Spot",shortDescription:"Aggregated Volume Spot",scriptIdPart:"",is_price_study:!1,is_hidden_study:!0,isCustomIndicator:!0,plots:[{id:"volume",type:"line"}],inputs:function(){for(var t=[],e=0;e<C.length;e++){var i=C[e];t.push({id:"market#"+i.symbol,name:i.name,type:"bool"})}return t}(),defaults:{styles:{volume:{visible:!0,plottype:5,color:"#26a69a",transparency:50,linewidth:1}},inputs:function(){for(var t={},e=0;e<C.length;e++)t["market#"+C[e].symbol]=!0;return t}(),precision:0},styles:{volume:{title:"Volume",histogramBase:0}}},constructor:function(){this.init=function(t,e){this._context=t,this._input=e;t=h(b.Std.ticker(this._context))+","+C.map(function(t){return t.symbol}).join(",")+"#aggregated_volume_spot";this._context.new_sym(t,b.Std.period(this._context))},this.main=function(t,e){try{this._context=t,this._input=e,this._context.select_sym(1);var i=[NaN],o=this._context.symbol.time;if(isNaN(o))return i;var n=this._context.symbol.info.coinalyze_indicator_data[o];if(void 0===n)return i;for(var r=0,a=0;a<C.length;a++){var s=C[a];this._input(a)&&(r+=n[s.symbol]||0)}return[r]}catch(t){console.log("AggregatedVolumeSpot.main() tc error",t)}}}},{name:"AggregatedVolumeGlobal",metainfo:{_metainfoVersion:51,id:"AggregatedVolumeGlobal@tv-basicstudies-1",name:"AggregatedVolumeGlobal",description:"Aggregated Volume Global",shortDescription:"Aggregated Volume Global",scriptIdPart:"",is_price_study:!1,is_hidden_study:!0,isCustomIndicator:!0,plots:[{id:"volume",type:"line"}],inputs:function(){for(var t=[{id:"coins_category",name:"Coins category",type:"text",options:n,defval:r}],e=0;e<p.length;e++){var i=p[e];t.push({id:"exchange_"+i.exchange,name:i.name,type:"bool"})}return t}(),defaults:{styles:{volume:{visible:!0,plottype:5,color:"#26a69a",transparency:50,linewidth:1}},inputs:function(){for(var t={coins_category:r},e=0;e<p.length;e++)t["exchange_"+p[e].exchange]=!0;return t}(),precision:0},styles:{volume:{title:"Volume",histogramBase:0}}},constructor:function(){this.init=function(t,e){this._context=t,this._input=e;t=h(b.Std.ticker(this._context))+","+this._input(0)+","+p.map(t=>t.exchange).join(",")+"#aggregated_volume_global";this._context.new_sym(t,b.Std.period(this._context))},this.main=function(t,e){try{this._context=t,this._input=e;this._input(0);this._context.select_sym(1);var i=[NaN],o=this._context.symbol.time;if(isNaN(o))return i;var n=this._context.symbol.info.coinalyze_indicator_data[o];if(void 0===n)return i;for(var r=0,a=!1,s=0;s<p.length;s++){var l,c=p[s];this._input(s+1)&&void 0!==(l=n[c.exchange])&&(a=!0,r+=l[0])}return a?[r]:i}catch(t){console.log("AggregatedVolumeGlobal.main() tc error",t)}}}},{name:"AggregatedVolumeSpotGlobal",metainfo:{_metainfoVersion:51,id:"AggregatedVolumeSpotGlobal@tv-basicstudies-1",name:"AggregatedVolumeSpotGlobal",description:"Aggregated Volume Spot Global",shortDescription:"Aggregated Volume Spot Global",scriptIdPart:"",is_price_study:!1,is_hidden_study:!0,isCustomIndicator:!0,plots:[{id:"volume",type:"line"}],inputs:function(){for(var t=[{id:"coins_category",name:"Coins category",type:"text",options:n,defval:r}],e=0;e<_.length;e++){var i=_[e];t.push({id:"exchange_"+i.exchange,name:i.name,type:"bool"})}return t}(),defaults:{styles:{volume:{visible:!0,plottype:5,color:"#26a69a",transparency:50,linewidth:1}},inputs:function(){for(var t={coins_category:r},e=0;e<_.length;e++)t["exchange_"+_[e].exchange]=!0;return t}(),precision:0},styles:{volume:{title:"Volume",histogramBase:0}}},constructor:function(){this.init=function(t,e){this._context=t,this._input=e;t=h(b.Std.ticker(this._context))+","+this._input(0)+","+_.map(t=>t.exchange).join(",")+"#aggregated_volume_spot_global";this._context.new_sym(t,b.Std.period(this._context))},this.main=function(t,e){try{this._context=t,this._input=e;this._input(0);this._context.select_sym(1);var i=[NaN],o=this._context.symbol.time;if(isNaN(o))return i;var n=this._context.symbol.info.coinalyze_indicator_data[o];if(void 0===n)return i;for(var r=0,a=!1,s=0;s<_.length;s++){var l,c=_[s];this._input(s+1)&&void 0!==(l=n[c.exchange])&&(a=!0,r+=l[0])}return a?[r]:i}catch(t){console.log("AggregatedVolumeSpotGlobal.main() tc error",t)}}}},{name:"PremiumIndex",metainfo:{_metainfoVersion:51,id:"PremiumIndex@tv-basicstudies-1",scriptIdPart:"",name:"PremiumIndex",description:"Premium Index",shortDescription:"Premium Index",is_hidden_study:!1,is_price_study:!1,isCustomIndicator:!0,plots:[{id:"plot_0",type:"ohlc_open",target:"plotcandle_0"},{id:"plot_1",type:"ohlc_high",target:"plotcandle_0"},{id:"plot_2",type:"ohlc_low",target:"plotcandle_0"},{id:"plot_3",type:"ohlc_close",target:"plotcandle_0"},{id:"plot_4",type:"ohlc_colorer",palette:"palette_0",target:"plotcandle_0"}],inputs:[{id:"contract",name:"Contract",type:"symbol",optional:!0}],palettes:{palette_0:{colors:[{name:"Up Color"},{name:"Down Color"}]}},ohlcPlots:{plotcandle_0:{title:"Candles"}},defaults:{ohlcPlots:{plotcandle_0:{borderColor:"#000000",color:"#000000",drawBorder:!1,drawWick:!0,plottype:"ohlc_candles",visible:!0,wickColor:"#737375"}},palettes:{palette_0:{colors:[{color:"rgba(38, 166, 154, 0.7)",width:1,style:0},{color:"rgba(239, 83, 80, 0.7)",width:1,style:0}]}},precision:6,inputs:{contract:""}}},constructor:function(){this.init=function(t,e){this._context=t,this._input=e;t=(this._input(0)?h(this._input(0)):h(o)).split("."),e=t[0]+"_PI."+t[1];this._context.new_sym(e,b.Std.period(this._context))},this.main=function(t,e){this._context=t,this._input=e,this._context.select_sym(1);var t=b.Std.open(this._context),e=b.Std.high(this._context),i=b.Std.low(this._context),o=b.Std.close(this._context);return[t,e,i,o,t<=o?0:1]}}},{name:"OpenInterest",metainfo:{_metainfoVersion:51,id:"OpenInterest@tv-basicstudies-1",scriptIdPart:"",name:"OpenInterest",description:"Open Interest",shortDescription:"Open Interest",is_hidden_study:!1,is_price_study:!1,isCustomIndicator:!0,plots:[{id:"plot_0",type:"ohlc_open",target:"plotcandle_0"},{id:"plot_1",type:"ohlc_high",target:"plotcandle_0"},{id:"plot_2",type:"ohlc_low",target:"plotcandle_0"},{id:"plot_3",type:"ohlc_close",target:"plotcandle_0"},{id:"plot_4",type:"ohlc_colorer",palette:"palette_0",target:"plotcandle_0"},{id:"Line",type:"line"}],inputs:[{id:"contract",name:"Contract",type:"symbol",optional:!0}],palettes:{palette_0:{colors:[{name:"Up Color"},{name:"Down Color"}]}},ohlcPlots:{plotcandle_0:{title:"Candles"}},defaults:{ohlcPlots:{plotcandle_0:{borderColor:"#000000",color:"#000000",drawBorder:!1,drawWick:!0,plottype:"ohlc_candles",visible:!0,wickColor:"#737375"}},palettes:{palette_0:{colors:[{color:"rgba(38, 166, 154, 0.7)",width:1,style:0},{color:"rgba(239, 83, 80, 0.7)",width:1,style:0}]}},styles:{Line:{visible:!1,plottype:0,color:"#26a69a",transparency:0,linewidth:1,histogramBase:0}},precision:0,inputs:{contract:""}}},constructor:function(){this.init=function(t,e){this._context=t,this._input=e;t=(this._input(0)?h(this._input(0)):h(o)).split("."),e=t[0]+"_OI."+t[1];this._context.new_sym(e,b.Std.period(this._context))},this.main=function(t,e){this._context=t,this._input=e,this._context.select_sym(1);var t=b.Std.open(this._context),e=b.Std.high(this._context),i=b.Std.low(this._context),o=b.Std.close(this._context);return[t,e,i,o,t<=o?0:1,o]}}},{name:"OpenInterestDelta",metainfo:{_metainfoVersion:51,id:"OpenInterestDelta@tv-basicstudies-1",name:"OpenInterestDelta",description:"Open Interest Delta",shortDescription:"Open Interest Delta",scriptIdPart:"",is_price_study:!1,is_hidden_study:!1,isCustomIndicator:!0,plots:[{id:"delta",type:"line"},{id:"delta_colorer",type:"colorer",target:"delta",palette:"palette_delta_colorer"}],palettes:{palette_delta_colorer:{colors:[{name:"Positive"},{name:"Negative"}]}},inputs:[{id:"symbol",name:"Symbol",type:"symbol",optional:!0}],defaults:{palettes:{palette_delta_colorer:{colors:[{color:"rgba(38, 166, 154, 0.7)",width:1,style:0},{color:"rgba(239, 83, 80, 0.7)",width:1,style:0}]}},styles:{delta:{visible:!0,plottype:5,color:"#777",transparency:0,linewidth:1,histogramBase:0}},inputs:{symbol:""},precision:0},styles:{delta:{title:"Delta (close-open)",histogramBase:0}}},constructor:function(){this.init=function(t,e){this._context=t,this._input=e;t=(this._input(0)?h(this._input(0)):h(o)).split("."),e=t[0]+"_OI."+t[1];this._context.new_sym(e,b.Std.period(this._context))},this.main=function(t,e){try{this._context=t,this._input=e,this._context.select_sym(1);var i=b.Std.close(this._context)-b.Std.open(this._context);return[i,0<=i?0:1]}catch(t){console.log("OpenInterestDelta.main() tc error",t)}}}},{name:"AggregatedOpenInterestDelta_COIN_Denominated",metainfo:{_metainfoVersion:51,id:"AggregatedOpenInterestDelta_COIN_Denominated@tv-basicstudies-1",name:"AggregatedOpenInterestDelta_COIN_Denominated",description:"Aggregated Open Interest Delta STABLECOIN-margined Contracts",shortDescription:"Aggregated Open Interest Delta STABLECOIN-margined Contracts",scriptIdPart:"",is_price_study:!1,is_hidden_study:!1,isCustomIndicator:!0,plots:[{id:"delta",type:"line"},{id:"delta_colorer",type:"colorer",target:"delta",palette:"palette_delta_colorer"}],palettes:{palette_delta_colorer:{colors:[{name:"Positive"},{name:"Negative"}]}},inputs:function(){for(var t=[{id:"convert_to_usd",name:"Convert to USD",type:"bool"}],e=0;e<N.length;e++){var i=N[e];t.push({id:"contract#"+i.symbol,name:i.name,type:"bool"})}return t}(),defaults:{palettes:{palette_delta_colorer:{colors:[{color:"rgba(38, 166, 154, 0.7)",width:1,style:0},{color:"rgba(239, 83, 80, 0.7)",width:1,style:0}]}},styles:{delta:{visible:!0,plottype:5,color:"#777",transparency:0,linewidth:1,histogramBase:0}},inputs:function(){for(var t={convert_to_usd:!1},e=0;e<N.length;e++)t["contract#"+N[e].symbol]=!0;return t}(),precision:0},styles:{delta:{title:"Delta (close-open)",histogramBase:0}}},constructor:function(){this.init=function(t,e){this._context=t,this._input=e;t=h(b.Std.ticker(this._context))+","+N.map(function(t){return t.symbolOI}).join(",")+"#aggregated_oi_coin_denominated";this._context.new_sym(t,b.Std.period(this._context))},this.main=function(t,e){this._context=t,this._input=e,this._context.select_sym(1);var i=this._context.symbol.time;if(isNaN(i))return[void 0,void 0];var o=this._context.symbol.info.coinalyze_indicator_data,n=o[i];if(void 0===n)return[void 0,void 0];for(var r=0,a=0,s=!1,l=0;l<N.length;l++){var c=N[l];if(this._input(l+1)){let t=n[c.symbolOI];if(void 0===t){if(null===(t=v(c.symbolOI,i,o)))continue;t.open=t.close,t.high=t.close,t.low=t.close}s=!0,r+=t.open,t.high,t.low,a+=t.close}}if(!s)return[void 0,void 0];if(this._input(0)){var d=this._context.symbol.info.coinalyze_data_for_conversion[i];if(void 0===d)return[void 0,void 0];var p,u=0,h=0;for(p in d){var _=d[p];u+=(_.open+_.close)/2,h++}t=u/h;r*=t,a*=t}e=a-r;return[e,0<=e?0:1]}}},{name:"AggregatedOpenInterestDelta_USD_Denominated",metainfo:{_metainfoVersion:51,id:"AggregatedOpenInterestDelta_USD_Denominated@tv-basicstudies-1",name:"AggregatedOpenInterestDelta_USD_Denominated",description:"Aggregated Open Interest Delta COIN-margined Contracts",shortDescription:"Aggregated Open Interest Delta COIN-margined Contracts",scriptIdPart:"",is_price_study:!1,is_hidden_study:!1,isCustomIndicator:!0,plots:[{id:"delta",type:"line"},{id:"delta_colorer",type:"colorer",target:"delta",palette:"palette_delta_colorer"}],palettes:{palette_delta_colorer:{colors:[{name:"Positive"},{name:"Negative"}]}},inputs:function(){for(var t=[{id:"convert_to_coin",name:"Convert to COIN",type:"bool"}],e=0;e<A.length;e++){var i=A[e];t.push({id:"contract#"+i.symbol,name:i.name,type:"bool"})}return t}(),defaults:{palettes:{palette_delta_colorer:{colors:[{color:"rgba(38, 166, 154, 0.7)",width:1,style:0},{color:"rgba(239, 83, 80, 0.7)",width:1,style:0}]}},styles:{delta:{visible:!0,plottype:5,color:"#777",transparency:0,linewidth:1,histogramBase:0}},inputs:function(){for(var t={convert_to_coin:!1},e=0;e<A.length;e++)t["contract#"+A[e].symbol]=!0;return t}(),precision:0},styles:{delta:{title:"Delta (close-open)",histogramBase:0}}},constructor:function(){this.init=function(t,e){this._context=t,this._input=e;t=h(b.Std.ticker(this._context))+","+A.map(function(t){return t.symbolOI}).join(",")+"#aggregated_oi_usd_denominated";this._context.new_sym(t,b.Std.period(this._context))},this.main=function(t,e){this._context=t,this._input=e,this._context.select_sym(1);var i=this._context.symbol.time;if(isNaN(i))return[void 0,void 0];var o=this._context.symbol.info.coinalyze_indicator_data,n=o[i];if(void 0===n)return[void 0,void 0];for(var r=0,a=0,s=!1,l=0;l<A.length;l++){var c=A[l];if(this._input(l+1)){let t=n[c.symbolOI];if(void 0===t){if(null===(t=v(c.symbolOI,i,o)))continue;t.open=t.close,t.high=t.close,t.low=t.close}s=!0,r+=t.open,t.high,t.low,a+=t.close}}if(!s)return[void 0,void 0];if(this._input(0)){var d=this._context.symbol.info.coinalyze_data_for_conversion[i];if(void 0===d)return[void 0,void 0];var p,u=0,h=0;for(p in d){var _=d[p];u+=(_.open+_.close)/2,h++}t=u/h;r*=t,a*=t}e=a-r;return[e,0<=e?0:1]}}},{name:"AggregatedOpenInterestDeltaCoinAndUsdDenominated",metainfo:{_metainfoVersion:51,id:"AggregatedOpenInterestDeltaCoinAndUsdDenominated@tv-basicstudies-1",name:"AggregatedOpenInterestDeltaCoinAndUsdDenominated",description:"Aggregated Open Interest Delta STABLECOIN+COIN-margined Contracts",shortDescription:"Aggregated Open Interest Delta STABLECOIN+COIN-margined Contracts",scriptIdPart:"",is_price_study:!1,is_hidden_study:!1,isCustomIndicator:!0,plots:[{id:"delta",type:"line"},{id:"delta_colorer",type:"colorer",target:"delta",palette:"palette_delta_colorer"}],palettes:{palette_delta_colorer:{colors:[{name:"Positive"},{name:"Negative"}]}},inputs:function(){for(var t=[{id:"convert_to_usd",name:"Convert to USD",type:"bool"}],e=0;e<V.length;e++){var i=V[e];t.push({id:"contract#"+i.symbol,name:`${i.nameWithoutExchange} (${"l"===i.fc_type?"stable-m":"coin-m"}) - `+i.exchangeName,type:"bool"})}return t}(),defaults:{palettes:{palette_delta_colorer:{colors:[{color:"rgba(38, 166, 154, 0.7)",width:1,style:0},{color:"rgba(239, 83, 80, 0.7)",width:1,style:0}]}},styles:{delta:{visible:!0,plottype:5,color:"#777",transparency:0,linewidth:1,histogramBase:0}},inputs:function(){for(var t={convert_to_usd:!1},e=0;e<V.length;e++)t["contract#"+V[e].symbol]=!0;return t}(),precision:0},styles:{delta:{title:"Delta (close-open)",histogramBase:0}}},constructor:function(){this.init=function(t,e){this._context=t,this._input=e;t=h(b.Std.ticker(this._context))+","+V.map(function(t){return t.symbolOI}).join(",")+"#aggregated_oi_coin_and_usd_denominated";this._context.new_sym(t,b.Std.period(this._context))},this.main=function(t,e){this._context=t,this._input=e,this._context.select_sym(1);var i=this._context.symbol.time;if(isNaN(i))return[void 0,void 0];var o=this._context.symbol.info.coinalyze_indicator_data,n=o[i];if(void 0===n)return[void 0,void 0];var r=this._context.symbol.info.coinalyze_data_for_conversion[i];if(void 0===r)return[void 0,void 0];var a,s=0,l=0;for(a in r){var c=r[a];s+=(c.open+c.close)/2,l++}for(var d=s/l,p=0,u=0,h=!1,_=0;_<V.length;_++){var g=V[_];if(this._input(_+1)){let t=n[g.symbolOI];if(void 0===t){if(null===(t=v(g.symbolOI,i,o)))continue;t.open=t.close,t.high=t.close,t.low=t.close}h=!0,"l"===g.fc_type?(p+=t.open,t.high,t.low,u+=t.close):(p+=t.open/d,t.high,t.low,u+=t.close/d)}}if(!h)return[void 0,void 0];this._input(0)&&(p*=d,u*=d);t=u-p;return[t,0<=t?0:1]}}},{name:"AggregatedOpenInterest",metainfo:{_metainfoVersion:51,id:"AggregatedOpenInterestFull@tv-basicstudies-1",scriptIdPart:"",name:"AggregatedOpenInterest",description:"Aggregated Open Interest",shortDescription:"Aggregated Open Interest",is_hidden_study:!0,is_price_study:!1,isCustomIndicator:!0,plots:[{id:"plot_0",type:"ohlc_open",target:"plotcandle_0"},{id:"plot_1",type:"ohlc_high",target:"plotcandle_0"},{id:"plot_2",type:"ohlc_low",target:"plotcandle_0"},{id:"plot_3",type:"ohlc_close",target:"plotcandle_0"},{id:"plot_4",type:"ohlc_colorer",palette:"palette_0",target:"plotcandle_0"},{id:"Line",type:"line"}],inputs:function(){for(var t=[],e=0;e<x.length;e++){var i=x[e];t.push({id:"contract#"+i.symbol,name:i.name,type:"bool"})}return t}(),palettes:{palette_0:{colors:[{name:"Up Color"},{name:"Down Color"}]}},ohlcPlots:{plotcandle_0:{title:"Candles"}},defaults:{ohlcPlots:{plotcandle_0:{borderColor:"#000000",color:"#000000",drawBorder:!1,drawWick:!0,plottype:"ohlc_candles",visible:!0,wickColor:"#737375"}},palettes:{palette_0:{colors:[{color:"rgba(38, 166, 154, 0.7)",width:1,style:0},{color:"rgba(239, 83, 80, 0.7)",width:1,style:0}]}},styles:{Line:{visible:!1,plottype:0,color:"#26a69a",transparency:0,linewidth:1,histogramBase:0}},inputs:function(){for(var t={},e=0;e<x.length;e++)t["contract#"+x[e].symbol]=!0;return t}(),precision:0}},constructor:function(){this.init=function(t,e){this._context=t,this._input=e;t=h(b.Std.ticker(this._context))+","+x.map(function(t){return t.symbolOI}).join(",")+"#aggregated_oi";this._context.new_sym(t,b.Std.period(this._context))},this.main=function(t,e){this._context=t,this._input=e,this._context.select_sym(1);t=this._context.symbol.time;if(isNaN(t))return[void 0,void 0,void 0,void 0,1];var i=this._context.symbol.info.coinalyze_indicator_data[t];if(void 0===i)return[void 0,void 0,void 0,void 0,1];for(var o=0,n=0,r=0,a=0,s=!1,l=0;l<x.length;l++){var c=x[l];this._input(l)&&void 0!==(c=i[c.symbolOI])&&(s=!0,o+=c.open,n+=c.high,r+=c.low,a+=c.close)}return s?[o,n,r,a,o<=a?0:1,a]:[void 0,void 0,void 0,void 0,1]}}},{name:"AggregatedOpenInterestGlobal",metainfo:{_metainfoVersion:51,id:"AggregatedOpenInterestGlobal@tv-basicstudies-1",scriptIdPart:"",name:"AggregatedOpenInterestGlobal",description:"Aggregated Open Interest Global",shortDescription:"Aggregated Open Interest Global",is_hidden_study:!0,is_price_study:!1,isCustomIndicator:!0,plots:[{id:"plot_0",type:"ohlc_open",target:"plotcandle_0"},{id:"plot_1",type:"ohlc_high",target:"plotcandle_0"},{id:"plot_2",type:"ohlc_low",target:"plotcandle_0"},{id:"plot_3",type:"ohlc_close",target:"plotcandle_0"},{id:"plot_4",type:"ohlc_colorer",palette:"palette_0",target:"plotcandle_0"},{id:"Line",type:"line"}],inputs:function(){for(var t=[{id:"coins_category",name:"Coins category",type:"text",options:n,defval:r}],e=0;e<d.length;e++){var i=d[e];t.push({id:"exchange_"+i.exchange,name:i.name,type:"bool"})}return t}(),palettes:{palette_0:{colors:[{name:"Up Color"},{name:"Down Color"}]}},ohlcPlots:{plotcandle_0:{title:"Candles"}},defaults:{ohlcPlots:{plotcandle_0:{borderColor:"#000000",color:"#000000",drawBorder:!1,drawWick:!0,plottype:"ohlc_candles",visible:!0,wickColor:"#737375"}},palettes:{palette_0:{colors:[{color:"rgba(38, 166, 154, 0.7)",width:1,style:0},{color:"rgba(239, 83, 80, 0.7)",width:1,style:0}]}},styles:{Line:{visible:!1,plottype:0,color:"#26a69a",transparency:0,linewidth:1,histogramBase:0}},inputs:function(){for(var t={coins_category:r},e=0;e<d.length;e++)t["exchange_"+d[e].exchange]=!0;return t}(),precision:0},styles:{}},constructor:function(){this.init=function(t,e){this._context=t,this._input=e;t=h(b.Std.ticker(this._context))+","+this._input(0)+","+d.map(t=>t.exchange).join(",")+"#aggregated_oi_global";this._context.new_sym(t,b.Std.period(this._context))},this.main=function(t,e){this._context=t,this._input=e,this._context.select_sym(1);this._input(0);t=[void 0,void 0,void 0,void 0,1],e=this._context.symbol.time;if(isNaN(e))return t;var i=this._context.symbol.info.coinalyze_indicator_data[e];if(void 0===i)return t;for(var o=0,n=0,r=0,a=0,s=!1,l=0;l<d.length;l++){var c=d[l];this._input(l+1)&&void 0!==(c=i[c.exchange])&&(s=!0,o+=c[0],n+=c[1],r+=c[2],a+=c[3])}return s?[o,n,r,a,o<=a?0:1,a]:t}}},{name:"OpenInterestMarketCapRatio",metainfo:{_metainfoVersion:51,id:"OpenInterestMarketCapRatio@tv-basicstudies-1",scriptIdPart:"",name:"OpenInterestMarketCapRatio",description:"Open Interest/Market Cap Ratio",shortDescription:"Open Interest/Market Cap Ratio",is_hidden_study:!1,is_price_study:!1,isCustomIndicator:!0,plots:[{id:"ratio",type:"line"},{id:"open_interest",type:"line"},{id:"market_cap",type:"line"}],styles:{ratio:{title:"Ratio %",histogramBase:0},open_interest:{title:"Open Interest",histogramBase:0},market_cap:{title:"Market Cap",histogramBase:0}},inputs:function(){for(var t=[],e=0;e<x.length;e++){var i=x[e];t.push({id:"contract#"+i.symbol,name:i.name,type:"bool"})}return t}(),defaults:{styles:{ratio:{visible:!0,plottype:0,color:"#26a69a",transparency:0,linewidth:1},open_interest:{visible:!1,plottype:0,color:"#2FA215",transparency:50,opacity:1,linewidth:1},market_cap:{visible:!1,plottype:0,color:"#e12c2c",transparency:50,linewidth:1}},inputs:function(){for(var t={},e=0;e<x.length;e++)t["contract#"+x[e].symbol]=!0;return t}(),precision:4}},constructor:function(){this.init=function(t,e){this._context=t,this._input=e;t=h(b.Std.ticker(this._context))+","+x.map(function(t){return t.symbolOI}).join(",")+"#oi_mc_ratio";this._context.new_sym(t,b.Std.period(this._context))},this.main=function(t,e){this._context=t,this._input=e,this._context.select_sym(1);t=this._context.symbol.time;if(isNaN(t))return[void 0,void 0,void 0];var i=this._context.symbol.info.coinalyze_indicator_data.oi[t],e=this._context.symbol.info.coinalyze_indicator_data.mc[t];if(void 0===i||void 0===e)return[void 0,void 0,void 0];for(var o=0,n=!1,r=0;r<x.length;r++){var a=x[r];this._input(r)&&void 0!==(a=i[a.symbolOI])&&(n=!0,o+=a.close)}t=e.close;return n?[o/t*100,o,t]:[void 0,void 0,void 0]}}},{name:"OpenInterestMarketCapRatioGlobal",metainfo:{_metainfoVersion:51,id:"OpenInterestMarketCapRatioGlobal@tv-basicstudies-1",scriptIdPart:"",name:"OpenInterestMarketCapRatioGlobal",description:"Open Interest/Market Cap Ratio Global",shortDescription:"Open Interest/Market Cap Ratio Global",is_hidden_study:!0,is_price_study:!1,isCustomIndicator:!0,plots:[{id:"ratio",type:"line"},{id:"open_interest",type:"line"},{id:"market_cap",type:"line"}],styles:{ratio:{title:"Ratio %",histogramBase:0},open_interest:{title:"Open Interest",histogramBase:0},market_cap:{title:"Market Cap",histogramBase:0}},inputs:function(){for(var t=[{id:"coins_category",name:"Coins category",type:"text",options:n,defval:r},{id:"only_perpetuals_contracts",name:"Only Perpetual Contracts",type:"bool",defval:!1}],e=0;e<d.length;e++){var i=d[e];t.push({id:"exchange_"+i.exchange,name:i.name,type:"bool"})}return t}(),defaults:{styles:{ratio:{visible:!0,plottype:0,color:"#26a69a",transparency:0,linewidth:1},open_interest:{visible:!1,plottype:0,color:"#2FA215",transparency:50,opacity:1,linewidth:1},market_cap:{visible:!1,plottype:0,color:"#e12c2c",transparency:50,linewidth:1}},inputs:function(){for(var t={coins_category:r,only_perpetuals_contracts:!1},e=0;e<d.length;e++)t["exchange_"+d[e].exchange]=!0;return t}(),precision:4}},constructor:function(){this.init=function(t,e){this._context=t,this._input=e;t=h(b.Std.ticker(this._context))+","+this._input(0)+","+d.map(t=>t.exchange).join(",")+"#oi_mc_ratio_global";this._context.new_sym(t,b.Std.period(this._context))},this.main=function(t,e){this._context=t,this._input=e,this._context.select_sym(1);var i=this._input(1),t=this._context.symbol.time;if(isNaN(t))return[void 0,void 0,void 0];var o=this._context.symbol.info.coinalyze_indicator_data.oi[t],e=this._context.symbol.info.coinalyze_indicator_data.mc[t];if(void 0===o||void 0===e)return[void 0,void 0,void 0];for(var n=0,r=!1,a=0;a<d.length;a++){var s=d[a];this._input(a+2)&&void 0!==(s=o[s.exchange])&&(r=!0,n+=i?s[1]:s[0])}return r?[n/e*100,n,e]:[void 0,void 0,void 0]}}},{name:"AggregatedOpenInterest_USD_Denominated",metainfo:{_metainfoVersion:51,id:"AggregatedOpenInterest_USD_Denominated@tv-basicstudies-1",scriptIdPart:"",name:"AggregatedOpenInterest_USD_Denominated",description:"Aggregated Open Interest COIN-margined Contracts",shortDescription:"Aggregated Open Interest COIN-margined Contracts",is_hidden_study:!1,is_price_study:!1,isCustomIndicator:!0,plots:[{id:"plot_0",type:"ohlc_open",target:"plotcandle_0"},{id:"plot_1",type:"ohlc_high",target:"plotcandle_0"},{id:"plot_2",type:"ohlc_low",target:"plotcandle_0"},{id:"plot_3",type:"ohlc_close",target:"plotcandle_0"},{id:"plot_4",type:"ohlc_colorer",palette:"palette_0",target:"plotcandle_0"},{id:"Line",type:"line"}],inputs:function(){for(var t=[{id:"convert_to_coin",name:"Convert to COIN",type:"bool"}],e=0;e<A.length;e++){var i=A[e];t.push({id:"contract#"+i.symbol,name:i.name,type:"bool"})}return t}(),palettes:{palette_0:{colors:[{name:"Up Color"},{name:"Down Color"}]}},ohlcPlots:{plotcandle_0:{title:"Candles"}},defaults:{ohlcPlots:{plotcandle_0:{borderColor:"#000000",color:"#000000",drawBorder:!1,drawWick:!0,plottype:"ohlc_candles",visible:!0,wickColor:"#737375"}},palettes:{palette_0:{colors:[{color:"rgba(38, 166, 154, 0.7)",width:1,style:0},{color:"rgba(239, 83, 80, 0.7)",width:1,style:0}]}},styles:{Line:{visible:!1,plottype:0,color:"#26a69a",transparency:0,linewidth:1,histogramBase:0}},inputs:function(){for(var t={convert_to_coin:!1},e=0;e<A.length;e++)t["contract#"+A[e].symbol]=!0;return t}(),precision:0},styles:{}},constructor:function(){this.init=function(t,e){this._context=t,this._input=e;t=h(b.Std.ticker(this._context))+","+A.map(function(t){return t.symbolOI}).join(",")+"#aggregated_oi_usd_denominated";this._context.new_sym(t,b.Std.period(this._context))},this.main=function(t,e){this._context=t,this._input=e,this._context.select_sym(1);var i=this._context.symbol.time;if(isNaN(i))return[void 0,void 0,void 0,void 0,1];var o=this._context.symbol.info.coinalyze_indicator_data,n=o[i];if(void 0===n)return[void 0,void 0,void 0,void 0,1];for(var r=0,a=0,s=0,l=0,c=!1,d=0;d<A.length;d++){var p=A[d];if(this._input(d+1)){let t=n[p.symbolOI];if(void 0===t){if(null===(t=v(p.symbolOI,i,o)))continue;t.open=t.close,t.high=t.close,t.low=t.close}c=!0,r+=t.open,a+=t.high,s+=t.low,l+=t.close}}if(!c)return[void 0,void 0,void 0,void 0,1];if(this._input(0)){var u=this._context.symbol.info.coinalyze_data_for_conversion[i];if(void 0===u)return[void 0,void 0,void 0,void 0,1];var h,_=0,g=0;for(h in u){var m=u[h];_+=(m.open+m.close)/2,g++}t=_/g;r*=t,a*=t,s*=t,l*=t}return[r,a,s,l,r<=l?0:1,l]}}},{name:"AggregatedOpenInterest_COIN_Denominated",metainfo:{_metainfoVersion:51,id:"AggregatedOpenInterest_COIN_Denominated@tv-basicstudies-1",scriptIdPart:"",name:"AggregatedOpenInterest_COIN_Denominated",description:"Aggregated Open Interest STABLECOIN-margined Contracts",shortDescription:"Aggregated Open Interest STABLECOIN-margined Contracts",is_hidden_study:!1,is_price_study:!1,isCustomIndicator:!0,plots:[{id:"plot_0",type:"ohlc_open",target:"plotcandle_0"},{id:"plot_1",type:"ohlc_high",target:"plotcandle_0"},{id:"plot_2",type:"ohlc_low",target:"plotcandle_0"},{id:"plot_3",type:"ohlc_close",target:"plotcandle_0"},{id:"plot_4",type:"ohlc_colorer",palette:"palette_0",target:"plotcandle_0"},{id:"Line",type:"line"}],inputs:function(){for(var t=[{id:"convert_to_usd",name:"Convert to USD",type:"bool"}],e=0;e<N.length;e++){var i=N[e];t.push({id:"contract#"+i.symbol,name:i.name,type:"bool"})}return t}(),palettes:{palette_0:{colors:[{name:"Up Color"},{name:"Down Color"}]}},ohlcPlots:{plotcandle_0:{title:"Candles"}},defaults:{ohlcPlots:{plotcandle_0:{borderColor:"#000000",color:"#000000",drawBorder:!1,drawWick:!0,plottype:"ohlc_candles",visible:!0,wickColor:"#737375"}},palettes:{palette_0:{colors:[{color:"rgba(38, 166, 154, 0.7)",width:1,style:0},{color:"rgba(239, 83, 80, 0.7)",width:1,style:0}]}},styles:{Line:{visible:!1,plottype:0,color:"#26a69a",transparency:0,linewidth:1,histogramBase:0}},inputs:function(){for(var t={convert_to_usd:!1},e=0;e<N.length;e++)t["contract#"+N[e].symbol]=!0;return t}(),precision:0},styles:{}},constructor:function(){this.init=function(t,e){this._context=t,this._input=e;t=h(b.Std.ticker(this._context))+","+N.map(function(t){return t.symbolOI}).join(",")+"#aggregated_oi_coin_denominated";this._context.new_sym(t,b.Std.period(this._context))},this.main=function(t,e){this._context=t,this._input=e,this._context.select_sym(1);var i=this._context.symbol.time;if(isNaN(i))return[void 0,void 0,void 0,void 0,1];var o=this._context.symbol.info.coinalyze_indicator_data,n=o[i];if(void 0===n)return[void 0,void 0,void 0,void 0,1];for(var r=0,a=0,s=0,l=0,c=!1,d=0;d<N.length;d++){var p=N[d];if(this._input(d+1)){let t=n[p.symbolOI];if(void 0===t){if(null===(t=v(p.symbolOI,i,o)))continue;t.open=t.close,t.high=t.close,t.low=t.close}c=!0,r+=t.open,a+=t.high,s+=t.low,l+=t.close}}if(!c)return[void 0,void 0,void 0,void 0,1];if(this._input(0)){var u=this._context.symbol.info.coinalyze_data_for_conversion[i];if(void 0===u)return[void 0,void 0,void 0,void 0,1];var h,_=0,g=0;for(h in u){var m=u[h];_+=(m.open+m.close)/2,g++}t=_/g;r*=t,a*=t,s*=t,l*=t}return[r,a,s,l,r<=l?0:1,l]}}},{name:"AggregatedOpenInterestCoinAndUsdDenominated",metainfo:{_metainfoVersion:51,id:"AggregatedOpenInterestCoinAndUsdDenominated@tv-basicstudies-1",scriptIdPart:"",name:"AggregatedOpenInterestCoinAndUsdDenominated",description:"Aggregated Open Interest STABLECOIN+COIN-margined Contracts",shortDescription:"Aggregated Open Interest STABLECOIN+COIN-margined Contracts",is_hidden_study:!1,is_price_study:!1,isCustomIndicator:!0,plots:[{id:"plot_0",type:"ohlc_open",target:"plotcandle_0"},{id:"plot_1",type:"ohlc_high",target:"plotcandle_0"},{id:"plot_2",type:"ohlc_low",target:"plotcandle_0"},{id:"plot_3",type:"ohlc_close",target:"plotcandle_0"},{id:"plot_4",type:"ohlc_colorer",palette:"palette_0",target:"plotcandle_0"},{id:"Line",type:"line"}],inputs:function(){for(var t=[{id:"convert_to_usd",name:"Convert to USD",type:"bool"}],e=0;e<V.length;e++){var i=V[e];t.push({id:"contract#"+i.symbol,name:`${i.nameWithoutExchange} (${"l"===i.fc_type?"stable-m":"coin-m"}) - `+i.exchangeName,type:"bool"})}return t}(),palettes:{palette_0:{colors:[{name:"Up Color"},{name:"Down Color"}]}},ohlcPlots:{plotcandle_0:{title:"Candles"}},defaults:{ohlcPlots:{plotcandle_0:{borderColor:"#000000",color:"#000000",drawBorder:!1,drawWick:!0,plottype:"ohlc_candles",visible:!0,wickColor:"#737375"}},palettes:{palette_0:{colors:[{color:"rgba(38, 166, 154, 0.7)",width:1,style:0},{color:"rgba(239, 83, 80, 0.7)",width:1,style:0}]}},styles:{Line:{visible:!1,plottype:0,color:"#26a69a",transparency:0,linewidth:1,histogramBase:0}},inputs:function(){for(var t={convert_to_usd:!1},e=0;e<V.length;e++)t["contract#"+V[e].symbol]=!0;return t}(),precision:0},styles:{}},constructor:function(){this.init=function(t,e){this._context=t,this._input=e;t=h(b.Std.ticker(this._context))+","+V.map(function(t){return t.symbolOI}).join(",")+"#aggregated_oi_coin_and_usd_denominated";this._context.new_sym(t,b.Std.period(this._context))},this.main=function(t,e){this._context=t,this._input=e,this._context.select_sym(1);var i=this._context.symbol.time;if(isNaN(i))return[void 0,void 0,void 0,void 0,1];var o=this._context.symbol.info.coinalyze_indicator_data,n=o[i];if(void 0===n)return[void 0,void 0,void 0,void 0,1];var r=this._context.symbol.info.coinalyze_data_for_conversion[i];if(void 0===r)return[void 0,void 0,void 0,void 0,1];var a,s=0,l=0;for(a in r){var c=r[a];s+=(c.open+c.close)/2,l++}for(var d=s/l,p=0,u=0,h=0,_=0,g=!1,m=0;m<V.length;m++){var y=V[m];if(this._input(m+1)){let t=n[y.symbolOI];if(void 0===t){if(null===(t=v(y.symbolOI,i,o)))continue;t.open=t.close,t.high=t.close,t.low=t.close}g=!0,"l"===y.fc_type?(p+=t.open,u+=t.high,h+=t.low,_+=t.close):(p+=t.open/d,u+=t.high/d,h+=t.low/d,_+=t.close/d)}}return g?(this._input(0)&&(p*=d,u*=d,h*=d,_*=d),[p,u,h,_,p<=_?0:1,_]):[void 0,void 0,void 0,void 0,1]}}},{name:"AggregatedFundingRate",metainfo:{_metainfoVersion:51,id:"AggregatedFundingRate@tv-basicstudies-1",scriptIdPart:"",name:"AggregatedFundingRate",description:"Aggregated Funding Rate",shortDescription:"Aggregated Funding Rate",is_hidden_study:!1,is_price_study:!1,isCustomIndicator:!0,plots:[{id:"aggregated_funding_rate",type:"line"},{id:"ma",type:"line"},{id:"plot_colorer",type:"colorer",target:"aggregated_funding_rate",palette:"palette_plot_colorer"}],palettes:{palette_plot_colorer:{colors:[{name:"Positive"},{name:"Negative"}]}},inputs:function(){for(var t=[{id:"aggregate_type",name:"Aggregate Type",type:"text",options:["AVG","AVG_OI_WEIGHTED","SUM"],defval:"AVG"},{id:"source",name:"Source",type:"source",defval:"close"},{id:"ma_length",name:"MA Length",type:"integer",defval:10}],e=0;e<g.length;e++){var i=g[e];t.push({id:"contract#"+i.symbol,name:i.name,type:"bool"})}return t}(),defaults:{palettes:{palette_plot_colorer:{colors:[{color:"#2FA215",width:1,style:0},{color:"#e12c2c",width:1,style:0}]}},styles:{aggregated_funding_rate:{visible:!0,plottype:1,color:"#ff9800",transparency:50,linewidth:1},ma:{visible:!1,plottype:0,color:"#2196f3",transparency:25,linewidth:1}},inputs:function(){for(var t={aggregate_type:"AVG",source:"close",ma_length:10},e=0;e<g.length;e++)t["contract#"+g[e].symbol]=!0;return t}(),precision:4},styles:{aggregated_funding_rate:{title:"Aggregated Funding Rate",histogramBase:0},ma:{title:"MA"}},format:{type:"price",precision:4}},constructor:function(){this.init=function(t,e){this._context=t,this._input=e;t=h(b.Std.ticker(this._context))+","+g.map(function(t){return t.symbolFR}).join(",")+"#aggregated_fr";this._context.new_sym(t,b.Std.period(this._context)),this._barValue=function(t,e,i){return 0<=["open","high","low","close"].indexOf(e)?Common.fr8h(i,t[e]):"hl2"===e?(Common.fr8h(i,t.high)+Common.fr8h(i,t.low))/2:"hlc3"===e?(Common.fr8h(i,t.high)+Common.fr8h(i,t.low)+Common.fr8h(i,t.close))/3:"ohlc4"===e?(Common.fr8h(i,t.open)+Common.fr8h(i,t.high)+Common.fr8h(i,t.low)+Common.fr8h(i,t.close))/4:void 0},this._weightPerSymbol=function(t,e){e=new Date(e).setUTCHours(0,0,0,0);return t[e]||t[e-864e5]||{}}},this.main=function(t,e){this._context=t,this._input=e,this._context.select_sym(1);var t=this._input(0),i=this._input(1),e=this._input(2),o=this._context.symbol.time;if(isNaN(o))return[void 0,void 0,0];var n=this._context.symbol.info.coinalyze_fr_data[o],r=this._weightPerSymbol(this._context.symbol.info.coinalyze_fr_data_oi_for_weighting,o);if(void 0===n)return[void 0,void 0,0];for(var a,s=0,l=0,c=0,d=0,p=!1,u=0;u<g.length;u++){var h,_=g[u];this._input(u+3)&&void 0!==(h=n[_.symbolFR])&&(p=!0,s+=h=this._barValue(h,i,_.symbolFR),l++,c+=h*(h=r[_.symbolFR]||0),d+=h)}if(!p)return[void 0,void 0,0];"SUM"===t?a=s:"AVG"===t?a=s/l:"AVG_OI_WEIGHTED"===t&&(a=c/d);o=this._context.new_var(a);return[a,b.Std.sma(o,e,this._context),0<=a?0:1]}}},{name:"AggregatedFundingRateGlobal",metainfo:{_metainfoVersion:51,id:"AggregatedFundingRateGlobal@tv-basicstudies-1",scriptIdPart:"",name:"AggregatedFundingRateGlobal",description:"Aggregated Funding Rate Global",shortDescription:"Aggregated Funding Rate Global",is_hidden_study:!0,is_price_study:!1,isCustomIndicator:!0,plots:[{id:"aggregated_funding_rate",type:"line"},{id:"ma",type:"line"},{id:"plot_colorer",type:"colorer",target:"aggregated_funding_rate",palette:"palette_plot_colorer"}],palettes:{palette_plot_colorer:{colors:[{name:"Positive"},{name:"Negative"}]}},inputs:function(){for(var t=[{id:"coins_category",name:"Coins category",type:"text",options:n,defval:r},{id:"aggregate_type",name:"Aggregate Type",type:"text",options:["AVG","SUM"],defval:"AVG"},{id:"source",name:"Source",type:"text",options:["open","high","low","close","hl2","hlc3","ohlc4"],defval:"close"},{id:"ma_length",name:"MA Length",type:"integer",defval:10}],e=0;e<y.length;e++){var i=y[e];t.push({id:"exchange_"+i.exchange,name:i.name,type:"bool"})}return t}(),defaults:{palettes:{palette_plot_colorer:{colors:[{color:"#2FA215",width:1,style:0},{color:"#e12c2c",width:1,style:0}]}},styles:{aggregated_funding_rate:{visible:!0,plottype:1,color:"#ff9800",transparency:50,linewidth:1},ma:{visible:!1,plottype:0,color:"#2196f3",transparency:25,linewidth:1}},inputs:function(){for(var t={coins_category:r,aggregate_type:"AVG",source:"close",ma_length:10},e=0;e<y.length;e++)t["exchange_"+y[e].exchange]=!0;return t}(),precision:4},styles:{aggregated_funding_rate:{title:"Aggregated Funding Rate",histogramBase:0},ma:{title:"MA"}},format:{type:"price",precision:4}},constructor:function(){this.init=function(t,e){this._context=t,this._input=e;t=h(b.Std.ticker(this._context))+","+this._input(0)+","+y.map(t=>t.exchange).join(",")+"#aggregated_fr_global";this._context.new_sym(t,b.Std.period(this._context)),this._barValue=function(t,e){return"open"===e?t[0]:"high"===e?t[1]:"low"===e?t[2]:"close"===e?t[3]:"hl2"===e?(t[1]+t[2])/2:"hlc3"===e?(t[1]+t[2]+t[3])/3:"ohlc4"===e?(t[0]+t[1]+t[2]+t[3])/4:void 0}},this.main=function(t,e){this._context=t,this._input=e,this._context.select_sym(1);this._input(0);var t=this._input(1),i=this._input(2),e=this._input(3),o=this._context.symbol.time;if(isNaN(o))return[void 0,void 0,0];var n=this._context.symbol.info.coinalyze_indicator_data[o];if(void 0===n)return[void 0,void 0,0];for(var r=0,a=0,s=!1,l=0;l<y.length;l++){var c=y[l];this._input(l+4)&&void 0!==(c=n[c.exchange])&&(s=!0,r+=this._barValue(c,i),a+=c[4])}return s?(o=this._context.new_var(r="SUM"===t?r:r/a),[r,b.Std.sma(o,e,this._context),0<=r?0:1]):[void 0,void 0,0]}}},{name:"AggregatedPredictedFundingRate",metainfo:{_metainfoVersion:51,id:"AggregatedPredictedFundingRate@tv-basicstudies-1",scriptIdPart:"",name:"AggregatedPredictedFundingRate",description:"Aggregated Predicted Funding Rate",shortDescription:"Aggregated Predicted Funding Rate",is_hidden_study:!1,is_price_study:!1,isCustomIndicator:!0,plots:[{id:"aggregated_predicted_funding_rate",type:"line"},{id:"ma",type:"line"},{id:"plot_colorer",type:"colorer",target:"aggregated_predicted_funding_rate",palette:"palette_plot_colorer"}],palettes:{palette_plot_colorer:{colors:[{name:"Positive"},{name:"Negative"}]}},inputs:function(){for(var t=[{id:"aggregate_type",name:"Aggregate Type",type:"text",options:["AVG","AVG_OI_WEIGHTED","SUM"],defval:"AVG"},{id:"source",name:"Source",type:"source",defval:"close"},{id:"ma_length",name:"MA Length",type:"integer",defval:10}],e=0;e<m.length;e++){var i=m[e];t.push({id:"contract#"+i.symbol,name:i.name,type:"bool"})}return t}(),defaults:{palettes:{palette_plot_colorer:{colors:[{color:"#2FA215",width:1,style:0},{color:"#e12c2c",width:1,style:0}]}},styles:{aggregated_predicted_funding_rate:{visible:!0,plottype:1,color:"#ff9800",transparency:50,linewidth:1},ma:{visible:!1,plottype:0,color:"#2196f3",transparency:25,linewidth:1}},inputs:function(){for(var t={aggregate_type:"AVG",source:"close",ma_length:10},e=0;e<m.length;e++)t["contract#"+m[e].symbol]=!0;return t}(),precision:4},styles:{aggregated_predicted_funding_rate:{title:"Aggregated Predicted Funding Rate",histogramBase:0},ma:{title:"MA"}},format:{type:"price",precision:4}},constructor:function(){this.init=function(t,e){this._context=t,this._input=e;t=h(b.Std.ticker(this._context))+","+m.map(function(t){return t.symbolPFR}).join(",")+"#aggregated_pfr";this._context.new_sym(t,b.Std.period(this._context)),this._barValue=function(t,e,i){return 0<=["open","high","low","close"].indexOf(e)?Common.fr8h(i,t[e]):"hl2"===e?(Common.fr8h(i,t.high)+Common.fr8h(i,t.low))/2:"hlc3"===e?(Common.fr8h(i,t.high)+Common.fr8h(i,t.low)+Common.fr8h(i,t.close))/3:"ohlc4"===e?(Common.fr8h(i,t.open)+Common.fr8h(i,t.high)+Common.fr8h(i,t.low)+Common.fr8h(i,t.close))/4:void 0},this._weightPerSymbol=function(t,e){e=new Date(e).setUTCHours(0,0,0,0);return t[e]||t[e-864e5]||{}}},this.main=function(t,e){this._context=t,this._input=e,this._context.select_sym(1);var t=this._input(0),i=this._input(1),e=this._input(2),o=this._context.symbol.time;if(isNaN(o))return[void 0,void 0,0];var n=this._context.symbol.info.coinalyze_pfr_data[o],r=this._weightPerSymbol(this._context.symbol.info.coinalyze_pfr_data_oi_for_weighting,o);if(void 0===n)return[void 0,void 0,0];for(var a,s=0,l=0,c=0,d=0,p=!1,u=0;u<m.length;u++){var h,_=m[u];this._input(u+3)&&void 0!==(h=n[_.symbolPFR])&&(p=!0,s+=h=this._barValue(h,i,_.symbolPFR),l++,c+=h*(h=r[_.symbolPFR]||0),d+=h)}if(!p)return[void 0,void 0,0];"SUM"===t?a=s:"AVG"===t?a=s/l:"AVG_OI_WEIGHTED"===t&&(a=c/d);o=this._context.new_var(a);return[a,b.Std.sma(o,e,this._context),0<=a?0:1]}}},{name:"AggregatedPredictedFundingRateGlobal",metainfo:{_metainfoVersion:51,id:"AggregatedPredictedFundingRateGlobal@tv-basicstudies-1",scriptIdPart:"",name:"AggregatedPredictedFundingRateGlobal",description:"Aggregated Predicted Funding Rate Global",shortDescription:"Aggregated Predicted Funding Rate Global",is_hidden_study:!0,is_price_study:!1,isCustomIndicator:!0,plots:[{id:"aggregated_predicted_funding_rate",type:"line"},{id:"ma",type:"line"},{id:"plot_colorer",type:"colorer",target:"aggregated_predicted_funding_rate",palette:"palette_plot_colorer"}],palettes:{palette_plot_colorer:{colors:[{name:"Positive"},{name:"Negative"}]}},inputs:function(){for(var t=[{id:"coins_category",name:"Coins category",type:"text",options:n,defval:r},{id:"aggregate_type",name:"Aggregate Type",type:"text",options:["AVG","SUM"],defval:"AVG"},{id:"source",name:"Source",type:"text",options:["open","high","low","close","hl2","hlc3","ohlc4"],defval:"close"},{id:"ma_length",name:"MA Length",type:"integer",defval:10}],e=0;e<f.length;e++){var i=f[e];t.push({id:"exchange_"+i.exchange,name:i.name,type:"bool"})}return t}(),defaults:{palettes:{palette_plot_colorer:{colors:[{color:"#2FA215",width:1,style:0},{color:"#e12c2c",width:1,style:0}]}},styles:{aggregated_predicted_funding_rate:{visible:!0,plottype:1,color:"#ff9800",transparency:50,linewidth:1},ma:{visible:!1,plottype:0,color:"#2196f3",transparency:25,linewidth:1}},inputs:function(){for(var t={coins_category:r,aggregate_type:"AVG",source:"close",ma_length:10},e=0;e<f.length;e++)t["exchange_"+f[e].exchange]=!0;return t}(),precision:4},styles:{aggregated_predicted_funding_rate:{title:"Aggregated Predicted Funding Rate",histogramBase:0},ma:{title:"MA"}},format:{type:"price",precision:4}},constructor:function(){this.init=function(t,e){this._context=t,this._input=e;t=h(b.Std.ticker(this._context))+","+this._input(0)+","+f.map(t=>t.exchange).join(",")+"#aggregated_pfr_global";this._context.new_sym(t,b.Std.period(this._context)),this._barValue=function(t,e){return"open"===e?t[0]:"high"===e?t[1]:"low"===e?t[2]:"close"===e?t[3]:"hl2"===e?(t[1]+t[2])/2:"hlc3"===e?(t[1]+t[2]+t[3])/3:"ohlc4"===e?(t[0]+t[1]+t[2]+t[3])/4:void 0}},this.main=function(t,e){this._context=t,this._input=e,this._context.select_sym(1);this._input(0);var t=this._input(1),i=this._input(2),e=this._input(3),o=this._context.symbol.time;if(isNaN(o))return[void 0,void 0,0];var n=this._context.symbol.info.coinalyze_indicator_data[o];if(void 0===n)return[void 0,void 0,0];for(var r=0,a=0,s=!1,l=0;l<f.length;l++){var c=f[l];this._input(l+4)&&void 0!==(c=n[c.exchange])&&(s=!0,r+=this._barValue(c,i),a+=c[4])}return s?(o=this._context.new_var(r="SUM"===t?r:r/a),[r,b.Std.sma(o,e,this._context),0<=r?0:1]):[void 0,void 0,0]}}},{name:"LongsLiquidation",metainfo:{_metainfoVersion:51,id:"LongsLiquidation@tv-basicstudies-1",name:"LongsLiquidation",description:"Longs Liquidation",shortDescription:"Longs Liquidation",scriptIdPart:"",is_price_study:!1,is_hidden_study:!1,isCustomIndicator:!0,isTVScript:!1,isTVScriptStub:!1,plots:[{id:"Longs Liquidation",type:"line"},{id:"fake",type:"line"}],inputs:[],defaults:{styles:{"Longs Liquidation":{visible:!0,plottype:5,color:"#e12c2c",transparency:50,linewidth:1},fake:{isHidden:!0}},inputs:{},precision:0},styles:{fake:{isHidden:!0},"Longs Liquidation":{title:"Longs Liquidation",histogramBase:0}}},constructor:function(){this.init=function(t,e){this._context=t,this._input=e;t=h(b.Std.ticker(this._context)).split("."),e=t[0]+"_LQS."+t[1];this._context.new_sym(e,b.Std.period(this._context))},this.main=function(t,e){this._context=t,this._input=e,this._context.select_sym(1);t=b.Std.volume(this._context);return[Number.isFinite(t)?t:0]}}},{name:"ShortsLiquidation",metainfo:{_metainfoVersion:51,id:"ShortsLiquidation@tv-basicstudies-1",name:"ShortsLiquidation",description:"Shorts Liquidation",shortDescription:"Shorts Liquidation",scriptIdPart:"",is_price_study:!1,is_hidden_study:!1,isCustomIndicator:!0,isTVScript:!1,isTVScriptStub:!1,plots:[{id:"Shorts Liquidation",type:"line"},{id:"fake",type:"line"}],inputs:[],defaults:{styles:{"Shorts Liquidation":{visible:!0,plottype:5,color:"#2FA215",transparency:50,linewidth:1},fake:{isHidden:!0}},inputs:{},precision:0},styles:{fake:{isHidden:!0},"Shorts Liquidation":{title:"Shorts Liquidation",histogramBase:0}}},constructor:function(){this.init=function(t,e){this._context=t,this._input=e;t=h(b.Std.ticker(this._context)).split("."),e=t[0]+"_LQB."+t[1];this._context.new_sym(e,b.Std.period(this._context))},this.main=function(t,e){this._context=t,this._input=e,this._context.select_sym(1);t=b.Std.volume(this._context);return[Number.isFinite(t)?t:0]}}},{name:"FundingRateSingleValue",metainfo:{_metainfoVersion:51,id:"FundingRateSingleValue@tv-basicstudies-1",scriptIdPart:"",name:"FundingRateSingleValue",description:"Funding Rate",shortDescription:"Funding Rate",is_hidden_study:!1,is_price_study:!1,isCustomIndicator:!0,plots:[{id:"fr",type:"line"},{id:"fr_colorer",type:"colorer",target:"fr",palette:"palette_fr_colorer"}],palettes:{palette_fr_colorer:{colors:[{name:"Positive"},{name:"Negative"}]}},inputs:[{id:"contract",name:"Contract",type:"symbol",optional:!0},{id:"source",name:"Source",type:"source",defval:"close"}],defaults:{palettes:{palette_fr_colorer:{colors:[{color:"#2FA215",width:1,style:0},{color:"#e12c2c",width:1,style:0}]}},styles:{fr:{visible:!0,plottype:1,color:"#777",transparency:50,linewidth:1,histogramBase:0}},precision:4,inputs:{contract:"",source:"close"}},styles:{fr:{title:"Funding rate",histogramBase:0}},format:{type:"price",precision:4}},constructor:function(){let a;this.init=function(t,e){this._context=t,this._input=e;t=(this._input(0)?h(this._input(0)):h(o)).split(".");a=t[0]+"_FR."+t[1],this._context.new_sym(a,b.Std.period(this._context))},this.main=function(t,e){this._context=t,this._input=e,this._context.select_sym(1);var i,t=this._input(1),e=Common.fr8h(a,b.Std.open(this._context)),o=Common.fr8h(a,b.Std.high(this._context)),n=Common.fr8h(a,b.Std.low(this._context)),r=Common.fr8h(a,b.Std.close(this._context)),t=("open"===t?i=e:"high"===t?i=o:"low"===t?i=n:"close"===t?i=r:"hl2"===t?i=(o+n)/2:"hlc3"===t?i=(o+n+r)/3:"ohlc4"===t&&(i=(e+o+n+r)/4),0<=i?0:1);return[i,t]}}},{name:"FundingRate",metainfo:{_metainfoVersion:51,id:"FundingRate@tv-basicstudies-1",scriptIdPart:"",name:"FundingRate",description:"Funding Rate OHLC",shortDescription:"Funding Rate OHLC",is_hidden_study:!1,is_price_study:!1,isCustomIndicator:!0,plots:[{id:"plot_0",type:"ohlc_open",target:"plotcandle_0"},{id:"plot_1",type:"ohlc_high",target:"plotcandle_0"},{id:"plot_2",type:"ohlc_low",target:"plotcandle_0"},{id:"plot_3",type:"ohlc_close",target:"plotcandle_0"},{id:"plot_4",type:"ohlc_colorer",palette:"palette_0",target:"plotcandle_0"}],inputs:[{id:"contract",name:"Contract",type:"symbol",optional:!0}],palettes:{palette_0:{colors:[{name:"Up Color"},{name:"Down Color"}]}},ohlcPlots:{plotcandle_0:{title:"Candles"}},defaults:{ohlcPlots:{plotcandle_0:{borderColor:"#000000",color:"#000000",drawBorder:!1,drawWick:!0,plottype:"ohlc_candles",visible:!0,wickColor:"#737375"}},palettes:{palette_0:{colors:[{color:"rgba(38, 166, 154, 0.7)",width:1,style:0},{color:"rgba(239, 83, 80, 0.7)",width:1,style:0}]}},precision:4,inputs:{contract:""}},format:{type:"price",precision:4}},constructor:function(){let n;this.init=function(t,e){this._context=t,this._input=e;t=(this._input(0)?h(this._input(0)):h(o)).split(".");n=t[0]+"_FR."+t[1],this._context.new_sym(n,b.Std.period(this._context))},this.main=function(t,e){this._context=t,this._input=e,this._context.select_sym(1);var t=Common.fr8h(n,b.Std.open(this._context)),e=Common.fr8h(n,b.Std.high(this._context)),i=Common.fr8h(n,b.Std.low(this._context)),o=Common.fr8h(n,b.Std.close(this._context));return[t,e,i,o,t<=o?0:1]}}},{name:"PredictedFundingRateSingleValue",metainfo:{_metainfoVersion:51,id:"PredictedFundingRateSingleValue@tv-basicstudies-1",scriptIdPart:"",name:"PredictedFundingRateSingleValue",description:"Predicted Funding Rate",shortDescription:"Predicted Funding Rate",is_hidden_study:!1,is_price_study:!1,isCustomIndicator:!0,plots:[{id:"pfr",type:"line"},{id:"pfr_colorer",type:"colorer",target:"pfr",palette:"palette_pfr_colorer"}],palettes:{palette_pfr_colorer:{colors:[{name:"Positive"},{name:"Negative"}]}},inputs:[{id:"contract",name:"Contract",type:"symbol",optional:!0},{id:"source",name:"Source",type:"source",defval:"close"}],defaults:{palettes:{palette_pfr_colorer:{colors:[{color:"#2FA215",width:1,style:0},{color:"#e12c2c",width:1,style:0}]}},styles:{pfr:{visible:!0,plottype:1,color:"#777",transparency:50,linewidth:1,histogramBase:0}},precision:4,inputs:{contract:"",source:"close"}},styles:{pfr:{title:"Predicted Funding rate",histogramBase:0}},format:{type:"price",precision:4}},constructor:function(){let a;this.init=function(t,e){this._context=t,this._input=e;t=(this._input(0)?h(this._input(0)):h(o)).split(".");a=t[0]+"_PFR."+t[1],this._context.new_sym(a,b.Std.period(this._context))},this.main=function(t,e){this._context=t,this._input=e,this._context.select_sym(1);var i,t=this._input(1),e=Common.fr8h(a,b.Std.open(this._context)),o=Common.fr8h(a,b.Std.high(this._context)),n=Common.fr8h(a,b.Std.low(this._context)),r=Common.fr8h(a,b.Std.close(this._context)),t=("open"===t?i=e:"high"===t?i=o:"low"===t?i=n:"close"===t?i=r:"hl2"===t?i=(o+n)/2:"hlc3"===t?i=(o+n+r)/3:"ohlc4"===t&&(i=(e+o+n+r)/4),0<=i?0:1);return[i,t]}}},{name:"PredictedFundingRate",metainfo:{_metainfoVersion:51,id:"PredictedFundingRate@tv-basicstudies-1",scriptIdPart:"",name:"PredictedFundingRate",description:"Predicted Funding Rate OHLC",shortDescription:"Predicted Funding Rate OHLC",is_hidden_study:!1,is_price_study:!1,isCustomIndicator:!0,plots:[{id:"plot_0",type:"ohlc_open",target:"plotcandle_0"},{id:"plot_1",type:"ohlc_high",target:"plotcandle_0"},{id:"plot_2",type:"ohlc_low",target:"plotcandle_0"},{id:"plot_3",type:"ohlc_close",target:"plotcandle_0"},{id:"plot_4",type:"ohlc_colorer",palette:"palette_0",target:"plotcandle_0"}],inputs:[{id:"contract",name:"Contract",type:"symbol",optional:!0}],palettes:{palette_0:{colors:[{name:"Up Color"},{name:"Down Color"}]}},ohlcPlots:{plotcandle_0:{title:"Candles"}},defaults:{ohlcPlots:{plotcandle_0:{borderColor:"#000000",color:"#000000",drawBorder:!1,drawWick:!0,plottype:"ohlc_candles",visible:!0,wickColor:"#737375"}},palettes:{palette_0:{colors:[{color:"rgba(38, 166, 154, 0.7)",width:1,style:0},{color:"rgba(239, 83, 80, 0.7)",width:1,style:0}]}},precision:4,inputs:{contract:""}},format:{type:"price",precision:4}},constructor:function(){let n;this.init=function(t,e){this._context=t,this._input=e;t=(this._input(0)?h(this._input(0)):h(o)).split(".");n=t[0]+"_PFR."+t[1],this._context.new_sym(n,b.Std.period(this._context))},this.main=function(t,e){this._context=t,this._input=e,this._context.select_sym(1);var t=Common.fr8h(n,b.Std.open(this._context)),e=Common.fr8h(n,b.Std.high(this._context)),i=Common.fr8h(n,b.Std.low(this._context)),o=Common.fr8h(n,b.Std.close(this._context));return[t,e,i,o,t<=o?0:1]}}},{name:"LongShortAccountsRatioTopTraders",metainfo:{_metainfoVersion:51,id:"LongShortAccountsRatioTopTraders@tv-basicstudies-1",name:"LongShortAccountsRatioTopTraders",description:"Long/Short Accounts Ratio Top Traders",shortDescription:"Long/Short Accounts Ratio Top Traders",scriptIdPart:"",is_price_study:!1,is_hidden_study:!1,isCustomIndicator:!0,plots:[{id:"Ratio",type:"line"},{id:"Long %",type:"line"},{id:"Short %",type:"line"},{id:"ratio_colorer",type:"colorer",target:"Ratio",palette:"palette_ratio_colorer"}],palettes:{palette_ratio_colorer:{colors:[{name:"Above 1"},{name:"Below 1"}]}},inputs:[{id:"contract",name:"Contract",type:"symbol",optional:!0}],defaults:{styles:{Ratio:{visible:!0,plottype:0,color:"#777",transparency:0,linewidth:1,histogramBase:1},"Long %":{visible:!1,plottype:0,color:"#2FA215",transparency:50,opacity:1,linewidth:1},"Short %":{visible:!1,plottype:0,color:"#e12c2c",transparency:50,linewidth:1}},palettes:{palette_ratio_colorer:{colors:[{color:"rgba(38, 166, 154, 1)",width:1,style:0},{color:"rgba(239, 83, 80, 1)",width:1,style:0}]}},inputs:{contract:""},precision:3},format:{type:"price",precision:3}},constructor:function(){this.init=function(t,e){this._context=t,this._input=e;t=(this._input(0)?h(this._input(0)):h(o)).split("."),e=t[0]+"_TLSRA."+t[1];this._context.new_sym(e,b.Std.period(this._context))},this.main=function(t,e){this._context=t,this._input=e,this._context.select_sym(1);var t=b.Std.open(this._context),e=b.Std.high(this._context),i=b.Std.low(this._context),t=isNaN(parseFloat(t))?t:parseFloat(t.toFixed(3));return[t,e,i,1<t?0:1]}}},{name:"LongShortPositionsRatioTopTraders",metainfo:{_metainfoVersion:51,id:"LongShortPositionsRatioTopTraders@tv-basicstudies-1",name:"LongShortPositionsRatioTopTraders",description:"Long/Short Positions Ratio Top Traders",shortDescription:"Long/Short Positions Ratio Top Traders",scriptIdPart:"",is_price_study:!1,is_hidden_study:!1,isCustomIndicator:!0,plots:[{id:"Ratio",type:"line"},{id:"Long %",type:"line"},{id:"Short %",type:"line"},{id:"ratio_colorer",type:"colorer",target:"Ratio",palette:"palette_ratio_colorer"}],palettes:{palette_ratio_colorer:{colors:[{name:"Above 1"},{name:"Below 1"}]}},inputs:[{id:"contract",name:"Contract",type:"symbol",optional:!0}],defaults:{styles:{Ratio:{visible:!0,plottype:0,color:"#777",transparency:0,linewidth:1,histogramBase:1},"Long %":{visible:!1,plottype:0,color:"#2FA215",transparency:50,opacity:1,linewidth:1},"Short %":{visible:!1,plottype:0,color:"#e12c2c",transparency:50,linewidth:1}},palettes:{palette_ratio_colorer:{colors:[{color:"rgba(38, 166, 154, 1)",width:1,style:0},{color:"rgba(239, 83, 80, 1)",width:1,style:0}]}},inputs:{contract:""},precision:3},format:{type:"price",precision:3}},constructor:function(){this.init=function(t,e){this._context=t,this._input=e;t=(this._input(0)?h(this._input(0)):h(o)).split("."),e=t[0]+"_TLSRP."+t[1];this._context.new_sym(e,b.Std.period(this._context))},this.main=function(t,e){this._context=t,this._input=e,this._context.select_sym(1);var t=b.Std.open(this._context),e=b.Std.high(this._context),i=b.Std.low(this._context),t=isNaN(parseFloat(t))?t:parseFloat(t.toFixed(3));return[t,e,i,1<t?0:1]}}},{name:"LongShortAccountsRatio",metainfo:{_metainfoVersion:51,id:"LongShortAccountsRatio@tv-basicstudies-1",name:"LongShortAccountsRatio",description:"Long/Short Accounts Ratio",shortDescription:"Long/Short Accounts Ratio",scriptIdPart:"",is_price_study:!1,is_hidden_study:!1,isCustomIndicator:!0,plots:[{id:"Ratio",type:"line"},{id:"Long %",type:"line"},{id:"Short %",type:"line"},{id:"ratio_colorer",type:"colorer",target:"Ratio",palette:"palette_ratio_colorer"}],inputs:[{id:"contract",name:"Contract",type:"symbol",optional:!0}],palettes:{palette_ratio_colorer:{colors:[{name:"Above 1"},{name:"Below 1"}]}},defaults:{styles:{Ratio:{visible:!0,plottype:0,color:"#777",transparency:0,linewidth:1,histogramBase:1},"Long %":{visible:!1,plottype:0,color:"#2FA215",transparency:50,opacity:1,linewidth:1},"Short %":{visible:!1,plottype:0,color:"#e12c2c",transparency:50,linewidth:1}},palettes:{palette_ratio_colorer:{colors:[{color:"rgba(38, 166, 154, 1)",width:1,style:0},{color:"rgba(239, 83, 80, 1)",width:1,style:0}]}},inputs:{contract:""},precision:3},format:{type:"price",precision:3}},constructor:function(){this.init=function(t,e){this._context=t,this._input=e;t=(this._input(0)?h(this._input(0)):h(o)).split("."),e=t[0]+"_GLSRA."+t[1];this._context.new_sym(e,b.Std.period(this._context))},this.main=function(t,e){this._context=t,this._input=e,this._context.select_sym(1);var t=b.Std.open(this._context),e=b.Std.high(this._context),i=b.Std.low(this._context),t=isNaN(parseFloat(t))?t:parseFloat(t.toFixed(3));return[t,e,i,1<t?0:1]}}},{name:"AggregatedLongShortAccountsRatio",metainfo:{_metainfoVersion:51,id:"AggregatedLongShortAccountsRatio@tv-basicstudies-1",scriptIdPart:"",name:"AggregatedLongShortAccountsRatio",description:"Aggregated Long/Short Accounts Ratio",shortDescription:"Aggregated Long/Short Accounts Ratio",is_hidden_study:!1,is_price_study:!1,isCustomIndicator:!0,plots:[{id:"Ratio",type:"line"},{id:"Long %",type:"line"},{id:"Short %",type:"line"},{id:"ratio_colorer",type:"colorer",target:"Ratio",palette:"palette_ratio_colorer"}],palettes:{palette_ratio_colorer:{colors:[{name:"Above 1"},{name:"Below 1"}]}},inputs:function(){for(var t=[{id:"aggregate_type",name:"Aggregate Type",type:"text",options:["AVG"],defval:"AVG"}],e=0;e<I.length;e++){var i=I[e];t.push({id:"contract#"+i.symbol,name:i.name,type:"bool"})}return t}(),defaults:{palettes:{palette_ratio_colorer:{colors:[{color:"rgba(38, 166, 154, 1)",width:1,style:0},{color:"rgba(239, 83, 80, 1)",width:1,style:0}]}},styles:{Ratio:{visible:!0,plottype:0,color:"#777",transparency:0,linewidth:1,histogramBase:1},"Long %":{visible:!1,plottype:0,color:"#2FA215",transparency:50,opacity:1,linewidth:1},"Short %":{visible:!1,plottype:0,color:"#e12c2c",transparency:50,linewidth:1}},inputs:function(){for(var t={aggregate_type:"AVG"},e=0;e<I.length;e++)t["contract#"+I[e].symbol]=!0;return t}(),precision:3},styles:{},format:{type:"price",precision:3}},constructor:function(){this.init=function(t,e){this._context=t,this._input=e;t=h(b.Std.ticker(this._context))+","+I.map(function(t){return t.symbolLSAR}).join(",")+"#aggregated_lsar";this._context.new_sym(t,b.Std.period(this._context))},this.main=function(t,e){this._context=t,this._input=e,this._context.select_sym(1);var t=this._input(0),e=[void 0,void 0,void 0,void 0],i=this._context.symbol.time;if(isNaN(i))return e;var o=this._context.symbol.info.coinalyze_indicator_data[i];if(void 0===o)return e;let n=0,r=0,a=0;for(var s=!1,l=0;l<I.length;l++){var c=I[l];this._input(l+1)&&void 0!==(c=o[c.symbolLSAR])&&(s=!0,n+=c[0],r+=c[1],a++)}if(!s)return e;let d,p,u;"AVG"===t&&(d=n/a,p=r/a,u=d/p);i=1<u?0:1;return[u,d,p,i]}}},{name:"MarginLendingRate",metainfo:{_metainfoVersion:51,id:"MarginLendingRate@tv-basicstudies-1",scriptIdPart:"",name:"MarginLendingRate",description:"Margin Lending Rate",shortDescription:"Margin Lending Rate",is_hidden_study:!1,is_price_study:!1,isCustomIndicator:!0,plots:[{id:"plot_0",type:"ohlc_open",target:"plotcandle_0"},{id:"plot_1",type:"ohlc_high",target:"plotcandle_0"},{id:"plot_2",type:"ohlc_low",target:"plotcandle_0"},{id:"plot_3",type:"ohlc_close",target:"plotcandle_0"},{id:"plot_4",type:"ohlc_colorer",palette:"palette_0",target:"plotcandle_0"}],inputs:[{id:"coin_and_exchange",name:"Coin & Exchange",type:"text",options:k.map(function(t){return t.name})},{id:"lending_rate_per",name:"Lending rate % per",type:"text",options:["hour","day","year"],defval:"hour"}],palettes:{palette_0:{colors:[{name:"Up Color"},{name:"Down Color"}]}},ohlcPlots:{plotcandle_0:{title:"Candles"}},defaults:{ohlcPlots:{plotcandle_0:{borderColor:"#000000",color:"#000000",drawBorder:!1,drawWick:!0,plottype:"ohlc_candles",visible:!0,wickColor:"#737375"}},palettes:{palette_0:{colors:[{color:"rgba(38, 166, 154, 0.7)",width:1,style:0},{color:"rgba(239, 83, 80, 0.7)",width:1,style:0}]}},precision:6,inputs:{coin_and_exchange:R?R.name:"",lending_rate_per:"hour"}},format:{type:"price",precision:6}},constructor:function(){this.init=function(t,e){this._context=t,this._input=e;var i=this._input(0),t=k.find(function(t){return t.name===i}),e=void 0!==t?t.symbol:"";this._context.new_sym(e,b.Std.period(this._context))},this.main=function(t,e){this._context=t,this._input=e,this._context.select_sym(1);var t=this._input(1),e=1,t=("day"===t?e=24:"year"===t&&(e=8784),b.Std.open(this._context)*e),i=b.Std.high(this._context)*e,o=b.Std.low(this._context)*e,e=b.Std.close(this._context)*e;return[t,i,o,e,t<=e?0:1]}}},{name:"LiquidationsProfileVisibleRange",metainfo:{_metainfoVersion:51,id:"LiquidationsProfileVisibleRange@tv-basicstudies-1",description:"Liquidations Profile Visible Range",shortDescription:"Liquidations Profile Visible Range",scriptIdPart:"",is_price_study:!0,is_hidden_study:!1,isCustomIndicator:!0,plots:[{id:"profile_style",type:"bar_colorer",palette:"profile_style_palette"}],palettes:{profile_style_palette:{colors:[{name:"Shorts liquidation (Buy)"},{name:"Longs liquidation (Sell)"},{name:"Values color"}]}},inputs:[{id:"num_rows",name:"Rows",type:"integer",defval:24},{id:"width_percent_of_chart",name:"Width (% Of The Chart)",type:"integer",defval:30},{id:"liquidations_to_show",name:"Liquidation side",type:"text",options:["LongsAndShorts","Longs","Shorts"],defval:"LongsAndShorts"},{id:"show_values",name:"Show values",type:"bool",defval:!1}],defaults:{palettes:{profile_style_palette:{colors:[{color:"#2FA215"},{color:"#e12c2c"},{color:"#d1d4dc"}]}},styles:{},inputs:{num_rows:24,width_percent_of_chart:30,liquidations_to_show:"LongsAndShorts",show_values:!0}},styles:{profile_style:{title:"Profile Style"}}},constructor:function(){const e="Liquidations Profile Visible Range";let o=!1,i=!0,M={},T=[];const t=chartWidget,q=chartWidget.chart(),U=q.getAllStudies().find(t=>t.name===e).id,z="#2FA215",E="#e12c2c",W="#d1d4dc",G="#000000";let Q,j,H;async function n(){J();var t=q.getStudyById(U).getInputValues().find(t=>"num_rows"===t.id).value,e=q.getStudyById(U).getInputValues().find(t=>"width_percent_of_chart"===t.id).value,i=q.getStudyById(U).getInputValues().find(t=>"liquidations_to_show"===t.id).value,o=q.getStudyById(U).getInputValues().find(t=>"show_values"===t.id).value;let n=z,r=E,a=W,s=G;try{n=chartWidget.chart().getStudyById(U).getStyleValues().palettes.profile_style_palette.colors[0].color,r=chartWidget.chart().getStudyById(U).getStyleValues().palettes.profile_style_palette.colors[1].color,a=chartWidget.chart().getStudyById(U).getStyleValues().palettes.profile_style_palette.colors[2].color}catch(t){n=z,r=E,a=W}try{s=chartWidget.chart()._chartWidget.properties().paneProperties.background._value}catch(t){s=G}var l=await async function(){var t=q.getVisibleRange();let e,i;var o=[];for(const a of(await q.exportData({includeTime:!0,includedStudies:[]})).data){var n,r=a[0];r>=t.from&&r<=t.to&&(r=a[3],n=a[2],void 0===e?(e=r,i=n):(n>i&&(i=n),r<e&&(e=r),o.push(a)))}return[e,i,o]}(),c=l[0],d=l[1],p=l[2],u=function(){var t=q.getVisibleRange(),e=[Q],i={};for(const l of[{symbol:Q,symbolLQB:j,symbolLQS:H}]){const j=l.symbolLQB,H=l.symbolLQS;var o=0<=e.indexOf(l.symbol);i[j]={lqType:"lqb",symbolParent:l.symbol,selected:o},i[H]={lqType:"lqs",symbolParent:l.symbol,selected:o}}var n,r={};for(n in M){var a=parseInt(n/1e3);if(a>=t.from&&a<=t.to){r[a]={lqb:0,lqs:0};var s=M[n];for(const c in s)i.hasOwnProperty(c)&&!0===i[c].selected&&(r[a][i[c].lqType]+=s[c].lq_volume)}}return r}();const h=(d-c)/t;var _=[];for(let t=c;t<d;t+=h)_.push({priceFrom:t,priceTo:t+h,amountBuy:0,amountSell:0,coordinates:[]});for(const D of p){var g=D[0],m=D[2],y=D[3];D[4];if(u.hasOwnProperty(g))for(const L of _){L.priceFrom,L.priceTo;var v=(Math.max(m,L.priceTo)-Math.min(y,L.priceFrom)-(Math.max(m,L.priceTo)-Math.min(m,L.priceTo))-(Math.max(y,L.priceFrom)-Math.min(y,L.priceFrom)))/(m-y);0<v&&(L.amountBuy+=u[g].lqb*v,L.amountSell+=u[g].lqs*v)}}let f=0;for(const B of _){var b="LongsAndShorts"===i?B.amountBuy+B.amountSell:"Longs"===i?B.amountSell:B.amountBuy;f=Math.max(f,b)}var S=Math.min(p.length,5),x={};for(let t=1;t<S;t++){const h=p[t][0]-p[t-1][0];x[h]=1}var w=parseInt(Object.keys(x)[0]);const C=[];var I=q.getVisibleRange();for(let t=I.from;t<=I.to;t+=w)C.push(t);var k=Math.ceil(C.length*(e/100));const A=C[C.length-1];for(const F of _){var N="LongsAndShorts"===i?F.amountBuy+F.amountSell:"Longs"===i?F.amountSell:F.amountBuy;0<N?(N=N/f,N=Math.ceil(N*k),N=C[C.length-N],F.coordinates=[{time:N,price:F.priceFrom},{time:A,price:F.priceTo}]):F.coordinates=[{time:A,price:F.priceFrom},{time:A,price:F.priceTo}]}let V;for(const R of _)if(R.coordinates.length)if("LongsAndShorts"===i){var O=R.amountBuy+R.amountSell,P=R.coordinates[0].time;const A=R.coordinates[1].time;if(0===R.amountSell||0===R.amountBuy)V=q.createMultipointShape(R.coordinates,{shape:"rectangle",lock:!0,disableSelection:!0,disableSave:!0,disableUndo:!0,zOrder:"top",overrides:{backgroundColor:0<R.amountSell?r:n,color:s,linewidth:1}});else{const C=[];for(let t=P;t<=A;t+=w)C.push(t);var O=C[Math.ceil(C.length*(R.amountSell/O))]||C[C.length-1],P=(V=q.createMultipointShape([{time:P,price:R.priceFrom},{time:O,price:R.priceTo}],{shape:"rectangle",lock:!0,disableSelection:!0,disableSave:!0,disableUndo:!0,zOrder:"top",overrides:{backgroundColor:r,color:s,linewidth:1}}),T.push(V),O),O=A;V=q.createMultipointShape([{time:P,price:R.priceFrom},{time:O,price:R.priceTo}],{shape:"rectangle",lock:!0,disableSelection:!0,disableSave:!0,disableUndo:!0,zOrder:"top",overrides:{backgroundColor:n,color:s,linewidth:1}})}T.push(V),!0===o&&(V=q.createMultipointShape([{time:R.coordinates[1].time,price:(R.coordinates[1].price+R.coordinates[0].price)/2}],{shape:"arrow_right",lock:!0,disableSelection:!0,disableSave:!0,disableUndo:!0,zOrder:"top",overrides:{fontsize:10,text:numeral(R.amountSell).format("0.00a").toUpperCase()+" / "+numeral(R.amountBuy).format("0.00a").toUpperCase(),arrowColor:"#00000000",color:a}}),T.push(V))}else V=q.createMultipointShape(R.coordinates,{shape:"rectangle",lock:!0,disableSelection:!0,disableSave:!0,disableUndo:!0,zOrder:"top",overrides:{backgroundColor:"Longs"===i?r:n,color:s,linewidth:1}}),T.push(V),!0===o&&(P="Longs"===i?R.amountSell:R.amountBuy,V=q.createMultipointShape([{time:R.coordinates[1].time,price:(R.coordinates[1].price+R.coordinates[0].price)/2}],{shape:"arrow_right",lock:!0,disableSelection:!0,disableSave:!0,disableUndo:!0,zOrder:"top",overrides:{fontsize:10,text:numeral(P).format("0.00a").toUpperCase(),arrowColor:"#00000000",color:a}}),T.push(V))}let r=null;const a=setInterval(function(){!async function(){if(!0===o)try{o=!1,await n()}catch(t){o=!0}}()},1500);function J(){for(const t of T)try{q.removeEntity(t,{disableUndo:!0})}catch(t){}T=[]}function s(){J(),clearInterval(a),q.onVisibleRangeChanged().unsubscribe(null,l),t.unsubscribe("study_properties_changed",c),t.unsubscribe("study_event",d),t.unsubscribe("study",p)}function l(t,e){o=!0}function c(t){t===U&&(t=q.getStudyById(U).isVisible(),i!=t&&(t||s(),i=t),o=!0)}function d(t,e){"remove"===e&&t===U&&s()}function p(t){t.value,e}q.onVisibleRangeChanged().subscribe(null,l),t.subscribe("study_properties_changed",c),t.subscribe("study_event",d),t.subscribe("study",p),this.init=function(t,e){this._context=t,this._input=e;t=(Q=h(b.Std.ticker(this._context))).split("."),j=t[0]+"_LQB."+t[1],H=t[0]+"_LQS."+t[1],e=Q+","+j+","+H+"#liquidations";this._context.new_sym(e,b.Std.period(this._context)),o=!0},this.main=function(t,e){try{this._context=t,this._input=e,this._context.select_sym(1);var i=this._context.symbol.time;return isNaN(i)||(M=this._context.symbol.info.coinalyze_indicator_data,JSON.stringify(r)!==JSON.stringify(M[i])&&(r=M[i],o=!0)),[]}catch(t){console.log("LiquidationsProfileVisibleRange.main() tc error",t)}}}},{name:"OpenInterestDeltaProfileVisibleRange",metainfo:{_metainfoVersion:51,id:"OpenInterestDeltaProfileVisibleRange@tv-basicstudies-1",description:"Open Interest Delta Profile Visible Range",shortDescription:"Open Interest Delta Profile Visible Range",scriptIdPart:"",is_price_study:!0,is_hidden_study:!1,isCustomIndicator:!0,plots:[{id:"profile_style",type:"bar_colorer",palette:"profile_style_palette"}],palettes:{profile_style_palette:{colors:[{name:"Positive Delta"},{name:"Negative Delta"},{name:"Values color"}]}},inputs:[{id:"num_rows",name:"Rows",type:"integer",defval:24},{id:"width_percent_of_chart",name:"Width (% Of The Chart)",type:"integer",defval:30},{id:"delta_to_show",name:"Show",type:"text",options:["PositiveAndNegative","Positive","Negative","Net"],defval:"PositiveAndNegative",tooltip:"PositiveAndNegative = display, proportionally, positive and negative delta on same row. Positive = display only positive delta. Negative = display only negative delta. Net = the difference between positive delta and negative delta."},{id:"show_values",name:"Show values",type:"bool",defval:!1}],defaults:{palettes:{profile_style_palette:{colors:[{color:"#2FA215"},{color:"#e12c2c"},{color:"#d1d4dc"}]}},styles:{},inputs:{num_rows:24,width_percent_of_chart:30,delta_to_show:"PositiveAndNegative",show_values:!0}},styles:{profile_style:{title:"Profile Style"}}},constructor:function(){const e="Open Interest Delta Profile Visible Range";let o=!1,i=!0,M={},T=[];const t=chartWidget,q=chartWidget.chart(),U=q.getAllStudies().find(t=>t.name===e).id,z="#2FA215",E="#e12c2c",W="#d1d4dc",G="#000000";let Q,j;function H(t,e,i){return"PositiveAndNegative"===e?t.amountPositive+t.amountNegative:"Positive"===e?t.amountPositive:"Negative"===e?t.amountNegative:"Net"===e?!0===i?Math.abs(t.amountPositive-t.amountNegative):t.amountPositive-t.amountNegative:void 0}async function n(){J();var t=q.getStudyById(U).getInputValues().find(t=>"num_rows"===t.id).value,e=q.getStudyById(U).getInputValues().find(t=>"width_percent_of_chart"===t.id).value,i=q.getStudyById(U).getInputValues().find(t=>"delta_to_show"===t.id).value,o=q.getStudyById(U).getInputValues().find(t=>"show_values"===t.id).value;let n=z,r=E,a=W,s=G;try{n=chartWidget.chart().getStudyById(U).getStyleValues().palettes.profile_style_palette.colors[0].color,r=chartWidget.chart().getStudyById(U).getStyleValues().palettes.profile_style_palette.colors[1].color,a=chartWidget.chart().getStudyById(U).getStyleValues().palettes.profile_style_palette.colors[2].color}catch(t){n=z,r=E,a=W}try{s=chartWidget.chart()._chartWidget.properties().paneProperties.background._value}catch(t){s=G}var l=await async function(){var t=q.getVisibleRange();let e,i;var o=[];for(const a of(await q.exportData({includeTime:!0,includedStudies:[]})).data){var n,r=a[0];r>=t.from&&r<=t.to&&(r=a[3],n=a[2],void 0===e?(e=r,i=n):(n>i&&(i=n),r<e&&(e=r),o.push(a)))}return[e,i,o]}(),c=l[0],d=l[1],p=l[2],u=function(){var t=q.getVisibleRange(),e=[Q],i={};for(const c of[{symbol:Q,symbolOI:j}]){const j=c.symbolOI;var o=0<=e.indexOf(c.symbol);i[j]={symbolParent:c.symbol,selected:o}}var n,r={};for(n in M){var a=parseInt(n/1e3);if(a>=t.from&&a<=t.to){r[a]={positive:0,negative:0};var s,l=M[n];for(const j in l)i.hasOwnProperty(j)&&!0===i[j].selected&&(s=l[j].close-l[j].open,r[a][0<=s?"positive":"negative"]+=Math.abs(s))}}return r}();const h=(d-c)/t;var _=[];for(let t=c;t<d;t+=h)_.push({priceFrom:t,priceTo:t+h,amountPositive:0,amountNegative:0,coordinates:[]});for(const D of p){var g=D[0],m=D[2],y=D[3];D[4];if(u.hasOwnProperty(g))for(const L of _){L.priceFrom,L.priceTo;var v=(Math.max(m,L.priceTo)-Math.min(y,L.priceFrom)-(Math.max(m,L.priceTo)-Math.min(m,L.priceTo))-(Math.max(y,L.priceFrom)-Math.min(y,L.priceFrom)))/(m-y);0<v&&(L.amountPositive+=u[g].positive*v,L.amountNegative+=u[g].negative*v)}}let f=0;for(const B of _){var b=H(B,i,!0);f=Math.max(f,b)}var S=Math.min(p.length,5),x={};for(let t=1;t<S;t++){const h=p[t][0]-p[t-1][0];x[h]=1}var w=parseInt(Object.keys(x)[0]);const C=[];var I=q.getVisibleRange();for(let t=I.from;t<=I.to;t+=w)C.push(t);var k=Math.ceil(C.length*(e/100));const A=C[C.length-1];for(const F of _){var N=H(F,i,!0);0<N?(N=N/f,N=Math.ceil(N*k),N=C[C.length-N],F.coordinates=[{time:N,price:F.priceFrom},{time:A,price:F.priceTo}]):F.coordinates=[{time:A,price:F.priceFrom},{time:A,price:F.priceTo}]}let V;for(const R of _)if(R.coordinates.length)if("PositiveAndNegative"===i){var O=R.amountPositive+R.amountNegative,P=R.coordinates[0].time;const A=R.coordinates[1].time;if(0===R.amountNegative||0===R.amountPositive)V=q.createMultipointShape(R.coordinates,{shape:"rectangle",lock:!0,disableSelection:!0,disableSave:!0,disableUndo:!0,zOrder:"top",overrides:{backgroundColor:0<R.amountNegative?r:n,color:s,linewidth:1}});else{const C=[];for(let t=P;t<=A;t+=w)C.push(t);var O=C[Math.ceil(C.length*(R.amountNegative/O))]||C[C.length-1],P=(V=q.createMultipointShape([{time:P,price:R.priceFrom},{time:O,price:R.priceTo}],{shape:"rectangle",lock:!0,disableSelection:!0,disableSave:!0,disableUndo:!0,zOrder:"top",overrides:{backgroundColor:r,color:s,linewidth:1}}),T.push(V),O),O=A;V=q.createMultipointShape([{time:P,price:R.priceFrom},{time:O,price:R.priceTo}],{shape:"rectangle",lock:!0,disableSelection:!0,disableSave:!0,disableUndo:!0,zOrder:"top",overrides:{backgroundColor:n,color:s,linewidth:1}})}T.push(V),!0===o&&(V=q.createMultipointShape([{time:R.coordinates[1].time,price:(R.coordinates[1].price+R.coordinates[0].price)/2}],{shape:"arrow_right",lock:!0,disableSelection:!0,disableSave:!0,disableUndo:!0,zOrder:"top",overrides:{fontsize:10,text:numeral(R.amountNegative).format("0.00a").toUpperCase()+" / "+numeral(R.amountPositive).format("0.00a").toUpperCase(),arrowColor:"#00000000",color:a}}),T.push(V))}else 0<=["Positive","Negative"].indexOf(i)?(V=q.createMultipointShape(R.coordinates,{shape:"rectangle",lock:!0,disableSelection:!0,disableSave:!0,disableUndo:!0,zOrder:"top",overrides:{backgroundColor:"Negative"===i?r:n,color:s,linewidth:1}}),T.push(V),!0===o&&(P="Negative"===i?R.amountNegative:R.amountPositive,V=q.createMultipointShape([{time:R.coordinates[1].time,price:(R.coordinates[1].price+R.coordinates[0].price)/2}],{shape:"arrow_right",lock:!0,disableSelection:!0,disableSave:!0,disableUndo:!0,zOrder:"top",overrides:{fontsize:10,text:numeral(P).format("0.00a").toUpperCase(),arrowColor:"#00000000",color:a}}),T.push(V))):"Net"===i&&(O=H(R,i,!1),V=q.createMultipointShape(R.coordinates,{shape:"rectangle",lock:!0,disableSelection:!0,disableSave:!0,disableUndo:!0,zOrder:"top",overrides:{backgroundColor:O<0?r:n,color:s,linewidth:1}}),T.push(V),!0===o)&&(V=q.createMultipointShape([{time:R.coordinates[1].time,price:(R.coordinates[1].price+R.coordinates[0].price)/2}],{shape:"arrow_right",lock:!0,disableSelection:!0,disableSave:!0,disableUndo:!0,zOrder:"top",overrides:{fontsize:10,text:numeral(O).format("0.00a").toUpperCase(),arrowColor:"#00000000",color:a}}),T.push(V))}let r=null;const a=setInterval(function(){!async function(){if(!0===o)try{o=!1,await n()}catch(t){o=!0}}()},1500);function J(){for(const t of T)try{q.removeEntity(t,{disableUndo:!0})}catch(t){}T=[]}function s(){J(),clearInterval(a),q.onVisibleRangeChanged().unsubscribe(null,l),t.unsubscribe("study_properties_changed",c),t.unsubscribe("study_event",d),t.unsubscribe("study",p)}function l(t,e){o=!0}function c(t){t===U&&(t=q.getStudyById(U).isVisible(),i!=t&&(t||s(),i=t),o=!0)}function d(t,e){"remove"===e&&t===U&&s()}function p(t){t.value,e}q.onVisibleRangeChanged().subscribe(null,l),t.subscribe("study_properties_changed",c),t.subscribe("study_event",d),t.subscribe("study",p),this.init=function(t,e){this._context=t,this._input=e;t=(Q=h(b.Std.ticker(this._context))).split("."),j=t[0]+"_OI."+t[1],e=Q+","+j+"#open_interest";this._context.new_sym(e,b.Std.period(this._context)),o=!0},this.main=function(t,e){try{this._context=t,this._input=e,this._context.select_sym(1);var i=this._context.symbol.time;return isNaN(i)||(M=this._context.symbol.info.coinalyze_indicator_data,JSON.stringify(r)!==JSON.stringify(M[i])&&(r=M[i],o=!0)),[]}catch(t){console.log("OpenInterestDeltaProfileVisibleRange.main() tc error",t)}}}},{name:"AggregatedOIDeltaProfileVisibleRangeCoinMargined",metainfo:{_metainfoVersion:51,id:"AggregatedOIDeltaProfileVisibleRangeCoinMargined@tv-basicstudies-1",description:"Aggregated Open Interest Delta Profile Visible Range COIN-margined Contracts",shortDescription:"Aggregated Open Interest Delta Profile Visible Range COIN-margined Contracts",scriptIdPart:"",is_price_study:!0,is_hidden_study:!1,isCustomIndicator:!0,plots:[{id:"profile_style",type:"bar_colorer",palette:"profile_style_palette"}],palettes:{profile_style_palette:{colors:[{name:"Positive Delta"},{name:"Negative Delta"},{name:"Values color"}]}},inputs:function(){var t=[{id:"num_rows",name:"Rows",type:"integer",defval:24},{id:"width_percent_of_chart",name:"Width (% Of The Chart)",type:"integer",defval:30},{id:"delta_to_show",name:"Show",type:"text",options:["PositiveAndNegative","Positive","Negative","Net"],defval:"PositiveAndNegative",tooltip:"PositiveAndNegative = display, proportionally, positive and negative delta on same row. Positive = display only positive delta. Negative = display only negative delta. Net = the difference between positive delta and negative delta."},{id:"show_values",name:"Show values",type:"bool",defval:!1}];for(const e of H)t.push({id:"contract#"+e.symbol,name:e.name,type:"bool"});return t}(),defaults:{palettes:{profile_style_palette:{colors:[{color:"#2FA215"},{color:"#e12c2c"},{color:"#d1d4dc"}]}},styles:{},inputs:function(){var t={num_rows:24,width_percent_of_chart:30,delta_to_show:"PositiveAndNegative",show_values:!0};for(const e of H)t["contract#"+e.symbol]=!0;return t}()},styles:{profile_style:{title:"Profile Style"}}},constructor:function(){const e="Aggregated Open Interest Delta Profile Visible Range COIN-margined Contracts";let o=!1,i=!0,M={},T=[];const t=chartWidget,q=chartWidget.chart(),U=q.getAllStudies().find(t=>t.name===e).id,z="#2FA215",E="#e12c2c",W="#d1d4dc",G="#000000";let n;function Q(t,e,i){return"PositiveAndNegative"===e?t.amountPositive+t.amountNegative:"Positive"===e?t.amountPositive:"Negative"===e?t.amountNegative:"Net"===e?!0===i?Math.abs(t.amountPositive-t.amountNegative):t.amountPositive-t.amountNegative:void 0}async function r(){j();var t=q.getStudyById(U).getInputValues().find(t=>"num_rows"===t.id).value,e=q.getStudyById(U).getInputValues().find(t=>"width_percent_of_chart"===t.id).value,i=q.getStudyById(U).getInputValues().find(t=>"delta_to_show"===t.id).value,o=q.getStudyById(U).getInputValues().find(t=>"show_values"===t.id).value;let n=z,r=E,a=W,s=G;try{n=chartWidget.chart().getStudyById(U).getStyleValues().palettes.profile_style_palette.colors[0].color,r=chartWidget.chart().getStudyById(U).getStyleValues().palettes.profile_style_palette.colors[1].color,a=chartWidget.chart().getStudyById(U).getStyleValues().palettes.profile_style_palette.colors[2].color}catch(t){n=z,r=E,a=W}try{s=chartWidget.chart()._chartWidget.properties().paneProperties.background._value}catch(t){s=G}var l=await async function(){var t=q.getVisibleRange();let e,i;var o=[];for(const a of(await q.exportData({includeTime:!0,includedStudies:[]})).data){var n,r=a[0];r>=t.from&&r<=t.to&&(r=a[3],n=a[2],void 0===e?(e=r,i=n):(n>i&&(i=n),r<e&&(e=r),o.push(a)))}return[e,i,o]}(),c=l[0],d=l[1],p=l[2],u=function(){var t=q.getVisibleRange(),e=q.getStudyById(U).getInputValues().filter(t=>t.id.startsWith("contract#")&&!0===t.value).map(t=>t.id.split("#")[1]),i={};for(const d of H){var o=d.symbolOI,n=0<=e.indexOf(d.symbol);i[o]={symbolParent:d.symbol,selected:n}}var r,a={};for(r in M){var s=parseInt(r/1e3);if(s>=t.from&&s<=t.to){a[s]={positive:0,negative:0};var l,c=M[r];for(const p in c)i.hasOwnProperty(p)&&!0===i[p].selected&&(l=c[p].close-c[p].open,a[s][0<=l?"positive":"negative"]+=Math.abs(l))}}return a}();const h=(d-c)/t;var _=[];for(let t=c;t<d;t+=h)_.push({priceFrom:t,priceTo:t+h,amountPositive:0,amountNegative:0,coordinates:[]});for(const D of p){var g=D[0],m=D[2],y=D[3];D[4];if(u.hasOwnProperty(g))for(const L of _){L.priceFrom,L.priceTo;var v=(Math.max(m,L.priceTo)-Math.min(y,L.priceFrom)-(Math.max(m,L.priceTo)-Math.min(m,L.priceTo))-(Math.max(y,L.priceFrom)-Math.min(y,L.priceFrom)))/(m-y);0<v&&(L.amountPositive+=u[g].positive*v,L.amountNegative+=u[g].negative*v)}}let f=0;for(const B of _){var b=Q(B,i,!0);f=Math.max(f,b)}var S=Math.min(p.length,5),x={};for(let t=1;t<S;t++){const h=p[t][0]-p[t-1][0];x[h]=1}var w=parseInt(Object.keys(x)[0]);const C=[];var I=q.getVisibleRange();for(let t=I.from;t<=I.to;t+=w)C.push(t);var k=Math.ceil(C.length*(e/100));const A=C[C.length-1];for(const F of _){var N=Q(F,i,!0);0<N?(N=N/f,N=Math.ceil(N*k),N=C[C.length-N],F.coordinates=[{time:N,price:F.priceFrom},{time:A,price:F.priceTo}]):F.coordinates=[{time:A,price:F.priceFrom},{time:A,price:F.priceTo}]}let V;for(const R of _)if(R.coordinates.length)if("PositiveAndNegative"===i){var O=R.amountPositive+R.amountNegative,P=R.coordinates[0].time;const A=R.coordinates[1].time;if(0===R.amountNegative||0===R.amountPositive)V=q.createMultipointShape(R.coordinates,{shape:"rectangle",lock:!0,disableSelection:!0,disableSave:!0,disableUndo:!0,zOrder:"top",overrides:{backgroundColor:0<R.amountNegative?r:n,color:s,linewidth:1}});else{const C=[];for(let t=P;t<=A;t+=w)C.push(t);var O=C[Math.ceil(C.length*(R.amountNegative/O))]||C[C.length-1],P=(V=q.createMultipointShape([{time:P,price:R.priceFrom},{time:O,price:R.priceTo}],{shape:"rectangle",lock:!0,disableSelection:!0,disableSave:!0,disableUndo:!0,zOrder:"top",overrides:{backgroundColor:r,color:s,linewidth:1}}),T.push(V),O),O=A;V=q.createMultipointShape([{time:P,price:R.priceFrom},{time:O,price:R.priceTo}],{shape:"rectangle",lock:!0,disableSelection:!0,disableSave:!0,disableUndo:!0,zOrder:"top",overrides:{backgroundColor:n,color:s,linewidth:1}})}T.push(V),!0===o&&(V=q.createMultipointShape([{time:R.coordinates[1].time,price:(R.coordinates[1].price+R.coordinates[0].price)/2}],{shape:"arrow_right",lock:!0,disableSelection:!0,disableSave:!0,disableUndo:!0,zOrder:"top",overrides:{fontsize:10,text:numeral(R.amountNegative).format("0.00a").toUpperCase()+" / "+numeral(R.amountPositive).format("0.00a").toUpperCase(),arrowColor:"#00000000",color:a}}),T.push(V))}else 0<=["Positive","Negative"].indexOf(i)?(V=q.createMultipointShape(R.coordinates,{shape:"rectangle",lock:!0,disableSelection:!0,disableSave:!0,disableUndo:!0,zOrder:"top",overrides:{backgroundColor:"Negative"===i?r:n,color:s,linewidth:1}}),T.push(V),!0===o&&(P="Negative"===i?R.amountNegative:R.amountPositive,V=q.createMultipointShape([{time:R.coordinates[1].time,price:(R.coordinates[1].price+R.coordinates[0].price)/2}],{shape:"arrow_right",lock:!0,disableSelection:!0,disableSave:!0,disableUndo:!0,zOrder:"top",overrides:{fontsize:10,text:numeral(P).format("0.00a").toUpperCase(),arrowColor:"#00000000",color:a}}),T.push(V))):"Net"===i&&(O=Q(R,i,!1),V=q.createMultipointShape(R.coordinates,{shape:"rectangle",lock:!0,disableSelection:!0,disableSave:!0,disableUndo:!0,zOrder:"top",overrides:{backgroundColor:O<0?r:n,color:s,linewidth:1}}),T.push(V),!0===o)&&(V=q.createMultipointShape([{time:R.coordinates[1].time,price:(R.coordinates[1].price+R.coordinates[0].price)/2}],{shape:"arrow_right",lock:!0,disableSelection:!0,disableSave:!0,disableUndo:!0,zOrder:"top",overrides:{fontsize:10,text:numeral(O).format("0.00a").toUpperCase(),arrowColor:"#00000000",color:a}}),T.push(V))}let a=null;const s=setInterval(function(){!async function(){if(!0===o)try{o=!1,await r()}catch(t){o=!0}}()},1500);function j(){for(const t of T)try{q.removeEntity(t,{disableUndo:!0})}catch(t){}T=[]}function l(){j(),clearInterval(s),q.onVisibleRangeChanged().unsubscribe(null,c),t.unsubscribe("study_properties_changed",d),t.unsubscribe("study_event",p),t.unsubscribe("study",u)}function c(t,e){o=!0}function d(t){t===U&&(t=q.getStudyById(U).isVisible(),i!=t&&(t||l(),i=t),o=!0)}function p(t,e){"remove"===e&&t===U&&l()}function u(t){t.value,e}q.onVisibleRangeChanged().subscribe(null,c),t.subscribe("study_properties_changed",d),t.subscribe("study_event",p),t.subscribe("study",u),this.init=function(t,e){this._context=t,this._input=e;t=(n=h(b.Std.ticker(this._context)))+","+H.map(function(t){return t.symbolOI}).join(",")+"#aggregated_oi_usd_denominated";this._context.new_sym(t,b.Std.period(this._context)),o=!0},this.main=function(t,e){try{this._context=t,this._input=e,this._context.select_sym(1);var i=this._context.symbol.time;return isNaN(i)||(M=this._context.symbol.info.coinalyze_indicator_data,JSON.stringify(a)!==JSON.stringify(M[i])&&(a=M[i],o=!0)),[]}catch(t){console.log("AggregatedOIDeltaProfileVisibleRangeCoinMargined.main() tc error",t)}}}},{name:"AggregatedOIDeltaProfileVisibleRangeStablecoinMargined",metainfo:{_metainfoVersion:51,id:"AggregatedOIDeltaProfileVisibleRangeStablecoinMargined@tv-basicstudies-1",description:"Aggregated Open Interest Delta Profile Visible Range STABLECOIN-margined Contracts",shortDescription:"Aggregated Open Interest Delta Profile Visible Range STABLECOIN-margined Contracts",scriptIdPart:"",is_price_study:!0,is_hidden_study:!1,isCustomIndicator:!0,plots:[{id:"profile_style",type:"bar_colorer",palette:"profile_style_palette"}],palettes:{profile_style_palette:{colors:[{name:"Positive Delta"},{name:"Negative Delta"},{name:"Values color"}]}},inputs:function(){var t=[{id:"num_rows",name:"Rows",type:"integer",defval:24},{id:"width_percent_of_chart",name:"Width (% Of The Chart)",type:"integer",defval:30},{id:"delta_to_show",name:"Show",type:"text",options:["PositiveAndNegative","Positive","Negative","Net"],defval:"PositiveAndNegative",tooltip:"PositiveAndNegative = display, proportionally, positive and negative delta on same row. Positive = display only positive delta. Negative = display only negative delta. Net = the difference between positive delta and negative delta."},{id:"show_values",name:"Show values",type:"bool",defval:!1}];for(const e of $)t.push({id:"contract#"+e.symbol,name:e.name,type:"bool"});return t}(),defaults:{palettes:{profile_style_palette:{colors:[{color:"#2FA215"},{color:"#e12c2c"},{color:"#d1d4dc"}]}},styles:{},inputs:function(){var t={num_rows:24,width_percent_of_chart:30,delta_to_show:"PositiveAndNegative",show_values:!0};for(const e of $)t["contract#"+e.symbol]=!0;return t}()},styles:{profile_style:{title:"Profile Style"}}},constructor:function(){const e="Aggregated Open Interest Delta Profile Visible Range STABLECOIN-margined Contracts";let o=!1,i=!0,M={},T=[];const t=chartWidget,q=chartWidget.chart(),U=q.getAllStudies().find(t=>t.name===e).id,z="#2FA215",E="#e12c2c",W="#d1d4dc",G="#000000";let n;function Q(t,e,i){return"PositiveAndNegative"===e?t.amountPositive+t.amountNegative:"Positive"===e?t.amountPositive:"Negative"===e?t.amountNegative:"Net"===e?!0===i?Math.abs(t.amountPositive-t.amountNegative):t.amountPositive-t.amountNegative:void 0}async function r(){j();var t=q.getStudyById(U).getInputValues().find(t=>"num_rows"===t.id).value,e=q.getStudyById(U).getInputValues().find(t=>"width_percent_of_chart"===t.id).value,i=q.getStudyById(U).getInputValues().find(t=>"delta_to_show"===t.id).value,o=q.getStudyById(U).getInputValues().find(t=>"show_values"===t.id).value;let n=z,r=E,a=W,s=G;try{n=chartWidget.chart().getStudyById(U).getStyleValues().palettes.profile_style_palette.colors[0].color,r=chartWidget.chart().getStudyById(U).getStyleValues().palettes.profile_style_palette.colors[1].color,a=chartWidget.chart().getStudyById(U).getStyleValues().palettes.profile_style_palette.colors[2].color}catch(t){n=z,r=E,a=W}try{s=chartWidget.chart()._chartWidget.properties().paneProperties.background._value}catch(t){s=G}var l=await async function(){var t=q.getVisibleRange();let e,i;var o=[];for(const a of(await q.exportData({includeTime:!0,includedStudies:[]})).data){var n,r=a[0];r>=t.from&&r<=t.to&&(r=a[3],n=a[2],void 0===e?(e=r,i=n):(n>i&&(i=n),r<e&&(e=r),o.push(a)))}return[e,i,o]}(),c=l[0],d=l[1],p=l[2],u=function(){var t=q.getVisibleRange(),e=q.getStudyById(U).getInputValues().filter(t=>t.id.startsWith("contract#")&&!0===t.value).map(t=>t.id.split("#")[1]),i={};for(const d of $){var o=d.symbolOI,n=0<=e.indexOf(d.symbol);i[o]={symbolParent:d.symbol,selected:n}}var r,a={};for(r in M){var s=parseInt(r/1e3);if(s>=t.from&&s<=t.to){a[s]={positive:0,negative:0};var l,c=M[r];for(const p in c)i.hasOwnProperty(p)&&!0===i[p].selected&&(l=c[p].close-c[p].open,a[s][0<=l?"positive":"negative"]+=Math.abs(l))}}return a}();const h=(d-c)/t;var _=[];for(let t=c;t<d;t+=h)_.push({priceFrom:t,priceTo:t+h,amountPositive:0,amountNegative:0,coordinates:[]});for(const D of p){var g=D[0],m=D[2],y=D[3];D[4];if(u.hasOwnProperty(g))for(const L of _){L.priceFrom,L.priceTo;var v=(Math.max(m,L.priceTo)-Math.min(y,L.priceFrom)-(Math.max(m,L.priceTo)-Math.min(m,L.priceTo))-(Math.max(y,L.priceFrom)-Math.min(y,L.priceFrom)))/(m-y);0<v&&(L.amountPositive+=u[g].positive*v,L.amountNegative+=u[g].negative*v)}}let f=0;for(const B of _){var b=Q(B,i,!0);f=Math.max(f,b)}var S=Math.min(p.length,5),x={};for(let t=1;t<S;t++){const h=p[t][0]-p[t-1][0];x[h]=1}var w=parseInt(Object.keys(x)[0]);const C=[];var I=q.getVisibleRange();for(let t=I.from;t<=I.to;t+=w)C.push(t);var k=Math.ceil(C.length*(e/100));const A=C[C.length-1];for(const F of _){var N=Q(F,i,!0);0<N?(N=N/f,N=Math.ceil(N*k),N=C[C.length-N],F.coordinates=[{time:N,price:F.priceFrom},{time:A,price:F.priceTo}]):F.coordinates=[{time:A,price:F.priceFrom},{time:A,price:F.priceTo}]}let V;for(const R of _)if(R.coordinates.length)if("PositiveAndNegative"===i){var O=R.amountPositive+R.amountNegative,P=R.coordinates[0].time;const A=R.coordinates[1].time;if(0===R.amountNegative||0===R.amountPositive)V=q.createMultipointShape(R.coordinates,{shape:"rectangle",lock:!0,disableSelection:!0,disableSave:!0,disableUndo:!0,zOrder:"top",overrides:{backgroundColor:0<R.amountNegative?r:n,color:s,linewidth:1}});else{const C=[];for(let t=P;t<=A;t+=w)C.push(t);var O=C[Math.ceil(C.length*(R.amountNegative/O))]||C[C.length-1],P=(V=q.createMultipointShape([{time:P,price:R.priceFrom},{time:O,price:R.priceTo}],{shape:"rectangle",lock:!0,disableSelection:!0,disableSave:!0,disableUndo:!0,zOrder:"top",overrides:{backgroundColor:r,color:s,linewidth:1}}),T.push(V),O),O=A;V=q.createMultipointShape([{time:P,price:R.priceFrom},{time:O,price:R.priceTo}],{shape:"rectangle",lock:!0,disableSelection:!0,disableSave:!0,disableUndo:!0,zOrder:"top",overrides:{backgroundColor:n,color:s,linewidth:1}})}T.push(V),!0===o&&(V=q.createMultipointShape([{time:R.coordinates[1].time,price:(R.coordinates[1].price+R.coordinates[0].price)/2}],{shape:"arrow_right",lock:!0,disableSelection:!0,disableSave:!0,disableUndo:!0,zOrder:"top",overrides:{fontsize:10,text:numeral(R.amountNegative).format("0.00a").toUpperCase()+" / "+numeral(R.amountPositive).format("0.00a").toUpperCase(),arrowColor:"#00000000",color:a}}),T.push(V))}else 0<=["Positive","Negative"].indexOf(i)?(V=q.createMultipointShape(R.coordinates,{shape:"rectangle",lock:!0,disableSelection:!0,disableSave:!0,disableUndo:!0,zOrder:"top",overrides:{backgroundColor:"Negative"===i?r:n,color:s,linewidth:1}}),T.push(V),!0===o&&(P="Negative"===i?R.amountNegative:R.amountPositive,V=q.createMultipointShape([{time:R.coordinates[1].time,price:(R.coordinates[1].price+R.coordinates[0].price)/2}],{shape:"arrow_right",lock:!0,disableSelection:!0,disableSave:!0,disableUndo:!0,zOrder:"top",overrides:{fontsize:10,text:numeral(P).format("0.00a").toUpperCase(),arrowColor:"#00000000",color:a}}),T.push(V))):"Net"===i&&(O=Q(R,i,!1),V=q.createMultipointShape(R.coordinates,{shape:"rectangle",lock:!0,disableSelection:!0,disableSave:!0,disableUndo:!0,zOrder:"top",overrides:{backgroundColor:O<0?r:n,color:s,linewidth:1}}),T.push(V),!0===o)&&(V=q.createMultipointShape([{time:R.coordinates[1].time,price:(R.coordinates[1].price+R.coordinates[0].price)/2}],{shape:"arrow_right",lock:!0,disableSelection:!0,disableSave:!0,disableUndo:!0,zOrder:"top",overrides:{fontsize:10,text:numeral(O).format("0.00a").toUpperCase(),arrowColor:"#00000000",color:a}}),T.push(V))}let a=null;const s=setInterval(function(){!async function(){if(!0===o)try{o=!1,await r()}catch(t){o=!0}}()},1500);function j(){for(const t of T)try{q.removeEntity(t,{disableUndo:!0})}catch(t){}T=[]}function l(){j(),clearInterval(s),q.onVisibleRangeChanged().unsubscribe(null,c),t.unsubscribe("study_properties_changed",d),t.unsubscribe("study_event",p),t.unsubscribe("study",u)}function c(t,e){o=!0}function d(t){t===U&&(t=q.getStudyById(U).isVisible(),i!=t&&(t||l(),i=t),o=!0)}function p(t,e){"remove"===e&&t===U&&l()}function u(t){t.value,e}q.onVisibleRangeChanged().subscribe(null,c),t.subscribe("study_properties_changed",d),t.subscribe("study_event",p),t.subscribe("study",u),this.init=function(t,e){this._context=t,this._input=e;t=(n=h(b.Std.ticker(this._context)))+","+$.map(function(t){return t.symbolOI}).join(",")+"#aggregated_oi_coin_denominated";this._context.new_sym(t,b.Std.period(this._context)),o=!0},this.main=function(t,e){try{this._context=t,this._input=e,this._context.select_sym(1);var i=this._context.symbol.time;return isNaN(i)||(M=this._context.symbol.info.coinalyze_indicator_data,JSON.stringify(a)!==JSON.stringify(M[i])&&(a=M[i],o=!0)),[]}catch(t){console.log("AggregatedOIDeltaProfileVisibleRangeStablecoinMargined.main() tc error",t)}}}},{name:"AggregatedOIDeltaProfileVisibleRangeStablecoinAndCoinMargined",metainfo:{_metainfoVersion:51,id:"AggregatedOIDeltaProfileVisibleRangeStablecoinAndCoinMargined@tv-basicstudies-1",description:"Aggregated Open Interest Delta Profile Visible Range STABLECOIN+COIN-margined Contracts",shortDescription:"Aggregated Open Interest Delta Profile Visible Range STABLECOIN+COIN-margined Contracts",scriptIdPart:"",is_price_study:!0,is_hidden_study:!1,isCustomIndicator:!0,plots:[{id:"profile_style",type:"bar_colorer",palette:"profile_style_palette"}],palettes:{profile_style_palette:{colors:[{name:"Positive Delta"},{name:"Negative Delta"},{name:"Values color"}]}},inputs:function(){var t=[{id:"num_rows",name:"Rows",type:"integer",defval:24},{id:"width_percent_of_chart",name:"Width (% Of The Chart)",type:"integer",defval:30},{id:"delta_to_show",name:"Show",type:"text",options:["PositiveAndNegative","Positive","Negative","Net"],defval:"PositiveAndNegative",tooltip:"PositiveAndNegative = display, proportionally, positive and negative delta on same row. Positive = display only positive delta. Negative = display only negative delta. Net = the difference between positive delta and negative delta."},{id:"show_values",name:"Show values",type:"bool",defval:!1},{id:"convert_to_usd",name:"Convert to USD",type:"bool",defval:!1}];for(const e of X)t.push({id:"contract#"+e.symbol,name:`${e.nameWithoutExchange} (${"l"===e.fc_type?"stable-m":"coin-m"}) - `+e.exchangeName,type:"bool"});return t}(),defaults:{palettes:{profile_style_palette:{colors:[{color:"#2FA215"},{color:"#e12c2c"},{color:"#d1d4dc"}]}},styles:{},inputs:function(){var t={num_rows:24,width_percent_of_chart:30,delta_to_show:"PositiveAndNegative",show_values:!0,convert_to_usd:!1};for(const e of X)t["contract#"+e.symbol]=!0;return t}()},styles:{profile_style:{title:"Profile Style"}}},constructor:function(){const e="Aggregated Open Interest Delta Profile Visible Range STABLECOIN+COIN-margined Contracts";let o=!1,i=!0,T={},q={},U=[];const t=chartWidget,z=chartWidget.chart(),E=z.getAllStudies().find(t=>t.name===e).id,W="#2FA215",G="#e12c2c",Q="#d1d4dc",j="#000000";let n;function H(t,e,i){return"PositiveAndNegative"===e?t.amountPositive+t.amountNegative:"Positive"===e?t.amountPositive:"Negative"===e?t.amountNegative:"Net"===e?!0===i?Math.abs(t.amountPositive-t.amountNegative):t.amountPositive-t.amountNegative:void 0}async function r(){J();var t=z.getStudyById(E).getInputValues().find(t=>"num_rows"===t.id).value,e=z.getStudyById(E).getInputValues().find(t=>"width_percent_of_chart"===t.id).value,i=z.getStudyById(E).getInputValues().find(t=>"delta_to_show"===t.id).value,o=z.getStudyById(E).getInputValues().find(t=>"show_values"===t.id).value,n=z.getStudyById(E).getInputValues().find(t=>"convert_to_usd"===t.id).value;let r=W,a=G,s=Q,l=j;try{r=chartWidget.chart().getStudyById(E).getStyleValues().palettes.profile_style_palette.colors[0].color,a=chartWidget.chart().getStudyById(E).getStyleValues().palettes.profile_style_palette.colors[1].color,s=chartWidget.chart().getStudyById(E).getStyleValues().palettes.profile_style_palette.colors[2].color}catch(t){r=W,a=G,s=Q}try{l=chartWidget.chart()._chartWidget.properties().paneProperties.background._value}catch(t){l=j}var c=await async function(){var t=z.getVisibleRange();let e,i;var o=[];for(const a of(await z.exportData({includeTime:!0,includedStudies:[]})).data){var n,r=a[0];r>=t.from&&r<=t.to&&(r=a[3],n=a[2],void 0===e?(e=r,i=n):(n>i&&(i=n),r<e&&(e=r),o.push(a)))}return[e,i,o]}(),d=c[0],p=c[1],u=c[2],h=function(i){var t=z.getVisibleRange(),e=z.getStudyById(E).getInputValues().filter(t=>t.id.startsWith("contract#")&&!0===t.value).map(t=>t.id.split("#")[1]),o={};for(const _ of X){var n=_.symbolOI,r=0<=e.indexOf(_.symbol);o[n]={symbolParent:_.symbol,selected:r,fc_type:_.fc_type}}var a,s={};for(a in T){var l=parseInt(a/1e3);if(l>=t.from&&l<=t.to){s[l]={positive:0,negative:0};var c,d=T[a],p=q[a];let t=0,e=0;for(c in p){var u=p[c];t+=(u.open+u.close)/2,e++}var h=t/e;for(const g in d)if(o.hasOwnProperty(g)&&!0===o[g].selected){let t;"l"===o[g].fc_type?t=!0===i?d[g].close*h-d[g].open*h:d[g].close-d[g].open:"i"===o[g].fc_type&&(t=!0===i?d[g].close-d[g].open:d[g].close/h-d[g].open/h),s[l][0<=t?"positive":"negative"]+=Math.abs(t)}}}return s}(n);const _=(p-d)/t;var g=[];for(let t=d;t<p;t+=_)g.push({priceFrom:t,priceTo:t+_,amountPositive:0,amountNegative:0,coordinates:[]});for(const D of u){var m=D[0],y=D[2],v=D[3];D[4];if(h.hasOwnProperty(m))for(const L of g){L.priceFrom,L.priceTo;var f=(Math.max(y,L.priceTo)-Math.min(v,L.priceFrom)-(Math.max(y,L.priceTo)-Math.min(y,L.priceTo))-(Math.max(v,L.priceFrom)-Math.min(v,L.priceFrom)))/(y-v);0<f&&(L.amountPositive+=h[m].positive*f,L.amountNegative+=h[m].negative*f)}}let b=0;for(const B of g){var S=H(B,i,!0);b=Math.max(b,S)}var k=Math.min(u.length,5),x={};for(let t=1;t<k;t++){const _=u[t][0]-u[t-1][0];x[_]=1}var w=parseInt(Object.keys(x)[0]);const C=[];var I=z.getVisibleRange();for(let t=I.from;t<=I.to;t+=w)C.push(t);var M=Math.ceil(C.length*(e/100));const A=C[C.length-1];for(const F of g){var N=H(F,i,!0);0<N?(N=N/b,N=Math.ceil(N*M),N=C[C.length-N],F.coordinates=[{time:N,price:F.priceFrom},{time:A,price:F.priceTo}]):F.coordinates=[{time:A,price:F.priceFrom},{time:A,price:F.priceTo}]}let V;for(const R of g)if(R.coordinates.length)if("PositiveAndNegative"===i){var O=R.amountPositive+R.amountNegative,P=R.coordinates[0].time;const A=R.coordinates[1].time;if(0===R.amountNegative||0===R.amountPositive)V=z.createMultipointShape(R.coordinates,{shape:"rectangle",lock:!0,disableSelection:!0,disableSave:!0,disableUndo:!0,zOrder:"top",overrides:{backgroundColor:0<R.amountNegative?a:r,color:l,linewidth:1}});else{const C=[];for(let t=P;t<=A;t+=w)C.push(t);var O=C[Math.ceil(C.length*(R.amountNegative/O))]||C[C.length-1],P=(V=z.createMultipointShape([{time:P,price:R.priceFrom},{time:O,price:R.priceTo}],{shape:"rectangle",lock:!0,disableSelection:!0,disableSave:!0,disableUndo:!0,zOrder:"top",overrides:{backgroundColor:a,color:l,linewidth:1}}),U.push(V),O),O=A;V=z.createMultipointShape([{time:P,price:R.priceFrom},{time:O,price:R.priceTo}],{shape:"rectangle",lock:!0,disableSelection:!0,disableSave:!0,disableUndo:!0,zOrder:"top",overrides:{backgroundColor:r,color:l,linewidth:1}})}U.push(V),!0===o&&(V=z.createMultipointShape([{time:R.coordinates[1].time,price:(R.coordinates[1].price+R.coordinates[0].price)/2}],{shape:"arrow_right",lock:!0,disableSelection:!0,disableSave:!0,disableUndo:!0,zOrder:"top",overrides:{fontsize:10,text:numeral(R.amountNegative).format("0.00a").toUpperCase()+" / "+numeral(R.amountPositive).format("0.00a").toUpperCase(),arrowColor:"#00000000",color:s}}),U.push(V))}else 0<=["Positive","Negative"].indexOf(i)?(V=z.createMultipointShape(R.coordinates,{shape:"rectangle",lock:!0,disableSelection:!0,disableSave:!0,disableUndo:!0,zOrder:"top",overrides:{backgroundColor:"Negative"===i?a:r,color:l,linewidth:1}}),U.push(V),!0===o&&(P="Negative"===i?R.amountNegative:R.amountPositive,V=z.createMultipointShape([{time:R.coordinates[1].time,price:(R.coordinates[1].price+R.coordinates[0].price)/2}],{shape:"arrow_right",lock:!0,disableSelection:!0,disableSave:!0,disableUndo:!0,zOrder:"top",overrides:{fontsize:10,text:numeral(P).format("0.00a").toUpperCase(),arrowColor:"#00000000",color:s}}),U.push(V))):"Net"===i&&(O=H(R,i,!1),V=z.createMultipointShape(R.coordinates,{shape:"rectangle",lock:!0,disableSelection:!0,disableSave:!0,disableUndo:!0,zOrder:"top",overrides:{backgroundColor:O<0?a:r,color:l,linewidth:1}}),U.push(V),!0===o)&&(V=z.createMultipointShape([{time:R.coordinates[1].time,price:(R.coordinates[1].price+R.coordinates[0].price)/2}],{shape:"arrow_right",lock:!0,disableSelection:!0,disableSave:!0,disableUndo:!0,zOrder:"top",overrides:{fontsize:10,text:numeral(O).format("0.00a").toUpperCase(),arrowColor:"#00000000",color:s}}),U.push(V))}let a=null;const s=setInterval(function(){!async function(){if(!0===o)try{o=!1,await r()}catch(t){o=!0}}()},1500);function J(){for(const t of U)try{z.removeEntity(t,{disableUndo:!0})}catch(t){}U=[]}function l(){J(),clearInterval(s),z.onVisibleRangeChanged().unsubscribe(null,c),t.unsubscribe("study_properties_changed",d),t.unsubscribe("study_event",p),t.unsubscribe("study",u)}function c(t,e){o=!0}function d(t){t===E&&(t=z.getStudyById(E).isVisible(),i!=t&&(t||l(),i=t),o=!0)}function p(t,e){"remove"===e&&t===E&&l()}function u(t){t.value,e}z.onVisibleRangeChanged().subscribe(null,c),t.subscribe("study_properties_changed",d),t.subscribe("study_event",p),t.subscribe("study",u),this.init=function(t,e){this._context=t,this._input=e;t=(n=h(b.Std.ticker(this._context)))+","+X.map(function(t){return t.symbolOI}).join(",")+"#aggregated_oi_coin_and_usd_denominated";this._context.new_sym(t,b.Std.period(this._context)),o=!0},this.main=function(t,e){try{this._context=t,this._input=e,this._context.select_sym(1);var i=this._context.symbol.time;return isNaN(i)||(T=this._context.symbol.info.coinalyze_indicator_data,q=this._context.symbol.info.coinalyze_data_for_conversion,JSON.stringify(a)!==JSON.stringify(T[i])&&(a=T[i],o=!0)),[]}catch(t){console.log("AggregatedOIDeltaProfileVisibleRangeStablecoinAndCoinMargined.main() tc error",t)}}}},{name:"AggregatedLiquidationsProfileVisibleRangeCoinMargined",metainfo:{_metainfoVersion:51,id:"AggregatedLiquidationsProfileVisibleRangeCoinMargined@tv-basicstudies-1",description:"Aggregated Liquidations Profile Visible Range COIN-margined Contracts",shortDescription:"Aggregated Liquidations Profile Visible Range COIN-margined Contracts",scriptIdPart:"",is_price_study:!0,is_hidden_study:!1,isCustomIndicator:!0,plots:[{id:"profile_style",type:"bar_colorer",palette:"profile_style_palette"}],palettes:{profile_style_palette:{colors:[{name:"Shorts liquidation (Buy)"},{name:"Longs liquidation (Sell)"},{name:"Values color"}]}},inputs:function(){var t=[{id:"num_rows",name:"Rows",type:"integer",defval:24},{id:"width_percent_of_chart",name:"Width (% Of The Chart)",type:"integer",defval:30},{id:"liquidations_to_show",name:"Liquidation side",type:"text",options:["LongsAndShorts","Longs","Shorts"],defval:"LongsAndShorts"},{id:"show_values",name:"Show values",type:"bool",defval:!1}];for(const e of j)t.push({id:"contract#"+e.symbol,name:e.name,type:"bool"});return t}(),defaults:{palettes:{profile_style_palette:{colors:[{color:"#2FA215"},{color:"#e12c2c"},{color:"#d1d4dc"}]}},styles:{},inputs:function(){var t={num_rows:24,width_percent_of_chart:30,liquidations_to_show:"LongsAndShorts",show_values:!0};for(const e of j)t["contract#"+e.symbol]=!0;return t}()},styles:{profile_style:{title:"Profile Style"}}},constructor:function(){const e="Aggregated Liquidations Profile Visible Range COIN-margined Contracts";let o=!1,i=!0,M={},T=[];const t=chartWidget,q=chartWidget.chart(),U=q.getAllStudies().find(t=>t.name===e).id,z="#2FA215",E="#e12c2c",W="#d1d4dc",G="#000000";let n;async function r(){Q();var t=q.getStudyById(U).getInputValues().find(t=>"num_rows"===t.id).value,e=q.getStudyById(U).getInputValues().find(t=>"width_percent_of_chart"===t.id).value,i=q.getStudyById(U).getInputValues().find(t=>"liquidations_to_show"===t.id).value,o=q.getStudyById(U).getInputValues().find(t=>"show_values"===t.id).value;let n=z,r=E,a=W,s=G;try{n=chartWidget.chart().getStudyById(U).getStyleValues().palettes.profile_style_palette.colors[0].color,r=chartWidget.chart().getStudyById(U).getStyleValues().palettes.profile_style_palette.colors[1].color,a=chartWidget.chart().getStudyById(U).getStyleValues().palettes.profile_style_palette.colors[2].color}catch(t){n=z,r=E,a=W}try{s=chartWidget.chart()._chartWidget.properties().paneProperties.background._value}catch(t){s=G}var l=await async function(){var t=q.getVisibleRange();let e,i;var o=[];for(const a of(await q.exportData({includeTime:!0,includedStudies:[]})).data){var n,r=a[0];r>=t.from&&r<=t.to&&(r=a[3],n=a[2],void 0===e?(e=r,i=n):(n>i&&(i=n),r<e&&(e=r),o.push(a)))}return[e,i,o]}(),c=l[0],d=l[1],p=l[2],u=function(){var t=q.getVisibleRange(),e=q.getStudyById(U).getInputValues().filter(t=>t.id.startsWith("contract#")&&!0===t.value).map(t=>t.id.split("#")[1]),i={};for(const d of j){var o=d.symbolLQB,n=d.symbolLQS,r=0<=e.indexOf(d.symbol);i[o]={lqType:"lqb",symbolParent:d.symbol,selected:r},i[n]={lqType:"lqs",symbolParent:d.symbol,selected:r}}var a,s={};for(a in M){var l=parseInt(a/1e3);if(l>=t.from&&l<=t.to){s[l]={lqb:0,lqs:0};var c=M[a];for(const p in c)i.hasOwnProperty(p)&&!0===i[p].selected&&(s[l][i[p].lqType]+=c[p].lq_volume)}}return s}();const h=(d-c)/t;var _=[];for(let t=c;t<d;t+=h)_.push({priceFrom:t,priceTo:t+h,amountBuy:0,amountSell:0,coordinates:[]});for(const D of p){var g=D[0],m=D[2],y=D[3];D[4];if(u.hasOwnProperty(g))for(const L of _){L.priceFrom,L.priceTo;var v=(Math.max(m,L.priceTo)-Math.min(y,L.priceFrom)-(Math.max(m,L.priceTo)-Math.min(m,L.priceTo))-(Math.max(y,L.priceFrom)-Math.min(y,L.priceFrom)))/(m-y);0<v&&(L.amountBuy+=u[g].lqb*v,L.amountSell+=u[g].lqs*v)}}let f=0;for(const B of _){var b="LongsAndShorts"===i?B.amountBuy+B.amountSell:"Longs"===i?B.amountSell:B.amountBuy;f=Math.max(f,b)}var S=Math.min(p.length,5),x={};for(let t=1;t<S;t++){const h=p[t][0]-p[t-1][0];x[h]=1}var w=parseInt(Object.keys(x)[0]);const C=[];var I=q.getVisibleRange();for(let t=I.from;t<=I.to;t+=w)C.push(t);var k=Math.ceil(C.length*(e/100));const A=C[C.length-1];for(const F of _){var N="LongsAndShorts"===i?F.amountBuy+F.amountSell:"Longs"===i?F.amountSell:F.amountBuy;0<N?(N=N/f,N=Math.ceil(N*k),N=C[C.length-N],F.coordinates=[{time:N,price:F.priceFrom},{time:A,price:F.priceTo}]):F.coordinates=[{time:A,price:F.priceFrom},{time:A,price:F.priceTo}]}let V;for(const R of _)if(R.coordinates.length)if("LongsAndShorts"===i){var O=R.amountBuy+R.amountSell,P=R.coordinates[0].time;const A=R.coordinates[1].time;if(0===R.amountSell||0===R.amountBuy)V=q.createMultipointShape(R.coordinates,{shape:"rectangle",lock:!0,disableSelection:!0,disableSave:!0,disableUndo:!0,zOrder:"top",overrides:{backgroundColor:0<R.amountSell?r:n,color:s,linewidth:1}});else{const C=[];for(let t=P;t<=A;t+=w)C.push(t);var O=C[Math.ceil(C.length*(R.amountSell/O))]||C[C.length-1],P=(V=q.createMultipointShape([{time:P,price:R.priceFrom},{time:O,price:R.priceTo}],{shape:"rectangle",lock:!0,disableSelection:!0,disableSave:!0,disableUndo:!0,zOrder:"top",overrides:{backgroundColor:r,color:s,linewidth:1}}),T.push(V),O),O=A;V=q.createMultipointShape([{time:P,price:R.priceFrom},{time:O,price:R.priceTo}],{shape:"rectangle",lock:!0,disableSelection:!0,disableSave:!0,disableUndo:!0,zOrder:"top",overrides:{backgroundColor:n,color:s,linewidth:1}})}T.push(V),!0===o&&(V=q.createMultipointShape([{time:R.coordinates[1].time,price:(R.coordinates[1].price+R.coordinates[0].price)/2}],{shape:"arrow_right",lock:!0,disableSelection:!0,disableSave:!0,disableUndo:!0,zOrder:"top",overrides:{fontsize:10,text:numeral(R.amountSell).format("0.00a").toUpperCase()+" / "+numeral(R.amountBuy).format("0.00a").toUpperCase(),arrowColor:"#00000000",color:a}}),T.push(V))}else V=q.createMultipointShape(R.coordinates,{shape:"rectangle",lock:!0,disableSelection:!0,disableSave:!0,disableUndo:!0,zOrder:"top",overrides:{backgroundColor:"Longs"===i?r:n,color:s,linewidth:1}}),T.push(V),!0===o&&(P="Longs"===i?R.amountSell:R.amountBuy,V=q.createMultipointShape([{time:R.coordinates[1].time,price:(R.coordinates[1].price+R.coordinates[0].price)/2}],{shape:"arrow_right",lock:!0,disableSelection:!0,disableSave:!0,disableUndo:!0,zOrder:"top",overrides:{fontsize:10,text:numeral(P).format("0.00a").toUpperCase(),arrowColor:"#00000000",color:a}}),T.push(V))}let a=null;const s=setInterval(function(){!async function(){if(!0===o)try{o=!1,await r()}catch(t){o=!0}}()},1500);function Q(){for(const t of T)try{q.removeEntity(t,{disableUndo:!0})}catch(t){}T=[]}function l(){Q(),clearInterval(s),q.onVisibleRangeChanged().unsubscribe(null,c),t.unsubscribe("study_properties_changed",d),t.unsubscribe("study_event",p),t.unsubscribe("study",u)}function c(t,e){o=!0}function d(t){t===U&&(t=q.getStudyById(U).isVisible(),i!=t&&(t||l(),i=t),o=!0)}function p(t,e){"remove"===e&&t===U&&l()}function u(t){t.value,e}q.onVisibleRangeChanged().subscribe(null,c),t.subscribe("study_properties_changed",d),t.subscribe("study_event",p),t.subscribe("study",u),this.init=function(t,e){this._context=t,this._input=e;t=(n=h(b.Std.ticker(this._context)))+","+j.map(function(t){return t.symbolLQB+","+t.symbolLQS}).join(",")+"#aggregated_lq_usd_denominated";this._context.new_sym(t,b.Std.period(this._context)),o=!0},this.main=function(t,e){try{this._context=t,this._input=e,this._context.select_sym(1);var i=this._context.symbol.time;return isNaN(i)||(M=this._context.symbol.info.coinalyze_indicator_data,JSON.stringify(a)!==JSON.stringify(M[i])&&(a=M[i],o=!0)),[]}catch(t){console.log("AggregatedLiquidationsProfileVisibleRangeCoinMargined.main() tc error",t)}}}},{name:"AggregatedLiquidationsProfileVisibleRangeStablecoinMargined",metainfo:{_metainfoVersion:51,id:"AggregatedLiquidationsProfileVisibleRangeStablecoinMargined@tv-basicstudies-1",description:"Aggregated Liquidations Profile Visible Range STABLECOIN-margined Contracts",shortDescription:"Aggregated Liquidations Profile Visible Range STABLECOIN-margined Contracts",scriptIdPart:"",is_price_study:!0,is_hidden_study:!1,isCustomIndicator:!0,plots:[{id:"profile_style",type:"bar_colorer",palette:"profile_style_palette"}],palettes:{profile_style_palette:{colors:[{name:"Shorts liquidation (Buy)"},{name:"Longs liquidation (Sell)"},{name:"Values color"}]}},inputs:function(){var t=[{id:"num_rows",name:"Rows",type:"integer",defval:24},{id:"width_percent_of_chart",name:"Width (% Of The Chart)",type:"integer",defval:30},{id:"liquidations_to_show",name:"Liquidation side",type:"text",options:["LongsAndShorts","Longs","Shorts"],defval:"LongsAndShorts"},{id:"show_values",name:"Show values",type:"bool",defval:!1}];for(const e of J)t.push({id:"contract#"+e.symbol,name:e.name,type:"bool"});return t}(),defaults:{palettes:{profile_style_palette:{colors:[{color:"#2FA215"},{color:"#e12c2c"},{color:"#d1d4dc"}]}},styles:{},inputs:function(){var t={num_rows:24,width_percent_of_chart:30,liquidations_to_show:"LongsAndShorts",show_values:!0};for(const e of J)t["contract#"+e.symbol]=!0;return t}()},styles:{profile_style:{title:"Profile Style"}}},constructor:function(){const e="Aggregated Liquidations Profile Visible Range STABLECOIN-margined Contracts";let o=!1,i=!0,M={},T=[];const t=chartWidget,q=chartWidget.chart(),U=q.getAllStudies().find(t=>t.name===e).id,z="#2FA215",E="#e12c2c",W="#d1d4dc",G="#000000";let n;async function r(){Q();var t=q.getStudyById(U).getInputValues().find(t=>"num_rows"===t.id).value,e=q.getStudyById(U).getInputValues().find(t=>"width_percent_of_chart"===t.id).value,i=q.getStudyById(U).getInputValues().find(t=>"liquidations_to_show"===t.id).value,o=q.getStudyById(U).getInputValues().find(t=>"show_values"===t.id).value;let n=z,r=E,a=W,s=G;try{n=chartWidget.chart().getStudyById(U).getStyleValues().palettes.profile_style_palette.colors[0].color,r=chartWidget.chart().getStudyById(U).getStyleValues().palettes.profile_style_palette.colors[1].color,a=chartWidget.chart().getStudyById(U).getStyleValues().palettes.profile_style_palette.colors[2].color}catch(t){n=z,r=E,a=W}try{s=chartWidget.chart()._chartWidget.properties().paneProperties.background._value}catch(t){s=G}var l=await async function(){var t=q.getVisibleRange();let e,i;var o=[];for(const a of(await q.exportData({includeTime:!0,includedStudies:[]})).data){var n,r=a[0];r>=t.from&&r<=t.to&&(r=a[3],n=a[2],void 0===e?(e=r,i=n):(n>i&&(i=n),r<e&&(e=r),o.push(a)))}return[e,i,o]}(),c=l[0],d=l[1],p=l[2],u=function(){var t=q.getVisibleRange(),e=q.getStudyById(U).getInputValues().filter(t=>t.id.startsWith("contract#")&&!0===t.value).map(t=>t.id.split("#")[1]),i={};for(const d of J){var o=d.symbolLQB,n=d.symbolLQS,r=0<=e.indexOf(d.symbol);i[o]={lqType:"lqb",symbolParent:d.symbol,selected:r},i[n]={lqType:"lqs",symbolParent:d.symbol,selected:r}}var a,s={};for(a in M){var l=parseInt(a/1e3);if(l>=t.from&&l<=t.to){s[l]={lqb:0,lqs:0};var c=M[a];for(const p in c)i.hasOwnProperty(p)&&!0===i[p].selected&&(s[l][i[p].lqType]+=c[p].lq_volume)}}return s}();const h=(d-c)/t;var _=[];for(let t=c;t<d;t+=h)_.push({priceFrom:t,priceTo:t+h,amountBuy:0,amountSell:0,coordinates:[]});for(const D of p){var g=D[0],m=D[2],y=D[3];D[4];if(u.hasOwnProperty(g))for(const L of _){L.priceFrom,L.priceTo;var v=(Math.max(m,L.priceTo)-Math.min(y,L.priceFrom)-(Math.max(m,L.priceTo)-Math.min(m,L.priceTo))-(Math.max(y,L.priceFrom)-Math.min(y,L.priceFrom)))/(m-y);0<v&&(L.amountBuy+=u[g].lqb*v,L.amountSell+=u[g].lqs*v)}}let f=0;for(const B of _){var b="LongsAndShorts"===i?B.amountBuy+B.amountSell:"Longs"===i?B.amountSell:B.amountBuy;f=Math.max(f,b)}var S=Math.min(p.length,5),x={};for(let t=1;t<S;t++){const h=p[t][0]-p[t-1][0];x[h]=1}var w=parseInt(Object.keys(x)[0]);const C=[];var I=q.getVisibleRange();for(let t=I.from;t<=I.to;t+=w)C.push(t);var k=Math.ceil(C.length*(e/100));const A=C[C.length-1];for(const F of _){var N="LongsAndShorts"===i?F.amountBuy+F.amountSell:"Longs"===i?F.amountSell:F.amountBuy;0<N?(N=N/f,N=Math.ceil(N*k),N=C[C.length-N],F.coordinates=[{time:N,price:F.priceFrom},{time:A,price:F.priceTo}]):F.coordinates=[{time:A,price:F.priceFrom},{time:A,price:F.priceTo}]}let V;for(const R of _)if(R.coordinates.length)if("LongsAndShorts"===i){var O=R.amountBuy+R.amountSell,P=R.coordinates[0].time;const A=R.coordinates[1].time;if(0===R.amountSell||0===R.amountBuy)V=q.createMultipointShape(R.coordinates,{shape:"rectangle",lock:!0,disableSelection:!0,disableSave:!0,disableUndo:!0,zOrder:"top",overrides:{backgroundColor:0<R.amountSell?r:n,color:s,linewidth:1}});else{const C=[];for(let t=P;t<=A;t+=w)C.push(t);var O=C[Math.ceil(C.length*(R.amountSell/O))]||C[C.length-1],P=(V=q.createMultipointShape([{time:P,price:R.priceFrom},{time:O,price:R.priceTo}],{shape:"rectangle",lock:!0,disableSelection:!0,disableSave:!0,disableUndo:!0,zOrder:"top",overrides:{backgroundColor:r,color:s,linewidth:1}}),T.push(V),O),O=A;V=q.createMultipointShape([{time:P,price:R.priceFrom},{time:O,price:R.priceTo}],{shape:"rectangle",lock:!0,disableSelection:!0,disableSave:!0,disableUndo:!0,zOrder:"top",overrides:{backgroundColor:n,color:s,linewidth:1}})}T.push(V),!0===o&&(V=q.createMultipointShape([{time:R.coordinates[1].time,price:(R.coordinates[1].price+R.coordinates[0].price)/2}],{shape:"arrow_right",lock:!0,disableSelection:!0,disableSave:!0,disableUndo:!0,zOrder:"top",overrides:{fontsize:10,text:numeral(R.amountSell).format("0.00a").toUpperCase()+" / "+numeral(R.amountBuy).format("0.00a").toUpperCase(),arrowColor:"#00000000",color:a}}),T.push(V))}else V=q.createMultipointShape(R.coordinates,{shape:"rectangle",lock:!0,disableSelection:!0,disableSave:!0,disableUndo:!0,zOrder:"top",overrides:{backgroundColor:"Longs"===i?r:n,color:s,linewidth:1}}),T.push(V),!0===o&&(P="Longs"===i?R.amountSell:R.amountBuy,V=q.createMultipointShape([{time:R.coordinates[1].time,price:(R.coordinates[1].price+R.coordinates[0].price)/2}],{shape:"arrow_right",lock:!0,disableSelection:!0,disableSave:!0,disableUndo:!0,zOrder:"top",overrides:{fontsize:10,text:numeral(P).format("0.00a").toUpperCase(),arrowColor:"#00000000",color:a}}),T.push(V))}let a=null;const s=setInterval(function(){!async function(){if(!0===o)try{o=!1,await r()}catch(t){o=!0}}()},1500);function Q(){for(const t of T)try{q.removeEntity(t,{disableUndo:!0})}catch(t){}T=[]}function l(){Q(),clearInterval(s),q.onVisibleRangeChanged().unsubscribe(null,c),t.unsubscribe("study_properties_changed",d),t.unsubscribe("study_event",p),t.unsubscribe("study",u)}function c(t,e){o=!0}function d(t){t===U&&(t=q.getStudyById(U).isVisible(),i!=t&&(t||l(),i=t),o=!0)}function p(t,e){"remove"===e&&t===U&&l()}function u(t){t.value,e}q.onVisibleRangeChanged().subscribe(null,c),t.subscribe("study_properties_changed",d),t.subscribe("study_event",p),t.subscribe("study",u),this.init=function(t,e){this._context=t,this._input=e;t=(n=h(b.Std.ticker(this._context)))+","+J.map(function(t){return t.symbolLQB+","+t.symbolLQS}).join(",")+"#aggregated_lq_usd_denominated";this._context.new_sym(t,b.Std.period(this._context)),o=!0},this.main=function(t,e){try{this._context=t,this._input=e,this._context.select_sym(1);var i=this._context.symbol.time;return isNaN(i)||(M=this._context.symbol.info.coinalyze_indicator_data,JSON.stringify(a)!==JSON.stringify(M[i])&&(a=M[i],o=!0)),[]}catch(t){console.log("AggregatedLiquidationsProfileVisibleRangeStablecoinMargined.main() tc error",t)}}}}];return t.forEach(function(t){if(!t.metainfo.hasOwnProperty("styles")||!Object.keys(t.metainfo.styles).length){var e=t.metainfo.defaults.styles;t.metainfo.styles={};for(const i in e)t.metainfo.styles[i]={title:i,histogramBase:e[i].histogramBase||0}}t.metainfo.hasOwnProperty("format")||(t.metainfo.format={type:"volume",precision:t.metainfo.defaults.precision})}),window.CHART_CUSTOM_INDICATOR_DATA_BY_NAME={},t.forEach(function(t){window.CHART_CUSTOM_INDICATOR_DATA_BY_NAME[t.metainfo.name]={description:t.metainfo.description,shortDescription:t.metainfo.shortDescription}}),t};
function ChartDatafeed(e,a,o,t,i,n){this._configuration=e,this._chartSymbolsInfo=a,this._mainSymbol=o,this._mainSymbolLastBarTime={},this._rtd=t,this._tradeSubscribers={},this._lastBar={},this._needLoadSetup=i,this._symbolsForUsdConversion=n,this._getBarsCalled=!1,this._subscribeBarsCalled=!1,this._resolutionMap={1:"1m",5:"5m",15:"15m",30:"30m",60:"1h",120:"2h",180:"3h",240:"4h",360:"6h",720:"12h","1D":"1d","1W":"1w","1M":"1mnt"},this._newCandleEventListeners=[]}ChartDatafeed.prototype.newCandleEventAddListener=function(e){this._newCandleEventListeners.push(e)},ChartDatafeed.prototype.newCandleEventRemoveListener=function(e){for(var a=0;a<this._newCandleEventListeners.length;a++)if(this._newCandleEventListeners[a]===e){this._newCandleEventListeners.splice(a,1);break}},ChartDatafeed.prototype.onReady=function(e){var a=this;setTimeout(function(){e(a._configuration)},0)},ChartDatafeed.prototype.resolveSymbol=function(c,u,g){var v=this;setTimeout(function(){try{var e=window.ASSETS_INFO.MT,a=c,o=a.split("#"),t=(c=o[0],{session:"24x7",timezone:"UTC",has_intraday:!0,has_daily:!0,has_weekly_and_monthly:!0,minmov:1,volume_precision:2,data_status:"streaming",coinalyze_indicator_data:{},coinalyze_data_for_conversion:{},coinalyze_main_symbol_ohlcv:{}});if("aggregated_oi"===o[1]||"aggregated_oi_global"===o[1]||"aggregated_oi_usd_denominated"===o[1]||"aggregated_oi_coin_denominated"===o[1]||"aggregated_oi_coin_and_usd_denominated"===o[1]||"open_interest"===o[1]||"aggregated_cvd_futs_usd_denominated"===o[1]||"aggregated_cvd_futs_coin_denominated"===o[1]||"aggregated_cvd_futs"===o[1]||"aggregated_lq"===o[1]||"aggregated_lq_global"===o[1]||"aggregated_lq_usd_denominated"===o[1]||"aggregated_lq_coin_denominated"===o[1]||"aggregated_lq_coin_and_usd_denominated"===o[1]||"aggregated_volume"===o[1]||"aggregated_volume_spot"===o[1]||"aggregated_volume_global"===o[1]||"aggregated_volume_spot_global"===o[1]||"aggregated_lsar"===o[1]||"liquidations"===o[1])"aggregated_cvd_futs_usd_denominated"===o[1]||"aggregated_cvd_futs_coin_denominated"===o[1]||"aggregated_cvd_futs"===o[1]?t.pricescale=Math.pow(10,4):t.pricescale=Math.pow(10,2),t.ticker=a,t.description=a,t.name=a,t.exchange="ALL";else if("aggregated_fr"===o[1]||"aggregated_fr_global"===o[1])t.pricescale=Math.pow(10,4),t.ticker=a,t.description=a,t.name=a,t.exchange="ALL",t.coinalyze_fr_data={};else if("aggregated_pfr"===o[1]||"aggregated_pfr_global"===o[1])t.pricescale=Math.pow(10,4),t.ticker=a,t.description=a,t.name=a,t.exchange="ALL",t.coinalyze_pfr_data={};else if("aggregated_cvd_spot"===o[1])t.pricescale=Math.pow(10,4),t.ticker=a,t.description=a,t.name=a,t.exchange="ALL";else if("oi_mc_ratio"===o[1]||"oi_mc_ratio_global"===o[1])t.pricescale=Math.pow(10,4),t.ticker=a,t.description=a,t.name=a,t.exchange="ALL";else{for(var i,n={},r=!1,l=2===c.split(":").length?"symbol_f2":"symbol",d=0;d<v._chartSymbolsInfo.length;d++)if(v._chartSymbolsInfo[d][l]===c){var _,s=v._chartSymbolsInfo[d];for(_ in s)s.hasOwnProperty(_)&&(n[_]=s[_]);r=!0;break}if(!r)return i=c.split(".")[0].split("_").slice(-1)[0],0<=["TLSRA","TLSRP","GLSRA"].indexOf(i)?g("Available only for Binance and ByBit perpetuals"):g("Symbol info not found");t.coinalyze_tv_subscribe_to_bardata=n.tv_subscribe_to_bardata,t.coinalyze_supported_resolutions=n.supported_resolutions,t.currency_code=n.quote_coin,t.coinalyze_symbol_market_type=n.market_type,1===o.length?(t.pricescale=Math.pow(10,n.decimals),t.ticker=n[l],t.description=n.name,t.name=n.name,t.exchange=n.exchange_name,!0===n.has_no_volume&&(t.visible_plots_set="ohlc"),n.market_type===e.GLSRA&&(t.visible_plots_set="o")):(t.pricescale=Math.pow(10,n.decimals),t.ticker=a,t.description=a,t.name=a,t.exchange=n.exchange_name)}return u(t)}catch(e){return g("tc error")}},0)},ChartDatafeed.prototype.getBars=function(C,I,e,O,a){let{from:o,to:t,firstDataRequest:T}=e;var L=this,D=(T&&(C.coinalyze_indicator_data={},C.coinalyze_data_for_conversion={},C.coinalyze_main_symbol_ohlcv={},C.coinalyze_fr_data={},C.coinalyze_pfr_data={},C.coinalyze_fr_data_oi_for_weighting={},C.coinalyze_pfr_data_oi_for_weighting={},C.coinalyze_main_symbol_ohlcv={}),window.ASSETS_INFO.MT),R=C.ticker.split("#");return!0===L._needLoadSetup&&!1===L._getBarsCalled?(L._getBarsCalled=!0,setTimeout(function(){O([],{noData:!0})},0)):C.coinalyze_supported_resolutions&&-1===C.coinalyze_supported_resolutions.indexOf(I+"")?setTimeout(function(){O([],{noData:!0})},0):void Common.jsonPost({url:"/chart/getTheBars/",data:{from:o,to:t,resolution:I,symbol:C.ticker,firstDataRequest:T,symbolsForUsdConversion:0<=["aggregated_oi_coin_denominated","aggregated_oi_usd_denominated","aggregated_oi_coin_and_usd_denominated"].indexOf(R[1])?L._symbolsForUsdConversion:[],rk:window.REQ_KEY},success:function(e){var a,n=[];if("aggregated_oi"===R[1]||"aggregated_oi_usd_denominated"===R[1]||"aggregated_oi_coin_denominated"===R[1]||"aggregated_oi_coin_and_usd_denominated"===R[1]||"open_interest"===R[1]){var o={};for(g in e.barData){var t=1e3*parseInt(g);if((u=e.barData[g]).length){C.coinalyze_indicator_data[t]={};for(var i=0;i<u.length;i++)o[(z=u[i])[0]]=!0,C.coinalyze_indicator_data[t][z[0]]={open:z[1],high:z[2],low:z[3],close:z[4]}}else C.coinalyze_indicator_data[t]=void 0;n.push({time:t,open:void 0,high:void 0,low:void 0,close:void 0,volume:void 0})}if(e.dataForUsdConversion){var r=e.dataForUsdConversion;for(g in r){t=1e3*parseInt(g);C.coinalyze_data_for_conversion[t]={};for(i=0;i<r[g].length;i++){var l=(z=r[g][i])[0],d=z[1],_=z[2];"aggregated_oi_usd_denominated"===R[1]&&(d=1/d,_=1/_),C.coinalyze_data_for_conversion[t][l]={open:d,close:_}}}}function s(e,a){for(var o=a-1;0<=o;o--){var t=n[o].time;if(void 0!==C.coinalyze_indicator_data[t]&&void 0!==C.coinalyze_indicator_data[t][e])return C.coinalyze_indicator_data[t][e]}return null}for(var c=Object.keys(o).length,i=0;i<n.length;i++){var t=n[i].time,u=C.coinalyze_indicator_data[t];if(void 0!==u&&Object.keys(u).length!==c)for(var l in o)void 0===u[l]&&null!==(e=s(l,i))&&(u[l]=e)}}else if("aggregated_fr"===R[1]){o={};for(g in e.barData.symbolsBarData){t=1e3*parseInt(g);if((u=e.barData.symbolsBarData[g]).length){C.coinalyze_fr_data[t]={};for(i=0;i<u.length;i++)o[(z=u[i])[0]]=!0,C.coinalyze_fr_data[t][z[0]]={open:z[1],high:z[2],low:z[3],close:z[4]}}else C.coinalyze_fr_data[t]=void 0;n.push({time:t,open:void 0,high:void 0,low:void 0,close:void 0,volume:void 0})}for(g in C.coinalyze_fr_data_oi_for_weighting||(C.coinalyze_fr_data_oi_for_weighting={}),e.barData.symbolsOIBarData){t=1e3*parseInt(g);C.coinalyze_fr_data_oi_for_weighting[t]=e.barData.symbolsOIBarData[g]}function s(e,a){for(var o=a-1;0<=o;o--){var t=n[o].time;if(void 0!==C.coinalyze_fr_data[t]&&void 0!==C.coinalyze_fr_data[t][e])return C.coinalyze_fr_data[t][e]}return null}for(c=Object.keys(o).length,i=0;i<n.length;i++){t=n[i].time,u=C.coinalyze_fr_data[t];if(void 0!==u&&Object.keys(u).length!==c)for(var l in o)void 0===u[l]&&null!==(e=s(l,i))&&(u[l]=e)}}else if("aggregated_pfr"===R[1]){o={};for(g in e.barData.symbolsBarData){t=1e3*parseInt(g);if((u=e.barData.symbolsBarData[g]).length){C.coinalyze_pfr_data[t]={};for(i=0;i<u.length;i++)o[(z=u[i])[0]]=!0,C.coinalyze_pfr_data[t][z[0]]={open:z[1],high:z[2],low:z[3],close:z[4]}}else C.coinalyze_pfr_data[t]=void 0;n.push({time:t,open:void 0,high:void 0,low:void 0,close:void 0,volume:void 0})}for(g in C.coinalyze_pfr_data_oi_for_weighting||(C.coinalyze_pfr_data_oi_for_weighting={}),e.barData.symbolsOIBarData){t=1e3*parseInt(g);C.coinalyze_pfr_data_oi_for_weighting[t]=e.barData.symbolsOIBarData[g]}function s(e,a){for(var o=a-1;0<=o;o--){var t=n[o].time;if(void 0!==C.coinalyze_pfr_data[t]&&void 0!==C.coinalyze_pfr_data[t][e])return C.coinalyze_pfr_data[t][e]}return null}for(c=Object.keys(o).length,i=0;i<n.length;i++){t=n[i].time,u=C.coinalyze_pfr_data[t];if(void 0!==u&&Object.keys(u).length!==c)for(var l in o)void 0===u[l]&&null!==(e=s(l,i))&&(u[l]=e)}}else if("aggregated_cvd_spot"===R[1]||"aggregated_cvd_futs_usd_denominated"===R[1]||"aggregated_cvd_futs_coin_denominated"===R[1]||"aggregated_cvd_futs"===R[1])for(var g in e.barData){t=1e3*parseInt(g);if((u=e.barData[g]).length){C.coinalyze_indicator_data[t]={};for(i=0;i<u.length;i++){var v,m,h=u[i],f={};"aggregated_cvd_futs"===R[1]?(v=h[4],"l"===(m=ASSETS_INFO.marketsForAggregatedCvdFutsFcType[h[0]])?f={volume_buy:h[1],volume_sell:h[2],volume_buy_usd:h[1]*v,volume_sell_usd:h[2]*v}:"i"===m&&(f={volume_buy:h[1]/v,volume_sell:h[2]/v,volume_buy_usd:h[1],volume_sell_usd:h[2]})):(f={volume_buy:h[1],volume_sell:h[2]},"aggregated_cvd_spot"!==R[1]&&"aggregated_cvd_futs_coin_denominated"!==R[1]||(f.volume_buy_usd=f.volume_buy*h[4],f.volume_sell_usd=f.volume_sell*h[4])),C.coinalyze_indicator_data[t][h[0]]=f}}else C.coinalyze_indicator_data[t]=void 0;n.push({time:t,open:void 0,high:void 0,low:void 0,close:void 0,volume:void 0})}else if("aggregated_lq_usd_denominated"===R[1]||"aggregated_lq_coin_denominated"===R[1]||"aggregated_lq_coin_and_usd_denominated"===R[1]||"aggregated_lq"===R[1]||"liquidations"===R[1])for(var g in e.barData){t=1e3*parseInt(g);if((u=e.barData[g]).length){C.coinalyze_indicator_data[t]={};for(i=0;i<u.length;i++){var b,p,h=u[i],f={};"aggregated_lq_coin_and_usd_denominated"===R[1]?(b=h[3],"l"===(p=ASSETS_INFO.marketsForAggregatedLqCoinAndUsdDenominatedFcType[h[0]])?f={lq_volume:h[1],lq_volume_usd:h[1]*b}:"i"===p&&(f={lq_volume:h[1]/b,lq_volume_usd:h[1]})):(f={lq_volume:h[1]},"aggregated_lq_coin_denominated"===R[1]&&(f.lq_volume_usd=f.lq_volume*h[3])),C.coinalyze_indicator_data[t][h[0]]=f}}else C.coinalyze_indicator_data[t]=void 0;n.push({time:t,open:void 0,high:void 0,low:void 0,close:void 0,volume:void 0})}else if("aggregated_volume"===R[1]||"aggregated_volume_spot"===R[1])for(var g in e.barData){t=1e3*parseInt(g);if((u=e.barData[g]).length){C.coinalyze_indicator_data[t]={};for(i=0;i<u.length;i++){h=u[i];C.coinalyze_indicator_data[t][h[0]]=h[1]}}else C.coinalyze_indicator_data[t]=void 0;n.push({time:t,open:void 0,high:void 0,low:void 0,close:void 0,volume:void 0})}else if("oi_mc_ratio"===R[1]){o={};for(g in T&&(C.coinalyze_indicator_data={oi:{},mc:{}}),e.barData.oi){t=1e3*parseInt(g);if((u=e.barData.oi[g]).length){C.coinalyze_indicator_data.oi[t]={};for(i=0;i<u.length;i++)o[(z=u[i])[0]]=!0,C.coinalyze_indicator_data.oi[t][z[0]]={close:z[1]}}else C.coinalyze_indicator_data.oi[t]=void 0;n.push({time:t,open:void 0,high:void 0,low:void 0,close:void 0,volume:void 0})}for(g in e.barData.mc){t=1e3*parseInt(g),u=e.barData.mc[g];C.coinalyze_indicator_data.mc[t]={close:u[0][1]}}function s(e,a){for(var o=C.coinalyze_indicator_data.oi,t=a-1;0<=t;t--){var i=n[t].time;if(void 0!==o[i]&&void 0!==o[i][e])return o[i][e]}return null}for(c=Object.keys(o).length,i=0;i<n.length;i++){t=n[i].time,u=C.coinalyze_indicator_data.oi[t];if(void 0!==u&&Object.keys(u).length!==c)for(var l in o)void 0===u[l]&&null!==(e=s(l,i))&&(u[l]=e)}}else if("oi_mc_ratio_global"===R[1]){o={};for(g in T&&(C.coinalyze_indicator_data={oi:{},mc:{}}),e.barData.oi){t=1e3*parseInt(g);C.coinalyze_indicator_data.oi[t]=e.barData.oi[g],n.push({time:t,open:void 0,high:void 0,low:void 0,close:void 0,volume:void 0})}for(g in e.barData.mc){t=1e3*parseInt(g);C.coinalyze_indicator_data.mc[t]=e.barData.mc[g]}}else if(0<=["aggregated_oi_global","aggregated_lq_global","aggregated_fr_global","aggregated_pfr_global","aggregated_volume_global","aggregated_volume_spot_global"].indexOf(R[1]))for(var g in e.barData){t=1e3*parseInt(g);C.coinalyze_indicator_data[t]=e.barData[g],n.push({time:t,open:void 0,high:void 0,low:void 0,close:void 0,volume:void 0})}else if("aggregated_lsar"===R[1])for(var g in e.barData){var y,t=1e3*parseInt(g);C.coinalyze_indicator_data[t]={};for(y of e.barData[g])C.coinalyze_indicator_data[t][y[0]]=[y[1],y[2]];n.push({time:t,open:void 0,high:void 0,low:void 0,close:void 0,volume:void 0})}else{for(i=0;i<e.barData.length;i++){var w=e.barData[i];n.push({time:1e3*w[0],open:w[1],high:w[2],low:w[3],close:w[4],volume:w[5]})}if(!0===L._isFuturesData){if(C.coinalyze_symbol_market_type==D.GLSRA)for(i=0;i<n.length;i++){var S=n[i].open;n[i].high=S,n[i].low=S,n[i].close=S,n[i].volume=null}if(0<=[D.OI,D.FR,D.PFR,D.PI].indexOf(C.coinalyze_symbol_market_type))for(i=0;i<n.length;i++)n[i].volume=null}if(C.ticker===L._mainSymbol)for(i=0;i<n.length;i++){var z=n[i];C.coinalyze_main_symbol_ohlcv[z.time]=[z.open,z.high,z.low,z.close,z.volume]}if(C.ticker===L._mainSymbol&&!0===L.quoteInTeslaCar)for(i=0;i<n.length;i++)(z=n[i]).open=z.open/TESLA_MODEL_3_PRICE,z.high=z.high/TESLA_MODEL_3_PRICE,z.low=z.low/TESLA_MODEL_3_PRICE,z.close=z.close/TESLA_MODEL_3_PRICE;if(2===R.length&&0<=["buy_sell_volume","buy_sell_count","buy_sell_pressure"].indexOf(R[1]))for(i=0;i<n.length&&(null===n[i].open&&null===n[i].high);i++)null===n[i].open&&(n[i].open=NaN),null===n[i].high&&(n[i].high=NaN)}n.length&&T&&(a=Object.assign({},n[n.length-1]),L._lastBar[C.ticker+":"+I]=a),O(n,{noData:0===n.length})},error:function(){a("Error loading data")}})},ChartDatafeed.prototype.subscribeBars=function(v,m,a,i,e){var h,_,f,o,n,s=window.ASSETS_INFO.MT,b=this;function c(e){v.ticker===b._mainSymbol?(b._mainSymbolLastBarTime[m]=e.time,a(e)):e.time<=b._mainSymbolLastBarTime[m]&&a(e)}function r(e){try{var a=!0===e.rawTrades?e.data:JSON.parse(Common.lzw_decode(e.data)),o=e.channel.replace("t_","");if(o===h[0])for(var t=0;t<a.length;t++){var i=JSON.parse(JSON.stringify(a[t])),n=b._lastBar[f];if(n){var r=i[3],l=b.tradeFrameStart(n,r,m);if(!(l<n.time)){o===b._mainSymbol&&!0===b.quoteInTeslaCar&&(i[0]=i[0]/TESLA_MODEL_3_PRICE);var d=i[2],_={};if(l===n.time)_="buy_sell_volume"===h[1]||"buy_sell_pressure"===h[1]?{time:l,open:"b"===d?n.open+i[1]:n.open,high:"s"===d?n.high+i[1]:n.high,low:void 0,close:void 0,volume:void 0}:"buy_sell_count"===h[1]?{time:l,open:"b"===d?n.open+1:n.open,high:"s"===d?n.high+1:n.high,low:void 0,close:void 0,volume:void 0}:{time:l,open:n.open,high:Math.max(i[0],n.high),low:Math.min(i[0],n.low),close:i[0],volume:n.volume+i[1]},!0===b._isFuturesData&&0<=[s.OI,s.FR,s.PFR,s.PI,s.GLSRA].indexOf(v.coinalyze_symbol_market_type)&&(_.volume=null),b._lastBar[f]=_;else if(l>n.time&&(c(b._lastBar[f]),_="buy_sell_volume"===h[1]||"buy_sell_pressure"===h[1]?{time:l,open:"b"===d?i[1]:0,high:"s"===d?i[1]:0,low:void 0,close:void 0,volume:void 0}:"buy_sell_count"===h[1]?{time:l,open:"b"===d?1:0,high:"s"===d?1:0,low:void 0,close:void 0,volume:void 0}:{time:l,open:i[0],high:i[0],low:i[0],close:i[0],volume:i[1]},!0===b._isFuturesData&&0<=[s.OI,s.FR,s.PFR,s.PI,s.GLSRA].indexOf(v.coinalyze_symbol_market_type)&&(_.volume=null),b._lastBar[f]=_,v.ticker===b._mainSymbol))for(t=0;t<b._newCandleEventListeners.length;t++)b._newCandleEventListeners[t](_.time,n.time);v.ticker===b._mainSymbol&&(v.coinalyze_main_symbol_ohlcv[_.time]=[_.open,_.high,_.low,_.close,_.volume])}}}}catch(e){console.log("onTrade() tc error",e)}}function t(e){try{var a,o,t=e.data,i=b._lastBar[f];i&&((a=1e3*t.frame_start)<i.time||(o={time:a,open:t.open,high:t.high,low:t.low,close:t.close,volume:t.volume},!0===b._isFuturesData&&0<=[s.GLSRA].indexOf(v.coinalyze_symbol_market_type)&&(o.high=o.open,o.high=o.open,o.low=o.open,o.close=o.open,o.volume=null),c(b._lastBar[f]=o)))}catch(e){}}function l(e){try{var a,o,t;b._lastBar[f]&&(o=1e3*(a=e.data).frame_start,t=e.channel.split("_").slice(1).join("_"),void 0===v.coinalyze_indicator_data[o]&&(v.coinalyze_indicator_data[o]={}),v.coinalyze_indicator_data[o][t]=[a.high,a.low])}catch(e){console.error("agregatedOiOnTrade() tc error",e)}}function d(e){try{var a=b._lastBar[f];if(a)for(var o=JSON.parse(Common.lzw_decode(e.data)),t=e.channel.replace("t_",""),i=0;i<o.length;i++){var n,r,l=o[i],d=l[0],_=l[3],s=b.tradeFrameStart(a,_,m);s<a.time||(void 0===v.coinalyze_indicator_data[s]&&(v.coinalyze_indicator_data[s]={}),void 0===(n=v.coinalyze_indicator_data[s])[t]?n[t]={open:d,high:d,low:d,close:d}:((r=n[t]).high=Math.max(r.high,d),r.low=Math.min(r.low,d),r.close=d))}}catch(e){console.error("agregatedOiOnTrade() tc error",e)}}function u(e){try{var a=b._lastBar[f];if(a)for(var o=JSON.parse(Common.lzw_decode(e.data)),t=e.channel.replace("t_",""),i=0;i<o.length;i++){var n,r,l=o[i],d=l[0],_=l[3],s=b.tradeFrameStart(a,_,m);s<a.time||(void 0===v.coinalyze_fr_data[s]&&(v.coinalyze_fr_data[s]={}),void 0===(n=v.coinalyze_fr_data[s])[t]?n[t]={open:d,high:d,low:d,close:d}:((r=n[t]).high=Math.max(r.high,d),r.low=Math.min(r.low,d),r.close=d))}}catch(e){console.error("agregatedFrOnTrade() tc error",e)}}function g(e){try{var a=b._lastBar[f];if(a)for(var o=JSON.parse(Common.lzw_decode(e.data)),t=e.channel.replace("t_",""),i=0;i<o.length;i++){var n,r,l=o[i],d=l[0],_=l[3],s=b.tradeFrameStart(a,_,m);s<a.time||(void 0===v.coinalyze_pfr_data[s]&&(v.coinalyze_pfr_data[s]={}),void 0===(n=v.coinalyze_pfr_data[s])[t]?n[t]={open:d,high:d,low:d,close:d}:((r=n[t]).high=Math.max(r.high,d),r.low=Math.min(r.low,d),r.close=d))}}catch(e){console.error("aggregatedPfrOnTrade() tc error",e)}}function p(e){try{var a=v.coinalyze_indicator_data,o=e.channel.replace("t_",""),t=JSON.parse(Common.lzw_decode(e.data)),i=b._lastBar[f];if(i)for(var n=0;n<t.length;n++){var r,l,d,_=t[n],s=_[0],c=_[1],u=_[2],g=_[3];g<i.time||"b"!==u&&"s"!==u||(void 0===a[r=b.tradeFrameStart(i,g,m)]&&(a[r]={}),void 0===(l=a[r])[o]&&(l[o]={volume_buy:0,volume_sell:0,volume_buy_usd:0,volume_sell_usd:0}),"aggregated_cvd_futs"===h[1]?"l"===(d=ASSETS_INFO.marketsForAggregatedCvdFutsFcType[o])?(l[o]["b"===u?"volume_buy":"volume_sell"]+=c,l[o]["b"===u?"volume_buy_usd":"volume_sell_usd"]+=c*s):"i"===d&&(l[o]["b"===u?"volume_buy":"volume_sell"]+=c/s,l[o]["b"===u?"volume_buy_usd":"volume_sell_usd"]+=c):(l[o]["b"===u?"volume_buy":"volume_sell"]+=c,"aggregated_cvd_spot"!==h[1]&&"aggregated_cvd_futs_coin_denominated"!==h[1]||(l[o]["b"===u?"volume_buy_usd":"volume_sell_usd"]+=c*s)))}}catch(e){console.error("aggregatedCVDSpotOnTrade() tc error",e)}}function y(e){try{var a=v.coinalyze_indicator_data,o=e.channel.replace("t_",""),t=JSON.parse(Common.lzw_decode(e.data)),i=b._lastBar[f];if(i)for(var n=0;n<t.length;n++){var r,l,d,_=t[n],s=_[0],c=_[1],u=_[3];u<i.time||(void 0===a[r=b.tradeFrameStart(i,u,m)]&&(a[r]={}),void 0===(l=a[r])[o]&&(l[o]={lq_volume:0,lq_volume_usd:0}),"aggregated_lq_coin_and_usd_denominated"===h[1]?"l"===(d=ASSETS_INFO.marketsForAggregatedLqCoinAndUsdDenominatedFcType[o])?(l[o].lq_volume+=c,l[o].lq_volume_usd+=c*s):"i"===d&&(l[o].lq_volume+=c/s,l[o].lq_volume_usd+=c):(l[o].lq_volume+=c,"aggregated_lq_coin_denominated"===h[1]&&(l[o].lq_volume_usd+=c*s)))}}catch(e){console.error("aggregatedLqOnTrade() tc error",e)}}function w(e){try{var a=v.coinalyze_indicator_data,o=e.channel.replace("tl_",""),t=e.data,i=b._lastBar[f];if(i)for(var n=0;n<t.length;n++){var r,l,d=t[n],_=d[0],s=d[1];_<i.time||(void 0===a[r=b.tradeFrameStart(i,_,m)]&&(a[r]={}),void 0===(l=a[r])[o]&&(l[o]={lq_volume:0}),l[o].lq_volume+=s)}}catch(e){console.error("liquidationsOnTrade() tc error",e)}}b._rtd&&(!0===b._needLoadSetup&&!1===b._subscribeBarsCalled||(v.ticker===b._mainSymbol&&(b.mainSymbolOnResetCacheNeededCallback=e),h=v.ticker.split("#"),_=h[1],f=v.ticker+":"+m,!0===b._needLoadSetup&&!1===b._subscribeBarsCalled)?b._subscribeBarsCalled=!0:v.coinalyze_supported_resolutions&&-1===v.coinalyze_supported_resolutions.indexOf(m+"")||(!0===v.coinalyze_tv_subscribe_to_bardata?(n="bd"+b._resolutionMap[m]+"_"+v.ticker,b._rtd.subscribe([n],t,function(e){try{b._tradeSubscribers[i]={handler:t,channel:n}}catch(e){console.log("tc error on rtd.subscribe bardata",e)}})):"aggregated_oi"===h[1]||"aggregated_oi_usd_denominated"===h[1]||"aggregated_oi_coin_denominated"===h[1]||"aggregated_oi_coin_and_usd_denominated"===h[1]||"open_interest"===h[1]?(o=h[0].split(",").slice(1).map(function(e){return"t_"+e}),b._rtd.subscribe(o,d,function(e){try{function a(e,a){b._tradeSubscribers[i].setTimeoutId=setTimeout(function(e,a){c(e),c(a),b._lastBar[f]=a},1e4,{time:a,open:void 0,high:void 0,low:void 0,close:void 0,volume:void 0},{time:e,open:void 0,high:void 0,low:void 0,close:void 0,volume:void 0})}b.newCandleEventAddListener(a),b._tradeSubscribers[i]={handler:d,channel:o,newCandledEventListeners:[a]}}catch(e){console.log("tc error on rtd.subscribe OI bardata",e)}}),"aggregated_oi_coin_denominated"!=_&&"aggregated_oi_usd_denominated"!=_&&"aggregated_oi_coin_and_usd_denominated"!=_||(e=b._symbolsForUsdConversion.map(function(e){return"t_"+e}),b._rtd.subscribe(e,function(e){try{var a=b._lastBar[f];if(a)for(var o=JSON.parse(Common.lzw_decode(e.data)),t=e.channel.replace("t_",""),i=0;i<o.length;i++){var n=o[i],r=n[0],l=("aggregated_oi_usd_denominated"==_&&(r=1/r),n[3]),d=b.tradeFrameStart(a,l,m);d<a.time||(void 0===v.coinalyze_data_for_conversion[d]&&(v.coinalyze_data_for_conversion[d]={}),void 0===v.coinalyze_data_for_conversion[d][t]?v.coinalyze_data_for_conversion[d][t]={open:r,close:r}:v.coinalyze_data_for_conversion[d][t].close=r)}}catch(e){console.log("channelsForConversion message handler error",e)}},function(e){}))):"aggregated_fr"===h[1]?(o=h[0].split(",").slice(1).map(function(e){return"t_"+e}),b._rtd.subscribe(o,u,function(e){try{function a(e,a){b._tradeSubscribers[i].setTimeoutId=setTimeout(function(e,a){c(e),c(a),b._lastBar[f]=a},1e4,{time:a,open:void 0,high:void 0,low:void 0,close:void 0,volume:void 0},{time:e,open:void 0,high:void 0,low:void 0,close:void 0,volume:void 0})}b.newCandleEventAddListener(a),b._tradeSubscribers[i]={handler:u,channel:o,newCandledEventListeners:[a]}}catch(e){console.log("tc error on rtd.subscribe FR bardata",e)}})):"aggregated_pfr"===h[1]?(o=h[0].split(",").slice(1).map(function(e){return"t_"+e}),b._rtd.subscribe(o,g,function(e){try{function a(e,a){b._tradeSubscribers[i].setTimeoutId=setTimeout(function(e,a){c(e),c(a),b._lastBar[f]=a},1e4,{time:a,open:void 0,high:void 0,low:void 0,close:void 0,volume:void 0},{time:e,open:void 0,high:void 0,low:void 0,close:void 0,volume:void 0})}b.newCandleEventAddListener(a),b._tradeSubscribers[i]={handler:g,channel:o,newCandledEventListeners:[a]}}catch(e){console.log("tc error on rtd.subscribe PFR bardata",e)}})):"aggregated_cvd_spot"===h[1]||"aggregated_cvd_futs_usd_denominated"===h[1]||"aggregated_cvd_futs_coin_denominated"===h[1]||"aggregated_cvd_futs"===h[1]?(o=h[0].split(",").slice(1).map(function(e){return"t_"+e}),b._rtd.subscribe(o,p,function(e){try{function a(e,a){b._tradeSubscribers[i].setTimeoutId=setTimeout(function(e,a){c(e),c(a),b._lastBar[f]=a},5e3,{time:a,open:void 0,high:void 0,low:void 0,close:void 0,volume:void 0},{time:e,open:void 0,high:void 0,low:void 0,close:void 0,volume:void 0})}b.newCandleEventAddListener(a),b._tradeSubscribers[i]={handler:p,channel:o,newCandledEventListeners:[a]}}catch(e){console.log("tc error on rtd.subscribe aggregated_cvd_spot",e)}})):"aggregated_lq_usd_denominated"===h[1]||"aggregated_lq_coin_denominated"===h[1]||"aggregated_lq_coin_and_usd_denominated"===h[1]?(o=h[0].split(",").slice(1).map(function(e){return"t_"+e}),b._rtd.subscribe(o,y,function(e){try{function a(e,a){b._tradeSubscribers[i].setTimeoutId=setTimeout(function(e,a){c(e),c(a),b._lastBar[f]=a},5e3,{time:a,open:void 0,high:void 0,low:void 0,close:void 0,volume:void 0},{time:e,open:void 0,high:void 0,low:void 0,close:void 0,volume:void 0})}b.newCandleEventAddListener(a),b._tradeSubscribers[i]={handler:y,channel:o,newCandledEventListeners:[a]}}catch(e){console.log("tc error on rtd.subscribe aggregated_lq",e)}})):"liquidations"===h[1]?(o=h[0].split(",").slice(1).map(function(e){return"tl_"+e}),b._rtd.subscribe(o,w,function(e){try{function a(e,a){b._tradeSubscribers[i].setTimeoutId=setTimeout(function(e,a){c(e),c(a),b._lastBar[f]=a},5e3,{time:a,open:void 0,high:void 0,low:void 0,close:void 0,volume:void 0},{time:e,open:void 0,high:void 0,low:void 0,close:void 0,volume:void 0})}b.newCandleEventAddListener(a),b._tradeSubscribers[i]={handler:w,channel:o,newCandledEventListeners:[a]}}catch(e){console.log("tc error on rtd.subscribe liquidations",e)}})):"aggregated_lsar"===h[1]?(o=h[0].split(",").slice(1).map(function(e){return"bd"+b._resolutionMap[m]+"_"+e}),b._rtd.subscribe(o,l,function(e){try{function a(e,a){b._tradeSubscribers[i].setTimeoutId=setTimeout(function(e,a){c(e),c(a),b._lastBar[f]=a},3e4,{time:a,open:void 0,high:void 0,low:void 0,close:void 0,volume:void 0},{time:e,open:void 0,high:void 0,low:void 0,close:void 0,volume:void 0})}b.newCandleEventAddListener(a),b._tradeSubscribers[i]={handler:l,channel:o,newCandledEventListeners:[a]}}catch(e){console.log("tc error on rtd.subscribe LSAR bardata",e)}})):(n="t_"+h[0],b._rtd.subscribe([n],r,function(e){try{var a;b._tradeSubscribers[i]={handler:r,channel:n};for(var o,t=0;t<b._chartSymbolsInfo.length;t++)b._chartSymbolsInfo[t].symbol===h[0]&&(a=b._chartSymbolsInfo[t]);a&&!0===a.is_liquidation&&(o=setInterval(function(){try{var e=Date.now(),a=b._lastBar[f];b.tradeFrameStart(a,e,m)>a.time&&r({channel:n,data:[[0,0,"",e]],rawTrades:!0})}catch(e){console.log("tc error on fake trade",e)}},5e3),b._tradeSubscribers[i].fakeTradeSetIntervalId=o),b._tradeSubscribers[i].onRealtimeCallbackSetIntervalId=setInterval(function(){if(void 0!==b._lastBar[f])return c(b._lastBar[f])},1200)}catch(e){console.log("tc error on rtd.subscribe",e)}}))))},ChartDatafeed.prototype.unsubscribeBars=function(e){if(this._rtd){var a=this._tradeSubscribers[e];if(a){if(void 0!==a.newCandledEventListeners)for(var o=0;o<a.newCandledEventListeners.length;o++)this.newCandleEventRemoveListener(a.newCandledEventListeners[o]);void 0!==a.fakeTradeSetIntervalId&&clearInterval(a.fakeTradeSetIntervalId),void 0!==a.onRealtimeCallbackSetIntervalId&&clearInterval(a.onRealtimeCallbackSetIntervalId),void 0!==a.setTimeoutId&&clearTimeout(a.setTimeoutId),this._rtd.unsubscribe(Array.isArray(a.channel)?a.channel:[a.channel],a.handler,function(e){})}}},ChartDatafeed.prototype.searchSymbols=function(s,e,a,c){var u=this;let g=window.ASSETS_INFO.MT;setTimeout(function(){let e=[];e=(e="indicator_oi"===window.CHART_SEARCH_SYMBOL_FROM?u._chartSymbolsInfo.filter(function(e){return!0===e.has_oi}):"indicator_fr"===window.CHART_SEARCH_SYMBOL_FROM?u._chartSymbolsInfo.filter(function(e){return!0===e.has_fr}):"indicator_pfr"===window.CHART_SEARCH_SYMBOL_FROM?u._chartSymbolsInfo.filter(function(e){return!0===e.has_pfr}):"indicator_pi"===window.CHART_SEARCH_SYMBOL_FROM?u._chartSymbolsInfo.filter(function(e){return!0===e.has_pi}):"indicator_lq"===window.CHART_SEARCH_SYMBOL_FROM?u._chartSymbolsInfo.filter(function(e){return!0===e.has_lq}):"indicator_lsr"===window.CHART_SEARCH_SYMBOL_FROM?u._chartSymbolsInfo.filter(function(e){return!0===e.has_lsr}):"indicator_cvd"===window.CHART_SEARCH_SYMBOL_FROM?u._chartSymbolsInfo.filter(function(e){return!0!==e.is_futures_extra_data}):"symbol_search"===window.CHART_SEARCH_SYMBOL_FROM?u._chartSymbolsInfo.filter(function(e){return 0<=[g.OI,g.FR,g.PFR].indexOf(e.market_type)}):u._chartSymbolsInfo.filter(function(e){return!0!==e.is_futures_extra_data})).filter(function(e){return!!e.name_in_search});for(var a=[],o=s.replace(/\s+/," ").split(" "),t=0;t<e.length;t++){var i=e[t],n=i.name_in_search.replace(/[()]/g,"").replace(/\s+/," ").split(" "),r=!0;for(const d of o){var l=!1;for(const _ of n)if(!0===new RegExp("^"+d,"i").test(_)){l=!0;break}if(!l){r=!1;break}}r&&(void 0!==window.CHART_SEARCH_SYMBOL_FROM&&window.CHART_SEARCH_SYMBOL_FROM.startsWith("indicator_")?a.push({symbol:"",full_name:i.symbol_f2,exchange:i.exchange_name,description:i.name_in_search,ticker:i.symbol_f2,type:""}):a.push({symbol:"",full_name:i.name_in_search,exchange:i.exchange_name,description:i.name_in_search,ticker:i.symbol,type:""}))}return c(a)},0)},ChartDatafeed.prototype.tradeFrameStart=function(e,a,o){var t,i;if("D"===o||"1D"===o)t=864e5;else if("W"===o||"1W"===o)t=6048e5;else{if("M"===o||"1M"===o)return i=new Date(a),Date.UTC(i.getUTCFullYear(),i.getUTCMonth(),1,0,0,0);t=60*o*1e3}var n=e.time;if(a<n)return null;for(;;){if(n<=a&&a<n+t)return n;n+=t}},ChartDatafeed.prototype.saveLastBar=function(e,a,o){},window.tvChartWidgetShowNoticeDialogHTML=function(e,a){a.showNoticeDialog({title:e.title,body:"",callback:e.callback});const o=setInterval(function(){try{a._iFrame.contentWindow.document.querySelector(".content-B02UUUN3").innerHTML=e.body,clearInterval(o)}catch(e){}},20)};;
var CHART_SAVE_LOAD_ADAPTER=function(symbol,for_chart_type){for_chart_type=void 0!==for_chart_type?for_chart_type:"market";for(var notLoggedInMessage="You need to be logged in. Please login or signup. Signup is FREE.",customInds=CHART_CUSTOM_INDICATORS(),CUSTOM_INDS_METAINFO={},i=0;i<customInds.length;i++){var metainfo=customInds[i].metainfo;CUSTOM_INDS_METAINFO[metainfo.id]=metainfo}return{getAllCharts:function(){return new Promise(function(resolve,reject){Common.jsonPost({url:"/api/chartsetup-get-all-charts/",data:{for_chart_type:for_chart_type},success:function(response){if(!0!==response.success)return"NOT_LOGGED_IN"===response.message&&chartWidget.showNoticeDialog({title:"Not Logged In",body:notLoggedInMessage,callback:function(){}}),reject(new Error(response.message));resolve(response.message)},error:function(){return reject(new Error("GENERAL_ERROR"))}})})},removeChart:function(idChart){var id="object"==typeof idChart?idChart.id:idChart;return new Promise(function(resolve,reject){Common.jsonPost({url:"/api/chartsetup-remove-chart/",data:{id:id},success:function(response){return!0!==response.success?("NOT_LOGGED_IN"===response.message&&chartWidget.showNoticeDialog({title:"Not Logged In",body:notLoggedInMessage,callback:function(){}}),reject(new Error(response.message))):resolve()},error:function(){return reject(new Error("GENERAL_ERROR"))}})})},saveChart:function(chartData){return $.isPlainObject(chartData.id)&&(chartData.id=chartData.id.id),chartData.for_chart_type=for_chart_type,new Promise(function(resolve,reject){Common.jsonPost({url:"/api/chartsetup-save-chart/",data:chartData,success:function(response){return!0!==response.success?("NOT_LOGGED_IN"===response.message&&chartWidget.showNoticeDialog({title:"Not Logged In",body:notLoggedInMessage,callback:function(){}}),"SAVED_SETUPS_LIMIT_REACHED"===response.message&&tvChartWidgetShowNoticeDialogHTML({title:"Limit reached",body:response.messageBody,callback:function(){}},chartWidget),reject(new Error(response.message))):resolve(response.message)},error:function(){return reject(new Error("GENERAL_ERROR"))}})})},getChartContent:function(idChart){var id,autoLoad=!1;return"object"==typeof idChart?(id=idChart.id,autoLoad=!0===idChart.autoLoad):id=idChart,new Promise(function(resolve,reject){Common.jsonPost({url:"/api/chartsetup-get-chart-content/",data:{id:id,autoLoad:autoLoad,for_chart_type:for_chart_type},success:function(response){if(!0!==response.success)return"NOT_LOGGED_IN"===response.message&&chartWidget.showNoticeDialog({title:"Not Logged In",body:notLoggedInMessage,callback:function(){}}),"SAVED_SETUPS_LIMIT_REACHED"===response.message&&(chartWidget.closePopupsAndDialogs(),tvChartWidgetShowNoticeDialogHTML({title:"Limit reached",body:response.messageBody,callback:function(){}},chartWidget)),reject(new Error(response.message));try{for(var chartContent=response.message,content=(chartContent.symbol=symbol,JSON.parse(chartContent.content)),panes=content.charts[0].panes,i=0;i<panes.length;i++)for(var sources=panes[i].sources,j=0;j<sources.length;j++){"MainSeries"===sources[j].type&&(savedSymbol=sources[j].state.symbol,(savedSymbolInfo=Common.symbolInfo[savedSymbol])&&savedSymbolInfo.is_futures_extra_data?chartWidget._options.datafeed._isFuturesData=!0:(sources[j].state.symbol=symbol,chartWidget._options.datafeed._isFuturesData=!1));var savedSymbol,savedSymbolInfo,savedMetainfo=sources[j].metaInfo;if(void 0!==savedMetainfo){if(0<=["AggregatedCVDSpot@tv-basicstudies-1","AggregatedCvdFutsUsdDenominated@tv-basicstudies-1","AggregatedCvdFutsCoinDenominated@tv-basicstudies-1","AggregatedFundingRate@tv-basicstudies-1","AggregatedPredictedFundingRate@tv-basicstudies-1","BuySellVolume@tv-basicstudies-1","CVD@tv-basicstudies-1","OpenInterest@tv-basicstudies-1","AggregatedOpenInterestFull@tv-basicstudies-1","AggregatedOpenInterest_USD_Denominated@tv-basicstudies-1","AggregatedOpenInterest_COIN_Denominated@tv-basicstudies-1"].indexOf(savedMetainfo.id)){var indMetainfo=CUSTOM_INDS_METAINFO[savedMetainfo.id];if(void 0===indMetainfo)continue;try{!function(savedMetainfo,indMetainfo){void 0===savedMetainfo.defaults.styles&&(savedMetainfo.defaults.styles={});var prop,savedDefaultStyles=savedMetainfo.defaults.styles,indDefaultStyles=indMetainfo.defaults.styles;for(prop in indDefaultStyles)void 0===savedDefaultStyles[prop]&&(savedDefaultStyles[prop]=indDefaultStyles[prop]);for(var savedPlots=savedMetainfo.plots,indPlots=indMetainfo.plots,i=0;i<indPlots.length;i++)void 0===savedPlots[i]?savedPlots.push(indPlots[i]):indPlots[i].id!==savedPlots[i].id&&savedPlots.splice(i,0,indPlots[i])}(savedMetainfo,indMetainfo)}catch(e){console.error("addMissingMetainfo error",e)}}if("MainSeries"!==sources[j].type)try{newPaletteColors=paletteColors=palettes=paneSource=void 0;var paneSource=sources[j],palettes=[];paneSource.state&&paneSource.state.palettes&&palettes.push(paneSource.state.palettes),paneSource.metaInfo&&paneSource.metaInfo.palettes&&palettes.push(paneSource.metaInfo.palettes),paneSource.metaInfo.defaults&&paneSource.metaInfo.defaults.palettes&&palettes.push(paneSource.metaInfo.palettes);for(const item of palettes)for(const paletteKey in item){var paletteColors=item[paletteKey].colors;if(Object.keys(paletteColors).length){var newPaletteColors=[];for(const k in paletteColors)newPaletteColors.push(paletteColors[k]);item[paletteKey].colors=newPaletteColors}}palettes=[],paneSource.state&&paneSource.state.styles&&palettes.push(paneSource.state.styles),paneSource.metaInfo.defaults&&paneSource.metaInfo.defaults.styles&&palettes.push(paneSource.metaInfo.defaults.styles);for(const item of palettes)for(const styleKey in item)2===item[styleKey].plottype&&(item[styleKey].plottype=0)}catch(e){console.error("changePalettesToArrayAndPlottype2 error",e)}try{!function(savedMetainfo){function renameFieldsValue(config){var fieldRenameValue={};for(const k in config)for(var field of k.split(","))fieldRenameValue[field]=config[k];for(const field in savedMetainfo)void 0!==fieldRenameValue[field]&&(savedMetainfo[field]=savedMetainfo[field].replace(fieldRenameValue[field][0],fieldRenameValue[field][1]))}"LongShortAccountsRatioGlobal"===savedMetainfo.name?renameFieldsValue({"fullId,id,name,shortId":["LongShortAccountsRatioGlobal","LongShortAccountsRatio"],"description,description_localized,shortDescription":["Long/Short Accounts Ratio Global","Long/Short Accounts Ratio"]}):"LongShortAccountsRatioTopTraders_2"===savedMetainfo.name&&renameFieldsValue({"fullId,id,name,shortId":["LongShortAccountsRatioTopTraders_2","LongShortAccountsRatioTopTraders"],"description,description_localized,shortDescription":["Long/Short Accounts Ratio Top Traders_2","Long/Short Accounts Ratio Top Traders"]})}(savedMetainfo)}catch(e){console.error("renameIndicatorsName error",e)}}}return chartContent.content=JSON.stringify(content),resolve(JSON.stringify(chartContent))}catch(e){return reject()}},error:function(){return reject(new Error("GENERAL_ERROR"))}})})}}};;
var TradingView=function(t){"use strict";function e(t,n){const i={...t};for(const o in n)"object"!=typeof t[o]||null===t[o]||Array.isArray(t[o])?void 0!==n[o]&&(i[o]=n[o]):i[o]=e(t[o],n[o]);return i}const n={width:800,height:500,interval:"1D",timezone:"Etc/UTC",container:"",library_path:"",locale:"en",widgetbar:{details:!1,watchlist:!1,news:!1,datawindow:!1,watchlist_settings:{default_symbols:[]}},overrides:{"mainSeriesProperties.showCountdown":!1},studies_overrides:{},trading_customization:{position:{},order:{}},brokerConfig:{configFlags:{}},fullscreen:!1,autosize:!1,disabled_features:[],enabled_features:[],debug:!1,logo:{},time_frames:[{text:"5y",resolution:"1W"},{text:"1y",resolution:"1W"},{text:"6m",resolution:"120"},{text:"3m",resolution:"60"},{text:"1m",resolution:"30"},{text:"5d",resolution:"5"},{text:"1d",resolution:"1"}],client_id:"0",user_id:"0",charts_storage_api_version:"1.0",favorites:{intervals:[],chartTypes:[],indicators:[],drawingTools:[]}},i=JSON.parse('[{"iso":"ar","dir":"rtl","language":"ar"},{"iso":"pt","dir":"ltr","language":"pt"},{"iso":"ca","dir":"ltr","language":"ca_ES"},{"iso":"cs","dir":"ltr","language":"cs"},{"iso":"de","dir":"ltr","language":"de"},{"iso":"en","dir":"ltr","language":"en"},{"iso":"es","dir":"ltr","language":"es"},{"iso":"fa","dir":"rtl","language":"fa"},{"iso":"fr","dir":"ltr","language":"fr"},{"iso":"he","dir":"rtl","language":"he_IL"},{"iso":"hu","dir":"ltr","language":"hu_HU"},{"iso":"id","dir":"ltr","language":"id_ID"},{"iso":"en","dir":"ltr","language":"en"},{"iso":"it","dir":"ltr","language":"it"},{"iso":"ja","dir":"ltr","language":"ja"},{"iso":"ko","dir":"ltr","language":"ko"},{"iso":"ms","dir":"ltr","language":"ms_MY"},{"iso":"pl","dir":"ltr","language":"pl"},{"iso":"ru","dir":"ltr","language":"ru"},{"iso":"sv","dir":"ltr","language":"sv"},{"iso":"th","dir":"ltr","language":"th"},{"iso":"tr","dir":"ltr","language":"tr"},{"iso":"vi","dir":"ltr","language":"vi"},{"iso":"zh-Hans","dir":"ltr","language":"zh"},{"iso":"zh-Hant","dir":"ltr","language":"zh_TW"},{"iso":"el","dir":"ltr","language":"el"},{"iso":"nl","dir":"ltr","language":"nl_NL"},{"iso":"ro","dir":"ltr","language":"ro"}]');let o=!1;function s(){return"CL v27.002 (internal id 18ee23e7 @ 2024-02-23T14:47:48.290Z)"}const r=class{constructor(t){var i,s;if(this._id=`tradingview_${(1048576*(1+Math.random())|0).toString(16).substring(1)}`,this._ready=!1,this._readyHandlers=[],this._onWindowResize=this._autoResizeChart.bind(this),!t.datafeed)throw new Error("Datafeed is not defined");(null===(i=t.overrides)||void 0===i?void 0:i["mainSeriesProperties.priceAxisProperties.lockScale"])&&(console.warn("mainSeriesProperties.priceAxisProperties.lockScale can not be set to true within the widget constructor"),delete t.overrides["mainSeriesProperties.priceAxisProperties.lockScale"]),this._options=e(n,t);"dark"===(null!==(s=this._options.theme)&&void 0!==s?s:"light").toLowerCase()&&void 0===this._options.loading_screen&&(this._options.loading_screen={backgroundColor:"#131722"}),this._options.debug&&(o||(o=!0,console.log("Using CL v27.002 (internal id 18ee23e7 @ 2024-02-23T14:47:48.290Z)"))),this._create()}setDebugMode(t){this._innerAPI().setDebugMode(t)}onChartReady(t){this._ready?t.call(this):this._readyHandlers.push(t)}headerReady(){return this._innerWindowLoaded.then((()=>this._innerWindow().headerReady()))}onGrayedObjectClicked(t){this._doWhenInnerApiLoaded((e=>{e.onGrayedObjectClicked(t)}))}onShortcut(t,e){this._doWhenInnerWindowLoaded((n=>{n.createShortcutAction(t,e)}))}subscribe(t,e){this._doWhenInnerApiLoaded((n=>{n.subscribe(t,e)}))}unsubscribe(t,e){this._doWhenInnerApiLoaded((n=>{n.unsubscribe(t,e)}))}chart(t){return this._innerAPI().chart(t)}getLanguage(){return this._options.locale}setSymbol(t,e,n){this._innerAPI().changeSymbol(t,e,n)}remove(){window.removeEventListener("resize",this._onWindowResize),this._readyHandlers.splice(0,this._readyHandlers.length),delete window[this._id],this._iFrame.parentNode&&this._iFrame.parentNode.removeChild(this._iFrame)}closePopupsAndDialogs(){this._doWhenInnerApiLoaded((t=>{t.closePopupsAndDialogs()}))}selectLineTool(t,e){this._innerAPI().selectLineTool(t,e)}selectedLineTool(){return this._innerAPI().selectedLineTool()}save(t,e){this._innerAPI().saveChart(t,e)}load(t,e){this._innerAPI().loadChart({json:t,extendedData:e})}getSavedCharts(t){this._innerAPI().getSavedCharts(t)}loadChartFromServer(t){this._innerAPI().loadChartFromServer(t)}saveChartToServer(t,e,n){this._innerAPI().saveChartToServer(t,e,n)}removeChartFromServer(t,e){this._innerAPI().removeChartFromServer(t,e)}onContextMenu(t){this._doWhenInnerApiLoaded((e=>{e.onContextMenu(t)}))}createButton(t){return this._innerWindow().createButton(t)}createDropdown(t){return this._innerWindow().createDropdown(t)}showNoticeDialog(t){this._doWhenInnerApiLoaded((e=>{e.showNoticeDialog(t)}))}showConfirmDialog(t){this._doWhenInnerApiLoaded((e=>{e.showConfirmDialog(t)}))}showLoadChartDialog(){this._innerAPI().showLoadChartDialog()}showSaveAsChartDialog(){this._innerAPI().showSaveAsChartDialog()}symbolInterval(){return this._innerAPI().getSymbolInterval()}mainSeriesPriceFormatter(){return this._innerAPI().mainSeriesPriceFormatter()}getIntervals(){return this._innerAPI().getIntervals()}getStudiesList(){return this._innerAPI().getStudiesList()}getStudyInputs(t){return this._innerAPI().getStudyInputs(t)}getStudyStyles(t){return this._innerAPI().getStudyStyles(t)}addCustomCSSFile(t){this._innerWindow().addCustomCSSFile(t)}applyOverrides(t){this._options=e(this._options,{overrides:t}),this._doWhenInnerWindowLoaded((e=>{e.applyOverrides(t)}))}applyStudiesOverrides(t){this._doWhenInnerWindowLoaded((e=>{e.applyStudiesOverrides(t)}))}watchList(){return this._innerAPI().watchlist()}news(){return this._innerAPI().news()}widgetbar(){return this._innerAPI().widgetbar()}activeChart(){return this._innerAPI().activeChart()}activeChartIndex(){return this._innerAPI().activeChartIndex()}setActiveChart(t){return this._innerAPI().setActiveChart(t)}chartsCount(){return this._innerAPI().chartsCount()}layout(){return this._innerAPI().layout()}setLayout(t){this._innerAPI().setLayout(t)}layoutName(){return this._innerAPI().layoutName()}changeTheme(t,e){return this._innerWindow().changeTheme(t,e)}getTheme(){return this._innerWindow().getTheme()}takeScreenshot(){this._doWhenInnerApiLoaded((t=>{t.takeScreenshot()}))}lockAllDrawingTools(){return this._innerAPI().lockAllDrawingTools()}hideAllDrawingTools(){return this._innerAPI().hideAllDrawingTools()}drawOnAllCharts(t){this._innerAPI().drawOnAllCharts(t)}magnetEnabled(){return this._innerAPI().magnetEnabled()}magnetMode(){return this._innerAPI().magnetMode()}undoRedoState(){return this._innerAPI().undoRedoState()}setIntervalLinkingEnabled(t){this._innerAPI().setIntervalLinkingEnabled(t)}setDateRangeLinkingEnabled(t){this._innerAPI().setDateRangeLinkingEnabled(t)}setTimeFrame(t){this._innerAPI().setTimeFrame(t)}symbolSync(){return this._innerAPI().symbolSync()}intervalSync(){return this._innerAPI().intervalSync()}crosshairSync(){return this._innerAPI().crosshairSync()}timeSync(){return this._innerAPI().timeSync()}dateRangeSync(){return this._innerAPI().dateRangeSync()}setFeatureEnabled(t,e){this._innerAPI().setFeatureEnabled(t,e)}getAllFeatures(){return this._innerWindow().getAllFeatures()}clearUndoHistory(){return this._innerAPI().clearUndoHistory()}undo(){return this._innerAPI().undo()}redo(){return this._innerAPI().redo()}startFullscreen(){this._innerAPI().startFullscreen()}exitFullscreen(){this._innerAPI().exitFullscreen()}takeClientScreenshot(t){return this._innerAPI().takeClientScreenshot(t)}navigationButtonsVisibility(){return this._innerWindow().getNavigationButtonsVisibility()}paneButtonsVisibility(){return this._innerWindow().getPaneButtonsVisibility()}dateFormat(){return this._innerWindow().getDateFormat()}timeHoursFormat(){return this._innerWindow().getTimeHoursFormat()}currencyAndUnitVisibility(){return this._innerWindow().getCurrencyAndUnitVisibility()}supportedChartTypes(){return this._innerAPI().supportedChartTypes()}watermark(){return this._innerAPI().watermark()}customSymbolStatus(){return this._innerWindow().customSymbolStatus()}setCSSCustomProperty(t,e){if(!1===t.startsWith("--"))throw new Error("customPropertyName should begin with a double hyphen");this._innerWindow().document.body.style.setProperty(t,e)}getCSSCustomPropertyValue(t){if(!1===t.startsWith("--"))throw new Error("customPropertyName should begin with a double hyphen");const e=this._innerWindow().document.body,n=e.style.getPropertyValue(t);if(n)return n;return getComputedStyle(e).getPropertyValue(t)}linking(){return this._innerAPI().linking}_innerAPI(){return this._innerWindow().tradingViewApi}_innerWindow(){return this._iFrame.contentWindow}_doWhenInnerWindowLoaded(t){this._ready?t(this._innerWindow()):this._innerWindowLoaded.then((()=>{t(this._innerWindow())}))}_doWhenInnerApiLoaded(t){this._doWhenInnerWindowLoaded((e=>{e.doWhenApiIsReady((()=>t(this._innerAPI())))}))}_autoResizeChart(){this._options.fullscreen&&(this._iFrame.style.height=window.innerHeight+"px",a&&setTimeout((()=>{this._iFrame.style.height=window.innerHeight+"px"}),30))}_create(){var t,e;const n=null!==(e=null===(t=this._options.enabled_features)||void 0===t?void 0:t.includes("iframe_loading_compatibility_mode"))&&void 0!==e&&e,[i,o]=this._render(!n),s=this._options.container,r="string"==typeof s?document.getElementById(s):s;if(null===r)throw new Error(`There is no such element - #${this._options.container}`);r.innerHTML=i,this._iFrame=r.querySelector(`#${this._id}`);const a=this._iFrame;this._innerWindowLoaded=new Promise((t=>{const e=()=>{a.removeEventListener("load",e,!1),t()};a.addEventListener("load",e,!1)})),n&&(a.contentWindow?(a.contentWindow.document.open(),a.contentWindow.document.write(o),a.contentWindow.document.close()):console.warn("Unable to locate contentWindow for the created iframe. Please try disabling the `iframe_loading_compatibility_mode` featureset.")),(this._options.autosize||this._options.fullscreen)&&(a.style.width="100%",this._options.fullscreen||(a.style.height="100%")),window.addEventListener("resize",this._onWindowResize),this._onWindowResize(),this._innerWindowLoaded.then((()=>{try{this._innerWindow().widgetReady((()=>{this._ready=!0;for(const t of this._readyHandlers)try{t.call(this)}catch(t){console.error(t)}this._innerWindow().initializationFinished()}))}catch(t){if(t instanceof Error&&/widgetReady is not a function/.test(t.message))throw new Error(`There was an error when loading the library. Usually this error means the library failed to load its static files. Check that the library files are available at ${window.location.host}/${this._options.library_path||""} or correct the library_path option.`)}}))}_render(t){const e=window;if(e[this._id]={datafeed:this._options.datafeed,customFormatters:this._options.custom_formatters,brokerFactory:this._options.broker_factory,overrides:this._options.overrides,studiesOverrides:this._options.studies_overrides,tradingCustomization:this._options.trading_customization,disabledFeatures:this._options.disabled_features,enabledFeatures:this._options.enabled_features,brokerConfig:this._options.broker_config||this._options.brokerConfig,restConfig:this._options.restConfig,favorites:this._options.favorites,logo:this._options.logo,numeric_formatting:this._options.numeric_formatting,rss_news_feed:this._options.rss_news_feed,rss_news_title:this._options.rss_news_title,newsProvider:this._options.news_provider,loadLastChart:this._options.load_last_chart,saveLoadAdapter:this._options.save_load_adapter,loading_screen:this._options.loading_screen,settingsAdapter:this._options.settings_adapter,getCustomIndicators:this._options.custom_indicators_getter,additionalSymbolInfoFields:this._options.additional_symbol_info_fields,headerWidgetButtonsMode:this._options.header_widget_buttons_mode,customTranslateFunction:this._options.custom_translate_function,symbolSearchComplete:this._options.symbol_search_complete,contextMenu:this._options.context_menu,settingsOverrides:this._options.settings_overrides,timeframe:this._options.timeframe,customTimezones:this._options.custom_timezones,customChartDescriptionFunction:this._options.custom_chart_description_function},this._options.saved_data)e[this._id].chartContent={json:this._options.saved_data},this._options.saved_data_meta_info&&(e[this._id].chartContentExtendedData=this._options.saved_data_meta_info);else if(!this._options.load_last_chart&&!this._options.symbol)throw new Error("Symbol is not defined: either 'symbol' or 'load_last_chart' option must be set");if(this._options.library_path&&!this._options.library_path.endsWith("/")&&console.warn("library_path option should contain a trailing forward slash"),this._options.locale){const t=encodeURIComponent(this._options.locale);i.findIndex((e=>e.language===t))>=0||(console.warn("locale isn't supported. Using default of `en`."),this._options.locale="en")}const n=function(t,e){var n;const o=new URL(`${t||""}`,location.href).href,s=JSON.parse('["bundles/runtime.08dc49106e20c7378783.js","bundles/__LANG__.4716.e4ac74dfc9ec5374b00c.js","bundles/6150.bda60280b05cea478076.css","bundles/5142.2c34c8656148cc5203b7.js","bundles/library.a970445029c5265cdaa4.js"]'),r=encodeURIComponent(e),a=null!==(n=i.find((t=>t.language===r)))&&void 0!==n?n:{iso:"en",dir:"ltr"},d=`lang="${a.iso}" dir="${a.dir}"`,l=`\n${function(t,e,n){if(void 0===t)return"";const i=[],o=[];for(const s of t)s.endsWith(".js")?i.push(`<script defer crossorigin="anonymous" src="${s.replace("__LANG__",n)}"><\/script>`):s.endsWith(".css")&&o.push(`<link type="text/css" href="${e?s.replace(/\.css$/i,".rtl.css"):s}" rel="stylesheet"/>`);return[...i,...o].join("\n")}(s,"rtl"===a.dir,r)}\n`;return`<!DOCTYPE html><html ${(h={bundles:l,localeLanguage:r,htmlAttrs:d,libraryPath:o}).htmlAttrs}><head><base href="${h.libraryPath}"><meta charset="utf-8"><script>window===window.parent&&(location.href="about:blank")<\/script> ${h.bundles} </head><body class="chart-page unselectable on-widget"><div class="loading-indicator" id="loading-indicator"></div><script>var JSServer={},__initialEnabledFeaturesets=["charting_library"]<\/script><script>(function() {\n\t\twindow.urlParams = (function () {\n\t\t\tvar match,\n\t\t\t\tpl\t = /\\+/g,  // Regex for replacing addition symbol with a space\n\t\t\t\tsearch = /([^&=]+)=?([^&]*)/g,\n\t\t\t\tdecode = function (s) { return decodeURIComponent(s.replace(pl, ' ')).replace(/<\\/?[^>]+(>|$)/g, ''); },\n\t\t\t\tquery = function() {\n\t\t\t\t\t// We don't use hash on the url because: safari 13 throws an error if you attempt this\n\t\t\t\t\t// on a blob, and safari 14 will strip hash from blob urls.\n\t\t\t\t\tif (frameElement && frameElement.dataset.widgetOptions) {\n\t\t\t\t\t\treturn frameElement.dataset.widgetOptions;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthrow "Unexpected use of this page";\n\t\t\t\t\t}\n\t\t\t\t}(),\n\t\t\t\tresult = {};\n\n\t\t\twhile (match = search.exec(query)) {\n\t\t\t\tresult[decode(match[1])] = decode(match[2]);\n\t\t\t}\n\n\t\t\tvar additionalSettingsObject = window.parent[result.uid];\n\n\t\t\tvar customObjectNames = ['datafeed', 'customFormatters', 'brokerFactory', 'save_load_adapter', 'customTranslateFunction', 'contextMenu'];\n\n\t\t\tfor (var p in additionalSettingsObject) {\n\t\t\t\tif (customObjectNames.indexOf(p) === -1) {\n\t\t\t\t\tresult[p] = JSON.stringify(additionalSettingsObject[p]);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn result;\n\t\t})();\n\n\t\twindow.locale = urlParams.locale;\n\t\twindow.language = urlParams.locale; // a very big attention needed here\n\t\twindow.customTranslateFunction = window.parent[urlParams.uid].customTranslateFunction;\n\t\twindow.customChartDescriptionFunction = window.parent[urlParams.uid].customChartDescriptionFunction;\n\n\t\twindow.addCustomCSSFile = function(href) {\n\t\t\tvar link = document.createElement('link');\n\t\t\tlink.setAttribute('type', 'text/css');\n\t\t\tlink.setAttribute('rel', 'stylesheet');\n\t\t\tlink.setAttribute('href', href);\n\t\t\tlink.setAttribute('cross-origin', 'anonymous');\n\n\t\t\twindow.loadedCustomCss = new Promise((resolve) => {\n\t\t\t\tlink.onload = resolve;\n\t\t\t\tlink.onerror = resolve;\n\t\t\t});\n\t\t\tdocument.body.appendChild(link);\n\t\t};\n\n\t\twindow.loadedCustomCss = Promise.resolve();\n\t\tif (!!urlParams.customCSS) {\n\t\t\twindow.addCustomCSSFile(urlParams.customCSS);\n\t\t}\n\n\t\tvar loadingScreenParams = {};\n\n\t\tif (typeof urlParams.loading_screen === 'string') {\n\t\t\ttry {\n\t\t\t\tloadingScreenParams = JSON.parse(urlParams.loading_screen);\n\t\t\t} catch(e) {}\n\t\t}\n\n\t\tvar loadingIndicatorElement = document.getElementById('loading-indicator');\n\n\t\tif (loadingScreenParams.backgroundColor) {\n\t\t\tloadingIndicatorElement.style = 'background-color: ' + loadingScreenParams.backgroundColor;\n\t\t}\n\n\t\t!function(){"use strict";var t,e=new WeakMap;!function(t){t[t.Element=1]="Element",t[t.Document=9]="Document"}(t||(t={}));var n={mini:"xsmall",xxsmall:"xxsmall",xsmall:"xsmall",small:"small",medium:"medium",large:"large"};var s,i,o,r,l,c=(void 0===l&&(l=""),s='<div class="tv-spinner '.concat(l,'" role="progressbar"></div>'),o=function(n,s){var i,o;return i=null==s?document.documentElement:s.nodeType===t.Document?s.documentElement:s,e&&(o=e.get(i)),o||((o=i.ownerDocument.createRange()).selectNodeContents(i),e&&e.set(i,o)),o.createContextualFragment(n)}(s,i),null!==(r=o.firstElementChild)&&o.removeChild(r),r),a=function(){function t(t){this._shown=!1,this._el=c.cloneNode(!0),this.setSize(n[t||"large"])}return t.prototype.spin=function(t){return this._el.classList.add("tv-spinner--shown"),void 0===this._container&&(this._container=t,void 0!==t&&t.appendChild(this._el)),this._shown=!0,this},t.prototype.stop=function(t){return t&&void 0!==this._container&&this._container.removeChild(this._el),this._el&&this._el.classList.remove("tv-spinner--shown"),this._shown=!1,this},t.prototype.setStyle=function(t){var e=this;return Object.keys(t).forEach((function(n){var s=t[n];void 0!==s&&e._el.style.setProperty(n,s)})),this},t.prototype.style=function(){return this._el.style},t.prototype.setSize=function(t){var e=void 0!==t?"tv-spinner--size_".concat(t):"";return this._el.className="tv-spinner ".concat(e," ").concat(this._shown?"tv-spinner--shown":""),this},t.prototype.getEl=function(){return this._el},t.prototype.destroy=function(){this.stop(),delete this._el,delete this._container},t}();window.Spinner=a}();\n\n\n\t\tvar spinnerColor = (loadingScreenParams.foregroundColor) ? loadingScreenParams.foregroundColor : undefined;\n\n\t\tvar loadingSpinner = new Spinner('large').setStyle({\n\t\t\t'--tv-spinner-color': spinnerColor,\n\t\t\tzIndex: String(2e9),\n\t\t});\n\t\tloadingSpinner.getEl().classList.add('spinner');\n\t\tloadingSpinner.spin(loadingIndicatorElement);\n\t})();<\/script></body></html>`;var h}(this._options.library_path||"",this._options.locale);let o=new URL("about:blank");if(t){const t=new Blob([n],{type:"text/html"}),e=URL.createObjectURL(t);o=new URL(e)}const s="symbol="+encodeURIComponent(this._options.symbol||"")+"&interval="+encodeURIComponent(this._options.interval)+(this._options.toolbar_bg?"&toolbarbg="+encodeURIComponent(this._options.toolbar_bg.replace("#","")):"")+(this._options.studies_access?"&studiesAccess="+encodeURIComponent(JSON.stringify(this._options.studies_access)):"")+"&widgetbar="+encodeURIComponent(JSON.stringify(this._options.widgetbar))+(this._options.drawings_access?"&drawingsAccess="+encodeURIComponent(JSON.stringify(this._options.drawings_access)):"")+"&timeFrames="+encodeURIComponent(JSON.stringify(this._options.time_frames))+"&locale="+encodeURIComponent(this._options.locale)+"&uid="+encodeURIComponent(this._id)+"&clientId="+encodeURIComponent(String(this._options.client_id))+"&userId="+encodeURIComponent(String(this._options.user_id))+(this._options.charts_storage_url?"&chartsStorageUrl="+encodeURIComponent(this._options.charts_storage_url):"")+(this._options.charts_storage_api_version?"&chartsStorageVer="+encodeURIComponent(this._options.charts_storage_api_version):"")+(this._options.custom_css_url?"&customCSS="+encodeURIComponent(this._options.custom_css_url):"")+(this._options.custom_font_family?"&customFontFamily="+encodeURIComponent(this._options.custom_font_family):"")+(this._options.auto_save_delay?"&autoSaveDelay="+encodeURIComponent(String(this._options.auto_save_delay)):"")+"&debug="+encodeURIComponent(String(this._options.debug))+(this._options.snapshot_url?"&snapshotUrl="+encodeURIComponent(this._options.snapshot_url):"")+(this._options.timezone?"&timezone="+encodeURIComponent(this._options.timezone):"")+(this._options.study_count_limit?"&studyCountLimit="+encodeURIComponent(String(this._options.study_count_limit)):"")+(this._options.symbol_search_request_delay?"&ssreqdelay="+encodeURIComponent(String(this._options.symbol_search_request_delay)):"")+(this._options.compare_symbols?"&compareSymbols="+encodeURIComponent(JSON.stringify(this._options.compare_symbols)):"")+(this._options.theme?"&theme="+encodeURIComponent(String(this._options.theme)):"")+(this._options.header_widget_buttons_mode?"&header_widget_buttons_mode="+encodeURIComponent(String(this._options.header_widget_buttons_mode)):"")+(this._options.time_scale?"&time_scale="+encodeURIComponent(JSON.stringify(this._options.time_scale)):"");return[`<iframe\n\t\tid="${this._id}" name="${this._id}" src="${o.href}" data-widget-options="${s}"\n\t\t${this._options.autosize||this._options.fullscreen?"":`width="${this._options.width}" height="${this._options.height}"`} title="Financial Chart" frameborder="0" allowTransparency="true" scrolling="no" allowfullscreen style="display:block;">\n\t</iframe>`,n]}};"undefined"!=typeof window&&(window.TradingView=window.TradingView||{},window.TradingView.version=s);const a=!("undefined"==typeof window||!window.navigator||!window.navigator.userAgent)&&window.navigator.userAgent.includes("CriOS");return t.version=s,t.widget=r,t}({});
