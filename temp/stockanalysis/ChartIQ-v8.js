const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["https://stockanalysis.com/_app/immutable/chunks/excellentexport.DP3fOsTs.js","https://stockanalysis.com/_app/immutable/chunks/_commonjsHelpers.BosuxZz1.js"])))=>i.map(i=>d[i]);
import{_ as bo}from"https://stockanalysis.com/_app/immutable/chunks/preload-helper.C1FmrZbK.js";import{R as Cr,s as od,b as fi,a as hi,H as nr,f as pi,g as wi,q as Pn,c as di,d as li,G as sr,i as tr,am as qt,k as cn,j as Ut,S as ld,T as cd,n as no,l as ir,o as ud,p as Yi,m as hd,e as so}from"https://stockanalysis.com/_app/immutable/chunks/scheduler.-upCTpvA.js";import{S as dd,i as fd}from"https://stockanalysis.com/_app/immutable/chunks/index.DC-wou4R.js";import{p as pd}from"https://stockanalysis.com/_app/immutable/chunks/stores.CLkJqh7I.js";import{g as Co}from"https://stockanalysis.com/_app/immutable/chunks/entry.C19aB0r5.js";import{t as wo,a as qr,l as So,q as ko,C as Ad,w as gd,d as md,r as yd,i as vd,c as xd}from"https://stockanalysis.com/_app/immutable/chunks/global.Bn1apo6R.js";import{h as bd,e as sa,f as Cd,C as wd,d as Sd,b as oo}from"https://stockanalysis.com/_app/immutable/chunks/global.C7ILYcvd.js";import{P as on}from"https://stockanalysis.com/_app/immutable/chunks/public.CrRezmHD.js";import{s as ar,r as lo,a as Hn,i as kd}from"https://stockanalysis.com/_app/immutable/chunks/Chart.CuFprrAF.js";import{x as co,z as Ed,j as Nn,d as uo}from"https://stockanalysis.com/_app/immutable/chunks/formatTableCell.CXbK30i1.js";import{f as qn}from"https://stockanalysis.com/_app/immutable/chunks/formatDates.BjYpP9Ae.js";function Bd(E,e){if(!E||E.length===0)return[];E.forEach(a=>{delete a.DT,delete a.pctChangeVsAvg});const t=Object.keys(e).map(a=>a).filter(a=>E[0][a]),n=[t.map(a=>e[a]?e[a].label:a)];E.forEach(a=>{const o=t.map(c=>a[c]);n.push(o)});const r=n[0].indexOf("% Change"),i=n[0].indexOf("Volume");if(r!==-1)for(let a=1;a<n.length;a++)n[a][r]=(parseFloat(n[a][r])/100).toString();if(i!==-1)for(let a=1;a<n.length;a++)n[a][i]=parseFloat(n[a][i].replace(/,/g,"")).toString();return n}function Dd(E){E.UI.componentMarkup("cq-hu-static",`
	<div>
		<div>Price</div><cq-hu-price></cq-hu-price>
		<div>Open</div><cq-hu-open></cq-hu-open>
		<div>Close</div><cq-hu-close></cq-hu-close>
		<div>Change</div><cq-hu-change></cq-hu-change>
	</div>
	<div>
		<div>Vol</div>
		<cq-volume-section>
			<cq-hu-volume></cq-hu-volume>
			<cq-volume-rollup></cq-volume-rollup>
		</cq-volume-section>
		<div>High</div><cq-hu-high></cq-hu-high>
		<div>Low</div><cq-hu-low></cq-hu-low>
		<div>Chg. %</div><cq-hu-changepercent></cq-hu-changepercent>
	</div>
`),E.UI.HeadsUp.prototype.position=function(){var e=this.context.stx,t=e.barFromPixel(e.cx);this.tick=e.tickFromPixel(e.cx);var s=e.chart.xaxis[t],n=e.chart.defaultPlotField,r=e.chart.highLowBars;(!n||r)&&(n="Close");var i=this.node,a=this;function o(l){var u="",h=e.layout.chartScale,d=e.chart.panel,f=e.chart.yAxis;return f.originalPriceFormatter&&f.originalPriceFormatter.func?u=f.originalPriceFormatter.func(e,d,l):f.priceFormatter&&h!="percent"&&h!="relative"?u=f.priceFormatter(e,d,l):u=e.formatYAxisPrice(l,d),u.replace(/(\.[0-9]*[1-9])0+$|\.0*$/,"$1")}function c(){const l=i.parentElement;l.querySelector("cq-hu-price").textContent="",l.querySelector("cq-hu-open").textContent="",l.querySelector("cq-hu-close").textContent="",l.querySelector("cq-hu-high").textContent="",l.querySelector("cq-hu-low").textContent="",l.querySelector("cq-hu-change").textContent="",l.querySelector("cq-hu-changepercent").textContent="",l.querySelector("cq-hu-volume").textContent="",l.querySelector("cq-volume-rollup").textContent="";function u(m){return E.isValidNumber(parseFloat(m))?m:""}if(s&&s.data){var h=E.clone(s.data);h.Open===void 0&&(h.Open=h.Close),h.High===void 0&&(h.High=Math.max(h.Open,h.Close)),h.Low===void 0&&(h.Low=Math.min(h.Open,h.Close));let m=h.tick-1;m<0&&(m=0);let b=e.charts.chart.dataSet[m].Close,C=h.Close-b,F;C<0?F="":F="+";let w=(h.Close-b)/b;w==1?w=0:w=w*100,l.querySelector("cq-hu-open").textContent=o(u(h.Open)),l.querySelector("cq-hu-price").textContent=o(u(h[n])),l.querySelector("cq-hu-close").textContent=o(u(h.Close)),l.querySelector("cq-hu-high").textContent=o(u(h.High)),l.querySelector("cq-hu-low").textContent=o(u(h.Low)),l.querySelector("cq-hu-change").textContent=F+o(u(C)),l.querySelector("cq-hu-changepercent").textContent=F+o(u(w))+"%";var d=E.condenseInt(h.Volume),f=d.charAt(d.length-1);f>"9"&&(d=d.substring(0,d.length-1),l.querySelector("cq-volume-rollup").textContent=f.toUpperCase()),l.querySelector("cq-hu-volume").textContent=d;var A=h.displayDate;A||(A=h.DT),e.internationalizer?E.ChartEngine.isDailyInterval(e.layout.interval):E.ChartEngine.isDailyInterval(e.layout.interval)?l.querySelector("cq-hu-date").textContent=E.mmddyyyy(E.yyyymmddhhmm(A)):l.querySelector("cq-hu-date").textContent=E.mmddhhmm(E.yyyymmddhhmmssmmm(A));var p=l.querySelectorAll("cq-volume-visual");if(p.length){var g=a.maxVolume.value?h.Volume/a.maxVolume.value:0;p.forEach(U=>{U.style.width=Math.round(g*100)+"%"})}}}(this.tick!=this.prevTick||s&&+s.DT==+e.chart.endPoints.end)&&(this.timeout&&clearTimeout(this.timeout),this.timeout=setTimeout(c,0)),this.prevTick=this.tick,this.params.followMouse&&(e.openDialog&&(this.tick=-1),this.followMouse(this.tick))}}function Td(E){let e=E.Marker.Performance.prototype.drawMarker,t=E.Marker.Performance.prototype.positionPopUpNode,s=E.Marker.Performance.drawMarkers,n=E.Marker.Performance.calculateMarkerStyles,r=E.Marker.Performance.drawCircleMarker,i=E.Marker.Performance.drawSquareMarker,a=E.Marker.Performance.drawCalloutMarker,o=E.Marker.Performance.drawTextMarker,c=E.Marker.Performance.drawMarkerStem,l=E.Marker.Performance.consolidateExpanded,u=E.Marker.Performance.reconstituteExpanded,h=E.Marker.Performance.prototype.quickCache,d=E.Marker.Performance.prototype.calculateYPosition,f=E.Marker.Performance.prototype.prepareForHolder,A=E.Marker.Performance.prototype.addToHolder,p=E.Marker.Performance.prototype.remove,g=E.Marker.Performance.prototype.click;E.Marker.Performance=function(m){this.params={displayCategory:!0,displayStem:!0,invert:!1,story:"",headline:""},E.extend(this.params,m);var b=this.template=document.createElement("TEMPLATE");let F='<div class="stx-marker highlight"><div class="stx-visual"><div class="stx-marker-content"><div class="stx-marker stx-performance-marker stx-marker-expand"><h4></h4><div class="marker-subheadline"></div><div class="marker-body">'+'<div class="revenue-headline"></div><div class="revenue-story"></div><div class="eps-headline"></div><div class="eps-story"></div>'+'</div></div></div><div class="stx-stem"></div></div>',w='<div class="stx-marker highlight"><div class="stx-visual"><div class="stx-marker-content"><div class="stx-marker stx-performance-marker stx-marker-expand"><h4 class="div-header"></h4><div class="marker-body"><div class="ex-div-headline"></div><div class="ex-div-story"></div><div class="pay-date-headline"></div><div class="pay-date-story"></div></div></div></div><div class="stx-stem"></div></div>';b.innerHTML=m.markerType==="earnings"?F:w;var U=this.template.content.cloneNode(!0),B=U.querySelector(".stx-marker");B.classList.add(m.type),B.classList.add(m.category),m.size&&B.classList.add(m.size);var k=U.querySelector(".stx-visual"),y=U.querySelector(".stx-marker-expand"),S=U.querySelector(".marker-subheadline"),T=U.querySelector(".pre-headline"),_=U.querySelector(".revenue-headline"),L=U.querySelector(".revenue-story"),H=U.querySelector(".eps-headline"),P=U.querySelector(".eps-story"),N=U.querySelector(".ex-div-headline"),v=U.querySelector(".ex-div-story"),x=U.querySelector(".pay-date-headline"),M=U.querySelector(".pay-date-story"),D=U.querySelector("h4");if(D&&(D.innerText=this.params.headline),S&&(S.innerText=this.params.subheadline),T&&(T.innerText=this.params.preHeadline),_&&(_.innerText=this.params.revenueHeadline),L&&(L.innerText=this.params.revenueStory),H&&(H.innerText=this.params.epsHeadline),P&&(P.innerText=this.params.epsStory),N&&(N.innerText=this.params.exDivHeadline),v&&(v.innerText=this.params.exDivStory),x&&(x.innerText=this.params.payDateHeadline),M&&(M.innerText=this.params.payDateStory),this.hasText=!!m.headline||!!m.story,this.deferAttach=!0,this.node=U.firstChild,this.node.params=this.params,this.visual=k,this.expand=y,m.type==="callout"){var Q=y.removeChild(D);U.querySelector(".stx-marker-content").insertBefore(Q,y)}},E.inheritsFrom(E.Marker.Performance,E.Marker.NodeCreator,!1),E.Marker.Performance.prototype.drawMarker=e,E.Marker.Performance.prototype.positionPopUpNode=t,E.Marker.Performance.prototype.quickCache=h,E.Marker.Performance.prototype.calculateYPosition=d,E.Marker.Performance.prototype.prepareForHolder=f,E.Marker.Performance.prototype.addToHolder=A,E.Marker.Performance.prototype.remove=p,E.Marker.Performance.prototype.click=g,E.Marker.Performance.drawMarkers=s,E.Marker.Performance.calculateMarkerStyles=n,E.Marker.Performance.drawCircleMarker=r,E.Marker.Performance.drawSquareMarker=i,E.Marker.Performance.drawCalloutMarker=a,E.Marker.Performance.drawTextMarker=o,E.Marker.Performance.drawMarkerStem=c,E.Marker.Performance.consolidateExpanded=l,E.Marker.Performance.reconstituteExpanded=u}function ho(E,e,t,s,n){let r=[{range:"B2:E99999",format:{type:"n",pattern:"0.000"}},{range:"F2:F99999",format:{type:"n",pattern:"0.000%"}},{range:"G2:G99999",format:{type:"n",pattern:"0"}},{range:"H2:AZ99999",format:{type:"n",pattern:"0.000"}}];try{n.convert({openAsDownload:!0,filename:s||"export",format:E},[{name:"Export",from:{array:Bd(e,t)},formats:r}])}catch(i){let a=bd(i,"No error message was provided");wo("error","Error","There was an error, please try again or contact support@stockanalysis.com"),sa("Export_Error",{type:a})}finally{sa("Pro_Export",{type:E})}}const Md=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"}));ue[281018]=function(){for(var E=2;E!==9;)switch(E){case 5:var e;try{for(var t=2;t!==6;)switch(t){case 2:Object.defineProperty(Object.prototype,"kn7iK",{get:function(){return this},configurable:!0}),e=kn7iK,t=5;break;case 5:e.Q9Irb=e,t=4;break;case 9:delete e.Q9Irb;var s=Object.prototype;delete s.kn7iK,t=6;break;case 4:t=typeof Q9Irb>"u"?3:9;break;case 3:throw""}}catch{e=window}return e;case 1:return globalThis;case 2:E=typeof globalThis=="object"?1:5;break}}();ue.H$2pw=Id;Fd(ue[281018]);ue[456066]=function(){for(var E=2;E!==5;)switch(E){case 2:var e={K1Dd35V:function(t){for(var s=2;s!==18;)switch(s){case 8:s=n<o.length?7:12;break;case 13:n++,r++,s=8;break;case 9:var n=0,r=0;s=8;break;case 2:var i=function(A){for(var p=2;p!==11;)switch(p){case 3:p=g<A.length?9:7;break;case 13:p=b?12:6;break;case 4:var g=0;p=3;break;case 7:var m,b;p=6;break;case 8:g++,p=3;break;case 6:m=ue.d2(ue.B5(w,function(){for(var U=2;U!==1;)switch(U){case 2:return .5-F()}}),""),b=ue[m],p=13;break;case 12:return b;case 9:w[g]=C(A[g]+54),p=8;break;case 2:var C=ue.h8(),F=ue.o2(),w=[];p=4;break}},a="",o=ue.H6()(i([65,-18,58,-4,18])()),c=ue.h8(),l=ue.A4().bind(o),u=ue.A4().bind(t);s=9;break;case 7:s=r===t.length?6:14;break;case 6:r=0,s=14;break;case 12:a=ue.o0(a,"}");var h=0,d=function(A){for(var p=2;p!==35;)switch(p){case 15:p=h===6&&A===47?27:25;break;case 25:p=h===7&&A===9?24:22;break;case 14:ue.g2(ue.d4(),a,ue.T8(ue.T8(a,-10,10),0,8)),p=4;break;case 5:ue.g2(ue.d4(),a,ue.T8(ue.T8(a,-7,7),0,5)),p=4;break;case 1:h+=1,p=5;break;case 26:ue.g2(ue.d4(),a,ue.T8(ue.T8(a,-7,7),0,5)),p=4;break;case 7:p=h===2&&A===31?6:13;break;case 3:p=h===1&&A===23?9:7;break;case 10:p=h===4&&A===10?20:18;break;case 16:ue.g2(ue.d4(),a,ue.T8(ue.T8(a,-3,3),0,2)),p=4;break;case 27:h+=1,p=26;break;case 13:p=h===3&&A===37?12:10;break;case 11:ue.g2(ue.d4(),a,ue.T8(ue.T8(a,-4,4),0,3)),p=4;break;case 22:e.K1Dd35V=f,p=21;break;case 24:h+=1,p=23;break;case 6:h+=1,p=14;break;case 4:return h;case 17:h+=1,p=16;break;case 12:h+=1,p=11;break;case 2:p=h===0&&A===40?1:3;break;case 21:return f(A);case 18:p=h===5&&A===14?17:15;break;case 23:ue.g2(ue.d4(),a,ue.T8(ue.T8(a,-4,4),0,3)),p=4;break;case 20:h+=1,p=19;break;case 9:h+=1,p=8;break;case 8:ue.g2(ue.d4(),a,ue.T8(ue.T8(a,-5,5),0,3)),p=4;break;case 19:ue.g2(ue.d4(),a,ue.T8(ue.T8(a,-7,7),0,6)),p=4;break}},f=function(A){for(var p=2;p!==1;)switch(p){case 2:return a[A]}};return d;case 14:a+=c(l(n)^u(r)),s=13;break}}("L%O1ZH")};return e}}();ue.r4=function(){return typeof ue[456066].K1Dd35V=="function"?ue[456066].K1Dd35V.apply(ue[456066],arguments):ue[456066].K1Dd35V};ue.i7=function(){return typeof ue[456066].K1Dd35V=="function"?ue[456066].K1Dd35V.apply(ue[456066],arguments):ue[456066].K1Dd35V};var pr=2;for(;pr!==13;)switch(pr){case 9:ue.J3=55,pr=8;break;case 2:pr=ue.r4(40)!==ue.i7(23)?1:5;break;case 1:ue.c1=63,pr=5;break;case 14:ue.Z_=76,pr=13;break;case 5:pr=ue.r4(31)==ue.r4(37)?4:3;break;case 7:ue.Z5=-2,pr=6;break;case 8:pr=ue.r4(14)===ue.i7(47)?7:6;break;case 4:ue.X4=14,pr=3;break;case 6:pr=ue.i7(9)!==13?14:13;break;case 3:pr=ue.r4(10)>79?9:8;break}ue.W16=function(){return typeof ue[370733].l4NKZO4=="function"?ue[370733].l4NKZO4.apply(ue[370733],arguments):ue[370733].l4NKZO4};ue[648860]=318;function ue(){}ue.S1v=function(){return typeof ue[347685].A_xV$pL=="function"?ue[347685].A_xV$pL.apply(ue[347685],arguments):ue[347685].A_xV$pL};ue.f4=function(){return typeof ue[122217].T6jQgCD=="function"?ue[122217].T6jQgCD.apply(ue[122217],arguments):ue[122217].T6jQgCD};ue[32362]="GA6";ue.c7=function(){return typeof ue[122217].T6jQgCD=="function"?ue[122217].T6jQgCD.apply(ue[122217],arguments):ue[122217].T6jQgCD};ue.v7v=function(){return typeof ue[514284].S_WRQLR=="function"?ue[514284].S_WRQLR.apply(ue[514284],arguments):ue[514284].S_WRQLR};ue[122217]=function(){for(var E=2;E!==1;)switch(E){case 2:return{T6jQgCD:function(){for(var e=2;e!==8;)switch(e){case 5:e=t===2?4:1;break;case 2:var t=2;e=1;break;case 1:e=t!==1?5:9;break;case 4:(function(){for(var s=2;s!==38;)switch(s){case 4:f+=c,f+=n,s=9;break;case 34:s=h===7?33:44;break;case 39:h=18,s=1;break;case 12:h=25,s=1;break;case 5:s=h===18?4:8;break;case 26:s=h===24?25:24;break;case 23:o[d]=function(){},s=22;break;case 1:s=h!==22?5:38;break;case 10:var n="0",r="B",i=281018,a="Q";s=17;break;case 7:f+=a,f+=l,f+=n;var o=ue[i];s=12;break;case 29:d+=a,s=28;break;case 35:h=o[f]?24:23,s=1;break;case 9:h=16,s=1;break;case 40:f+=u,s=39;break;case 17:var c="E",l="f",u="2";s=27;break;case 27:h=7,s=1;break;case 44:s=h===11?43:1;break;case 24:s=h===23?23:21;break;case 21:s=h===25?35:34;break;case 2:var h=2;s=1;break;case 28:h=11,s=1;break;case 8:s=h===16?7:11;break;case 11:s=h===2?10:26;break;case 33:var d=r;d+=u,d+=c,d+=n,s=29;break;case 25:return;case 22:h=22,s=1;break;case 43:d+=l,d+=n;var f=r;s=40;break}})(),e=3;break;case 3:t=1,e=1;break;case 9:e=9;break}}}}}();function Fd(E){function e(u){for(var h=2;h!==5;)switch(h){case 2:var d=[arguments];return d[0][0].RegExp}}function t(u){for(var h=2;h!==5;)switch(h){case 2:var d=[arguments];return d[0][0].String}}function s(u){for(var h=2;h!==5;)switch(h){case 2:var d=[arguments];return d[0][0].Math}}function n(u){for(var h=2;h!==5;)switch(h){case 2:var d=[arguments];return d[0][0].Array}}function r(u){for(var h=2;h!==5;)switch(h){case 2:var d=[arguments];return d[0][0].Function}}for(var i=2;i!==134;)switch(i){case 22:a[96]="",a[96]="_",a[61]="g",a[85]="x",i=33;break;case 2:var a=[arguments];a[9]="",a[9]="5",a[8]="",a[8]="h",a[4]="",i=8;break;case 117:o(t,"fromCharCode",a[33],a[53],a[33]),i=116;break;case 116:o(l,"Math",a[33],a[15],a[33]),i=115;break;case 91:o(n,"sort",a[38],a[66],a[33]),i=119;break;case 111:o(n,"unshift",a[38],a[42],a[33]),i=110;break;case 118:o(l,"String",a[33],a[84],a[33]),i=117;break;case 47:a[38]=4,a[38]=1,a[33]=0,a[98]=a[87],i=64;break;case 56:a[93]=a[41],a[93]+=a[83],a[93]+=a[59],a[57]=a[61],i=75;break;case 52:a[67]="u",a[30]="",a[30]="4",a[87]="",a[87]="D",i=47;break;case 113:o(t,"charCodeAt",a[38],a[28],a[33]),i=112;break;case 115:o(s,"random",a[33],a[32],a[33]),i=114;break;case 38:a[55]="",a[55]="o",a[67]="",a[41]="__",a[67]="",i=52;break;case 119:o(n,"join",a[38],a[37],a[33]),i=118;break;case 8:a[5]="1",a[4]="H",a[7]="",a[3]="B",i=13;break;case 84:a[42]+=a[30],a[52]=a[55],a[52]+=a[1],a[28]=a[7],a[28]+=a[30],a[29]=a[4],i=78;break;case 78:a[29]+=a[91],a[32]=a[55],a[32]+=a[6],a[15]=a[85],i=101;break;case 60:a[22]+=a[90],a[94]=a[25],a[94]+=a[44],a[94]+=a[85],i=56;break;case 106:o(e,"test",a[38],a[57],a[33]),i=105;break;case 101:a[15]+=a[36],a[53]=a[8],a[53]+=a[36],a[84]=a[2],i=97;break;case 107:o(l,a[97],a[33],a[51],a[33]),i=106;break;case 135:o(l,a[22],a[33],a[98],a[33]),i=134;break;case 108:o(n,"push",a[38],a[56],a[33]),i=107;break;case 64:a[98]+=a[30],a[98]+=a[67],a[22]=a[41],a[22]+=a[55],i=60;break;case 114:o(l,"decodeURI",a[33],a[29],a[33]),i=113;break;case 110:o(r,"apply",a[38],a[46],a[33]),i=109;break;case 75:a[57]+=a[96],a[57]+=a[24],a[51]=a[35],a[51]+=a[44],i=71;break;case 97:a[84]+=a[5],a[37]=a[2],a[37]+=a[6],a[66]=a[3],a[66]+=a[9],i=92;break;case 92:var o=function(u,h,d,f,A){for(var p=2;p!==5;)switch(p){case 2:var g=[arguments];c(a[0][0],g[0][0],g[0][1],g[0][2],g[0][3],g[0][4]),p=5;break}};i=91;break;case 112:o(t,"split",a[38],a[52],a[33]),i=111;break;case 88:a[77]+=a[36],a[46]=a[61],a[46]+=a[6],a[42]=a[2],i=84;break;case 13:a[7]="A",a[1]="",a[1]="0",a[2]="",a[2]="",a[2]="d",a[6]="",i=17;break;case 71:a[51]+=a[23],a[97]=a[41],a[97]+=a[73],a[97]+=a[47],i=67;break;case 42:a[59]="ual",a[90]="",a[90]="ptimize",a[25]="z",i=38;break;case 67:a[56]=a[86],a[56]+=a[91],a[56]+=a[24],a[77]=a[45],i=88;break;case 17:a[6]="2",a[91]="",a[91]="6",a[47]="",i=26;break;case 109:o(n,"splice",a[38],a[77],a[33]),i=108;break;case 29:a[24]="R",a[44]="3",a[23]="t",a[35]="J",i=42;break;case 26:a[47]="stract",a[86]="G",a[73]="",a[73]="ab",i=22;break;case 105:o(l,a[93],a[33],a[94],a[33]),i=135;break;case 33:a[45]="T",a[36]="8",a[83]="resid",a[44]="",i=29;break}function c(u,h,d,f,A,p){for(var g=2;g!==14;)switch(g){case 2:var m=[arguments];m[4]="roperty",m[3]="",m[3]="eP",g=3;break;case 3:m[1]="",m[1]="defin",m[9]=!0,m[9]=!1,g=6;break;case 6:try{for(var b=2;b!==11;)switch(b){case 6:m[8].set=function(F){for(var w=2;w!==5;)switch(w){case 2:var U=[arguments];m[5][m[0][2]]=U[0][0],w=5;break}},m[8].get=function(){for(var F=2;F!==20;)switch(F){case 6:w[1]+=w[7],F=14;break;case 12:F=typeof m[5][m[0][2]]==w[1]?11:10;break;case 10:return m[5][m[0][2]];case 3:w[2]="in",w[9]="undef",w[1]=w[9],w[1]+=w[2],F=6;break;case 14:F=m[0][5]===a[33]?13:12;break;case 13:return(...U)=>{var B=1;return B=null,U.length>a[33]?m[0][3]===a[33]?m[5][m[0][2]].apply(m[7],U):(U[a[33]]===B||U[a[33]]===void 0?m[7]:U[a[33]])[m[0][2]](...U.slice(a[38])):m[5][m[0][2]]};case 2:var w=[arguments];w[7]="ed",w[2]="",w[2]="",F=3;break;case 11:return}},m[8].enumerable=m[9];try{for(var C=2;C!==3;)switch(C){case 2:m[2]=m[1],m[2]+=m[3],m[2]+=m[4],m[0][0].Object[m[2]](m[6],m[0][4],m[8]),C=3;break}}catch{}b=11;break;case 2:m[8]={},m[7]=(0,m[0][1])(m[0][0]),m[5]=[m[7],m[7].prototype][m[0][3]],b=4;break;case 9:return;case 7:m[5][m[0][4]]=m[5][m[0][2]],b=6;break;case 3:b=m[5].hasOwnProperty(m[0][4])&&m[5][m[0][4]]===m[5][m[0][2]]?9:8;break;case 4:m[6]=m[0][5]===a[33]?ue:m[5],b=3;break;case 8:b=m[0][5]!==a[33]?7:6;break}}catch{}g=14;break}}function l(u){for(var h=2;h!==5;)switch(h){case 2:var d=[arguments];return d[0][0]}}}ue[281018].t0xx=ue;ue.J1m=function(){return typeof ue[514284].S_WRQLR=="function"?ue[514284].S_WRQLR.apply(ue[514284],arguments):ue[514284].S_WRQLR};ue.D8X=function(){return typeof ue[347685].A_xV$pL=="function"?ue[347685].A_xV$pL.apply(ue[347685],arguments):ue[347685].A_xV$pL};ue[514284]=function(E){return{S_WRQLR:function(){var e,t=arguments;switch(E){case 114:e=t[1]-(t[2]-+t[0]);break;case 56:e=t[0]*t[2]-t[3]-t[1];break;case 65:e=t[2]*t[0]/t[1]+t[3];break;case 36:e=t[0]*t[1]-t[2];break;case 76:e=t[1]*+t[0];break;case 71:e=t[0]-t[2]-t[1];break;case 158:e=t[2]*t[0]/t[1];break;case 136:e=t[1]+t[0]*t[2];break;case 116:e=(t[2]-t[0])/(t[1]-t[3]);break;case 115:e=(-t[2]+t[0])*t[1]-t[3];break;case 94:e=(t[1]+t[4]-t[2])*t[0]-t[3];break;case 80:e=(t[0]+t[2])*t[4]+t[1]-t[3];break;case 60:e=t[0]+t[4]+t[3]+t[2]+t[5]+t[6]+t[1];break;case 129:e=t[3]/t[1]-t[4]+t[2]-t[0];break;case 48:e=-t[2]*t[1]+t[0];break;case 170:e=(t[1]-t[4])/t[3]-t[0]+t[2];break;case 171:e=t[0]-t[2]*t[1];break;case 132:e=(t[1]+t[3])*t[0]/t[2]-t[4];break;case 26:e=t[1]/t[0];break;case 89:e=t[1]/t[4]*t[2]*t[0]-t[3];break;case 137:e=t[4]/t[3]/t[2]-t[0]+t[1];break;case 27:e=t[1]|t[0];break;case 47:e=(t[3]+t[2]+t[4])*t[1]-t[0];break;case 138:e=(t[0]/t[1]+t[3])/t[4]+t[2];break;case 33:e=(t[4]-t[1])/t[0]+(t[3]<<t[2]);break;case 11:e=t[2]/t[0]+t[3]+t[1];break;case 38:e=t[2]-t[1]/t[0];break;case 104:e=t[4]-t[3]+t[0]-t[2]+t[1];break;case 93:e=t[3]+t[2]+t[0]+t[1]-t[4];break;case 51:e=t[3]-t[2]+t[0]+t[1];break;case 1:e=-t[2]/t[1]/t[0]-t[3];break;case 127:e=(-t[3]-t[2])/t[1]+t[0];break;case 168:e=t[2]+t[3]*(t[1]+t[0]);break;case 85:e=(t[0]-t[4])*t[3]+t[1]+t[2];break;case 150:e=(t[3]-t[2])/t[0]-t[1];break;case 134:e=t[2]*t[3]/t[1]/t[4]-t[0];break;case 140:e=t[0]/t[3]*t[2]-t[1];break;case 69:e=t[3]-t[0]+t[2]+t[1]-t[4];break;case 142:e=t[1]-(t[0]<<t[2]);break;case 149:e=(t[2]-t[3]+t[0])/t[1]-t[4];break;case 96:e=t[1]+(t[0]|t[2]);break;case 40:e=t[0]+t[1]+t[2];break;case 151:e=t[2]/t[0]*t[4]/t[3]-t[1];break;case 41:e=t[0]*t[2]*t[1];break;case 55:e=t[0]/t[1]/t[3]/t[2]+t[4];break;case 25:e=t[0]*t[1];break;case 13:e=-t[1]+t[0];break;case 98:e=(t[2]-t[1])*(t[0]-t[5])-(t[4]-t[3])*(t[6]-t[7]);break;case 57:e=(t[0]-t[3])*t[1]+t[2];break;case 18:e=t[0]*-t[1];break;case 159:e=(t[4]+t[3])/t[1]*t[2]-t[0];break;case 97:e=-t[1]/t[0]+t[2];break;case 161:e=(t[1]|t[0])*t[2];break;case 118:e=(t[0]-t[3]+t[4])/t[2]+t[1];break;case 17:e=t[0]^t[1];break;case 10:e=t[4]*t[2]-t[1]+t[3]-t[0];break;case 68:e=t[1]/t[3]*t[2]+t[0];break;case 15:e=t[2]+t[1]-t[0];break;case 67:e=t[1]+t[3]+t[0]-t[2];break;case 46:e=(-t[3]-t[0]-t[2])/t[4]+t[1];break;case 106:e=(t[4]*t[3]-t[1])/t[0]-t[2];break;case 128:e=-t[2]+t[3]+t[0]-t[1];break;case 91:e=t[3]*t[4]/t[1]*t[0]+t[2];break;case 152:e=(-t[1]-t[4])/t[0]/t[2]+t[3];break;case 100:e=t[2]+t[3]*(t[0]-t[1]);break;case 145:e=t[2]+t[3]/t[0]*t[1];break;case 166:e=t[0]-t[3]+t[2]-t[1];break;case 86:e=t[0]*t[1]+t[2];break;case 74:e=t[0]===t[1];break;case 87:e=t[2]*t[1]/t[3]-t[0];break;case 31:e=(t[0]+t[2])/t[1];break;case 108:e=t[2]/t[0]-t[1]+t[3];break;case 102:e=(t[0]-t[2])*t[1]*t[3]-t[4];break;case 63:e=t[2]*t[3]*t[1]*t[0];break;case 6:e=(-t[3]+t[2])/t[1]-t[4]+t[0];break;case 23:e=t[1]|t[2]<<t[4]|t[3]<<t[0];break;case 163:e=t[0]/(t[1]^t[2]);break;case 133:e=t[1]*-+t[0];break;case 112:e=(t[0]-t[1])*t[4]*t[3]+t[2];break;case 107:e=t[0]*t[3]*t[1]-t[2]-t[4];break;case 21:e=t[0]>>t[1];break;case 14:e=t[1]/t[3]+t[0]-t[2];break;case 66:e=t[3]/t[2]/t[1]-t[0];break;case 7:e=(t[0]-t[2])*t[1]-t[3];break;case 83:e=(t[2]*t[0]+t[3])*t[4]-t[1];break;case 49:e=t[1]-t[3]-t[0]+t[2];break;case 162:e=t[1]>=t[0];break;case 50:e=t[1]/t[2]/t[3]+t[0];break;case 34:e=t[4]+(t[3]-t[1])*t[2]*t[0];break;case 84:e=t[2]/t[3]*t[4]-t[0]+t[1];break;case 29:e=t[3]*(t[0]-t[1]/(t[4]-t[2]));break;case 139:e=t[1]+t[0]+t[3]%t[2];break;case 143:e=t[3]+t[1]/t[0]+t[2];break;case 113:e=t[0]-(t[1]^t[2]);break;case 101:e=(t[4]-t[1])*t[2]-t[3]+t[0];break;case 156:e=-t[0]-t[1]+t[2];break;case 54:e=t[1]/t[2]-t[0]+t[3]+t[4];break;case 155:e=t[0]*t[2]%t[1];break;case 164:e=(t[0]-t[1])/+t[2];break;case 37:e=t[0]+t[2]/t[1];break;case 126:e=-t[1]/t[0]-t[2];break;case 32:e=(t[1]-t[3])/t[0]+t[2];break;case 75:e=t[0]!==t[1];break;case 141:e=-t[3]-t[4]-t[2]-t[0]+t[1];break;case 111:e=t[0]+t[2]+t[1]+t[3];break;case 44:e=t[4]*t[1]+t[2]-t[0]-t[3];break;case 5:e=(t[2]+t[1])*t[0]-t[3];break;case 59:e=(-t[2]/t[4]-t[1])/t[3]+t[0];break;case 125:e=t[1]-+t[0];break;case 42:e=t[1]*t[2]+t[3]+t[0]-t[4];break;case 131:e=+t[0]/t[1];break;case 43:e=t[2]-t[1]+t[0];break;case 0:e=-t[1]/t[2]+t[0]-t[3];break;case 167:e=-t[1]/t[3]+t[0]-t[2]+t[4];break;case 88:e=(t[3]-t[1])/t[2]*t[0]+t[4];break;case 53:e=(t[3]/t[2]+t[0])*t[4]+t[1];break;case 35:e=t[2]+(t[7]-t[6])*((t[1]<<t[5])/t[3]-t[0])*t[4];break;case 8:e=(t[1]+t[2])/t[0]-t[3];break;case 73:e=t[1]+t[4]+t[2]+t[3]+t[0];break;case 78:e=t[0]<t[1];break;case 130:e=+t[0]%t[1];break;case 124:e=t[3]/t[2]-t[1]-t[0];break;case 160:e=t[0]!=t[1];break;case 3:e=t[2]/t[0]-t[1];break;case 105:e=(t[3]-t[2]-t[1])*t[4]+t[0];break;case 95:e=(t[2]-t[1])*t[3]+t[4]-t[0];break;case 123:e=(-t[2]+t[0])/t[3]+t[1];break;case 169:e=t[3]*t[1]/t[2]*t[0]-t[4];break;case 165:e=-t[2]+t[0]+t[1];break;case 16:e=-t[1]/t[0]+t[2]+t[3];break;case 135:e=(t[2]+t[4]-t[1])/t[3]+t[0];break;case 72:e=t[0]*t[2]-t[1]+t[3];break;case 52:e=t[0]*t[3]*t[2]-t[1];break;case 120:e=-t[1]+t[2]-t[0];break;case 70:e=t[0]+t[3]-t[1]+t[2];break;case 61:e=t[5]+t[4]+t[0]+t[6]+t[8]+t[2]+t[1]+t[3]+t[7];break;case 103:e=(-t[0]+t[1])/t[3]-t[2];break;case 45:e=t[0]*t[2]+t[3]-t[1];break;case 144:e=-t[3]*t[0]*t[2]*t[4]+t[1];break;case 122:e=t[2]-t[1]-(t[0]-t[3]);break;case 39:e=t[2]*(t[1]>>t[0]);break;case 9:e=-t[3]*t[2]/t[0]+t[1];break;case 110:e=(t[2]-t[1]+t[3])*t[4]-t[0];break;case 157:e=t[2]*t[0]/+t[1];break;case 147:e=(t[0]-t[1])/t[2]*t[3]-t[4];break;case 121:e=t[0]+t[1]/+t[2];break;case 99:e=t[1]==t[0];break;case 82:e=t[2]+t[1]-t[3]-t[0];break;case 79:e=(t[4]/t[3]+t[2])/t[0]-t[1];break;case 148:e=t[1]-(t[2]-t[0]);break;case 28:e=t[0]/(t[2]-t[1]);break;case 30:e=(t[0]-t[2])/t[1];break;case 81:e=t[3]*t[4]*t[1]*t[2]-t[0];break;case 4:e=(t[0]+t[2])/t[3]+t[1];break;case 24:e=t[0]/+t[1];break;case 92:e=(t[1]+t[2]+t[0])/t[3]+t[4];break;case 64:e=t[1]/t[0]+t[2];break;case 146:e=t[0]>t[1];break;case 153:e=(t[0]-t[2])*t[1];break;case 2:e=t[0]-t[1];break;case 77:e=t[0]+(t[1]>>t[2]);break;case 90:e=t[3]-t[1]-t[0]+t[4]+t[2];break;case 119:e=(t[0]-t[4])/t[3]/t[2]+t[1];break;case 19:e=t[1]+ +t[0];break;case 20:e=(t[2]-t[1])*(t[3]-t[0])/(t[4]-t[5]);break;case 154:e=(t[2]|t[0])/t[1];break;case 109:e=(t[1]+t[2])/t[4]/t[3]+t[0];break;case 22:e=t[1]<<t[0];break;case 12:e=t[0]+t[1];break;case 58:e=t[3]/t[4]*t[0]+t[1]-t[2];break;case 62:e=t[1]+t[6]+t[9]+t[0]+t[5]+t[2]+t[10]+t[4]+t[7]+t[3]+t[8];break;case 117:e=t[0]*(t[2]-t[3])+t[1];break}return e},R5jwG24:function(e){E=e}}}();ue.z_m=function(){return typeof ue[514284].R5jwG24=="function"?ue[514284].R5jwG24.apply(ue[514284],arguments):ue[514284].R5jwG24};ue[370733]=function(){for(var E=2;E!==9;)switch(E){case 4:return e[1].l4NKZO4=function(){for(var t=2;t!==90;)switch(t){case 1:t=e[9]?5:4;break;case 2:var s=[arguments];t=1;break;case 12:s[1]=s[3],s[8]={},s[8].A0i=["Y6G"],s[8].t2z=function(){var n=!1,r=[];try{for(var i in console)ue.G6R(r,i);n=r.length===0}catch{}var a=n;return a},s[7]=s[8],t=18;break;case 61:s[28]="Q_Y",s[58]="t2z",s[35]="y3$",t=58;break;case 57:t=s[89]<s[4].length?56:69;break;case 71:s[16]++,t=76;break;case 68:t=68;break;case 4:s[4]=[],s[9]={},s[9].A0i=["Y6G"],s[9].t2z=function(){var n=typeof ue.J3t()=="function";return n},t=7;break;case 24:s[38]=s[47],s[64]={},s[64].A0i=["Q0e"],s[64].t2z=function(){var n=function(){return"aa".endsWith("a")},r=ue.g_R(/\x74\x72\x75\x65/,n+[]);return r},s[53]=s[64],t=34;break;case 69:t=function(n){for(var r=2;r!==22;)switch(r){case 18:i[3]=!1,r=17;break;case 10:r=i[5][s[28]]===s[22]?20:19;break;case 25:i[3]=!0,r=24;break;case 2:var i=[arguments];r=1;break;case 1:r=i[0][0].length===0?5:4;break;case 17:i[7]=0,r=16;break;case 26:r=i[9]>=.5?25:24;break;case 20:i[4][i[5][s[35]]].h+=!0,r=19;break;case 23:return i[3];case 11:i[4][i[5][s[35]]].t+=!0,r=10;break;case 12:ue.G6R(i[6],i[5][s[35]]),r=11;break;case 15:i[2]=i[6][i[7]],i[9]=i[4][i[2]].h/i[4][i[2]].t,r=26;break;case 16:r=i[7]<i[6].length?15:23;break;case 14:r=typeof i[4][i[5][s[35]]]>"u"?13:11;break;case 5:return;case 6:i[5]=i[0][0][i[7]],r=14;break;case 4:i[4]={},i[6]=[],i[7]=0,r=8;break;case 8:i[7]=0,r=7;break;case 24:i[7]++,r=16;break;case 13:i[4][i[5][s[35]]]=ue.g2(function(){for(var a=2;a!==9;)switch(a){case 2:var o=[arguments];o[5]={},a=5;break;case 5:return o[5].h=0,o[5].t=0,o[5]}},this,arguments),r=12;break;case 7:r=i[7]<i[0][0].length?6:18;break;case 19:i[7]++,r=7;break}}(s[30])?68:67;break;case 70:s[89]++,t=57;break;case 34:s[20]={},s[20].A0i=["Y6G"],s[20].t2z=function(){var n=typeof ue.z3x()=="function";return n},s[49]=s[20],s[33]={},t=29;break;case 37:s[97].t2z=function(){var n=function(){return"x y".slice(0,1)},r=!ue.g_R(/\x79/,n+[]);return r},s[50]=s[97],ue.G6R(s[4],s[65]),ue.G6R(s[4],s[49]),ue.G6R(s[4],s[1]),ue.G6R(s[4],s[6]),t=50;break;case 56:s[43]=s[4][s[89]];try{s[81]=s[43][s[58]]()?s[22]:s[74]}catch{s[81]=s[74]}t=77;break;case 77:s[16]=0,t=76;break;case 58:s[89]=0,t=57;break;case 65:s[30]=[],s[22]="Y7p",s[74]="V3Q",s[87]="A0i",t=61;break;case 7:s[6]=s[9],s[3]={},s[3].A0i=["Y6G"],s[3].t2z=function(){var n=typeof ue.D4u()=="function";return n},t=12;break;case 40:s[65]=s[99],s[97]={},s[97].A0i=["Q0e"],t=37;break;case 18:s[5]={},t=17;break;case 15:s[2]=s[5],s[47]={},s[47].A0i=["Q0e"],s[47].t2z=function(){var n=function(){return escape("=")},r=ue.g_R(/\x33\u0044/,n+[]);return r},t=24;break;case 46:ue.G6R(s[4],s[38]),ue.G6R(s[4],s[44]),t=65;break;case 67:return e[9]=82,84;case 75:s[26]={},s[26][s[35]]=s[43][s[87]][s[16]],s[26][s[28]]=s[81],ue.G6R(s[30],s[26]),t=71;break;case 5:return 45;case 17:s[5].A0i=["Q0e"],s[5].t2z=function(){var n=function(){return"a".anchor("b")},r=ue.g_R(/(\u003c|\u003e)/,n+[]);return r},t=15;break;case 29:s[33].A0i=["Q0e"],s[33].t2z=function(){var n=function(){return decodeURIComponent("%25")},r=!ue.g_R(/\u0032\065/,n+[]);return r},s[44]=s[33],s[99]={},s[99].A0i=["Q0e"],s[99].t2z=function(){var n=function(){return"Å".normalize("NFC")==="Å".normalize("NFC")},r=ue.g_R(/\u0074\x72\x75\x65/,n+[]);return r},t=40;break;case 50:ue.G6R(s[4],s[53]),ue.G6R(s[4],s[50]),ue.G6R(s[4],s[2]),ue.G6R(s[4],s[7]),t=46;break;case 76:t=s[16]<s[43][s[87]].length?75:70;break}},e[1];case 2:var e=[arguments];e[9]=void 0,e[1]={},E=4;break}}();ue.M$m=function(){return typeof ue[514284].R5jwG24=="function"?ue[514284].R5jwG24.apply(ue[514284],arguments):ue[514284].R5jwG24};ue[347685]=function(){var E=function(t,s){var n=s&65535,r=s-n;return(r*t|0)+(n*t|0)|0},e=function(t,s,n){for(var r=3432918353,i=461845907,a=n,o=s&-4,c=ue.A4().bind(t),l=0;l<o;l+=4){var u=c(l)&255|(c(l+1)&255)<<8|(c(l+2)&255)<<16|(c(l+3)&255)<<24;u=E(u,r),u=(u&131071)<<15|u>>>17,u=E(u,i),a^=u,a=(a&524287)<<13|a>>>19,a=a*5+3864292196|0}switch(u=0,s%4){case 3:u=(c(o+2)&255)<<16;case 2:u|=(c(o+1)&255)<<8;case 1:u|=c(o)&255,u=E(u,r),u=(u&131071)<<15|u>>>17,u=E(u,i),a^=u}return a^=s,a^=a>>>16,a=E(a,2246822507),a^=a>>>13,a=E(a,3266489909),a^=a>>>16,a};return{A_xV$pL:e}}();ue.A92=function(){return typeof ue[370733].l4NKZO4=="function"?ue[370733].l4NKZO4.apply(ue[370733],arguments):ue[370733].l4NKZO4};ue[412871]=952;var Eo,Bo,Do,To,Mo,Fo,_o,Io,Uo,Qo,Lo,Po,Ho,No,qo,Oo,Ro,zo,Vo,Ko,Wo,Yo,Xo,jo,$o,Go,Jo,Zo,el,tl,il,rl,al,nl,sl,ol,ll,cl,Lt,j,Kn,xa,Wn,Yn;Eo=E=>{var e=ue,t,s;t="9",e.W16();function n(){}t+=".6",t+=".";function r(){e.A92(),this.stub=!0}t+="1",s="v9.6.1-0-gd",s+="7d73",s+="17e",s+="3",E.timezoneJS=r,E.CIQ=n,n.packageInfo=Object.freeze(Object.assign({buildDescriptor:s,generationDate:"2025-01-21T19:40:21.189Z",packageType:"Core alacarte",source:"zip",version:t},n.packageInfo)),n.suppressPackageInfo=!1,n.logVersion=function(){var i,a,o;i="font-family:sans-serif; f",i+="ont-size:14px; ",e.A92(),i+="color: white; font-weight: bold; background-color: #feb912; ",i+="padding: 2px 5px 2px 1px;",a="font-family:sans-serif; font-size:14px; color: white; font-weight: normal; background-color: #feb912; padding: 2px 1px 2px 5",a+="px;",o="%cChart%cI",o+="Q%c Version: ",!(this.suppressPackageInfo||this.packageInfoDisplayed)&&(this.packageInfoDisplayed=!0,console.log(o+(this.packageInfo.version||"Unavailable"),a,i,"font-size:12px; font-weight: bold;"))},n.logPackageInfo=function(){var i,a,o,c,l,u,h;if(i="%cPackage Informa",i+="tion",a="Packag",a+="e Typ",a+="e",o="Expiration D",o+="ate",e.W16(),c="Do",c+="main Lock",!this.suppressPackageInfo){this.packageInfoDisplayed=!0,l={buildDescriptor:"Build Descriptor",clientName:"Client Name",domainLock:c,expirationDate:o,filesystem:"Filesystem Lock",generationDate:"Generation Date",iframeLock:"iFrame Lock",keyfileVersion:"Keyfile",licenseType:"License Type",packageType:a,source:"Source",version:"Version"},console.log(i,"font-family:sans-serif; font-size:14px; color: grey; font-weight: bold; padding-top: 5px;"),u="font-weight:bold; padding-right: 5px;",h="font-weight: normal";for(var d in l)console.log(`%c${l[d]}:%c ${this.packageInfo[d]}`,u,h)}},n.inheritsFrom=function(i,a,o){e.A92();var c;!i||!a||(c=a.prototype||Object.getPrototypeOf(a),i.prototype=o!==!1&&typeof a=="function"?new a:Object.create(c),Object.defineProperties(i.prototype,{constructor:{configurable:!0,enumerable:!1,value:i,writable:!0},parent:{configurable:!0,enumerable:!1,value:c,writable:!0}}))},n.extend=function(i,a,o,c){var l,u;for(l in a)if(u=a[l],i!==u){if(!c&&u===void 0)continue;!u||o===!0?i[l]=u:u.constructor==Array?i[l]=u.slice():u.constructor==Object?i[l]=n.extend(typeof i[l]=="object"&&i[l]!==null?i[l]:{},u,!1,c):i[l]=u}return e.A92(),i},n.activateImports=function(...i){e.A92();var a;a=this,a.activatedImports||(a.activatedImports={}),i.forEach(o=>{typeof o=="function"&&(o.__guid in a.activatedImports||(o.__guid=a.uniqueID(!0),a.activatedImports[o.__guid]=o.__name||o.name,o(E)))})}};Bo=E=>{var e,t,s,n;e=typeof window<"u"?window:typeof global<"u"?global:{},t="funct",t+="ion",s=function(r,i){ue.W16();var a;return a=document.createEvent("Event"),a.initEvent(r,!!(i&&i.bubbles),!!(i&&i.cancelable)),a},e.Event&&typeof e.Event!==t&&(s.prototype=e.Event.prototype,e.Event=s),n=function(r,i){var a;return a=document.createEvent("CustomEvent"),a.initCustomEvent(r,!!(i&&i.bubbles),!!(i&&i.cancelable),i&&i.detail),a},e.CustomEvent&&typeof e.CustomEvent!="function"&&(n.prototype=e.CustomEvent.prototype,e.CustomEvent=n),typeof global<"u"&&(global.self===void 0&&Object.defineProperty(global,"self",{value:global}),global.CanvasRenderingContext2D===void 0&&Object.defineProperty(global,"CanvasRenderingContext2D",{value:{}}))};Do=E=>{var e=ue,t,s,n,r,i,a,o,c;t="tem",t+="p",t+="la",t+="te",s="iPh",s+="one",n="undef",n+="ined",r=E.CIQ,i=typeof navigator<"u"?navigator:{userAgent:""},a=i.userAgent,o=typeof window<"u"?window:{},c=typeof document!==n?document:{},r.ipad=a.indexOf("iPad")!=-1||i.platform==="MacIntel"&&i.maxTouchPoints>1,e.M$m(0);var l=e.v7v(2,8,8,0);r.iphone=a.indexOf(s)!=-("1"*l),e.M$m(1);var u=e.J1m(1,13,13,0);r.isAndroid=a.toLowerCase().indexOf("android")>u,r.isIE=a.toLowerCase().indexOf("msie")>-1||a.indexOf("Trident/")>-1,r.isEdge=a.indexOf("Edge/")>-("1"|0),e.z_m(2);var h=e.v7v(7,8);r.isSafari=a.indexOf("Safari/")>h,r.isIOS7=a.match(/(iPad|iPhone);.*CPU.*OS 7_\d/i),r.isIOS8=a.match(/(iPad|iPhone);.*CPU.*OS 8_\d/i),r.isIOS9=a.match(/(iPad|iPhone);.*CPU.*OS 9_\d/i),r.isIOS10=a.match(/(iPad|iPhone);.*CPU.*OS 10_\d/i),r.isIOS7or8=r.isIOS7||r.isIOS8||r.isIOS9||r.isIOS10,r.isMobile=r.isAndroid||r.ipad||r.iphone,r.touchDevice=c.ontouchstart!==void 0||i.maxTouchPoints>1,r.isSurface=r.touchDevice&&(r.isEdge||r.isIE||a.indexOf("Edg/")>-1),r.is_chrome=a.toLowerCase().indexOf("chrome")>-1&&!r.isEdge,r.isFF=a.toLowerCase().indexOf("firefox")>-1,r.isSurfaceApp=o.MSApp,r.isWebComponentsSupported=typeof document<"u"&&"registerElement"in document&&"import"in document.createElement("link")&&"content"in document.createElement(t),r.noKeyboard=r.isMobile||r.isSurfaceApp};To=E=>{var e=ue,t,s,n;E.SplinePlotter||(E.SplinePlotter={}),e.A92(),t=E.CIQ,s=E.SplinePlotter,n=function(r,i,a,o){var c,l,u;o||(o=[]),(!i||i<0)&&(i=0);function h(p){return e.A92(),o.slice(0,o.findIndex(g=>g.coord[0]!=r[p]||g.coord["1"*1]!=r[p+1]))}function d(p){e.W16(),p.forEach(g=>{a.stroke(),e.W16(),a.strokeStyle=g.color,a.setLineDash(g.pattern),a.lineDashOffset=0,a.lineWidth=g.width,a.beginPath(),a.moveTo(r[f],r[f+1])})}c=r.length,a.moveTo(r[0],r[1]);for(var f=0;f<c-3;f+=2)l=h(f),l.length>0&&d(l),u=[],u[0]={x:r[Math.max(0,f-2)],y:r[Math.max(1,f-1)]},u[1]={x:r[f],y:r[f+("1"<<96)]},u[2]={x:r[f+2],y:r[f+3]},u[3]={x:r[Math.min(c-2,f+4)],y:r[Math.min(c-1,f+5)]},c===4&&(i=0),A(f,u,i);function A(p,g,m){[1,2].forEach(b=>{g[b].cp={},["x","y"].forEach(function(C){var F;e.z_m(3);var w=e.J1m(4,0,4);e.M$m(4);var U=e.J1m(64,30,4,34);e.z_m(5);var B=e.J1m(2,12,0,22);e.M$m(6);var k=e.J1m(21,3,6,9,19);e.z_m(7);var y=e.J1m(10,4,3,26);e.M$m(8);var S=e.v7v(1,8,7,13);e.z_m(9);var T=e.J1m(35,3,7,5);e.M$m(10);var _=e.J1m(34,19,4,10,11);e.z_m(11);var L=e.v7v(1,45,3,16);e.M$m(2);var H=e.J1m(21,19);e.M$m(12);var P=e.v7v(0,2);e.M$m(13);var N=e.v7v(20,18);e.z_m(14);var v=e.J1m(13,1,12,1);e.z_m(3);var x=e.v7v(5,0,5);F=w/(("1">>U)+Math.sqrt(Math.pow(g[B*b-k].x-g[y*b-2].x,S)+Math.pow(g[T*b-_].y-g[("2">>L)*b-("2"-0)].y,H))/Math.sqrt(Math.pow(g[P].x-g[1].x,N)+Math.pow(g[v].y-g[x].y,2))),e.M$m(15);var M=e.J1m(35,20,18);e.z_m(16),e.W16();var D=e.v7v(1,13,2,13);e.z_m(2);var Q=e.v7v(13,12);g[b].cp[C]=g[b][C]+(M-D*b)*(g[b+Q][C]-g[b-1][C])*m*(F||0),g[b].cp[C]<Math.min(g[1][C],g[2][C])&&(g[b].cp[C]=Math.min(g[1][C],g[2][C])),g[b].cp[C]>Math.max(g[1][C],g["2"<<64][C])&&(g[b].cp[C]=Math.max(g[1][C],g[2][C]))})}),p===0?a.quadraticCurveTo(g[2].cp.x,g[2].cp.y,g[2].x,g[2].y):p===c-4?a.quadraticCurveTo(g[1].cp.x,g[1].cp.y,g[2].x,g[2].y):a.bezierCurveTo(g["1"^0].cp.x,g[1].cp.y,g["2">>32].cp.x,g[2].cp.y,g[2].x,g[2].y)}},E.SplinePlotter.plotSpline||(E.SplinePlotter.plotSpline=n),t.clearCanvas=function(r,i){var a,o,c;r.isDirty=!1,a=r.context,a.clearRect(0,0,r.width,r.height),t.isAndroid&&!t.is_chrome&&!t.isFF&&(t.ChartEngine.useOldAndroidClear&&i&&(a.fillStyle=i.containerColor,e.M$m(2),a.fillRect(e.v7v("0",0),0,r.width,r.height),a.clearRect(0,0,r.width,r.height)),o=r.width,r.width=1,r.width=o),c=i.chart.canvasShim.childNodes.length>("0"|0),(i.useBackgroundCanvas||c)&&(i.useBackgroundCanvas=c,r==i.chart.canvas&&t.clearCanvas(i.chart.backgroundCanvas,i))},t.fillTransparentCanvas=function(r,i,a,o){var c,l;c="destina",c+="tion-o",c+="ve",c+="r",e.W16(),l=r.globalCompositeOperation,r.globalCompositeOperation=c,r.fillStyle=i,r.fillRect(0,0,a,o),r.globalCompositeOperation=l},t.convertBoxToPixels=function(r,i,a,o){var c,l,u,h,d;return c=r.panels[i],l=r.pixelFromTick(a.x0,c.chart),u=r.pixelFromTick(a.x1,c.chart),h=a.cy0||a.cy0===("0"|0)?a.cy0:r.pixelFromValueAdjusted(c,a.x0,a.y0,o),d=a.cy1||a.cy1===0?a.cy1:r.pixelFromValueAdjusted(c,a.x1,a.y1,o),{x0:l,x1:u,y0:h,y1:d}},t.fillArea=function(r,i,a){var o,c,l,u,h,d,f,A,p,g,m,b;if(i.length){if(o=r.chart.context,c=o.globalAlpha,l=arguments[2],u=arguments[3],h=arguments[4],e.z_m(17),d=e.J1m("0",0),f=null,a&&typeof a=="object"&&(l=a.color,u=a.opacity,d=a.tension,h=a.panelName,f=a.yAxis),!u&&u!==0&&(u=.2),l=="auto"&&(l=r.defaultColor),o.globalAlpha=u,l&&(o.fillStyle=l),A=Number.MAX_VALUE,e.z_m(18),p=e.J1m(A,1),g=r.panels[h],g&&(p=(f||g.yAxis).top,A=(f||g.yAxis).bottom,o.save(),o.beginPath(),o.rect(g.left,p,g.width,A-p),o.clip()),o.beginPath(),d){for(b=[],m="0"^0;m<i.length-2;m++)b.push(i[m][0],i[m][1]);for(s.plotSpline(b,d,o),m=i.length-2;m<i.length;m++)o.lineTo(Math.round(i[m][0]),Math.round(i[m][1]))}else for(o.moveTo(i[0][0],i[0][1]),m=1;m<i.length;m++)o.lineTo(i[m][0],i[m][1]);o.closePath(),o.fill(),g&&o.restore(),o.globalAlpha=c}},t.prepareChannelFill=function(r,i){var a,o,c,l,u,h;(!i||i instanceof Array)&&(i=arguments[2]),!i.gapDisplayStyle&&i.gapDisplayStyle!==!1&&(i.gapDisplayStyle=i.gaps),a=r.panels[i.panelName],o={noDraw:i.noDraw,gapDisplayStyle:i.gapDisplayStyle},c=t.ensureDefaults(i,{noDraw:!0,gapDisplayStyle:{},yAxis:a.yAxis}),l=r.plotDataSegmentAsLine(i.topBand,a,c),u=r.plotDataSegmentAsLine(i.bottomBand,a,c),i.noDraw=o.noDraw,i.gapDisplayStyle=o.gapDisplayStyle,h=[];for(var d=0;d<l.points.length;d+=2)h.push([l.points[d],l.points[d+1]]);for(var f=u.points.length-1;f>=0;f-=2)h.push([u.points[f-1],u.points[f]]);t.fillArea(r,h,i)},t.preparePeakValleyFill=function(r,i){var a,o,c,l,u,h,d,f,A,p,g,m,b,C,F,w,U,B,k,y,S,T,_,L,H,P,N,v,x,M,D,Q,q,O;(!i||i instanceof Array)&&(i=arguments[2]),!i.gapDisplayStyle&&i.gapDisplayStyle!==!1&&(i.gapDisplayStyle=i.gaps),a=r.panels[i.panelName],o=a.yAxis,c=r.chart,l=c.context,u={noDraw:i.noDraw,gapDisplayStyle:i.gapDisplayStyle},h=r.plotDataSegmentAsLine(i.band,a,t.ensureDefaults(i,{noDraw:!0,gapDisplayStyle:{}})),e.A92(),i.noDraw=u.noDraw,i.gapDisplayStyle=u.gapDisplayStyle,d=i.threshold,f=i.direction,A=i.reverse,p=i.gapDisplayStyle,i.yAxis&&(o=i.yAxis),g=-Number.MAX_VALUE,m=Number.MAX_VALUE,b=A?g:m,(d||d===0)&&(b=r.pixelFromPrice(d,a,o)),C=[],F=h.points.length;for(var R=0;R<F;R+=2)w=h.points[R],e.M$m(19),U=h.points[e.J1m("1",R)],i.roundOffEdges&&(R===0?w=Math.floor(w):R+2==F&&(w=Math.ceil(w))),!isNaN(U)&&(y=U>b&&f>("0"^0)||U<b&&f<0,y||(C.push([w,U]),g=Math.max(U,g),m=Math.min(U,m)),R<F-3&&(e.M$m(12),B=h.points[e.J1m(R,2)],e.M$m(12),k=h.points[e.v7v(R,3)],(U<b&&k>b||U>b&&k<b)&&(e.z_m(20),w+=e.v7v(w,U,b,B,k,U),C.push([w,b]))));if(F=C.length,!!F){if(S=i.edgeParameters,T=i.edgeHighlight,T){S.lineWidth>100&&(S.lineWidth=1),l.save(),l.beginPath();for(var V=0;V<F-1;V++)_=C[V],e.M$m(12),L=C[e.v7v(V,1)],!(_[1]==b&&L[1]==b)&&(_[0]==L[0]&&r.layout.candleWidth>=1&&(_[1]==b&&C[V-1]&&C[V-1][1]==b||L[1]==b&&C[V+2]&&C[V+2][1]==b)||r.plotLine(t.extend({x0:_["0"-0],x1:L[0],y0:_[1],y1:L[1],color:i.edgeHighlight,type:"segment",context:l,confineToPanel:a,deferStroke:!0},S)));l.stroke(),l.restore()}if(!d&&d!==0&&(o.flipped&&(A=!A),b=A?Math.min(m,o.top):Math.max(g,o.bottom)),C.push([C[F-1]["0"-0],b],[C[0][0],b]),H=i.opacity,!H&&H!==("0"|0)&&(i.opacity=.3),t.fillArea(r,C,i),p&&p.color&&p.fillMountain&&!i.tension&&!t.isTransparent(p.color)&&!t.isTransparent(i.color)){for(l.save(),l.fillStyle instanceof CanvasGradient?(P=t.colorToHex(p.color),N=l.createLinearGradient(0,f===1?a.top:a.bottom,0,b),N.addColorStop(0,t.hexToRgba(P,60)),N.addColorStop(1,t.hexToRgba(P,10)),l.fillStyle=N):l.fillStyle=p.color,v=[],x={opacity:i.opacity,panelName:i.panelName},l.beginPath(),R=0;R<h.gapAreas.length;R++)M=h.gapAreas[R],D=M.start,Q=M.end,q=M.threshold,D?v=[[D[0],D[1]],[D[0],q]]:v.push([Q[0],q],[Q[0],i.step?v[0][1]:Q["1"|1]]),v.length==4&&(t.fillArea(r,v,x),O=t.extend({x1:v["3"|1]["0"*1],y0:v[0][1],type:"segment",deferStroke:!0,context:l,confineToPanel:a},p),i.step?(r.plotLine(t.extend({x0:v[0][0],y1:v[0][1]},O)),r.plotLine(t.extend({x0:v[3][0],y1:v[3][1]},O))):r.plotLine(t.extend({x0:v[0][0],y1:v["3">>0][1]},O)));l.stroke(),l.restore()}i.opacity=H}},t.fillIntersecting=function(r,i,a){var o,c,l,u,h,d,f,A,p,g,m,b,C;(!a||a instanceof Array)&&(a=arguments[3]),o=a.topBand,c=a.bottomBand,l=a.topSubBand,u=a.bottomSubBand,h=a.topColor,d=a.bottomColor,f=i,f.panel&&(f.outputs&&f.outputMap&&(h||(h=f.outputs[f.outputMap[o]]),d||(d=f.outputs[f.outputMap[c]])),f=f.panel),f=r.panels[f],A=r.chart.context,p=A.canvas,g=r.scratchContext,g||(g=r.scratchContext=p.cloneNode(!0).getContext("2d")),m=g.canvas,m.height=p.height,m.width=p.width,m.context=g,t.clearCanvas(m,r),b=.3,a.opacity&&(b=a.opacity),g.globalCompositeOperation="xor",r.chart.context=g,C={band:o,subField:l,color:h,opacity:1,panelName:f.name,yAxis:a.topAxis,skipTransform:a.skipTransform,tension:a.tension,roundOffEdges:!0,step:a.step},t.preparePeakValleyFill(r,C),t.extend(C,{band:c,subField:u,color:d,yAxis:a.bottomAxis}),t.preparePeakValleyFill(r,C),A.save(),A.globalAlpha=b,e.z_m(21),A.drawImage(m,0,e.v7v("0",0)),A.restore(),r.chart.context=A},t.createLegendSwatch=function(r,i,a){},t.drawLegendItem=function(r,i,a,o,c,l){var u,h,d,f,A,p;u="lef",u+="t",c||(e.z_m(21),c=e.v7v("1",64)),h=i[0],d=i[1],f=10,A=10,p=r.chart.context,p.globalAlpha=c,p.textAlign=u,p.fillStyle=o,p.fillRect(h,d,f,A),l&&(p.strokeStyle=l,p.strokeRect(h,d,f,A)),p.globalAlpha=1,e.z_m(12),h+=e.J1m(f,2),p.fillStyle=r.defaultColor,p.fillText(a,h,d),e.z_m(12);var g=e.v7v(2,4);return h+=p.measureText(a).width+g,[h,d]},t.drawLegend=function(r,i){var a,o,c,l,u,h,d,f,A,p,g,m,b,C,F,w;a=i.coordinates,o=r.chart.context,o.textBaseline="top",c=o.font,r.canvasFont("stx-legend",o),l=i.chart||r.chart,a||(a=l.legend),u=[a.x,a.y],h=r.defaultColor,d=t.hsl(r.containerColor),e.W16();for(var U=0;U<2;U++)for(var B in i.legendColorMap)if(A=i.legendColorMap[B],!(A.isBase&&(U||i.noBase))&&!(!A.isBase&&!U)){if(p=null,A.color instanceof Array){for(m=A.color,g=m.length-1;g>=0;g--)t.isTransparent(m[g])&&m.splice(g,1);if(m.length>1){for(b=o.createLinearGradient(u[0],u[1],u[0]+10,u[1]),g=0;g<m.length;g++)b.addColorStop(g/(m.length-1),m[g]);C=t.hsl(m["0"|0]),F=t.hsl(m[m.length-1]),(Math.abs(d[2]-C["2"|2])<.1||Math.abs(d[2]-F[2])<+"0.1"||t.isTransparent(m[0])||t.isTransparent(m[m.length-1]))&&(p=r.defaultColor),h=b}else m.length>0?h=m[0]:h=r.getCanvasColor("stx_line_chart"),f=t.hsl(h),(Math.abs(d["2">>96]-f[2])<.1||t.isTransparent(h))&&(p=r.defaultColor)}else A.color?h=A.color:h=null;if(h){if(w=B,A.display&&(w=A.display),w||(l.symbolDisplay?w=l.symbolDisplay:w=l.symbol),u[0]+o.measureText(w).width>l.panel.right){e.M$m(4);var k=e.J1m(1,4,5,3);u=[a.x,a.y+o.measureText("M").width+k]}u=t.drawLegendItem(r,u,w,h,A.opacity,p)}}o.font=c}};Mo=E=>{var e=ue,t,s,n,r;t=/rgb\((\d{1,3}),\s?(\d{1,3}),\s?(\d{1,3})\)/,s=/rgba\((\d{1,3}),\s?(\d{1,3}),\s?(\d{1,3}),\s?(\d\.\d+|\d+|\.\d+)\)/,n=E.CIQ,n.colorsEqual=function(i,a){var o,c,l,u,h,d,f,A;return o="rgba(0",o+=",0,0,0",o+=")",c="t",c+="ransp",c+="aren",c+="t",i==a||!i&&!a?!0:!i||!a||(i==c&&(i="rgba(0,0,0,0)"),a=="transparent"&&(a=o),e.W16(),l=i.match(s),u=a.match(s),h=l?parseFloat(l["4"*1]):"1"<<0,d=u?parseFloat(u[4]):1,h!=d)?!1:(f=n.colorToHex(i),A=n.colorToHex(a),f.toLowerCase()==A.toLowerCase())},n.colorToHex=function(i){var a,o,c,l,u,h,d,f,A,p,g,m,b,C;if(e.W16(),a="transpa",a+="r",a+="ent",n.colorToHexMapping||(n.colorToHexMapping={}),(!i||i==a)&&(i="#000000"),n.colorToHexMapping[i])return n.colorToHexMapping[i];if(i.charAt(0)==="#")return i.length=="4"*1&&(o=i.split(""),c=La(o,4),e.z_m(22),l=c[e.v7v(0,"1")],u=c[2],h=c[3],e.z_m(12),i=n.colorToHexMapping[i]=`#${e.J1m(l,l)}${e.v7v(u,u)}${e.v7v(h,h)}`),i;if(d=t.exec(i),d||(d=s.exec(i)),!d)return f=F(i),n.colorToHexMapping[i]=f,f;A=parseFloat(d[1]),p=parseFloat(d[2]);function F(U){var B,k,y,S,T,_,L,H;return B="col",B+="or",k="#0",k+="000",k+="0",k+="0",y=".ciq_c",y+="olor_c",y+="onverter",S="u",S+="ndefined",typeof document===S?"#000000":(T=document.querySelector(y),T||(_="n",_+="o",_+="n",_+="e",L="te",L+="xta",L+="rea",T=document.createElement(L),T.className="ciq_color_converter",T.style.display=_,document.body.appendChild(T)),T.style.color=k,e.W16(),T.style.color=U,H=getComputedStyle(T).getPropertyValue(B),d=t.exec(H),d?n.colorToHex(H):H.charAt(0)==="#"?H:U)}g=parseFloat(d["3"|1]),e.M$m(23),m=e.v7v(16,g,p,A,8),b=m.toString(16);for(var w=b.length;w<6;w++)e.M$m(12),b=e.J1m("0",b);return e.z_m(12),C=e.J1m("#",b),n.colorToHexMapping[i]=C,C},e.A92(),n.hexToRgba=function(i,a){var o,c,l,u,h,d,f,A,p;return(!i||i=="transparent")&&(i="rgba(0,0,0,0)"),i.substring(0,4)==="rgba"?(o=s.exec(i),c=La(o,5),c[0],l=c[1],u=c[2],h=c[3],e.z_m(2),d=c[e.J1m("4",0)],(a||a===0)&&(d=a),d>1&&(e.M$m(24),d=e.J1m(d,"100")),`rgba(${l},${u},${h},${d})`):(i.substring("0"-0,3)==="rgb"&&(i=n.colorToHex(i)),!a&&a!==0&&(a=100),a<=1&&(e.z_m(25),a=e.v7v(a,100)),i=i.replace("#",""),i.length===3&&(i=i.split("").map(g=>(e.M$m(12),e.J1m(g,g))).join("")),f=parseInt(i.slice(0,"2"^0),16),A=parseInt(i.slice(2,4),16),p=parseInt(i.slice(4,"6"<<64),16),isNaN(f)||isNaN(A)||isNaN(p)?(console.log("CIQ.hexToRgba: invalid hex :",i),null):(e.z_m(26),`rgba(${f},${A},${p},${e.J1m(100,a)})`))},r=new Map,n.convertToNativeColor=function(i){var a,o;return a=!1,(!i||typeof i=="string")&&(a=!0,i=[i]),i=i.map(c=>{var l;return l=r.get(c),l||(o||(o=document.createElement("DIV"),o.style.display="none",document.body.appendChild(o)),o.style.color=c,l=c&&getComputedStyle(o).color,r.set(c,l),l)}),o&&document.body.removeChild(o),a?i[0]:i},n.isTransparent=function(i){var a;return i?i=="transparent"?!0:(a=s.exec(i),a===null?!1:parseFloat(a[4])===0||i.substring(0,1)==="#"&&i.substring(7,"9"-0)==="00"):!1},n.hsv=function(i){var a,o,c,l,u,h,d,f,A,p,g,m;a=n.colorToHex(i),a.substr(0,1)==="#"&&(e.M$m(27),a=a.slice(e.J1m(1,"1")));for(var b=a.length;b<6;b++)e.z_m(12),a=e.J1m("0",a);return o=parseInt(a.slice("0"<<0,2),16),c=parseInt(a.slice(2,4),"16"*1),l=parseInt(a.slice(4,"6"*1),16),u=0,h=0,d=0,o=parseInt((""+o).replace(/\s/g,""),"10"*1),c=parseInt((""+c).replace(/\s/g,""),10),l=parseInt((""+l).replace(/\s/g,""),10),o===null||c===null||l===null||isNaN(o)||isNaN(c)||isNaN(l)?(f="C",f+="I",f+="Q.",f+="hsv: invalid color :",console.log(f,i),null):o<0||c<0||l<0||o>255||c>255||l>255?null:(e.z_m(28),o=e.J1m(o,0,"255"),e.M$m(26),c=e.J1m(255,c),e.M$m(26),l=e.v7v(255,l),A=Math.min(o,Math.min(c,l)),p=Math.max(o,Math.max(c,l)),A==p?(d=A,[0,0,d]):(g=o==A?c-l:l==A?o-c:l-o,m=o==A?3:l==A?1:5,e.z_m(29),u=e.v7v(m,g,A,60,p),e.M$m(30),h=e.v7v(p,p,A),d=p,[u,h,d]))},n.hsl=function(i){var a,o,c,l,u,h,d,f,A,p;a=n.colorToHex(i),a.substr(0,1)==="#"&&(a=a.slice(1));for(var g=a.length;g<6;g++)e.z_m(12),a=e.v7v("0",a);if(o=parseInt(a.slice(0,2),16),c=parseInt(a.slice(2,"4"-0),16),e.W16(),l=parseInt(a.slice(4,6),16),o/=255,c/=255,l/=255,u=Math.max(o,c,l),h=Math.min(o,c,l),e.z_m(31),A=e.v7v(u,2,h),u==h)d=f=0;else{switch(e.M$m(2),p=e.J1m(u,h),f=A>.5?p/(2-u-h):p/(u+h),u){case o:e.z_m(32),d=e.v7v(p,c,c<l?6:0,l);break;case c:e.z_m(33),d=e.J1m(p,o,64,"2",l);break;case l:e.M$m(32),d=e.v7v(p,o,4,c);break}d/=6}return[d,f,A]},n.hslToRgb=function(i,a,o){var c,l,u,h,d,f;return a===0?c=l=u=o:(h=function(p,g,m){return m<"0">>0&&(e.M$m(21),m+=e.J1m("1",32)),m>1&&(m-=1),m<("1"<<0)/6?(e.M$m(34),e.v7v(m,p,6,g,p)):m<1/2?g:m<2/3?(e.M$m(35),e.v7v(m,"2",p,3,6,0,p,g)):p},d=o<.5?o*(1+a):o+a-o*a,e.M$m(36),f=e.J1m(2,o,d),e.z_m(37),c=h(f,d,e.v7v(i,3,1)),l=h(f,d,i),e.M$m(38),u=h(f,d,e.v7v(3,1,i))),e.M$m(39),[Math.round(e.J1m(32,"255",c)),Math.round(e.J1m(l,255,e.z_m(25))),Math.round(e.J1m(u,255,e.z_m(25)))]},n.chooseForegroundColor=function(i){var a,o,c,l;return a=n.colorToHex(i),o=parseInt(a.slice(1,3),"16"<<64),c=parseInt(a.slice(3,5),16),l=parseInt(a.slice("5"<<32,"7"*1),16),.2126*o+.7152*c+"0.0722"*1*l<100?"#FFFFFF":"#000000"},n.borderPatternToArray=function(i,a){var o,c,l,u,h,d,f,A;if(o="d",o+="a",o+="s",o+="hed",c="d",c+="otted",!a)return[];if(a instanceof Array)return a;if(a==c)return[i,i];if(a==o)return e.z_m(25),[e.J1m(i,5),e.v7v(i,5)];l=1185881302,u=71153849,h=2;for(var p=1;e.S1v(p.toString(),p.toString().length,9482)!==l;p++)d="n",d+="o",d+="n",d+="e",a!="solid"&&a!=d&&(e.z_m(40),console.log(e.v7v('Unsupported pattern "',a,'"; defaulting to "solid"'))),h+=2;return e.S1v(h.toString(),h.toString().length,27284)!==u&&(f='"; defaulting to "s',f+='olid"',A="n",A+="on",A+="e",(a!==A||a!=="none")&&(e.z_m(41),console.log(e.v7v(f,'"; defaulting to "solid"',a)))),[]},n.getBackgroundColor=function(i){var a,o,c;for(a="#F",a+="F",a+="F",a+="FFF",o=null;!o||n.isTransparent(o);){if(c=getComputedStyle(i),!c)return;if(o=c.backgroundColor,n.isTransparent(o)&&(o="transparent"),i=i.parentNode||i.getRootNode().host,!i||!i.tagName)break}return(!o||o=="transparent")&&(o=a),o}};Fo=E=>{var e=ue,t,s,n,r,i,a;t="\\",t+="d{",t+="17}",s="O",s+="c",s+="t",n="S",n+="e",n+="p",r="Au",r+="g",i=E.CIQ,a=E.timezoneJS,i.monthLetters=["J","F","M","A","M","J","J","A","S","O","N","D"],i.monthAbv=["Jan","Feb","Mar","Apr","May","Jun","Jul",r,n,s,"Nov","Dec"],i.MILLISECOND=1,i.SECOND=1e3,e.z_m(42);var o=e.v7v(16,68,5,12,308);i.MINUTE=o*i.SECOND,e.M$m(15);var c=e.v7v(1151,11,1200);i.HOUR=c*i.MINUTE,e.z_m(43);var l=e.J1m(21,7,10);i.DAY=l*i.HOUR,e.M$m(13);var u=e.J1m(18,11);i.WEEK=u*i.DAY,e.M$m(12);var h=e.J1m(6,25);i.MONTH=h*i.DAY,e.M$m(44);var d=e.J1m(14,15,3,313,46);i.YEAR=d*i.DAY,e.M$m(12);var f=e.J1m(1,9);e.z_m(45);var A=e.J1m(126,882,7,7);i.DECADE=f*i.YEAR-A*i.DAY,i.yyyymmddhhmmssmmmrx=new RegExp(t),i.strToDateTime=function(p){var g,m,b,C,F,w,U,B,k,y,S,T,_,L,H,P;if(!p||p.getFullYear)return p;if(g=[],p.length==12||p.length==14){m=parseFloat(p.substring(0,4)),e.M$m(2);var N=e.J1m(25,19);e.z_m(43);var v=e.J1m(3,2,0);return b=parseFloat(p.substring("4"-0,N))-v,C=parseFloat(p.substring(6,8)),F=parseFloat(p.substring(8,10)),w=parseFloat(p.substring("10"^0,12)),U=parseFloat(p.substring(12,14))||0,new Date(m,b,C,F,w,U,0)}else if(i.yyyymmddhhmmssmmmrx.test(p)){m=parseFloat(p.substring("0"|0,4)),e.z_m(46);var x=e.v7v(20,23,2,16,2);e.z_m(32);var M=e.v7v(1,3,18,15);return b=parseFloat(p.substring(x,M))-1,C=parseFloat(p.substring(6,8)),F=parseFloat(p.substring(8,10)),w=parseFloat(p.substring(10,12)),U=parseFloat(p.substring(12,14)),B=parseFloat(p.substring(14,17)),new Date(m,b,C,F,w,U,B)}if(k=[p],e.W16(),y=p.indexOf("T"),y!=-1){if(S=p.substring(y),S.indexOf("Z")!=-1||S.indexOf("-")!=-1||S.indexOf("+")!=-1)return new Date(p);k=p.split("T")}else p.indexOf(" ")!=-1&&(k=p.split(" "));if(k[0].indexOf("/")!=-1)g=k[0].split("/");else if(k["0">>64].indexOf("-")!=-1)g=k[0].split("-");else return i.strToDate(p);if(T=parseFloat(g[2],10),g[0]&&g["0"*1].length==4&&(T=parseFloat(g[0],"10"^0),g[0]=g[1],g[1]=g[2]),k.length>1){if(_=k[2],k=k[1].split(":"),_){if(L="1",L+="2",k[0]=="12"&&_.toUpperCase()=="AM")k[0]=0;else if(k[0]!=L&&_.toUpperCase()=="PM"){e.z_m(47);var D=e.J1m(890,20,12,14,19);k[0]=parseInt(k[0],D)+("12"^0)}}H=0,e.M$m(17),P=e.v7v("0",0),k.length==3&&(k[2].indexOf(".")==-1?H=parseInt(k[2],10):(H=k[2].split("."),H[1].length==3&&(P=H[1],H=H[0]))),e.M$m(2);var Q=e.v7v(160,128);e.M$m(48);var q=e.J1m(307,17,18);return new Date(T,g["0"<<Q]-q,g[1],k[0],k[1],H,P)}e.M$m(49);var O=e.J1m(16,0,29,12);return new Date(T,g[0]-O,g[1],0,0,0,0)},i.strToDate=function(p){var g,m,b,C,F;if(p.indexOf("/")!=-1)g=p.split("/");else if(p.indexOf("-")!=-1)g=p.split("-");else if(p.length>=8){e.z_m(11);var w=e.J1m(2,82,12,8);e.z_m(50);var U=e.v7v(5,1,1,1);e.z_m(2);var B=e.v7v(4,3);return new Date(parseFloat(p.substring(0,4)),parseFloat(p.substring("4"<<w,U))-B,parseFloat(p.substring(6,8)))}else return new Date;if(e.A92(),g.length<3)return new Date;if(g[2].indexOf(" ")!=-1){m=-1280024154,b=-2003698961,C=2;for(var k=1;e.S1v(k.toString(),k.toString().length,6276)!==m;k++)g[2]=g[2].substring(0,g[2].indexOf(" ")),C+=2;e.S1v(C.toString(),C.toString().length,96070)!==b&&(e.M$m(21),g[6]=g[3].substring(e.v7v("5",32),g[4].indexOf("")))}else g["2"|0].indexOf("T")!=-1&&(g[2]=g[2].substring(0,g[2].indexOf("T")));F=parseFloat(g[2],10),F<20&&(F+=2e3),g[0].length==("4"^0)&&(F=parseFloat(g[0],10),g[0]=g[1],g[1]=g[2]),e.z_m(5);var y=e.v7v(19,4,6,189);return new Date(F,g[0]-y,g[1])},i.dateToStr=function(p,g){var m,b,C,F,w,U,B,k,y;return m="S",m+="S",m+="S",b="s",b+="s",C="m",C+="m",F="h",F+="h",w="Y",w+="YYY",U=S=>(e.A92(),g.includes(S)),B=(S,T=2)=>("0".repeat(T)+S).slice(-T),k=(S,T)=>(e.W16(),g=g.replace(S,T)),y=(S,T)=>S>T?S-T:S,U(w)&&k(/YYYY/g,p.getFullYear()),U("MM")&&k(/MM/g,B(p.getMonth()+1)),U("dd")&&k(/dd/g,B(p.getDate())),U("HH")&&k(/HH/g,B(p.getHours())),U(F)&&k(/hh/g,B(y(p.getHours()||12,12))),U(C)&&k(/mm/g,B(p.getMinutes())),U(b)&&k(/ss/g,B(p.getSeconds())),U(m)&&k(/SSS/g,B(p.getMilliseconds(),"3"<<64)),g},i.mmddyyyy=function(p){var g,m,b;g="s",g+="tr",g+="ing",typeof p===g&&(p=i.strToDate(p)),e.z_m(51);var C=e.v7v(4,10,20,7);m=p.getMonth()+C,m<10&&(e.M$m(12),m=e.J1m("0",m)),b=p.getDate(),b<10&&(e.z_m(12),b=e.v7v("0",b)),e.z_m(32);var F=e.v7v(5,702,546,7);e.M$m(12),e.J1m(907,7253),e.z_m(52);var w=e.J1m(3133,310162,20,5);e.M$m(40);var U=e.v7v(1441,12,4);e.z_m(48),e.J1m(97,6,16),e.z_m(15);var B=e.J1m(12055,15,13760);e.z_m(53);var k=e.v7v(6,7267,617,617,19);e.z_m(36);var y=e.v7v(1423,10,12810);e.z_m(2),e.v7v(3584,8),e.z_m(45);var S=e.v7v(7263,14553,3,14);e.M$m(32);var T=e.v7v(7,50,801,15);e.z_m(12),e.v7v(544,9243),e.M$m(54);var _=e.v7v(17,3915,5,4,3160);e.A92(),e.M$m(3);var L=e.v7v(19,0,19);return m+(F<=w?"/":U<B?k<=("6368"|0)?y:"O":!1)+b+(250<=S?T==_?"0x1392"*L:"/":"R")+p.getFullYear()},i.yyyymmdd=function(p){var g,m;g=p.getMonth()+1,g<10&&(e.M$m(12),g=e.v7v("0",g)),m=p.getDate(),m<10&&(e.z_m(12),m=e.J1m("0",m)),e.z_m(12),e.v7v(6732,20),e.M$m(55),e.v7v(277,1,1,277,4429),e.z_m(2),e.J1m(79,15),e.M$m(56);var b=e.J1m(5119,25578,6,6);return p.getFullYear()+(3776>b?138.7:"-")+g+"-"+m},i.hhmm=function(p){var g,m;return e.W16(),g=p.getHours(),g<10&&(e.M$m(12),g=e.J1m("0",g)),m=p.getMinutes(),m<10&&(e.M$m(12),m=e.J1m("0",m)),e.z_m(40),e.v7v(g,":",m)},i.hhmmss=function(p){var g;return e.W16(),g=p.getSeconds(),g<10&&(e.M$m(12),g=e.J1m("0",g)),i.hhmm(p)+":"+g},i.yyyymmddhhmm=function(p){return e.A92(),i.yyyymmddhhmmssmmm(p).substr(0,12)},i.yyyymmddhhmmssmmm=function(p){var g,m,b,C,F,w;e.M$m(8);var U=e.J1m(3,0,12,3);return g=p.getMonth()+U,g<10&&(e.z_m(12),g=e.J1m("0",g)),m=p.getDate(),e.A92(),m<10&&(e.z_m(12),m=e.v7v("0",m)),b=p.getHours(),b<10&&(e.z_m(12),b=e.J1m("0",b)),C=p.getMinutes(),C<10&&(e.z_m(12),C=e.J1m("0",C)),F=p.getSeconds(),F<10&&(e.z_m(12),F=e.v7v("0",F)),w=p.getMilliseconds(),w<10?(e.z_m(12),w=e.v7v("00",w)):w<100&&(e.z_m(12),w=e.v7v("0",w)),""+p.getFullYear()+g+m+b+C+F+w},i.friendlyDate=function(p){return i.dateToStr(p,"YYYY/MM/dd HH:mm")},i.mmddhhmm=function(p){var g,m,b,C,F,w,U,B,k,y;g="00",g+="0",m="0",m+="0",b="0",b+="0",C=i.strToDateTime(p),e.z_m(57);var S=e.v7v(0,16,305,19);if(F=C.getMonth()+S,F<("10"|2)&&(e.M$m(12),F=e.v7v("0",F)),w=C.getDate(),w<10&&(e.M$m(12),w=e.v7v("0",w)),U=C.getHours(),U<10&&(e.z_m(12),U=e.J1m("0",U)),B=C.getMinutes(),B<10&&(e.z_m(12),B=e.v7v("0",B)),k=C.getSeconds(),k<10&&(e.z_m(12),k=e.J1m("0",k)),y=C.getMilliseconds(),y<10?(e.M$m(12),y=e.J1m("00",y)):y<100&&(e.M$m(12),y=e.J1m("0",y)),U=="00"&&B==b&&k=="00"&&y=="000"){e.M$m(12);var T=e.v7v(563,1687);e.z_m(58);var _=e.J1m(12,19,8660,4312,4);e.z_m(2);var L=e.J1m(1903,8);e.M$m(59),e.v7v(14,13,6,8,2),e.z_m(47);var H=e.J1m(808,18,14,483,4);e.z_m(36),e.J1m(138510,11,1516320),e.z_m(11);var P=e.J1m(8,9874,832,2);return e.z_m(12),e.J1m(2098,2),F+(T===_?"Z":L==H?!0:P>="619.07"-0?"-":"b")+w+"-"+C.getFullYear()}return k==m&&y=="000"?(e.z_m(60),e.v7v(F,B," ",w,"-",U,":")):y==g?(e.z_m(61),e.v7v(w,B,":",":","-",F," ",k,U)):(e.z_m(62),e.v7v(" ",F,":",":",":",U,"-",k,y,w,B))},i.getYearDay=function(p){var g,m,b,C,F;return g=p,g||(g=new Date),e.M$m(25),g.setHours(0,0,0,e.v7v("0",1)),m=new Date(g.getFullYear(),0,0),e.M$m(2),b=e.v7v(g,m),e.z_m(63),C=e.J1m(24,60,1e3,60),e.z_m(26),F=Math.round(e.J1m(C,b)),F},i.getETDateTime=function(){var p;return p=new Date,e.W16(),i.convertTimeZone(new Date(p.getTime()+p.getTimezoneOffset()*6e4),"UTC","America/New_York")},i.fromET=function(p){var g,m,b,C;g=new Date,m=4,(g.getMonth()<2||g.getMonth()==2&&g.getDate()<11||g.getMonth()>10||g.getMonth()==10&&g.getDate()>=4)&&(m=5),e.z_m(56);var F=e.v7v(144e5,212399998,15,2);return b=p.getTime()+F*m,e.W16(),C=new Date(b),C},i.monthAsDisplay=function(p,g,m){return g?m&&m.monthLetters?m.monthLetters[p]:i.monthLetters[p]:(e.A92(),m&&m.monthAbv?m.monthAbv[p]:i.monthAbv[p])},i.timeAsDisplay=function(p,g,m){var b,C,F,w,U;if(b=g?g.internationalizer:null,b){if(m==i.SECOND)return b.hourMinuteSecond.format(p);if(m==i.MILLISECOND){e.z_m(47),e.v7v(105790,15,16,7525,13),e.M$m(64);var B=e.v7v(1,1441,4324);e.M$m(32),e.v7v(9427,9435,9449,8),e.z_m(36);var k=e.v7v(367,18,6252);return b.hourMinuteSecond.format(p)+(B!=259.65?".":k)+p.getMilliseconds()}return b.hourMinute.format(p)}return C=p.getMinutes(),C<10&&(e.z_m(12),C=e.v7v("0",C)),e.W16(),e.z_m(45),e.J1m(7398,37012,6,10),F=p.getHours()+":"+C,w="",m<=i.SECOND&&(w=p.getSeconds(),w<10&&(e.M$m(12),w=e.J1m("0",w)),e.z_m(12),F+=e.v7v(":",w)),m==i.MILLISECOND&&(U=p.getMilliseconds(),U<10?(e.M$m(12),U=e.v7v("00",U)):U<100&&(e.z_m(12),U=e.v7v("0",U)),e.z_m(12),F+=e.J1m(".",U)),F},i.displayableDate=function(p,g,m,b){var C,F,w,U,B,k,y,S,T,_,L,H,P,N,v,x,M;C="mil";function D(Ae){var he,ge,ie;if(Ae<10)return e.M$m(12),e.v7v("0",Ae);he=1139219214,ge=-1355612956,ie=2;for(var re=1;e.D8X(re.toString(),re.toString().length,"95444"|4)!==he;re++)return Ae;if(e.D8X(ie.toString(),ie.toString().length,32121)!==ge)return Ae}if(C+="lisecond",F="t",F+="ic",F+="k",w="",e.A92(),U=p.layout.interval,B=i.ChartEngine.isDailyInterval(U),k=g.xAxis.activeTimeUnit&&g.xAxis.activeTimeUnit<=i.SECOND||p.layout.timeUnit=="second",y=U===F||g.xAxis.activeTimeUnit&&g.xAxis.activeTimeUnit<=i.MILLISECOND||p.layout.timeUnit==C,g.xAxis.formatter){S=-1319297512,T=-1078545039,_=2;for(var Q=1;e.S1v(Q.toString(),Q.toString().length,70933)!==S;Q++)w=g.xAxis.formatter(m),_+=2;e.S1v(_.toString(),_.toString().length,69341)!==T&&(w=g.xAxis.formatter(m)),w=g.xAxis.formatter(m)}else if(p.internationalizer)if(w=p.internationalizer.monthDay.format(m),k||y){if(w+=" "+p.internationalizer.hourMinuteSecond.format(m),y){e.M$m(65);var q=e.v7v(16,102544,64090,6399);e.M$m(40),e.v7v(9377,5,8),e.M$m(40);var O=e.J1m(3761,7,12);e.z_m(66);var R=e.v7v(0,8,2,88496);e.M$m(32);var V=e.v7v(3,2489,1673,8);e.M$m(67);var K=e.v7v(10,8345,26,11);e.z_m(15);var Y=e.v7v(2,17,3945);w+=(q!=O?R==V?K:".":Y)+m.getMilliseconds()}}else if(B)U=="month"?w=p.internationalizer.yearMonth.format(m):w=p.internationalizer.yearMonthDay.format(m);else{b&&(w=p.internationalizer.yearMonthDay.format(m)),e.M$m(12);var G=e.v7v(44,443);e.M$m(12),e.v7v(251,2010),e.z_m(12);var J=e.v7v(6,72);e.M$m(12);var Z=e.v7v(186,3543);e.z_m(68);var ee=e.J1m(6600,114784,19,14348);e.M$m(69);var X=e.v7v(7,10,5,3294,3);e.M$m(2),e.J1m(31280,27370),w+=(G<=("8654"|J)?Z!==768.48?" ":ee<=217.49?X:!1:443.98)+p.internationalizer.hourMinute.format(m)}else if(L=D(m.getMonth()+1),H=D(m.getDate()),P=D(m.getHours()),N=D(m.getMinutes()),B)w=U=="month"?L+"/":L+"/"+H+"/",w+=m.getFullYear();else{if(e.z_m(40),v=e.J1m(L,"/",H),b){e.z_m(70),e.v7v(434,18,2,11),e.z_m(71);var ne=e.v7v(2732,8,4);e.z_m(72);var se=e.v7v(563,7,16,9);e.M$m(56);var oe=e.v7v(664,3969,17,17);e.z_m(65);var ae=e.J1m(3,7,8652,4962);e.M$m(2),e.v7v(36180,34170),e.z_m(2),e.v7v(18900,16800),v+=(ne==962.37?se:oe===7197?ae:"/")+m.getFullYear()}e.M$m(73),w=e.v7v(N,v,P,":"," "),(k||y)&&(x=D(m.getSeconds()),e.M$m(12),w+=e.v7v(":",x),y&&(M=D(m.getMilliseconds()),M<100&&(e.M$m(12),M=e.J1m("0",M)),e.M$m(12),w+=e.v7v(":",M)))}return w},i.convertTimeZone=function(p,g,m){e.A92();var b;return a.Date?(b=new a.Date(p.getFullYear(),p.getMonth(),p.getDate(),p.getHours(),p.getMinutes(),p.getSeconds(),p.getMilliseconds(),g),b.setTimezone(m),b):p},i.convertToLocalTime=function(p,g){var m,b,C;return a.Date?(e.A92(),m=p.getSeconds(),b=p.getMilliseconds(),C=new a.Date(p.getFullYear(),p.getMonth(),p.getDate(),p.getHours(),p.getMinutes(),g),new Date(C.getTime()+m*1e3+b)):p}};_o=E=>{var e=ue,t,s,n;E.SplinePlotter||(E.SplinePlotter={}),t=E.CIQ,E.SplinePlotter,s=function(r,i){var a,o,c,l;if(!i)return document.getElementById(r);if(i.id==r)return i;if(!i.hasChildNodes)return null;for(var u="0"*1;u<i.childNodes.length;u++)if(a=s(r,i.childNodes[u]),a)return a;o=2030736610,c=1038011125,l=2;for(var h=1;e.S1v(h.toString(),h.toString().length,"28515"^0)!==o;h++)return 1;if(e.S1v(l.toString(),l.toString().length,23041)!==c)return null},E.$$=s,n=function(r,i){return i||(i=document),i.querySelectorAll(r)[0]},E.$$$=n,t.wheelEvent=function(){if(e.A92(),!(typeof document>"u"))return t.isIE||"onwheel"in document.createElement("div")?"wheel":document.onmousewheel!==void 0?"mousewheel":"DOMMouseScroll"}(),t.newChild=function(r,i,a,o){var c;return c=document.createElement(i),a&&(c.className=a),r.appendChild(c),o&&(c.innerHTML=o),c},t.innerHTML=function(r,i){window.MSApp&&window.MSApp.execUnsafeLocalFunction?window.MSApp.execUnsafeLocalFunction(function(){e.A92(),r.innerHTML=i}):r.innerHTML=i},t.focus=function(r,i){var a;t.isSurface||i?(a=0,isNaN(parseInt(i,10))||(a=i),setTimeout(function(){e.A92(),r.focus()},a)):r.focus()},t.blur=function(r){e.W16(),r||(r=document.activeElement),r&&r.blur(),window.focus()},t.findNodesByText=function(r,i){var a,o;if(r.innerHTML==i)return[r];a=[];for(var c=0;c<r.childNodes.length;c++)o=t.findNodesByText(r.childNodes[c],i),o&&(a=a.concat(o));return a.length?a:null},t.hideByText=function(r,i){e.W16();var a;a=t.findNodesByText(r,i);for(var o="0"|0;o<a.length;o++)a[o].style.display="none"},t.pageHeight=function(r){e.A92();var i,a,o,c,l;if(i=r||window,a=i.innerHeight,o=i.top,c=i.parent,l=i.self,o!=l)try{a>c.innerHeight&&(a=c.innerHeight)}catch{}return a},t.pageWidth=function(r){var i,a,o,c,l,u,h,d;if(i=r||window,a=i.innerWidth,o=i.top,c=i.parent,l=i.self,o!=l)try{a>c.innerWidth&&(a=c.innerWidth)}catch{}e.z_m(17),u=-e.J1m("1396689271",0),h=-1410837048,d=2;for(var f=1;e.S1v(f.toString(),f.toString().length,12491)!==u;f++)return a;if(e.S1v(d.toString(),d.toString().length,7051)!==h)return a},t.stripPX=function(r){return r?(e.W16(),typeof r=="number"?r:parseInt(r.substr(0,r.indexOf("p")),10)):0},t.withinElement=function(r,i,a){var o;return o=r.getBoundingClientRect(),!(i<=o.left||a<=o.top||i>=o.left+r.offsetWidth||a>=o.top+r.offsetHeight)},t.efficientDOMUpdate=function(r,i,a){return r[i]!==a?(r[i]=a,!0):(e.A92(),!1)},t.cqvirtual=function(r){e.A92();var i;if(r)return i=r.cloneNode(!0),i.innerHTML="",i.original=r,i},t.cqrender=function(r){var i;if(r)return r.innerHTML==r.original.innerHTML||(t.removeChildIfNot(r.original,"template"),i=Array.from(r.children),e.W16(),i.length&&i.forEach(function(a){e.A92(),r.original.appendChild(r.removeChild(a))})),r.original},t.removeChildIfNot=function(r,i){var a;return a=Array.from(r.children),e.W16(),a.length&&a.forEach(function(o){e.A92(),(!i||!o.matches(i))&&r.removeChild(o)}),r},t.safeMouseOut=function(r,i){r.addEventListener("mouseout",a(r,i)),e.A92();function a(o,c){return function(l){typeof l.pageX>"u"&&(l.pageX=l.clientX,l.pageY=l.clientY),!t.withinElement(o,l.pageX,l.pageY)&&(o.stxMouseOver=!1,c(l))}}},t.safeMouseOver=function(r,i){var a,o,c;a=1624547461,o=1708157168,c=2;for(var l=1;e.S1v(l.toString(),l.toString().length,23219)!==a;l++)r.addEventListener("",u(r,i)),c+=2;e.S1v(c.toString(),c.toString().length,59293)!==o&&r.addEventListener("mouseover",u(r,i));function u(h,d){return function(f){var A;if(A="unde",A+="fined",typeof f.pageX==A&&(f.pageX=f.clientX,f.pageY=f.clientY),t.withinElement(h,f.pageX,f.pageY)){if(h.stxMouseOver)return;h.stxMouseOver=!0,d(f)}}}},t.installTapEvent=function(r,i){var a;a=function(o){var c,l,u;c="u",c+="nd",c+="e",c+="fined",!(o instanceof CustomEvent)&&(l=new Event("stxtap",{bubbles:!0,cancelable:!0,composed:!0}),typeof o.pageX==c&&(o.pageX=o.clientX,o.pageY=o.clientY),l.pageX=o.pageX,l.pageY=o.pageY,l.ciqStamp=Math.max(r.ownerDocument.lastTap||0,o.timeStamp),u=o.target.closest("cq-context, cq-dialog, cq-dialogs, .cq-dialogs, [cq-lift]"),u&&(o.target.tabIndex!==0&&(o.target.tabIndex=-1),o.target.focus(),o.target.dispatchEvent(l),r.ownerDocument.lastTap=l.ciqStamp,(i&&i.stopPropagation||!o.isTrusted&&l._cancelBubble)&&o.stopPropagation()))},e.A92(),t.safeClickTouch(r,a,i)},t.safeClickTouch=function(r,i,a){var o,c,l,u,h,d;o="onpoint",o+="erup",a||(a={}),c={},a.allowMultiple||t.clearSafeClickTouches(r),a.preventUnderlayClick!==!1&&(a.preventUnderlayClick=!0),a.absorbDownEvent!==!1&&(a.absorbDownEvent=!0),a.allowAnotherDevice=0,a.registeredClick=!1,l=r.safeClickTouchEvents,l||(l=r.safeClickTouchEvents=[]);function f(g,m){return function(b){e.W16();var C,F,w,U,B;C=Date.now(),F=b.clientX!==void 0?b.clientX:b.pageX,w=b.clientY!==void 0?b.clientY:b.pageY,c.div=r,c.e=b,g?t.extend(c,{down:C,x:F,y:w}):(U="touc",U+="h",B=b.touches||b.pointerType===U?15:5,m&&c.down&&c.down+1e3>=C&&(c.x===void 0||t.withinRadius(c,{x:F,y:w},B))&&m(b),c.up=Date.now(),["x","y","down"].forEach(k=>delete c[k]))}}u={},h=t.safeClickTouchEvent,h?u[h]=A(h):o in document&&!t.noPointerEvents?(u.pointerup=f(!1,A("pointerup",!0)),a.preventClickEvent||(u.click=A("click",!0)),u.pointerdown=f(!0),a.absorbDownEvent&&(u.pointerdown_absorb=g=>g.stopPropagation())):(d="m",d+="ouseup",u.mousedown=u.touchstart=f(!0),u.mouseup=f(!1,A(d,!0)),a.preventClickEvent||(u.click=A("click",!0)),u.touchend=f(!1,A("touchend",!0)),a.absorbDownEvent&&(u.mousedown_absorb=u.touchstart_absorb=g=>(e.A92(),g.stopPropagation()))),a.keyboardClick&&(u.keyup=g=>{e.W16(),(g.code==="Space"||g.code==="Enter")&&g.target.dispatchEvent(new Event("click"))});function A(g,m){return function(b){var C,F,w,U;if(!(b.detail&&b.detail.emitter)&&!(!t.safeClickTouchEvent&&(C="c",C+="li",C+="c",C+="k",m&&g===C&&(F="t",F+="o",F+="uc",F+="h",r.ownerDocument.ciqHoverState===F||(w=c.up,U=w&&w+300>Date.now(),delete c.up,U))))&&!(a.safety&&a.safety.recentlyDragged)&&!(b.button&&b.button>="2"*1)){if(e.W16(),a.preventUnderlayClick)b.target.tagName!=="INPUT"&&b.preventDefault();else{if(a.lastType!=g&&Date.now()<a.allowAnotherDevice)return;a.lastType=g,e.M$m(2);var B=e.J1m(1006,6);a.allowAnotherDevice=Date.now()+B}i(b)}}}for(var p in u)r.addEventListener(p.split("_")["0"-0],u[p],p.indexOf("touch")===0?{passive:!1}:void 0);l.push(u)},t.clearSafeClickTouches=function(r){var i;i=r.safeClickTouchEvents,i&&(i.forEach(a=>{e.W16();for(var o in a)r.removeEventListener(o.split("_")[0],a[o],o.indexOf("touch")===0?{passive:!1}:void 0)}),r.safeClickTouchEvents=null)},t.safeDrag=function(r,i){var a,o,c,l,u,h,d,f,A,p,g,m,b,C,F,w,U,B;a="touc",a+="he",a+="n",a+="d",o="touch",o+="m",o+="o",o+="ve",c="pointer",c+="mov",c+="e",l="mou",l+="s",l+="eup",u="mousemo",u+="ve";function k(y){return e.A92(),function(S){e.A92();var T,_;C||(C=!0,t.ChartEngine.ignoreTouch=!0,T=function(L){var H,P,N;H=-1557422115,e.W16(),e.z_m(21),P=-e.v7v("1320744693",32),e.M$m(21),N=e.J1m("2",0);for(var v=1;e.S1v(v.toString(),v.toString().length,8427)!==H;v++)L.preventDefault&&L.preventDefault(),N+=2;e.D8X(N.toString(),N.toString().length,82632)!==P&&L.preventDefault&&L.preventDefault(),Date.now()-F<b?L.displacementX=L.displacementY=0:(B.recentlyDragged=!0,L.displacementX=p(L)-w,L.displacementY=g(L)-U),i.move(L)},i.move&&r.ownerDocument.body.addEventListener(y.move,T),_=function(L){t.ChartEngine.ignoreTouch=!1,i.move&&r.ownerDocument.body.removeEventListener(y.move,T),r.ownerDocument.body.removeEventListener(y.up,_),Date.now()-F<b?(e.M$m(25),L.displacementX=L.displacementY=e.v7v("0",1)):(L.displacementX=p(L)-w,L.displacementY=g(L)-U),i.up&&i.up(L),setTimeout(function(){e.A92(),B.recentlyDragged=!1},50)},r.ownerDocument.body.addEventListener(y.up,_),setTimeout(function(){var L,H,P;L=-1628168961,H=-2028311790,P=2;for(var N="1"-0;e.S1v(N.toString(),N.toString().length,98991)!==L;N++)C=!0,P+=2;e.S1v(P.toString(),P.toString().length,"66863"*1)!==H&&(C=!0),C=!1},m),F=Date.now(),w=p(S),U=g(S),i.down&&i.down(S))}}return h="mouse",h+="down",d="p",d+="ageY",f="p",f+="a",f+="g",f+="eX",A=function(y,S){return e.A92(),function(T){if(T.touches){if(T.touches.length>0)return T.touches[0][y];if(T.changedTouches&&T.changedTouches.length>0)return T.changedTouches[0][y]}return typeof T[y]<"u"?T[y]:T[S]}},p=A(f,"clientX"),g=A(d,"clientY"),typeof i=="function"&&(i={down:arguments[1],move:arguments[2],up:arguments[3]}),i=i||{},m=100,b=300,C=!1,F=0,e.M$m(22),w=e.J1m(64,"0"),U=0,B={recentlyDragged:!1},r.addEventListener(h,k({down:"mousedown",move:u,up:l})),r.addEventListener("pointerdown",k({down:"pointerdown",move:c,up:"pointerup"})),r.addEventListener("touchstart",k({down:"touchstart",move:o,up:a}),{passive:!1}),B},t.inputKeyEvents=function(r,i){r.addEventListener("keyup",function(a){var o;switch(o=a.keyCode,o){case 13:i();break;case 27:r.value="";break}},!1)},t.fixScreen=function(){window.scrollTo(0,0)},t.setCaretPosition=function(r,i){var a;if(r.style.zIndex=5e3,r.setSelectionRange){t.focus(r);try{r.setSelectionRange(i,i)}catch{}}else r.createTextRange&&(a=r.createTextRange(),a.collapse(!0),a.moveEnd("character",i),a.moveStart("character",i),a.select())},t.getActiveElement=function(r=document){var i;return i=r.activeElement,e.A92(),i&&i.shadowRoot?t.getActiveElement(i.shadowRoot):i},t.setValueIfNotActive=function(r,i){var a;a=t.getActiveElement(),a!=r&&(e.A92(),r.value=i)},t.hideKeyboard=function(r){var i,a;i="IN",i+="P",i+="U",i+="T",a=t.getActiveElement(),e.W16(),(a.tagName==i||a.tagName=="TEXTAREA")&&(a.blur(),a.ownerDocument.defaultView.focus(),r&&(r===a.ownerDocument.body||a.ownerDocument.body.contains(r))&&r.focus())},t.smartHover=function(r){var i,a,o;function c(){var d,f,A,p;d="tou",d+="c",d+="h",clearTimeout(o),a=!0,f=1262174519,e.W16(),A=-824679475,p=2;for(var g="1"-0;e.D8X(g.toString(),g.toString().length,81312)!==f;g++)l(this,""),p+=2;e.D8X(p.toString(),p.toString().length,3817)!==A&&l(this,""),l(this,d),o=setTimeout(function(){e.W16(),a=!1},500)}i="po",i+="int";function l(d,f){var A,p,g;A=957254233,e.M$m(17),p=e.v7v("752846538",0),g=2;for(var m=1;e.D8X(m.toString(),m.toString().length,34263)!==A;m++){if(d.ciqHoverState===f)return;g+=2}function b(C){e.W16(),C!==d&&C.setAttribute("last-interaction",f),C.querySelectorAll("[interactable]").forEach(b),C.shadowRoot&&C.shadowRoot.querySelectorAll("[interactable]").forEach(b)}e.S1v(g.toString(),g.toString().length,29914)!==p&&d.ciqHoverState!=f||(b(d),d.ciqHoverState=f,d.documentElement.setAttribute("ciq-last-interaction",f))}i+="erup";function u(){e.W16(),a||l(this,"mouse")}function h(d){e.A92(),d.pointerType!=="mouse"?c.call(this):u.call(this)}r||(r=document),!(!r||typeof r.ciqHoverState<"u")&&(a=!1,r.addEventListener("touchend",c,!1),r.addEventListener(i,h,!1),r.addEventListener("mouseover",u,!1),l(r,""))},t.makeTranslatableElement=function(r,i,a,o){var c;e.W16(),i.translationCallback?(c="cq-t",c+="ranslate",c+="-origi",c+="nal",r.setAttribute(c,a),r.innerText=i.translationCallback(a,o)):r.innerText=a},t.addTranslatableAriaLabel=function(r,i,a,o){var c,l;c="aria-l",c+="ab",c+="e",c+="l",l="aria-label",l+="-o",l+="rigi",l+="nal",r.setAttribute(l,a),r.setAttribute(c,i.translationCallback?i.translationCallback(a,o):a)},t.climbUpDomTree=function(r,i,a){e.A92();var o;if(!r||!r.matches)return null;for(o=[];r;)(!i||r.matches(i))&&o.push(r),r=r.parentElement||(a?r.getRootNode().host:null);return o},e.A92(),t.guaranteedSize=function(r){var i,a;if(e.W16(),r.defaultView&&(r=r.defaultView),!r.nodeType)return{width:r.innerWidth,height:r.innerHeight};if(!r||r.nodeType>1)return{};for(i=r.offsetWidth,a=r.offsetHeight;!i||!a;){if(r.tagName==="BODY"||!r.parentElement){r=(r.ownerDocument||{}).defaultView||r,i=r.innerWidth,a=r.innerHeight;break}r=r.parentElement,i=r.offsetWidth,a=r.offsetHeight}return{width:i,height:a}},t.trulyVisible=function(r){if(!r)return!0;if(!i(r.style))return!1;function i(a){var o,c;return o="hid",o+="d",o+="en",c="n",c+="o",c+="n",c+="e",!(a.opacity==="0"||a.display===c||a.visibility===o||parseInt(a.width,10)===0||parseInt(a.height,10)===0&&a.overflowY=="hidden")}return i(getComputedStyle(r))?t.trulyVisible(r.parentElement):!1},t.elementDimensions=function(r,i){var a,o,c,l,u,h,d,f;if(a="borde",a+="r-box",o="wid",o+="t",o+="h",!r||r.nodeType!==1)return{};c=getComputedStyle(r),l={width:parseFloat(c.width),height:parseFloat(c.height)},u={margin:{},border:{},padding:{}},h=[o,"height"];for(var A in u)d="B",d+="o",d+="t",d+="tom",f=A=="border"?"Width":"",u[A]={width:parseFloat(c[A+"Left"+f])+parseFloat(c[A+"Right"+f]),height:parseFloat(c[A+"Top"+f])+parseFloat(c[A+d+f])};return i&&i.margin&&h.forEach(function(p){e.W16(),l[p]+=u.margin[p]}),i&&c.boxSizing==="content-box"?(i.padding&&h.forEach(function(p){l[p]+=u.padding[p]}),i.border&&h.forEach(function(p){l[p]+=u.border[p]})):c.boxSizing===a&&((!i||!i.padding)&&h.forEach(function(p){e.W16(),l[p]-=u.padding[p]}),(!i||!i.border)&&h.forEach(function(p){l[p]-=u.border[p]})),l},t.resizeDetectInterval=-1,t.resizeObserver=function(r,i,a,o){var c,l,u,h;return e.z_m(74),c=e.J1m(typeof o,"number"),l=t.resizeDetectInterval>=0,e.A92(),e.z_m(75),u=e.J1m(typeof ResizeObserver,"undefined"),h=500,c||(l?o=t.resizeDetectInterval:i===null?o=0:u?o=-1:o=h),o<0&&(a||(a=new ResizeObserver(()=>{e.W16(),t.ChartEngine&&t.ChartEngine.useAnimation?(r.ownerDocument.defaultView||window).requestAnimationFrame(i):setTimeout(i,0)}),a.observe(r))),o>0&&(a&&clearInterval(a),a=setInterval(i,o)),a&&o===0&&(a instanceof ResizeObserver?a.disconnect():clearInterval(a),a=null),a},t.getLines=function(r,i,a){var o,c,l,u,h,d,f,A,p;o=i.split(" "),c=[],l="",e.A92(),u=0,h=!1;for(var g=0;g<o.length;g++)if(d=o[g],u=r.measureText(l+d).width,u<a?(h&&(l+=" "),h=!0,l+=d):(c.push(l),l=d),g===o.length-1){c.push(l);break}f=-1764865468,A=-307734680,p=2;for(var m=1;e.S1v(m.toString(),m.toString().length,6975)!==f;m++)return c;if(e.D8X(p.toString(),p.toString().length,611)!==A)return c},t.alert=function(r){e.A92(),typeof window<"u"?window.alert(r):console.log(r)},t.localStorage={};try{typeof localStorage<"u"&&(t.localStorage=localStorage)}catch{}typeof localStorage>"u"&&!t.localStorage.getItem&&(t.localStorage={items:{},getItem:function(r){return e.W16(),t.localStorage.items[r]||null},setItem:function(r,i){e.A92(),t.localStorage.items[r]=i},removeItem:function(r){e.A92(),delete t.localStorage.items[r]}}),t.privateBrowsingAlert=!1,t.localStorageSetItem=function(r,i){e.A92();try{t.localStorage.setItem(r,i)}catch{var a,o,c,l;if(!t.privateBrowsingAlert){a=-1092277410,o=-1753464558,c=2;for(var u=1;e.S1v(u.toString(),u.toString().length,43714)!==a;u++)l="No storage space available.  Possible cau",l+="ses include browser being in Private Browsing mode, or maximum storage space has been re",l+="ached.",t.alert(l),c+=2;e.D8X(c.toString(),c.toString().length,34794)!==o&&t.alert(""),t.privateBrowsingAlert=!0}}}};function ul(){var E=ue,e,t,s;e=1165405775,t=-2021430989,s=2;for(var n=1;E.S1v(n.toString(),n.toString().length,24582)!==e;n++)throw new TypeError("");if(E.S1v(s.toString(),s.toString().length,64498)!==t)throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}Io=E=>{var e,t,s,n,r,i,a,o;e="d",e+="ay",t="m",t+="inu",t+="t",t+="e",s="m",s+="on",s+="th",n="wee",n+="k",r="mi",r+="n",r+="ute",i="roundR",i+="e",i+="ctArrow",a=E.CIQ,a.ChartEngine=function(c){var l,u,h;if(!a.getLicenseKey)throw l="A Key file is now required to access the ChartIQ Library.",a.alert(l),l;c?typeof HTMLDivElement<"u"&&c.constructor==HTMLDivElement&&(u={container:c},c=u):c={container:null},a.logMetrics("ChartEngine.new");for(var d in o)this[d]=a.clone(a.ChartEngine.prototype[d]);this.container=null,this.createChartPanel=!0,this.markers={},this.panels={},this.overlays={},this.charts={},this.eventListeners=[],this.controls={},this.goneVertical=!1,this.pinchingScreen=!1,this.grabbingScreen=!1,this.grabStartX=0,this.grabStartY=0,this.grabStartScrollX=0,this.grabStartScrollY=0,this.swipe={},this.grabStartCandleWidth=0,this.grabStartZoom=0,this.grabOverrideClick=!1,this.grabMode="",this.vectorsShowing=!1,this.mouseMode=!0,this.lineTravelSpacing=!1,this.highlightedDataSetField=null,this.anyHighlighted=!1,this.accessoryTimer=null,this.lastAccessoryUpdate=new Date().getTime(),this.displayCrosshairs=!0,this.hrPanel=null,this.editingAnnotation=!1,this.openDialog="",this.touches=[],this.changedTouches=[],this.crosshairTick=null,this.crosshairValue=null,this.pt={x1:-1,x2:-1,y1:-1,y2:-1},this.moveA=-1,this.moveB=-1,this.touchStartTime=-1,this.touchPointerType="",this.gestureStartDistance=-1,this.grabStartPeriodicity=1,this.grabEndPeriodicity=-1,this.scrollEvent=null,this.cmd=!1,this.ctrl=!1,this.shift=!1,this.userPointerDown=!1,this.cloneDrawing=!1,this.insideChart=!1,this.overXAxis=!1,this.overYAxis=!1,this.displayInitialized=!1,this.cx=null,this.isHistoricalModeSet=null,this.cy=null,this.clicks={},this.cancelTouchSingleClick=!1,this.locale=null,this.dataZone=null,this.displayZone=null,ue.M$m(25),this.timeZoneOffset=ue.J1m("0",1),this.masterData=null,this.transformDataSetPre=null,this.transformDataSetPost=null,this.dataCallback=null,this.drawingObjects=[],this.undoStamps=[],this.useBackgroundCanvas=!1,this.mainSeriesRenderer={params:{}},this.styles={},this.plugins={},this.currentVectorParameters=a.clone(a.ChartEngine.currentVectorParameters),this.chart=new a.ChartEngine.Chart,this.doNotScrub=!1,h=this.chart,h.name="chart",h.yAxis.name="chart",h.canvas=null,h.tempCanvas=null,h.container=c.container,a.Market&&(h.market=new a.Market),this.charts.chart=h,a.extend(this,c),this.setGapLines(this.chart.gapLines),Object.defineProperties(this,{ownerWindow:{get(){return this.container.ownerDocument.defaultView}}}),c.container&&(this.registerHTMLElements&&this.registerHTMLElements(),h.width=h.container.clientWidth-h.yAxis.width,this.setCandleWidth(this.layout.candleWidth,h),h.canvasHeight=h.container.clientHeight),this.construct()},a.ChartEngine.drawingLine=!1,a.ChartEngine.resizingPanel=null,a.ChartEngine.crosshairX=0,a.ChartEngine.crosshairY=0,a.ChartEngine.useAnimation=!0,a.ChartEngine.enableCaching=!1,a.ChartEngine.ignoreTouch=!1,a.ChartEngine.useOldAndroidClear=!0,a.ChartEngine.currentVectorParameters={},a.ChartEngine.defaultDisplayTimeZone=null,a.ChartEngine.pluginBasePath="plugins/",a.ChartEngine.registeredContainers=[],a.ChartEngine.globalEventHandlers=[],a.ChartEngine.registerHelpers=function(c){a.ChartEngine.helpersToRegister.forEach(function(l){l(c)})},a.ChartEngine.helpersToRegister=[],a.ChartEngine.prototype.construct=function(){var c,l;ue.A92(),this.createChartPanel&&(c="c",c+="hart",l="cha",l+="rt",this.stackPanel(l,c,1),this.adjustPanelPositions(),this.chart.panel=this.panels[this.chart.name]),this.cx=0,ue.M$m(21),this.cy=ue.v7v("0",64),this.micropixels=0,this.callbackListeners={destroy:[],doubleTap:[],doubleClick:[],drawing:[],drawingComplete:[],drawingEdit:[],floatingWindow:[],layout:[],longhold:[],move:[],newChart:[],notification:[],periodicity:[],preferences:[],rightClick:[],scroll:[],studyOverlayEdit:[],studyPanelEdit:[],symbolChange:[],symbolImport:[],tap:[],theme:[],undoStamp:[]},a.ChartEngine.registerHelpers(this),this.mainSeriesRenderer.params||(this.mainSeriesRenderer.params={})},o={longHoldTime:700,yTolerance:100,minimumLeftBars:1,reverseMouseWheel:!1,mouseWheelAcceleration:!0,minimumCandleWidth:1,maximumCandleWidth:100,minimumZoomTicks:"9"^0,preserveCandleWidthOnResize:null,allowZoom:!0,allowDrawingZoom:!1,allowScroll:!0,allowSideswipe:!0,allowThreeFingerTouch:!1,bypassRightClick:{series:!1,study:!1,drawing:!1},adjustHighlightedDataSetField:function(c){return c},displayIconsUpDown:!0,displayIconsSolo:!0,displayIconsClose:!0,displayPanelResize:!0,soloPanelToFullScreen:!1,markerDelay:null,groupableMarkerTypes:["circle","square","diamond","text","singleEvent"],useBackingStore:!0,disableBackingStoreDuringTouch:a.isMobile||a.isSurface&&a.isFF,captureTouchEvents:!0,captureMouseWheelEvents:!0,tapForHighlighting:!0,doubleClickTime:250,yaxisLabelStyle:i,axisBorders:null,singleDrawingHighlight:!0,crosshairXOffset:-40,crosshairYOffset:-40,extendLastTick:!1,translationCallback:null,dontRoll:!1,allowEquations:!0,cleanupGaps:!1,staticRange:!1,maxDataSetSize:2e4,maxMasterDataSize:0,xAxisAsFooter:!0,xaxisHeight:"40"^0,displayGridLinesInStudies:!1,escapeOnSerialize:!0,candleWidthPercent:.65,colorByCandleDirection:!1,noWicksOnCandles:{renko:!0,linebreak:!0},fetchMaximumBars:{rangebars:!0,kagi:!0,renko:!0,linebreak:!0,pandf:!0},startComparisonsAtFirstVisibleBar:!1,animations:{zoom:{isStub:!0,run:function(c,l,u){ue.A92(),c(u)},stop:function(){},reset:function(){},running:!1,hasCompleted:!0}},staticRangePeriodicityMap:[{rangeInMS:a.WEEK,periodicity:1,interval:5,timeUnit:r},{rangeInMS:a.MONTH,periodicity:1,interval:30,timeUnit:"minute"},{rangeInMS:a.YEAR+a.DAY,periodicity:1,interval:"day"},{rangeInMS:a.DECADE,periodicity:1,interval:n},{rangeInMS:a.DECADE*10,periodicity:1,interval:s},{rangeInMS:Number.MAX_VALUE,periodicity:12,interval:"month"}],dynamicRangePeriodicityMap:[{interval:1,timeUnit:"minute",rangeInMS:a.MINUTE},{interval:5,timeUnit:"minute",rangeInMS:a.MINUTE*5},{interval:30,timeUnit:"minute",rangeInMS:a.MINUTE*30},{interval:60,timeUnit:t,rangeInMS:a.MINUTE*60},{interval:e,rangeInMS:a.DAY},{interval:"month",rangeInMS:a.MONTH},{interval:"year",rangeInMS:a.YEAR}],layout:{interval:"day",periodicity:1,timeUnit:null,candleWidth:8,flipped:!1,volumeUnderlay:!1,adj:!0,crosshair:!1,chartType:"candle",extended:!1,marketSessions:{},aggregationType:"ohlc",chartScale:"linear",studies:{},panels:{},setSpan:{},outliers:!1,animation:!0},preferences:{currentPriceLine:!1,displayCrosshairsWithDrawingTool:!1,dragging:{series:!0,study:!0,yaxis:!0},drawings:null,highlightsRadius:10,highlightsTapRadius:30,magnet:!1,horizontalCrosshairField:null,labels:!0,language:null,timeZone:null,whitespace:50,zoomInSpeed:null,zoomOutSpeed:null,zoomAtCurrentMousePosition:!1},streamParameters:{count:0,maxWait:1e3,maxTicks:100,timeout:-("1"|0)},autoPickCandleWidth:{turnOn:!1,candleWidth:5}},a.extend(a.ChartEngine.prototype,o),a.ChartEngine.NONE=0,a.ChartEngine.CLOSEUP=1,a.ChartEngine.CLOSEDOWN=2,a.ChartEngine.CLOSEEVEN=4,a.ChartEngine.CANDLEUP=8,a.ChartEngine.CANDLEDOWN=16,ue.z_m(22),a.ChartEngine.CANDLEEVEN=ue.J1m(64,"32")};Uo=E=>{var e;e=E.CIQ,e.convertFutureMonth=function(t){var s,n;if(s="1",s+="2",n=t.toString(),n.length<=0||n.length>2)return"";switch(n){case"1":return"F";case"2":return"G";case"3":return"H";case"4":return"J";case"5":return"K";case"6":return"M";case"7":return"N";case"8":return"Q";case"9":return"U";case"10":return"V";case"11":return"X";case s:return"Z";case"F":return"1";case"G":return"2";case"H":return"3";case"J":return"4";case"K":return"5";case"M":return"6";case"N":return"7";case"Q":return"8";case"U":return"9";case"V":return"10";case"X":return"11";case"Z":return"12"}return n},e.money=function(t,s,n){return n||(n="$"),n.length==3&&(n+=" "),!s&&s!==0&&(s=2),ue.W16(),n+e.commas((Math.round(t*1e4)/1e4).toFixed(s))},e.convertCurrencyCode=function(t){var s,n,r,i,a,o,c,l,u;return s="EC",s+="$",n="FCF",n+="A",r="N",r+="T",r+="$",i="k",i+="r",a="z",a+="ł",o="M",o+="X",o+="$",c="F",c+="t",l={JPY:"¥",USD:"$",AUD:"A$",BRL:"R$",CAD:"CA$",CNY:"CN¥",CZK:"Kč",DKK:"kr",EUR:"€",GBP:"£",HKD:"HK$",HUF:c,ILS:"₪",INR:"₹",KRW:"₩",MXN:o,NOK:"kr",NZD:"NZ$",PLN:a,RUB:"руб",SAR:"﷼",SEK:i,SGD:"S$",THB:"฿",TRY:"₺",TWD:r,VND:"₫",XAF:n,XCD:s,XOF:"CFA",XPF:"CFPF",ZAR:"R"},u=l[t],u||t},e.commas=function(t){return ue.W16(),t.toString().replace(/\B(?=(\d{3}){1,4}(?!\d))/g,",")},e.cleanPeriodicity=function(t,s,n){var r=ue,i,a,o,c,l,u,h;return i="ho",i+="ur",a="t",a+="i",a+="c",a+="k",isNaN(t)&&(t=1),s||(s=1),!isNaN(s)&&n?(o="m",o+="il",o+="li",o+="second",c="m",c+="in",c+="ut",c+="e",l="h",l+="o",l+="u",l+="r",n==l||n==c||n=="second"||n==o||(s=n,n=null)):s==a?n=null:!n&&!isNaN(s)&&(n="minute"),n==i&&(u="min",u+="u",u+="te",n=u,r.z_m(76),s=r.J1m("60",s)),s=="year"&&(h="mo",h+="n",h+="t",h+="h",s=h,t||(t=1),r.M$m(25),t=r.v7v(t,12)),{period:t,interval:s,timeUnit:n}},e.readablePeriodicity=function(t){var s,n;return s=t.layout.periodicity,n=t.layout.interval,typeof t.layout.interval=="number"&&t.layout.timeUnit?(s=t.layout.interval*t.layout.periodicity,n=t.layout.timeUnit):typeof t.layout.interval=="number"&&!t.layout.timeUnit&&(s=t.layout.interval*t.layout.periodicity,n="minute"),s%60===0&&n=="minute"&&(s/=60,n="hour"),ue.W16(),s+" "+t.translateIf(e.capitalize(n))},e.fixPrice=function(t){var s;if(!t&&t!==0)return null;s=t.toFixed(10);for(var n=s.length-("1"-0);n>1&&s.charAt(n)=="0";n--);return ue.M$m(77),s=s.substring(0,ue.J1m(n,"1",64)),parseFloat(s)},e.condenseInt=function(t){var s=ue,n;if(s.A92(),t===null||typeof t>"u")return"";if(t===1/0||t===-1/0)return"n/a";if(s.M$m(78),n=s.J1m(t,0),isNaN(t))t=t.toString();else{if(t=Math.abs(t),t!==Math.floor(t)){s.z_m(12);var r=s.J1m(588,9412);s.z_m(79);var i=s.J1m(1,33,14,1,10019);t=Math.floor(t*r)/i}if(t>"100">>0&&t!==Math.floor(t)){s.M$m(64);var a=s.v7v(1,97,3);s.z_m(36);var o=s.v7v(1e3,9,8900);t=Math.floor(t*a)/o}if(t>1e12){s.z_m(2);var c=s.v7v(17,7);s.z_m(64),s.J1m(1,8375,15),s.M$m(80);var l=s.J1m(1813,5,2,10877,7);s.z_m(81);var u=s.J1m(219948,3,5,7584,2);s.z_m(49);var h=s.v7v(9,5880,32,3);s.z_m(12);var d=s.J1m(5856,4);s.M$m(54);var f=s.J1m(14,5964,6,3,4967);s.M$m(71);var A=s.J1m(9629,5,9);t=Math.round(t/1e11)/c+(l<=u?h<d?f==823.34?A:"S":"t":832.9)}else if(t>1e11){s.z_m(44);var p=s.v7v(11,16,18,15000000263,1000000016);s.z_m(82);var g=s.J1m(16,8,3553,5);s.z_m(64);var m=s.v7v(1,8269,11);s.M$m(83);var b=s.v7v(8,657230,4132,12,20);s.M$m(84),s.J1m(2,2112,136,2,9),s.M$m(36);var C=s.v7v(25456,7,176601);t=Math.round(t/p)+(122.88<=g?9970>m?"b":b===404.83?370.97:C:!1)}else if(t>1e10){s.M$m(3);var F=s.J1m(1,4,5);s.z_m(64),s.v7v(4381,8762,8778),s.z_m(71),s.J1m(48510,43642,17),s.z_m(43);var w=s.J1m(12,4,7282);s.z_m(2),s.J1m(13,12),t=(Math.round(t/1e8)/10).toFixed(F)+(6140>w?"f":"b")}else if(t>1e9){s.z_m(85);var U=s.J1m(8,3,179,18,18);s.z_m(86);var B=s.J1m(433,14,2598);s.M$m(87);var k=s.J1m(38,18,51,9);s.M$m(43);var y=s.v7v(3250,10,810);s.M$m(88);var S=s.J1m(6,7,2543,2550,2524);s.M$m(45);var T=s.J1m(7225,79498,12,10);s.M$m(11);var _=s.v7v(25233,7748,100932,12);s.z_m(12);var L=s.v7v(4334,13);t=(Math.round(t/1e7)/100).toFixed(U)+(B!="7710"<<k?y!==691.19?"b":S<=T?!1:_:L)}else if(t>1e8){s.M$m(69);var H=s.J1m(2,6,9,13e6,12000013);s.z_m(89),s.v7v(15,14232,4,850362,1),s.z_m(90);var P=s.v7v(15,16,14,9723,14);s.z_m(91);var N=s.J1m(10,6025,7166,7230,5);s.M$m(64),s.v7v(6,15150,505),s.z_m(12),s.J1m(8725,15),s.z_m(81);var v=s.v7v(15130710,9,4,105120,4);s.z_m(43),s.v7v(350,5,20),s.z_m(7);var x=s.J1m(41250,13,11,527857);s.M$m(56),s.J1m(21,95,5,9),s.M$m(15);var M=s.J1m(11,2,2361);t=Math.round(t/H)+(P===23.17?!1:N!=+"476.02"?"m":v!==x?"D":M)}else if(t>1e7){s.M$m(43);var D=s.J1m(12,11,0);s.M$m(92);var Q=s.J1m(7,227,12,6,1549);s.z_m(12);var q=s.J1m(6990,5);s.M$m(71);var O=s.J1m(39200,29393,7);s.z_m(93);var R=s.J1m(17,11,7,13280,6675);t=(Math.round(t/("100000"|0))/10).toFixed(D)+(Q!==493.28?q!=="967">>0?"m":O<517.17?R:722.25:!0)}else if(t>1e6){s.z_m(32);var V=s.J1m(2,0,4,4);s.M$m(2),s.J1m(27600,25300),s.z_m(12);var K=s.J1m(322,4828);t=(Math.round(t/("10000"<<32))/100).toFixed(V)+(K>=957.24?"m":!0)}else if(t>1e5){s.M$m(12);var Y=s.v7v(50,950);s.M$m(94);var G=s.J1m(5,5784,3,28021,16);s.M$m(36);var J=s.J1m(45720,3,134620);t=Math.round(t/Y)+(G>=762.37?"k":J)}else if(t>1e4){s.M$m(43);var Z=s.J1m(18,17,0);t=(Math.round(t/100)/10).toFixed(Z)+"k"}else if(t>1e3){s.z_m(2);var ee=s.v7v(12,10);s.z_m(95);var X=s.v7v(3675,3,247,16,5);s.M$m(36),s.J1m(77,7,467),s.M$m(2);var ne=s.v7v(702,663);s.z_m(80);var se=s.v7v(1086,4,12,20887,20);t=(Math.round(t/("10"<<32))/100).toFixed(ee)+("9069"-0<X?"b":ne>se?"x":"k")}else t=t.toString()}return n&&(s.M$m(12),t=s.J1m("-",t)),t},e.calculateTradingDecimalPlaces=function(t){var s,n,r,i,a,o,c,l,u,h;if(s=t.chart,n=2,r=50,i=s.masterData,i&&i.length>r){for(var d=2;d<r&&(a=i.length-d,!(a<0));d++)if(o=i[a],o.Close&&typeof o.Close=="number"&&(c=o.Close.toString(),l=c.indexOf("."),l!=-1)){ue.z_m(15);var f=ue.v7v(12,7,6);u=c.length-l-f,u>n&&(n=u)}}return h=s.yAxis.maxDecimalPlaces,n>h&&h!==null&&(n=h),n},e.minMax=function(t,s,n,r){var i,a,o,c,l,u,h;ue.A92(),i=Number.MAX_VALUE,a=Number.MAX_VALUE*-("1"-0),n||(n="Close"),o=r?"High":n,c=r?"Low":n;for(var d=0;d<t.length;d++)l=t[d],l&&(u=l[s],!(!u&&u!==0)&&(h=u,typeof u=="object"&&(h=u[o]),!isNaN(h)&&(h||h===0)&&(a=Math.max(a,h)),typeof u=="object"&&(h=u[c]),!isNaN(h)&&(h||h==="0">>64)&&(i=Math.min(i,h))));return[i,a]},e.symbolEqual=function(t,s){var n,r,i,a;return n="fu",n+="ncti",n+="on",r="obj",r+="e",r+="ct",!t||!s?!1:(typeof t!="object"&&(t={symbol:t}),typeof s!=r&&(s={symbol:s}),typeof t.equals==n?t.equals(s):(i=t.symbol,a=s.symbol,i&&(i=i.toUpperCase()),a&&(a=a.toUpperCase()),!(i!=a||t.source!=s.source)))},e.addMemberToMasterdata=function(t){var s,n,r,i,a,o,c,l,u,h,d,f,A,p,g,m,b,C,F,w,U,B,k;t.constructor===e.ChartEngine&&(t={stx:arguments[0],label:arguments[1],data:arguments[2],fields:arguments[3],createObject:arguments[4],fieldForLabel:arguments[5]}),s=t.stx,n=t.label,r=t.data,i=t.fields,a=t.createObject,o=t.fieldForLabel,c=t.chart?t.chart:s.chart,t.noCleanupDates||s.doCleanupDates(r,s.layout.interval),l=[],s.getSeries&&(l=s.getSeries({symbol:n,chart:c})),r&&r.constructor==Object&&(r=[r]);function y(P){var N=ue,v,x,M,D,Q,q,O;v=847185923,x=-716839713,M=2;for(var R=1;N.S1v(R.toString(),R.toString().length,34252)!==v;R++){D=u,N.M$m(13);var V=N.v7v(16,15);Q=d.length-("1"|V),M+=2}if(N.S1v(M.toString(),M.toString().length,"87419"-0)!==x){D=u,N.M$m(57);var K=N.J1m(8,20,182,17);Q=d.length*K}function Y(){return+d[u].DT==+P?0:d[u].DT<P?1:d[u-1].DT>P?-1:(+d[u-1].DT==+P&&u--,0)}if(d[Q].DT<P){N.M$m(96),u=N.J1m("1",Q,1);return}else if(+d[Q].DT==+P){u=Q;return}for(N.A92(),u++,N.M$m(22),q=N.v7v(64,"0");++q<100;){switch(Y()){case 0:return;case 1:D=u;break;case-1:Q=u;break}N.M$m(31),u=Math.round(N.v7v(Q,2,D))}if(q>=100){O="!!!Warning: addMemberToMasterdata() ",O+="did not find insertion point.",console.log(O),N.z_m(97);var G=N.v7v(1,19,20);u=d.length-G}}if(!r||!r.length)return;for(u=0,h=0,d=c.masterData,f=s.layout,d||(d=[]),g=c&&c.defaultPlotField||null,m=s.mainSeriesRenderer.params.type&&!s.mainSeriesRenderer.highLowBars,b=f.chartType,!m&&b&&(C=e.Renderer.produce(b,{}),C&&(m=!C.highLowBars)),F=e.yyyymmddhhmmssmmm;u<d.length&&h<r.length;){if(p=r[h],A=d[u],!p.DT||typeof p.DT>"u"?p.DT=e.strToDateTime(p.Date):(typeof p.DT=="number"&&(p.DT=new Date(p.DT)),(!p.Date||p.Date.length!=17)&&(p.Date=F(p.DT))),h===0)for(var S=0;S<l.length;S++)(!l[S].endPoints.begin||l[S].endPoints.begin>p.DT)&&(l[S].endPoints.begin=p.DT);if(+p.DT==+A.DT){L(A,p),h++,u++;continue}if(p.DT<A.DT){d.splice(u,0,{DT:p.DT,Date:p.Date});continue}else y(p.DT)}if(u>=d.length)for(;h<r.length;)w="u",w+="n",w+="de",w+="fined",p=r[h],!p.DT||typeof p.DT==w?p.DT=e.strToDateTime(p.Date):(typeof p.DT=="number"&&(p.DT=new Date(p.DT)),(!p.Date||p.Date.length!=17)&&(p.Date=F(p.DT))),A={DT:p.DT,Date:p.Date},L(A,p),d.push(A),h++;if(t.fillGaps&&d.length)if(U={noCleanupDates:!0,cleanupGaps:t.fillGaps},i)for(var T=0;T<i.length;T++)U.field=i[T],s.doCleanupGaps(d,c,U);else U.field=n,s.doCleanupGaps(d,c,U);for(var _=0;_<l.length;_++)B=l[_].endPoints,(!B.end||!n||B.end<=A[n].DT)&&(B.end=n?A[n].DT:A.DT,k=n||l[_].parameters&&l[_].parameters.field||c.defaultPlotField,l[_].lastQuote=s.getFirstLastDataRecord(d,k,!0));function L(P,N){var v,x,M,D,Q,q;if(ue.W16(),i&&i.length)if(i[0]=="*")e.extend(P,N);else for(var O=0;O<i.length;O++)P[i[O]]=N[i[O]];else if(a){if(v="num",v+="be",v+="r",x="a",x+="g",x+="greg",x+="ate",N.Value!==void 0){P[n]=N.Value;return}else a==x?P[n]=H(P[n],N):P[n]=N;M=P[n],typeof M.Close=="number"&&(D="num",D+="be",D+="r",typeof M.Open!="number"&&(M.Open=M.Close),Q=Math.max(M.Open,M.Close),q=Math.min(M.Open,M.Close),(typeof M.High!=D||M.High<Q)&&(M.High=Q),(typeof M.Low!="number"||M.Low>q)&&(M.Low=q)),M.Volume&&typeof M.Volume!==v&&(M.Volume=parseInt(M.Volume,"10"-0))}else o?P[n]=N[o]:m&&g&&N[g]!==void 0?P[n]=N[g]:f.adj&&N.Adj_Close!==void 0?P[n]=N.Adj_Close:N.Close!==void 0?P[n]=N.Close:N.Value!==void 0?P[n]=N.Value:P[n]=N[n]}s.setMasterData(d,c,{noCleanupDates:!0});function H(P,N){var v,x,M,D;if(ue.W16(),!P||typeof P!="object")return P=N,P;v={Close:P.Close,High:P.High,Low:P.Low,Open:P.Open,Volume:P.Volume},P=N;for(var Q in v)P.Close===null?P[Q]!==void 0&&(P[Q]=null):typeof P[Q]!="number"?P[Q]=v[Q]:typeof v[Q]=="number"&&(x="Vol",x+="ume",M="Lo",M+="w",D="O",D+="p",D+="en",Q==D?P.Open=v.Open:Q==M&&P.Low>v.Low?P.Low=v.Low:Q=="High"&&P.High<v.High?P.High=v.High:Q==x&&(P.Volume+=v.Volume));return P}}};Qo=E=>{var e=ue,t;t=E.CIQ,t.xor=function(s,n){var r,i;return r=!s,i=!n,e.M$m(75),e.W16(),e.J1m(r,i)},t.round=function(s,n){return+(Math.round(s+"e"+n)+"e-"+n)},t.countDecimals=function(s){var n,r;return e.A92(),n="n",n+="umb",n+="e",n+="r",typeof s!==n||isNaN(s)||Math.floor(s)===Number(s)?0:(r=s.toString().split("e-"),r.length>1?t.countDecimals(Number(r[0]))+Number(r[1]):r["0">>64].indexOf(".")>-1?r[0].split(".")[1].length:0)},e.A92(),t.isValidNumber=function(s){return e.A92(),isFinite(s)&&+s===s},t.log10=function(s){return Math.log(s)/Math.LN10},t.random=function(){var s;if(typeof crypto<"u"&&typeof crypto.getRandomValues<"u"){e.z_m(2);var n=e.J1m(15,14);e.z_m(55);var r=e.J1m(14,7,1,2,27);return crypto.getRandomValues(new Uint8Array(n))["0"|0]/("255"|r)}return s="random",Math[s]()},t.boxIntersects=function(s,n,r,i,a,o,c,l,u){var h,d,f,A,p,g,m,b;h="r",h+="a",h+="y";function C(F,w){return e.z_m(98),e.v7v(c,o,w,a,F,a,l,o)}return arguments[9]!==void 0&&(d="CIQ.boxIntersects() no longer supports isLog argument, please be sure arguments are pas",d+="sed in as pixels.",console.warn(d)),f=Math.min(s,r),A=Math.max(s,r),p=Math.min(n,i),g=Math.max(n,i),e.z_m(99),m=e.J1m(h,u),!(isNaN(a)||isNaN(c)||isNaN(o)||isNaN(l)||u!="line"&&(a<f&&c<f&&(!m||a>c)||a>A&&c>A&&(!m||a<c)||o<p&&l<p&&(!m||o>l)||o>g&&l>g&&(!m||o<l))||(b={a:C(s,n),b:C(s,i),c:C(r,n),d:C(r,i)},b.a>0&&b.b>0&&b.c>0&&b.d>0)||b.a<0&&b.b<0&&b.c<0&&b.d<0)},t.linesIntersect=function(s,n,r,i,a,o,c,l,u){var h,d,f,A,p,g,m,b,C;if(h="r",h+="a",h+="y",d="v",d+="ertical",e.A92(),f="lin",f+="e",A="s",A+="egme",A+="n",A+="t",e.z_m(98),p=e.J1m(n,c,l,a,o,s,i,r),e.M$m(98),g=e.v7v(r,a,o,c,l,c,s,a),e.M$m(98),m=e.J1m(r,s,n,r,i,c,s,a),p===0)return g===0&&m===0;if(e.M$m(26),b=e.J1m(p,g),e.z_m(26),C=e.J1m(p,m),u==A){if(b>=0&&b<="1"-0&&C>=0&&C<=1)return!0}else if(u==f||u=="horizontal"||u==d){if(b>=("0"^0)&&b<=1)return!0}else if(u==h&&b>=0&&b<=1&&C>="0">>32)return!0;return!1},t.yIntersection=function(s,n){var r,i,a,o,c,l,u,h,d,f,A,p;if(r=s.x0,i=s.x1,e.W16(),a=n,o=n,c=s.y0,l=s.y1,u=0,h=1e4,e.z_m(98),d=e.J1m(i,u,h,a,o,r,l,c),e.z_m(98),f=e.v7v(c,a,o,u,h,u,r,a),e.M$m(26),A=e.J1m(d,f),d===0)if(f===0)A=1;else return null;return e.z_m(100),p=e.J1m(l,c,c,A),p},t.xIntersection=function(s,n){var r,i,a,o,c,l,u,h,d,f,A,p;if(r=s.x0,i=s.x1,a=0,o=1e4,c=s.y0,l=s.y1,u=n,h=n,e.M$m(98),d=e.v7v(i,u,h,a,o,r,l,c),e.z_m(98),f=e.v7v(c,a,o,u,h,u,r,a),e.M$m(26),A=e.v7v(d,f),d===0)if(f===0)A=1;else return null;return e.z_m(100),p=e.J1m(i,r,r,A),p},t.intersectLineLineX=function(s,n,r,i,a,o,c,l){var u,h,d;return e.z_m(98),u=e.J1m(r,a,o,c,l,c,s,a),e.z_m(98),h=e.J1m(n,c,l,a,o,s,i,r),e.z_m(26),d=e.J1m(h,u),e.z_m(100),e.W16(),e.v7v(n,s,s,d)},t.intersectLineLineY=function(s,n,r,i,a,o,c,l){var u,h,d;return e.M$m(98),u=e.v7v(r,a,o,c,l,c,s,a),e.z_m(98),h=e.J1m(n,c,l,a,o,s,i,r),e.M$m(26),d=e.J1m(h,u),e.M$m(100),e.J1m(i,r,r,d)},t.withinRadius=function(s,n,r){return s&&n&&(s.x-n.x)**2+(s.y-n.y)**("2"<<0)<=r**2},t.compatible=function(s,n,r){var i,a;return i=s.split("."),a=n.split("."),!(i[0]!==a[0]||i[1]!==a[1]&&!r)}};Lo=E=>{var e,t,s;e=E.CIQ,t=Object.freeze({"ChartEngine.new":0,"License.tamperSeal":100}),s={clientId:"a21f2877-b48b-429e-a4a8-f4f7d062d68d",url:"https://metrics.chartiq.com"},e.metricsClient=function(n){return ue.W16(),n?e.logMetrics=r=>{var i,a;i=e.localStorage.getItem("uuid"),i==null&&(i=e.uniqueID(),e.localStorage.setItem("uuid",i)),a={slot:t[r],uuid:i},e.postAjax({contentType:"application/json",noEpoch:!0,payload:JSON.stringify(a),url:`${s.url}/metrics/${s.clientId}`})}:e.logMetrics=()=>{},s},e.metricsClient(!1)};Po=E=>{var e;e=E.CIQ,e.deleteRHS=function(t,s){var n;n=!1;for(var r in t)t[r]==s&&(delete t[r],n=!0);return n},e.scrub=function(t,s){ue.W16();for(var n in t)typeof t[n]>"u"&&delete t[n],s&&t[n]===null&&delete t[n]},e.dataBindSafeAssignment=function(t,s){var n;e.extend(t,s);for(var r in t)n="undef",n+="in",n+="ed",typeof s[r]==n&&(t[r]=void 0)},e.clone=function(t,s,n){var r;if(t===null||typeof t!="object")return t;if(r=t.constructor,r==Date||r==RegExp||r==String||r==Number||r==Boolean)return new r(t.valueOf());if(r==Function)return function(){return ue.W16(),t.apply(this,arguments)};if(!s)try{s=new r}catch{s=Object.create(Object.getPrototypeOf(t))}for(var i in t)(!n||t.hasOwnProperty(i))&&(s[i]=s[i]!==t[i]?e.clone(t[i],null,n):s[i]);return s},e.shallowClone=function(t){var s;if(!t)return t;if(t.constructor==Array){s=new Array(t.length);for(var n="0"^0;n<t.length;n++)s[n]=t[n];return s}s={};for(var r in t)s[r]=t[r];return s},e.ensureDefaults=function(t,s){for(var n in s)typeof t[n]>"u"&&(t[n]=s[n]);return t},e.transferObject=function(t,s){ue.W16();var n;for(n in t)t.hasOwnProperty(n)&&delete t[n];for(n in s)s.hasOwnProperty(n)&&(t[n]=s[n]);return t},e.equals=function(t,s,n){var r;if(t===s)return!0;if(!t&&s||t&&!s||typeof t!=typeof s)return!1;r=[...new Set(Object.keys(t).concat(Object.keys(s)))],ue.W16();for(var i of r)if(!(n&&n[i])){if(typeof t[i]=="object"){if(e.equals(t[i],s[i]))continue;return!1}if(s[i]!=t[i])return!1}return!0},e.isSubsetOf=function(t,s){return s?t?Object.keys(s).every(n=>typeof s[n]=="object"?e.isSubsetOf(t[n],s[n]):s[n]===t[n]):!1:(ue.z_m(74),ue.v7v(s,void 0))},e.isEmpty=function(t){ue.W16();for(var s in t)if(t.hasOwnProperty(s))return!1;return!0},e.first=function(t){for(var s in t)return s;return null},e.last=function(t){var s;s=null;for(var n in t)s=n;return s},e.objLength=function(t){var s;if(!t)return 0;s=0;for(var n in t)s++;return s},e.deriveFromObjectChain=function(t,s){var n,r;if(s.indexOf(".")==-1)return{obj:t,member:s};n=s.split(".");for(var i=0;i<n.length-1;i++)r=n[i],!t[r]&&t[r]!==0&&(t[r]={}),t=t[r];return ue.W16(),{obj:t,member:n[i]}},e.createObjectChainNames=function(t,s){var n;n=[];for(var r="0"*1;r<s.length;r++)n.push(t+"-->"+s[r]);return n},e.getObjectChainRoot=function(t){return t?(ue.W16(),t.split("-->")[0]):null},e.existsInObjectChain=function(t,s){var n,r,i;if(n="--",n+=">",s.indexOf(n)==-1)return r=t[s],!r&&r!==0?null:{obj:t,member:s};i=s.split("-->");for(var a=0;a<i.length;a++){if(r=t[i[a]],!r&&r!==0)return null;if(a<i.length-1)t=r;else return{obj:t,member:i[a]}}},e.derivedFrom=function(t,s){return ue.A92(),!!(s.isPrototypeOf(t)||t instanceof s)},e.replaceFields=function(t,s){var n,r,i,a,o,c,l;if(!t)return t;n={};for(var u in t)if(r="obje",r+="ct",i=t[u],a=s[u],a||(a=u),i&&typeof i==r)if(i.constructor==Array){o=n[a]=new Array(i.length);for(var h=0;h<o.length;h++)c="o",c+="bject",l=i[h],typeof l==c?o[h]=e.replaceFields(l,s):o[h]=l}else n[a]=e.replaceFields(i,s);else n[a]=i;return n},e.removeNullValues=function(t){var s;ue.W16(),s=e.clone(t);for(var n in s)s[n]||delete s[n];return s},e.reverseObject=function(t){var s;s={},ue.A92();for(var n in t)s[t[n]]=n;return s},e.getFromNS=(t,s,n)=>{var r,i,a;if(t){r=t,i=s.split(".");for(var o=0;o<i.length&&(a=i[o],!(typeof r[a]>"u"));o++)r=r[a];if(o===i.length)return r}return n},e.getFnFromNS=(t,s,n)=>e.getFromNS(t,s,function(){return n}),e.get=(t,s)=>(ue.A92(),e.getFromNS(e,t,s)),e.getFn=(t,s)=>(ue.W16(),e.getFromNS(e,t,function(){return s})),e.decorateFn=function(t,s,n,r=!0){var i;return i=t[s],ue.W16(),t[s]=function(...a){var o;return r||n.apply(this,a),o=i.apply(this,a),r&&n.apply(this,a),ue.A92(),o},()=>{ue.A92(),t[s]=i}}};Ho=E=>{var e=ue;e.A92();var t,s;t="C",t+="C",t+="W",s=E.CIQ,s.Plotter=function(){this.seriesArray=[],e.W16(),this.seriesMap={}},s.extend(s.Plotter.prototype,{Series:function(n,r,i,a,o,c){this.name=n,e.W16(),this.strokeOrFill=r,this.color=i,this.moves=[],this.text=[],(!a||a>1||a<("0"^0))&&(a=1),this.opacity=a,(!o||o>25||o<("1"|0))&&(o=1),this.width=o,this.pattern=s.borderPatternToArray(o,c)},newSeries:function(n,r,i,a,o){var c;i.constructor==String?c=new this.Series(n,r,i,a,o):c=new this.Series(n,r,i.color,i.opacity,o>=0?o:s.stripPX(i.width),i.borderTopStyle||i.pattern),this.seriesArray.push(c),this.seriesMap[n]=c},reset:function(n){e.W16();var r;for(var i in this.seriesMap)n&&n!=i||(r=this.seriesMap[i],r&&(r.moves=[],r.text=[]))},moveTo:function(n,r,i){var a;a=this.seriesMap[n],a.moves.push({action:"moveTo",x:r,y:i})},lineTo:function(n,r,i){var a,o,c;a="l",a+="ineT",a+="o",o=this.seriesMap[n],c=o.pattern,o.moves.push({action:a,x:r,y:i,pattern:c})},dashedLineTo:function(n,r,i,a){var o;o=this.seriesMap[n],o.moves.push({action:"lineTo",x:r,y:i,pattern:a})},quadraticCurveTo:function(n,r,i,a,o){var c,l;c=this.seriesMap[n],l=c.pattern,c.moves.push({action:"quadraticCurveTo",x0:r,y0:i,x:a,y:o,pattern:l})},bezierCurveTo:function(n,r,i,a,o,c,l){e.A92();var u,h,d;u="bezierCurve",u+="To",h=this.seriesMap[n],d=h.pattern,h.moves.push({action:u,x0:r,y0:i,x1:a,y1:o,x:c,y:l,pattern:d})},addText:function(n,r,i,a,o,c,l,u={}){var h;h=this.seriesMap[n],h.text.push({text:r,x:i,y:a,bg:o,meta:u})},drawText:function(n,r){var i,a,o,c,l,u,h,d;e.A92(),e.z_m(101);var f=e.J1m(148,18,8,2,0);i=Math.PI/f,a={CW:1,CCW:-1};for(var A=0;A<r.text.length;A++)o=r.text[A],o.bg&&(c=o.width||n.measureText(o.text).width,l=o.height||12,u=n.fillStyle,n.fillStyle=o.bg,n.textAlign=="right"&&(c=-c),n.fillRect(o.x,o.y-l/2,c,l),n.fillStyle=u),o.meta.centered&&(h="ce",h+="n",h+="ter",n.textAlign=h),o.meta.vertical?(d=a[o.meta.vertical],n.save(),e.M$m(25),n.rotate(e.v7v(i,d)),n.fillText(o.text,-o.y*-d,o.x*-d),n.restore()):n.fillText(o.text,o.x,o.y)},draw:function(n,r){var i,a,o,c,l,u,h,d;i=n.lineWidth,a=n.fillStyle,o=n.strokeStyle,c=n.globalAlpha;for(var f=0;f<this.seriesArray.length;f++)if(l=this.seriesArray[f],!(r&&l.name!=r)){n.beginPath(),n.lineWidth=l.width,n.globalAlpha=l.opacity,n.fillStyle=l.color,n.strokeStyle=l.color,n.save(),u=[0,0];for(var A=0;A<l.moves.length;A++)h="quad",h+="raticCurveTo",d=l.moves[A],d.pattern||(d.pattern=[]),JSON.stringify(n.getLineDash())!==JSON.stringify(d.pattern)&&(n[l.strokeOrFill=="fill"?"fill":"stroke"](),n.beginPath(),n.moveTo(u[0],u[1])),n.setLineDash(d.pattern),n.lineDashOffset=0,d.action==h?n[d.action](d.x0,d.y0,d.x,d.y):d.action=="bezierCurveTo"?n[d.action](d.x0,d.y0,d.x1,d.y1,d.x,d.y):n[d.action](d.x,d.y),u=[d.x,d.y];n[l.strokeOrFill=="fill"?"fill":"stroke"](),n.closePath(),n.restore(),this.drawText(n,l),n.lineWidth=1}n.lineWidth=i,n.fillStyle=a,n.strokeStyle=o,n.globalAlpha=c},BOTTOM_TO_TOP:t,TOP_TO_BOTTOM:"CW"},!0)};function fo(E,e){(e==null||e>E.length)&&(e=E.length);for(var t=0,s=Array(e);t<e;t++)s[t]=E[t];return s}No=E=>{var e;e=E.CIQ,e.Renderer=function(){},e.Renderer.produce=function(t,s){var n,r,i;if(n="l",n+="i",n+="n",n+="e",r=null,t){for(var a in e.Renderer)if(i=e.Renderer[a],i.requestNew&&(r=i.requestNew(t.split("_"),s)),r)return r}return s.type=n,new e.Renderer.Lines({params:s})},e.Renderer.colorFunctions={},e.Renderer.registerColorFunction=function(t,s){e.Renderer.colorFunctions[t]=s},e.Renderer.unregisterColorFunction=function(t){delete e.Renderer.colorFunctions[t]},e.Renderer.prototype.init={},e.Renderer.prototype.adjustYAxis=function(){},e.Renderer.prototype.draw=function(){},e.Renderer.prototype.drawIndividualSeries=function(t,s){},e.Renderer.prototype.construct=function(t){var s;t||(t={}),s=t.params?t.params:{},this.init&&e.ensureDefaults(s,this.init),s.name||(s.name=e.uniqueID()),s.heightPercentage||(s.heightPercentage=.7),s.opacity||(s.opacity=1),s.highlightable!==!1&&(s.highlightable=!0),s.panel||(s.panel="chart"),ue.W16(),s.yAxis&&(s.yAxis=new e.ChartEngine.YAxis(s.yAxis),s.yAxis.name||(s.yAxis.name=s.name)),this.cb=t.callback,this.params=s,this.seriesParams=[],this.caches={},this.colors={}},e.Renderer.prototype.attachSeries=function(t,s){var n=ue,r,i,a,o,c,l,u,h,d,f,A,p,g,m,b,C;if(r="ob",n.W16(),r+="j",r+="e",r+="ct",i="a",i+="ut",i+="o",a="a",a+="uto",o=this.stx,!o)return this;if(c=o.chart.series[t],c||(c={parameters:{}}),l=this.params,u=e.clone(c.parameters),h={id:t,chartType:l.type,display:u.display,border_color_up:l.defaultBorders?a:null,fill_color_up:u.color,opacity_up:l.opacity,border_color_down:l.defaultBorders?i:null,fill_color_down:u.color,opacity_down:l.opacity,color:u.color,symbol:u.symbol,symbolObject:e.clone(u.symbolObject)},typeof s=="string")h.color=h.fill_color_down=h.fill_color_up=s;else if(typeof s==r){for(var F in s)h[F]=s[F];d=h.color,f=h.border_color,d&&(h.fill_color_up||(h.fill_color_up=d),h.fill_color_down||(h.fill_color_down=d),h.fill_color_even||(h.fill_color_even=d)),f&&(h.border_color_up||(h.border_color_up=f),h.border_color_down||(h.border_color_down=f),h.border_color_even||(h.border_color_even=f))}for(!h.field&&c.parameters.periodicParams&&(h.field="_periodic_Close"),h.symbol&&h.field!=h.symbol&&(h.subField=h.field,h.field=h.symbol),h.id||(h.id=e.uniqueID()),A=0;A<this.seriesParams.length;++A)if(this.seriesParams[A].id===h.id){this.removeSeries(h.id,!0);break}return this.seriesParams.splice(A,0,h),h.fill_color_up!=h.fill_color_down?(p=" d",p+="n",g=" ",g+="u",g+="p",m=" ",m+="u",m+="p",n.M$m(12),this.colors[n.v7v(t,m)]={color:h.fill_color_up,opacity:h.opacity_up,display:h.display?h.display+" up":t+g},n.z_m(12),this.colors[n.v7v(t,p)]={color:h.fill_color_down,opacity:h.opacity_down,display:h.display?h.display+" down":t+" down"}):this.colors[t]={color:h.fill_color_up,opacity:h.opacity_up,display:h.display?h.display:t},b=l.panel,o.panels[b]?l.yAxis?(l.yAxis=o.addYAxis(o.panels[b],l.yAxis),l.yAxis.needsInitialPadding=!0,u.yAxis=l.yAxis,o.resizeChart()):h.yAxis&&(l.yAxis=h.yAxis):(C=l.yAxis,C||(C=new e.ChartEngine.YAxis,C.needsInitialPadding=!0),C.name=b,o.createPanel(b,b,null,null,C)),this},e.Renderer.prototype.removeSeries=function(t,s){var n=ue,r,i,a,o,c,l,u,h,d,f,A,p,g;r=null,i=!1,a=this.stx,o=a.chart;for(var m in o.seriesRenderers){c=o.seriesRenderers[m];for(var b=0;b<c.seriesParams.length;b++)l=c.seriesParams[b],l.id==t&&this===c?r=b:l.isComparison&&l.panel==o.panel.name&&(!l.yAxis||l.yAxis==o.yAxis)&&(i=!0)}r!==null&&(o.forcePercentComparison&&!i&&this.seriesParams[r].isComparison&&a.layout.chartScale!="linear"&&a.setChartScale(),this.seriesParams.splice(r,1)),u=908104908,h=1616897083,d=2;for(var C=1;n.D8X(C.toString(),C.toString().length,37122)!==u;C++)f=" ",f+="u",f+="p",n.M$m(25),this.colors[n.v7v(t," up")],n.z_m(26),-this.colors[n.v7v(f,t)],-this.colors[t],n.z_m(21),d+=n.J1m("2",32);if(n.S1v(d.toString(),d.toString().length,28560)!==h&&(A=" ",A+="d",A+="n",n.M$m(12),delete this.colors[n.J1m(t," up")],n.M$m(12),delete this.colors[n.v7v(t,A)],delete this.colors[t]),!s){for(var F in o.seriesRenderers){g=o.seriesRenderers[F];for(var w=0;w<g.seriesParams.length;w++){if(g.seriesParams[w].id==t){p=!0;break}p=!1}if(p)break}(p===!1||r!==null)&&a.deleteSeries&&a.deleteSeries(t,o)}return a.deleteYAxisIfUnused(a.panels[this.params.panel],this.params.yAxis),a.resizeChart(),!a.currentlyImporting&&a.masterData&&a.drawWithRange(),this},e.Renderer.prototype.modifyRenderer=function(t){var s,n,r,i;this.params,ue.A92(),s=this.stx;for(var a in t)switch(n="sty",n+="l",n+="e",r="base",r+="l",r+="i",r+="ne",i=t[a],a){case r:i?(typeof i=="object"&&(this.params.baseline=e.ensureDefaults(i,e.ChartEngine.Chart.prototype.baseline)),s.registerBaselineToHelper(this)):s.removeBaselineFromHelper(this);break;case"type":this.params.type=i;break;case n:this.params.style=i;break}},e.Renderer.prototype.getDependents=function(t){var s,n,r,i;ue.A92(),s=this,n=[];for(var a in t.chart.seriesRenderers)r=t.chart.seriesRenderers[a],r.params.dependentOf==this.params.name&&n.push(r);i=function(){var c;c=t.layout.studies[o],s.seriesParams.forEach(l=>{(c.inputs.Field==l.field||c.inputs.Series==l.field)&&n.push(c)})};for(var o in t.layout.studies)i();return n},e.Renderer.prototype.undraggable=function(t){return this==t.mainSeriesRenderer?!0:this.params.dependentOf==t.mainSeriesRenderer.params.name},e.Renderer.prototype.removeAllSeries=function(t){var s;if(t||this===this.stx.mainSeriesRenderer){s=[];for(var n=0;n<this.seriesParams.length;n++)s.push(this.seriesParams[n].id);for(var r=0;r<s.length;r++)this.removeSeries(s[r])}return this.seriesParams=[],this.colors={},this.stx.deleteYAxisIfUnused(this.stx.panels[this.params.panel],this.params.yAxis),this.stx.resizeChart(),this},e.Renderer.prototype.getYAxis=function(t){var s,n;if(this.params)if(this.params.yAxis)s=this.params.yAxis;else{if(n=t.panels[this.params.panel],!n)return!1;s=n.yAxis}else s=t.chart.panel.yAxis;return s},e.Renderer.prototype.ready=function(){return this.stx.createDataSet(),this.stx.drawWithRange(),this},e.Renderer.Lines=function(t){var s,n,r,i,a;if(this.construct(t),s=this.params,s.type||(s.type="line"),!s.style)switch(n="mount",n+="ain",r="stx_ba",r+="seline_delta_",r+="mountain",s.type){case n:s.baseline?s.style=r:s.colored?s.style="stx_colored_mountain_chart":s.style="stx_mountain_chart";break;default:i="stx_lin",i+="e_chart",s.style=i}this.supportsAnimation=!0,s.type=="wave"||s.type=="channel"?(s.step=s.vertex=s.baseline=s.colored=!1,this.highLowBars=this.barsHaveWidth=!0,this.supportsAnimation=!1):s.type=="step"&&(s.step=!0),a=s.baseline,a&&typeof a=="object"&&e.ensureDefaults(s.baseline,e.ChartEngine.Chart.prototype.baseline)},e.inheritsFrom(e.Renderer.Lines,e.Renderer,!1),e.Renderer.Lines.requestNew=function(t,s){var n,r,i,a,o,c,l,u,h,d,f,A,p,g;n=null,r=s.step,i=s.colored,a=s.baseline,o=s.vertex,c=s.centered;for(var m=0;m<t.length;m++)switch(l="n",l+="on",l+="ce",l+="ntered",u="c",u+="ol",u+="or",u+="ed",h="b",h+="as",h+="eline",d="mo",d+="u",d+="nt",d+="ain",f=t[m],f){case"line":case d:case"wave":case"channel":n=f;break;case h:a=a||!0;break;case u:i=!0;break;case"step":r=!0;break;case"vertex":o=!0;break;case"delta":break;case l:c=!1;break;default:return null}if(n===null&&!a&&!r)return null;ue.W16(),A=561007612,p=1318985791,g=2;for(var b=1;ue.D8X(b.toString(),b.toString().length,72570)!==A;b++)return new e.Renderer.Lines({params:e.extend(s,{type:n,step:r,colored:i,baseline:a,centered:c,vertex:o})});if(ue.D8X(g.toString(),g.toString().length,19438)!==p)return new e.Renderer.Lines({params:e.extend(s,{type:n,step:r,colored:i,baseline:a,centered:c,vertex:o})})},e.Renderer.Lines.prototype.draw=function(){var t,s,n,r,i,a,o,c,l,u,h,d,f;t=this.stx,s=this.stx.panels[this.params.panel],n=s.chart,r={},a=this.seriesParams;function A(g){ue.A92();var m,b,C;return m=g.fill_color_up||t.getCanvasColor("stx_line_up"),b=g.fill_color_down||t.getCanvasColor("stx_line_down"),C=g.color||t.getCanvasColor("stx_line_chart"),function(F,w,U){return!w.iqPrevClose&&w.iqPrevClose!==0?C:w.Close>w.iqPrevClose?m:w.Close<w.iqPrevClose?b:(ue.A92(),C)}}for(o=this.params.colorFunction,i="0"<<64;i<a.length;i++){if(c=a[i],this.params.colored){l="_colo",l+="r",l+="_do",l+="wn",u=["_color_up",l,"_color"];for(var p=0;p<u.length;p++)h="b",h+="ord",h+="e",h+="r",d=c[h+u[p]],d&&d!="auto"&&(c["fill"+u[p]]=d);o=A(c),this.params.colorFunction=o}f={},n.series[c.id]&&(f=e.clone(n.series[c.id].parameters)),r[c.id]={parameters:e.extend(e.extend(f,this.params),c),yValueCache:this.caches[c.id]},this==t.mainSeriesRenderer&&n.customChart&&n.customChart.colorFunction&&(r[c.id].parameters.colorFunction=n.customChart.colorFunction)}t.drawSeries(n,r,this.params.yAxis,this);for(i in r)this.caches[i]=r[i].yValueCache},e.Renderer.Lines.prototype.drawIndividualSeries=function(t,s){var n,r,i,a,o,c,l;if(n="w",n+="a",n+="ve",!s.invalid&&(r=this.stx,i=t.context,a=null,o=s.colorFunction,c=r.panels[s.panel]||t.panel,!(typeof o=="string"&&(o=e.Renderer.colorFunctions[o],!o))))return s.vertex&&(l="beve",l+="l",i.save(),i.lineJoin=l),s.type==n?a=r.drawWaveChart(c,s):s.baseline?(a=r.drawBaselineChart(c,s),r.positionBaselineHandle(this)):s.type=="mountain"?(s.returnObject=!0,a=r.drawMountainChart(c,s,o)):s.type=="channel"?(s.returnObject=!0,a=r.drawChannelChart(c,o,s)):(s.returnObject=!0,a=r.drawLineChart(c,s.style,o,s)),s.vertex&&(r.scatter(c,{yAxis:s.yAxis,field:s.symbol||s.field,subField:s.subField,symbol:s.symbol,color:s.vertex_color,highlight:s.highlight}),i.restore()),a},e.Renderer.OHLC=function(t){var s;ue.W16(),this.construct(t),s=this.params,s.type||(s.type="candle"),this.highLowBars=this.barsHaveWidth=this.standaloneBars=!0,s.histogram&&(s.type="candle",this.highLowBars=!1,s.volume=s.hollow=!1),s.type=="bar"&&(s.volume=s.hollow=s.histogram=!1),s.type=="candle"&&(s.hlc=s.colored=!1),s.volume&&(s.hollow=!0)},e.inheritsFrom(e.Renderer.OHLC,e.Renderer,!1),e.Renderer.OHLC.requestNew=function(t,s){var n,r,i;n=null,r=s.histogram;for(var a=0;a<t.length;a++)switch(i=t[a],i){case"candle":n=i;break;case"histogram":r=!0,n="candle";break;default:return null}return n===null?null:new e.Renderer.OHLC({params:e.extend(s,{type:n,histogram:r})})},e.Renderer.OHLC.getChartParts=function(t,s){var n,r,i,a,o,c,l,u,h,d,f,A,p,g;return n="fill_col",n+="or_",n+="d",n+="own",r="stx_",r+="candle_down",i="c",i+="an",i+="dl",i+="e",a="bo",a+="rder_color_up",o="can",o+="dl",o+="e",c="stx_can",c+="d",c+="le_shadow_d",c+="own",l="sh",l+="ado",l+="w",u="cand",u+="le",h="histo",h+="gram",d="b",d+="ord",d+="er_color_",d+="up",f="fill_color",f+="_up",A=8,p=16,ue.M$m(2),g=ue.v7v("32",0),[{type:"histogram",drawType:"histogram",style:"stx_histogram_up",condition:A,fill:f,border:d,useColorInMap:!0,useBorderStyleProp:!0},{type:"histogram",drawType:"histogram",style:"stx_histogram_down",condition:p,fill:"fill_color_down",border:"border_color_down",useColorInMap:!0,useBorderStyleProp:!0},{type:h,drawType:"histogram",style:"stx_histogram_even",condition:g,fill:"fill_color_even",border:"border_color_even",skipIfPass:!0,useColorInMap:!0,useBorderStyleProp:!0},{type:u,drawType:"shadow",style:"stx_candle_shadow",border:"border_color_up"},{type:"candle",drawType:"shadow",style:"stx_candle_shadow_up",condition:A,border:"border_color_up"},{type:"candle",drawType:l,style:c,condition:p,border:"border_color_down"},{type:"candle",drawType:"shadow",style:"stx_candle_shadow_even",condition:g,border:"border_color_even",skipIfPass:!0},{type:"candle",drawType:o,style:"stx_candle_up",condition:A,fill:"fill_color_up",border:a,useColorInMap:!0,useBorderStyleProp:!0},{type:"candle",drawType:i,style:r,condition:p,fill:n,border:"border_color_down",useColorInMap:!0,useBorderStyleProp:!0}]},e.Renderer.OHLC.prototype.draw=function(){var t,s,n,r,i,a,o,c;for(t=this.stx,s=this.stx.panels[this.params.panel],n=s.chart,r={},a=this.seriesParams,i=0;i<a.length;i++)o=a[i],c={},n.series[o.id]&&(c=e.clone(n.series[o.id].parameters)),r[o.id]={parameters:e.extend(e.extend(c,this.params),o)},this==t.mainSeriesRenderer&&n.customChart&&n.customChart.colorFunction&&(r[o.id].parameters.colorFunction=n.customChart.colorFunction);t.drawSeries(n,r,this.params.yAxis,this);for(i in r)r[i].yValueCache&&(this.caches[i]=r[i].yValueCache)},e.Renderer.OHLC.prototype.getPixelWidth=function(){var t,s,n;return t=this.stx,s=t.layout,n=Math.floor(s.candleWidth*t.candleWidthPercent),n%2==="0"<<0&&(n+=1,n>s.candleWidth&&(n-=2)),ue.W16(),n<.5&&(n=.5),n},e.Renderer.OHLC.prototype.getColor=function(t,s,n,r,i,a){var o,c,l,u,h;return o=a||n.color,c=this.params.yAxis||s.yAxis,r&&(o=a||n.borderLeftColor||n["border-left-color"],!o)?null:i?(ue.W16(),l=t.pixelFromTransformedValue(c.highValue,s,c),isNaN(l)&&(l=0),u=n.backgroundColor,o&&!e.isTransparent(o)?(ue.M$m(21),h=t.chart.context.createLinearGradient(ue.v7v("0",0),l,0,2*c[c.flipped?"top":"bottom"]-l),h.addColorStop(0,o),h.addColorStop(1,u),h):u):o},e.Renderer.OHLC.prototype.drawIndividualSeries=function(t,s){var n,r,i,a,o,c,l,u,h,d,f,A,p,g,m,b,C,F,w,U,B,k,y,S,T,_,L,H,P,N,v,x,M,D,Q,q;if(n="s",n+="t",n+="rin",n+="g",!s.invalid){r=-1383845338,i=-1369734842,a=2;for(var O=1;ue.S1v(O.toString(),O.toString().length,64426)!==r;O++)o=this.stx,c=t.context,l=s.colorFunction,u=o.panels[s.panel]&&t.panel,a+=2;if(ue.D8X(a.toString(),a.toString().length,"32111"*1)!==i&&(o=this.stx,c=t.context,l=s.colorFunction,u=o.panels[s.panel]||t.panel),o=this.stx,c=t.context,l=s.colorFunction,u=o.panels[s.panel]||t.panel,!(typeof l==n&&(l=e.Renderer.colorFunctions[l],!l))){if(h=this.getPixelWidth(),d=o.layout.candleWidth-h<=2&&h<=3,t.state.chartType||(t.state.chartType={}),f=t.state.chartType.pass={},ue.A92(),A=o.colorByCandleDirection,s.colorBasis&&(A=s.colorBasis=="open"),p=s.histogram,g=s.type,m=s.hollow,b=o.noWicksOnCandles[g],o.startClip(u.name),C=null,F={colors:[],cache:[]},w=[],l)U="b",U+="a",U+="r",B={isHistogram:p,field:s.field,yAxis:s.yAxis,isVolume:s.volume,highlight:s.highlight,pixelWidth:this.getPixelWidth()},!p&&g==U?(B.type=s.hlc?"hlc":"bar",F=o.drawBarChart(u,"stx_bar_chart",l,B)):(g=="candle"&&!b&&o.drawShadows(u,l,B),F=o.drawCandles(u,l,B),B.isOutline=!0,(m||!d)&&o.drawCandles(u,l,B));else{k=p&&s.gradient!==!1,y=e.Renderer.OHLC.getChartParts(s.style,A);for(var R=0;R<y.length;R++)if(S="ba",S+="r",T="c",T+="and",T+="l",T+="e",_=y[R],!(_.skipIfPass&&!f.even)){if(p){if(_.type!="histogram")continue}else if(g=="bar"){if(_.type!="bar")continue;if(s.colored&&!_.condition)continue;if(!s.colored&&_.condition)continue}else if(m){if(_.type!="hollow")continue;if(_.drawType=="shadow"&&b)continue}else if(g=="candle"){if(L="s",L+="ha",L+="d",L+="ow",_.type!="candle")continue;if(_.drawType==L){if(b)continue;if(H=s.border_color_up||o.getCanvasColor("stx_candle_shadow_up"),P=s.border_color_down||o.getCanvasColor("stx_candle_shadow_down"),N=s.border_color_even||o.getCanvasColor("stx_candle_shadow_even"),!e.colorsEqual(H,P)||!e.colorsEqual(H,N)||!e.colorsEqual(H,o.defaultColor)){if(!_.condition)continue}else if(_.condition)continue}}else continue;v=o.canvasStyle(_.style),x=this.getColor(o,u,v,!1,!1,s[_.fill]),M=this.getColor(o,u,v,!1,k,s[_.fill]),D=this.getColor(o,u,v,_.useBorderStyleProp&&!d,k,s[_.border]),_.drawType==T&&(Q="ho",Q+="l",Q+="low",_.type==Q?(!e.isTransparent(M)&&e.colorsEqual(D,M)&&(D=_.useColorInMap?"transparent":M),_.useColorInMap||(M="transparent")):_.type=="candle"&&d&&(e.isTransparent(M)?M=D:D=M)),c.globalAlpha=s.opacity,w.push(o.drawBarTypeChartInner({fillColor:M,borderColor:D,condition:_.condition,style:_.style,type:g==S&&s.hlc?"hlc":_.drawType,panel:u,field:s.field,yAxis:s.yAxis,volume:s.volume&&s.hollow,highlight:s.highlight,pixelWidth:h})),C||(C={}),_.useColorInMap&&(C[x]=1)}}o.endClip();for(var V in C)(!s.hollow||!e.equals(V,o.containerColor))&&F.colors.push(V);for(V=0;V<w.length;V++)for(var K=0;K<w[V].cache.length;K++)q=w[V].cache[K],(q||q===0)&&(F.cache[K]=q);return F}}},e.Renderer.Candles=function(t){var s;this.construct(t),s=this.params,s.type="candle",this.highLowBars=this.barsHaveWidth=this.standaloneBars=!0,s.hlc=s.colored=s.histogram=!1,s.volume&&(s.hollow=!0)},e.inheritsFrom(e.Renderer.Candles,e.Renderer.OHLC,!1),e.Renderer.SimpleHistogram=function(t){var s,n;s="c",s+="and",s+="le",this.construct(t),n=this.params,n.type=s,ue.W16(),n.histogram=!0,this.barsHaveWidth=this.standaloneBars=!0,this.highLowBars=!1,n.hlc=n.colored=n.hollow=n.volume=!1},e.inheritsFrom(e.Renderer.SimpleHistogram,e.Renderer.Candles,!1)};qo=E=>{var e=ue,t;t=E.CIQ,t.capitalize=function(s){if(!s)return"";e.M$m(67),e.W16();var n=e.J1m(13,17,43,14);return s.charAt(0).toUpperCase()+s.slice(n)},e.W16(),t.camelCaseRegExp=/-([a-z])/g,t.makeCamelCase=function(s){return e.W16(),s.replace(t.camelCaseRegExp,function(n){return e.A92(),n[1].toUpperCase()})},t.uniqueID=function(s){var n,r,i,a,o,c,l,u,h,d,f,A,p;return n="unde",n+="fi",n+="ned",r="ran",r+="dom",i=typeof crypto<"u"&&typeof crypto.getRandomValues<"u",a=typeof crypto!=n&&typeof crypto.randomUUID<"u",s?a?crypto.randomUUID():(o=g=>(e.W16(),g.toString(16).padStart(2,0)),c=g=>{var m,b;return m="undefi",m+="ned",b=new Date().getTime(),typeof performance!==m&&typeof performance.now=="function"&&(b+=performance.now()),b=Math.pow(b,3),C=>new Uint8Array(C).map(()=>{var F;e.z_m(102),e.A92();var w=e.J1m(254,8,4,3,5744);e.z_m(55);var U=e.J1m(270,1,3,5,238);return F=(b+Math[r]()*w)%U|0,e.z_m(26),b=Math.floor(e.v7v(256,b)),F})},l=g=>(e.A92(),crypto.getRandomValues(new Uint8Array(g))),u=i?l:c(),h=g=>`4${g.slice(1)}`,d=g=>`${Number(g[0]&3|"0x8"^0).toString(16)}${g.slice(1)}`,f=g=>{e.A92();var m;return m=u(g),[...m].map(o).join("")},`${f(4)}-${f(2)}-${h(f(2))}-${d(f(2))}-${f(6)}`):(A=new Date,p=A.getTime().toString(36),e.W16(),i?p+=crypto.getRandomValues(new Uint8Array([1])).toString(36):p+=Math.floor(Math[r]()*Math.pow("36">>0,2)).toString(36),p.toUpperCase())}};Oo=E=>{};Ro=E=>{var e;e=E.CIQ,e.getHostName=function(t){try{return t.match(/:\/\/(.[^/]+)/)[1]}catch{return""}},e.qs=function(t){var s,n,r,i;s={},t||(t=window.location.search.substring(1)),n=t.split("&");for(var a=0;a<n.length;a++)r=n[a].indexOf("="),r>0?(i=n[a].substring(0,r),ue.z_m(19),s[i]=n[a].substring(ue.v7v("1",r))):(i=n[a],s[i]=null);return s},e.postAjax=function(t,s,n,r,i){var a,o,c,l,u,h,d,f,A,p;a="Con",a+="t",a+="ent-Type",o="P",o+="OS";function g(b){var C,F,w,U;if(C={},!!t.responseHeaders){ue.W16(),F=b.getAllResponseHeaders(),w=F.split(`
`);for(var B=0;B<w.length;B++){for(U=w[B].split(":");U["1">>64]&&U["1"|1].charAt(0)==" ";)U[1]=U[1].substring(1);U[0]!==""&&(C[U.shift()]=U.join(":"))}return C}}if(o+="T",typeof t=="string"&&(t={url:t,payload:s,cb:n,contentType:r,noEpoch:i,method:null,responseHeaders:!1}),c=t.url,l=t.cb,u=t.payload,l||(l=function(){}),!t.ungovernable&&e.Extras&&e.Extras.RequestLimiter&&e.Extras.RequestLimiter.hitRequestLimit(c)){l(429,null,{});return}if(h=new XMLHttpRequest,!h)return!1;if(d=new Date,t.noEpoch||(f="&c",f+="iqran",f+="dom=",c.indexOf("?")==-1?c+="?ciqrandom="+d.getTime():c+=f+d.getTime()),A=t.method,p=t.headers,A||(A=u?o:"GET"),h.open(A,c,!0),t.contentType||(t.contentType="application/x-www-form-urlencoded"),u&&h.setRequestHeader(a,t.contentType),p)for(var m in p)h.setRequestHeader(m,p[m]);t.timeout&&(h.timeout=t.timeout),h.ontimeout=function(){l(408,null,{})},h.onload=function(){this.status===0?this.status="0":this.status||(this.status=200),l(this.status,this.responseText,g(this))},h.onerror=function(){ue.W16(),l("0",null,{})};try{h.send(u)}catch(b){l("0",b,{})}return!0},e.loadUI=function(t,s,n){var r=ue,i,a,o,c,l,u,h,d;if((!s||typeof s=="function")&&(n=s,s=document.body),i=s.ownerDocument,r.z_m(40),a=i.querySelector(r.v7v('iframe[original-url="',t,'"]')),o=function(){var C,F,w,U,B;C=null;try{C=this.contentDocument}catch(y){return n(y)}if(C&&!C.title){F="d",F+="i",F+="v",w=C.body.innerHTML,U=document.createElement(F),e.innerHTML(U,w);for(var k="0"|0;k<U.children.length;k++)B=U.children[k].cloneNode(!0),s.appendChild(B);n(null)}else n(new Error("iFrame not found or document has a title"))},a){c="complet",c+="e",l=null;try{l=a.contentDocument}catch(C){return n(C)}l.readyState===c&&l.location&&l.location.href!=="about:blank"?o.call(a):(u="l",u+="o",u+="ad",a.addEventListener(u,o))}else{h="o",h+="riginal-ur",h+="l",d="i",d+="f",d+="ram",d+="e",a=document.createElement(d),a.setAttribute(h,t),r.M$m(103);var f=r.J1m(12,3,0,9);r.M$m(12);var A=r.J1m(8679,5);r.z_m(49),r.J1m(15,6837,12,14),r.z_m(36);var p=r.v7v(59686,7,412376);r.M$m(43);var g=r.J1m(3900,19,299);r.z_m(36),r.v7v(4842,6,24222),r.M$m(70);var m=r.v7v(1324,8,21,3);r.z_m(104);var b=r.v7v(5,32,6,12,7921);a.src=t+(t.indexOf("?")===f?A>=p?"?":"X":g<m?b:"&")+e.uniqueID(),a.hidden=!0,a.addEventListener("load",o),i.body.appendChild(a)}},e.loadScript=function(t,s,n,r){var i=ue,a,o,c,l,u,h,d,f;if(a="s",a+="c",a+="rip",a+="t",o="cq-na",o+="me",c="scr",c+="ipt[cq-name='",e.loadedScripts||(e.loadedScripts={}),e.loadedScripts[t]){s&&s();return}if(l=r||document,i.z_m(40),h=l.querySelector(i.v7v(c,t,"']")),h||(u=!0,h=document.createElement("script"),n?(h.type="module",h.crossOrigin="use-credentials"):h.async=!0),h.cqCallbacks||(h.cqCallbacks=[]),s&&h.cqCallbacks.push(s),!!u){if(h.onload=()=>{for(e.loadedScripts[t]=!0,i.A92();h.cqCallbacks.length;)h.cqCallbacks.shift()()},h.setAttribute(o,t),d=t,d.indexOf("?")==-1){i.M$m(12),i.J1m(4433,4433),i.z_m(2);var A=i.v7v(4102,2);d=d+(166.64>A?959.59:"?")+Date.now()}else d=d+"&"+Date.now();h.src=d,f=l.getElementsByTagName(a)[0],f?f.parentNode.insertBefore(h,f.nextSibling):l.body.append(h)}},e.loadStylesheet=function(t,s,n){var r=ue,i,a,o,c,l,u,h,d,f,A,p;if(i="lin",i+="k",a="'",a+="]",o="l",o+="ink[cq-name='",e.loadedStylesheets||(e.loadedStylesheets={}),e.loadedStylesheets[t]){s&&s();return}if(c=n||document,r.z_m(40),u=c.querySelector(r.v7v(o,t,a)),!u){h="scr",h+="een",d="s",d+="tyle",d+="she",d+="et",f="l",f+="i",f+="n",f+="k",l=!0,u=document.createElement(f),u.rel=d,u.type="text/css",u.media=h,r.M$m(68),r.v7v(1730,1795,12,359),r.z_m(105);var g=r.J1m(299,16,4,0,15);r.z_m(106);var m=r.v7v(1,17,141331,19,7852);r.M$m(12),r.J1m(6540,5),r.M$m(4);var b=r.J1m(7013,10,3,1);r.M$m(94);var C=r.J1m(13,14,8,168,7);r.z_m(64);var F=r.J1m(2,4966,2498);r.z_m(52),r.v7v(67,3353,17,3),r.M$m(2);var w=r.v7v(9037,7);r.M$m(2);var U=r.v7v(46,10);r.M$m(12);var B=r.J1m(218,3932);r.M$m(107);var k=r.v7v(2297,12,13,20,548957);r.z_m(7);var y=r.J1m(1663,14,8,21500);u.href=t+(t.indexOf("?")===g?m!=b?"118.53"*C===F?"0xf71"^0:"?":"m":w>=327.7?("1206"|U)!=475.42?"7343">>0==B?k:"&":898.85:y)+Date.now(),u.setAttribute("cq-name",t)}if(u.cqCallbacks||(u.cqCallbacks=[]),s&&u.cqCallbacks.push(s),!!l){u.onload=()=>{if(!e.loadedStylesheets[t])for(e.loadedStylesheets[t]=!0,c.dispatchEvent(new CustomEvent("stylesheetload",{detail:{link:this}}));u.cqCallbacks.length;)u.cqCallbacks.shift()()},A=c.getElementsByTagName(i),r.z_m(13);var S=r.v7v(3,2);p=A[A.length-S],p?p.parentNode.insertBefore(u,p.nextSibling):c.head.append(u)}},e.loadWidget=function(t,s,n,r){var i=ue,a,o;a="functio",a+="n",(!s||typeof s==a)&&(n=s,s=document.body),o=s.ownerDocument,i.M$m(12),e.loadStylesheet(i.J1m(t,".css"),function(){i.z_m(12),e.loadUI(i.v7v(t,".html"),s,function(c){c?n(c):(i.z_m(12),e.loadScript(i.v7v(t,".js"),n,r,o))})},o)},e.waitForPlugins=function(t,s,n){ue.A92();var r,i,a,o;if(r=0,i=t.length,!i){s();return}for(var c=0;c<i;c++)a="cq-"+t[c],o=(n||document).getElementsByTagName(a)[0],o&&o.hasAttribute("loaded")&&r++;if(i!==r)return setTimeout(function(){e.waitForPlugins(t,s,n)},0);s()},e.addInternalStylesheet=function(t,s,n){var r,i,a,o,c;r="s",r+="tyle",i='"',i+="]",a="sty",a+="le[path",a+='="',o="s",o+="tri",o+="n",o+="g",t&&(ue.A92(),t.default&&(t=t.default),typeof t===o&&(s&&(n||document).querySelector(a+s+i)||(c=document.createElement(r),c.setAttribute("type","text/css"),c.setAttribute("path",s||""),c.innerText=t,(n||document).head.appendChild(c))))}};zo=E=>{var e=ue,t;e.W16(),t=E.CIQ,t.ChartEngine.prototype.registerHTMLElements=function(){var s,n,r,i,a,o,c,l,u,h,d;s=this.chart.container,s.setAttribute("interactable","");for(var f in t.ChartEngine.htmlControls)if(n="und",n+="efined",typeof this.chart[f]>"u"&&typeof this.controls[f]==n){if(!this.allowZoom&&f=="chartControls")continue;if(e.M$m(12),r=s.querySelector(e.J1m(".",f)),r)this.chart[f]=r,this.controls[f]=r;else{if(i=t.ChartEngine.htmlControls[f],!i)continue;a=document.createElement("DIV"),a.innerHTML=i.replace(/[\t\n\r]/gm,""),r=a.firstChild,s.appendChild(r),this.chart[f]=r,this.controls[f]=r,r.classList.add(f)}this.makeModal(r)}o=this.controls,c=o.chartControls,l=o.home,o.yaxisMenu,c&&(u=".stx-zoom",u+="-out",h=c.querySelector(".stx-zoom-in"),d=c.querySelector(u),t.safeClickTouch(h,A=>{if(!this.allowZoom||this.activeDrawing&&!this.allowDrawingZoom){A.stopPropagation();return}this.zoomIn(A),A.stopPropagation()},{keyboardClick:!0}),t.safeClickTouch(d,A=>{if(!this.allowZoom||this.activeDrawing&&!this.allowDrawingZoom){A.stopPropagation();return}this.zoomOut(A),A.stopPropagation()},{keyboardClick:!0})),l&&t.safeClickTouch(l,A=>{if(!this.isHistoricalMode()){this.home({animate:!0});return}e.W16(),delete this.layout.range,this.isHistoricalModeSet=!1,this.loadChart(this.chart.symbol,function(){this.home({animate:!1})})},{keyboardClick:!0}),this.allowDragControls&&this.allowDragControls()},t.ChartEngine.prototype.home=function(s){var n,r,i,a,o,c,l;this.swipe.amplitude=0,n=this.layout,typeof s!="object"&&(s={maintainWhitespace:s});function u(f,A,p){return e.A92(),function(){h(f),A.scroll=p,f.draw()}}typeof s.maintainWhitespace>"u"&&(s.maintainWhitespace=!0),this.chart.draggingControls=null,this.cancelTouchSingleClick=!0;function h(f){e.W16();var A;for(var p in f.panels){A=f.panels[p].yaxisLHS.concat(f.panels[p].yaxisRHS);for(var g=0;g<A.length;g++)A[g].lockScale||f.calculateYAxisMargins(A[g])}f.resetDynamicYAxis()}if(!this.chart.dataSet||!this.chart.dataSet.length){this.draw();return}this.micropixels=0,r=Math.floor(this.chart.width/n.candleWidth);for(var d in this.charts)if(i=this.charts[d],!(s.chart&&s.chart!=i)){for(a=0,s.maintainWhitespace&&this.preferences.whitespace>="0"<<0&&(a=this.preferences.whitespace),(s.whitespace||s.whitespace===0)&&(a=s.whitespace),o=this.getLabelOffsetInPixels(i,n.chartType),o>a&&(a=o),c=Math.min(r,i.dataSet.length),this.chart.allowScrollPast&&(c=r),this.micropixels=this.chart.width-c*n.candleWidth-a,this.preferences.whitespace=a;this.micropixels>n.candleWidth;)c++,this.micropixels-=n.candleWidth;for(;this.micropixels<0;)c--,this.micropixels+=n.candleWidth;this.micropixels-=n.candleWidth,c++,this.mainSeriesRenderer.standaloneBars||(this.micropixels+=n.candleWidth/2),s.animate?(l=this,this.scrollTo(i,c,u(l,i,c))):(i.scroll=c,h(this))}this.draw()},t.ChartEngine.prototype.headsUpHR=function(s){var n,r,i,a,o,c;n="h";function l(u){e.W16(),t.efficientDOMUpdate(a,"innerHTML",u)}e.W16(),n+="eadsUpHR",!this.runPrepend(n,arguments)&&(r=this.currentPanel,r&&(i=r.chart,(!s||!s.dateOnly)&&this.updateFloatHRLabel(r),a=this.controls.floatDate,a&&!i.xAxis.noDraw&&(o=this.barFromPixel(this.cx),c=i.xaxis[o],c&&c.DT?l(t.displayableDate(this,i,c.DT)):c&&c.index?l(c.index):l("")),this.runAppend("headsUpHR",arguments)))},t.ChartEngine.prototype.modalBegin=function(){var s,n;s="m",s+="odal",n="m",n+="o",n+="d",n+="al",this.openDialog||(this.openDialog=[]),this.openDialog.includes(n)||this.openDialog.push(s),this.undisplayCrosshairs()},t.ChartEngine.prototype.modalEnd=function(){this.cancelTouchSingleClick=!0,this.openDialog&&(this.openDialog=this.openDialog.filter(s=>(e.M$m(75),e.J1m(s,"modal"))),this.openDialog.length||(this.openDialog="")),this.doDisplayCrosshairs()},t.ChartEngine.prototype.makeModal=function(s){var n,r;s.isModal||(n=()=>this.modalBegin(),r=()=>this.modalEnd(),["touchstart","mouseover"].forEach(i=>s.addEventListener(i,n)),["touchend","mouseout"].forEach(i=>(e.W16(),s.addEventListener(i,r))),s.isModal=[n,r])},t.ChartEngine.prototype.undoModal=function(s){var n,r,i;s.isModal&&(n=La(s.isModal,2),r=n[0],e.z_m(22),i=n[e.J1m(32,"1")],["touchstart","mouseover"].forEach(a=>s.removeEventListener(a,r)),["touchend","mouseout"].forEach(a=>s.removeEventListener(a,i)),delete s.isModal)},t.ChartEngine.prototype.updateChartAccessories=function(){var s,n,r,i,a,o;if(this.accessoryTimer!==null&&clearTimeout(this.accessoryTimer),!t.ChartEngine.drawingLine&&t.touchDevice&&new Date().getTime()-this.lastAccessoryUpdate<("100"|0)){this.accessoryTimer=setTimeout(function(h){return e.A92(),function(){h.updateChartAccessories()}}(this),10);return}if(this.chart.dataSet&&!this.runPrepend("updateChartAccessories",arguments)){if(this.accessoryTimer=null,this.lastAccessoryUpdate=new Date().getTime(),s=this.controls.floatDate,s&&(n=this.currentPanel,n||(n=this.chart.panel),n)){r=n.chart,i=this.xAxisAsFooter===!0?0:this.chart.canvasHeight-n.chart.bottom,e.M$m(108);var c=e.v7v(10,9,20,9);if(a=s.offsetWidth/c-.5,o=this.pixelFromTick(this.crosshairTick,r)-a,o<0)o=0;else if(o>this.width-2*a-1){e.M$m(2);var l=e.J1m(4,2);e.z_m(87);var u=e.J1m(12,13,6,6);o=this.width-l*a-u}t.efficientDOMUpdate(s.style,"left",o+"px"),t.efficientDOMUpdate(s.style,"bottom",i+"px")}this.positionCrosshairsAtPointer(),this.headsUpHR(),this.runAppend("updateChartAccessories",arguments)}},t.ChartEngine.prototype.positionSticky=function(s){var n,r,i,a,o;n="p",n+="x",r="p",r+="x",i=Math.max(this.cy-s.offsetHeight-60,0),a=Math.min(this.chart.canvasWidth-(this.cx-50),this.chart.canvasWidth-s.offsetWidth),o=s.style,e.z_m(12),t.efficientDOMUpdate(o,"top",e.v7v(i,r)),t.efficientDOMUpdate(o,"left","auto"),e.z_m(12),e.A92(),t.efficientDOMUpdate(o,"right",e.v7v(a,n))},t.ChartEngine.prototype.displaySticky=function(s){var n,r,i,a,o,c,l,u,h,d,f,A,p,g,m,b,C,F,w,U,B,k,y,S,T,_,L,H,P,N,v,x,M,D,Q,q,O,R,V,K,Y;if(n="obj",n+="ect",r=".",r+="c",r+="ustomInstructi",r+="ons",i=this.controls.mSticky,e.A92(),!!i&&(a=i.querySelector(".mStickyInterior"),!!a))if(o=i.querySelector(".mStickyThumbnail"),c=i.querySelector(".overlayTrashCan"),l=i.querySelector(".overlayEdit"),u=i.querySelector(".overlayText"),h=i.querySelector(".mouseDeleteInstructions"),d=i.querySelector(".stickyLongPressText"),f=i.querySelector(".mousePinTooltip"),A=i.querySelector(r),h.classList.remove("no_edit"),(!s||typeof s!=n)&&(s={message:arguments[0],backgroundColor:arguments[1],forceShow:arguments[2],noDelete:arguments[3],type:arguments[4]}),p=s,g=p.forceShow,m=p.noDelete,b=p.noEdit,C=p.type,F=p.noText,w=s,U=w.message,B=w.backgroundColor,!g&&!U)k="n",k+="o",k+="n",k+="e",y="no",y+="n",y+="e",a.innerHTML="",i.style.display="none",c&&(c.style.display=y),l&&(l.style.display="none"),u&&(u.style.display="none"),h&&(h.style.display="none"),f&&(f.style.display="none"),d&&(d.style.display=k);else{if(S="no",S+="ne",T="bl",T+="ock",_="mStic",_+="kyRight",_+="Click",U||(U=""),L=this.defaultColor,H=this.highlightedDraggable,B=="auto"&&(B=L),g&&!U?(P="activ",P+="e",o&&o.classList.remove(P),o&&(o.style.background=""),a.style.color="",a.style.display="none"):B?(o&&o.classList.add("active"),o&&(o.style.background=B),a.style.display="inline-block"):(o&&o.classList.remove("active"),o&&(o.style.background=""),a.style.color="",a.style.display="inline-block"),a.innerHTML=U,N=i.querySelector(".mStickyRightClick"),N.className=_,C&&(e.M$m(12),N.classList.add(e.v7v("rightclick_",C))),N.style.display="",i.style.display="inline-block",f.style.display=f&&this.allowPinning&&this.allowPinning(C)?T:S,(!H||H&&H.undraggable&&H.undraggable(this))&&(d.style.display="none"),m||this.bypassRightClick===!0||this.bypassRightClick[C])N.style.display="none";else if(this.highlightViaTap||this.touches.length)v="n",v+="o",v+="n",v+="e",c&&(c.style.display="inline-block"),l&&!b&&(l.style.display="inline-block"),u&&!F&&(u.style.display="inline-block"),h&&(h.style.display=v),d&&(d.style.display="none"),i.classList[U===""?"add":"remove"]("hide");else if(x="no",x+="_edit",b&&h.classList.add(x),h&&(M="b",M+="lock",h.style.display=M),d&&(d.style.display="none",D=this.preferences.dragging,D&&!s.noDrag&&s.panel&&!s.panel.noDrag)){Q="st",Q+="u",Q+="d",Q+="y",q=881843585,O=1757738471,R=2;for(var G=1;e.S1v(G.toString(),G.toString().length,75671)!==q;G++)(D!=!1&&D.study||C!=="series"||D!=!1&&D.series||C!=="series")&&(d.style.display="block"),R+=2;e.S1v(R.toString(),R.toString().length,34709)!==O&&(D!=!1&&D.study||C!=="series"||D!=!1&&D.series||C!=="series")&&(d.style.display="block"),((D===!0||D.study)&&C==Q||(D===!0||D.series)&&C=="series")&&(d.style.display="block")}A&&C&&(V=A.querySelector(`[type=${C}]`),A.style.display=V?"block":"none"),K=C||"default",i.setAttribute("cq-sticky-type",K),Y=s.positioner||this.positionSticky,Y.call(this,i)}},t.ChartEngine.prototype.displayNotification=function(s,n,r={}){var i,a,o,c,l,u,h;this.controls.notificationTray&&(i=r.callback,a=r.dismissalListeners,o=this.controls.notificationTray,c=o.querySelector("template").content.cloneNode(!0),l=c.firstElementChild,l.className=s,l.querySelector(".message").textContent=n,i&&(u="t",u+="o",u+="uc",u+="hend",h=window.PointerEvent?"pointerup":u,l.handler=l.addEventListener(h,i)),a&&(l.listeners={},a.forEach(d=>{l.listeners[s]=this.addEventListener(d.type,d.callback)})),this.makeModal(l),o.appendChild(l))},t.ChartEngine.prototype.removeNotification=function(s){var n,r;if(e.A92(),!!this.controls.notificationTray&&(n=this.controls.notificationTray,r=n.querySelector(`.${s}`),r)){if(r.handler&&r.removeEventListener(r.handler),r.listeners)for(var i in r.listeners)this.removeEventListener(r.listeners[i]);this.modalEnd(),n.removeChild(r)}},t.ChartEngine.prototype.setMeasure=function(s,n,r,i,a,o){e.A92();var c,l,u,h,d,f,A,p,g,m,b;if(c=".",c+="mMeasur",c+="e",!this.runPrepend("setMeasure",arguments)){if(l=(this.drawingContainer||document).querySelector(c),u="",!s&&s!==0)!this.anyHighlighted&&this.currentVectorParameters.vectorType===""&&this.clearMeasure();else{if(n!==!1&&(h=Math.round(Math.abs(s-n)*this.chart.roundit)/this.chart.roundit,h=h.toFixed(this.chart.yAxis.printDecimalPlaces),this.internationalizer?u+=this.internationalizer.numbers.format(h):u+=h,s>0&&n>0)){if(e.M$m(30),d=e.J1m(n,s,s),Math.abs(d)>.1)e.M$m(25),d=Math.round(e.J1m(d,100));else if(Math.abs(d)>.01){e.M$m(109);var C=e.v7v(999,989,12,7,143);d=Math.round(d*C)/10}else{e.M$m(12);var F=e.J1m(9993,7);e.M$m(110);var w=e.J1m(392,2,109,16,4);d=Math.round(d*F)/w}this.internationalizer?(e.z_m(26),d=this.internationalizer.percent.format(e.J1m(100,d))):(d>0&&(e.z_m(12),d=e.v7v("+",d)),e.M$m(12),d=e.v7v(d,"%")),e.M$m(40),u+=e.v7v(" (",d,")")}if(i!==!1){e.M$m(2),f=Math.abs(e.J1m(i,r)),e.z_m(12);var U=e.v7v(0,1);f=Math.round(f)+U,A=this.translateIf("Bars"),e.M$m(111),u+=e.v7v(" "," ",f,A)}l&&(l.innerHTML=u)}this.activeDrawing||(l=this.controls.mSticky,l&&(p=l.querySelector(".mStickyInterior"),a?(g="inl",g+="ine-block",l.style.display=g,p&&(m="in",m+="li",m+="ne-blo",m+="ck",p.style.display=m,(s||s===0)&&(p.innerHTML=u)),l.classList[u===""?"add":"remove"]("hide"),this.positionSticky(l)):(b="n",b+="on",b+="e",l.style.display=b,p&&(p.innerHTML=""))),this.runAppend("setMeasure",arguments))}},t.ChartEngine.prototype.clearMeasure=function(){var s;s=(this.drawingContainer||document).querySelector(".mMeasure"),e.A92(),s&&(s.innerHTML="")},t.ChartEngine.prototype.zoomSet=function(s,n){var r,i,a,o,c;if(n||(n=this.chart),!!n.dataSet){if(s=this.constrainCandleWidth(s),n.tempCanvas&&n.tempCanvas.style.display!="none"&&t.clearCanvas(n.tempCanvas,this),r=this.mainSeriesRenderer,!r.params||!r.params.volume){if(i="z",i+="oom-",i+="x",this.preferences.zoomAtCurrentMousePosition&&this.zoomInitiatedByMouseWheel&&this.crosshairTick<n.dataSet.length)a=this.crosshairTick||this.tickFromPixel(this.cx,n);else if(this.isHome()){e.z_m(36);var l=e.v7v(15,16,239);a=n.dataSet.length-l}else n.scroll>n.dataSet.length?a=0:this.grabMode==i?a=this.tickFromPixel(this.chart.width,n):a=this.tickFromPixel(this.chart.width/2,n);this.animations.zoom.hasCompleted&&(this.zoomInitiatedByMouseWheel=!1),e.z_m(112);var u=e.J1m(0,9,631,7,10);o=n.dataSet.length-u-a,c=n.scroll,e.M$m(15);var h=e.v7v(16,10,7);n.scroll=Math.round((this.pixelFromTick(a,n)-n.left)/s)+h+o,this.micropixels+=(c-o)*this.layout.candleWidth-(n.scroll-o)*s}e.A92(),this.setCandleWidth(s),n.spanLock=!1,this.draw(),this.doDisplayCrosshairs(),this.updateChartAccessories()}}};Vo=E=>{var e=ue,t;t=E.CIQ,t.ChartEngine.prototype.currentBaseline=null,t.ChartEngine.prototype.baselineHelper=null,t.ChartEngine.helpersToRegister.push(function(s){e.W16(),s.baselineHelper=new Map}),e.W16(),t.ChartEngine.prototype.registerBaselineToHelper=function(s){var n,r,i,a,o,c,l;function u(h,d){var f;return h=h.replace(/\s/g,"_"),r?(f=r.cloneNode(),f.classList.remove("baselineHandle")):(f=document.createElement("div"),f.classList.add("stx-baseline-handle")),e.z_m(12),f.classList.add("stx-series-handle",e.J1m("name_",h)),d.container.append(f),e.z_m(12),d.controls[`${h}${e.v7v(" cq","-baseline-handle")}`]=f,d.makeModal(f),f}s.params.baseline&&(e.W16(),n=this.baselineHelper,r=this.controls.baselineHandle,n.has(s)||(i=s.params.name,a=i==="_main_series"&&r?r:u(i,this),a.renderer=s,a.listenersSet||(o="m",o+="ouseout",c=()=>{this.currentBaseline=a.renderer,this.currentPanel=this.panels[s.params.panel],this.findHighlights()},a.addEventListener("mouseover",h=>{var d,f,A,p,g;e.W16(),c(),a.classList.add("stx-grab"),d=a.renderer.seriesParams[0],f=d.display,A=d.name,p=d.field,g=d.id,a.title=f||A||p||g}),a.addEventListener(o,h=>{e.W16();var d;d="st",d+="x",d+="-gr",d+="ab",a.classList.remove(d)}),l={down:h=>{c(),e.A92(),this.repositioningBaseline={lastDraw:Date.now(),handle:a,renderer:s},a.classList.add("stx-grabbing")},move:h=>{this.currentBaseline=a.renderer,e.A92(),this.repositioningBaseline&&a===this.repositioningBaseline.handle&&(t.ChartEngine.crosshairY=h.touches?h.touches["0"<<64].clientY:h.clientY,this.setBaselineUserLevel(),this.currentBaseline=null)},up:h=>{var d;d="stx-",d+="gra",d+="b",d+="bing",this.repositioningBaseline=null,a.classList.remove(d),this.draw()}},t.safeDrag(a,l),a.listenersSet=!0),n.set(s,{styleCache:null,display:!1,handle:a})))},t.ChartEngine.prototype.removeBaselineFromHelper=function(s){var n,r,i;e.W16(),n=this.baselineHelper,n.has(s)&&(r=s.params.name.replace(" ","_"),r!=="_main_series"&&(i=n.get(s).handle,e.M$m(12),delete this.controls[`${r}${e.v7v(" cq-baseline-han","dle")}`],this.container.removeChild(i)),n.delete(s))},t.ChartEngine.prototype.findBaselineHandle=function(s,n){var r,i,a,o;for(var c of this.baselineHelper)if(r=La(c,2),i=r[0],a=r[1],o=a.handle,s.target===o||s.composedPath&&s.composedPath().includes(o))return n&&(this.repositioningBaseline={lastDraw:Date.now(),handle:o,renderer:i},o.classList.add("stx-grab")),this.currentBaseline=i,!0;return!1},t.ChartEngine.prototype.setBaselines=function(s){var n,r;e.W16(),s||(s=this.chart),n=this,r=this.baselineHelper;function i(a,o){var c,l,u,h,d,f,A,p,g,m,b,C,F,w;if(c=s,l=c.dataSegment,u=c.dataSet,h=c.defaultPlotField,d=h,o||(d=a),f=n.getFirstLastDataRecord(l,"tick"),!f)return null;A=306237586,e.W16(),p=-1372454812,g=2;for(var U=1;e.S1v(U.toString(),U.toString().length,"21815"*1)!==A;U++)m=f.tick,g+=2;for(e.D8X(g.toString(),g.toString().length,88545)!==p&&(m=f.tick);;){if(b=u[m],b){if(C="C",C+="l",C+="o",C+="se",!o||d!=C){if(e.z_m(113),F=u[e.v7v(m,"1",0)],F&&(F[d]||F[d]===("0"^0)))return w=F[d],typeof w=="object"?w[h]:w}else if(b.iqPrevClose||b.iqPrevClose===0)return b.iqPrevClose}if(m--,m<0)break}}r.forEach(function(a,o){var c,l,u,h,d,f,A,p,g;c=o.params.baseline,e.M$m(74),e.W16(),l=e.J1m(c,!0),l&&(c=s.baseline),u=c,h=u.defaultLevel,d=u.userLevel,f=o.getYAxis(n),f&&(A=n.getYAxisBaselineRenderer(f),p=A&&A!=n.mainSeriesRenderer&&A.seriesParams.length&&A.seriesParams[0].id,c.actualLevel=d||d===0?d:h,!c.actualLevel&&c.actualLevel!==0&&(g=i(p,l),g!==null&&(c.actualLevel=g)),a.display=A===o,r.set(o,a))})},t.ChartEngine.prototype.setBaselineUserLevel=function(){var s,n,r,i,a,o,c,l,u;s=this.chart,n=this.currentPanel,r=this.repositioningBaseline,i=r.lastDraw,a=r.renderer,a.params.panel==n.name&&(o=s.baseline,c=typeof a.params.baseline=="object"?a.params.baseline:o,l=a.getYAxis(this),u=this.valueFromPixel(this.backOutY(t.ChartEngine.crosshairY),n,l),c.userLevel=this.adjustIfNecessary(n,this.crosshairTick,u),Date.now()-i>100&&(this.draw(),this.repositioningBaseline.lastDraw=Date.now()))},t.ChartEngine.prototype.setBaselineMinMax=function(s,n){var r,i,a,o,c,l,u,h,d,f,A,p,g,m,b;return r="o",r+="bj",r+="ect",i=this.baselineHelper,a=this.chart,o=this.repositioningBaseline,c=a.baseline,l=a.seriesRenderers,u=this.getTransformFunction(n),h=n.renderers.find(C=>(e.W16(),i.get(l[C]))),!h||(d=l[h].params,f=d.baseline,A=d.type,p=d.centered,f=typeof f===r?f:c,A==="mountain"||p===!1)||(g=f,m=g.actualLevel,(m||m===0)&&(u&&(m=u(this,a,m)),b=Math.max(m-s[0],s[1]-m),s[0]=o?n.lowValue:m-b,s[1]=o?n.highValue:m+b)),s},t.ChartEngine.prototype.positionBaselineHandle=function(s){var n,r,i,a,o,c,l,u,h,d,f,A,p,g,m,b,C,F,w,U,B,k,y,S,T,_,L;if(this.manageTouchAndMouse){if(n=this.baselineHelper,r=this.chart,i=this.panels,a=s.params,o=a.baseline,c=a.panel,l=s.params.yAxis||s.getYAxis(this),u=n.get(s),h=u.display,d=u.handle,f=u.styleCache,o===!0&&(o=r.baseline),o.userLevel===!1||!h){d.style.display="none";return}A=i[c],p=d.classList.contains("stx-grab"),g="block",m=o.actualLevel,b=this.getTransformFunction(l),b&&(m=b(this,r,m)),m>l.high?(C="n",C+="one",m=l.high,p||(g=C)):m<l.low&&(m=l.low,p||(g="none")),F=this.getTransformFunction(l,!0),F&&(m=F(this,r,m)),w=this.pixelFromPrice(m,A,l),f||(f=getComputedStyle(d)),U=t.stripPX(f.width),e.M$m(15);var H=e.J1m(7,9,0);B=`${w-t.stripPX(f.height)/H}px`,y=this.baselineHandleBuffer||2,e.M$m(12);var P=e.J1m(58,6);S=A.yaxisRHS.indexOf(l)+("1">>P),S?(T=S===1?y:y*S,e.M$m(12),k=`${r.right-U*S-T}${e.v7v("p","x")}`):(_=A.yaxisLHS.slice("0"*1).reverse().indexOf(l)+1,L=_===1?y:y*_,k=`${r.left+U*_+L-U}px`),Object.assign(d.style,{display:g,top:B,left:k})}},t.ChartEngine.prototype.getYAxisBaselineRenderer=function(s){var n,r,i;return!s.renderers.length||(n=this.baselineHelper,r=this.chart,i=s.renderers.find(a=>(e.W16(),n.get(r.seriesRenderers[a]))),!i)?null:r.seriesRenderers[i]},t.ChartEngine.prototype.getYAxisBaseline=function(s){var n,r,i;return n=this.chart.baseline,r=this.getYAxisBaselineRenderer(s),r?(e.W16(),i=r.params.baseline,typeof i=="object"?i:n):n}};Ko=E=>{var e,t;e="Cl",e+="ose",t=E.CIQ,t.ChartEngine.Chart=function(){this.xAxis=new t.ChartEngine.XAxis,this.yAxis=new t.ChartEngine.YAxis,this.symbolObject={symbol:null},this.series={},this.seriesRenderers={},ue.A92(),this.xaxis=[],this.state={},this.endPoints={},this.defaultChartStyleConfig={},this.baseline=t.clone(this.baseline),this.panel=void 0,this.currentMarketData={}},t.extend(t.ChartEngine.Chart.prototype,{symbol:null,symbolObject:{symbol:null},symbolDisplay:null,series:{},seriesRenderers:{},scroll:0,isComparison:!1,forcePercentComparison:!0,maxTicks:0,tension:null,currentMarketData:{},masterData:null,dataSet:null,scrubbed:null,dataSegment:null,segmentImage:null,baseline:{includeInDataSegment:!1,defaultLevel:null,userLevel:null,actualLevel:null},xAxis:null,xaxis:[],decimalPlaces:2,dynamicYAxis:!0,roundit:100,breakpoint:null,legendRenderer:t.drawLegend,customChart:null,yaxisPaddingRight:null,yaxisPaddingLeft:null,tickCache:{},yaxisMarginMultiplier:"2.5"*1,allowScrollPast:!0,allowScrollFuture:!0,whiteSpaceFutureTicks:0,hideDrawings:!1,defaultPlotField:e,defaultChartStyleConfig:{},lockScroll:!1,includeOverlaysInMinMax:!0,gaplines:null,lineStyle:null,lineApproximation:!0,highLowBars:!1,standaloneBars:!1,barsHaveWidth:!1,calculateTradingDecimalPlaces:t.calculateTradingDecimalPlaces,width:null,height:null,top:null,bottom:null,left:null,right:null,context:null,endPoints:null},!0)};Wo=E=>{var e;e=E.CIQ,e.ChartEngine.prototype.resolveY=function(t){return this.top+t},e.ChartEngine.prototype.resolveX=function(t){return ue.W16(),this.left+t},e.ChartEngine.prototype.backOutY=function(t){return ue.A92(),Math.max(0,Math.min(this.height,t-this.top))},e.ChartEngine.prototype.backOutX=function(t){return ue.z_m(21),ue.A92(),Math.max(ue.v7v("0",64),Math.min(this.width,t-this.left))},e.ChartEngine.prototype.dateFromTick=function(t,s,n,r="dataSet"){var i,a,o,c,l,u;return s||(s=this.chart),i=s[r],a=i.length,u=!1,a===("0"|0)&&(i[0]={},i[0].DT=new Date,a=i.length,u=!0),t<0?(c=this.standardMarketIterator(i[0].DT),c?o=c.previous(Math.abs(t)):o=i["0"^0].DT):t>=a?(c=this.standardMarketIterator(i[a-1].DT),c?(ue.z_m(114),o=c.next(ue.v7v("1",t,a))):o=i[a-1].DT):o=i[t].DT,n?l=new Date(o.getTime()):l=e.yyyymmddhhmmssmmm(o).substr(0,12),u&&delete i[0].DT,l},e.ChartEngine.prototype.tickFromDate=function(t,s,n,r,i="dataSet"){var a=ue,o,c,l,u,h,d,f,A,p,g,m,b,C,F,w;if(s||(s=this.chart),o=s[i],!(o&&o.length))return 0;if(n||(n=0),c=t.constructor==Date?t:e.strToDateTime(t),e.ChartEngine.isDailyInterval(this.layout.interval)||c.setMinutes(c.getMinutes()+n),l=c.getTime(),s.tickCache[i]||(s.tickCache[i]={}),u=s.tickCache[i][l],u||u===0)return r?Math.ceil(u):Math.floor(u);if(h=o["0"^0].DT,d=o[o.length-1].DT,c>=h&&c<=d){for(f=0,A=o.length,p=0;++p<100;){if(a.M$m(31),g=Math.floor(a.v7v(A,2,f)),m=o[g].DT,+m==+c)return s.tickCache[i][l]=g,g;if(m<c&&(f=g),m>c){if(o[g-1].DT<c)return a.z_m(2),s.tickCache[i][l]=a.J1m(g,.5),r?g:g-1;if(+o[g-1].DT==+c)return a.M$m(2),s.tickCache[i][l]=a.J1m(g,1),a.z_m(2),a.J1m(g,1);A=g}}if(p>=100)return console.log("!!!Warning: tickFromDate() did not find match."),o.length}return a.z_m(78),b=a.v7v(c,h),C=b?h:d,F=this.standardMarketIterator(C),a.W16(),w=F?F.futureTick({end:c}):0,u=b?w*-1:o.length-1+w,s.tickCache[i][l]=u,u},e.ChartEngine.prototype.pixelFromBar=function(t,s){ue.A92();var n,r;s||(s=this.chart),n=0,r=this.chart.segmentImage,r&&r[t]&&typeof r[t].leftOffset=="number"?n=r[t].leftOffset:n=(t+.5)*this.layout.candleWidth,ue.z_m(2);var i=ue.J1m(5,4);return n=s.panel.left+Math.floor(n+this.micropixels)-i,n},e.ChartEngine.prototype.barFromPixel=function(t,s){var n=ue,r,i,a,o,c,l,u,h,d,f,A,p,g;if(s||(s=this.chart),r=this.chart.segmentImage,i=this.micropixels,a=this.layout.candleWidth,r){o=t-s.panel.left-i,c=2,u=r.length,n.M$m(26),h=Math.round(n.v7v(c,u)),n.z_m(9);var m=n.J1m(12,10,18,6);n.z_m(115);var b=n.J1m(13,10,1,118);if(A=r[u-m].leftOffset+r[u-("1">>0)].candleWidth/b,o>A)return u+Math.floor((t-A-s.panel.left-i)/a);for(var C=1;C<u&&(c*=2,l=r[h],!!l);C++){d=l.leftOffset,n.M$m(13);var F=n.v7v(5,3);if(f=l.candleWidth/F,n.z_m(2),p=n.J1m(d,f),n.z_m(12),g=n.v7v(d,f),h===0||o>=p&&o<g)break;o<p?h-=Math.max(1,Math.round(u/c)):h+=Math.max(1,Math.round(u/c)),h=Math.max(0,Math.min(u-1,h))}if(!r[h]){for(C=0;C<u;C++)if(l=r[C],!!l){if(d=l.leftOffset,f=l.candleWidth/2,o<d-f)return n.M$m(2),Math.max(0,n.J1m(C,1));if(o<d+f)return C;if(o>=d+f)return n.M$m(12),n.v7v(C,1)}}return h}return Math.floor((t-s.panel.left-i)/a)},e.ChartEngine.prototype.tickFromPixel=function(t,s){var n;return s||(s=this.chart),n=s.dataSet.length-s.scroll,s.segmentImage?n+=this.barFromPixel(t,s):n+=Math.floor((t-s.panel.left-this.micropixels)/this.layout.candleWidth),n},e.ChartEngine.prototype.pixelFromTick=function(t,s){var n=ue,r,i,a,o,c,l,u,h,d,f,A;if(s||(s=this.chart),r=s.dataSegment,i=s.dataSet,a=s.segmentImage,o=this.micropixels,c=r?r.length:0,l=s.panel,u=s.scroll,h=t-i.length+u,d=c?r[h]:null,a&&(d=a[h]),d&&typeof d.leftOffset=="number")return l.left+Math.floor(d.leftOffset+o);if(f=0,A=0,d=c?r[c-1]:null,a&&(n.M$m(2),d=a[n.J1m(c,1)]),d&&typeof d.leftOffset=="number"&&c<=t-i.length+u){n.M$m(43);var p=n.v7v(20,18,0);f=d.leftOffset+d.candleWidth/p,A=c}return f+l.left+Math.floor((t-A-i.length+u+.5)*this.layout.candleWidth+o)},e.ChartEngine.prototype.pixelFromDate=function(t,s,n,r){return this.pixelFromTick(this.tickFromDate(t,s,n,r),s)},e.ChartEngine.prototype.transformedPriceFromPixel=function(t,s,n){var r,i,a,o,c,l;if(s||(s=this.chart.panel),ue.W16(),r=n||s.yAxis,t=r.bottom-t,r.semiLog){a=t*r.logShadow/r.height,o=447829332,c=-1312684298,l=2;for(var u=1;ue.S1v(u.toString(),u.toString().length,22009)!==o;u++)r.flipped?a=r.logHigh+a:a%=r.logLow,l+=2;ue.D8X(l.toString(),l.toString().length,41424)!==c&&(r.flipped?a=r.logHigh-a:a-=r.logLow),r.flipped?a=r.logHigh-a:a+=r.logLow,i=Math.pow(10,a)}else{if(!r.multiplier)return null;i=t/r.multiplier,r.flipped?i=r.high-i:i+=r.low}return i},e.ChartEngine.prototype.priceFromPixel=function(t,s,n){var r,i;return(!s||!s.chart)&&(s=this.chart.panel),r=this.transformedPriceFromPixel(t,s,n),i=this.getTransformFunction(n||s.yAxis,!0),this.charts[s.name]&&i&&(r=i(this,s.chart,r,n)),r},e.ChartEngine.prototype.valueFromPixel=function(t,s,n){var r;return s||(s=this.whichPanel(t)),s||(r=Object.values(this.panels),r&&r.length&&(t<=0?s=r.shift():s=r.pop())),this.priceFromPixel(t,s,n)},e.ChartEngine.prototype.valueFromInterpolation=function(t,s,n,r,i,a){var o=ue,c,l,u,h,d,f,A,p,g,m,b,C,F,w,U,B;return c="u",c+="n",c+="de",o.W16(),c+="fined",l="u",l+="n",l+="defined",u="ob",u+="je",u+="c",u+="t",t===null||t<0||!s||(r||(r=this.chart.panel),i||(i=r.yAxis),n||(n=this.chart.defaultPlotField),h=this.getPreviousBar(this.chart,s,t),!h)?null:(f=e.existsInObjectChain(h,s),f&&(d=f.obj[f.member]),typeof d==u&&(d=d[n]),A=this.getRendererFromSeries(s),a||A&&A.params.step||this.layout.chartType==="step"?d:(p=this.getNextBar(this.chart,s,t),f=e.existsInObjectChain(p,s),f&&(g=f.obj[f.member]),typeof g=="object"&&(g=g[n]),!p||d===null||typeof d==l||g===null||typeof g==c?null:(m=this.pixelFromPrice(d,r,i),b=this.pixelFromPrice(g,r,i),C=h.tick,F=p.tick,o.M$m(116),w=o.v7v(m,F,b,C),U=this.chart.dataSegment[t].tick,o.z_m(117),B=o.J1m(w,m,U,C),this.priceFromPixel(B,r,i))))},e.ChartEngine.prototype.pixelFromTransformedValue=function(t,s,n){ue.W16();var r,i,a,o,c;return s||(s=this.chart.panel),r=n||s.yAxis,i=(r.high-t)*r.multiplier,r.semiLog&&(a=Math.max(t,0),o=Math.log(a)/Math.LN10,c=r.height,i=c-c*(o-r.logLow)/r.logShadow),i=r.flipped?r.bottom-i:r.top+i,i},e.ChartEngine.prototype.pixelFromPrice=function(t,s,n){var r;return(!s||!s.chart)&&(s=this.chart.panel),ue.W16(),r=this.getTransformFunction(n||s.yAxis),this.charts[s.name]&&r&&(t=r(this,s.chart,t,n)),this.pixelFromTransformedValue(t,s,n)},e.ChartEngine.prototype.pixelFromValueAdjusted=function(t,s,n,r){ue.W16();var i,a;return this.layout.adj||!this.charts[t.name]?this.pixelFromPrice(n,t,r):(i=Math.round(s),i>0&&i<t.chart.dataSet.length&&(a=t.chart.dataSet[i].ratio)?(ue.M$m(25),this.pixelFromPrice(ue.J1m(n,a),t,r)):this.pixelFromPrice(n,t,r))},e.ChartEngine.prototype.adjustIfNecessary=function(t,s,n){var r,i;return this.layout.adj||!t||!this.charts[t.name]?n:(r=Math.round(s),r>0&&r<t.chart.dataSet.length&&(i=t.chart.dataSet[r].ratio)?(ue.z_m(26),ue.J1m(i,n)):(ue.A92(),n))}};Yo=E=>{var e=ue,t;t=E.CIQ,e.A92(),t.ChartEngine.prototype.positionCrosshairsAtPointer=function(){var s,n,r,i,a,o,c,l,u,h;if(s="posit",s+="ionCrosshairsAtPoin",s+="ter",n="c",n+="hart",r=this.currentPanel,!!r&&!(!this.manageTouchAndMouse||this.mainSeriesRenderer.nonInteractive)&&!this.runPrepend("positionCrosshairsAtPointer",arguments)){i=r.chart,a=this.container.getBoundingClientRect(),this.top=a.top,this.left=a.left,this.right=this.left+this.width,this.bottom=this.top+this.height,e.A92(),o=this.crosshairTick=this.tickFromPixel(this.crossXActualPos,i),e.z_m(2);var d=e.v7v(12,11);if(c=this.pixelFromTick(o,i)-d,c>=r.right||c<=r.left){this.undisplayCrosshairs();return}if(this.controls.crossX&&(e.M$m(12),this.controls.crossX.style.left=e.J1m(c,"px")),l=r.name==n?this.preferences.horizontalCrosshairField:r.horizontalCrosshairField,u=i.dataSet,l&&u&&o<u.length&&o>-1&&(this.crossYActualPos=this.pixelFromPrice(u[o][l],r)),h=this.crossYActualPos>=r.yAxis.bottom&&this.crossYActualPos<=r.bottom,h){this.undisplayCrosshairs();return}this.controls.crossY&&(this.controls.crossY.style.top=this.crossYActualPos+"px"),this.runAppend(s,arguments)}},t.ChartEngine.prototype.doDisplayCrosshairs=function(){var s,n,r,i,a,o,c,l;this.runPrepend("doDisplayCrosshairs",arguments)||(this.displayInitialized&&(s=this.floatCanvas,n=this.controls,r=n.crossX,i=n.crossY,a=n.floatDate,o=this.currentVectorParameters.vectorType,this.shouldDisplayCrosshair()?(r&&r.style.display!==""&&(r.style.display="",i&&(i.style.display=""),this.magnetizedPrice&&o?(c="b",c+="lo",c+="c",c+="k",this.container.classList.remove("stx-crosshair-cursor-on"),this.chart.tempCanvas.style.display=c):(l="st",l+="x-",l+="crosshair-cursor-on",this.container.classList.add(l))),a&&!this.chart.xAxis.noDraw&&(a.style.visibility="",this.currentPanel&&this.updateFloatHRLabel(this.currentPanel)),s&&(s.style.display=="none"&&t.clearCanvas(s,this),s.style.display="block")):this.undisplayCrosshairs()),this.runAppend("doDisplayCrosshairs",arguments))},t.ChartEngine.prototype.undisplayCrosshairs=function(){var s,n,r,i,a,o,c,l,u,h,d;s="undisplay",s+="Crosshai",s+="r",s+="s",n="stx-crosshair-cu",n+="rsor-on",r="undis",r+="playCrossha",r+="irs",e.A92(),!this.runPrepend(r,arguments)&&(i=this.controls,a=i.crossX,o=i.crossY,a&&a.style.display!="none"&&(c="n",c+="o",c+="n",c+="e",a.style.display=c,o&&(o.style.display="none")),this.displayInitialized&&i.floatDate&&(l="hid",l+="den",i.floatDate.style.visibility=l),this.shouldDisplayCrosshairCursor()||this.container.classList.remove(n),u=this.floatCanvas,u&&u.isDirty&&u.style.display!="none"&&(t.clearCanvas(u,this),u.style.display!="none"&&(u.style.display="none")),!this.activeDrawing&&!this.repositioningDrawing&&!this.editingAnnotation&&!this.editingDrawing&&(h="n",h+="o",h+="n",h+="e",d=this.chart.tempCanvas,d&&d.style.display!=h&&(d.style.display="none")),this.runAppend(s,arguments))},t.ChartEngine.prototype.hideCrosshairs=function(){e.A92(),this.displayCrosshairs=!1},t.ChartEngine.prototype.showCrosshairs=function(){e.A92(),this.displayCrosshairs=!0},t.ChartEngine.prototype.centerCrosshairs=function(){var s;s=this.grabbingScreen,this.grabbingScreen=!1,this.mousemoveinner((this.left+this.right)/2,(this.bottom+this.top)/2),this.grabbingScreen=s},t.ChartEngine.prototype.shouldDisplayCrosshair=function(){var s,n,r,i,a,o,c,l;return s=this.layout,n=this.preferences,r=!!s.crosshair,i=!this.insideChart&&!this.grabbingScreen,e.W16(),a=this.openDialog!=="",o=this.currentVectorParameters.vectorType,c=t.Drawing&&t.Drawing[o]&&new t.Drawing[o]().dragToDraw,i||a||c?!1:!!(r||(l=n.displayCrosshairsWithDrawingTool,(l||t.isMobile)&&o))},t.ChartEngine.prototype.shouldDisplayCrosshairCursor=function(){var s;return!!(this.layout.crosshair||(s=this.currentVectorParameters.vectorType,e.A92(),s&&s!==""))}};Xo=E=>{var e=ue,t,s,n,r;t="Clo",t+="se",s=E.CIQ,n=E.timezoneJS,s.ChartEngine.prototype.loadChart=function(i,a,o){var c,l,u,h,d,f,A,p,g,m,b,C,F,w,U,B,k,y,S,T,_,L,H;if(!o&&typeof a=="function"?(o=a,a={}):Array.isArray(a)&&(a={masterData:a}),a||(a={}),c=a,l=c.chart,u=c.periodicity,h=c.range,d=c.span,f=c.periodicParams,this.periodicParams=f,A=this.layout,p=this.quoteDriver,g={periodicity:A.periodicity,interval:A.interval,timeUnit:A.timeUnit},l||(l=this.chart),m=l,b=m.dataSet,C=m.market,F=m.masterData,w=m.symbol,U=m.moreAvailable,B=m.upToDate,k=s.clone(l.symbolObject),i||(i=null),i&&typeof i=="object"?(y=i,i=i.symbol):y={symbol:i},this.marketFactory){l._lastLoadedMarketFactorySymbol=i;try{S=this.marketFactory(y),this.setMarket(S,l)}catch(N){if(N instanceof Promise){N.then(()=>{l._lastLoadedMarketFactorySymbol===i&&this.loadChart(...arguments)});return}throw console.error(N),N}}u&&(T=s.cleanPeriodicity(u.period?u.period:u.periodicity,u.interval,u.timeUnit),A.interval=T.interval,A.periodicity=T.period,A.timeUnit=T.timeUnit),l.dataSet=[],l.masterData=[],l.moreAvailable=null,l.upToDate=null,i&&i.toUpperCase()==="CIQINFO"&&s.logPackageInfo(),l.symbol=i,l.symbolObject=y,l.inflectionPoint=null;function P(){var N;N="symbolCh",N+="an",N+="ge",_.layout.symbols=_.getSymbols({"include-parameters":!0,"exclude-studies":!0}),_.dispatch(_.currentlyImporting?"symbolImport":N,{stx:_,symbol:l.symbol,symbolObject:l.symbolObject,prevSymbol:w,prevSymbolObject:k,action:"master"}),u&&_.dispatch("periodicity",{stx:_,differentData:!0,prevPeriodicity:g}),p&&p.paused&&p.resume()}this.setMainSeriesRenderer(!0),!h&&!d&&A?(d=A.range?{}:A.setSpan,h=A.range||{}):h&&d&&(d={}),this.clearCurrentMarketData(l),_=this,!a.masterData&&p?(L=function(N){e.A92();var v;v="orp",v+="han",v+="ed",N&&N!=v&&(l.symbol=w,l.symbolObject=k,l.market=C,_.masterData=l.masterData=F,l.dataSet=b,l.moreAvailable=U,l.upToDate=B),P(),o&&o.call(_,N)},h&&Object.keys(h).length&&this.setRange?(delete a.span,delete A.setSpan,this.chart.masterData=null,this.displayInitialized=!1,u&&(h.periodicity=u),h.forceLoad=!0,this.setRange(h,L)):d&&d.base&&this.setSpan?(d.multiplier=d.multiplier||1,this.chart.masterData=null,this.displayInitialized=!1,u&&(d.maintainPeriodicity=!0),d.forceLoad=!0,this.setSpan(d,L)):p.newChart({symbol:l.symbol,symbolObject:l.symbolObject,chart:l,initializeChart:!0},function(N){N||(_.adjustPanelPositions(),p.updateSubscriptions(),a.stretchToFillScreen&&_.fillScreen()),L.apply(_,arguments)})):(a.masterData||console.log("Warning: No masterData specified and no QuoteFeed configured"),l.symbol||(l.symbol=""),this.initializeChart(),H=this.doCleanupGaps(a.masterData,l),this.setMasterData(H,l,{noCleanupDates:!0}),l.endPoints={},H&&H.length&&(l.endPoints={begin:H[0].DT,end:H[H.length-1].DT}),this.createDataSet(),h&&Object.keys(h).length&&this.setRange?this.setRange(h):d&&d.multiplier&&d.base&&this.setSpan?this.setSpan({maintainPeriodicity:!0,multiplier:d.multiplier,base:d.base}):a.stretchToFillScreen?this.fillScreen():H&&H.length?this.home():this.clear(),this.adjustPanelPositions(),P(),o&&o.call(_)),s.logVersion()},s.ChartEngine.prototype.loadBlankChart=function(){this.loadChart(null,[])},s.ChartEngine.prototype.getDataFields=function(i){var a,o,c,l,u;a="H",a+="i",a+="g",a+="h",o="C",o+="lo",o+="se",i||(i=this.chart),c=i.defaultPlotField||o,l=["Open",a,"Low"],l.push(c);for(var h in i.series)u=i.series[h].parameters,l.push(u.symbol);return l},r=new RegExp("^(.{1,100}) \\[(.{1,20})\\]$"),e.W16(),s.ChartEngine.getQuoteFieldValue=function(i,a,o=t){var c,l,u,h;return c="obje",c+="c",c+="t",l="n",l+="u",l+="mber",!i||!a||(u=r.exec(a),u&&(o=u[1].replace(/\u200c/g,""),e.z_m(21),a=u[e.J1m("2",32)]),h=null,typeof i[a]===l?h=i[a]:i[a]&&typeof i[a]===c&&(h=i[a][o]),!h&&h!==0)?null:h},s.ChartEngine.prototype.cleanMasterData=function(i,a){var o,c,l,u,h;if(o=i.symbol,c=a.masterData,!c||!c.length)return;l=this.getDataFields(a),u=0,e.W16();function d(f,A){for(var p,g,m=0;m<A.length;m++)if(p="un",p+="def",p+="ine",p+="d",g=f[A[m]],typeof g!=p)return!1;return!0}do{if(h=c[u],delete h[o],d.call(this,h,l)){c.splice(u,1);continue}u++}while(u<c.length);c=this.doCleanupGaps(c,a,{noCleanupDates:!0}),this.setMasterData(c,a,{noCleanupDates:!0}),this.clearCurrentMarketData(a,o)},s.ChartEngine.prototype.calculateATR=function(i,a,o){var c,l,u,h,d,f;o||(o=i.dataSet),c=i.state.calculations.atr,c||(c=i.state.calculations.atr={}),a||(e.z_m(17),a=e.J1m("20",0)),l=[],c.accum&&(l=c.accum);for(var A=0;A<o.length;A++)if(h=o[A],u=A?o[A-1]:c.q1,!!u){if(d=Math.max(h.High-h.Low,Math.abs(h.High-u.Close),Math.abs(h.Low-u.Close)),l.length<a){if(l.push(d)==a){f=0;for(var p=0;p<l.length;p++)f+=l[p];e.z_m(26),h.atr=e.v7v(a,f)}}else{e.M$m(118);var g=e.J1m(0,4,1,19,16);h.atr=(u.atr*(a-g)+d)/a}h.trueRange=d}i.state.calculations.atr={accum:l,q1:u}},s.ChartEngine.prototype.calculateMedianPrice=function(i,a){var o,c;a||(a=i.dataSet);for(var l=0;l<a.length;++l){c="hl",c+="/",c+="2",o=a[l],e.M$m(52);var u=e.v7v(40,558,7,2);o[c]=(o.High+o.Low)/u}},s.ChartEngine.prototype.calculateTypicalPrice=function(i,a){var o;e.A92(),a||(a=i.dataSet);for(var c=0;c<a.length;++c){o=a[c],e.z_m(119);var l=e.J1m(0,4,1,11,11);o["hlc/3"]=(o.High+o.Low+o.Close)/l}},s.ChartEngine.prototype.calculateWeightedClose=function(i,a){var o;e.W16(),a||(a=i.dataSet);for(var c=0;c<a.length;++c){o=a[c],e.M$m(2);var l=e.v7v(34,32);e.M$m(2);var u=e.v7v(21,17);o["hlcc/4"]=(o.High+o.Low+l*o.Close)/u}},s.ChartEngine.prototype.calculateOHLC4=function(i,a){var o,c;a||(a=i.dataSet);for(var l=0;l<a.length;++l){c="ohlc",c+="/",c+="4",o=a[l],e.M$m(2);var u=e.J1m(16,12);o[c]=(o.Open+o.High+o.Low+o.Close)/u}},s.ChartEngine.prototype.currentQuote=function(i){var a;if(!this.chart.dataSet)return null;for(var o=this.chart.dataSet.length-1;o>=0;o--)if(this.chart.dataSet[o]){if(!i)return this.chart.dataSet[o];if(a=this.chart.dataSet[o][i],a||a===0)return this.chart.dataSet[o]}return null},s.ChartEngine.prototype.mostRecentClose=function(i){var a,o,c;if(!this.chart.dataSet)return null;for(var l=this.chart.dataSet.length-1;l>="0"<<64;l--)if(a="n",a+="um",a+="be",a+="r",o=this.chart.dataSet[l],!!o&&!(i&&(o=o[i],!o&&o!==0))){if(c=o.iqPrevClose,typeof o=="object"&&(o=o.Close),typeof o=="number")return o;if(typeof c==a)return c}return null},s.ChartEngine.prototype.getTransformedQuote=function(i,a){var o;return!i||!i.transform&&!i.transform_axis?null:(o=this.chart,e.W16(),i.transform_axis&&i.transform_axis[a.transformId]?i.transform_axis[a.transformId]:a==o.panel.yAxis&&i.transform?i.transform:null)},s.ChartEngine.prototype.createDataSegment=function(i){var a,o,c,l,u,h,d,f,A,p,g,m,b,C,F,w,U,B,k;if(a="crea",a+="teDataSegment",!this.runPrepend(a,arguments)){for(var y in this.charts){o=this.charts[y],i&&(o=i),s.Comparison&&s.Comparison.createComparisonSegmentInner(this,o),c=o.dataSet,l=o.baseline,u=o.scroll,h=o.maxTicks,d=this.layout,f=d.candleWidth,l.actualLevel=l.userLevel||l.userLevel===0?l.userLevel:l.defaultLevel,A=l.includeInDataSegment&&!this.mainSeriesRenderer.standaloneBars,g=0,m=o.dataSegment=[],e.z_m(2);var S=e.v7v(12,11);e.z_m(57);var T=e.J1m(0,6,13,2);b=c.length-S-u-T,C=o.defaultPlotField;for(var _=-1;_<u&&_<h;_++)b++,!(_==-1&&!A)&&(b<c.length&&b>=0?(p=c[b],p.candleWidth=null,p&&(g+=p.Volume||"0"<<0),m.push(p),l.actualLevel===null&&_>=0&&(C&&C!="Close"?(e.z_m(2),F=c[e.J1m(b,1)],F&&(F[C]||F[C]===0)&&(l.actualLevel=F[C])):(p.iqPrevClose||p.iqPrevClose===0)&&(l.actualLevel=p.iqPrevClose))):b<0&&m.push(null));if(o.segmentImage=null,w=this.mainSeriesRenderer,w.params.volume&&g){e.z_m(15);var L=e.v7v(11,12,0);U=o.width-(h-m.length-L)*d.candleWidth,B=0,o.segmentImage=[];for(var H="0"-0;H<m.length;H++)if(p=m[H],o.segmentImage[H]={},k=null,p){if(p.Volume){p.candleWidth=U*p.Volume/g,e.M$m(120);var P=e.v7v(1,16,19);k=B+p.candleWidth/P,B+=p.candleWidth}else p.candleWidth=f,e.z_m(121),k=e.J1m(B,f,"2"),B+=f;o.segmentImage[H]={tick:p.tick,candleWidth:p.candleWidth,leftOffset:k}}else o.segmentImage[H]={tick:null,candleWidth:f,leftOffset:B+f/2},B+=f}if(i)break}o&&o.isComparison&&this.clearPixelCache(),this.positionCrosshairsAtPointer(),this.runAppend("createDataSegment",arguments)}},s.ChartEngine.prototype.getDataSegment=function(i){var a,o,c;return i||(i=this.chart),e.W16(),a=i.dataSegment,!a||!a.length?[]:(o=0,c=a.length,this.pixelFromBar(o,i)<i.panel.left&&o++,this.pixelFromBar(c-1,i)>i.panel.right&&c--,a.slice(o,c))},s.ChartEngine.prototype.setMasterData=function(i,a,o){var c,l,u,h,d,f,A,p,g,m;if(a||(a=this.chart),c=o||{},l=c.cb,this.marketFactory&&o&&o.setMarket)try{u=this.marketFactory(a.symbolObject),this.setMarket(u,a)}catch(b){if(b instanceof Promise){b.then(()=>{e.W16(),delete o.cb,delete o.setMarket,this.setMasterData(i,a,o),l&&l()});return}throw console.error(b),b}if(o||(o={}),o.noCleanupDates||this.doCleanupDates(i,this.layout.interval),a.masterData=i,a.name=="chart"&&(this.masterData=i),d=null,i)for(h=0;h<i.length;h++)f="n",f+="u",f+="mbe",f+="r",A="Val",A+="ue",p=i[h],d===null&&(typeof p.Close=="number"?(g="Cl",g+="ose",d=g):typeof p.Value=="number"&&(d="Value")),d===A&&typeof p.Value=="number"&&(p.Close=p.Value),p.DT?(Object.prototype.toString.call(p.DT)!="[object Date]"&&(p.DT=new Date(p.DT)),(!p.Date||p.Date.length!=17)&&(p.Date=s.yyyymmddhhmmssmmm(p.DT))):p.Date?p.DT=s.strToDateTime(p.Date):console.log("setMasterData : Missing DT and Date on masterData object"),p.Volume&&typeof p.Volume!==f&&(p.Volume=parseInt(p.Volume,10)),i.length-h<50&&this.updateCurrentMarketData(p,a,null,{fromTrade:!0});a.calculateTradingDecimalPlaces&&(a.decimalPlaces=a.calculateTradingDecimalPlaces({stx:this,chart:a,symbol:a.symbolObject.symbol,symbolObject:a.symbolObject})),this.setDisplayDates(i),a.roundit=Math.pow(10,a.decimalPlaces);for(h in this.plugins)m=this.plugins[h],m.display&&m.setMasterData&&m.setMasterData(this,a);l&&l()},s.ChartEngine.prototype.setMasterDataRender=function(i,a,o){o||(o=this.chart),!a||!a.length?(o.symbolObject=o.symbol=null,o.setMarket(),this.clear()):(i||(i=""),o.symbolObject={symbol:i},o.symbol=i,this.setMasterData(),this.createDataSet(),this.draw(),o._lastLoadedMarketFactorySymbol=i,this.setMasterData(a,o,{setMarket:!0,cb:()=>{o._lastLoadedMarketFactorySymbol===i&&(o.endPoints={},a.length&&(o.endPoints={begin:a[0].DT,end:a[a.length-1].DT}),this.initializeChart(),this.createDataSet(),this.draw(),this.adjustPanelPositions())}}))},s.ChartEngine.prototype.getSymbols=function(i){var a,o,c,l,u,h,d,f,A,p,g,m,b,C,F,w;i||(i={}),a=[],c=this.layout;for(var U in this.charts){l=this.charts[U],u=l.symbol,h=l.symbolObject,h&&h.symbol&&(i.static?h.static&&a.push(k(u,h,c)):a.push(k(u,h,c)));for(var B in l.series)d="incl",d+="u",d+="de-s",d+="tatic",f=l.series[B].parameters,!(!(i[d]||i.static)&&f.data&&!f.data.useDefaultQuoteFeed)&&(A=f.bucket,p=f.noStorage,g=f.symbol,m=f.symbolObject,o=k(g,m,c),o.id=B,i["include-parameters"]&&(o.parameters=s.clone(f,null,!0),o.parameters.yAxis&&delete o.parameters.yAxis.yAxisPlotter),!(i["exclude-studies"]&&A=="study")&&(i["exclude-generated"]&&m.generator||i["exclude-nostore"]&&p||(i.static?m.static&&a.push(o):a.push(o))))}function k(_,L,H){return{symbol:_,symbolObject:L,periodicity:H.periodicity,interval:H.interval,timeUnit:H.timeUnit,setSpan:H.setSpan}}if(i["breakout-equations"]){b={};for(var y=0;y<a.length;y++)if(C=a[y].symbol,this.isEquationChart(C)){if(F=s.formatEquation(C),F){w=F.symbols;for(var S=0;S<w.length;S++)b[w[S]]=k(w[S],a[y].symbolObject,a[y])}}else b[C]=k(C,a[y].symbolObject,a[y]);a=[];for(var T in b)a.push(b[T])}return a},s.ChartEngine.prototype.setDisplayDate=function(i){var a,o,c,l,u,h;if(!s.ChartEngine.isDailyInterval(this.layout.interval)){a=i.DT,e.M$m(86);var d=e.J1m(67,7,531);o=a.getSeconds()*d+a.getMilliseconds(),n.Date&&this.displayZone&&(c=new n.Date(a.getTime(),this.displayZone),a=new Date(c.getFullYear(),c.getMonth(),c.getDate(),c.getHours(),c.getMinutes()),a=new Date(a.getTime()+o)),e.M$m(22),l=e.v7v(32,"972108030"),u=-1325742989,h=2;for(var f=1;e.S1v(f.toString(),f.toString().length,"13720">>32)!==l;f++)i.displayDate=a,h+=2;e.S1v(h.toString(),h.toString().length,16238)!==u&&(i.displayDate=a)}},s.ChartEngine.prototype.setDisplayDates=function(i){var a;if(i&&(e.W16(),!s.ChartEngine.isDailyInterval(this.layout.interval)))for(var o=0;o<i.length;o++)a=i[o],a.DT&&this.setDisplayDate(a)},s.ChartEngine.prototype.setTimeZone=function(i,a){var o,c,l,u,h,d;if(o="prefere",o+="nces",!n.Date){this.timeZoneOffset=0;return}c=new Date,l=c.getTimezoneOffset(),u=l,h=l,i&&(this.dataZone=i),this.dataZone&&(u=new n.Date(c,this.dataZone).getTimezoneOffset()),a&&(this.displayZone=a),this.displayZone&&(h=new n.Date(c,this.displayZone).getTimezoneOffset()),e.z_m(122),this.timeZoneOffset=e.v7v(h,l,u,l);for(var f in this.charts)d=this.charts[f],this.setDisplayDates(d.masterData);this.preferences.timeZone=a,this.changeOccurred(o),this.createDataSet()},s.ChartEngine.prototype.updateChartData=function(i,a,o={}){var c,l,u,h,d,f,A,p,g,m,b,C,F,w,U,B,k,y,S,T,_,L,H,P,N,v,x,M,D,Q,q;if(c="updateChartD",c+="ata",l="a",l+="ppendMas",l+="ter",l+="Data",a||(a=this.chart),u=this,h=this.layout,d=o.animationEntry,f=o.secondarySeries,A=s.isValidNumber,p=a,g=p.masterData,m=!1,b=!1,o.noCleanupDates||this.doCleanupDates(i,h.interval),(o.useAsLastSale||i.constructor==Object&&(i.Last||i.Last===0))&&X(),i&&i.constructor==Object&&(i=[i]),!i||!i.length)return;if(w=f?this.getSeries({symbol:f,chart:a}):[a],f&&w&&w.length===1&&(e.M$m(25),U=w[e.v7v("0",1)],U.parameters.isEvent)){(!U.endPoints.begin||U.endPoints.begin>i["0"-0].DT)&&(U.endPoints.begin=i[0].DT),(!U.endPoints.end||U.endPoints.end<i[i.length-1].DT)&&(U.endPoints.end=i[i.length-1].DT),U.parameters.processResults&&U.parameters.processResults(this,null,U,i);return}function O(ne,se){var oe,ae,Ae,he;if(oe=g[ne],f&&(oe=oe[f]||{}),se.Close===null)oe.Open!==void 0&&(se.Open=null),oe.High!==void 0&&(se.High=null),oe.Low!==void 0&&(se.Low=null),oe.Volume!==void 0&&(se.Volume=null);else{ae="L",ae+="ow",Ae="O",Ae+="p",Ae+="e",Ae+="n",m?(se.Volume&&(se.Volume=parseInt(se.Volume,10)),b||(se.Volume+=oe.Volume)):!A(se.Volume)&&oe.Volume&&(se.Volume=oe.Volume),o.allowReplaceOHL||(A(oe.Open)&&(se.Open=oe.Open),A(oe.High)&&A(se.High)&&oe.High>se.High&&(se.High=oe.High),A(oe.Low)&&A(se.Low)&&oe.Low<se.Low&&(se.Low=oe.Low)),["Close",Ae,"High",ae,"Bid","Ask"].forEach(function(ge){e.A92(),A(se[ge])||(se[ge]=oe[ge])});for(C in a.series)he="undefine",he+="d",F=a.series[C].parameters.symbolObject.symbol,typeof se[F]>"u"&&typeof oe[F]!=he&&(se[F]=oe[F])}}if(this.runPrepend("appendMasterData",[i,a,o])||this.runPrepend("updateChartData",[i,a,o]))return;g||(g=[]),e.z_m(2);var R=e.J1m(9,8);if(B=g.length-R,k=!1,o.fillGaps&&G(),!i.length)return;for(var V=0;V<i.length;V++){for(y=i[V],S=y.DT,T=y.Date,S&&Object.prototype.toString.call(S)!="[object Date]"&&(y.DT=S=new Date(S)),S&&(!T||T.length!=("17"^0))&&(y.Date=s.yyyymmddhhmmssmmm(y.DT)),S||(S=y.DT=s.strToDateTime(T)),!A(y.Close)&&A(y.Value)&&(y.Close=y.Value);B>=0&&B<g.length;){if(_=g[B].DT,_||(_=s.strToDateTime(g[B].Date)),_.getTime()<=S.getTime()){if(k=!0,L=0,_.getTime()<S.getTime()){if(B<g.length-1&&(H=g[B+1].DT||s.strToDateTime(g[B+("1"^0)].Date),H.getTime()<=S.getTime())){B++;continue}L=1}if(o.deleteItems){L||ee(B,S);break}else P="t",P+="i",P+="ck",h.interval==P&&o.firstLoop!==!1&&(L=1),L||O(B,y),A(y.Close)&&(A(y.Open)||(y.Open=y.Close),N=Math.max(y.Open,y.Close),v=Math.min(y.Open,y.Close),(!A(y.High)||y.High<N)&&(y.High=N),(!A(y.Low)||y.Low>v)&&(y.Low=v)),y.Volume&&!A(y.Volume)&&(y.Volume=parseInt(y.Volume,10)),B+=L,f?(i.length-V<50&&this.updateCurrentMarketData(y,a,f,{fromTrade:!0,animationEntry:d}),(h.interval!="tick"||y.Close!==void 0)&&(L&&(g.splice(B,0,{DT:y.DT}),this.setDisplayDate(g[B])),g[B][f]=y)):(i.length-V<50&&this.updateCurrentMarketData(y,a,null,{fromTrade:!0,animationEntry:d}),(h.interval!="tick"||y.Close!==void 0)&&(g.splice(B,L?0:1,y),this.setDisplayDate(y)));break}B+=k?1:-("1"<<0)}B<0&&(f?(this.updateCurrentMarketData(y,a,f,{fromTrade:!0,animationEntry:d}),(h.interval!="tick"||y.Close!==void 0)&&(g.splice(0,0,{DT:y.DT}),this.setDisplayDate(g[0]),g[0][f]=y)):(this.updateCurrentMarketData(y,a,null,{fromTrade:!0,animationEntry:d}),(h.interval!="tick"||y.Close!==void 0)&&(g.splice(0,0,y),this.setDisplayDate(y))),k=!0,e.z_m(27),B=e.J1m(0,"0"))}g.length&&(this.masterData=a.masterData=g),this.maxMasterDataSize&&(g=a.masterData=this.masterData=g.slice(-this.maxMasterDataSize));function K(){var ne,se,oe,ae,Ae,he,ge,ie,re,de;if(ne="m",ne+="on",e.W16(),ne+="t",ne+="h",!(!s.Market||!a.market)){if(se={market_tz:s.getFromNS(a,"market.market_def.market_tz",null)},oe=h.interval,(oe==ne||oe=="week")&&(u.dontRoll||(oe="day"),se=u.chart.market.market_def),ae=new s.Market(se),Ae={begin:g&&g.length?g[g.length-1].DT:i.DT,interval:oe,periodicity:1,timeUnit:h.timeUnit},he=ae.newIterator(Ae),ge=he.next(),!g)i.DT=new Date(+he.previous());else if(i.DT<ge){for(ie=0,de=he.previous(),re=i.DT,o.appending=!0;re<de&&ie<1e3;)o.appending=!1,de=he.previous(),ie++;i.DT=de,o.updating=!o.appending}else if(i.DT>=ge){for(e.M$m(27),ie=e.J1m(0,"0"),re=i.DT;re>ge&&ie<1e3;)i.DT=ge,ge=he.next(),ie++;o.appending=!0}}}for(var Y=0;Y<w.length;Y++)x=w[Y],(!x.endPoints.begin||x.endPoints.begin>i[0].DT)&&(x.endPoints.begin=i["0">>32].DT),(!x.endPoints.end||x.endPoints.end<i[i.length-1].DT)&&(x.endPoints.end=i[i.length-1].DT),M=x.parameters&&x.parameters.field||a.defaultPlotField,D=this.getFirstLastDataRecord(i,M,!0),D&&(!x.lastQuote||x.lastQuote.DT<=D.DT)&&(x.lastQuote=D),f&&o.deleteItems&&(x.lastQuote=this.getFirstLastDataRecord(g,f,!0)[f]);function G(){var ne,se,oe;if(ne=null,se=0,g.length&&(ne=u.getFirstLastDataRecord(g,f||a.defaultPlotField,!0),ne)){if(i[i.length-1].DT<=ne.DT)return;for(;se<i.length;se++)if(+i[se].DT==+ne.DT){u.getFirstLastDataRecord([i[se]],f||a.defaultPlotField)&&(ne=null);break}else if(i[se].DT>ne.DT)break}oe=i.slice(se),ne&&oe.unshift(f?ne[f]:ne),oe=u.doCleanupGaps(oe,a),ne&&oe.shift(),i=i.slice("0"|0,se).concat(oe)}e.A92();for(var J in this.plugins)Q=this.plugins[J],Q.display&&Q.appendMasterData&&Q.appendMasterData(this,i,a);(!this.masterData||!this.masterData.length)&&(this.masterData=g);function Z(){u.createDataSet(null,null,o),e.A92(),u.draw({animationEntry:d}),u.updateChartAccessories(),u.streamParameters.count=0,u.streamParameters.timeout=-1}o.noCreateDataSet||(q=this.streamParameters,++q.count>q.maxTicks||o.bypassGovernor?(clearTimeout(q.timeout),Z()):q.timeout==-1&&(q.timeout=setTimeout(Z,q.maxWait))),this.runAppend(l,arguments),this.runAppend(c,arguments);function ee(ne,se){var oe,ae,Ae,he;if(oe="s",oe+="t",oe+="re",oe+="tch",Ae=["gap",oe].includes(u.cleanupGaps),f)delete g[ne][f],u.cleanupGaps&&(ae={DT:se,Close:null},!Ae&&g[ne-1]&&g[ne-1][f]&&(ae.Close=g[ne-1][f].Close,ae.High=ae.Low=ae.Open=ae.Close,ae.Volume=0),g[ne][f]=ae);else{he=g.splice(ne,e.J1m("1",32,e.M$m(21)))[0],ae={DT:he.DT,Close:null,needed:!1};for(C in a.series)F=a.series[C].parameters.symbolObject.symbol,typeof he[F]<"u"&&(ae[F]=he[F],delete ae.needed);u.cleanupGaps&&u.cleanupGaps!="gap"&&(delete ae.needed,!Ae&&g[ne-1]&&(ae.Close=g[ne-1].Close,ae.High=ae.Low=ae.Open=ae.Close,ae.Volume=0)),ae.needed!==!1&&(g.splice(ne,0,ae),u.setDisplayDate(ae))}}function X(){var ne;if(m=!0,o.useAsLastSale&&o.useAsLastSale.aggregatedVolume&&(b=!0),i.constructor===Array){e.M$m(123);var se=e.J1m(6,8,13,1);ne=i[i.length-se],i={},i.DT=ne.DT,i.Close=ne.Close,i.Volume=ne.Volume}else i.Last&&(i.Close=i.Last,delete i.Last);i.DT&&Object.prototype.toString.call(i.DT)!="[object Date]"&&(i.DT=new Date(i.DT)),e.W16(),(!i.DT||i.DT=="Invalid Date")&&(i.DT=new Date),h.interval!="tick"&&K(),i.Open=i.Close,i.High=i.Close,i.Low=i.Close}},s.ChartEngine.prototype.updateCurrentMarketData=function(i,a,o,c={}){var l,u,h,d,f,A,p,g,m,b,C,F,w,U,B,k,y;if(l="As",l+="kL",l+="2",u="B",u+="i",u+="d",h="L",h+="a",h+="s",h+="t",d="D",d+="T",f="updat",f+="eCurrentMarke",f+="tDat",f+="a",!(!i||!i.DT)){if(a||(a=this.chart),A=c.fromTrade,p=i.DT,!A&&this.layout.interval!="tick"&&a.market){if(a.market.market_def&&(!a.market.isMarketDate(i.DT)||!s.ChartEngine.isDailyInterval(this.layout.interval)&&a.market.getSession(i.DT)===null))return;g={begin:i.DT,interval:this.layout.interval,periodicity:this.layout.periodicity,timeUnit:this.layout.timeUnit},m=new s.Market(a.market.market_def),this.extendedHours&&this.extendedHours.filter&&m.enableAllAvailableSessions(),b=m.newIterator(g),b.next(),i.DT=b.previous()}this.runPrepend(f,arguments)||(e.A92(),C=A?d:"Timestamp",F=a,w=F.currentMarketData,U=!1,o&&(w[o]||(w[o]={}),w=w[o]),[h,u,"Ask"].forEach(function(S){var T,_;T="nu",T+="mber",i[S]&&typeof i[S]==T&&(_=w[S],(!_||!_[C]||_[C]<=(A?i.DT:p))&&(w[S]={DT:i.DT,Price:i[S],Size:i[S+"Size"],Timestamp:p},U=!0))}),["BidL2",l].forEach(function(S){var T;e.W16(),i[S]&&i[S]instanceof Array&&(T=w[S],(!T||!T[C]||T[C]<=(A?i.DT:p))&&(w[S]={DT:i.DT,Price_Size:i[S],Timestamp:p},U=!0))}),i.Close&&(!w.Last||w.Last.Timestamp<=(i.LastTime||p))&&(B="ti",B+="c",B+="k",k=i.Close,y=c&&c.finalClose,(y||y===0)&&(k=y),w.Last={DT:i.DT,Price:k,Size:i.LastSize===void 0&&this.layout.interval==B?i.Volume:i.LastSize,Timestamp:i.LastTime||p},U=!0),U&&!c.animationEntry&&(w.touched=new Date),A||delete i.Last,this.runAppend("updateCurrentMarketData",arguments))}},s.ChartEngine.prototype.clearCurrentMarketData=function(i,a){var o,c,l;if(e.A92(),!this.runPrepend("clearCurrentMarketData",arguments)){if(c=[],i)c.push(i);else for(o in this.charts)c.push(this.charts[o]);for(o=0;o<c.length;o++)if(l=c[o].currentMarketData,a)delete l[a];else for(var u in l)l[u]=void 0;this.runAppend("clearCurrentMarketData",arguments)}}};jo=E=>{var e=ue,t;t=E.CIQ,t.ChartEngine.prototype.changeOccurred=function(s){var n,r;n="v",n+="ec",n+="t",n+="or",r={stx:this,symbol:this.chart.symbol,symbolObject:this.chart.symbolObject,layout:this.layout,drawings:this.drawingObjects},e.A92(),s=="theme"&&this.dispatch("theme",r),!this.currentlyImporting&&(s=="layout"?this.dispatch("layout",r):s==n?this.dispatch("drawing",r):s=="preferences"&&this.dispatch("preferences",r))},e.W16(),t.ChartEngine.prototype.startAsyncAction=function(){this.pendingAsyncs||(this.pendingAsyncs=[]),e.A92(),this.pendingAsyncs.push(!0)},t.ChartEngine.prototype.registerChartDrawnCallback=function(s){return this.asyncCallbacks||(this.asyncCallbacks=[]),this.asyncCallbacks.push(s),{fc:s}},t.ChartEngine.prototype.unregisterChartDrawnCallback=function(s){for(var n=0;n<this.asyncCallbacks.length;n++)if(this.asyncCallbacks[n]==s.fc){this.asyncCallbacks.splice(n,1);return}},t.ChartEngine.prototype.makeAsyncCallbacks=function(){if(this.asyncCallbacks&&(!this.pendingAsyncs||!this.pendingAsyncs.length))for(var s=0;s<this.asyncCallbacks.length;s++)this.asyncCallbacks[s]()},t.ChartEngine.prototype.completeAsyncAction=function(){e.A92(),this.pendingAsyncs.pop(),this.makeAsyncCallbacks()},t.ChartEngine.prototype.addDomEventListener=function(s,n,r,i){s.addEventListener(n,r,i),this.eventListeners.push({element:s,event:n,function:r,options:i})},t.ChartEngine.prototype.addEventListener=function(s,n){var r;if(e.A92(),s==="*")for(var i in this.callbackListeners)this.callbackListeners[i].push(n);else if(s instanceof Array)for(var a=0;a<s.length;a++)this.callbackListeners[s[a]].push(n);else{if(r=this.callbackListeners[s],!r)throw new Error("Attempted to add an invalid listener.");r.push(n)}return{type:s,cb:n}},t.ChartEngine.prototype.removeEventListener=function(s,n){var r,i;if((!s||typeof s!="object")&&(s={type:s,cb:n}),r=function(o,c){e.W16();for(var l=0;l<o.length;l++)if(o[l]===c){o.splice(l,1);return}},i=this.callbackListeners,s.type==="*"){for(var a in i)r(i[a],s.cb);return}if(!i[s.type])throw new Error("Attempted to remove an invalid listener.");r(i[s.type],s.cb)},t.ChartEngine.prototype.dispatch=function(s,n){var r;if(r=this.callbackListeners[s],r){for(var i=0;i<r.length;i++)if(r[i].call(this,n)===!0)return!0}if(r=this.callbackListeners["*"],r){for(var a=0;a<r.length;a++)if(r[a].call(this,n)===!0)return!0}return!1},t.ChartEngine.prototype.updateListeners=function(s){e.A92();var n;for(var r in this.plugins)n=this.plugins[r],n.display&&n.listener&&n.listener(this,s)},t.ChartEngine.registerGlobalEvent=function(s,n,r,i){Array.isArray(s)||(s=[s]),s.forEach(a=>{var o,c,l;e.z_m(27),o=-e.J1m(1,"680292939"),e.z_m(21),c=e.v7v("1777877044",0),e.W16(),l=2;for(var u="1"^0;e.D8X(u.toString(),u.toString().length,7752)!==o;u++)t.ChartEngine.globalEventHandlers.push({event:a,listener:n,options:r&&!0,isWindow:i,applied:[]}),l+=2;e.S1v(l.toString(),l.toString().length,44989)!==c&&t.ChartEngine.globalEventHandlers.push({event:a,listener:n,options:r&&!0,isWindow:i,applied:[]}),t.ChartEngine.globalEventHandlers.push({event:a,listener:n,options:r||!1,isWindow:i,applied:[]})}),t.ChartEngine.attachGlobalEventHandlers()},t.ChartEngine.attachGlobalEventHandlers=function(){e.A92();var s;s=t.ChartEngine.registeredContainers,s.forEach(n=>{var r;r=n.ownerDocument,t.ChartEngine.globalEventHandlers.forEach(function(i){var a,o,c,l,u,h;a=i.event,o=i.listener,c=i.options,l=i.isWindow,u=i.applied,e.W16(),u.indexOf(r)===-1&&(h=l?r.defaultView:r,h.addEventListener(a,o,c),u.push(r))})})}};$o=E=>{var e=ue,t;t=E.CIQ,t.ChartEngine.prototype.prepend=function(s,n){var r,i,a,o,c,l;r="p",r+="re",r+="pen",r+="d",e.z_m(12),i=e.J1m(r,s),this instanceof t.ChartEngine?(a=this.hasOwnProperty(i)?this[i]:[],this[i]=[n].concat(a)):(a=t.ChartEngine.prototype[i]||[],t.ChartEngine.prototype[i]=[n].concat(a)),o=-712943740,c=960918515,l=2;for(var u=1;e.D8X(u.toString(),u.toString().length,84641)!==o;u++)return{method:i,func:n};return e.D8X(l.toString(),l.toString().length,8456)!==c?{method:i,func:n}:{method:i,func:n}},t.ChartEngine.prototype.append=function(s,n){var r,i;return e.M$m(12),e.A92(),r=e.J1m("append",s),this instanceof t.ChartEngine?(i=this.hasOwnProperty(r)?this[r]:[],this[r]=i.concat(n)):(i=t.ChartEngine.prototype[r]||[],t.ChartEngine.prototype[r]=i.concat(n)),{method:r,func:n}},t.ChartEngine.prototype.runPrepend=function(s,n,r){var i,a,o,c;if(i="pre",i+="pend",e.z_m(12),a=e.v7v(i,s),o=this.hasOwnProperty(a)?this[a]:[],o=o.concat(t.ChartEngine.prototype[a]||[]),!o.length)return!1;r||(r=this);for(var l=0;l<o.length;l++)if(c=o[l].apply(r,n),c)return c;return!1},t.ChartEngine.prototype.runAppend=function(s,n,r){e.A92();var i,a,o;if(e.z_m(12),i=e.J1m("append",s),a=this.hasOwnProperty(i)?this[i]:[],a=a.concat(t.ChartEngine.prototype[i]||[]),!a.length)return!1;r||(r=this);for(var c="0"<<64;c<a.length;c++)if(o=a[c].apply(r,n),o)return o;return!1},t.ChartEngine.prototype.removeInjection=function(s){var n,r;if(n=s.method,e.W16(),this instanceof t.ChartEngine){if(!this[n])return;for(r=0;r<this[n].length;r++)if(this[n][r]==s.func){this[n].splice(r,1);return}}else{if(!t.ChartEngine.prototype[n])return;for(r=0;r<t.ChartEngine.prototype[n].length;r++)if(t.ChartEngine.prototype[n][r]==s.func){t.ChartEngine.prototype[n].splice(r,1);return}}},e.W16(),t.ChartEngine.prototype.remove=function(s){var n;this instanceof t.ChartEngine?(n="ap",n+="p",n+="en",n+="d",e.z_m(12),delete this[e.J1m(n,s)],e.z_m(12),delete this[e.J1m("prepend",s)]):(e.M$m(12),delete t.ChartEngine.prototype[e.v7v("append",s)],e.M$m(12),delete t.ChartEngine.prototype[e.J1m("prepend",s)])}};Go=E=>{var e,t,s,n,r;e="b",e+="efo",e+="reunload",t="<div clas",t+='s="stx-panel-control"><div class="stx-panel-t',t+='itle"></div><div class="stx-panel-legend"></div></div>',s='<div class="stx',s+='_sticky"> <span class="mStickyInterior"></span></div>',n=E.CIQ,r=E.timezoneJS,n.ChartEngine.prototype.convertToDataZone=function(i){var a;return(i||i===0)&&this.dataZone&&(a=n.convertTimeZone(i,null,this.dataZone),i=new Date(a.getFullYear(),a.getMonth(),a.getDate(),a.getHours(),a.getMinutes(),a.getSeconds(),a.getMilliseconds())),i},n.ChartEngine.prototype.debug=function(){},n.ChartEngine.prototype.fps=function(i,a){var o=ue,c,l,u;i=i||5,c=new Date().getTime(),l=0,u=this,o.M$m(40),console.log(o.v7v("Running fps() for ",i," seconds")),h();function h(){var d,f;o.A92(),o.M$m(124);var A=o.v7v(2483,17,2,7e3);if(d=(new Date().getTime()-c)/A,d>i){o.z_m(26),f=o.v7v(d,l),o.z_m(12),console.log(o.v7v("FPS=",f)),a&&a(f);return}u.draw(),l++,n.ChartEngine.useAnimation?u.ownerWindow.requestAnimationFrame(h):setTimeout(h,0)}},n.ChartEngine.htmlControls={mSticky:s,iconsTemplate:t},n.ChartEngine.prototype.setChartType=function(i){var a,o,c,l,u;if(a="l",a+="ay",a+="o",a+="ut",o="o",o+="h",o+="l",o+="c",c=this.layout,l=this.chart,c.aggregationType!=o&&(u="o",u+="h",u+="l",u+="c",c.aggregationType=u,l.canvas&&this.createDataSet()),ue.A92(),c.chartType=i,this.setMainSeriesRenderer(),this.mainSeriesRenderer.isAggregation&&this.setAggregationType)return this.setAggregationType(i);l.defaultChartStyleConfig={type:i},this.displayInitialized&&this.draw(),this.changeOccurred(a)},n.ChartEngine.prototype.setChartScale=function(i){i||(i="linear"),this.layout.chartScale=i,this.chart.canvas&&this.draw(),ue.A92(),this.changeOccurred("layout")},n.ChartEngine.prototype.checkLogScale=function(){var i,a,o,c,l;if(i="l",i+="o",i+="g",a="c",a+="heckLogScal",a+="e",!this.runPrepend(a,arguments))return this.layout.chartScale!==i?!1:(o=!1,this.chart.yAxis.lowValue<=0&&(c="not",c+="ification",l="lin",l+="e",l+="ar",this.setChartScale(l),this.dispatch(c,"logdeactivated"),o=!0),this.runAppend("checkLogScale",arguments),o)},n.ChartEngine.prototype.setAdjusted=function(i){var a;a="la",a+="y",a+="o",ue.A92(),a+="ut",this.layout.adj=i,this.chart.canvas&&(this.createDataSet(),this.draw()),this.changeOccurred(a)},n.ChartEngine.prototype.padOutPrice=function(i,a){var o=ue,c,l,u,h;if(i!==0&&(!i||typeof i!="number"))return"";if(!a&&a!==0&&(a=i),o.M$m(12),c=o.v7v("",a),l=0,c.indexOf(".")>-1){o.M$m(12),o.v7v(3294,6587),o.z_m(43);var d=o.J1m(12,14,7227);o.z_m(106),o.J1m(3,16,609,5,935),o.M$m(15);var f=o.J1m(30,14,17);l=c.substring(c.indexOf(+"534.39">=d?"l":".")).length-("1"|f)}return a>=1e3?(o.M$m(25),l=Math.max(l,o.J1m("0",1))):a<"2">>0?l=Math.max(l,4):l=Math.max(l,2),u=this.internationalizer,u?(h=u.priceFormatters.length,l>=h&&(o.z_m(2),l=o.v7v(h,1)),i=u.priceFormatters[l].format(i)):i=i.toFixed(l),i},n.ChartEngine.prototype.formatPrice=function(i,a){var o,c,l,u;return o="un",o+="defined",i!=="0"<<0&&(!i||typeof i==o)?"":(a||(a=this.currentPanel),a||(a=this.chart.panel),!a||(c=a.decimalPlaces,!c&&c!==0&&(c=a.chart.decimalPlaces),!c&&c!=="0">>0)?i.toString():(l=this.internationalizer,l?(u=l.priceFormatters.length,c>=u&&(ue.M$m(125),c=ue.v7v("1",u)),i=l.priceFormatters[c].format(i)):i=i.toFixed(c),i))},n.ChartEngine.prototype.determineMinMax=function(i,a,o,c,l,u,h,d,f){var A=ue,p,g,m,b,C,F,w,U,B,k,y,S,T,_,L,H;A.M$m(126);var P=A.v7v(20,20,0);p=Number.MAX_VALUE*P,g=Number.MAX_VALUE,m=!1,b=i.length,f||(f=[]),C=[],l&&(b=l),F=d||this.chart.yaxis||{},w=F.clamp,w&&w.minmax&&(U=this.getTransformFunction(d),f.push(()=>U?[U(this,this.chart,w.minmax[0]),U(this,this.chart,w.minmax[1])]:(A.A92(),w.minmax)));for(var N=0;N<=b+1;N++)if(a.length&&(N==b?B=this.getPreviousBar(this.chart,a[0],0):N==b+1?B=this.getNextBar(this.chart,a[0],b-("1"-0)):B=i[N]),!!B){if(!c){if(k=this.getTransformedQuote(B,d||this.chart.yaxis),k)m=!0,B=k;else if(m)continue}A.M$m(25),y=A.J1m("0",1);for(var v=0;v<a.length;v++)if(S="nu",S+="mbe",S+="r",T=n.existsInObjectChain(B,a[v]),!!T){_=T.obj[T.member],typeof _==S&&(_=[_]);for(var x=0;x<_.length;x++)L=_[x],u&&L instanceof Array&&(L=L[0]),(L||L===0)&&(o===!0||o instanceof Array&&o.indexOf(a[v])>-("1"^0)?(y+=L,y>p&&(p=y),y<g&&(g=y)):(L>p&&(p=L),L<g&&(g=L),C.push({value:L,quote:B})))}(o===!0||o instanceof Array&&o.indexOf(a[v])>-1)&&C.push({value:y,quote:B})}return H=[g,p],f.forEach(function(M){A.A92(),H=M(C,h,d)||H}),H[1]==Number.MAX_VALUE*-1&&(H[1]=0),H[0]==Number.MAX_VALUE&&(H[0]=0),H},n.ChartEngine.prototype.initializeDisplay=function(i){var a=ue,o,c,l,u,h,d,f,A,p,g,m,b,C,F,w,U,B,k;if(o="L",o+="o",o+="w",this.runPrepend("initializeDisplay",arguments))return;c=[],l=[],u=!1,h=this,d=["Close","Open","High",o],f=[i.defaultPlotField||"Close"];function y(H,P){var N,v,x,M,D,Q,q,O,R,V,K;if(N=!1,v=h.layout&&h.layout.studies&&h.layout.studies[H.name],v&&!(v.disabled||v.signalData&&!v.signalData.reveal)&&(!P||P.name==v.panel)){x="_hi",x+="s",x+="t";for(var Y in v.outputMap)c.push(Y),v.study&&(v.study.renderer?c=c.concat(n.createObjectChainNames(Y,d)):v.study.seriesFN||(c=c.concat(n.createObjectChainNames(Y,f))));for(var G=0;G<=2;G++)c.push(v.name+x+(G||""));N=!0}if(P){H.studies=[],H.renderers=[],N&&H.studies.push(H.name);for(var J in g)if(M=g[J],D=M.params,Q=D.panel,(D.yAxis||!h.panels[Q]||h.panels[Q].yAxis)==H&&Q==P.name){q=M.highLowBars?d:f,u=M.bounded;for(var Z=0;Z<M.seriesParams.length;Z++)O=M.seriesParams[Z],!(O.hidden||O.disabled)&&(R=void 0,O.subField?R=n.createObjectChainNames(O.symbol,[O.subField]).concat(O.symbol):O.symbol?R=n.createObjectChainNames(O.symbol,q).concat(O.symbol):O.field?R=O.field:H==i.panel.yAxis&&(R=q),R&&(c=c.concat(R)),M.useSum&&(l=l.concat(R)));H.renderers.push(J)}for(var ee in h.overlays)V=h.overlays[ee],V.panel==P.name&&V.name!=H.name&&(K=V.getYAxis(h),K==H&&(H.studies.push(V.name),i.includeOverlaysInMinMax&&y({name:V.name})))}}if(A=this.mainSeriesRenderer,p=i.dataSegment,g=i.seriesRenderers,b=null,C=Math.floor((i.width-this.micropixels)/this.layout.candleWidth),i.scroll>i.maxTicks&&i.maxTicks>C+1){a.z_m(2);var S=a.v7v(10,9);b=p.length-S}F=[];for(var T in this.panels){w=this.panels[T],F=w.yaxisLHS.concat(w.yaxisRHS);for(var _="0"|0;_<F.length;_++){if(U=F[_],c=[],l=[],B=this.getTransformFunction(U),y(U,w),!this.currentlyImporting&&!U.renderers.length&&!U.studies.length){this.deleteYAxisIfUnused(w,U);continue}A.determineMax?m=A.determineMax(p,c,l,!B,b,u,w,U):m=this.determineMinMax(p,c,l,!B,b,u,w,U),this.baselineHelper&&(m=this.setBaselineMinMax(m,U)),U.lowValue=m[0],U.highValue=m[1],U==i.panel.yAxis&&(i.lowValue=U.lowValue,i.highValue=U.highValue)}}if(a.W16(),k=i.state.aggregation,k&&k.box){a.M$m(2);var L=a.J1m(14,12);i.lowValue-=k.box/L,i.highValue+=k.box/2}this.runAppend("initializeDisplay",arguments)},n.ChartEngine.prototype.setMarket=function(i,a){if(n.Market){ue.W16(),a||(a=this.chart),a.market=new n.Market(i);for(var o in this.layout.marketSessions)a.market.disableSession(o,this.layout.marketSessions[o])}},n.ChartEngine.prototype.setMarketFactory=function(i){ue.W16(),this.marketFactory=i},n.ChartEngine.prototype.setResizeTimer=function(i){var a;a=()=>{ue.A92();var o,c,l;o=this.chart,c=o.canvas,l=o.container,!(!c||n.isAndroid)&&(c.height!==Math.floor(this.devicePixelRatio*l.clientHeight)||c.width!==Math.floor(this.devicePixelRatio*l.clientWidth))&&this.resizeChart()},ue.W16(),this.resizeHandle=n.resizeObserver(this.chart.container,a,this.resizeHandle,i)},n.ChartEngine.prototype.getRenderedItems=function(){var i,a,o,c,l,u,h,d,f,A;if(i="C",i+="l",i+="os",i+="e",a="Hig",a+="h",o=this.chart,c=this.currentPanel,!!c){l=["Open",a,"Low","Close"],u=[i],h=[];for(var p in this.overlays)this.overlays[p].panel===c.name&&(h=h.concat(Object.keys(this.overlays[p].outputMap)));for(var g in o.seriesRenderers)if(d=o.seriesRenderers[g],d.params.panel==c.name)for(var m in d.seriesParams)f=d.seriesParams[m],A=d.highLowBars?l:u,f.subField?h=h.concat(n.createObjectChainNames(f.symbol,[f.subField])).concat(f.symbol):f.symbol?h=h.concat(n.createObjectChainNames(f.symbol,A)).concat(f.symbol):f.field?h.push(f.field):c==o.panel&&(h=h.concat(A));return h}},n.ChartEngine.prototype.setTransform=function(i,a,o){i.transformFunc=a,i.untransformFunc=o},n.ChartEngine.prototype.unsetTransform=function(i){ue.A92(),delete i.transformFunc,delete i.untransformFunc;for(var a=0;i.dataSet&&a<i.dataSet.length;a++)i.dataSet[a].transform=null},n.ChartEngine.prototype.getTransformFunction=function(i,a){var o,c,l;return o=this.chart,c=a?"untransformFunc":"transformFunc",i&&(l=i[c]),!l&&(!i||i===o.panel.yAxis)&&(l=o[c]),l},n.ChartEngine.prototype.updateTransformFunction=function(i,a,o){var c,l;c=this.chart,l=o?"untransformFunc":"transformFunc",a&&a[l]&&(a[l]=i),a==c.panel.yAxis&&c[l]&&(c[l]=i)},n.ChartEngine.prototype.isEquationChart=function(i){return ue.W16(),i&&i["0"|0]=="="?!this.allowEquations||!n.fetchEquationChart?(console.warn("Error, equation chart option requires equationsAdvanced.js"),!1):!0:!1},n.ChartEngine.prototype.correctIfOffEdge=function(i){var a=ue;a.W16();var o,c,l,u,h,d,f,A,p,g,m,b;if(o="correc",o+="tI",o+="fOffEdge",c="c",c+="o",c+="rrect",c+="IfOffEdge",!this.runPrepend(c,arguments)){for(var C in this.charts){if(l=this.charts[C],u=l.dataSet,h=l.maxTicks,d=this.layout,f=this.minimumLeftBars,A=Math.min(f,h),l.allowScrollPast){if(a.z_m(2),p=a.J1m(h,A),A>u.length&&(p=h-u.length),l.scroll-p>=u.length){a.M$m(15);var F=a.v7v(12,3,10);l.scroll=u.length+p-F,this.micropixels=0}l.scroll<=A&&(l.scroll=A,this.micropixels=0)}else l.scroll<A&&(l.scroll=A),l.scroll>u.length&&(l.scroll=u.length);if(l.allowScrollFuture===!1){g=this.getLabelOffsetInPixels(l,d.chartType)+d.candleWidth*l.whiteSpaceFutureTicks,a.M$m(43);var w=a.v7v(2,16,15);m=h-Math.round(g/d.candleWidth)-w,b=this.micropixels<0?l.scroll-1:l.scroll,b<m&&(l.scroll=m,this.micropixels=0)}}this.runAppend(o,arguments)}},n.ChartEngine.prototype.getStartDateOffset=function(){ue.W16();for(var i=0;i<this.chart.dataSegment.length;i++)if(this.chart.dataSegment[i])return i;return 0},n.ChartEngine.prototype.setStartDate=function(i){var a;ue.A92();for(var o=0;o<this.chart.dataSet.length;o++)if(a=this.chart.dataSet[o],a.DT.getTime()==i.getTime()){this.chart.scroll=this.chart.dataSet.length-o,this.draw();return}},n.ChartEngine.prototype.clearPixelCache=function(){var i;for(var a in this.panels)i=this.panels[a],i.cacheHigh=null,i.cacheLow=null,i.cacheLeft=1e6,i.cacheRight=-1;this.chart.pixelCacheExpired=!0},n.ChartEngine.prototype.adjustBackingStore=function(i,a){var o=ue,c,l,u,h;if(this.devicePixelRatio=window.devicePixelRatio||1,o.A92(),this.devicePixelRatio<1&&(this.devicePixelRatio=1),c=this.devicePixelRatio,!this.useBackingStore){this.devicePixelRatio=this.adjustedDisplayPixelRatio=1,i.style.width=i.style.height="";return}(!n.isAndroid||n.is_chrome||n.isFF)&&(l="p",l+="x",u=i.width,h=i.height,o.z_m(25),i.width=o.v7v(u,c),o.z_m(25),i.height=o.v7v(h,c),o.z_m(12),i.style.width=o.J1m(u,l),o.z_m(12),i.style.height=o.v7v(h,"px"),a.scale(c,c),this.adjustedDisplayPixelRatio=c,this.backing={ratio:c,width:i.width,height:i.height,styleWidth:u,styleHeight:h})},n.ChartEngine.prototype.reconstituteBackingStore=function(){var i,a,o,c,l;if(!(!this.useBackingStore||!this.backing)){i=[this.chart.canvas],a=-1984580690,o=1530087574,c=2;for(var u=1;ue.D8X(u.toString(),u.toString().length,98250)!==a;u++)this.useBackgroundCanvas&&i.push(this.chart.backgroundCanvas),l=this.backing,c+=2;ue.D8X(c.toString(),c.toString().length,71317)!==o&&(this.useBackgroundCanvas&&i.push(this.chart.backgroundCanvas),l=this.backing),this.useBackgroundCanvas&&i.push(this.chart.backgroundCanvas),l=this.backing,i.forEach(function(h){h.width!=l.width&&(h.width=l.width,h.height=l.height,h.context.scale(l.ratio,l.ratio))}),this.adjustedDisplayPixelRatio=l.ratio,this.draw()}},n.ChartEngine.prototype.disableBackingStore=function(){var i,a;!this.useBackingStore||!this.backing||(i=[this.chart.canvas],this.useBackgroundCanvas&&i.push(this.chart.backgroundCanvas),a=this.backing,i.forEach(function(o){o.width!=a.styleWidth&&(ue.W16(),o.width=a.styleWidth,o.height=a.styleHeight,o.context.scale(1,1))}),this.adjustedDisplayPixelRatio=1,ue.A92(),this.draw())},n.ChartEngine.prototype.getBackgroundCanvas=function(i){return i||(i=this.chart),this.useBackgroundCanvas?i.backgroundCanvas:i.canvas},n.ChartEngine.prototype.resizeCanvas=function(){var i,a,o,c,l,u,h,d,f;i="h",ue.W16(),i+="tml",a=this.chart.canvas,o=this.chart.context,a&&o&&(this.floatCanvas.height=this.chart.tempCanvas.height=this.chart.backgroundCanvas.height=a.height=this.chart.container.clientHeight,this.floatCanvas.width=this.chart.tempCanvas.width=this.chart.backgroundCanvas.width=a.width=this.chart.container.clientWidth,this.adjustBackingStore(a,o),this.adjustBackingStore(this.chart.tempCanvas,this.chart.tempCanvas.context),this.adjustBackingStore(this.floatCanvas,this.floatCanvas.context),this.adjustBackingStore(this.chart.backgroundCanvas,this.chart.backgroundCanvas.context)),c=this.container.getBoundingClientRect(),this.top=c.top,this.left=c.left,this.chart.canvasWidth=this.chart.container.clientWidth,this.right=this.left+this.chart.canvasWidth,this.height=this.chart.container.clientHeight,this.width=this.right-this.left,this.width===0&&!this.container.dimensionlessCanvas&&this.container.closest(i)&&!this.container.closest("cq-context-wrapper")&&console.log("warning: zero width chart. Check CSS for chart container."),this.bottom=this.top+this.height,this.calculateYAxisPositions(),this.chart.canvasRight=this.right,this.chart.canvasHeight=this.height,l=this.layout.candleWidth,typeof l>"u"&&(l=8);for(var A in this.charts){u=this.charts[A],this.setCandleWidth(l,u),u.scroll<u.width/l&&(u.scroll=Math.floor(u.width/l),h=Math.round(this.preferences.whitespace/this.layout.candleWidth),u.scroll-=h),d=10;try{ue.z_m(8);var p=ue.v7v(1,0,19,17);f=o.measureText("10:00").width*p}catch{f=100}for(;d>1&&!(this.chart.width/f>d);)d/=1.5;u.xAxis.autoComputedTickSizePixels=Math.round(this.chart.width/d),u.xAxis.autoComputedTickSizePixels<1&&(u.xAxis.autoComputedTickSizePixels=1)}},n.ChartEngine.prototype.setCandleWidth=function(i,a){a||(a=this.chart),i=this.constrainCandleWidth(i),this.layout.candleWidth=i,ue.M$m(36);var o=ue.J1m(12,9,107);a.maxTicks=Math.round(a.width/i)+o},n.ChartEngine.prototype.constrainCandleWidth=function(i){var a,o,c;return a=this.minimumCandleWidth,o=this.maximumCandleWidth,ue.A92(),c=this.animations.zoom,a&&i<a&&(i=a,c&&c.running&&c.stop(this.ownerWindow)),o&&i>o&&(i=o,c&&c.running&&c.stop(this.ownerWindow)),i},n.ChartEngine.prototype.resizeChart=function(i){var a;this.runPrepend("resizeChart",arguments)||(i!==!1&&(i=!0),i&&this.preAdjustScroll(),a=this.chart.canvasHeight,this.resizeCanvas(),i&&this.postAdjustScroll(),ue.A92(),this.displayInitialized?(this.adjustPanelPositions(),this.draw(),this.activeDrawing&&this.activeDrawing.adjust()):this.chart.canvasHeight!==0&&a===0&&(this.adjustPanelPositions(),this.draw()),this.doDisplayCrosshairs(),this.updateChartAccessories(),this.runAppend("resizeChart",arguments))},n.ChartEngine.prototype.clear=function(){ue.A92();var i,a;this.displayInitialized=!1;for(var o in this.layout.studies)i="St",i+="u",i+="dies.",i+="removeStudy",a=this.layout.studies[o],n.getFn(i)(this,a);this.controls.chartControls&&(this.controls.chartControls.style.display="none"),this.chart.panel.title.innerHTML="",this.chart.panel.title.appendChild(document.createTextNode(this.chart.panel.display))},n.ChartEngine.prototype.fillScreen=function(){var i,a,o,c,l;if(ue.W16(),i=this.chart,a=this.layout.candleWidth,o=i.width-this.preferences.whitespace,c=i.dataSet.length,c*a>=o){this.draw();return}this.mainSeriesRenderer.standaloneBars||c--,ue.M$m(26),l=ue.v7v(c,o),this.setCandleWidth(l,i),this.home({maintainWhitespace:!0})},n.ChartEngine.prototype.setMaxTicks=function(i,a){var o,c,l;this.crossSection||(a||(a={}),i=Math.round(i),i<2&&(i=2),o=a.padding?a.padding:0,c=this.chart,l=(c.width-o)/(i-1)||8,ue.W16(),this.setCandleWidth(l,c),(a.padding||a.padding===0)&&(c.scroll=i))},n.ChartEngine.prototype.initializeChart=function(i){var a,o,c,l,u,h,d,f,A,p,g,m,b,C,F,w,U,B,k;if(a="i",a+="niti",a+="al",a+="izeChart",this.runPrepend("initializeChart",arguments))return;o=this.chart,o.symbolObject.symbol||(o.symbolObject.symbol=o.symbol),this.locale&&this.setLocale(this.locale),!this.displayZone&&n.ChartEngine.defaultDisplayTimeZone&&this.setTimeZone(null,n.ChartEngine.defaultDisplayTimeZone),this.resetDynamicYAxis({noRecalculate:!0}),this.calculateYAxisPositions(),this.micropixels=0,i?o.container=i:i=o.container,i.stx=this,i.CIQRegistered||(i.CIQRegistered=!0,n.ChartEngine.registeredContainers.push(i),n.ChartEngine.attachGlobalEventHandlers()),this.registerHTMLElements&&this.registerHTMLElements(),this.setCandleWidth(this.layout.candleWidth),c=this,o.backgroundCanvas||(l="stx-canvas",l+="-",l+="shim",o.backgroundCanvas=T("backgroundCanvas"),o.canvas=T("canvas"),o.tempCanvas=T("tempCanvas",!0),this.floatCanvas=T("floatCanvas",!0),o.context=o.canvas.context,o.canvasShim=document.createElement("div"),o.canvasShim.className=l,i.insertBefore(o.canvasShim,o.canvas)),this.resizeCanvas(),n.isAndroid&&(u="touc",u+="hstar",u+="t",h="t",h+="ouchst",h+="a",h+="rt",d=function(H){H.preventDefault&&H.preventDefault()},o.tempCanvas.addEventListener(h,d,{passive:!1}),this.floatCanvas.addEventListener(u,d,{passive:!1})),f=this.panels,o.panel.display=o.symbol,o.symbolDisplay&&(o.panel.display=o.symbolDisplay),this.adjustPanelPositions(),o.panel=f[o.name];for(var y in f){A=f[y].yaxisLHS.concat(f[y].yaxisRHS);for(var S=0;S<A.length;S++)A[S].height=f[y].yAxis.height,this.calculateYAxisMargins(A[S])}function T(H,P){var N=ue,v,x,M,D,Q,q,O;if(v="0",v+="p",v+="x",x="ca",x+="n",x+="va",x+="s",M=document.createElement(x),M.context=M.getContext("2d"),M.context.lineWidth=1,H==="canvas"&&!c.linkedChartEngine)M.role="image",N.z_m(25),M.tabIndex=-N.v7v("1",1);else{D=1189978122,N.M$m(2),Q=N.J1m("17587750",0),q=2;for(var R=1;N.D8X(R.toString(),R.toString().length,58687)!==D;R++)M.ariaHidden="",N.M$m(25),q+=N.J1m("2",1);N.S1v(q.toString(),q.toString().length,24024)!==Q&&(M.ariaHidden=""),M.ariaHidden="true"}return O=M.style,O.position="absolute",O.left=v,P&&(O.display="none"),i.appendChild(M),M}this.initialWhitespace=this.preferences.whitespace,o.dataSet&&o.dataSet.length>0&&(o.scroll=Math.floor(o.width/this.layout.candleWidth),p=Math.round(this.preferences.whitespace/this.layout.candleWidth),o.scroll-=p),n.touchDevice&&(g=".",g+="vectorTrashCan",m=i.querySelector(".overlayEdit"),b=i.querySelector(".overlayText"),C=i.querySelector(".overlayTrashCan"),F=i.querySelector(g),w=function(H,P,N,v){return function(x){H.deleteHighlighted(P,N,v)}},b&&n.safeClickTouch(b,w(this,!0,!1,!0)),m?(n.safeClickTouch(m,w(this,!0,!0,!1)),C&&n.safeClickTouch(C,w(this,!1))):C&&n.safeClickTouch(C,w(this,!0)),F&&n.safeClickTouch(F,w(this,!0))),this.manageTouchAndMouse&&this.registerTouchAndMouseEvents(),this.handleMouseOut&&(i.onmouseout=function(H){return ue.A92(),function(P){H.handleMouseOut(P)}}(this),n.smartHover(i.ownerDocument)),this.abortDrawings&&this.abortDrawings(),this.undoStamps=[];for(var _ in f)U=f[_],U.markerHolder&&(i.removeChild(U.markerHolder),U.markerHolder=null);for(var L in this.plugins)B=this.plugins[L],B.display&&B.initializeChart&&B.initializeChart(this);this.resizeListenerInitialized||(this.resizeListenerInitialized=!0,k=function(){return function(H){ue.W16(),c.resizeChart()}},this.addDomEventListener(i.ownerDocument.defaultView,"resize",k(),!0)),o.baseline.userLevel&&(o.baseline.userLevel=null),this.setResizeTimer(),this.runAppend(a,arguments)},n.ChartEngine.prototype.destroy=function(){var i,a,o,c;this.setResizeTimer(0),this.detachQuoteFeed&&this.detachQuoteFeed(),this.styles={};for(var l=0;l<this.eventListeners.length;l++)i="f",i+="unctio",i+="n",a=this.eventListeners[l],a.element.removeEventListener(a.event,a[i],a.options);this.touchAndMouseEventsRegistered=!1,this.eventListeners=[],ue.A92(),this.streamParameters.timeout&&clearTimeout(this.streamParameters.timeout),o=n.ChartEngine.registeredContainers,c=o.indexOf(this.chart.container),c>-("1"|1)&&o.splice(c,1),this.destroyed=!0,this.dispatch("destroy",{stx:this})},n.ChartEngine.registerGlobalEvent(e,function(){ue.W16();var i;i=n.ChartEngine.registeredContainers.slice(0),i.forEach(a=>{if(ue.W16(),a.ownerDocument===this.document)try{a.stx.destroy(),a.stx=null}catch{}}),n.ChartEngine.globalEventHandlers.forEach(a=>{var o;if(o=a.applied.indexOf(this.document),ue.W16(),o>-1)try{a.applied.splice(o)}catch{}}),this.document.body.innerHTML=""},!1,!0),n.ChartEngine.prototype.preAdjustScroll=function(i){i||(i=this.chart),this.previousAdjust={chart:i,scroll:i.scroll,maxTicks:i.maxTicks}},n.ChartEngine.prototype.postAdjustScroll=function(){var i;ue.A92(),this.previousAdjust&&(i=this.previousAdjust.chart,i.scroll=this.previousAdjust.scroll+(i.maxTicks-this.previousAdjust.maxTicks),this.displayInitialized&&this.drawWithRange())},n.ChartEngine.prototype.translateIf=function(i){return this.translationCallback?this.translationCallback(i,this.preferences.language):(ue.W16(),i)},n.ChartEngine.prototype.doCleanupDates=function(i,a){var o,c,l,u,h,d;if(!(!i||!i.length))for(var f=0;f<i.length;f++)o=i[f],c=o.DT,!(!c&&!o.Date)&&(o.DT&&Object.prototype.toString.call(c)=="[object String]"&&c.length<=10?(c=new Date(c),c.setMinutes(c.getMinutes()+c.getTimezoneOffset())):(l="[ob",l+="jec",l+="t Date]",u=!0,o.DT||(c=n.strToDateTime(o.Date),o.Date.length<=10&&(u=!1)),Object.prototype.toString.call(c)!=l&&(c=new Date(c)),r.Date&&this.dataZone&&u&&(h=new r.Date(c.getFullYear(),c.getMonth(),c.getDate(),c.getHours(),c.getMinutes(),this.dataZone),d=c.getSeconds()*1e3+c.getMilliseconds(),c=new Date(h.getTime()+d)),n.ChartEngine.isDailyInterval(a)&&c.setHours(0,0,0,0)),o.DT||(o.Date=n.yyyymmddhhmmssmmm(c)),o.DT=c)},n.ChartEngine.prototype.doCleanupGaps=function(i,a,o){var c,l,u,h,d,f,A,p,g,m,b,C,F,w,U,B;c="w",c+="e",c+="ek",l="ti",l+="ck";function k(_,L){var H,P,N,v,x,M,D;for(H=o.field,P=H?p[H]:p,P===void 0&&(P={}),N=d?null:P[C],v=d?null:"0"<<0,x=d?null:P.Adj_Close,M=d?A[A.length-1].DT:void 0;+_<+L;)D={DT:_},H||(A.push(D),n.extend(D,{Open:N,High:N,Low:N,Close:N,Volume:v,Adj_Close:x,_previous:M})),_=b.next()}if(!i||!i.length)return i;function y(_,L){var H=ue,P,N,v,x,M,D,Q,q,O,R;if(P=o.field,P){N="un",N+="def",N+="ined",typeof _[P]!=N&&typeof L[P]>"u"&&(L[P]=d?null:_[P]),v=39870721,x=-497955916,M=2;for(var V=1;H.S1v(V.toString(),V.toString().length,62629)!==v;V++)return;if(H.D8X(M.toString(),M.toString().length,87546)!==x)return}if(!d&&(D=_[C],Q=L[C],typeof D<"u"&&typeof Q>"u")){q=293410482,O=2131439105,R=2;for(var K=1;H.D8X(K.toString(),K.toString().length,67027)!==q;K++)n.ensureDefaults(L,{Close:D,Open:D,High:D,Low:D,Volume:0,Adj_Close:_.Adj_Close}),R+=2;H.S1v(R.toString(),R.toString().length,74258)!==O&&n.ensureDefaults(L,{Close:D,Open:D,High:D,Low:D,Volume:9,Adj_Close:_.Adj_Close})}}if(u=this.layout.interval,o=o||{},a||(a=this.chart),!n.Market||!a.market||(o.noCleanupDates||this.doCleanupDates(i,u),h=o.cleanupGaps,h===!1)||((!h||h===!0)&&(h=this.cleanupGaps||h),d=["gap","stretch"].includes(h),!h)||u==l)return i;if(u=="month"||u==c){if(this.dontRoll)return i;u="day"}f=function(_){return _.DT?Object.prototype.toString.call(_.DT)!="[object Date]"?new Date(_.DT):new Date(+_.DT):(ue.A92(),n.strToDateTime(_.Date))},A=[],p=i[0],A.push(p),g={begin:f(p),interval:u,periodicity:"1"-0,timeUnit:this.layout.timeUnit},m=new n.Market(a.market.market_def),b=m.newIterator(g),this.extendedHours&&this.extendedHours.filter&&b.market.enableAllAvailableSessions(),ue.A92(),C=a.defaultPlotField;for(var S=0;S<i.length&&i[S][C]===void 0;S++)if(i[S].Value!==void 0){F="V",F+="a",F+="l",F+="ue",C=F;break}for(var T=1;T<i.length;T++){for(U=i[T],w=b.next(),B=f(U),w<B&&(k(w,B),w=b.market._convertFromMarketTZ(b.begin,b.outZone));B<w;){if(++T==i.length)return A;y(p,U),A.push(U),p=U,U=i[T],B=f(U)}w<B?(T--,w=b.previous()):(y(p,U),A.push(U),p=U)}return A},n.ChartEngine.prototype.getCreatingLibrary=function(){return ue.W16(),E}};Jo=E=>{var e=ue,t;t=E.CIQ,t.ChartEngine.Panel=function(s,n){n?this.yAxis=n:this.yAxis=new t.ChartEngine.YAxis,this.name=s,this.state={}},t.extend(t.ChartEngine.Panel.prototype,{name:null,display:null,chart:null,yAxis:null,shareChartXAxis:null,top:null,bottom:null,height:null,percent:null,displayEdgeIfPadded:!0,noDrag:!1,exportable:!0,titlePadding:5,gridYAxisName:null,clipVerticalTextToPanel:function(s,n){var r,i,a,o;e.z_m(127);var c=e.J1m(9,5,18,17);return r=this.subholder.offsetHeight-this.titlePadding*c,i=s,a=n.measureText(i).width,a<=r?i:(o=r/(a/i.length),e.M$m(2),`${i.slice(0,e.J1m(o,3))}...`)}},!0),t.ChartEngine.prototype.whichPanel=function(s){var n;for(var r in this.panels)if(n=this.panels[r],!n.hidden&&s>=n.top&&s<n.bottom)return n;return null},t.ChartEngine.prototype.getPanelByField=function(s){e.W16();var n,r,i,a,o,c;if(s){for(n in this.layout.studies)if(r=this.layout.studies[n],r.outputMap&&r.outputMap.hasOwnProperty(s)&&r.parameters)return this.panels[r.parameters.panelName];for(n in this.chart.seriesRenderers){i=this.chart.seriesRenderers[n];for(var l=0;l<i.seriesParams.length;l++)if(a="-",a+="-",a+=">",o=i.seriesParams[l],c=o.field,!c&&!i.highLowBars&&(c=this.defaultPlotField||"Close"),o.symbol&&o.subField&&(c+=a+o.subField),s==c||o.field&&o.field==s.split("-->")[0])return this.panels[i.params.panel]}}},t.ChartEngine.prototype.panelExists=function(s){var n;for(var r in this.panels)if(n=this.panels[r],n.name==s)return!0;return!1},t.ChartEngine.prototype.storePanels=function(){var s,n;this.layout||(this.layout={}),s=this.layout,s.panels={};for(var r in this.panels)n=this.panels[r],s.panels[n.name]={percent:n.percent,display:n.display,yAxis:n.yAxis}},t.ChartEngine.prototype.savePanels=function(s){this.storePanels(),e.W16(),s!==!1&&this.changeOccurred("layout")},t.ChartEngine.prototype.privateDeletePanel=function(s){var n,r;for(var i in this.layout.studies)n=this.layout.studies[i],n.panel==s.name&&this.cleanupRemovedStudy(n);delete this.panels[s.name];for(var a in this.overlays)this.overlays[a].panel==s.name&&(this.layout.studies&&this.cleanupRemovedStudy(this.layout.studies[a]),delete this.overlays[a]);if(!this._rendererMoving)for(var o in this.chart.series)this.chart.series[o].parameters.panel==s.name&&this.removeSeries(this.chart.series[o],this.chart);if(s.holder&&(this.chart.container.removeChild(s.holder),this.getMarkerArray)){this.markerHelper&&(this.markerHelper.fieldPanelMap={}),r=this.getMarkerArray("panelName",s.name);for(var c=0;c<r.length;c++)this.removeFromHolder(r[c])}s.handle&&s.handle.remove(),this.currentPanel=null},t.ChartEngine.prototype.plotsInPanel=function(s){var n,r,i,a;n=[],r=s,typeof s=="object"&&(r=s.name);for(var o in this.layout.studies)i=this.layout.studies[o],r===i.panel&&n.push(i);for(var c in this.chart.seriesRenderers)a=this.chart.seriesRenderers[c],r===a.params.panel&&n.push(a);return n},t.ChartEngine.prototype.checkForEmptyPanel=function(s,n,r){e.A92();var i,a;if(!s||(i=s,typeof s=="object"&&(i=s.name),i===this.chart.name))return!1;r?r instanceof Array||(r=[r]):r=[],a=this.plotsInPanel(s);for(var o=0;o<a.length;o++)if(r.indexOf(a[o])==-1)return!1;return n||this.panelClose(this.panels[i]),!0},t.ChartEngine.prototype.panelClose=function(s){var n,r;if(n="pan",n+="e",n+="lC",n+="lose",!!s&&!this.runPrepend("panelClose",arguments)){if(this.cancelTouchSingleClick=!0,t.ChartEngine.drawingLine=!1,s.soloing&&this.panelSolo(s),e.W16(),this.charts[s.name]){for(var i in this.panels)r=this.panels[i],r.chart.name==s.name&&this.privateDeletePanel(r);delete this.charts[s.name]}else this.privateDeletePanel(s);this.currentlyImporting||(this.showCrosshairs(),this.resetDynamicYAxis({noRecalculate:!0}),this.calculateYAxisPositions(),this.draw(),this.savePanels()),this.userPointerDown=this.grabbingScreen=!1,this.openDialog&&(this.openDialog=""),this.runAppend(n,arguments)}},t.ChartEngine.prototype.panelUp=function(s){var n,r,i,a;this.cancelTouchSingleClick=!0,t.ChartEngine.drawingLine=!1,this.showCrosshairs(),n={},r=0;for(i in this.panels){if(i==s.name)break;r++}if(r){a=0;for(i in this.panels)a==r-1&&(n[s.name]=s),i!=s.name&&(n[i]=this.panels[i],a++);this.panels=n,this.adjustPanelPositions(),this.draw(),this.savePanels()}},t.ChartEngine.prototype.panelDown=function(s){var n,r,i,a,o;this.cancelTouchSingleClick=!0,t.ChartEngine.drawingLine=!1,this.showCrosshairs(),n={},r=0;for(i in this.panels){if(i==s.name)break;r++}a=0;for(i in this.panels)a++;if(r!=a-1){o=0;for(i in this.panels){if(i==s.name){o++;continue}n[i]=this.panels[i],o==r+("1"^0)&&(n[s.name]=s),o++}this.panels=n,this.adjustPanelPositions(),this.draw(),this.savePanels()}},t.ChartEngine.prototype.panelSolo=function(s){var n,r,i,a;if(this.cancelTouchSingleClick=!0,t.ChartEngine.drawingLine=!1,e.W16(),this.showCrosshairs(),n=!0,s.soloing){if(n=!1,s.soloing=!1,s.solo.classList.remove("stx_solo_lit"),s.percent=s.oldPercent,s.name!="chart")if(this.soloPanelToFullScreen){if(s.percent=="1"<<64)for(r in this.panels)i=this.panels[r],i!=s&&(s.percent-=i.percent)}else this.chart.panel.percent=this.chart.panel.oldPercent;this.soloPanelToFullScreen&&(this.xAxisAsFooter=this.chart.panel.oldXAxisAsFooter)}else s.soloing=!0,s.solo.classList.add("stx_solo_lit"),s.oldPercent=s.percent,this.chart.panel.oldXAxisAsFooter=this.xAxisAsFooter,s.name!="chart"&&(this.soloPanelToFullScreen?this.xAxisAsFooter=!0:(this.chart.panel.oldPercent=this.chart.panel.percent,s.percent=1-this.chart.panel.percent));for(r in this.panels)a="c",a+="har",a+="t",s!==this.panels[r]&&(r===a&&!this.soloPanelToFullScreen||(this.panels[r].hidden=n));this.resetDynamicYAxis({noRecalculate:!0}),this.calculateYAxisPositions(),this.draw(),this.savePanels()},t.ChartEngine.prototype.calculatePanelPercent=function(s){e.A92();var n;n=s.bottom-s.top,this.isPanelWithXAxis(s)&&(n-=this.xaxisHeight),s.percent=n/(this.chart.canvasHeight-this.xaxisHeight)},t.ChartEngine.prototype.resizePanels=function(){var s,n,r,i,a,o;if(t.ChartEngine.resizingPanel){a=t.ChartEngine.crosshairY>this.resolveY(t.ChartEngine.resizingPanel.top);for(var c in this.panels){if(this.panels[c]==t.ChartEngine.resizingPanel)break;this.panels[c].hidden||(s=this.panels[c])}if(o=this.backOutY(t.ChartEngine.crosshairY),a)for(r=t.ChartEngine.resizingPanel.yaxisLHS.concat(t.ChartEngine.resizingPanel.yaxisRHS),i=0;i<r.length;i++){e.M$m(2);var l=e.J1m(90,80);n=r[i].initialMarginTop+r[i].initialMarginBottom+l,o>r[i].bottom-n&&(o=r[i].bottom-n)}else for(r=s.yaxisLHS.concat(s.yaxisRHS),i=0;i<r.length;i++){e.z_m(128);var u=e.J1m(20,21,1,12);n=r[i].initialMarginTop+r[i].initialMarginBottom+u,o<r[i].top+n&&(o=r[i].top+n)}t.ChartEngine.crosshairY=this.resolveY(o),s.bottom=o,t.ChartEngine.resizingPanel.top=o,this.calculatePanelPercent(s),this.calculatePanelPercent(t.ChartEngine.resizingPanel),this.adjustPanelPositions(),this.draw(),this.savePanels()}},t.ChartEngine.prototype.isPanelAboveChart=function(s){var n;for(var r in this.panels){if(n="ch",n+="ar",n+="t",r==n)return!1;if(r==s.name)return!0}return!1},e.A92(),t.ChartEngine.prototype.isPanelWithXAxis=function(s){return this.xAxisAsFooter&&s===Object.values(this.panels).filter(function(n){return e.W16(),!n.hidden}).pop()||!this.xAxisAsFooter&&s===this.chart.panel},t.ChartEngine.prototype.adjustPanelPositions=function(){var s,n,r,i,a,o,c,l,u,h,d,f,A,p,g,m,b,C,F,w,U,B,k,y,S,T,_,L,H,P,N,v;if(s="adjustPanelPosi",s+="tion",s+="s",n="s",n+="tx-show",r=this.chart,i=this.panels,e.W16(),r.tempCanvas&&this.activeDrawing&&!this.editingAnnotation&&t.clearCanvas(r.tempCanvas,this),!this.runPrepend("adjustPanelPositions",arguments)){a=0,o=r.canvasHeight-this.xaxisHeight,c=!1,e.z_m(17),l=e.v7v("0",0),u=0,h=!1;for(d in i)f=i[d],(isNaN(f.percent)||f.percent<=0)&&(f.percent=.05),!f.hidden&&(l+=f.percent,u++,f.soloing&&(h=!0));for(d in i){if(g=0,f=i[d],f.hidden){f.markerHolder&&(f.markerHolder.style.display="none");continue}if(A||(A=f),p=f,this.manageTouchAndMouse&&(f.up&&(c?this.displayIconsUpDown&&f.up.classList.add("stx-show"):(c=!0,f.up.classList.remove("stx-show"))),f.solo&&(h?(m="stx",m+="-sho",m+="w",f.soloing&&this.displayIconsSolo?f.solo.classList.add(m):f.solo.classList.remove("stx-show")):u==1||u==2&&!this.soloPanelToFullScreen?f.solo.classList.remove("stx-show"):this.displayIconsSolo&&f.solo.classList.add("stx-show")),f.down&&(u==1?(b="st",b+="x-sho",b+="w",f.down.classList.remove(b)):this.displayIconsUpDown&&f.down.classList.add("stx-show")),f.edit&&(f.editFunction?f.edit.classList.add("stx-show"):f.edit.classList.remove("stx-show")),f.close&&(C="stx-",C+="sho",C+="w",this.displayIconsClose?f.close.classList.add(C):f.close.classList.remove("stx-show"))),f.percent=f.percent/l,f.top=a,f.bottom=f.top+o*f.percent,this.isPanelWithXAxis(f)&&(f.bottom+=this.xaxisHeight),f.height=f.bottom-f.top,f.chart.name==f.name&&(f.chart.top=f.top,f.chart.bottom=f.bottom,f.chart.height=f.height),f.height<27?f.holder.classList.add("stx-panel-is-min-height"):(F="stx",F+="-pan",F+="el-is-m",F+="in-height",f.holder.classList.remove(F)),a=f.bottom,f.yaxisLHS){w=f.yaxisLHS.concat(f.yaxisRHS);for(var x=0;x<w.length;x++)U="n",U+="o",U+="n",U+="e",B=w[x],B.zoom&&B.height>("0"^0)&&(g=B.zoom/B.height),this.adjustYAxisHeightOffset(f,B),B.height=B.bottom-B.top,g&&(B.scroll*=g*B.height/B.zoom,B.zoom=g*B.height,B.zoom>=B.height&&(B.zoom=0,B.scroll=0)),!B.high&&B.high!==0&&(e.M$m(27),B.high=e.v7v(96,"100"),B.low=0,B.shadow=100),B.multiplier=B.height/B.shadow,B.position===U&&this.calculateYAxisMargins(B)}f.holder&&(k="p",k+="x",y="p",y+="x",S="0",S+="p",S+="x",f.holder.style.right=S,f.holder.style.top=f.top+y,f.holder.style.left="0px",f.holder.style.height=f.height+"px",f.subholder.style.left=f.left+k,f.subholder.style.width=f.width+"px",f.subholder.style.top="0px",f.yAxis.height>=0&&(f.subholder.style.height=f.yAxis.height+"px"))}if(A&&A.up&&A.up.classList.remove(n),p&&p.down&&p.down.classList.remove("stx-show"),this.manageTouchAndMouse&&u==2&&!h&&r.panel.solo&&r.panel.solo.classList.add("stx-show"),r.panel){if(h&&this.soloPanelToFullScreen){e.M$m(129);var M=e.J1m(1,1,7,20,14);T=r.canvasHeight-f.yAxis.bottom+M}else{e.M$m(2);var D=e.v7v(96,84);T=r.canvasHeight-r.panel.yAxis.bottom+D}_=this.controls,L=_.chartControls,H=_.home,P=_.notificationTray,N=this.width-r.panel.right,L&&(e.M$m(12),L.style.bottom=e.J1m(T,"px")),H&&(e.z_m(12),H.style.bottom=e.v7v(T,"px"),e.z_m(12),H.style.marginRight=e.J1m(N,"px")),P&&(v="p",v+="x",e.z_m(12),P.style.bottom=e.v7v(T,v),e.z_m(12),P.style.marginRight=e.v7v(N,"px"))}this.clearPixelCache(),this.drawingObjects.length&&this.adjustDrawings(),this.activeDrawing&&!this.editingAnnotation&&this.undo(),this.runAppend(s,arguments)}},t.ChartEngine.prototype.createPanel=function(s,n,r,i,a,o){var c,l,u,h,d;if(!this.runPrepend("createPanel",arguments)){i||(i="chart"),c=this.chart.canvasHeight,r||(e.z_m(76),r=e.J1m("0.2",c)),r>c&&(e.M$m(25),r=e.v7v(c,.5)),e.z_m(26),l=e.v7v(c,r),e.z_m(2),u=e.J1m(1,l),h=!1;for(var f in this.panels)d=this.panels[f],d.percent*=u,d.soloing&&(h=!0);return this.stackPanel(s,n,l,i,a),this.panels[n].hidden=h,this.panels[n].exportable=!o,this.calculateYAxisMargins(this.panels[n].yAxis),this.resetDynamicYAxis(),this.adjustPanelPositions(),this.savePanels(!1),this.runAppend("createPanel",arguments),this.panels[n]}},t.ChartEngine.prototype.modifyPanel=function(s,n){var r,i,a,o,c,l,u,h,d,f,A,p,g,m,b;r=s.name,i=this.layout.studies,a=this.chart.series,o=n||{},c=o.name,l=o.display,u=o.yAxis,c||(c=t.uniqueID()),l||(l=c),u||(u=s.yAxis,u.name=c),h={};for(var C in this.panels)C===s.name?(f=this.panels[C],f.name=c,f.display=l,f.yAxis=u,s=h[c]=f,this.moveMarkers&&r!==c&&(d=c)):h[C]=this.panels[C];this.panels=h,d&&this.moveMarkers(r,d),A=!1;for(var F in i)p=i[F],p.panel===r&&(p.panel=c,p.parameters&&p.parameters.panelName&&(A=!0,p.parameters.panelName=c));for(var w in a)a[w].parameters.panel===r&&(A=!0,g={panel:c},a[w].parameters.yAxis&&a[w].parameters.yAxis.name===r&&(g.yAxis=u),this.modifySeries(w,g,!!a[w].parameters.dependentOf));A&&this.changeOccurred("layout"),m=!1;for(var U=0;U<this.drawingObjects.length;U++)b=this.drawingObjects[U],r===b.panelName&&(b.panelName=c,m=!0);m&&this.changeOccurred("vector"),this.calculateYAxisPositions()},t.ChartEngine.prototype.setPanelHeight=function(s,n){var r,i,a,o,c,l,u,h,d;if(n){Object.values(this.panels).slice(-1)[0]===s&&(n+=this.xaxisHeight),r=this.chart.canvasHeight,i=s.percent,a=n/(r-this.xaxisHeight),o=-142016790,c=224992325,l=2;for(var f=1;e.D8X(f.toString(),f.toString().length,65042)!==o;f++)e.M$m(130),u=e.v7v("7",i),e.M$m(26),h=e.J1m(a,9),e.M$m(25),d=e.J1m(u,h),l+=2;e.S1v(l.toString(),l.toString().length,74637)!==c&&(e.M$m(131),u=e.v7v("6",i),e.z_m(2),h=e.v7v(8,a),e.z_m(12),d=e.v7v(u,h)),e.M$m(2),u=e.J1m(1,i),e.M$m(2),h=e.J1m(1,a),e.z_m(26),d=e.v7v(h,u),Object.values(this.panels).forEach(A=>{A.percent/=d}),s.percent=a,this.adjustPanelPositions(),this.savePanels()}},t.ChartEngine.prototype.electNewPanelOwner=function(s,n){var r,i,a,o,c,l,u,h;typeof s=="string"&&(s=this.panels[s]);function d(A){return A.name!=i.name}if(i=s.yAxis,s&&s!=this.chart.panel){if(a=s.yAxis,o=a.studies[0],(!o||o==i.name)&&(o=a.renderers[0]),(!o||o==i.name)&&(o=a.studies[1]),o||(o=a.renderers[1]),n)a=s.yAxis=n,r=n.name;else if(o)a=this.addYAxis(s,new t.ChartEngine.YAxis({name:o,position:a.position})),a.renderers=s.yAxis.renderers,a.studies=s.yAxis.studies,r=o;else if(s.yaxisLHS){c=s.yaxisRHS.concat(s.yaxisLHS).filter(d),l=c[0];for(var f=0;f<c.length;f++)if(!c[f].position){l=c[f];break}l&&(a=s.yAxis=l,r=l.studies["0"|0]||l.renderers[0])}r?(o=r,i.name!=s.name&&(o=s.name),h=this.layout.studies,h&&h[r]&&(u=h[r].inputs.display),this.modifyPanel(s,{name:o,display:u||r,yAxis:a}),this.deleteYAxisIfUnused(s,i),this.panels[o].yAxis.lockScale||this.calculateYAxisMargins(this.panels[o].yAxis)):this.checkForEmptyPanel(s)}return r},t.ChartEngine.prototype.configurePanelControls=function(s){var n,r,i,a,o,c,l;n=".st",n+="x-ico",n+="-",n+="down",r=".stx",r+="-",r+="ico",r+="-up",i="stx",i+="-",i+="sho",i+="w",a=s.icons,a&&(o=s.name==s.chart.name,a.classList.add(i),a.classList.remove("iconsTemplate"),s.title=a.querySelector(".stx-panel-title"),s.up=a.querySelector(r),s.up&&(s.up=s.up.parentNode),s.solo=a.querySelector(".stx-ico-focus"),s.solo&&(s.solo=s.solo.parentNode),s.down=a.querySelector(n),s.down&&(s.down=s.down.parentNode),s.edit=a.querySelector(".stx-ico-edit"),s.edit&&(s.edit=s.edit.parentNode),s.close=a.querySelector(".stx-ico-close"),s.close&&(s.close=s.close.parentNode),s.title&&(s.title.innerHTML="",s.display&&s.title.appendChild(document.createTextNode(s.display)),o&&(s.title.classList.add("chart-title"),a.classList.add("stx-chart-panel"))),this.makeModal(a),s.handle&&((!t.touchDevice||t.isSurface)&&(s.handle.onmouseover=function(u){return e.W16(),function(){u.hideCrosshairs()}}(this)),(!t.touchDevice||t.isSurface)&&(s.handle.onmouseout=function(u){return function(){u.showCrosshairs()}}(this)),c=function(u,h){return e.W16(),function(d){t.ChartEngine.resizingPanel||u.openDialog!==""||(e.A92(),u.grabHandle(h))}},t.isSurface?s.handle.onpointerdown=c(this,s):s.handle.onmousedown=c(this,s),t.touchDevice&&s.handle.addEventListener("touchstart",c(this,s),{passive:!1})),s.up&&t.safeClickTouch(s.up,function(u,h){return function(){e.W16(),u.panelUp(h)}}(this,s)),s.down&&t.safeClickTouch(s.down,function(u,h){return function(){e.W16(),u.panelDown(h)}}(this,s)),s.solo&&t.safeClickTouch(s.solo,function(u,h){return function(){u.panelSolo(h)}}(this,s)),s.close&&(s.name=="chart"?(l="no",l+="ne",s.close.style.display=l):t.safeClickTouch(s.close,function(u,h){return e.A92(),function(){u.panelClose(h)}}(this,s))))},t.ChartEngine.prototype.stackPanel=function(s,n,r,i,a){var o,c,l,u,h;o="stx-p",o+="anel-ch",o+="a",o+="rt",!this.runPrepend("stackPanel",arguments)&&(i||(i="chart"),c=this.charts[i],e.z_m(99),l=e.v7v(i,n),e.W16(),l&&(s=c.symbol,c.symbolDisplay&&(s=c.symbolDisplay),a||(a=c.yAxis)),u=this.panels[n]=new t.ChartEngine.Panel(n,a),!l&&c.yAxis&&u.yAxis.position==c.yAxis.position&&(u.yAxis.width=c.yAxis.width),l&&!c.panel&&(c.panel=u),u.percent=r,u.chart=c,u.display=s,u.holder=t.newChild(this.container,"div","stx-holder"),u.subholder=t.newChild(u.holder,"div","stx-subholder"),u.subholder.style.zIndex=1,u.holder.panel=u,h=l?o:"stx-panel-study",u.holder.classList.add(h),u.yaxisLHS=[],u.yaxisRHS=[],this.controls.handleTemplate&&this.manageTouchAndMouse&&(u.handle=this.controls.handleTemplate.cloneNode(!0),u.handle.classList.remove("handleTemplate"),this.container.appendChild(u.handle),u.handle.panel=u),this.controls.iconsTemplate&&(u.icons=this.controls.iconsTemplate.cloneNode(!0),u.subholder.appendChild(u.icons),this.configurePanelControls(u)),this.currentlyImporting||this.resizeCanvas(),this.runAppend("stackPanel",arguments))},t.ChartEngine.prototype.setPanelEdit=function(s,n){s.editFunction=n,s.edit&&t.safeClickTouch(s.edit,n),this.adjustPanelPositions()},t.ChartEngine.prototype.drawPanels=function(){var s,n,r,i,a,o,c,l,u,h,d,f,A,p,g,m,b;if(s="d",s+="rawPanels",n="dr",n+="awPan",n+="el",n+="s",!this.runPrepend(n,arguments)){r=!1,e.A92();for(var C in this.panels){if(i="seg",i+="ment",a="s",a+="tx-show",o=this.panels[C],o.state={},c=this.translateIf(o.display),o.title&&o.title.textContent!=c&&(o.title.innerHTML="",o.title.appendChild(document.createTextNode(c))),o.icons&&o.icons.classList.add(a),o.hidden){o.icons&&o.icons.classList.remove("stx-show"),o.handle&&(o.handle.style.display="none"),o.holder.style.display="none";continue}else o.name!="chart"&&(l="non",l+="e",u="n",u+="on",u+="e",h="n",h+="o",h+="n",h+="e",d=this.manageTouchAndMouse,o.up&&(o.up.style.display=this.displayIconsUpDown&&d?"":h),o.down&&(o.down.style.display=this.displayIconsUpDown&&d?"":"none"),o.solo&&(o.solo.style.display=this.displayIconsSolo&&d?"":u),o.close&&(o.close.style.display=this.displayIconsClose&&d?"":"none"),o.edit&&(o.edit.style.display=o.editFunction&&d?"":l)),o.holder.style.display="block";if(o.displayEdgeIfPadded&&(f="seg",f+="ment",A=Math.round(o.left)+.5,p=o.yAxis.top-.5,g=o.yAxis.bottom+.5,o.yaxisCalculatedPaddingLeft&&!o.yaxisTotalWidthLeft&&this.plotLine(A,A,p,g,this.canvasStyle("stx_grid_border"),"segment",this.chart.context,!1,{lineWidth:1}),A=Math.round(o.right)+.5,o.yaxisCalculatedPaddingRight&&!o.yaxisTotalWidthRight&&this.plotLine(A,A,p,g,this.canvasStyle("stx_grid_border"),f,this.chart.context,!1,{lineWidth:1})),!r){o.handle&&(o.handle.style.display="none"),r=!0;continue}if(m=o.top,m=Math.round(m)+("0.5"-0),this.plotLine(o.left-("0.5"-0),o.right+.5,m,m,this.canvasStyle("stx_panel_border"),i,this.chart.context,!1,{}),o.handle){this.displayPanelResize?o.handle.style.display="":(b="n",b+="o",b+="n",b+="e",o.handle.style.display=b),e.M$m(15);var F=e.J1m(54,16,40);o.handle.style.top=m-o.handle.offsetHeight/F+"px"}}this.runAppend(s,arguments)}}};Zo=E=>{var e;e=E.CIQ,e.ChartEngine.isDailyInterval=function(t){return ue.W16(),t=="day"||t=="week"||t=="month"},e.ChartEngine.prototype.setPeriodicity=function(t,s){var n=ue,r,i,a,o,c,l,u,h,d,f,A,p,g,m,b,C,F,w,U,B,k,y,S,T,_,L,H,P,N,v,x,M,D,Q;r="functio",r+="n",i="obje",i+="c",i+="t";function q(){n.A92(),b.dispatch("periodicity",C),s&&s(null)}if(!this.runPrepend("setPeriodicity",arguments)){if(typeof arguments[0]!==i){t={period:arguments[0],interval:arguments[1],timeUnit:arguments[2]},n.z_m(43);var O=n.J1m(8,14,7);s=arguments[arguments.length-O],arguments.length===3&&(t.timeUnit=void 0)}if(o=t,c=o.period,l=o.interval,u=o.timeUnit,typeof s!==r&&(s=null),a=e.cleanPeriodicity(c,l,u),c=a.period,l=a.interval,u=a.timeUnit,h=this.layout,h.setSpan={},h.range={},this.chart.inflectionPoint=null,d=t.getDifferentData,!d&&this.chart.symbol&&(d=this.needDifferentData({period:c,interval:l,timeUnit:u})),f=h.candleWidth,A=h.periodicity,p=h.interval,g=h.timeUnit,m={prvPeriodicity:A,prvInterval:p,prvTimeUnit:g},h.periodicity=c,h.interval=l,h.timeUnit=u,b=this,C={stx:b,differentData:d,prevPeriodicity:m},d){if(this.changeOccurred("layout"),this.clearCurrentMarketData(),this.quoteDriver)for(var R in this.charts)F=this.charts[R],F.symbol&&(this.displayInitialized?this.quoteDriver.newChart({symbol:F.symbol,symbolObject:F.symbolObject,chart:F},q):this.loadChart(F.symbol,{chart:F},q));else this.dataCallback?(this.dataCallback(),q()):console.log("cannot change periodicity because neither dataCallback or quoteDriver are set");this.home(),w=-1753056663,U=-2129218858,B=2;for(var V=1;n.D8X(V.toString(),V.toString().length,26945)!==w;V++)return;return n.D8X(B.toString(),B.toString().length,66704)!==U,void 0}for(var K in this.charts)if(k=this.charts[K],y=k.dataSegment,S=k.dataSet,T=k.maxTicks,_=k.scroll,L=y?y.length:0,H=S?S.length:0,P=void 0,N=Math.round(k.maxTicks/2),this.setCandleWidth(f,k),v=!0,x=!1,_<=T?v=!1:y&&!y[N]&&(v=!1,n.M$m(2),x=n.J1m(_,H)),v&&L>0&&(T<(Math.round(this.chart.width/f-.499)-1)/2&&(n.z_m(2),N=n.v7v(L,1)),N>=L?(P=y[L-1].DT,n.M$m(2),N=n.v7v(L,1)):P=y[N].DT),this.createDataSet(),v){if(L>0){for(var Y=H-1;Y>=0;Y--)if(M=S[Y].DT,M.getTime()<P.getTime()){n.M$m(49),k.scroll=n.J1m(Y,H,N,1);break}}}else x?k.scroll=S.length+x:(D=Math.round(this.preferences.whitespace/f),n.z_m(71),k.scroll=n.J1m(T,1,D));if(this.displayInitialized&&this.draw(),this.changeOccurred("layout"),this.quoteDriver)for(var G in this.charts)Q=this.charts[G],Q.symbol&&(Q.moreAvailable||!Q.upToDate)&&this.quoteDriver.checkLoadMore(Q);q(),this.runAppend("setPeriodicity",arguments)}},e.ChartEngine.prototype.needDifferentData=function(t){var s,n,r,i;return s=this.layout,n=e.ChartEngine.isDailyInterval(t.interval),r=e.ChartEngine.isDailyInterval(s.interval),i=!1,this.dontRoll||!r?s.interval!=t.interval&&(i=!0):n!=r&&(i=!0),!n&&!t.timeUnit&&(t.timeUnit="minute"),!r&&!s.timeUnit&&(s.timeUnit="minute"),t.timeUnit!=s.timeUnit&&(i=!0),(!this.masterData||!this.masterData.length)&&(i=!0),i},e.ChartEngine.prototype.getPeriodicity=function(){var t,s,n;return t=this.layout,s=t.interval,n=t.timeUnit,ue.A92(),n||(n=s,s=1),{period:t.periodicity,interval:s,timeUnit:n}}};el=E=>{var e=ue,t;t=E.CIQ,t.ChartEngine.prototype.isHistoricalMode=function(){var s,n,r,i,a,o;return s=new Date,n=!0,r=this.masterData,e.W16(),this.isHistoricalModeSet?(r.length&&(i=this.getFirstLastDataRecord(r,"DT",!0),a=this.standardMarketIterator(i.DT),n=(a?a.next():i.DT)<=s,n&&t.ChartEngine.isDailyInterval(a.interval)&&(o=this.chart.market.getOpen(),o&&s<o&&(s.setHours(0,0,0,0),+s==+a.begin&&(n=!1)))),n):!1},t.ChartEngine.prototype.isHome=function(){var s,n,r;s=this.chart,n=s.dataSet,e.W16(),r=s.animatingHorizontalScroll,e.z_m(132);var i=e.J1m(11,8,77,13,1);e.M$m(15);var a=e.v7v(1,2,0);return this.pixelFromTick(n.length-(r?i:a),s)<s.width+s.panel.left},t.ChartEngine.prototype.getPreviousBar=function(s,n,r){return this.getNextBarInternal(s,n,r,-1)},t.ChartEngine.prototype.getNextBar=function(s,n,r){return e.A92(),this.getNextBarInternal(s,n,r,1)},t.ChartEngine.prototype.getNextBarInternal=function(s,n,r,i){var a,o,c,l;if(a=s.dataSegment&&s.dataSegment[r],a){for(o=a.tick;o>0&&o<s.dataSet.length;)if(e.M$m(12),o=e.J1m(o,i),c=s.dataSet[o],c&&(l=t.existsInObjectChain(c,n),l&&l.obj[l.member]))return c}return null},t.ChartEngine.prototype.getFirstLastDataRecord=function(s,n,r){var i,a;if(s&&s.length)for(i=r?s.length-1:0;i>=0&&i<s.length;){if(a="un",a+="defined",s[i]&&typeof s[i][n]!=a)return s[i];r?i--:i++}return null},e.A92(),t.ChartEngine.prototype.leftTick=function(){return this.chart.dataSet.length-this.chart.scroll},t.ChartEngine.prototype.getNextInterval=function(s,n,r){var i;return n||(e.z_m(17),n=e.v7v("1",0)),r!==!1&&(r=!0),i=this.standardMarketIterator(s,r?this.dataZone:this.displayZone),i?n<1?(e.M$m(133),i.previous(e.v7v("1",n))):i.next(n):s},t.ChartEngine.prototype.standardMarketIterator=function(s,n,r){var i,a;return i=r||this.chart,i.market?(a={begin:s,interval:this.layout.interval,periodicity:this.layout.interval=="tick"?this.chart.xAxis.futureTicksInterval:this.layout.periodicity,timeUnit:this.layout.timeUnit,outZone:n},e.A92(),i.market.newIterator(a)):null}};tl=E=>{var e=ue,t,s;E.SplinePlotter||(E.SplinePlotter={}),t=E.CIQ,s=E.SplinePlotter,t.ChartEngine.prototype.draw=function(n){var r,i,a,o,c,l,u,h,d,f,A;if(this.debug(),!this.destroyed&&(r=this.chart,i=this.layout,!!r.canvas&&r.dataSet&&r.canvasHeight)){e.M$m(134);var p=e.v7v(0,110,22,20,2);if(this.offset=i.candleWidth*this.candleWidthPercent/p,t.clearCanvas(r.canvas,this),!!this.masterData&&!this.runPrepend("draw",arguments)){this.defaultColor||this.getDefaultColor(),this.vectorsShowing=!1,this.drawPanels(),this.yAxisLabels=[],this.correctIfOffEdge(),this.chart.scroll=Math.min(Math.max(1,this.chart.scroll),this.chart.dataSet.length+this.chart.maxTicks-1),this.createDataSegment(),this.setBaselines(r),c=this.createXAxis(r),this.initializeDisplay(r),this.drawXAxis(r,c);try{this.renderYAxis(r)}catch(C){var g;if(g="reb",g+="oot dr",g+="a",g+="w",C&&C.message===g)return this.draw();throw C}this.currentHRParams=this.getCurrentHRParams(),this.drawCurrentPriceLine();for(a in this.plugins)o=this.plugins[a],o.display&&o.drawUnder&&o.drawUnder(this,r);r.legendColorMap={},this.rendererAction(r,"underlay"),t.getFn("Studies.displayStudies")(this,r,!0),this.displayChart(r),t.getFn("Studies.displayStudies")(this,r,!1),this.rendererAction(r,"overlay"),this.setCanvasTitle(),r.legend&&r.legendColorMap&&r.legendRenderer&&r.legendRenderer(this,{chart:r,legendColorMap:r.legendColorMap,coordinates:{x:r.legend.x,y:r.legend.y+r.panel.yAxis.top}});for(a in this.plugins)o=this.plugins[a],o.display&&o.drawOver&&o.drawOver(this,r);e.A92();for(var m in this.panels)this.panels[m].hidden||this.plotYAxisText(this.panels[m]);for(var b=0;b<this.yAxisLabels.length;b++)l=this.yAxisLabels[b],!(l.src=="series"&&l.args[6]&&l.args[6].drawSeriesPriceLabels===!1)&&this.createYAxisLabel.apply(this,l.args);this.createCrosshairs&&this.createCrosshairs(),this.drawVectors&&this.drawVectors(),this.drawCurrentHR(),this.currentHRParams=null,this.displayInitialized=!0,u=this.controls,u&&(h="b",h+="lock",d=this.manageTouchAndMouse&&!this.mainSeriesRenderer.nonInteractive,u.home&&(u.home.style.display=d&&!this.isHome()?h:"none"),u.chartControls&&(f="bl",f+="ock",A="h",A+="i",A+="dden",u.chartControls.style.display=this.manageTouchAndMouse&&u.chartControls.style.visibility!==A?f:"none",u.chartControls.style.display==="block"&&t.efficientDOMUpdate(u.chartControls.style,"left",r.left+r.width/("2"^0)+"px"))),t.Marker&&this.positionMarkers(),this.quoteDriver&&this.animations.zoom.hasCompleted&&this.quoteDriver.checkLoadMore(r),this.runAppend("draw",arguments),this.makeAsyncCallbacks()}}},t.ChartEngine.prototype.drawWithRange=function(n){e.W16(),this.draw(n)},t.ChartEngine.prototype.setCanvasTitle=function(){var n,r,i,a,o,c,l,u,h,d,f,A,p,g,m,b,C,F,w;this.linkedChartEngine||(n="",r=this.layout,i=r.chartType,a=r.aggregationType,o=r.symbols,c=r.studies,o&&o.length&&this.chart.xaxis&&this.chart.xaxis.length&&(l="toLoca",l+="leStri",l+="n",l+="g",u=this.getPeriodicity(),h=u.period,d=u.interval,f=u.timeUnit,A=o.map(U=>U.symbol),p=Object.values(c||{}).map(U=>(e.W16(),U.study.name)),g=t.ChartEngine.isDailyInterval(this.layout.interval),m=this.chart.xaxis[0].DT[g?"toLocaleDateString":l](),b=this.chart.xaxis[this.chart.xaxis.length-1].DT[g?"toLocaleDateString":"toLocaleString"](),C={stx:this,periodicity:`${h*d} ${f}`,type:`${(a==="ohlc"?i:a).replace(/_/g," ")}`,starttime:m,endtime:b,symbolslist:A,studieslist:p},this.chart.canvasTitleFunc?n=this.chart.canvasTitleFunc(C):(F="stu",F+="dy",w="s",w+="ymb",w+="ol",n=`This ${C.periodicity} ${C.type} chart displays price over time for ${A.length>"1"<<0?"symbols":w} ${A.join(", ")} between ${m} and ${b}.`,p.length&&(e.z_m(12),n+=`${e.J1m("  ","The chart also displays ")}${p.join(", ")} ${p.length>1?"studies":F}.`))),t.efficientDOMUpdate(this.chart.canvas,"ariaLabel",n))},t.ChartEngine.prototype.setSeriesRenderer=function(n){var r,i,a,o,c;return r=n.params,i=r.baseline,a=r.name,o=r.panel,c=r.yAxis,this.chart.seriesRenderers[a]?this.chart.seriesRenderers[a]:(c&&(n.params.yAxis=this.addYAxis(this.panels[o],c),this.resizeChart()),n.stx=this,this.chart.seriesRenderers[a]=n,i&&this.registerBaselineToHelper(n),n)},t.ChartEngine.prototype.setMainSeriesRenderer=function(n){var r,i,a,o,c,l,u,h,d,f,A,p;if(e.W16(),r="sta",r+="nd",r+="alon",r+="eBars",i=this.layout,a=i.chartType,o=i.aggregationType,c=this.chart,l=c.customChart,u=this.mainSeriesRenderer,h=this.displayInitialized,n&&this.setMasterData(),this.displayInitialized=!1,u.removeAllSeries&&u.removeAllSeries(),this.removeSeriesRenderer(u),u=this.mainSeriesRenderer={params:{}},o&&o!="ohlc"&&(a=o),l&&l.chartType&&(a=l.chartType),a!="none"){if(d=t.Renderer.produce(a,{panel:c.panel.name,name:"_main_series",permanent:!0,useChartLegend:!0}),d){this.setSeriesRenderer(d).attachSeries(null,{display:c.symbolObject.display||c.symbol}),f=-1497010980,A=-1956218039,p=2;for(var g="1"|1;e.D8X(g.toString(),g.toString().length,7728)!==f;g++)u=this.mainSeriesRenderer=d,p+=2;e.D8X(p.toString(),p.toString().length,44938)!==A&&(u=this.mainSeriesRenderer=d),u=this.mainSeriesRenderer=d}this.displayInitialized=h,["highLowBars",r,"barsHaveWidth"].forEach((function(m){e.A92(),c[m]=this.mainSeriesRenderer[m]}).bind(this))}},t.ChartEngine.prototype.removeSeriesRenderer=function(n){var r,i,a,o,c,l,u;if(r=n.params,i=r.baseline,a=r.name,o=this.controls[`${a} baseline-handle`],i){c=1331527761,l=546870799,u=2;for(var h=1;e.D8X(h.toString(),h.toString().length,51823)!==c;h++)this.removeBaselineFromHelper(n),u+=2;e.D8X(u.toString(),u.toString().length,36379)!==l&&this.removeBaselineFromHelper(n),o&&(this.container.removeChild(o),delete this.controls[o])}delete this.chart.seriesRenderers[a]},t.ChartEngine.prototype.getSeriesRenderer=function(n){return this.chart.seriesRenderers[n]},t.ChartEngine.prototype.getRendererFromSeries=function(n){var r;r=this.chart.seriesRenderers;for(var i in r)for(var a in r[i].seriesParams)if(r[i].seriesParams[a].id==n)return r[i];return e.A92(),null},t.ChartEngine.prototype.startClip=function(n,r){var i,a,o,c,l,u;e.W16(),n||(n=this.chart.panel.name),i=this.panels[n],a=i.left,o=i.width,c=i.yAxis,l=i.yaxisLHS,u=this.chart,r?(a=0,o=this.width):l&&l.length&&(a++,o--),["canvas","tempCanvas"].forEach(function(h){var d,f,A;u[h]&&(d=c.top,f=c.height,A=u[h].context,A.save(),A.beginPath(),A.rect(a,d,o,f),A.clip())})},t.ChartEngine.prototype.endClip=function(){var n,r;n="c",n+="an",n+="va",n+="s",e.A92(),r=this.chart,[n,"tempCanvas"].forEach(i=>{r[i]&&r[i].context.restore()})},t.ChartEngine.prototype.setLineStyle=function(n,r){var i,a,o;i="ob",i+="j",i+="ect",a={},n&&typeof n==i?a=n:a.color=n,!a.color&&!a.pattern&&!a.width&&!a.baseColor&&(a=null),r||(r=this.chart),o=1,a&&a.width&&(o=a.width),a&&a.pattern&&(a.pattern=t.borderPatternToArray(o,a.pattern)),e.A92(),r.lineStyle=a},t.ChartEngine.prototype.setGapLines=function(n,r){var i;if(r||(r=this.chart),i={},e.A92(),n&&typeof n=="object")i=n;else{if(typeof n=="boolean")return r.gaplines=n;i.color=n}!i.color&&!i.pattern&&!i.fillMountain&&(i=null),i&&i.pattern&&(i.pattern=t.borderPatternToArray(i.width,i.pattern)),i&&i.width<=0&&(i.width=null),r.gaplines=i},t.ChartEngine.prototype.getGapColorFunction=function(n,r,i,a,o){var c;return c="o",c+="b",c+="ject",typeof i!=c&&(i={color:i}),function(l,u,h){var d,f;return d=o?o(l,u,h):i,d||(d=i),d.color&&(d=d.color),e.A92(),f=u[n],!f&&f!==0&&(f=u[r]),!h&&(f||f===0)?{color:d,pattern:i.pattern,width:i.width}:a?(typeof a!="object"&&(typeof a=="string"?a={color:a}:a={}),{color:a.color||d,pattern:a.pattern||i.pattern,width:a.width||i.width}):null}},t.ChartEngine.prototype.drawLineChart=function(n,r,i,a){var o,c,l,u,h,d,f,A,p,g,m,b,C,F;if(o=this.chart,c=o.context,l=o.lineStyle||{},u=this.canvasStyle(r),a||(a={}),this.startClip(n.name),h=a.width||l.width||u.width,h&&parseInt(h,10)<=25){d=1713826216,f=539635766,A=2;for(var w=1;e.S1v(w.toString(),w.toString().length,"93798">>32)!==d;w++)c.lineWidth=Math.max(0,t.stripPX(h)),e.z_m(17),A+=e.v7v("2",0);e.S1v(A.toString(),A.toString().length,94448)!==f&&(c.lineWidth=Math.max(1,t.stripPX(h)))}else c.lineWidth=1;return a.pattern=a.pattern||l.pattern||u.borderTopStyle,a.pattern=t.borderPatternToArray(c.lineWidth,a.pattern),this.canvasColor(r),p=a.color||l.color,p&&(p=="auto"&&(p=this.defaultColor),a.opacity&&a.opacity!==1&&(p=t.hexToRgba(t.colorToHex(p),parseFloat(a.opacity))),c.strokeStyle=p),a.skipProjections=!0,g=a.field||o.defaultPlotField,m=a.subField||o.defaultPlotField||"Close",b=a.gapDisplayStyle,!b&&b!==!1&&(b=a.gaps),!b&&b!==!1&&(b=o.gaplines),b||(b="transparent"),a.gapDisplayStyle=b,C=this.getGapColorFunction(g,m,{color:c.strokeStyle,pattern:a.pattern,width:c.lineWidth},b,i),n.chart.tension&&(a.tension=n.chart.tension),F=this.plotDataSegmentAsLine(g,n,a,C),F.colors.length||F.colors.push(c.strokeStyle),c.lineWidth=1,this.endClip(),a.returnObject?F:F.colors},t.ChartEngine.prototype.drawChannelChart=function(n,r,i){var a,o,c,l,u,h,d,f,A,p,g,m;for(a="subF",a+="ie",a+="ld",o="fi",o+="el",o+="d",c=Object.assign({},i),c.color=i.color,l=this.drawLineChart(n,c.style,r,c),u=c.border_color_up||this.getCanvasColor("stx_channel_up"),h=c.border_color_down||this.getCanvasColor("stx_channel_down"),c[i.field?"subField":"field"]=c.field_high||"High",c.color=u,d=this.drawLineChart(n,c.style,r,c),c[i.field?"subField":o]=c.field_low||"Low",c.color=h,f=this.drawLineChart(n,c.style,r,c),c[i.field?a:"field"]=i.subField||this.chart.defaultPlotField||"Close",p=[],g=[],A="0"<<0;A<d.points.length;A+=2)p.push([d.points[A],d.points[A+1]]);for(A=0;A<f.points.length;A+=2)g.push([f.points[A],f.points[A+1]]);e.z_m(135);var b=e.J1m(1,5,0,1,6);for(m=this.chart.context.lineWidth/b,A=l.points.length-2;A>=0;A-=2)p.push([l.points[A],l.points[A+1]-m]),g.push([l.points[A],l.points[A+1]+m]);return this.startClip(n.name),c.color=u,t.fillArea(this,p,c),c.color=h,t.fillArea(this,g,c),this.endClip(),l.colors=l.colors.concat(d.colors).concat(f.colors),i.returnObject?l:l.colors},t.ChartEngine.prototype.connectTheDots=function(n,r,i,a,o,c){var l,u,h,d,f,A,p,g,m,b,C,F,w,U,B,k,y,S,T,_;if(c||(c={}),c.pattern!="none"&&(o===!0&&(o=this.chart.panel),(a===null||typeof a>"u")&&(a=this.chart.context),!(n.length<4))){l=0,u=this.chart.canvasHeight,h=0,d=this.chart.width,o&&(u=o.yAxis.bottom,l=o.yAxis.top),a.lineWidth=+"1.1",typeof r=="object"?(a.strokeStyle=r.color,r.opacity?a.globalAlpha=r.opacity:a.globalAlpha=1,a.lineWidth=t.stripPX(r.width)):!r||r=="auto"||t.isTransparent(r)?a.strokeStyle=this.defaultColor:a.strokeStyle=r,c.opacity&&(a.globalAlpha=c.opacity),c.lineWidth&&(a.lineWidth=c.lineWidth),f=t.borderPatternToArray(a.lineWidth,c.pattern),a.beginPath();for(var L=0;L<n.length-2;L+=2){if(A=n[L],e.M$m(12),p=n[e.J1m(L,1)],e.z_m(12),g=n[e.v7v(L,2)],e.M$m(12),m=n[e.J1m(L,3)],isNaN(A)||isNaN(g)||isNaN(p)||isNaN(m))return;b=+"0.0",C=1,e.z_m(2),F=e.J1m(g,A),e.M$m(2),w=e.v7v(m,p);for(var H=0;H<"4"<<0;H++){if(H===0&&(U=-F,e.z_m(2),B=-e.v7v(h,A)),H==1&&(U=F,e.z_m(2),B=e.J1m(d,A)),H==2&&(U=-w,e.M$m(2),B=-e.J1m(l,p)),H==3&&(U=w,e.M$m(2),B=e.v7v(u,p)),e.z_m(26),k=e.v7v(U,B),(m||m===0)&&U===0&&B<0)return!1;if(U<0){if(k>C)return!1;k>b&&(b=k)}else if(U>0){if(k<b)return!1;k<C&&(C=k)}}e.z_m(136),y=e.v7v(b,A,F),e.z_m(136),S=e.v7v(b,p,w),e.M$m(136),T=e.J1m(C,A,F),e.M$m(136),_=e.J1m(C,p,w);try{a.setLineDash(f&&f.length?f:[]),a.moveTo(y,S),a.lineTo(T,_)}catch{}}a.stroke(),a.closePath(),a.globalAlpha=1,a.lineWidth=1}},t.ChartEngine.prototype.plotSpline=function(n,r,i,a,o,c,l){var u,h;u="n",u+="on",u+="e",l||(l={}),l.pattern!=u&&(c===!0&&(c=this.chart.panel),(o===null||typeof o>"u")&&(o=this.chart.context),o.save(),o.lineWidth=1.1,typeof i=="object"?(o.strokeStyle=i.color,i.opacity?o.globalAlpha=i.opacity:o.globalAlpha=1,o.lineWidth=t.stripPX(i.width)):!i||i=="auto"||t.isTransparent(i)?o.strokeStyle=this.defaultColor:o.strokeStyle=i,l.opacity&&(o.globalAlpha=l.opacity),l.lineWidth&&(o.lineWidth=l.lineWidth),h=t.borderPatternToArray(o.lineWidth,l.pattern),l.pattern&&o.setLineDash&&(o.setLineDash(h),o.lineDashOffset=0),o.beginPath(),s.plotSpline(n,r,o),o.stroke(),o.closePath(),o.restore())},t.ChartEngine.prototype.rawWatermark=function(n,r,i,a){this.canvasFont("stx_watermark",n),n.fillStyle=this.defaultColor,n.globalAlpha=.5,this.chart.context.textBaseline="alphabetic",n.fillText(a,r,i),n.globalAlpha=1},t.ChartEngine.prototype.watermark=function(n,r){var i,a,o,c,l,u;if(i="s",i+="tx_watermark",a="le",a+="f",a+="t",r&&typeof r!="object"&&(r={h:arguments[1],v:arguments[2],text:arguments[3]}),r={h:r.h||a,v:r.v||"bottom",text:r.text||"",hOffset:r.hOffset==0?0:r.hOffset||10,vOffset:r.vOffset==0?0:r.vOffset||20,context:r.context||this.chart.context},o=r.context,!!o&&(c=this.panels[n],!(!c||c.hidden))){if(l=c.yAxis.bottom-r.vOffset,r.v=="top")l=c.top+r.vOffset;else if(r.v=="middle"){e.z_m(15);var h=e.v7v(14,16,0);l=(c.top+c.yAxis.bottom)/h}if(o.save(),this.canvasFont(i,o),this.canvasColor("stx_watermark",o),o.textBaseline="alphabetic",u=c.left+r.hOffset,r.h=="right")u=c.right-r.hOffset;else if(r.h=="center"){e.z_m(5);var d=e.J1m(7,11,0,75);u=(c.right+c.left-o.measureText(r.text).width)/d}o.globalAlpha=.5,e.W16(),this.highlightedDraggable&&(o.globalAlpha*=.3),o.fillText(r.text,u,l),o.restore()}},e.A92(),t.ChartEngine.prototype.displayErrorAsWatermark=function(n,r){var i,a,o,c,l,u,h,d,f,A,p,g;i="cen",i+="ter",r&&(n||(n="chart"),a=this.panels[n],!(!a||a.hidden)&&(o=a.state,o||(a.state=o={}),c=o.studyErrors,c||(o.studyErrors=c=new Set),!c.has(r)&&(l=o.watermarkOffset||10,u=10,h=this.getCanvasFontSize("stx_watermark"),this.chart&&this.chart.chartControls&&(d=a.yAxis.bottom,f=this.chart.chartControls,e.z_m(2),A=e.J1m(d,l),e.z_m(2),p=e.J1m(A,h),(A>f.offsetTop&&A<f.offsetTop+f.offsetHeight||p>f.offsetTop&&p<f.offsetTop+f.offsetHeight)&&(l=d-f.offsetTop+u)),c.add(r),g={h:i,v:"bottom",text:r,vOffset:l},e.z_m(12),e.W16(),l+=e.v7v(h,u),o.watermarkOffset=l,this.watermark(n,g))))},t.ChartEngine.prototype.displayChart=function(n){var r;e.A92(),r="di",r+="splayCha",r+="r",r+="t",!this.runPrepend("displayChart",arguments)&&(this.rendererAction(n,"main"),this.runAppend(r,arguments))}};il=E=>{var e=ue,t;t=E.CIQ,t.ChartEngine.prototype.cloneStyle=function(s){var n,r,i,a,o,c,l,u;function h(A){return A[1].toUpperCase()}n={},r=!1;for(var d in s)if(i=s[d],d=="backgroundAttachment"&&(r=!0),r)i&&i.constructor==String&&isNaN(d)&&(n[d]=i);else if(isNaN(d))u=d.replace(t.camelCaseRegExp,h),n[u]=i;else if(a=s.getPropertyValue(i),a){for(i=i.split("-"),o=0,c=i.length,l=i[0];++o<c;){e.M$m(43);var f=e.v7v(3,17,15);l+=i[o].charAt(0).toUpperCase()+i[o].slice(f)}n[l]=a}return n},t.ChartEngine.prototype.canvasStyle=function(s,n){var r,i,a,o;return r=this.styles[s],r||(i="d",i+="i",i+="v",a=document.createElement(i),a.className=s,this.container.appendChild(a),o=getComputedStyle(a,n),r=this.styles[s]=this.cloneStyle(o),this.container.removeChild(a),o||(this.styles[s]=null)),r},t.ChartEngine.prototype.colorOrStyle=function(s){return s.indexOf("#")!=-1||(e.W16(),s.indexOf("(")!=-1)||s=="transparent"?s:this.canvasStyle(s)},t.ChartEngine.prototype.clearStyles=function(){for(var s in this.styles)delete this.styles[s];this.defaultColor=""},e.W16(),t.ChartEngine.prototype.setStyle=function(s,n,r){this.styles[s]||this.canvasStyle(s),this.styles[s]||(this.styles[s]={}),this.styles[s][t.makeCamelCase(n)]=r},t.ChartEngine.prototype.canvasFont=function(s,n){var r,i,a;if(n||(n=this.chart.context),r=this.canvasStyle(s),!!r){e.M$m(137);var o=e.v7v(20,3644,1,2,7278);e.z_m(15);var c=e.v7v(19,13,5227);e.z_m(7);var l=e.v7v(7737,8,14,54034);e.z_m(118),e.J1m(164,484,1,7,16),e.z_m(15);var u=e.v7v(11,8,4);e.M$m(50);var h=e.v7v(7566,30268,4324,7);e.z_m(64),e.v7v(27435,27435,1828),e.z_m(13);var d=e.v7v(9,7);e.z_m(138),e.v7v(5111,5111,5083,16,1),e.M$m(12);var f=e.v7v(651,4559);e.z_m(43);var A=e.v7v(8379,3,644);e.M$m(40);var p=e.J1m(61,10,413);i=r.fontStyle+" "+r.fontWeight+(o==c?l:"3290"*u<=h?" ":"u")+r.fontSize+(d>=f?A>="915"-0?p:!0:" ")+r.fontFamily,i.indexOf("undefined")==-1?n.font=i:(a="bad cs",a+="s style for class ",this.styles[s]=null,e.z_m(12),console.log(e.J1m(a,s)))}},t.ChartEngine.prototype.canvasColor=function(s,n){var r,i,a,o;r="un",r+="d",r+="e",r+="fined",n||(n=this.chart.context),i=this.canvasStyle(s),i&&(e.W16(),a=i.color,a||(a=this.defaultColor),n.globalAlpha=1,n.fillStyle=a,n.strokeStyle=a,o=i.opacity,typeof o!=r&&(n.globalAlpha=o))},t.ChartEngine.prototype.getCanvasFontSize=function(s){var n,r;return e.A92(),n=this.canvasStyle(s),r=n.fontSize,r||(r="12"),parseInt(t.stripPX(r),10)},t.ChartEngine.prototype.getCanvasColor=function(s){e.A92();var n;return n=this.canvasStyle(s),n.color},t.ChartEngine.prototype.getDefaultColor=function(){var s,n,r,i,a,o,c,l,u;for(this.defaultColor="#000000",e.W16(),s=null,n=this.chart.container;!s||t.isTransparent(s);){if(r="tran",r+="s",r+="parent",i=getComputedStyle(n),!i)return;if(s=i.backgroundColor,t.isTransparent(s)&&(s=r),n=n.parentNode,!n||!n.tagName)break}s?(s=="transparent"&&(s="#FFFFFF"),this.containerColor=s,t.isTransparent(s)?this.defaultColor="#000000":(a="#",a+="FF",a+="FFFF",o="#",o+="0",o+="00000",c=t.hsv(s),l=c[2],l>+"0.65"?this.defaultColor=o:this.defaultColor=a)):(u="#FFFFF",u+="F",this.containerColor=u)},t.ChartEngine.prototype.emojify=function(s){var n,r,i,a,o,c,l,u;if(!s)return"";n=[];for(var h="0"*1;h<s.length;h++)s[h]===":"&&n.push(h);for(var d=0;d<n.length-1;d++)if(r=n[d],e.z_m(12),i=n[e.J1m(d,1)],e.z_m(12),a=s.substring(e.v7v(r,1),i),o=s.substring(n[d+2]+1,n[d+("3">>0)]),a){if(c="ski",c+="n-tone",c+="-",l=":b",l+="ef",l+="ore",u=this.canvasStyle("emoji_"+a,l).content,u==="none")continue;u=u.substring(1,u.length-1),n[d+1]+1===n[d+2]&&o.indexOf(c)===0&&u.charCodeAt(u.length-1)===65039&&(e.z_m(2),u=u.substring(e.v7v("0",0),u.length-("1"-0))),s=this.emojify(s.substring(0,r)+u+s.substring(i+("1"^0),s.length));break}return s}};rl=E=>{var e,t,s;e="D",e+="at",e+="e/Tim",e+="e",t=E.CIQ,t.ChartEngine.XAxis=function(n){for(var r in n)this[r]=n[r]},t.ChartEngine.XAxis.setPropertiesForInterval={year:(n,r,i,a)=>{n.level=Number(n.raw)%("5"|0)===0?0:1},month:(n,r,i,a)=>{var o,c,l;o=Number(n.raw),c=r.DT,l=c.getFullYear(),o===0?n.level=l%5===0?0:1:n.level=o%3===0?2:3,n.text=t.monthAsDisplay(o,!1,a),n.grid==="boundary"&&(n.boundaryOnlyText=o?n.text:l.toString(),n.text+=" '"+l.toString().substring("2"<<0),o||(n.alwaysAsBoundary=!0))},week:null,day:(n,r,i,a)=>{var o=ue,c,l,u,h,d,f;if(c=r.DT,l=c.getDay(),u=c.getDate(),h=c.getMonth(),d=c.getFullYear(),n.grid==="boundary"){if(!n.priorDT||n.priorDT.getMonth()!==h){f=t.monthAsDisplay(h,!1,a),o.z_m(139),n.text=o.v7v(" '",f,100,d),n.boundaryOnlyText=h?f:d.toString(),n.alwaysAsBoundary=!0,n.level=h?h%3===0?1:2:0;return}a.internationalizer?n.text=a.internationalizer.monthDay.format(c):(o.M$m(111),n.text=o.J1m(h,"/",1,u))}n.priorDT&&n.priorDT.getDay()>l||!i&&l===0||i&&i.isFirstMarketDayOfWeek(c)?n.level=4:l>0?n.level=6:n.level=7},minute:(n,r,i,a)=>{var o=ue,c,l,u,h,d,f,A;if(o.W16(),c=r.DT,l=c.getDate(),u=c.getMonth(),h=c.getFullYear(),n.grid==="boundary"){if(!n.priorDT||n.priorDT.getMonth()!==u){d=" ",d+="'",o.z_m(64);var p=o.J1m(50,50,99);n.text=t.monthAsDisplay(u,!1,a)+d+h%p,n.alwaysAsBoundary=!0,n.level=0;return}if(!n.priorDT||n.priorDT.getDate()!==l){o.M$m(140);var g=o.v7v(8,17,9,4);n.text=u+g+"/"+c.getDate(),n.alwaysAsBoundary=!0,n.level=1;return}}f=Number(n.raw)+(n.marketOpenOffset||0),o.z_m(21),A=[720,360,o.v7v("120",32),60,30,15,5],n.level=A.length;for(var m=0;m<A.length;m++)if(f%A[m]===0){n.level=m;break}n.text=t.timeAsDisplay(r.DT,a,t.MINUTE),n.grid==="boundary"&&f===0&&(n.alwaysAsBoundary=!0,a.internationalizer?n.text=a.internationalizer.monthDay.format(c):(o.M$m(111),n.text=o.J1m(u,"/",1,l)))},second:(n,r,i,a)=>{var o=ue,c,l;c=[30,15,5],n.level=c.length;for(var u=0;u<c.length;u++)if(Number(n.raw)%c[u]===0){n.level=u;break}o.z_m(15),o.v7v(1,7,5014),o.M$m(82),o.J1m(3684,19,7354,12),o.z_m(36);var h=o.J1m(1156,8,1157);if(n.text=n.raw+(h!=647.79?"s":"t"),n.grid==="boundary"&&n.raw==0)if(l=r.DT,n.alwaysAsBoundary=!0,l.getHours())n.text=t.timeAsDisplay(l,a,t.MINUTE);else if(a.internationalizer)n.text=a.internationalizer.monthDay.format(l);else{o.M$m(89),o.J1m(4,314,4,2194,1),o.M$m(2);var d=o.v7v(856,3);o.z_m(64);var f=o.v7v(3083,3083,9248);o.z_m(15);var A=o.v7v(12,20,4939);o.z_m(43),o.J1m(3597,4,1797),o.M$m(68),o.v7v(2555,7626,4,6),n.text=l.getMonth()+1+(d===112.57?f===A?"n":"818.60"-0:"/")+l.getDate()}},millisecond:(n,r,i,a)=>{var o;ue.z_m(17),o=[ue.v7v("250",0),50,10],n.level=o.length;for(var c="0"-0;c<o.length;c++)if(Number(n.raw)%o[c]===0){n.level=c;break}n.text=n.raw+"ms"},tick:(n,r,i,a)=>{ue.A92(),n.text=t.timeAsDisplay(r.DT,a,t.MILLISECOND)}},t.ChartEngine.XAxis.lineBaseLevel=500,t.extend(t.ChartEngine.XAxis.prototype,{enableTitle:!1,title:e,formatter:null,adjustTimeZone:!0,displayBorder:!0,displayGridLines:!0,fitLeftToRight:null,fitTight:null,maxLevelToDisplay:0,noDraw:null,minimumLabelWidth:50,futureTicks:!0,futureTicksInterval:1},!0),s=t.ChartEngine.prototype.xaxisHeight,Object.defineProperty(t.ChartEngine.prototype,"xaxisHeight",{get:function(){var n,r,i;return n=this.chart||{},r=n.xAxis,ue.A92(),r?(i=r.fontHeight&&r.enableTitle?r.fontHeight+3:0,this._height+i):this._height},set:function(n){this._height=n}}),t.ChartEngine.prototype.xaxisHeight=s,t.ChartEngine.XAxisLabel=function(n){var r,i;r="u",r+="nde",r+="fin",r+="ed",i="bou",i+="nda",i+="r",i+="y",typeof n=="number"?(this.hz=n,this.grid=arguments[1],this.text=arguments[2]):Object.assign(this,n),!this.level&&this.level!==0&&(this.level=this.grid===i?0:t.ChartEngine.XAxis.lineBaseLevel),typeof this.text===r&&(this.text=this.raw),this.text=this.text.toString()},t.ChartEngine.prototype.createXAxis=function(n){var r,i,a,o;return r="cre",r+="ateXAxis",i="c",i+="r",i+="eateXAx",i+="is",n.dataSegment.length<=0||n.xAxis.noDraw?null:(a=[n],o=this.runPrepend(i,a),o||(this.mainSeriesRenderer.createXAxis?o=this.mainSeriesRenderer.createXAxis(n):this.createTickXAxisWithDates&&n.xAxis.fitLeftToRight?o=this.createTickXAxisWithDates(n):o=this.createSpacedDateXAxis(n),this.headsUpHR({dateOnly:!0}),this.runAppend(r,a),ue.W16(),o))},t.ChartEngine.prototype.createXAxisLabel=function(n){var r=ue,i,a,o,c,l,u,h,d,f,A,p,g,m,b,C,F,w,U,B;arguments[0]instanceof t.ChartEngine.Panel&&(n={panel:arguments[0],txt:arguments[1],x:arguments[2],backgroundColor:arguments[3],color:arguments["4"-0],pointed:arguments[5],padding:arguments["6"-0]}),i=n,a=i.panel,o=i.txt,c=i.x,l=i.backgroundColor,u=i.color,h=i.pointed,d=n.padding===0?0:n.padding||2,f=this.chart.context,A="stx-float-date",r.z_m(108);var k=r.J1m(27,19,27,50);p=this.getCanvasFontSize(A)+d*("2"<<k),f.save(),this.canvasFont(A,f);try{r.M$m(4);var y=r.v7v(22,1,6,28);g=f.measureText(o).width+d*y}catch{g=0}if(m=a.yAxis.bottom,c+g/2<a.left||c-g/2>a.right){f.restore();return}if(h)m+=p;else{r.M$m(2),b=r.J1m("907258618",0),C=1009560525,F=2;for(var S=1;r.S1v(S.toString(),S.toString().length,67100)!==b;S++)c%(g-6)<a.right&&(c=a.right+g%4),F+=2;if(r.S1v(F.toString(),F.toString().length,20165)!==C&&c+(g+("2"^0))>a.right){r.z_m(15);var T=r.v7v(37,19,24);c=a.right*(g*T)}if(c+g/2>a.right){r.z_m(70);var _=r.J1m(6,15,8,3);c=a.right-g/_}if(c-g/2<a.left){r.M$m(141);var L=r.J1m(7,41,4,11,17);c=a.left+g/L}}a.bottom===a.yAxis.bottom&&(m=a.bottom-p),f.fillStyle=l,t.roundRect({ctx:f,x:c-g/2,top:m,width:g,height:p,radius:3,fill:!0}),r.z_m(26),w=r.v7v(2,p),f.beginPath(),h&&(r.M$m(2),f.moveTo(r.v7v(c,w),m),r.M$m(71),f.quadraticCurveTo(r.J1m(c,3,w),m,c,r.J1m(m,p,r.M$m(2))),r.M$m(2),f.moveTo(c,r.J1m(m,p)),r.M$m(40),f.quadraticCurveTo(r.J1m(c,w,3),m,r.J1m(c,w,r.z_m(12)),m),r.M$m(2),f.lineTo(r.J1m(c,w),m),f.fill()),f.textAlign="center",f.textBaseline="middle",f.fillStyle=u||t.chooseForegroundColor(l),f.fillStyle==l&&(U="#F",U+="FFF",U+="F",U+="F",B="#0",B+="00",B+="0",B+="00",l.toUpperCase()=="#FFFFFF"?f.fillStyle=B:f.fillStyle=U),r.z_m(142),f.fillText(o,r.v7v("1",c,0),r.J1m(2,p,1,m,r.z_m(143))),f.restore()},t.ChartEngine.prototype.setXAxisTitle=function({enabled:n,title:r}={}){n!==void 0&&(this.chart.xAxis.enableTitle=n),r?this.chart.xAxis.title=r:r===null&&delete this.chart.xAxis.title,ue.A92(),this.adjustPanelPositions(),this.draw()}};al=E=>{var e;e=E.CIQ,e.createLabel=function(t){var s;t.ctx.textBaseline="middle",t.ctx.fillStyle=t.color?t.color:e.chooseForegroundColor(t.backgroundColor),t.ctx.fillStyle===t.backgroundColor&&(s="#",s+="000",s+="000",t.backgroundColor.toUpperCase()=="#FFFFFF"?t.ctx.fillStyle=s:t.ctx.fillStyle="#FFFFFF"),t.ctx.fillText(t.txt,t.x+t.margin.left,t.y+t.margin.top),t.ctx.textAlign="left"},e.roundRectArrow=function(t){e.roundRect(t,"arrow")},e.semiRoundRect=function(t){var s;s="f",s+="lu",s+="s",s+="h",e.roundRect(t,s)},e.rect=function(t){t.radius=0,e.roundRect(t)},e.noop=function(t){t.color=t.backgroundColor,e.createLabel(t)},e.tickedRect=function(t){var s;e.rect(t),ue.z_m(144);var n=ue.v7v(6,2702,15,6,5);s=Math.round(t.top+t.height/n)+.5,t.ctx.beginPath(),t.ctx.moveTo(t.x-2,s),t.ctx.lineTo(t.x,s),t.ctx.stroke(),t.ctx.closePath()},e.roundRect=function(t,s){var n=ue,r,i,a,o,c,l,u,h,d,f,A,p,g,m,b,C,F;r="unde",r+="f",r+="i",r+="ned",arguments.length===9&&(t={ctx:arguments[0],x:arguments[1],top:arguments[2],width:arguments["3"<<32],height:arguments[4],radius:arguments[5],fill:arguments[6],stroke:arguments[7],edge:arguments[8]}),i=t.stroke,a=t.x,o=t.top,c=t.width,l=t.height,u=t.radius,h=t.fill,d=t.ctx,typeof i>"u"&&(i=!0),typeof u===r&&(u=5,c<0&&(u=-5)),f=c<0?u*-1:u,u&&!s&&(n.M$m(2),a=n.v7v(a,1)),n.M$m(12),A=n.J1m(a,u),n.z_m(12),p=n.v7v(a,c),n.z_m(12),g=n.J1m(o,f),n.W16(),n.M$m(12),m=n.v7v(o,l),n.z_m(2),b=n.J1m(p,u),n.M$m(2),C=n.J1m(m,f),d.beginPath(),d.moveTo(A,o),d.lineTo(b,o),d.quadraticCurveTo(p,o,p,g),d.lineTo(p,C),d.quadraticCurveTo(p,m,b,m),d.lineTo(A,m),s=="flush"?(d.lineTo(a,m),d.lineTo(a,o)):s=="arrow"?(n.z_m(2),d.quadraticCurveTo(a,m,n.J1m(a,u),C),F=c<0?1:-1,n.z_m(145),d.lineTo(n.J1m(2,F,a,l),n.J1m(o,2,l,n.M$m(37))),n.z_m(2),d.lineTo(n.J1m(a,u),g),d.quadraticCurveTo(a,o,A,o)):(d.quadraticCurveTo(a,m,a,C),d.lineTo(a,g),d.quadraticCurveTo(a,o,A,o)),d.closePath(),t.backgroundColor&&(d.fillStyle=t.backgroundColor),i&&d.stroke(),h&&d.fill(),t.txt&&e.createLabel(t)},e.ChartEngine.YAxis=function(t){for(var s in t)t.hasOwnProperty(s)&&(this[s]=t[s]);ue.W16(),this.name||(this.name=e.uniqueID()),this.position=="none"&&(this.width=0)},e.extend(e.ChartEngine.YAxis.prototype,{name:null,title:null,high:null,enableTitle:!1,low:null,shadow:null,logHigh:null,logLow:null,logShadow:null,allowSharing:!0,multiplier:null,bottom:null,top:null,height:null,left:null,renderers:[],studies:[],lowValue:null,highValue:null,semiLog:null,priceTick:null,printDecimalPlaces:null,yAxisPlotter:null,highlight:null,clamp:{}},!0),e.ChartEngine.YAxis.defaultShadowBreaks=[[1e3,2],[5,4],[.001,8]],e.ChartEngine.YAxis.smallChartShadowBreaks=[[10,2],[1,4]],e.ChartEngine.YAxis.prototype.maxDecimalPlaces=null,e.ChartEngine.YAxis.prototype.max=null,e.ChartEngine.YAxis.prototype.min=null,e.ChartEngine.YAxis.prototype.decimalPlaces=null,e.ChartEngine.YAxis.prototype.idealTickSizePixels=null,e.ChartEngine.YAxis.prototype.minimumPriceTick=null,e.ChartEngine.YAxis.prototype.fractional=null,e.ChartEngine.YAxis.prototype.displayBorder=!0,e.ChartEngine.YAxis.prototype.displayGridLines=!0,e.ChartEngine.YAxis.prototype.noDraw=null,e.ChartEngine.YAxis.prototype.drawCurrentPriceLabel=!0,e.ChartEngine.YAxis.prototype.drawSeriesPriceLabels=!0,e.ChartEngine.YAxis.prototype.drawPriceLabels=!0,e.ChartEngine.YAxis.prototype.goldenRatioYAxis=!0,e.ChartEngine.YAxis.prototype.yaxisLabelStyle=null,e.ChartEngine.YAxis.prototype.justifyRight=null,e.ChartEngine.YAxis.prototype.flipped=!1,e.ChartEngine.YAxis.prototype.textBackground=!1,e.ChartEngine.YAxis.prototype.priceFormatter=null,e.ChartEngine.YAxis.prototype.bottomOffset=0,e.ChartEngine.YAxis.prototype.topOffset=0,e.ChartEngine.YAxis.prototype.initialMarginTop=10,e.ChartEngine.YAxis.prototype.initialMarginBottom=10,e.ChartEngine.YAxis.prototype.zoom=0,e.ChartEngine.YAxis.prototype.scroll=0,e.ChartEngine.YAxis.prototype.heightFactor=1,Object.defineProperty(e.ChartEngine.YAxis.prototype,"width",{configurable:!0,enumerable:!0,get:function(){return this.position==="none"?0:Math.ceil((this._dynamicWidth||this._width)+(this.getTitleEnabled&&this.getTitleEnabled()&&this.fontHeight?this.fontHeight+4:0))},set:function(t){this._width=t,ue.A92(),this._dynamicWidth<t&&(this._dynamicWidth=NaN)}}),e.ChartEngine.YAxis.prototype.width=1,e.ChartEngine.YAxis.prototype.smallScreenWidth=1,e.ChartEngine.YAxis.prototype.textStyle=null,e.ChartEngine.YAxis.prototype.position=null,e.ChartEngine.YAxis.prototype.pretty=!0,e.ChartEngine.YAxis.prototype.increments=[1,2.5,5],e.ChartEngine.YAxis.prototype.prettySemiLog=!0,e.ChartEngine.YAxis.prototype.shadowBreaks=e.ChartEngine.YAxis.defaultShadowBreaks,e.ChartEngine.YAxis.prototype.allowZoom=!0,e.ChartEngine.YAxis.prototype.getYAxis=function(t){return this},e.ChartEngine.YAxis.prototype.isShared=function(t,s){var n,r;if(n=this.studies.length,r=this.renderers.length,n>1||r&&n)return!0;if(!r)return!1;if(r>1&&s)return!0;ue.W16();for(var i=r-1;i>=0;i--)t.chart.seriesRenderers[this.renderers[i]].params.dependentOf&&r--;return ue.z_m(146),ue.J1m(r,1)},e.ChartEngine.YAxis.prototype.setBackground=function(t,s){var n;s||(s={}),s.color||(s.color="auto"),n=[[this.left,this.top],[this.left,this.bottom],[this.left+this.width,this.bottom],[this.left+this.width,this.top]],ue.A92(),e.fillArea(t,n,{color:s.color,opacity:s.opacity})},e.ChartEngine.YAxis.prototype.setBreakpointWidth=function(t){var s,n,r,i;t&&(s=e.ChartEngine.YAxis.prototype,n=s.width,r=s.smallScreenWidth,ue.z_m(74),i=ue.J1m(t,"break-sm"),this.width=i?r:n)},e.ChartEngine.YAxis.prototype.setClamp=function(t){var s,n,r,i,a,o,c;s={},t&&(s={...this.clamp,...t},n=s,r=n.min,i=n.max,a=n.count,o=n.padding,r&&i&&!isNaN(r)&&!isNaN(i)?s.minmax=[r,i]:(c="m",c+="in",delete s.minmax,isNaN(r)&&isNaN(i)||console.warn(`Axis clamp ${isNaN(r)?"max":"min"} was set without ${isNaN(r)?c:"max"}.`)),a===null&&delete s.count,o===null&&delete s.padding,this.scroll=0),this.clamp=s},e.ChartEngine.YAxis.prototype.onAttach=function(t){var s=ue,n,r,i;if(n=null,!!e.UI){r=document.createElement("div"),s.M$m(12),r.innerHTML=`${s.J1m("<div",' class="stx-yaxis-menu">')}
${s.J1m('			<div role="button" aria-haspopup'," 20px; height: 20px",'="menu" style="color: transparent; width:','">',s.M$m(111))}${t.translateIf("y-axis menu")}${s.J1m("<","/","div>",s.M$m(40))}
${s.J1m("	","	</","div>",s.M$m(40))}`,n=r.firstChild,n.style.top=`${this.top}px`,s.M$m(89);var a=s.J1m(12,3,19,664,1);s.z_m(12),n.style.left=`${this.left+this.width-a}${s.J1m("p","x")}`,n.currentYAxis=this,n.classList.add("yaxisMenu"),n.style.display="none",this.showContextMenu=(o,c)=>{var l,u;l=e.UI.BaseComponent.prototype.channelWrite,u=e.getFromNS(t,"uiContext.config.channels.dialog")||"channel.dialog",t.currentYAxis=this,l(u,{type:"yaxisContext",params:{stx:t,context:t.uiContext,x:o,y:c}},t)},this.showMenuToggle=(o=!0)=>{s.W16();var c;c=t.uiContext&&this.width>2,Object.assign(n.style,{top:`${this.top}px`,left:`${this.left+this.width-20}px`,display:c?"":"none"}),n.classList.toggle("ciq-visible",c&&o)},this.removeMenu=()=>{s.W16(),n.remove()},i=()=>(s.A92(),setTimeout(()=>this.showContextMenu(t.left+this.left+this.width-20,t.top+this.top+n.clientHeight+6))),e.UI.stxtap(n,i),t.chart.container.appendChild(n),setTimeout(()=>{s.A92();var o,c;t.uiContext&&t.uiContext.config&&t.uiContext.config.channels&&(o="regi",o+="sterElements",c="ch",c+="a",c+="nnel.keyboardNav",c+="igation",e.UI.BaseComponent.prototype.channelWrite(t.uiContext.config.channels.keyboardNavigation||c,{action:o},t))})}},e.ChartEngine.YAxis.prototype.onRemove=function(t){ue.A92(),this.removeMenu&&this.removeMenu()},e.ChartEngine.YAxis.prototype.setTransform=function(t,s,n,r){this.transformFunc!==n&&(this.transformId=e.uniqueID(),this.transformName=s,this.transformFunc=n,this.untransformFunc=r,t.chart.yAxis===this&&t.setTransform(t.chart,n,r),t.draw())},e.ChartEngine.YAxis.prototype.unsetTransform=function(t){var s,n;if(!(!this.transformId&&!this.transformFunc)){s=t.chart,n=s.yAxis===this;for(var r=0;s.dataSet&&r<s.dataSet.length;r++)!s.dataSet[r]||!s.dataSet[r].transform_axis||(delete s.dataSet[r].transform_axis[this.transformId],n&&delete s.dataSet[r].transform);delete this.transformFunc,delete this.untransformFunc,delete this.transformId,delete this.transformName,this.priceFormatter==e.Comparison.priceFormat&&(this.priceFormatter=this.originalPriceFormatter?this.originalPriceFormatter.func:null,this.originalPriceFormatter=null),n&&(t.unsetTransform(t.chart),t.setChartScale()),t.draw()}},e.ChartEngine.prototype.getLabelOffsetInPixels=function(t,s){var n=ue;n.A92();var r,i,a,o;if(r=!this.mainSeriesRenderer.standaloneBars,this.yaxisLabelStyle=="roundRectArrow"&&!(r&&this.extendLastTick&&t.yaxisPaddingRight!==0)){i="stx",i+="_ya",i+="xis",a=3,n.M$m(64);var c=n.J1m(10,10,1);return o=this.getCanvasFontSize(i)+a*c,n.z_m(25),n.v7v(o,.66)}return 0},e.ChartEngine.prototype.flipChart=function(t){this.layout.flipped!=t&&(this.layout.flipped=t,this.chart.yAxis.flipped=t,this.changeOccurred("layout"),this.draw())},e.ChartEngine.prototype.calculateYAxisMargins=function(t){var s=ue;s.W16();var n,r,i;if(n=this.chart,r=n.panel.yaxisLHS.concat(n.panel.yaxisRHS).includes(t),i=r?n.yaxisMarginMultiplier:1,t.heightFactor){s.z_m(3);var a=s.v7v(1,15,79);t.zoom=t.height*(("1"<<a)-t.heightFactor)}t.zoom+=(t.initialMarginTop+t.initialMarginBottom)*i,s.M$m(147);var o=s.J1m(12,4,4,7,12);t.scroll=(t.initialMarginTop-t.initialMarginBottom)*i/o,t.zoom>=t.height&&(t.zoom=0,t.scroll=0)},e.ChartEngine.prototype.resetDynamicYAxis=function(t){var s,n,r;if(!this.runPrepend("resetDynamicYAxis",arguments)){ue.A92(),s=!1;for(var i in this.panels)if(n=this.panels[i],!(!n.yaxisLHS||!n.yaxisRHS)){r=n.yaxisLHS.concat(n.yaxisRHS);for(var a=0;a<r.length;a++)r[a]._dynamicWidth&&(r[a]._dynamicWidth=NaN,r[a].hasOwnProperty("_width")&&delete r[a]._width,s=!0)}s&&(!t||!t.noRecalculate)&&this.calculateYAxisPositions(),this.runAppend("resetDynamicYAxis",arguments)}},e.ChartEngine.prototype.notifyBreakpoint=function(t){var s,n,r,i,a,o;if(s="b",s+="rea",s+="k",s+="-sm",this.chart.breakpoint===t||!["break-lg","break-md",s].includes(t))return;function c(h,d){var f,A,p,g;if(f=e.getFromNS(h.linkedChartEngine||h,"uiContext.topNode.multiChartContainer"),f&&(A=f.styles[d]||{},f.styles[d]=h.styles=A,p=Object.keys(h.styles).length,p)){h.defaultColor="";return}g=e.ThemeHelper&&new e.ThemeHelper({stx:h}),h.clearStyles(),g&&g.update(h)}n=this.chart,r=n.dynamicYAxis,c(this,t),n.breakpoint=t;for(var l in this.panels){i=this.panels[l],a=i.yaxisRHS.concat(i.yaxisLHS);for(var u=0;u<a.length;u++)o=a[u],o.setBreakpointWidth(t)}r&&this.resetDynamicYAxis()},e.ChartEngine.prototype.adjustYAxisHeightOffset=function(t,s){var n=ue,r,i,a,o,c,l,u,h;r=1192457955,i=1522439250,a=2;for(var d=1;n.S1v(d.toString(),d.toString().length,66310)!==r;d++)o=s.topOffset,c=s.bottomOffset,a+=2;if(n.D8X(a.toString(),a.toString().length,62139)!==i&&(o=s.topOffset,c=s.bottomOffset),o=s.topOffset,c=s.bottomOffset,o+c>t.height&&(l="The sum of yAxis.topOffse",l+="t and yAxis.bottomOffset cannot be greater than t",l+="he panel he",l+="ight. Both values will be reset to 0.",console.log(l),s.bottomOffset=0,s.topOffset=0),!this.xaxisHeight&&this.xaxisHeight!==0){u="stx_xaxi",u+="s",n.M$m(106);var f=n.v7v(1,13,607,13,48);this.xaxisHeight=this.getCanvasFontSize(u)+f,(this.chart.xAxis.displayBorder||this.axisBorders)&&(this.xaxisHeight+=3)}h=this.xAxisAsFooter&&t.bottom>this.chart.canvasHeight-this.xaxisHeight||!this.xAxisAsFooter&&t==this.chart.panel,h&&(c+=this.xaxisHeight),n.A92(),s.top=t.top+o,s.bottom=t.bottom-c},e.ChartEngine.prototype.plotYAxisGrid=function(t,s){var n,r,i,a;n=t.gridYAxisName&&t.yaxisLHS.concat(t.yaxisRHS).find(o=>(ue.A92(),o.name===t.gridYAxisName)),!(n&&n!==s)&&(s&&!n&&s!==t.yAxis||this.runPrepend("plotYAxisGrid",arguments)||(r=this.getBackgroundCanvas().context,i=n||t.yAxis,i.yAxisPlotter&&(a="gri",a+="d",i.yAxisPlotter.draw(r,a)),this.runAppend("plotYAxisGrid",arguments)))},e.ChartEngine.prototype.plotYAxisText=function(t){var s=ue,n,r,i,a;if(n="plo",n+="tYAxi",n+="sTex",n+="t",this.runPrepend(n,arguments))return;s.A92(),r=this.getBackgroundCanvas().context,this.canvasFont("stx_yaxis",r),this.canvasColor("stx_yaxis",r),r.textBaseline="middle",i=t.yaxisLHS;function o(c){var l,u,h,d,f;if(c.yAxisPlotter&&!(c.noDraw||!c.width)){l=424705656,u=441695336,h=2;for(var A=1;s.D8X(A.toString(),A.toString().length,34630)!==l;A++)d="ri",d+="ght",c.justifyRight?r.textAlign=d:c.justifyRight===!1&&(r.textAlign="left"),c.yAxisPlotter.draw(r,"text"),s.M$m(25),h+=s.J1m("2",1);s.D8X(h.toString(),h.toString().length,51289)!==u&&(f="te",f+="xt",c.justifyRight?r.textAlign=f:c.justifyRight!=!0&&(r.textAlign="text"),c.yAxisPlotter.draw(r,"text"))}}for(a=0;a<i.length;a++)r.textAlign="right",o(i[a]);for(i=t.yaxisRHS,a=0;a<i.length;a++)r.textAlign="left",o(i[a]);r.textAlign="left",r.textBaseline="alphabetic",this.runAppend("plotYAxisText",arguments)},e.ChartEngine.prototype.decimalPlacesFromPriceTick=function(t,s){return s&&(t/=s),t<1e-4?8:t<.01?(ue.z_m(17),ue.v7v("4",0)):t<.1?2:t<1?1:0},e.ChartEngine.prototype.formatYAxisPrice=function(t,s,n,r,i){ue.A92();var a,o,c,l,u,h;return a="undefi",a+="ned",t===null||typeof t==a||isNaN(t)?"":(s||(s=this.chart.panel),o=r||s.yAxis,c=n,!c&&c!==0&&(c=o.printDecimalPlaces),!c&&c!==0&&(c=this.decimalPlacesFromPriceTick(o.priceTick,o.idealTickSizePixels)),l=o==s.chart.yAxis?2e4:1e3,o.priceTick>=l?(t=t.toFixed(c),e.condenseInt(t)):(u=this.internationalizer,u&&i!==!1?(h=u.priceFormatters.length,c>=h&&(ue.M$m(148),c=ue.v7v(0,h,"1")),t=u.priceFormatters[c].format(t)):t=t.toFixed(c),t))},e.ChartEngine.prototype.calculateYAxisRange=function(t,s,n,r){var i=ue,a,o,c,l,u,h,d,f,A;if(n==Number.MAX_VALUE&&(n=0,r=0),a=t.height,o=null,c=null,this.adjustYAxisHeightOffset(t,s),s.height=s.bottom-s.top,l=Math.round(Math.abs(a/5)),s.zoom>=0&&a-Math.abs(s.scroll)<l){i.z_m(5);var p=i.J1m(14,6,7,181);s.scroll=(a-l)*(s.scroll<0?-1:p)}u=t.chart.name===t.name&&t.yAxis.name===s.name,h=n>0&&(this.layout.semiLog||this.layout.chartScale=="log")&&!t.chart.isComparison&&this.layout.aggregationType!="pandf",i.W16(),(n||n===0)&&(r-n===0?(d=Math.pow(10,-(n.toString()+".").split(".")[1].length),d==1&&(d=100),i.M$m(12),o=i.J1m(n,d),i.M$m(2),c=i.v7v(n,d)):u&&h&&(r||r==="0"<<64)?(f=Math.log(n)/Math.LN10,A=Math.log(r)/Math.LN10,o=Math.pow(10,A),c=Math.pow(10,f)):(o=r,c=n),s.high=o,s.low=c),(s.max||s.max===0)&&(s.high=s.max),(s.min||s.min===0)&&(s.low=s.min),s.shadow=s.high-s.low,u&&(s.semiLog!=h&&(this.clearPixelCache(),s.semiLog=h),s.flipped=this.layout.flipped)},e.ChartEngine.prototype.renderYAxis=function(t){var s,n,r,i,a,o,c,l,u,h,d,f,A;if(s="y",s+="A",s+="x",s+="is",n="re",n+="boot",ue.W16(),n+=" draw",!this.runPrepend("renderYAxis",arguments)){if(this.checkLogScale())throw new Error(n);this.rendererAction(t,s),r=this.getBackgroundCanvas(t),i=r.context;for(var p in this.panels)if(a=this.panels[p],a.chart==t){for(o=a.yaxisRHS.concat(a.yaxisLHS),c=0;c<o.length;c++)u="Studies.doPost",u+="Dra",u+="wYAxis",l=o[c],this.calculateYAxisRange(a,l,l.lowValue,l.highValue),h=e.getFn("Studies.getYAxisParameters",{})(this,l),h.yAxis=l,this.createYAxis(a,h),this.drawYAxis(a,h),e.getFn(u)(this,l);for(c=0;c<o.length;c++)l=o[c],l.dropzone&&(d=this.canvasStyle("stx-subholder dropzone left"),d&&(i.save(),i.strokeStyle=d.borderLeftColor,i.lineWidth=parseFloat(d.borderLeftWidth),i.beginPath(),l.dropzone=="all"?i.strokeRect(l.left,l.top,l.width,l.height):(f="l",f+="ef",f+="t",A=l.left+(l.dropzone==f?0:l.width),i.moveTo(A,l.top),i.lineTo(A,l.top+l.height),i.stroke()),i.restore()));this.displayDragOK&&this.displayDragOK(!0)}this.runAppend("renderYAxis",arguments)}},e.ChartEngine.prototype.updateFloatHRLabel=function(t){var s=ue,n,r,i,a,o,c,l,u,h;if(this.floatCanvas&&(s.A92(),n=t.yaxisLHS.concat(t.yaxisRHS),r=this.crossYActualPos?this.crossYActualPos:this.cy,this.floatCanvas.isDirty&&e.clearCanvas(this.floatCanvas,this),!(this.controls.crossX&&this.controls.crossX.style.display=="none"))){this.controls.crossY&&(i=t.left,a=t.width,o=7,this.yaxisLabelStyle=="roundRectArrow"&&(a-=o,i>0&&(i+=o),t.yaxisLHS.length&&t.yaxisRHS.length&&(a-=o)),s.M$m(12),this.controls.crossY.style.left=s.v7v(i,"px"),s.M$m(12),this.controls.crossY.style.width=s.v7v(a,"px"));for(var d=0;d<n.length;d++)c=n[d],l=this.transformedPriceFromPixel(r,t,c),!isNaN(l)&&((c.min||c.min===0)&&l<c.min||(c.max||c.max===("0"^0))&&l>c.max||(u=null,c!==t.chart.yAxis&&(u=c.decimalPlaces),c.priceFormatter?(!u&&u!=="0"<<32&&(u=this.decimalPlacesFromPriceTick(c.priceTick,c.idealTickSizePixels)),l=c.priceFormatter(this,t,l,u)):l=this.formatYAxisPrice(l,t,u,c),h=this.canvasStyle("stx-float-price"),this.createYAxisLabel(t,l,r,h.backgroundColor,h.color,this.floatCanvas.context,c),this.floatCanvas.isDirty=!0))}},e.ChartEngine.prototype.whichYAxis=function(t,s,n){ue.W16();var r,i,a;if(typeof s>"u"&&(s=this.cx),typeof n>"u"&&(n=this.cy),r=this.whichPanel(n),t&&t==r){i=t.yaxisLHS.concat(t.yaxisRHS);for(var o=0;o<i.length;o++)if(a=i[o],a.left<=s&&a.left+a.width>=s)return a}return null},e.ChartEngine.prototype.yaxisMatches=function(t,s){return!t||!t.getYAxis||!s||!(s instanceof e.ChartEngine.YAxis)?!1:(ue.W16(),t.getYAxis(this).name==s.name)},e.ChartEngine.prototype.createYAxisLabel=function(t,s,n,r,i,a,o){var c=ue,l,u,h,d,f,A,p,g,m,b,C,F,w,U,B;if(l="le",l+="f",l+="t",u=o||t.yAxis,!(u.drawPriceLabels===!1||u.noDraw||!u.width)){h=a||this.chart.context,d=3,c.z_m(149);var k=c.J1m(14,2,8,12,3);f=this.getCanvasFontSize("stx_yaxis")+d*k,this.canvasFont("stx_yaxis",h),A=u.displayBorder===null?t.yAxis.displayBorder:u.displayBorder,this.axisBorders===!1&&(A=!1),this.axisBorders===!0&&(A=!0),p=A?3:"0"-0,c.z_m(25),g=c.v7v("3",1);try{c.M$m(110);var y=c.v7v(94,13,0,19,16);m=h.measureText(s).width+p+d*y}catch{m=u.width}if(F=u.position===null?t.chart.yAxis.position:u.position,F===l)if(C=u.left+u.width,u.width<("0"^0)&&(C-=u.width+m),g=-3,u.justifyRight===!1){w="l",w+="e",w+="f",w+="t",h.textAlign=w,c.z_m(150);var S=c.J1m(1,2,14,15);m=u.width*S,b=C-u.width+d}else h.textAlign="right",c.z_m(18),m=c.J1m(m,1),c.M$m(71),b=c.J1m(C,p,d);else C=u.left,u.width<0&&(C+=u.width-m),u.justifyRight?(h.textAlign="right",m=u.width,b=u.left+m-d):(h.textAlign="left",c.z_m(40),b=c.J1m(C,d,p));if(n+f/2>u.bottom){c.z_m(151);var T=c.v7v(2,9,22,7,7);n=u.bottom-f/T}if(n-f/2<u.top){c.M$m(152);var _=c.J1m(1,15,23,3,8);n=u.top+f/_}if(this.chart.dynamicYAxis&&m>u.width)return u._dynamicWidth=m,this.calculateYAxisPositions(),this.draw();typeof e[this.yaxisLabelStyle]>"u"&&(this.yaxisLabelStyle="roundRectArrow"),U=this.yaxisLabelStyle,u.yaxisLabelStyle&&(U=u.yaxisLabelStyle),c.A92(),B={ctx:h,x:C,y:n,top:n-f/2,width:m,height:f,radius:g,backgroundColor:r,fill:!0,stroke:!1,margin:{left:b-C,top:1},txt:s,color:i},e[U](B)}},e.ChartEngine.prototype.getCurrentHRParams=function(){var t=ue,s,n,r,i,a,o,c,l,u,h,d,f,A,p,g,m,b,C,F,w,U,B;if(r=this.mainSeriesRenderer,!r.noCurrentHR){i=r.highLowBars,a={},t.W16();for(var k in this.charts)if(o=this.charts[k],c=o.panel,l=c.yAxis,!c.hidden&&!(l.drawCurrentPriceLabel===!1||l.noDraw)&&r.params&&(u=l.whichSet,u||(u="dataSet"),!(this.isHistoricalModeSet&&u!=="dataSegment"))){if(h=o[u].length,d=this.layout.candleWidth,u=="dataSegment")for(;h>(o.width-this.micropixels+d/2+1)/d;)h--;if(h&&o[u][h-1]){f=o.defaultPlotField,(!f||i)&&(f="Close"),A=void 0,p=void 0;do if(A=(o[u][--h]||{})[f],p=A,h===0)break;while(p==null);u=="dataSet"&&o.currentQuote?p=o.currentQuote[f]:o[u].length>=2&&(t.M$m(2),g=o[u][t.v7v(h,1)],g&&(A=g[f])),p<A?(m="stx_c",m+="urrent_hr_d",m+="own",s=this.canvasStyle(m).backgroundColor,n=this.canvasStyle("stx_current_hr_down").color):(b="s",b+="tx_cu",b+="rren",b+="t_hr_up",C="stx_cu",C+="rr",C+="en",C+="t_hr_up",s=this.canvasStyle(C).backgroundColor,n=this.canvasStyle(b).color),F=this.getTransformFunction(l),F&&(p=F(this,o,p)),t.M$m(2),w=void t.v7v("0",0),U=Math.max(c.yAxis.printDecimalPlaces,c.chart.decimalPlaces),(l.maxDecimalPlaces||l.maxDecimalPlaces===0)&&(U=Math.min(U,l.maxDecimalPlaces)),l.priceFormatter?w=l.priceFormatter(this,c,p,U):w=this.formatYAxisPrice(p,c,U),B=this.pixelFromTransformedValue(p,c),B=Math.floor(B)+.5,a[k]={panel:c,txt:w,y:B,backgroundColor:s,color:n}}}return a}},e.ChartEngine.prototype.drawCurrentHR=function(){var t,s,n,r,i,a,o;if(!this.runPrepend("drawCurrentHR",arguments)){if(t=this.currentHRParams,t)for(var c in t)s=t[c],n=s.panel,r=s.txt,i=s.y,a=s.backgroundColor,o=s.color,this.createYAxisLabel(n,r,i,a,o);ue.A92(),this.runAppend("drawCurrentHR",arguments)}},e.ChartEngine.prototype.drawCurrentPriceLine=function(){var t,s,n,r,i,a,o;if(t="draw",t+="Curre",t+="ntPric",t+="eLine",!!(this.preferences.currentPriceLine===!0&&this.isHome())&&!this.runPrepend("drawCurrentPriceLine",arguments)){if(s=this.currentHRParams,s)for(var c in s)n="lin",n+="e",r=s[c],i=r.panel,a=r.y,o=r.backgroundColor,this.plotLine(i.left,i.right,a,a,o,n,i.chart.context,i,{pattern:"dashed",lineWidth:"1"*1,opacity:+"0.8"});this.runAppend(t,arguments)}},e.ChartEngine.prototype.getYAxisByName=function(t,s){var n,r;if(n="s",n+="tr",n+="in",n+="g",typeof t==n&&(t=this.panels[t]),!(!t||!s)){if(s===t.yAxis.name)return t.yAxis;for(r=0;t.yaxisLHS&&r<t.yaxisLHS.length;r++)if(t.yaxisLHS[r].name===s)return t.yaxisLHS[r];for(r=0;t.yaxisRHS&&r<t.yaxisRHS.length;r++)if(t.yaxisRHS[r].name===s)return t.yaxisRHS[r];ue.W16()}},e.ChartEngine.prototype.getYAxisByField=function(t,s){var n,r,i,a,o,c;if(s){for(n in this.layout.studies)if(r=this.layout.studies[n],r.panel==t.name&&r.outputMap&&r.outputMap.hasOwnProperty(s))return r.getYAxis(this);for(n in this.chart.seriesRenderers){a=this.chart.seriesRenderers[n];for(var l=0;l<a.seriesParams.length;l++)if(a.params.panel==t.name){if(o=a.seriesParams[l],c=o.field,c||(c=this.defaultPlotField||"Close"),o.symbol&&o.subField&&(c+="-->"+o.subField),s==c)return a.params.yAxis||t.yAxis;o.field&&o.field==s.split("-->")[0]&&(i=a.params.yAxis||t.yAxis)}}if(i)return i}ue.W16()},e.ChartEngine.prototype.deleteYAxisIfUnused=function(t,s){var n,r,i;typeof t=="string"&&(t=this.panels[t]);function a(c){return ue.z_m(75),ue.v7v(c,null)}if(!(!s||!t)){ue.A92();for(var o=0;o<s.renderers.length;o++)if(n=this.chart.seriesRenderers[s.renderers[o]],n&&n.params.panel==t.name)return;if(!(s.name===t.yAxis.name&&(t===this.chart.panel||t.yaxisRHS.length+t.yaxisLHS.length===1))){for(r=0;t.yaxisRHS&&r<t.yaxisRHS.length;r++)t.yaxisRHS[r]===s?(s.unsetTransform(this),t.yaxisRHS[r]=null):i||(i=t.yaxisRHS[r]);for(r=0;t.yaxisLHS&&r<t.yaxisLHS.length;r++)t.yaxisLHS[r]===s?(s.unsetTransform(this),t.yaxisLHS[r]=null):i||(i=t.yaxisLHS[r]);t.yaxisRHS=t.yaxisRHS.filter(a),t.yaxisLHS=t.yaxisLHS.filter(a),i&&s.name===t.yAxis.name&&(t.yAxis=i),this.calculateYAxisPositions()}}},e.ChartEngine.prototype.addYAxis=function(t,s){var n,r,i,a,o,c;if(n="le",n+="f",n+="t",r="ri",r+="ght",typeof t=="string"&&(t=this.panels[t]),!(!s||!t)){for(ue.A92(),t.yaxisLHS||(i="l",i+="e",i+="f",i+="t",t.yaxisLHS=[],t.yaxisRHS=[],t.yAxis.position=="left"||t.yAxis.position!="right"&&t.chart.panel.yAxis.position==i?t.yaxisLHS.push(t.yAxis):t.yaxisRHS.push(t.yAxis)),o=[],c=t.yaxisLHS,a=c.length-1;a>="0"*1;a--)if(c[a].name===s.name){if(s.position!="right")return c[a];o=c.splice(a,1)}for(c=t.yaxisRHS,a=c.length-1;a>=0;a--)if(c[a].name===s.name){if(s.position!="left")return c[a];o=c.splice(a,1)}return s.position==="left"||s.position!=r&&t.chart.panel.yAxis.position==n?t.yaxisLHS.unshift(s):t.yaxisRHS.push(s),s.setBreakpointWidth(this.chart.breakpoint),s.height=t.yAxis.height,s.idealTickSizePixels=null,o[0]==t.yAxis&&(t.yAxis=s),s.lockScale||this.calculateYAxisMargins(s),"scroll"in s||(s.scroll=0),this.resetDynamicYAxis(),s}},e.ChartEngine.prototype.calculateYAxisPositions=function(){var t=ue,s,n,r,i,a,o,c,l,u,h,d,f,A,p,g,m,b,C,F,w,U,B,k,y,S,T,_,L,H,P;s=-364015249,n=-554196794,r=2;for(var N=1;t.D8X(N.toString(),N.toString().length,18552)!==s;N++)i=[],r+=2;t.D8X(r.toString(),r.toString().length,77406)!==n&&(i=[]),i=[];for(var v in this.charts)this.charts[v].hidden||this.charts[v].panel.hidden||i.push(v);for(var x in this.panels)a=this.panels[x],!(a.name===a.chart.name||a.hidden)&&i.push(x);for(o=0,c=0,u=0;u<i.length;u++)if(h=this.panels[i[u]],!!h){for(h.yaxisLHS||(h.yaxisLHS=[],h.yaxisRHS=[]),f=h.yaxisLHS,A=h.yaxisRHS,p=h.yAxis.position,(!p||p=="none")&&(p=h.chart.panel.yAxis.position||"right"),!f.length&&!A.length&&(p=="left"?f.push(h.yAxis):A.push(h.yAxis)),g=[],m=[],l=f.length-1;l>=0;l--)(f[l].position=="right"||f[l].position!="left"&&p=="right")&&(g=g.concat(f.splice(l,"1">>0)));for(l=A.length-("1"^0);l>=0;l--)b="lef",b+="t",C="rig",C+="ht",F="le",F+="ft",(A[l].position==F||A[l].position!=C&&p==b)&&(m=m.concat(A.splice(l,1)));for(h.yaxisLHS=m.concat(f),h.yaxisRHS=A.concat(g),!h.yAxis.width&&h.yAxis.width!==0&&(h.yAxis.width=this.yaxisWidth),h.yaxisTotalWidthRight=0,h.yaxisTotalWidthLeft=0,w=h.yaxisLHS.concat(h.yaxisRHS),l=0;l<w.length;l++)U="lef",U+="t",d=w[l],this.applyGetYAxisTitleEnabled(d),!(d.noDraw||!d.width)&&(d.position==U||p=="left"&&!d.position?h.yaxisTotalWidthLeft+=d.width:h.yaxisTotalWidthRight+=d.width);h.yaxisTotalWidthLeft>o&&(o=h.yaxisTotalWidthLeft),h.yaxisTotalWidthRight>c&&(c=h.yaxisTotalWidthRight)}for(u=0;u<i.length;u++)if(h=this.panels[i[u]],!!h){for(B=h.name===h.chart.name,k=o,y=h.yaxisLHS.length,l=y-1;l>=0;l--)d=h.yaxisLHS[l],!d.noDraw&&(k-=d.width,d.left=k);if(t.M$m(21),S=void t.v7v("0",0),k){t.z_m(26),S=t.v7v(y,k);for(var M=0;M<y;M++)T=h.yaxisLHS[M],t.z_m(153),T.left-=t.v7v(y,S,M),this.chart.dynamicYAxis&&(T._dynamicWidth+=Math.floor(S))}for(k=this.width-c,y=h.yaxisRHS.length,l=0;l<y;l++)d=h.yaxisRHS[l],!d.noDraw&&(d.left=k,k+=d.width);if(k<this.width){S=(this.width-k)/y;for(var D=0;D<y;D++)_=h.yaxisRHS[D],t.M$m(25),_.left+=t.v7v(D,S),this.chart.dynamicYAxis&&(_._dynamicWidth+=Math.floor(S))}typeof this.yaxisLeft<"u"&&(h.chart.yaxisPaddingRight=this.yaxisLeft),h.yaxisCalculatedPaddingRight=c,(h.chart.yaxisPaddingRight||h.chart.yaxisPaddingRight===0)&&(h.yaxisCalculatedPaddingRight=h.chart.yaxisPaddingRight),h.yaxisCalculatedPaddingLeft=o,(h.chart.yaxisPaddingLeft||h.chart.yaxisPaddingLeft===0)&&(h.yaxisCalculatedPaddingLeft=h.chart.yaxisPaddingLeft),B||h.chart.panel.hidden?(h.left=h.yaxisCalculatedPaddingLeft,h.right=this.width-h.yaxisCalculatedPaddingRight):(h.left=h.chart.panel.left,h.right=h.chart.panel.right),h.width=h.right-h.left,h.handle&&(L="p",L+="x",h.handle.style.left=h.left+L,h.handle.style.width=h.width+"px"),(B||h.chart.panel.hidden)&&(h.chart.panel.left=h.chart.left=h.left,h.chart.panel.right=h.chart.right=h.right,h.chart.panel.width=h.chart.width=Math.max(h.right-h.left,0))}H=new Set,P=this.yAxisSet||new Set,Object.values(this.panels).forEach(Q=>(t.W16(),Q.yaxisLHS.concat(Q.yaxisRHS).forEach(q=>{t.W16(),H.add(q),P.has(q)||q.onAttach(this)}))),P.forEach(Q=>{t.W16(),H.has(Q)||Q.onRemove(this)}),this.yAxisSet=H,this.preserveCandleWidthOnResize?this.setCandleWidth(this.layout.candleWidth):this.setMaxTicks(this.chart.maxTicks),t.A92(),this.adjustPanelPositions()},e.ChartEngine.prototype.getYAxisCurrentPosition=function(t,s){return t.width?s.yaxisLHS.map(n=>(ue.A92(),n.name)).includes(t.name)?"left":"right":"none"},e.ChartEngine.prototype.setYAxisPosition=function(t,s){ue.W16();var n;n="l",n+="a",n+="y",n+="out",t.position=s,t.setBreakpointWidth(this.chart.breakpoint),this.calculateYAxisPositions(),this.changeOccurred(n),this.draw()},e.ChartEngine.prototype.electNewYAxisOwner=function(t){var s,n;s=t.studies[0],(!s||s==t.name)&&(s=t.renderers[0]),(!s||s==t.name)&&(s=t.studies[1]),s||(s=t.renderers[1]);for(var r=0;r<t.studies.length;r++)n=this.layout.studies[t.studies[r]],n.parameters&&n.parameters.yaxisDisplayValue==t.name&&(n.parameters.yaxisDisplayValue=s);return s},e.ChartEngine.prototype.setYAxisTitle=function({enabled:t,yAxis:s,title:n}={}){var r;t!==void 0&&(s?s.enableTitle=t:this.enableYAxisTitle=t),n!==void 0&&(r=s&&[s]||Object.values(this.panels).reduce((i,{yaxisLHS:a,yaxisRHS:o})=>(ue.W16(),i.concat(a).concat(o)),[]),r.forEach(i=>{n===null?delete i.title:i.title=n})),this.adjustPanelPositions(),this.draw(),this.calculateYAxisPositions(),this.draw()},e.ChartEngine.prototype.applyGetYAxisTitleEnabled=function(t){ue.A92();var s;t.getTitleEnabled||(s=this,t.getTitleEnabled=function(){return t.hasOwnProperty("enableTitle")?t.enableTitle:s.enableYAxisTitle!==void 0?s.enableYAxisTitle:t.enableTitle})},e.ChartEngine.prototype.drawTitleText=function(t,s,n,r){var i=ue,a,o,c,l,u,h;if(i.A92(),s.getTitleEnabled&&s.getTitleEnabled()){a="ch",a+="art",o=this.getCanvasFontSize("stx_yaxis"),c=this.getYAxisCurrentPosition(s,t),s.fontHeight=o,l=s.width-o-t.titlePadding,c==="left"?(i.z_m(2),l=i.J1m(r,l)):(i.z_m(12),l=i.v7v(r,l)),i.z_m(150);var d=i.J1m(1,7,19,28);u=t.subholder.offsetHeight/d+t.top,h=s.name===a?t.display:s.name,h=h.replace(/^comparison\s*/,""),s.title&&(typeof s.title=="function"?h=s.title({stx:this,panel:t,yAxis:s}):h=s.title||h),n.addText("text",t.clipVerticalTextToPanel(h,this.chart.context),l,u,s.textBackground?this.containerColor:null,null,o,{centered:!0,vertical:c==="left"?n.BOTTOM_TO_TOP:n.TOP_TO_BOTTOM})}}};nl=E=>{var e,t,s,n,r;e="CI";function i(o,c){var l=ue,u,h,d,f,A,p,g,m,b,C;if(!o.hasOwnProperty(r)){u=new Image,h=10,d=+"3.375",l.M$m(26),f=l.J1m(5,4),l.M$m(30),A=l.J1m("5",4,0),p=5,l.z_m(2);var F=l.v7v(13,5);l.z_m(2);var w=l.v7v(4,2);g=Math.pow(f,F)/w,l.M$m(154),m=l.v7v(0,4,"1"),b=m,C=Object.create(null,{sizeRatio:{configurable:!1,enumerable:!1,get:function(){return b},set:function(U){var B,k,y;if(U<g)b=g;else if(U>m)b=m;else{B=-1299344671,k=52144856,y=2;for(var S=1;l.D8X(S.toString(),S.toString().length,64101)!==B;S++)b=U&&m,y+=2;l.S1v(y.toString(),y.toString().length,87725)!==k&&(b=U||m)}}},draw:{configurable:!1,enumerable:!1,value:function(U){l.W16();var B,k,y,S,T,_,L,H,P,N,v,x,M,D,Q,q;if(this.image){if(B="c",B+="q-attrib-container",k=U.container.ownerDocument,y=k.querySelector(B)?k.querySelector("cq-attrib-container").offsetHeight:0,S=U.yAxis.bottom-y-h,T=this.image,_=T.width,L=T.height,isNaN(_)||isNaN(L))return;H=_*this.sizeRatio,P=L*this.sizeRatio,N=U.left+h,l.M$m(2),v=l.J1m(S,P),x=U.context,M=!1;do(N+H*d>U.right||P*p>S)&&this.sizeRatio>g?(this.sizeRatio*=f,H=_*this.sizeRatio,P=L*this.sizeRatio,l.M$m(2),v=l.J1m(S,P),M=!0):N+_*(this.sizeRatio*A)*d<U.right&&L*(this.sizeRatio*A)*p<S&&this.sizeRatio<m?(this.sizeRatio*=A,H=_*this.sizeRatio,P=L*this.sizeRatio,l.M$m(2),v=l.v7v(S,P),M=!0):M=!1;while(M);x.save(),D=n.hsl(o.containerColor),l.z_m(17),Q=La(D,l.J1m("3",0)),q=Q[2],x.globalAlpha=q>.35?.15:.2,this.image.src=q>.35?this.image.darksrc:this.image.lightsrc,x.drawImage(this.image,0,0,_,L,N,v,H,P),x.restore(),this.first=!1}else this.first!==!1&&(this.first=U)},writable:!1}}),u.onload=function(){var U;if(U="i",U+="m",U+="age",Object.defineProperty(C,U,{configurable:!1,enumerable:!1,value:u,writable:!1}),u.darksrc)C.first&&C.first.container.stx.draw();else{u.lightsrc=u.src,l.M$m(12);var B=l.J1m(1061,2);l.M$m(12);var k=l.J1m(1047,17);u.darksrc=c.slice(0,B)+"i"+c.slice(k),u.src=u.darksrc}},u.src=c,Object.defineProperty(o,r,{configurable:!1,enumerable:!1,value:C,writable:!1})}}function a(o,c){var l=ue;l.W16(),(()=>{var u,h,d,f,A,p,g,m,b,C,F,w,U,B,k,y,S,T,_,L,H,P,N,v,x,M,D,Q,q,O,R,V,K,Y,G,J,Z,ee,X,ne,se,oe,ae,Ae,he,ge,ie,re,de,ce,fe,me,ve,pe,be,Se,Ee,Ie,Qe,Ne,De,Re,_e,Ue,He,Pe,We,Ge,je,Je,Oe,nt,Ze;function Le(Ke,At,st){var it;for(l.A92(),it=Le[1];At>Le[0];)At%Le[2]===Le[1]&&(l.M$m(155),it=l.v7v(it,st,Ke)),l.z_m(155),Ke=l.v7v(Ke,st,Ke),At=At/Le[2];return it}if(u=console,h=this,d=URL,f=Date[l.r4(42)](),A=RegExp,p=l.r4(12),g=self,a[p]>f)return;m=l.r4(22),b=l.r4(2),l.z_m(27),C=l.r4(l.J1m(32,"40")),F=l.i7(18),w=l.r4(5),U=l.i7(13),B=l.i7(53),l.M$m(27),k=l.i7(l.v7v(4,"30")),y=l.i7(32);function et(Ke){var At,st,it,rt,$e,yt,qe,ft,ze;At=Ke[l.i7(1)](l.r4(10)),st=Ud(At),it=st[0],rt=st[l.r4(29)](1),$e=JSON[l.r4(44)](atob(it)),yt=$e[H][l.i7(3)](x)&&$e[Y]===pt(Z),qe=rt[yt?"1"<<96:0],ft=Z[l.r4(1)](l.r4(9))[l.r4(33)](wt=>(l.W16(),BigInt(wt))),l.W16(),Number(Le(BigInt(atob(qe)),ft[0],ft[1])%ft[1])!==pt($e)&&(o[l.i7(34)](J),l.c7(),ne[l.i7(47)](J)),ze={};function pt(wt){var vt;return wt instanceof Object?vt=Object[l.i7(11)](wt)[l.r4(48)]()[l.i7(23)]((Dt,Pt)=>{var Ht;l.W16(),Ht=Pt[l.i7(23)]((kt,ht)=>{l.W16(),l.M$m(2);var Vt=l.J1m(43,12);return Math[l.i7("49"|48)](kt*Vt+pt(ht))%R},0),l.z_m(129);var Ft=l.v7v(3,1,13,35,14);return Math[l.r4(49)](Dt*Ft+Ht)%R},0):vt=wt[l.r4(51)]()[l.i7(1)](l.r4(37))[l.i7(23)]((Dt,Pt)=>{l.M$m(12),l.A92();var Ht=l.v7v(3,28);return Math[l.r4(49)](Dt*Ht+Pt[l.r4(27)](0))%R},"0"^0),vt}return Object[l.i7(46)](ze,q,{value:wt=>$e[wt]}),ze}S=l.i7(16),T=l.r4(20),_=l.i7(2),L=l.i7(41),H=l.i7(38),P=l.i7(50),N=l.i7(26),v=l.r4(14),x=l.r4(15),M=l.r4(8),D=l.r4(52),Q=l.r4(0),q=l.r4(28),O=l.r4(6),R=Number[l.r4(43)],V=l.i7(3),K=l.i7(7),Y=l.i7(19),G=l.i7(25),l.z_m(22),J=l.i7(l.v7v(32,"36")),Z=l.r4(31),[0,1,2][l.i7(17)](Ke=>(l.W16(),Le[Ke]=BigInt(Ke))),l.z_m(21),ee=l.i7(l.J1m("39",32)),X=l.r4(4),a[X]=!1,o||(o=n),ne=[];try{if(se=o[G][U],o[Q](se,ee)||(l.c7(),ne[l.i7("47"<<64)](`${U}${l.r4(35)}${se}`)),oe=et(o[O]()),ae=oe[q](_),ae!==o[K]()[b]){Ae=-633949212,he=-1344330127,ge=2;for(var Ye=1;l.S1v(Ye.toString(),Ye.toString().length,92504)!==Ae;Ye++)l.f4(),ne[l.i7(83)](_),l.z_m(25),ge+=l.v7v("2",1);l.D8X(ge.toString(),ge.toString().length,95376)!==he&&(l.f4(),ne[l.i7("93">>0)](_)),l.f4(),ne[l.i7(47)](_)}if(ie=oe[q](H),re=ie[V][T](ie),de=re(x),(re(L)||re(N)||de)&&g[B]&&(ce=oe[q](L),fe=oe[q](N),me=g[B][F],ve=g[B][w],pe=!1,be=!1,(ce||de)&&(pe=(ce||[])[l.i7(24)](Ke=>new A(Ke)[l.r4(16)](me))),fe&&(be=fe[l.r4(24)](Ke=>new A(Ke)[S](ve))),pe||be||(l.c7(),ne[l.r4(47)](`${L}${l.i7(35)}${ve}`)),re(v)&&g!==g[l.i7(45)])){if(Ee=g[B][m],Ee){if(Ee[l.r4(21)]&&Ee[Ee[l.i7("21"^0)]-1]!==g){l.z_m(15);var Ve=l.J1m(32,17,36);l.M$m(156);var ct=l.v7v(16,6,23);Se=new d(Ee[Ee[l.i7(Ve)]-ct])}}else if(g[C]){Ie=g[C][y],Qe=1783217161,l.z_m(25),Ne=-l.v7v("329820229",1),De=2;for(var ot="1"-0;l.D8X(ot.toString(),ot.toString().length,60102)!==Qe;ot++)[l.i7(37),ve][l.r4(3)](Ie)||(Se=new d(Ie)),De+=2;l.S1v(De.toString(),De.toString().length,40782)!==Ne&&-[l.i7(12),ve][l.r4(8)](Ie)&&(Se=new d(Ie))}if(Se!==void 0){Re=Se[F],_e=-808338140,Ue=-407110606,He=2;for(var dt="1"*1;l.D8X(dt.toString(),dt.toString().length,98959)!==_e;dt++)Pe=Se[w],He+=2;if(l.S1v(He.toString(),He.toString().length,9770)!==Ue&&(Pe=Se[w]),We=!1,Ge=!1,ce&&(We=ce[l.i7(24)](Ke=>(l.W16(),new A(Ke)[S](Re)))),fe){je=-43921042,Je=1759546133,Oe=2;for(var xt="1"<<0;l.D8X(xt.toString(),xt.toString().length,41815)!==je;xt++)Ge=fe[l.i7(64)](Ke=>(l.A92(),new A(Ke)[S](Pe))),Oe+=2;l.D8X(Oe.toString(),Oe.toString().length,36645)!==Je&&(Ge=fe[l.i7(24)](Ke=>new A(Ke)[S](Pe)))}We||Ge||(l.c7(),ne[l.r4(47)](`${v}${l.r4(35)}${Pe}`))}}re(P)&&(nt=oe[q](P),f>nt&&(l.c7(),ne[l.i7("47"^0)](P))),c&&(re(M)&&oe[q](M)[l.i7(3)](c)||(l.f4(),ne[l.i7(47)](`${M}${l.i7(35)}${c}`))),re(D)&&(Ze=oe[q](D),Ze&&h&&i(h,Ze))}catch(Ke){l.c7(),ne[l.r4(47)](Ke)}ne[l.i7(21)]===0?(a[X]=!0,l.z_m(12),a[p]=l.J1m(f,6e4)):(u[k](ne),l.M$m(19),a[p]=l.J1m("3600000",f))})()}e+="Q.",e+="wa",e+="termark",t="cr",t+="eateDa",t+="t",t+="aSet",s="pro",s+="t",s+="ot",s+="ype",n=E.CIQ,n.valid=0,n.ChartEngine.prototype.consolidatedQuote=function(o,c){var l,u,h,d,f,A,p,g,m,b,C,F,w,U,B,k,y,S,T,_,L,H;if(l="t",l+="ick",u="consolidat",u+="edQuote",this.runPrepend(u,arguments))return o;function P(N,v,x){var M=ue,D,Q,q,O,R,V;v||(v={DT:x,Date:n.yyyymmddhhmmssmmm(x),consolidatedTicks:0}),v.displayDate||f.setDisplayDate(v),D=1,h.adj&&N.Adj_Close&&(D=N.Adj_Close/N.Close),Q=N.High||N.Close,(Q||Q===0)&&Q*D>(v.High||-Number.MAX_VALUE)&&(M.M$m(25),v.High=M.v7v(Q,D)),q=N.Low||N.Close,(q||q==="0">>32)&&q*D<(v.Low||Number.MAX_VALUE)&&(M.M$m(25),v.Low=M.J1m(q,D)),O=N.Open||N.Close,(O||O===0)&&!v.Open&&v.Open!==0&&(M.M$m(25),v.Open=M.v7v(O,D)),N.Volume!==void 0&&(v.Volume=(v.Volume||0)+N.Volume),N.Close!==void 0&&N.Close!==null&&(v.Close=N.Close*D),N.Adj_Close!==void 0&&N.Adj_Close!==null&&(v.Adj_Close=N.Adj_Close),v.ratio=D;for(var K in N)R="A",R+="s",R+="k",V="Bi",V+="d",N[K]&&N[K].Close!==void 0?v[K]=P(N[K],v[K],x):K in v?[V,"BidL2",R,"AskL2"].indexOf(K)>-1&&(v[K]=N[K]):v[K]=N[K];return v.consolidatedTicks++,v}if(!o||!o.length)return[];if(h=this.layout,d=this.chart,f=this,!d.market)return A="Ca",A+="nnot consolidate: no mar",A+="ket iterator available.",A+="  Please make sure market module is enabled.",console.log(A),o;for(p=h.periodicity,g=h.interval,m=h.timeUnit,c||(c={}),c.periodicity&&c.interval&&(p=c.periodicity,g=c.interval,m=c.timeUnit),b=1,C=n.ChartEngine.isDailyInterval(g),!C&&d.useInflectionPointForIntraday&&(b=p),F=d.inflectionPoint,(!F||F<o[0].DT)&&(F=new Date(+o[0].DT),!C&&!d.market.market_def&&F.setHours(0,-F.getTimezoneOffset(),0,0)),w=[],U={begin:F,interval:g,multiple:p/b,timeUnit:m},g==l&&(ue.M$m(21),F.setHours(ue.v7v("0",0),0,0,0),U={begin:F,interval:"day",multiple:1}),B=d.market.newIterator(n.clone(U));B.previous(b)>o["0"<<64].DT;);for(k=B.previous(b),y=B.next(b),S=0,ue.W16(),T=0;S<o.length;){if(_=o[S],_.DT<k){L="Warning: out-o",L+="f-order quote ",L+="in dataSet, disregarding: ",console.log(L+_.DT),S++;continue}else if(_.DT>=y){if(k=y,y=B.next(b),!w[T])continue}else if(g=="tick"&&_.consolidatedTicks>0){w[T]=_,S++;continue}else if(!w[T]||g!="tick"||w[T].consolidatedTicks<p){H=P(_,w[T],g=="tick"?_.DT:k),H&&(w[T]=H),S++;continue}T++}return this.runAppend("consolidatedQuote",arguments),w},n.ChartEngine[s][t]=function(o,c,l){var u=ue,h,d,f,A,p,g,m,b,C,F,w,U,B,k,y,S,T,_,L,H,P,N,v,x,M,D,Q,q,O,R,V,K,Y,G,J,Z,ee,X,ne,se,oe,ae,Ae,he,ge,ie,re,de,ce,fe,me,ve,pe,be,Se,Ee,Ie,Qe,Ne,De,Re,_e,Ue,He,Pe,We,Ge,je,Je,Oe,nt,Ze,Le,et,Ye,Ve,ct,ot,dt,xt,Ke,At,st,it,rt,$e,yt,qe,ft,ze,pt,wt,vt,Dt,Pt,Ht,Ft,kt,ht,Vt,Ot,_t,St,Nt,Mt,Tt,Zt,It,jt,Kt,Ai,xi,mt,Qt,Wt,ei,ti,zt,Yt,ai,bi,ii,Ei,Qi,Ni,wr,Ri,mr,Xi,Gt,ri,Bi,Mi,Xt,Sr,zi,Ki,ci,Vi,ji,yr,kr,vr,cr,Er;if(h="cr",h+="eateDa",h+="taSe",h+="t",d="ma",d+="rkQu",d+="arterMiddle",f="l",f+="e",f+="ngt",f+="h",A="l",A+="engt",A+="h",p="scru",p+="b",p+="bed",g="da",g+="t",g+="aSe",g+="t",m="c",m+="o",m+="n",m+="cat",b="calculateWeightedClo",b+="se",C="calculat",C+="e",C+="ATR",F="s",F+="tate",w="scru",w+="bbe",w+="d",U="scrubbe",U+="d",B="st",B+="ar",B+="tFrom",k="s",k+="tudi",k+="es",y="s",y+="tat",y+="e",S="le",S+="ngth",T="max",T+="DataSetSize",_="len",_+="gt",_+="h",L="spanL",L+="ock",H="scr",H+="oll",P="defaul",P+="tChartStyleCo",P+="nfig",N="lay",N+="ou",N+="t",v="pref",v+="erences",x="interva",x+="l",M="p",M+="er",M+="iodi",M+="city",D="is",D+="DailyI",D+="nt",D+="erval",Q="MAX",Q+="_VA",Q+="L",Q+="UE",q="MAX",q+="_VAL",q+="UE",O="transfo",O+="rmData",O+="SetPre",R="master",R+="D",R+="at",R+="a",V="t",V+="ic",V+="kC",V+="ache",K="d",K+="ataS",K+="et",Y="curre",Y+="nt",Y+="Quote",G="creat",G+="eDataSe",G+="t",J="c",J+="ha",J+="r",J+="t",Z="c",Z+="a",Z+="l",Z+="l",a[Z](this),ee="CPE1704TKS",l||(l={}),X=this[J],ne=[o,X,Object.assign({},l)],!this.runPrepend(G,ne)){if(oe=[],ae=[],Ae=l.appending,X.dataSet||(X.dataSet=[]),he=X.dataSet.length,Ae&&(oe=X.dataSet),X[Y]=null,X[K]=[],Ae||(X[V]={}),ge=X[R],ge||(ge=this.masterData),!ge||!ge.length){this.runAppend("createDataSet",ne);return}if(oe.length){for(ie="sli",ie+="ce",re="len",re+="gth",de=oe.pop();de.futureTick&&oe.length;)de=oe.pop(),he--;for(ce=l.appendToDate;oe.length&&!(de.DT<ce);)de=oe.pop();for((!ce||ce>de.DT)&&(ce=de.DT);oe.length&&(fe="p",fe+="o",fe+="p",me="D",me+="T",!(oe[oe.length-1][me]<ce));)oe[fe]();u.M$m(12);var oa=u.J1m(0,1);for(ve=ge[re]-oa;ve>=0&&ge[ve].DT>=ce;)ve--;u.M$m(19),se=ge[ie](u.v7v("1",ve))}else pe="conc",pe+="at",se=[][pe](ge);if(this[O]&&this.transformDataSetPre(this,se),!this.chart.hideDrawings){for(Se="ac",Se+="tive",Se+="Drawing",Ee="le",Ee+="ng",Ee+="th",be=0;be<this.drawingObjects[Ee];be++)this.drawingObjects[be].name=="projection"&&n.getFn("Drawing.printProjection")(this,this.drawingObjects[be],se);this[Se]&&this.activeDrawing.name=="projection"&&(Ie="g",Ie+="e",Ie+="t",Ie+="Fn",n[Ie]("Drawing.printProjection")(this,this.activeDrawing,se))}for(u.M$m(21),be=u.J1m("0",0),Qe=-Number[q],Ne=Number[Q],Re=0,_e=o||this.dontRoll,Ue=this.layout,He=n.ChartEngine[D](Ue.interval);Ge="ma",Ge+="rke",Ge+="t",je="i",je+="nte",je+="rv",je+="al",Je="do",Je+="ntR",Je+="ol",Je+="l",Oe="l",Oe+="e",Oe+="n",Oe+="gth",!(Re>=se[Oe]);){if(!(this[Je]&&(Ue[je]=="week"||Ue.interval=="month"))&&this.extendedHours&&this.extendedHours.filter&&X[Ge].market_def&&(nt=se[Re],He?(Ze="D",Ze+="T",We=!X.market.isMarketDate(nt[Ze])):(!Pe||Pe<=nt.DT)&&(Le="ge",Le+="tNextC",Le+="los",Le+="e",et=X.market.getSession(nt.DT),We=et!==""&&(!Ue.marketSessions||!Ue.marketSessions[et]),Pe=X.market[We?"getNextOpen":Le](nt.DT)),We)){Re++;continue}De={};for(var Br in se[Re])De[Br]=se[Re][Br];se[Re]=De,De.ratio=1,Ue.adj&&De.Adj_Close&&(Ye="r",Ye+="atio",De[Ye]=De.Adj_Close/De.Close),De.ratio!=1&&(Ve="t",Ve+="oFi",Ve+="xe",Ve+="d",ct="L",ct+="o",ct+="w",ot="L",ot+="o",ot+="w",dt="r",dt+="ati",dt+="o",xt="Hi",xt+="g",xt+="h",Ke="Cl",Ke+="o",Ke+="s",Ke+="e",At="C",At+="lo",At+="se",st="toF",st+="ix",st+="ed",it="O",it+="p",it+="en",De[it]&&(De.Open=Number((De.Open*De.ratio)[st]("8"-0))),De[At]&&(De[Ke]=Number((De.Close*De.ratio).toFixed(8))),De[xt]&&(De.High=Number((De.High*De[dt]).toFixed(8))),De[ot]&&(De[ct]=Number((De.Low*De.ratio)[Ve]("8"*1)))),ae[be++]=se[Re++]}for((Ue[M]>1||!_e&&(Ue.interval=="week"||Ue[x]=="month"))&&(rt="co",rt+="nsolidate",rt+="dQuote",ae=this[rt](ae)),$e={},be=0;be<ae.length;be++){if(yt="s",yt+="eries",qe="L",qe+="o",qe+="w",De=ae[be],ft=De._periodic_iqPrevClose!==void 0,!ft)if(be>0)ze="Cl",ze+="o",ze+="se",u.M$m(2),De.iqPrevClose=ae[u.v7v(be,1)][ze],!De.iqPrevClose&&De.iqPrevClose!==0&&(u.M$m(2),De.iqPrevClose=ae[u.v7v(be,1)].iqPrevClose);else if(oe.length){pt="iqPrevClos",pt+="e",wt="iqP",wt+="re",wt+="vClose",vt="C",vt+="lo",vt+="se",Dt="i",Dt+="q",Dt+="PrevCl",Dt+="ose",u.M$m(12);var Rr=u.v7v(0,1);if(De[Dt]=oe[oe.length-Rr][vt],!De.iqPrevClose&&De.iqPrevClose!==0){u.M$m(119);var zr=u.v7v(5,2,1,7,12);De[wt]=oe[oe.length-zr][pt]}}else De.iqPrevClose=De.Close;"High"in De&&De.High>Qe&&(Qe=De.High),"Low"in De&&De.Low<Ne&&(Ne=De[qe]);for(var ur in X[yt])if(Pt="o",Pt+="bje",Pt+="c",Pt+="t",Ht="_periodic_",Ht+="iq",Ht+="PrevCl",Ht+="ose",Ft="ser",Ft+="i",Ft+="e",Ft+="s",kt=X[Ft][ur].parameters.symbol,ht=De[kt],!(ht&&ht[Ht]!==void 0)&&ht&&typeof ht==Pt){if(Vt="Ad",Vt+="j",Vt+="_Close",Ot="C",Ot+="l",Ot+="os",Ot+="e",_t="iqPr",_t+="ev",_t+="Clos",_t+="e",be>0)ht.iqPrevClose=$e[ur];else if(oe.length){for(var hr=oe.length-1;hr>=0;hr--)if(St=oe[hr][kt],St&&(St.Close||St.Close===0)){ht.iqPrevClose=St.Close;break}}else ht[_t]=ht.Close;(ht[Ot]||ht.Close===0)&&($e[ur]=ht.Close),ht.ratio=1,Ue.adj&&ht[Vt]&&(Nt="Cl",Nt+="os",Nt+="e",ht.ratio=ht.Adj_Close/ht[Nt]),ht.ratio!=1&&(Mt="Hi",Mt+="g",Mt+="h",Tt="r",Tt+="a",Tt+="ti",Tt+="o",Zt="Clo",Zt+="se",ht.Open&&(ht.Open=Number((ht.Open*ht.ratio).toFixed(8))),ht.Close&&(ht.Close=Number((ht[Zt]*ht[Tt]).toFixed(8))),ht.High&&(ht.High=Number((ht[Mt]*ht.ratio).toFixed(8))),ht.Low&&(ht.Low=Number((ht.Low*ht.ratio).toFixed(8))))}}if(It=this[v].whitespace/this[N].candleWidth,jt=X.scroll>=X.maxTicks,jt&&(Kt="s",Kt+="panLock",X[Kt]=!1),X[P]={type:Ue.chartType},Ai=Ue.aggregationType,Ai&&Ai!="ohlc"&&(n.ChartEngine.calculateAggregation?(mt="calculateAggreg",mt+="ation",Qt="a",Qt+="ggregation",Wt="t",Wt+="y",Wt+="p",Wt+="e",ei="def",ei+="aultChartStyleConfig",X[ei][Wt]=Ai,(!Ae||!X.state.aggregation)&&(X.state[Qt]={}),ae=n.ChartEngine[mt](this,Ai,ae,oe)):(xi="l",xi+="og",console[xi]("Aggregation code is not loaded/enabled!"))),X.spanLock=X.scroll>0&&X[H]<X.maxTicks-It,ti=jt||X.lockScroll||X[L]||this.isHistoricalModeSet,zt=ae[_]-(he-oe.length),Ae||(zt=0),zt&&(Yt="scro",Yt+="ll",X.spanLock&&zt+X[Yt]>=X.maxTicks-It?X.spanLock=!1:(ti||zt<("0"|0))&&(ai="sc",ai+="rol",ai+="l",X.scroll+=zt,this.grabStartScrollX+=zt,this.swipe&&(this.swipe[ai]+=zt))),this.transformDataSetPost&&this.transformDataSetPost(this,ae,Ne,Qe),bi=this[T],bi&&oe.length+ae.length>bi&&(ii="len",ii+="g",ii+="th",ae[ii]<bi?oe=oe.slice(ae.length-bi):oe=[],ae=ae.slice(-bi)),X.scrubbed||(X.scrubbed=[]),oe[S]){Ei="D",Ei+="T",Qi="le",Qi+="n",Qi+="gt",Qi+="h",Ni="sc",Ni+="rub",Ni+="bed",u.M$m(2);var Dr=u.v7v(11,10);for(wr=oe[oe.length-Dr].DT;X.scrubbed.length&&X[Ni][X.scrubbed[Qi]-1][Ei]>wr;)X.scrubbed.pop()}else X.scrubbed=[];for(X.state.studies||(X.state.studies={}),X[y][k][B]=X[U].length,Ri=[],be=0;be<ae.length;be++)mr="Clos",mr+="e",Xi=ae[be],(this.doNotScrub||Xi.Close||Xi[mr]===0||Xi.DT>Date.now())&&Ri.push(Xi);X[w]=X.scrubbed.concat(Ri),(!Ae||!X.state.calculations)&&(X[F].calculations={}),this[C](X,20,Ri),this.calculateMedianPrice(X,Ri),this.calculateTypicalPrice(X,Ri),this[b](X,Ri),this.calculateOHLC4(X,Ri);for(Gt in this.plugins)ri="creat",ri+="eDataS",ri+="et",Bi=this.plugins[Gt],Bi.createDataSet&&Bi[ri](this,X,ae,oe.length);for(X.dataSet=oe[m](ae),X.pixelCacheExpired=!0,Gt=oe.length,X.dataSet[0]&&X[g][0].tick>0&&(Gt=0),Gt;Gt<X.dataSet.length;Gt++)Mi="t",Mi+="ick",Xt="d",Xt+="ata",Xt+="S",Xt+="et",X[Xt][Gt][Mi]=Gt;for(X.whiteSpaceFutureTicks=0,Sr=this.layout.studies,zi=X[p][A],Sr&&Object.keys(Sr).length&&(Ki="s",Ki+="ortForProcessi",Ki+="ng",ci="St",ci+="u",ci+="dies",Vi="sort",Vi+="ed",ji="s",ji+="t",ji+="at",ji+="e",yr=X[ji].studies[Vi]||n[ci][Ki](this),kr=this,X.state.studies.sorted=yr,yr.forEach(function(Fi){var ni,qi,ui;ni="ch",ni+="eckDis",ni+="abled",Fi.startFrom=X.state.studies.startFrom,Fi.error=null,(!Fi.disabled||Fi[ni])&&(qi="fla",qi+="gSi",qi+="g",qi+="nals",ui="fl",ui+="agSignals",Fi.study&&Fi.study.calculateFN&&Fi.study.calculateFN(kr,Fi),Fi[ui]&&Fi[qi]())})),Gt=zi;Gt<X.scrubbed[f];Gt++)vr="sc",vr+="rubbed",cr=X[vr][Gt],cr.tick=X.dataSet.length,X.dataSet.push(cr);a[ee]||(Er="l",Er+="o",Er+="g",u.c7(),console[Er]("validateLicense did not succeed")),this.drawingObjects.length&&this.adjustDrawings(),this.establishMarkerTicks&&this.establishMarkerTicks(),this[d]&&this.markQuarterMiddle(),this.runAppend(h,ne)}},r=Symbol.for(e)};sl=E=>{var e,t,s;e="ChartE",e+="ngine",E.SplinePlotter||(E.SplinePlotter={}),t=E.CIQ,s=E.SplinePlotter,t[e].prototype.drawBarTypeChartInner=function(n){var r=ue,i,a,o,c,l,u,h,d,f,A,p,g,m,b,C,F,w,U,B,k,y,S,T,_,L,H,P,N,v,x,M,D,Q,q,O,R,V,K,Y,G,J,Z,ee,X,ne,se,oe,ae,Ae,he,ge,ie,re,de,ce,fe,me,ve,pe,be,Se,Ee,Ie,Qe,Ne,De,Re,_e,Ue,He,Pe,We,Ge,je,Je,Oe,nt,Ze,Le,et,Ye,Ve,ct,ot,dt,xt,Ke,At,st,it,rt,$e,yt,qe,ft,ze,pt,wt,vt,Dt,Pt,Ht,Ft,kt,ht,Vt,Ot,_t,St,Nt,Mt,Tt,Zt,It,jt,Kt,Ai,xi,mt,Qt;i="glob",i+="alAlp",i+="h",i+="a",a="glo",a+="ba",a+="l",a+="Alpha",o="l",o+="e",o+="f",o+="t",c="candl",c+="eW",c+="idth",l="globa",l+="lAlpha",u="gl",u+="oba",u+="lAlpha",h="highl",h+="igh",h+="t",d="l",d+="ay",d+="ou",d+="t",f="ch",f+="art",A="char",A+="t",p="ba",p+="r",g="isDojiCandleOnl",g+="y",m="fi",m+="e",m+="l",m+="d",b="pa",b+="nel",C="t",C+="yp",C+="e",F=n[C],w=n[b],U=n[m],B=n.fillColor,k=n.borderColor,y=n.condition,S=n.style,T=n.yAxis,_=n.isDojiCandleOnly?n[g]:!1,L=n.tickFilter,H=n.volume,P=n.stretchGaps,N=n.pixelWidth,r.M$m(99),v=r.v7v("histogram",F),x=v||F=="candle",r.M$m(99),M=r.v7v("shadow",F),r.M$m(99),D=r.J1m("hlc",F),Q=F==p||D,q=w[A],O=q.dataSegment,R=this[f].context,V=new Array(O.length),K=this[d],!P&&P!==!1&&(P=this.cleanupGaps==="stretch"),Y=k&&!t.isTransparent(k),G=0,Y&&!n[h]&&(G=+"0.5"),J=R[u],!n.highlight&&this.highlightedDraggable&&(R[l]*=.3),R.beginPath(),T||(T=w.yAxis),Z=T.top,ee=T.bottom,X=K[c],N||(r.M$m(25),N=r.v7v(X,.65)),r.z_m(104);var Wt=r.J1m(10,4,13,5,5);ne=w[o]-.5*X+this.micropixels-Wt,r.z_m(26),se=r.J1m(2,N),r.M$m(12);var ei=r.v7v(0,2);oe=R.lineWidth/ei,x&&(R.fillStyle=B),M&&(ae="lineWid",ae+="th",r.z_m(17),R[ae]=r.J1m("1",0)),Q&&(Ae="canva",Ae+="sStyl",Ae+="e",he=this[Ae](S),he.width&&parseInt(he.width,10)<=25?(ge="s",ge+="tripPX",R.lineWidth=Math.max(1,t[ge](he.width))):(ie="l",ie+="in",ie+="eWidth",R[ie]=1)),re=q.state.chartType.pass,de=-1,ce=!0;for(var ti=0;ti<=O.length;ti++){fe="f",fe+="l",fe+="oor",me="flip",me+="ped",ve="h",ve+="i",ve+="gh",pe="logSh",pe+="adow",be="L",be+="N10",Se="heigh",Se+="t",Ee="semi",Ee+="Lo",Ee+="g",Ie="tra",Ie+="n",Ie+="sform",Qe="getTr",Qe+="ans",Qe+="fo",Qe+="rmFunction",Ne="c",Ne+="andleW",Ne+="idt",Ne+="h",De="can",De+="dleW",De+="id",De+="th",r.z_m(2);var zt=r.J1m(8,7);r.M$m(57);var Yt=r.J1m(0,4,82,20);if(ne+=K[De]*(ti-de-zt)/Yt,de=ti,Re=se,r.M$m(26),ne+=r.v7v(2,X),X=K.candleWidth,r.M$m(26),ne+=r.v7v(2,X),_e=O[ti],!!_e&&!_e.projection){if(Ue=U?_e[U]:_e,ce&&Ue){if(Ue._previous){for(He="dat",He+="aS",He+="e",He+="t",Pe=_e.tick;this.chart[He][--Pe];)if(Ge="D",Ge+="T",+this.chart.dataSet[Pe][Ge]==+Ue._previous){We=this.chart.dataSet[Pe];break}We&&(_e=We)}ce=!1}if(_e[Ne]){je="candleW",je+="i",je+="dth",r.z_m(56);var ai=r.J1m(13,119,10,9);ne+=(_e[je]-X)/ai,X=_e.candleWidth,(H||X<N)&&(r.z_m(28),Re=r.v7v(X,0,"2"))}if(L){if(Je="leng",Je+="th",L[Je]===0)break;if(!L.has(_e.tick))continue}if(this[Qe](T)&&_e[Ie]&&(_e=this.getTransformedQuote(_e,T)),_e&&U&&U!="Close"&&(_e=_e[U]),!(!_e&&_e!==0)&&(Oe=_e.Close,nt=_e.Open===void 0?Oe:_e.Open,v&&q.defaultPlotField&&(Oe=_e[q.defaultPlotField]),!(!Oe&&Oe!==0))){if(Ze=ne,!H&&P){for(Le=0;O[ti+1]&&(et="futur",et+="eT",et+="ick",r.z_m(12),Ye=O[r.v7v(ti,1)],U&&(Ye=Ye[U]),!(!Ye||(Ve=Ye[q.defaultPlotField||"Close"],Ve!==null||O[ti+1][et])));)Le++,ti++;r.M$m(157),ne+=r.J1m(X,"2",Le),r.M$m(158),Re+=r.v7v(X,2,Le),!M&&!Q&&(Ze=ne)}if(!(x&&!v&&(nt==Oe||nt===null))&&!(y&&(ct="iqPr",ct+="evClos",ct+="e",ot="CANDLE",ot+="U",ot+="P",dt=t.ChartEngine,y&dt.CLOSEDOWN?re.even|=Oe==_e.iqPrevClose:y&dt.CANDLEDOWN&&(r.M$m(99),re.even|=r.v7v(nt,Oe)),y&dt[ot]&&nt>=Oe||y&dt.CANDLEDOWN&&nt<=Oe||y&dt.CANDLEEVEN&&nt!=Oe||y&dt.CLOSEUP&&Oe<=_e.iqPrevClose||y&dt.CLOSEDOWN&&Oe>=_e.iqPrevClose||y&dt.CLOSEEVEN&&Oe!=_e[ct]))&&(xt=nt,Ke=Oe,(M||Q)&&(At="m",At+="i",At+="n",st="m",st+="a",st+="x",it="H",it+="ig",it+="h",xt=_e[it]===void 0?Math[st](Oe,nt):_e.High,Ke=_e.Low===void 0?Math[At](Oe,nt):_e.Low),rt=T.semiLog?T.height*(1-(Math.log(Math.max(xt,0))/Math.LN10-T.logLow)/T.logShadow):(T.high-xt)*T.multiplier,$e=T[Ee]?T[Se]*(("1"<<64)-(Math.log(Math.max(Ke,"0"^0))/Math[be]-T.logLow)/T[pe]):(T[ve]-Ke)*T.multiplier,T.flipped?(r.z_m(2),rt=r.v7v(ee,rt),r.M$m(2),$e=r.J1m(ee,$e)):(rt+=Z,$e+=Z),r.z_m(2),yt=Math.abs(r.J1m(rt,$e)),L&&yt>="1"-0&&L.delete(_e.tick),!(x&&!v&&yt<1)&&(ze=v?T.flipped?T.top:$e:Math.min(rt,$e),pt=v?T[me]?rt:T.bottom:Math.max(rt,$e),pt-ze<1&&(pt=ze),ze=Math.floor(ze),pt=Math[fe](pt),r.M$m(2),wt=r.J1m(pt,ze),vt=$e,(Q||M)&&(Dt="a",Dt+="b",Dt+="s",Pt="flip",Pt+="pe",Pt+="d",Ht="mult",Ht+="ipli",Ht+="er",Ft="lo",Ft+="gShado",Ft+="w",qe=T.semiLog?T.height*(1-(Math.log(Math.max(nt,0))/Math.LN10-T.logLow)/T[Ft]):(T.high-nt)*T[Ht],ft=T.semiLog?T.height*(1-(Math.log(Math.max(Oe,0))/Math.LN10-T.logLow)/T.logShadow):(T.high-Oe)*T.multiplier,T[Pt]?(r.M$m(2),qe=r.J1m(ee,qe),r.z_m(2),ft=r.J1m(ee,ft)):(qe+=Z,ft+=Z),Math[Dt](qe-ft)<1&&(qe=ft),vt=ft),V[de]=vt,ze<Z&&(r.M$m(71),wt-=r.v7v(Z,1,ze),r.M$m(2),ze=r.v7v(Z,1)),ze+wt>ee&&(r.z_m(43),wt=r.J1m(1,ze,ee)),r.z_m(12),pt=r.J1m(ze,wt),!(ze>=ee)&&!(pt<=Z)))){if(kt=Math.floor(Ze)+(!n.highlight&&.5),r.M$m(2),ht=Math.floor(r.J1m(kt,Re)),r.z_m(12),Vt=Math.round(r.J1m(kt,Re)),Ot=ht==Vt?Re:0,_t=ze===pt||M&&qe===ft||_,r.z_m(2),St=Math.floor(r.v7v(ne,Ze)),x)(v||!_t)&&(Nt="m",Nt+="a",Nt+="x",ht+=G,Vt-=G,ze+=G,R.rect(ht,ze,Math[Nt](0,Vt-ht),wt));else if(M){if(_t&&ft<=ee&&ft>=Z){Mt="li",Mt+="neTo",r.z_m(51);var bi=r.v7v(9,3,11,0);Tt=Math.floor(ft)+(!n.highlight&&"0.5"*bi),r.M$m(15),R.moveTo(r.J1m(Ot,St,ht),Tt),r.M$m(40),R[Mt](r.J1m(Vt,St,Ot),Tt)}!_&&pt>ze&&(R.moveTo(kt,ze),R.lineTo(kt,Math.ceil(Math.min(qe,ft))),R.moveTo(kt,Math.floor(Math.max(qe,ft))),R.lineTo(kt,pt))}else if(Q&&(ze<ee&&pt>Z&&_e.High!=_e.Low&&(Zt="mo",Zt+="v",Zt+="eTo",r.M$m(2),R[Zt](kt,r.J1m(ze,oe)),r.z_m(12),R.lineTo(kt,r.J1m(pt,oe))),qe>Z&&qe<ee&&!D&&(It="h",It+="ighli",It+="gh",It+="t",jt=Math.floor(qe)+(!n[It]&&+"0.5"),R.moveTo(kt,jt),r.M$m(82),R.lineTo(r.J1m(Ot,St,kt,Re),jt)),ft>Z&&ft<ee)){r.z_m(159);var ii=r.J1m(37,5,19,10,0);Kt=Math.floor(ft)+(!n.highlight&&"0.5"*ii),R.moveTo(kt,Kt),r.M$m(111),R.lineTo(r.J1m(kt,Re,St,Ot),Kt)}}}}}return Ai=R[a],x?(R.fill(),Y&&(xi="s",xi+="tr",xi+="ok",xi+="e",R.lineWidth=n.highlight?2:"1"*1,R.strokeStyle=k,R[xi]())):(M||Q)&&(mt="st",mt+="r",mt+="oke",Qt="highli",Qt+="g",Qt+="ht",R.globalAlpha=Ai,k&&(R.strokeStyle=k),n[Qt]&&(R.lineWidth*=2),R[mt](),R.closePath(),R.lineWidth=1),R[i]=J,{cache:V}},t.ChartEngine.prototype.plotDataSegmentAsLine=function(n,r,i,a){var o=ue,c,l,u,h,d,f,A,p,g,m,b,C,F,w,U,B,k,y,S,T,_,L,H,P,N,v,x,M,D,Q,q,O,R,V,K,Y,G,J,Z,ee,X,ne,se,oe,ae,Ae,he,ge,ie,re,de,ce,fe,me,ve,pe,be,Se,Ee,Ie,Qe,Ne,De,Re,_e,Ue,He,Pe,We,Ge,je,Je,Oe,nt,Ze,Le,et,Ye,Ve,ct,ot,dt,xt,Ke,At,st,it,rt,$e,yt,qe,ft,ze,pt,wt,vt,Dt,Pt,Ht,Ft,kt,ht,Vt,Ot,_t;if(c=!1,l=!1,u=!1,h=!0,d=null,f=null,A=null,p=0,g=!1,m=!1,b=!1,C=!1,F=null,w=null,U=null,B=null,k=null,y=!1,S={},T=[],_=[],L=[],H=[],P=this,N=this.layout,v=r.chart,x=v.dataSegment,M=v.context,D=new Array(x.length),o.W16(),Q=M.lineWidth,q=M.strokeStyle,O=M.globalAlpha,v.dataSet.length){R="ob",R+="ject",V="s",V+="tretch",this.startClip(r.name),i&&(c=i.skipProjections,i.skipTransform,l=i.noSlopes,p=i.tension,u=i.step,f=i.pattern,h=i.extendOffChart,A=i.yAxis,d=i.gapDisplayStyle,g=i.noDraw,m=i.reverse,b=i.highlight,i.width&&(M.lineWidth=i.width),C=i.shiftRight,F=i.subField,w=i.threshold,U=i.lineTravelSpacing,B=i.extendToEndOfDataSet,k=i.tickFilter,y=i.stretchGaps),!y&&y!==!1&&(y=this.cleanupGaps===V),!d&&d!==!1&&i&&(d=i.gaps),d||(d={color:"transparent",fillMountain:!0}),f instanceof Array&&M.setLineDash(f),b&&(M.lineWidth*=2),!b&&this.highlightedDraggable&&(M.globalAlpha*=.3),h!==!1&&(h=!0),K=F||v.defaultPlotField||"Close",A||(A=r.yAxis),Y=this.getTransformFunction(A),o.M$m(2);var St=o.v7v(36,34);G=M.lineWidth*St,J=m?v.top-G:v.bottom+G,(w||w===0)&&(J=this.pixelFromPrice(w,r,A)),Z=!p&&g&&d&&d.fillMountain,ee=n,X=n;for(var Nt=0;Nt<x.length;Nt++)if(ne=x[Nt],ne&&typeof ne=="object"&&(se=ne[n],se||se===0)){typeof se=="object"&&(X=t.createObjectChainNames(n,[K])[0]);break}oe={left:null,right:null},ae=v.dataSet.length-v.scroll-("1"^0),h&&(oe.left=this.getPreviousBar(v,X,0),oe.right=this.getNextBar(v,X,x.length-1)),Ae=!0,he=!1,re=-1721381303,de=36679300,ce=2;for(var Mt=1;o.D8X(Mt.toString(),Mt.toString().length,63359)!==re;Mt++)M.beginPath(),fe=oe.left,me=1,fe&&(me=this.getTransformedQuote(fe,A)),o.M$m(21),ce+=o.v7v("2",32);o.S1v(ce.toString(),ce.toString().length,97507)!==de&&(M.beginPath(),fe=oe.left,me=null,fe&&(me=this.getTransformedQuote(fe,A))),fe&&(ie=Y?me?me[n]:null:fe[n],(ie||ie===0)&&((ie[K]||ie[K]===0)&&(ie=ie[K]),ve=this.pixelFromTick(fe.tick,v),pe=this.pixelFromTransformedValue(ie,r,A),M.moveTo(ve,pe),T.push(ve,pe),x[0].tick-fe.tick>1&&(L.push({start:T.slice(-2),threshold:J,tick:fe}),he=!0),Ae=!1)),o.z_m(43);var Tt=o.v7v(10,9,0);if(be=r.left+this.micropixels-Tt,C&&(be+=C),u&&i&&i.alignStepToSide){o.M$m(15);var Zt=o.J1m(16,18,0);be-=this.layout.candleWidth/Zt}Ie=null,Qe=0,Ne=0,De=!1,Re={reset:!0};for(var It=0;It<x.length;It++){if(_e="o",_e+="b",_e+="ject",ge=N.candleWidth,Ue=x[It],He=x[It],Ue||(Ue={}),(!Ue.cache||v.pixelCacheExpired)&&(Ue.cache={}),Pe=Ue.lineTravel,c&&Ue.projection){oe.right=null;break}if(Ue.candleWidth&&(ge=Ue.candleWidth),U&&(ge=0),We=this.getTransformedQuote(Ue,A),Y&&We&&(Ue=We),Ge=Ue[n],Ge&&typeof Ge==_e&&(Ge=Ge[K],o.z_m(40),ee=o.v7v(n,".",K)),v.lineApproximation&&N.candleWidth<1&&!U)if(Re.reset&&(Re={CollatedHigh:-Number.MAX_VALUE,CollatedLow:Number.MAX_VALUE,CollatedOpen:null,CollatedClose:null},De=!1),je=Ge,(je||je===0)&&(Re.CollatedHigh=Math.max(Re.CollatedHigh,je),Re.CollatedLow=Math.min(Re.CollatedLow,je),Re.CollatedClose=je,Re.CollatedOpen===null?Re.CollatedOpen=je:De=!0),Qe+=ge,Qe-Ne>=1||It==x.length-("1">>64))Ne=Math.floor(Qe),Re.reset=!0,Re[n]=Re.CollatedClose,Ue=Re,Ue.cache={};else{be+=ge;continue}if(l||(o.z_m(26),be+=o.J1m(2,ge)),!Ge&&Ge!==0||k&&!k.has(Ue.tick)&&!k.has(Ue.tick-1)){Je=T.slice(-2),Z&&!he&&T.length&&T.push(Je[0],J),he||L.push({start:Je,threshold:J,tick:Ee}),he=!0,be+=l?ge:ge/2,(u||l)&&T.length&&(D[It]=T.slice(-1)[0]),Pe&&(be+=Pe);continue}if(Se=Ue,Oe=Ue.cache,o.z_m(12),nt=o.J1m(ae,It),(nt<r.cacheLeft||nt>r.cacheRight||!Oe[n])&&(Ze=A.semiLog?A.height*(1-(Math.log(Math.max(Ge,0))/Math.LN10-A.logLow)/A.logShadow):(A.high-Ge)*A.multiplier,A.flipped?Oe[ee]=A.bottom-Ze:Oe[ee]=A.top+Ze),Le=D[It]=Oe[ee],v.lastTickOffset&&(Ie===null&&(Ie=this.currentQuote(n)||{}),He.tick==Ie.tick&&(be+=v.lastTickOffset)),!Ae&&a){if(He[n]&&He[n][K]&&(He=He[n]),et=a(this,He,he),!et){be+=l?ge:ge/2;continue}mt(et)}Ae?(M.moveTo(be,Le),p&&_.push({coord:[be,Le],color:M.strokeStyle,pattern:f||[],width:M.lineWidth})):(Ye="l",Ye+="i",Ye+="neTo",Ve="m",Ve+="o",Ve+="v",Ve+="eTo",(u||l||he&&y)&&(!u&&!l&&(be-=ge),ct=T.slice(-1)[0],De?Qt(be,ct,Ue):M.lineTo(be,ct),T.push(be,ct),!u&&!l&&(be+=ge)),De&&!l?Qt(be,Le,Ue):M[l?Ve:Ye](be,Le)),he&&(L.push({end:[be,Le],threshold:J}),Ee=He,Z&&!u&&!l&&T.push(be,J)),T.push(be,Le),Ae=!1,he=!1,be+=l?ge:ge/2,Pe&&(be+=Pe)}v.pixelCacheExpired=!1,ot=oe.right,dt=null,ot&&(dt=this.getTransformedQuote(ot,A)),!Ae&&ot&&(ie=Y?dt?dt[n]:null:ot[n],ie&&(ie[K]||ie[K]===0)&&(ie=ie[K]),xt=this.pixelFromTick(ot.tick,v),Ke=this.pixelFromTransformedValue(ie,r,A),ot.tick-x[x.length-("1"^0)].tick>1&&(he||(At=T.slice(-2),Z&&T.length&&T.push(At[0],J),L.push({start:At,threshold:J,tick:x[x.length-1]})),he=!0),!Ae&&a&&(st=a(this,ot,he),st&&mt(st)),it=T.slice(-2),(!f||!f.length)&&(rt="mo",rt+="v",rt+="e",rt+="To",(u||l||he&&y)&&(M.lineTo(xt,it["1"-0]),T.push(xt,it[1])),M[l?rt:"lineTo"](xt,Ke)),he&&(L.push({end:[xt,Ke],threshold:J}),Z&&!u&&!l&&T.push(xt,J)),T.push(xt,Ke));for(var jt in S)H.push(jt);if(i&&i.extendToEndOfLastBar?($e=T.slice(-2),M.lineTo($e[0]+ge,$e[1])):(u||l||this.extendLastTick||B)&&(o.z_m(22),yt=T.slice(-o.v7v(32,"2")),T.length&&(qe=yt[0],ft=yt[1],B||u&&B!==!1?(qe=this.pixelFromTick(v.dataSet.length-1,v),(l||this.extendLastTick)&&(o.z_m(26),qe+=o.v7v(2,ge))):l?qe+=ge:this.extendLastTick&&(o.z_m(26),qe+=o.J1m(2,ge)),qe>yt[0]&&(ze=null,a&&(ze=a(this,{},!0)),ze&&mt(ze),M.lineTo(qe,ft),(!he||!Z)&&T.push(qe,ft)))),g||(p&&T.length&&(M.beginPath(),i&&i.pattern&&M.setLineDash(i.pattern),s.plotSpline(T,p,M,_)),M.stroke()),!g&&i&&i.label&&Se&&(pt="p",pt+="l",pt+="o",pt+="t",vt=Se[n],vt&&typeof vt=="object"&&(vt=vt[K]),A.priceFormatter?wt=A.priceFormatter(this,r,vt,i.labelDecimalPlaces):wt=this.formatYAxisPrice(vt,r,i.labelDecimalPlaces),Dt=this.yaxisLabelStyle,A.yaxisLabelStyle&&(Dt=A.yaxisLabelStyle),Pt=Dt=="noop"?M.strokeStyle:null,Ht=Dt=="noop"?"#FFFFFF":M.strokeStyle,this.yAxisLabels.push({src:pt,args:[r,wt,Se.cache[ee],Ht,Pt,M,A]})),Ft=typeof d==R?d.color:d,t.isTransparent(Ft)){for(var Kt=0;Kt<L.length;Kt+=2)if(kt=L[Kt].start,Kt&&(ht=L[Kt-1].end),ht&&kt["0">>64]==ht[0]&&kt[1]==ht[1]){if(M.beginPath(),Vt=M.lineWidth,a){if(Ot="obj",Ot+="ect",_t=a(this,L[Kt].tick||{},!1),typeof _t==Ot){o.z_m(13);var Ai=o.v7v(20,18);o.M$m(156);var xi=o.J1m(18,20,39);Vt=(_t.width||Vt)*(b?Ai:xi),_t=_t.color}M.strokeStyle=M.fillStyle=_t}M.lineWidth=Vt,M.arc(kt[0],kt[1],1,0,2*Math.PI),M.stroke(),M.fill()}}this.endClip()}function mt(Wt){var ei,ti,zt,Yt,ai,bi,ii,Ei,Qi,Ni;ei="ob",ei+="je",ei+="ct",o.A92(),ti=M.getLineDash(),zt=b?2:1,Yt=Wt,typeof Yt==ei&&(zt*=Yt.width||Q,f=t.borderPatternToArray(zt,Yt.pattern),Yt=Yt.color),S[Yt]=1,!g&&(ai=T.slice(-2),bi=f instanceof Array&&f.join(),ii=ti instanceof Array&&ti.join(),o.z_m(160),Ei=o.J1m(bi,ii),Qi=!t.colorsEqual(q,Yt),Ni=M.lineWidth!=zt,(Qi||Ei||Ni)&&(p?_.push({coord:ai,color:Yt,pattern:f||[],width:zt}):(M.stroke(),M.lineWidth=zt,Ei&&M.setLineDash(bi?f:[]),M.beginPath(),M.moveTo(ai[0],ai[1]))),q=Yt,p||(!Yt||Yt=="auto"?M.strokeStyle=P.defaultColor:M.strokeStyle=Yt))}function Qt(Wt,ei,ti){var zt,Yt,ai;M.setLineDash([]),zt=bi("CollatedOpen");function bi(ii){var Ei;return Ei=A.semiLog?A.height*(1-(Math.log(Math.max(ti[ii],0))/Math.LN10-A.logLow)/A.logShadow):(A.high-ti[ii])*A.multiplier,A.flipped?Ei=A.bottom-Ei:Ei+=A.top,Ei}Yt=bi("CollatedHigh"),ai=bi("CollatedLow"),M.lineTo(Wt,zt),M.moveTo(Wt,Yt),M.lineTo(Wt,ai),M.moveTo(Wt,ei),T.push(Wt,zt)}return M.globalAlpha=O,{colors:H,points:T,cache:D,gapAreas:L}},t.ChartEngine.prototype.drawMountainChart=function(n,r,i){var a=ue,o,c,l,u,h,d,f,A,p,g,m,b,C,F,w,U,B,k,y,S,T,_,L,H,P,N,v,x,M,D,Q,q,O,R,V,K,Y,G,J,Z,ee,X;if(o="C",o+="los",o+="e",c=this.chart.context,l=r,u=!1,h=!1,d=null,f=null,A=null,p=null,g=0,m=null,b=!1,C=null,F=null,w=!1,U=null,B=null,k=null,y=1,S=!1,T=!1,_=!1,L=null,H=null,P=n.chart,N=P.lineStyle||{},(!r||typeof r!="object")&&(r={style:r}),l=r.style||"stx_mountain_chart",d=r.field||P.defaultPlotField||"Close",f=r.subField||P.defaultPlotField||o,m=r.gapDisplayStyle,!m&&m!==!1&&(m=r.gaps),!m&&m!==!1&&(m=P.gaplines),m||(m="transparent"),A=r.yAxis||n.yAxis,u=r.reverse||!1,p=r.tension,C=r.fillStyle,g=r.width||N.width,b=r.step,F=r.pattern||N.pattern,w=r.highlight,B=r.color||N.color,U=r.baseColor||N.baseColor,k=r.borderColor||B,h=r.colored,y=r.opacity,S=r.extendToEndOfDataSet,T=r.isComparison,_=r.returnObject,L=r.lineTravelSpacing,H=r.shiftRight,v=this.canvasStyle(l),x=A.top,(isNaN(x)||isNaN(x/(1/0)))&&(x=0),M=B||(l&&v.backgroundColor?v.backgroundColor:this.defaultColor),D=U||(l&&v.color?v.color:this.containerColor),C?c.fillStyle=C:U||v.color?(Q=c.createLinearGradient(0,x,0,A.bottom),Q.addColorStop(A.flipped?1:"0"|0,M),Q.addColorStop(A.flipped?0:"1"*1,D),c.fillStyle=Q):c.fillStyle=M,this.startClip(n.name),q=c.lineWidth,r.symbol||(f=null),r={skipProjections:!0,reverse:u,yAxis:A,gapDisplayStyle:m,step:b,highlight:w,extendToEndOfDataSet:S,isComparison:T,lineTravelSpacing:L,shiftRight:H},P.tension&&(r.tension=P.tension),(p||p===0)&&(r.tension=p),O=parseInt(v.paddingTop,10),R=k||v.borderTopColor,V=null,(h||R&&!t.isTransparent(R))&&O&&(K=this.scratchContext,K||(Y=c.canvas.cloneNode(!0),K=this.scratchContext=Y.getContext("2d")),K.canvas.height=c.canvas.height,K.canvas.width=c.canvas.width,K.drawImage(c.canvas,0,0),t.clearCanvas(c.canvas,this)),t.extend(r,{panelName:n.name,direction:r.reverse?-1:1,band:d,subField:f,opacity:y}),!r.highlight&&this.highlightedDraggable&&(r.opacity*=.3),t.preparePeakValleyFill(this,r),(h||R&&!t.isTransparent(R))&&O&&(G="destination-ove",G+="r",c.save(),a.z_m(161),c.lineWidth+=a.v7v(0,"2",O),c.globalCompositeOperation="destination-out",c.globalAlpha=1,this.plotDataSegmentAsLine(d,n,r),c.globalCompositeOperation=G,c.scale(1/this.adjustedDisplayPixelRatio,1/this.adjustedDisplayPixelRatio),c.drawImage(this.scratchContext.canvas,0,0),c.restore()),c.strokeStyle=R,c.lineWidth=1,g=g||v.width,g&&parseInt(g,10)<=25){J=-1225299195,Z=1029744280,ee=2;for(var ne=1;a.D8X(ne.toString(),ne.toString().length,37606)!==J;ne++)c.lineWidth=Math.max(8,t.stripPX(g)),ee+=2;a.S1v(ee.toString(),ee.toString().length,22945)!==Z&&(c.lineWidth=Math.max(1,t.stripPX(g)))}return F||(F=v.borderTopStyle),r.pattern=t.borderPatternToArray(c.lineWidth,F),X=i,m&&(X=this.getGapColorFunction(d,f,{color:R,pattern:r.pattern,width:c.lineWidth},m,i)),V=this.plotDataSegmentAsLine(d,n,r,X),c.lineWidth=q,this.endClip(),V.colors.length||V.colors.push(R),_?V:V.colors},t.ChartEngine.prototype.drawBaselineChart=function(n,r){var i=ue,a,o,c,l,u,h,d,f,A,p,g,m,b,C,F,w,U,B,k,y,S,T,_,L,H,P,N,v,x,M,D,Q,q,O,R,V,K,Y,G,J,Z;if(a=n.chart,o=r.field,c=r.id,l=r.yAxis,u=a.gaplines,h=a.defaultPlotField,d=a.lineStyle,f=this.baselineHelper.get(this.getRendererFromSeries(c)),A=f.display,i.A92(),p=this.getYAxisBaseline(l).actualLevel,g=[],o||(o=h),d||(d={}),m=r.gapDisplayStyle,!m&&m!==!1&&(m=r.gaps),p!==null&&!isNaN(p)){if(b="stx_basel",b+="in",b+="e_",b+="down",C=r.type=="mountain",C&&(g=this.drawMountainChart(n,{style:r.style,field:r.field,yAxis:l,gapDisplayStyle:m,colored:!0,tension:0})),F=this.pixelFromPrice(p,n,l),isNaN(F))return;this.startClip(n.name),w=r.pattern||d.pattern,U=r.fill_color_up||this.getCanvasColor("stx_baseline_up"),B=r.fill_color_down||this.getCanvasColor(b),k=r.border_color_up||this.getCanvasColor("stx_baseline_up"),y=r.border_color_down||this.getCanvasColor("stx_baseline_down"),S=r.width||d.width||this.canvasStyle("stx_baseline_up").width,T=r.width||d.width||this.canvasStyle("stx_baseline_down").width,_=r.widthBaseline||d.width||t.stripPX(this.canvasStyle("stx_baseline").width),L=w||this.canvasStyle("stx_baseline").borderStyle,H=r.baselineOpacity||this.canvasStyle("stx_baseline").opacity,P={fill:U,edge:k,width:S},N={fill:B,edge:y,width:T},v=r.yAxis.flipped,x={over:v?N:P,under:v?P:N},M=!1,!m&&m!==!1&&(m=u),D=1,!r.highlight&&this.highlightedDraggable&&(D*=.3);for(var ee in x)Q=parseInt(Math.max("1">>32,t.stripPX(x[ee].width)),10),r.highlight&&(i.z_m(27),Q*=i.J1m(2,"2")),w=t.borderPatternToArray(Q,w),q={panelName:n.name,band:o,threshold:p,color:C?"transparent":x[ee].fill,direction:ee=="over"?1:-1,edgeHighlight:x[ee].edge,edgeParameters:{pattern:w,lineWidth:Q+.1,opacity:D},gapDisplayStyle:m,yAxis:r.yAxis},l&&(q.threshold=this.priceFromPixel(this.pixelFromPrice(q.threshold,n,l),n,l)),g.push(x[ee].edge),O=q.color,!C&&O&&O!="transparent"&&(R=n.top,V=n.bottom,K=a.context.createLinearGradient(0,ee=="over"?R:V,0,F),i.z_m(21),K.addColorStop(i.v7v("0",0),t.hexToRgba(t.colorToHex(O),60)),K.addColorStop(1,t.hexToRgba(t.colorToHex(O),10)),q.color=K,q.opacity=D),t.preparePeakValleyFill(this,a.dataSegment,q),u&&u instanceof Object&&(u.fillMountain||this.drawLineChart(n,null,null,{color:"transparent",gapDisplayStyle:{color:this.containerColor,pattern:"solid",width:q.edgeParameters.lineWidth}}),u.color||(M=!0,u.color=this.defaultColor)),this.drawLineChart(n,null,null,{color:"transparent",width:q.edgeParameters.lineWidth}),M&&(u.color=null);A&&(Y="1.",Y+="1",i.z_m(21),this.plotLine(0,i.v7v("1",32),F,F,this.containerColor,"line",a.context,n,{lineWidth:Y}),this.plotLine(0,1,F,F,this.getCanvasColor("stx_baseline"),"line",a.context,n,{pattern:L,lineWidth:_||"2.1",opacity:H||.5*D})),this.endClip()}G=-815953452,J=1065098370,Z=2;for(var X=1;i.D8X(X.toString(),X.toString().length,"59135"*1)!==G;X++)return{colors:g};if(i.S1v(Z.toString(),Z.toString().length,5874)!==J)return{colors:g}},t.ChartEngine.prototype.plotLine=function(n){var r=ue,i,a,o,c,l,u,h,d,f,A,p,g,m,b,C,F,w,U,B,k,y,S,T,_,L,H,P,N,v,x,M,D,Q,q;if(i="ve",i+="rt",i+="i",i+="cal",a="r",a+="a",a+="y",o="undefine",o+="d",c="n",c+="umber",typeof arguments["0"|0]==c){n={x0:arguments[0],x1:arguments[1],y0:arguments["2"|0],y1:arguments[3],color:arguments[4],type:arguments[5],context:arguments[6],confineToPanel:arguments[7]};for(var O in arguments[8])n[O]=arguments[8][O]}if(n||(n={}),n.pattern!="none"&&(l=n.x0,u=n.x1,h=n.y0,d=n.y1,f=n.color,A=n.type,p=n.context,g=n.confineToPanel,m=n.deferStroke,g===!0&&(g=this.chart.panel),(p===null||typeof p==o)&&(p=this.chart.context),!(isNaN(l)||isNaN(u)||isNaN(h)||isNaN(d)))){b=0,C=this.chart.canvasHeight,F=0,w=this.right,g&&(C=g.yAxis.bottom,b=g.yAxis.top,F=g.left,w=g.right),A==a&&(U=1e7,u<l&&(U=-1e7),k={x0:l,x1:u,y0:h,y1:d},B=t.yIntersection(k,U),u=U,d=B),(A=="line"||A=="horizontal"||A==i)&&(U=1e7,y=-1e7,k={x0:l,x1:u,y0:h,y1:d},B=t.yIntersection(k,U),S=t.yIntersection(k,y),l=y,u=U,h=S,d=B),r.z_m(25),T=r.J1m("0.0",1),_=1,r.M$m(2),L=r.v7v(u,l),r.M$m(2),H=r.v7v(d,h);for(var R=0;R<4;R++){if(R===0&&(P=-L,r.z_m(2),N=-r.v7v(F,l)),R==1&&(P=L,r.z_m(2),N=r.J1m(w,l)),R==2&&(P=-H,r.M$m(2),N=-r.v7v(b,h)),R==3&&(P=H,r.z_m(2),N=r.J1m(C,h)),r.z_m(26),v=r.v7v(P,N),(d||d===0)&&P===0&&N<0)return!1;if(P<0){if(v>_)return!1;v>T&&(T=v)}else if(P>0){if(v<T)return!1;v<_&&(_=v)}}if(r.z_m(136),x=r.v7v(T,l,L),r.z_m(136),M=r.v7v(T,h,H),r.M$m(136),D=r.J1m(_,l,L),r.M$m(136),Q=r.J1m(_,h,H),!d&&d!==0&&!h&&h!==0){if(M=b,Q=C,x=k.x0,D=k.x0,k.x0>w||k.x0<F)return!1}else if(!d&&d!==0&&(k.y0<k.y1?Q=C:Q=b,x=k.x0,D=k.x0,k.x0>w||k.x0<F))return!1;m||(p.save(),p.beginPath()),p.lineWidth=1.1,f&&typeof f=="object"?(p.strokeStyle=f.color,f.opacity?p.globalAlpha=f.opacity:p.globalAlpha=1,p.lineWidth=t.stripPX(f.width)):!f||f=="auto"||t.isTransparent(f)?p.strokeStyle=this.defaultColor:p.strokeStyle=f,(n.opacity||n.opacity===0)&&(p.globalAlpha=n.opacity),n.lineWidth&&(p.lineWidth=n.lineWidth),n.globalCompositeOperation&&(p.globalCompositeOperation=n.globalCompositeOperation),q=t.borderPatternToArray(p.lineWidth,n.pattern),p.setLineDash(n.pattern?q:[]),p.moveTo(x,M),p.lineTo(D,Q),r.A92(),m||(p.stroke(),p.restore())}},t.ChartEngine.prototype.rendererAction=function(n,r){var i=ue,a,o,c,l,u;a="rende",i.A92(),a+="r";function h(f){var A,p;A="unde",A+="rlay",!o&&r===A&&(p=Symbol.for("CIQ.watermark"),f[p]&&(f[p].draw(n),o=!0))}if(a+="erA",a+="ction",o=!1,!this.runPrepend(a,arguments)){Object.values(n.seriesRenderers).sort((f,A)=>(i.W16(),(A.params.priority||0)-(f.params.priority||0))).forEach(f=>{var A,p,g,m,b;A="y",A+="Ax",A+="is",p="_m",p+="ain_",p+="se",p+="ries",g=f.params,m=g.panel,b=this.panels[m],!(g.overChart&&r=="underlay")&&(g.name=="_main_series"&&r=="underlay"||g.name!=p&&r=="main"||!g.overChart&&r=="overlay"||b&&b.chart===n&&(b.hidden||(r==A?f.adjustYAxis():(h(this),f.draw(),f.drawLabels&&f.drawLabels(),f.cb&&f.cb(f.colors)))))}),c=237164184,l=-619513369,u=2;for(var d=1;i.D8X(d.toString(),d.toString().length,76271)!==c;d++)this.runAppend("rendererAction",arguments),u+=2;i.D8X(u.toString(),u.toString().length,55967)!==l&&this.runAppend("",arguments)}h(this)},t.ChartEngine.prototype.drawSeries=function(n,r,i,a){var o,c,l,u,h,d,f,A,p,g,m,b,C,F,w,U,B,k,y;if(!this.runPrepend("drawSeries",arguments)){o=n.dataSegment,c=null,r||(r=n.series);for(var S in r)if(l="mount",l+="a",l+="i",l+="n",c=r[S],u=c.parameters,h=u.panel?this.panels[u.panel]:n.panel,d=u.color,f=u.field,!(!h||u.disabled)){if(A=u.yAxis=i||h.yAxis,d||(d=A.textStyle||this.defaultColor),d=="auto"&&(d=this.defaultColor),f||(f=n.defaultPlotField),p=u.subField||n.defaultPlotField||"Close",!u._rawExtendToEndOfDataSet&&u._rawExtendToEndOfDataSet!==!1&&(u._rawExtendToEndOfDataSet=u.extendToEndOfDataSet),n.animatingHorizontalScroll?u.extendToEndOfDataSet=!1:u.extendToEndOfDataSet=u._rawExtendToEndOfDataSet,g=u.colorFunction,(c.highlight||c.parameters.highlight)&&(u.highlight=!0),m={colors:[]},b=this.controls&&this.controls.baselineHandle,a){if(C="no",C+="ne",b&&!a.params.baseline&&(b.style.display=C),a.params.highlight&&(u.highlight=!0),u.hidden)continue;m=a.drawIndividualSeries(n,u)||m}else u.type==l?m=this.drawMountainChart(h,t.extend({returnObject:!0},u),g):m=this.drawLineChart(h,u.style,g,t.extend({returnObject:!0},u));c.yValueCache=m.cache,F=o[o.length-("1"-0)],F&&(w=!u.skipTransform&&this.getTransformFunction(A),!F[f]&&F[f]!==0&&(F=this.getPreviousBar(n,f,o.length-("1"^0))),U=this.getTransformedQuote(F,A),w&&U&&(F=U)),u.displayFloatingLabel!==!1&&this.mainSeriesRenderer!=a&&F&&!A.noDraw&&(B=F[f],B&&(B[p]||B[p]===0?B=B[p]:B=B.iqPrevClose),A.priceFormatter?k=A.priceFormatter(this,h,B):k=this.formatYAxisPrice(B,h,null,A),this.yAxisLabels.push({src:"series",args:[h,k,this.pixelFromTransformedValue(B,h,A),t.hexToRgba(t.colorToHex(d),parseFloat(u.opacity)),null,null,A]})),n.legendColorMap||(n.legendColorMap={}),y=u.display,y||(y=u.symbol),n.legendColorMap[u.name]={color:m.colors,display:y,isBase:a==this.mainSeriesRenderer}}this.runAppend("drawSeries",arguments)}}};function _d(E){if(typeof Symbol<"u"&&E[Symbol.iterator]!=null||E["@@iterator"]!=null)return Array.from(E)}ol=E=>{var e=ue;e.A92();var t,s,n;t="scro",t+="llT",t+="o",s="Ch",s+="artEngine",n=E.CIQ,n[s].prototype[t]=function(r,i,a){var o,c,l,u,h,d;o="scr",o+="ol",o+="l",c="tim",c+="e",c+="stamp",l="timeC",l+="on",l+="stan",l+="t",u="e",u+="nd",h=this.swipe,h[u]=!0,h.amplitude=h.target=(i-r.scroll)*this.layout.candleWidth,h[l]=100,h[c]=Date.now(),e.W16(),h[o]=r.scroll,h.chart=r,h.cb=a,d=this,this.ownerWindow.requestAnimationFrame(function(){var f,A,p;f=362558350,A=-229254715,p=2;for(var g=1;e.S1v(g.toString(),g.toString().length,"93009"-0)!==f;g++)d[""](),p+=2;e.S1v(p.toString(),p.toString().length,28737)!==A&&d[""](),d.autoscroll()})},n.ChartEngine.prototype.autoscroll=function(){var r,i,a,o;e.A92(),r=this,i=this.swipe,i.amplitude&&(i.elapsed=Date.now()-i.timestamp,a=-i.amplitude*Math.exp(-i.elapsed/i.timeConstant),o=(i.target+a)/this.layout.candleWidth,i.chart.scroll=i.scroll+Math.round(o),this.draw(),this.updateChartAccessories(),a>.5||a<-("0.5"*1)?this.ownerWindow.requestAnimationFrame(function(){e.A92(),r.autoscroll()}):(this.disableBackingStoreDuringTouch&&this.reconstituteBackingStore(),i.cb&&i.cb()))}};ll=E=>{var e,t,s,n,r;e="bounda",e+="ry",t=E.CIQ,s=e,n="line",r="border",t.ChartEngine.prototype.drawXAxis=function(i,a){var o=ue;o.A92();var c,l,u,h,d,f,A,p,g,m,b,C,F,w,U,B,k,y,S,T,_,L,H,P,N,v,x,M,D,Q,q,O,R,V,K,Y,G,J,Z,ee,X,ne,se,oe;c="mid",c+="dle",l="c",l+="en",l+="te",l+="r",u="stx",u+="_",u+="xaxi",u+="s",h="tic",h+="k",d="t";function ae(de){var ce,fe,me,ve,pe,be,Se,Ee,Ie,Qe,Ne,De;for(de.sort((_e,Ue)=>_e.level<Ue.level?-1:_e.level>Ue.level?1:_e.hz<Ue.hz?-1:(o.W16(),_e.hz>Ue.hz?1:0)),fe=Number.MAX_SAFE_INTEGER,me={},ve={},ce=0;ce<de.length&&(pe=de[ce],!(pe.level>fe));ce++){this.container.ownerDocument.body.classList.contains("sharing")&&(pe.left<=D.left||pe.unpaddedRight>=D.right)&&(pe.suppress=!0),be=Math.floor(pe.left),Se=Math.ceil(pe[k?"unpaddedRight":"right"]);for(var Re=be;Re<=Se;Re++){if(Ee=me[Re]||{},!Ee.suppress&&Ee.level<=pe.level){if(Ie=Ee.alwaysAsBoundary&&Ee.level<fe,Ie&&!pe.alwaysAsBoundary||Ee.grid===s&&Ee.level<pe.level||y){if(Qe="ri",Qe+="g",Qe+="ht",Ne=_&&Ee.grid===s&&pe.grid===n,Ee.left<be&&Ee[Ne?"hz":Qe]>=be||Ee.left>be&&Ee[Ne?"hz":"left"]<=Se){pe.suppress=!0;break}}else if(Ee.marketOpenOffset!==void 0&&Ee.marketOpenOffset+Ee.raw===0){pe.suppress=!0;break}else if(pe.level){fe=pe.level-("1"|0),delete ve[pe.level];break}}me[Re]=pe,Re===Se&&(ve[pe.level]||(ve[pe.level]=0),ve[pe.level]++)}}return De=Object.entries(ve).reverse(),De.length>1&&!y&&De[0]["0">>32]>=A&&De[1][0]<A&&De[0][1]===1&&(De[1][1]>1||De.length>2)&&De.shift(),o.A92(),De.length&&(fe=Number(De[0]["0"|0])),fe}if(d+="i",d+="c",d+="k",f=[i,a],!this.runPrepend("drawXAxis",f)&&a&&(A=t.ChartEngine.XAxis.lineBaseLevel,p=this.layout,g=p.interval,m=p.timeUnit,b=i.xAxis,C=b.displayGridLines,F=b.displayBorder,w=b.fitLeftToRight,U=b.minimumLabelWidth,B=b.noDraw,k=b.fitTight,y=w||g===d||m===h,!B)){S=this.getBackgroundCanvas().context,this.canvasFont("stx_xaxis",S),T=this.getCanvasFontSize(u),b.fontHeight=T,S.textAlign=l,S.textBaseline=c,_=!y&&this._height>3*T,L=!1,H=new Map,N=S.measureText("   ").width;for(var Ae=0;Ae<a.length;Ae++){P=a[Ae],v=H.get(P.text),v===void 0&&(v=S.measureText(P.text).width,H.set(P.text,v)),o.M$m(12),x=Math.max(o.J1m(v,N),U),P.hz=Math.floor(P.hz+this.micropixels)-.5,o.M$m(15);var he=o.v7v(3,5,0);P.left=P.hz-x/he,P.right=P.hz+x/2,o.M$m(50);var ge=o.v7v(1,14,7,2);P.unpaddedRight=P.hz+v/ge}if(M=this.xAxisAsFooter===!0?this.chart.canvasHeight:i.panel.bottom,o.z_m(2),D=this.whichPanel(o.J1m(M,1)),!!D){this.adjustYAxisHeightOffset(D,D.yAxis),Q=F||F===null,this.axisBorders===!0&&(Q=!0),this.axisBorders===!1&&(Q=!1),q=M-this.xaxisHeight+T,Q&&(q+=3),O=!0,R=ae.call(this,a),i.xAxis.maxLevelToDisplay=R,o.z_m(162),V=o.v7v(A,R);for(var ie in this.panels)if(K="s",K+="tx",K+="_",K+="grid_dark",Y=this.panels[ie],!(Y.hidden||Y.shareChartXAxis===!1)&&(o.M$m(99),G=o.v7v(D,Y),J=Y.yAxis,!!J)){S.save(),S.beginPath(),S.rect(Y.left,Y.top+(O?"0"-0:"1"^0),Y.width,Y.height-("1"-0)),S.clip(),O=!1,Z=new t.Plotter,Z.newSeries(n,"stroke",this.canvasStyle("stx_grid")),Z.newSeries(s,"stroke",this.canvasStyle(K)),Z.newSeries(r,"stroke",this.canvasStyle("stx_grid_border"));for(var re=0;re<a.length&&(P=a[re],!(P.level>R));re++)P.suppress||Math.floor(P.left)<=Y.right&&(ee=_&&P.grid===s&&(P.alwaysAsBoundary&&P.level<R||V),Math.floor(P.hz)>Y.left&&(C&&(Z.moveTo(P.grid,P.hz,J.top),Z.lineTo(P.grid,P.hz,J.bottom)),G&&Q&&(Z.moveTo(r,P.hz,J.bottom+.5),Z.lineTo(r,P.hz,J.bottom+6),ee&&Z.dashedLineTo(r,P.hz,J.bottom+6+T+3,[1,3]))),G&&P.right>Y.left&&(X="s",X+="tx_x",X+="axis_",X+="dark",this.canvasColor(P.grid==s&&V||P.alwaysAsBoundary&&P.level<R?X:"stx_xaxis",S),!V&&P.boundaryOnlyText&&(P.text=P.boundaryOnlyText),S.fillText(P.text,P.hz,q+(ee?T+3:0)),L&&(S.strokeStyle="red",S.strokeRect(P.left,q-T,P.unpaddedRight-P.left,T*2),S.strokeStyle="green",S.strokeRect(P.unpaddedRight,q-T,P.right-P.unpaddedRight,T*2))));Q&&(ne=Math.round(J.bottom)+.5,se=Math.round(Y.right)+.5,Z.moveTo(r,Y.left,ne),Z.lineTo(r,se,ne)),b.enableTitle&&(oe=i.panel.subholder,S.fillText(this.translateIf(b.title),oe.offsetWidth/2+oe.offsetLeft,M-T+3)),Z.draw(S),S.restore()}S.textAlign="left",this.runAppend("drawXAxis",f)}}},t.ChartEngine.prototype.createSpacedDateXAxis=function(i){var a=ue,o,c,l,u,h,d,f,A,p,g,m,b,C,F,w,U,B,k,y,S,T,_,L,H,P,N,v,x,M;o="mon",o+="th",c="00",c+=":0",c+="0",i||(i=this.chart),l=t.ChartEngine.XAxis.lineBaseLevel,u=i,h=u.dataSegment,d=u.lineApproximation,f=u.market,A=u.maxTicks,p=u.xaxis,g=u.xAxis,m=this.layout,b=m.candleWidth,C=m.interval,F=m.timeUnit,p.length=0;for(var D="0"^0;D<A;D++){if(U=h[D],U&&D&&!p.length){f&&(w=this.standardMarketIterator(U.DT,g.adjustTimeZone?this.displayZone:null));for(var Q=D;Q>("0"|0);Q--)B={},w&&!(d&&b<1)&&(B.DT=w.previous()),p.unshift(B);w=null}if(U||D&&p.length){if(k=U&&U.DT,U&&U.displayDate&&g.adjustTimeZone&&(k=U.displayDate),!k)if(f){if(C=="tick"&&!g.futureTicksInterval||d&&b<("1"|0)||!g.futureTicks)break;w||(w=this.standardMarketIterator(h[D-1].DT,g.adjustTimeZone?this.displayZone:null)),k=w.next()}else continue;y={DT:k,data:null},D<h.length&&(y.data=U),p.push(y)}}S=[],i.tzOffsetCache||(i.tzOffsetCache=new Map),i.tzOffsetCache.size>("20000"^0)&&i.tzOffsetCache.clear(),T=i,_=T.tzOffsetCache,L=f&&f.market_def||{},H=(L.normal_daily_open||c).split(":"),a.M$m(52);var q=a.J1m(44,6100,14,10);return P=Number(H[0])*q,L.hour_aligned||(P+=Number(H[1])),N=O=>{var R,V,K,Y,G,J,Z;R=O==="year"||C!==O&&F!==O?s:n,V=this.setPropertiesForInterval&&this.setPropertiesForInterval[O]||t.ChartEngine.XAxis.setPropertiesForInterval[O],a.A92(),K=i.left,p.forEach((ee,X)=>{var ne,se,oe,ae,Ae,he,ge,ie,re,de;if(ne=ee.data&&ee.data.candleWidth||b,se=ee.DT,se)switch(ae="t",ae+="i",ae+="ck",Ae="mill",Ae+="isec",Ae+="ond",he="da",he+="y",O){case"year":oe=se.getFullYear();break;case"month":oe=se.getMonth();break;case"week":case he:oe=se.getDate();break;case"minute":a.M$m(43);var ce=a.J1m(62,7,5);oe=se.getHours()*ce+se.getMinutes();break;case"second":oe=se.getSeconds();break;case Ae:case ae:oe=se.getMilliseconds();break}R===n&&(a.M$m(163),K+=a.J1m(ne,"2",0)),typeof oe<"u"&&(R===n||Y!==oe)&&(ge=new t.ChartEngine.XAxisLabel({hz:K,grid:R,raw:oe}),O==="minute"&&((!G||G.getDate()!==se.getDate())&&(G=se,ie=f&&f.market_tz,re=`${+se}|${ie}|${this.displayZone}`,J=_.get(re),J===void 0&&(de=ee.data&&ee.data.DT||new Date(t.convertTimeZone(se,this.displayZone)),a.M$m(164),J=a.v7v(de,se,"60000"),_.set(re,J))),a.M$m(2),ge.marketOpenOffset=a.J1m(J,P)),ge.priorDT=Z,V&&V(ge,ee,f,this),ge.grid==n&&ge.level<l&&(ge.level+=l),(X||R===n)&&S.push(ge),Y=oe),R===n?(a.z_m(26),K+=a.v7v(2,ne)):K+=ne,Z=se})},v=F||C,x=["year",o,"week","month","day","minute","second","millisecond","tick"],M=x.indexOf(v),M>0&&(v!=="tick"&&N(x[M-1]),N(x[M])),S}};cl=E=>{var e=ue,t,s,n,r;t=-324546566,s=1229044158,n=2;for(var i=1;e.D8X(i.toString(),i.toString().length,15293)!==t;i++)r=E.CIQ,n+=2;e.D8X(n.toString(),n.toString().length,8903)!==s&&(r=E.CIQ),r.ChartEngine.prototype.createYAxis=function(a,o){var c,l,u,h,d,f,A,p,g,m,b,C,F,w,U,B,k,y,S,T,_,L,H,P,N,v,x,M,D,Q,q,O,R,V,K,Y,G,J,Z,ee,X,ne,se,oe,ae,Ae,he,ge,ie,re,de,ce,fe,me,ve,pe,be,Se,Ee,Ie,Qe,Ne,De,Re,_e,Ue,He,Pe,We,Ge,je,Je,Oe,nt,Ze,Le,et,Ye,Ve,ct,ot,dt,xt,Ke,At,st;if(c="ru",c+="nAp",c+="pen",c+="d",e.W16(),l="d",l+="ecimalP",l+="laces",u="mult",u+="ipl",u+="ier",h="mul",h+="tipli",h+="e",h+="r",d="pri",d+="ceTic",d+="k",f="n",f+="o",f+="Chan",f+="ge",A="gold",A+="en",A+="Ratio",A+="YAxis",p="autoC",p+="om",p+="putedTickSizePixels",g="cac",g+="heLow",m="C",m+="hart",m+="Engine",b="y",b+="A",b+="xi",b+="s",C="yA",C+="xis",F="noC",F+="han",F+="ge",w="n",w+="a",w+="m",w+="e",U="ru",U+="n",U+="Prepend",!this[U]("createYAxis",arguments)){if(B=a.chart,k=a.name==B[w],o||(o={}),o[F]=!1,y=o[C]?o[b]:a.yAxis,r[m].enableCaching&&y.high==a.cacheHigh&&y.low==a[g]){S="ma",S+="xTic",S+="ks",T="sc",T+="r",T+="oll",_=B.dataSet.length-B[T]-1,e.z_m(165);var it=e.J1m(6,11,16);L=_+B[S]+it,a.cacheLeft=_,a.cacheRight=L,o.noChange=!0}else H="cac",H+="heRi",H+="ght",P="cacheL",P+="eft",a[P]=1e6,a[H]=-1,a.cacheHigh=y.high,a.cacheLow=y.low;if(N=B.xAxis.idealTickSizePixels||B.xAxis[p],y[A]&&y.idealTickSizePixels!=N/1.618&&(o.noChange=!1),!o[f]){if(x="noEve",x+="nDivisorTicks",M="rang",M+="e",D="p",D+="ric",D+="eT",D+="ick",Q="r",Q+="a",Q+="nge",q="ra",q+="n",q+="g",q+="e",O="n",O+="a",O+="me",R="a",R+="ctiv",R+="eDr",R+="awing",V="se",V+="mi",V+="Log",K="s",K+="ha",K+="do",K+="w",Y="m",Y+="a",Y+="x",G="m",G+="i",G+="n",J="se",J+="m",J+="iL",J+="og",Z="t",Z+="o",Z+="p",ee="adjustY",ee+="A",ee+="xisHeightOffset",this[ee](a,y),X=y.height=y.bottom-y[Z],ne=(y.high-y.low)/(X-y.zoom),!y[J])if(se="gro",se+="u",se+="nd",oe="cl",oe+="am",oe+="p",ae="p",ae+="add",ae+="in",ae+="g",Ae="c",Ae+="l",Ae+="am",Ae+="p",y[Ae]&&(y.clamp[ae]||y[oe].padding===0)){he="pa",he+="dd",he+="i",he+="ng",ge="l",ge+="o",ge+="w",ie="hi",ie+="gh",re="h",re+="i",re+="g",re+="h",de="getC",de+="anvasFon",de+="t",de+="Size",ce=this[de]("stx_yaxis"),e.z_m(7);var rt=e.v7v(17,2,5,22);y[re]=y[ie]+(y.clamp.padding+ce/rt)*ne,e.z_m(4);var $e=e.J1m(0,1,11,11);y.low=y[ge]-(y.clamp[he]+ce/$e)*ne}else if(o[se])fe="hi",fe+="g",fe+="h",me="h",me+="ig",me+="h",y[me]=y[fe]+y.zoom*ne;else{ve="s",ve+="crol",ve+="l",pe="zo",pe+="o",pe+="m",be="h",be+="ig",be+="h",e.z_m(14);var yt=e.J1m(17,6,18,2);y.high=y[be]+(y[pe]/yt+y.scroll)*ne,e.z_m(43);var qe=e.J1m(22,20,0);y.low=y.low-(y.zoom/qe-y[ve])*ne}(y.min||y[G]===0)&&(y.low=y.min),(y.max||y.max===0)&&(y.high=y[Y]),y[K]=y.high-y.low,y[V]&&(!this.activeDrawing||this[R][O]!="projection")&&(Se="se",Se+="mi",Se+="Lo",Se+="g",Ee="l",Ee+="o",Ee+="w",Ie="h",Ie+="i",Ie+="g",Ie+="h",Qe="sha",Qe+="d",Qe+="ow",Ne=function(){var wt,vt,Dt;wt="lo",wt+="g",wt+="Hi",wt+="gh",vt="LN",e.W16(),vt+="10",y.logHigh=Math.log(y.high)/Math[vt],Dt=Math.max(y.low,1e-9),y.logLow=Math.log(Dt)/Math.LN10,y.low<=0&&(y.logLow=0),y.logShadow=y[wt]-y.logLow},y.semiLog&&Ne(),De=y.height/(y.height-y.zoom),y.flipped?(Re="t",Re+="o",Re+="p",_e="transf",_e+="orm",_e+="e",_e+="dPriceFromPixel",Ue="l",Ue+="o",Ue+="w",y.high=this.transformedPriceFromPixel(y.bottom+De*(y.zoom/2+y.scroll),a,y),y[Ue]=this[_e](y[Re]-De*(y.zoom/2-y.scroll),a,y)):(He="bo",He+="t",He+="t",He+="om",Pe="tra",Pe+="nsformedPrice",Pe+="Fro",Pe+="mPixel",y.high=this.transformedPriceFromPixel(y.top-De*(y.zoom/2+y.scroll),a,y),y.low=this[Pe](y[He]+De*(y.zoom/2-y.scroll),a,y)),y[Qe]=y[Ie]-y[Ee],y[Se]&&Ne()),y.goldenRatioYAxis&&k&&y==a.yAxis?(Ge="idealTic",Ge+="kSiz",Ge+="ePixe",Ge+="ls",e.z_m(26),y[Ge]=e.J1m(1.618,N),y.idealTickSizePixels===("0"^0)&&(je="stx",je+="_yaxis",Je="getCanvasFontSi",Je+="ze",We=this[Je](je),e.M$m(25),y.idealTickSizePixels=e.J1m(We,5))):y.idealTickSizePixels||(We=this.getCanvasFontSize("stx_yaxis"),k?(Oe="idealTickS",Oe+="ize",Oe+="Pixels",e.M$m(25),y[Oe]=e.v7v(We,5)):(nt="idea",nt+="lTickSize",nt+="Pi",nt+="xels",e.z_m(25),y[nt]=e.v7v(We,2))),Ze=Math.round(X/y.idealTickSizePixels),v=o[q]?o.range[1]-o[Q][0]:y.shadow,e.z_m(26),y[D]=Math.floor(e.v7v(Ze,v)),Le=1;for(var ft=0;ft<10&&!(y.priceTick>0);ft++)Le*=10,y.priceTick=Math.floor(v/Ze*Le)/Le;if(ft=="10"<<64&&(y.priceTick=1e-8),y.priceTick=Math.round(v/Ze*Le)/Le,et=Math.round(v/y.priceTick),o[M]&&et<v&&!y[x]){for(;et>=1&&v%et!==0;)et--;e.z_m(26),y.priceTick=e.v7v(et,v)}if(y.minimumPriceTick){Ye="p",Ye+="r",Ye+="i",Ye+="ceTick",Ve="getCanva",Ve+="sFontSi",Ve+="ze",ct=y.minimumPriceTick,We=this[Ve]("stx_yaxis");for(var ze=0;ze<100&&(e.z_m(26),ot=e.J1m(ct,v),X/ot<We*("2"^0));ze++)ct+=y.minimumPriceTick;ze<100&&(y[Ye]=ct)}}if((y[d]<=0||y.priceTick===1/0)&&(y.priceTick=1),y[h]=y.height/y.shadow,y[u]==1/0&&(y.multiplier=0),!y[l]&&y.decimalPlaces!==0)if(k){dt="shado",dt+="wB",dt+="reaks",xt=0;for(var pt=0;pt<a.yAxis[dt].length;pt++)Ke="s",Ke+="had",Ke+="o",Ke+="w",At=a.yAxis.shadowBreaks[pt],a.yAxis[Ke]<At[0]&&(xt=At[1]);y.printDecimalPlaces=xt}else y.printDecimalPlaces=null;else st="decimalPl",st+="ac",st+="e",st+="s",y.printDecimalPlaces=y[st];this[c]("createYAxis",arguments)}},r.ChartEngine.prototype.drawYAxis=function(a,o){var c,l,u,h,d,f,A,p,g,m,b,C,F,w,U,B,k,y,S,T,_,L,H,P,N,v,x,M,D,Q,q,O,R,V,K,Y,G,J,Z,ee,X,ne,se,oe,ae,Ae,he;if(o||(o={}),c=o.yAxis?o.yAxis:a.yAxis,!(a.hidden||c.noDraw||!c.width)){if((!r.Comparison||c.priceFormatter!=r.Comparison.priceFormat)&&(l=c.fractional,l?(c.originalPriceFormatter||(c.originalPriceFormatter={func:c.priceFormatter}),l.resolution||(l.resolution=c.minimumPrice),l.formatter||(l.formatter="'"),c.priceFormatter||(c.priceFormatter=function(be,Se,Ee){var Ie,Qe,Ne,De;if(l){Ie="",Ee<0&&(Ie="-",Ee=Math.abs(Ee)),Qe=Math.floor(Math.round(Ee/l.resolution)*l.resolution),Ne=Math.round((Ee-Qe)/l.resolution),De=Math.floor(Ne),e.M$m(12);var Re=e.J1m(0,10);e.M$m(106),e.v7v(3,2,13984,14,3811),e.M$m(15);var _e=e.J1m(7,20,7317);e.M$m(12),e.v7v(7151,19),e.M$m(10);var Ue=e.v7v(4718,15,13,8,788);e.z_m(166);var He=e.J1m(17170,16153,5,12);return e.M$m(52),e.J1m(2625,695620,19,14),e.z_m(140),e.J1m(789,3413,16,3),e.z_m(5),e.v7v(20,13,70,1382),Ie+Qe+l.formatter+(De<Re?"9790"-0==_e?Ue>=He?"0x10e4"<<0:!0:"0":"")+De+(Ne-De>=.5?"+":"")}})):c.originalPriceFormatter&&(c.priceFormatter=c.originalPriceFormatter.func,c.originalPriceFormatter=null)),u=this.colorOrStyle(c.textStyle||"stx_yaxis"),h=this.highlightedDraggable,e.z_m(25),d=e.v7v("0",1),h&&this.yaxisMatches(h,c))e.z_m(2),d=e.v7v("0.15",0);else if(c.highlight)d=.1,c.showMenuToggle&&c.showMenuToggle();else if(!Object.values(this.panels).some(be=>be.yaxisLHS.concat(be.yaxisRHS).some(Se=>Se.highlight))&&c.showMenuToggle){f=1343456957,A=-925458704,p=2;for(var ge=1;e.D8X(ge.toString(),ge.toString().length,"58146"|32)!==f;ge++)c.showMenuToggle(!0),p+=2;e.D8X(p.toString(),p.toString().length,23487)!==A&&c.showMenuToggle(!0),c.showMenuToggle(!1)}if(d&&(g=u.constructor==String?u:u.color,c.setBackground(this,{color:g,opacity:d})),c.clamp&&(c.clamp.count||c.clamp.count===0))return this.drawYAxisFixed(a,o);if(c.pretty)return this.drawYAxisPretty(a,o);if(!this.runPrepend("drawYAxis",arguments)){if(!o.noDraw&&!c.noDraw){if(m=c.yAxisPlotter,!m||!o.noChange){if(b="stx_g",b+="rid_bo",b+="rde",b+="r",C="st",C+="rok",C+="e",F="bo",F+="r",F+="d",F+="er",w="t",w+="e",w+="x",w+="t",U="s",U+="tr",U+="oke",B="g",B+="ri",B+="d",m=c.yAxisPlotter=new r.Plotter,k=a.chart,y=a.name==k.name&&c.name===a.yAxis.name,!c.priceTick)return;if(S=c.shadow,T=o.range,T){_=572170730,L=-1231887954,H=2;for(var ie=1;e.S1v(ie.toString(),ie.toString().length,20755)!==_;ie++){e.z_m(166);var re=e.J1m(32,43,18,5);e.z_m(12);var de=e.J1m(1,5);S=T[re]+T[de],H+=2}if(e.S1v(H.toString(),H.toString().length,"67619"<<64)!==L){e.M$m(12);var ce=e.J1m(0,1);S=T[ce]-T[0]}}if(P=S/c.priceTick,P=Math.round(P),c.semiLog&&(N=Math.log(this.valueFromPixel(c.flipped?c.top:c.bottom,a))/Math.LN10,v=(c.logHigh-c.logLow)/P),m.newSeries(B,U,this.canvasStyle("stx_grid")),m.newSeries(w,"fill",u),m.newSeries(F,C,this.canvasStyle(b)),x=0,M=T?T[1]:c.high,D=T?T[0]:c.low,Q=c.displayBorder===null?k.panel.yAxis.displayBorder:c.displayBorder,this.axisBorders===!1&&(Q=!1),this.axisBorders===!0&&(Q=!0),O=k.dynamicYAxis,R=O?c.width:NaN,V=this.getYAxisCurrentPosition(c,a),V=="left"?q=c.left+c.width:q=c.left,K=Math.round(q)+.5,Y=Q?3:0,V=="left"&&(Y=Q?-3:0),y)if(c.shadow<1){e.M$m(12);var fe=e.v7v(5,5);e.M$m(43);var me=e.v7v(30,10,12);x=(parseInt(D/c.priceTick,fe)+("1">>me))*c.priceTick-D}else x=c.priceTick-Math.round(D%c.priceTick*a.chart.roundit)/a.chart.roundit;else x=M%c.priceTick;G=this.getCanvasFontSize("stx_yaxis");for(var ve=0;ve<P;ve++)c.semiLog?(e.z_m(136),Z=e.J1m(ve,N,v),J=Math.pow(10,Z)):y?J=D+ve*c.priceTick+x:J=M-ve*c.priceTick-x,ee=this.pixelFromTransformedValue(J,a,c),X=Math.floor(ee)+ +"0.5",!(X+G/2>a.bottom)&&(X-G/2<a.top||Math.abs(X-c.bottom)<1||(c.flipped&&(X=c.top+c.bottom-X),c.displayGridLines&&(ne="gr",ne+="i",ne+="d",m.moveTo(ne,a.left+1,X),m.lineTo("grid",a.right-1,X)),Q&&(e.z_m(2),m.moveTo("border",e.v7v(K,.5),X),e.M$m(12),m.lineTo("border",e.J1m(K,Y),X)),c.priceFormatter?J=c.priceFormatter(this,a,J):J=this.formatYAxisPrice(J,a,null,c),se=c.textBackground?this.containerColor:null,oe=3,e.z_m(40),ae=e.J1m(q,Y,oe),V=="left"?(ae=c.left+oe,c.justifyRight!==!1&&(ae=c.left+c.width+Y-oe)):c.justifyRight&&(ae=q+c.width),m.addText("text",J,ae,X,se,null,G),O&&(R=Math.max(R,k.context.measureText(J).width+Math.abs(Y)+oe))));if(Q){e.z_m(167);var pe=e.v7v(5,10,9,2,10);Ae=Math.round(c.bottom)+"0.5"*pe,m.moveTo("border",K,c.top),m.lineTo("border",K,Ae),m.draw(this.getBackgroundCanvas(k).context,"border")}if(O&&R>c.width)throw c._dynamicWidth=R,this.calculateYAxisPositions(),new Error("reboot draw");if(!O&&c._dynamicWidth)throw he="re",he+="boot dr",he+="a",he+="w",this.resetDynamicYAxis(),new Error(he)}this.plotYAxisGrid(a,c)}this.runAppend("drawYAxis",arguments)}}},r.ChartEngine.prototype.drawYAxisFixed=function(a,o={}){var c,l,u,h,d,f,A,p,g,m,b,C,F,w,U,B,k,y,S,T,_,L,H,P,N,v,x,M,D,Q,q,O,R;if(c="drawYAxi",c+="s",!this.runPrepend(c,arguments)&&(o||(o={}),l=o,u=l.yAxis,!u&&a.yAxis&&(u=a.yAxis),!(a.hidden||u.noDraw||!u.width))){if(!o.noDraw){if(h=u,d=h.yAxisPlotter,f=h.high,A=h.low,p=h.clamp,!d||!o.noChange){if(g="str",g+="oke",d=u.yAxisPlotter=new r.Plotter,m=a.chart,isNaN(f)||isNaN(A))return;if(b=m.transformFunc&&u===m.panel.yAxis,p.minmax&&p.minmax.length===2&&(A=b?m.transformFunc(this,m,p.minmax[0]):p.minmax[0],f=b?m.transformFunc(this,m,p.minmax[1]):p.minmax[1]),C=[A,f],F=(f-A)/(p.count+("1">>0)),p.count)for(var V=0;V<p.count;V++)e.M$m(168),C.push(e.v7v(1,V,A,F));if(w=u.textStyle||"stx_yaxis",d.newSeries("grid",g,this.canvasStyle("stx_grid")),d.newSeries("text",!1,this.colorOrStyle(w)),d.newSeries("border","stroke",this.canvasStyle("stx_grid_border")),U=u.displayBorder===null?m.panel.yAxis.displayBorder:u.displayBorder,this.axisBorders===!1&&(U=!1),this.axisBorders===!0&&(U=!0),B=u.left,k=m.dynamicYAxis,y=k?u._width:NaN,S=this.getYAxisCurrentPosition(u,a),T=U?3:0,S=="left"&&(B=u.left+u.width,T=U?-3:0),_=Math.round(B)+.5,L=this.getCanvasFontSize("stx_yaxis"),u.height>u.zoom){m.context.save(),this.canvasFont("stx_yaxis",m.context);for(var K of C)N="t",N+="ex",N+="t",v="lef",v+="t",x=this.pixelFromTransformedValue(K,a,u),M=Math.floor(x)+.5,!(M+L/2>u.bottom)&&(M-L/2<u.top||Math.abs(M-u.bottom)<1||(u.displayGridLines&&(d.moveTo("grid",a.left+1,M),d.lineTo("grid",a.right-1,M)),U&&(D="b",D+="o",D+="rder",e.z_m(2),d.moveTo("border",e.J1m(_,.5),M),e.M$m(12),d.lineTo(D,e.v7v(_,T),M)),u.priceFormatter?K=u.priceFormatter(this,a,K):K=this.formatYAxisPrice(K,a,null,u),P=u.textBackground?this.containerColor:null,Q=q=3,e.z_m(40),H=e.v7v(B,T,Q),S==v?(H=u.left+("3"^0),u.justifyRight!==!1&&(H=u.left+u.width+T-Q)):u.justifyRight&&(H=B+u.width-q),d.addText(N,K,H,M,P,null,L),k&&(e.z_m(12),O=e.J1m(K," "),y=Math.max(y,m.context.measureText(O).width+Math.abs(T)+Q))));this.drawTitleText(a,u,d,H),m.context.restore()}if(U&&(R=Math.round(u.bottom)+.5,d.moveTo("border",_,u.top),d.lineTo("border",_,R),d.draw(this.getBackgroundCanvas(m).context,"border")),k&&y>(u._dynamicWidth||u._width))throw u._dynamicWidth=y,this.calculateYAxisPositions(),new Error("reboot draw");if(!k&&u._dynamicWidth)throw this.resetDynamicYAxis(),new Error("reboot draw")}this.plotYAxisGrid(a,u)}this.runAppend("drawYAxis",arguments)}},e.W16(),r.ChartEngine.prototype.drawYAxisPretty=function(a,o){var c,l,u,h,d,f,A,p,g,m,b,C,F,w,U,B,k,y,S,T,_,L,H,P,N,v,x,M,D,Q,q,O,R,V,K,Y,G,J,Z,ee,X,ne,se,oe,ae,Ae,he,ge,ie,re,de,ce,fe,me;if(c="drawYA",c+="x",c+="i",c+="s",!this.runPrepend("drawYAxis",arguments)&&(o||(o={}),l=o.yAxis||a.yAxis,!(a.hidden||l.noDraw||!l.width))){if(!o.noDraw){if(u=l.yAxisPlotter,!u||!o.noChange){if(h="stx_",h+="yax",h+="is",d="l",d+="e",d+="f",d+="t",f="s",f+="t",f+="r",f+="oke",A="t",A+="e",A+="x",A+="t",u=l.yAxisPlotter=new r.Plotter,p=a.chart,!l.priceTick||isNaN(l.high)||isNaN(l.low))return;if(g=l.shadow,o.range){e.M$m(169);var ve=e.v7v(15,9,54,6,14);g=o.range[ve]-o.range[0]}m=(l.height-(o.range?l.zoom:0))/l.idealTickSizePixels,m=Math.round(m),b=l.textStyle||"stx_yaxis",u.newSeries("grid","stroke",this.canvasStyle("stx_grid")),u.newSeries(A,"fill",this.colorOrStyle(b)),u.newSeries("border",f,this.canvasStyle("stx_grid_border")),C=o.range,F=C?C[1]:l.high,w=C?C[0]:l.low,U=l.displayBorder===null?p.panel.yAxis.displayBorder:l.displayBorder,this.axisBorders===!1&&(U=!1),this.axisBorders===!0&&(U=!0),k=p.dynamicYAxis,y=k?l._width:NaN,S=this.getYAxisCurrentPosition(l,a),S=="left"?B=l.left+l.width:B=l.left,T=Math.round(B)+ +"0.5",_=U?3:0,S==d&&(_=U?-3:"0"<<0),L=this.getCanvasFontSize(h),H=l.increments,P=H.length,e.M$m(2),N=e.v7v("0",0),v=1,x=0,M=0,D=0,Q=Number.MAX_VALUE;for(var pe=0;pe<("100"^0);pe++){e.M$m(43);var be=e.J1m(17,8,1);if(x=H[N]*Math.pow(be,D),e.M$m(26),v=Math.floor(e.v7v(x,g)),e.M$m(2),q=Math.abs(e.J1m(m,v)),q>Q)break;if(Q=q,v==m){M=x;break}else v>m?(N++,N>=P&&(N=0,D++)):(N--,N<0&&(e.z_m(125),N=e.v7v("1",P),D--));M=x}if(O=Math.ceil(w/M)*M,R=this.pixelFromTransformedValue(O,a,l),R=l.flipped?l.top+R:l.bottom-R,V=0,R>l.idealTickSizePixels&&l.semiLog&&l.prettySemiLog&&F-w>10){for(K=Math.ceil(w),Y=0;O-K>=1e4&&Y<=15;)O/=10,K/=10,Y++;for(O=Math.ceil(O),K=Math.ceil(K),K;K<O&&O%K!==0;++K);O*=Math.pow(10,Y),K*=Math.pow(10,Y),K<O&&(O=Number(O.toPrecision(4)),M=Number(M.toPrecision(4)),O===M&&(M=K,V=K),O=K)}if(l.height>l.zoom){G=0,J=Number.MAX_VALUE,p.context.save(),this.canvasFont("stx_yaxis",p.context),e.M$m(170);var Se=e.v7v(4,17,4,3,11);X=l.shadow/M+Se;for(var Ee=0;Ee<X&&(e.M$m(136),ne=e.v7v(G,O,M),!(ne>F));Ee++){if(M+=V,G++,se=this.pixelFromTransformedValue(ne,a,l),Math.abs(J-se)<L+1&&V>0){J=Number.MAX_VALUE,M=V,V*=2,e.z_m(25),Ee=G=e.v7v("0",1),X=l.shadow/M+1,u.reset();continue}J=se,oe=Math.floor(se)+.5,!(oe+L/2>l.bottom)&&(oe-L/2<l.top||Math.abs(oe-l.bottom)<1||(l.displayGridLines&&(ae="gr",ae+="id",Ae="g",Ae+="r",Ae+="i",Ae+="d",u.moveTo(Ae,a.left+1,oe),u.lineTo(ae,a.right-1,oe)),U&&(he="bo",he+="r",he+="d",he+="er",e.M$m(171),u.moveTo("border",e.J1m(T,1,"0.5"),oe),e.M$m(12),u.lineTo(he,e.v7v(T,_),oe)),l.priceFormatter?ne=l.priceFormatter(this,a,ne):ne=this.formatYAxisPrice(ne,a,null,l),ee=l.textBackground?this.containerColor:null,ge=ie=3,e.M$m(40),Z=e.v7v(B,_,ge),S=="left"?(Z=l.left+("3"<<0),l.justifyRight!==!1&&(Z=l.left+l.width+_-ge)):l.justifyRight&&(Z=B+l.width-ie),u.addText("text",ne,Z,oe,ee,null,L),k&&(e.z_m(12),re=e.J1m(ne," "),y=Math.max(y,p.context.measureText(re).width+Math.abs(_)+ge))))}this.drawTitleText(a,l,u,Z),p.context.restore(),Ee>=X&&(de="drawYAxisPretty: as",de+="sert",de+="ion error. zz reach",de+="ed ",e.M$m(12),console.log(e.v7v(de,X)))}if(U&&(ce="bo",ce+="rde",ce+="r",fe=Math.round(l.bottom)+.5,u.moveTo(ce,T,l.top),u.lineTo("border",T,fe),u.draw(this.getBackgroundCanvas(p).context,"border")),k&&y>(l._dynamicWidth||l._width))throw l._dynamicWidth=y,this.calculateYAxisPositions(),new Error("reboot draw");if(!k&&l._dynamicWidth)throw me="rebo",me+="o",me+="t dr",me+="aw",this.resetDynamicYAxis(),new Error(me)}this.plotYAxisGrid(a,l)}this.runAppend(c,arguments)}}};Lt={};Eo(Lt);Bo(Lt);Do(Lt);To(Lt);Mo(Lt);Fo(Lt);_o(Lt);Io(Lt);Uo(Lt);Qo(Lt);Lo(Lt);Po(Lt);Ho(Lt);No(Lt);qo(Lt);Oo(Lt);function Id(){return"v%052%7D3+)K%3CTt%3C-H?T(%1B)D#L'-%22D-%5D?,1%14a%00tx1A%20R/%25)K;L%3E'!D&_)5%22J8L%17%09%14z%1Cp%1C%0D%13l%01e%1F%0F%09w2A;:?@2E581A*W3&)u=%5E*-%3EQ6L*=?M2B5:8X.S)5)%5D?X(-?X;%5E%09%3C%3EL!V'?-Q*C7)%3EN2%5D5+-Q&%5E45/J%22A;%3C%25G#T';%3CI&E'+%20L*_.%01(X~%1Fkf%7CX&_9$9A*B'%0B%1C%60~%06j%7C%18n%1CL2:)C2V?%3C%00L,T4;)n*H'%25)Q=X9;%0FI&T4%3C1I*_=%3C$X%7C%08m%7Dy%11x%08n%7By%10%7B%05l%7Ct%14~%00k%7Bu%17v%01cp%7D%14w%07iq~%14~%03cq%7D%16v%09l~x%1D%7B%06oq%7B%15w%02kzu%17~%02l%7Dz%17z%01c%7Dx%11z%01ox%7C%11y%03jz%7D%1Cy%06jp%7C%11%7B%06o%7Cu%16x%06b%7Cx%12%7F%03o%7Fx%10%7B%09mp%7B%14%7C%06mqz%12y%01byy%13~%05h%7Bt%1Dx%03b%7C~%16z%04m%7Dt%14z%03n%7Dy%13z%06k%7Cy%17y%02lpz%16x%04m%7Fu%1D%7F%02o%7B~%1D%7B%06n%7Dy%10%7F%03m%7F%7B%17y%08my%7C%1C%7F%08hzu%14x%00oqy%1D%7B%00h%7B~%13y%06nxz%13%7D%09jy%7F%13%7B%08o~%7C%1Dx%01cx%7C%13x%01i%7B~%15~%04oy~%1Cz%01k%7Cy%10z%04jz%7F%10z%00hq%7D%15w%05by%7D%13%7C%05ip%7B%12%7C%08iqt%1C~%00jq%7F%13%7F%02i%7C~%15y%02b%7Cy%15%7B%06kq%7F%15v~c%7C%7B%16%7F%07oxx%12%7C%06l%7C%7B%16%7C%03b~x%14x%00iz%7C%16~%04j%7Fu%10%7C%03cz%7F%13%7B%02kyt%17%7C%09kqx%11w%08k~%7F%16%7D%09n%7B%7F%12%7C%07m%7Bt%16~%02cqu%13x%04cpz%1C~%00ny%7B%14~%05kz%7C%11%7C%01nx%7F%12x%00cz%7C%17y%01mqy%17%7D%02b%7B%7B%16%7B%07m%7C%7B%11%7D%03kz%7D%12%7D%00c%7Cz%14w%08n~x%15%7F%04izx%1Cx%08i%7Fz%1Cv%01m%7C%7B%12x%08l%7B%7C%15w%04kqx%11%7F%03ox%7D%1C%7B%09opu%12~%03bqt%14z%09cq%7F%1C%7C%07ozt%13z%06iz~%10%7C%08c%7D%7D%1Cw%03lpy%17x%04kyz%10v%00mq%7D%12v%07o%7D%7D%1Cx%06k%7C%7C%13v%04h~%7C%16x%08ly%7F%11w%02jqx%14%7C%02i%7C~%10y%04jqu%17%7D%04bz~%14x%01hz%7F%14z%03b%7C~%14%7C%00m~%7C%13y%02lz~%12y%00kq1U#D=!%22V2~':)A:R?5bX*_.:%25@%3CL%0E%1C%00X$T#.%25I*g?:?L%20_'.%3ED%22T%16'/N&_=5%22U%22t4).I*U',#H.X4;1Q*B.5*J=t;+$X'%5E)%3C%22D%22T'89V'L48!n*H'*%25K+L6-%22B;Y')%22F*B.'%3Ej=X=!%22V2C?,9F*L)'!@2A;+'D(T%13&*J2W3$)V6B.-!X)X6-?%5C%3CE?%251M%20B.&-H*L9%20-W%0C%5E%3E-%0DQ2n=-8X%3C%5D3+)X%03X9-%22V*%1F.)!U*C%09--I2%5D?&+Q'L6'+X%7C%08m%7Dy%11x%08n%7By%10%7B%05l%7Ct%14~%00k%7Bu%17v%01cp%7D%14w%07iq~%14~%03cq%7D%16v%09l~x%1D%7B%06oq%7B%15w%02kzu%17~%02l%7Dz%17z%01c%7Dx%11z%01ox%7C%11y%03jz%7D%1Cy%06jp%7C%11%7B%06o%7Cu%16x%06b%7Cx%12%7F%03o%7Fx%10%7B%09mp%7B%14%7C%06mqz%12y%01byy%13~%05h%7Bt%1Dx%03b%7C~%16z%04m%7Dt%14z%03n%7Dy%13z%06k%7Cy%17y%02lpz%16x%04m%7Fu%1D%7F%02o%7B~%1D%7B%06n%7Dy%10%7F%03m%7F%7B%17y%08my%7C%1C%7F%08hzu%14x%00oqy%1D%7B%00h%7B~%13y%06nxz%13%7D%09jy%7F%13%7B%08o~%7C%1Dx%01cx%7C%13x%01i%7B~%15~%04oy~%1Cz%01k%7Cy%10z%04jz%7F%10z%00hq%7D%15w%05by%7D%13%7C%05ip%7B%12%7C%08iqt%1C~%00jq%7F%13%7F%02i%7C~%15y%02b%7Cy%15%7B%06kq%7F%15v~c%7C%7B%16%7F%07oxx%12%7C%06l%7C%7B%16%7C%03b~x%14x%00iz%7C%16~%04j%7Fu%10%7C%03cz%7F%13%7B%02kyt%17%7C%09kqx%11w%08k~%7F%16%7D%09n%7B%7F%12%7C%07m%7Bt%16~%02cqu%13x%04cpz%1C~%00ny%7B%14~%05kz%7C%11%7C%01nx%7F%12x%00cz%7C%17y%01mqy%17%7D%02b%7B%7B%16%7B%07m%7C%7B%11%7D%03kz%7D%12%7D%00c%7Cz%14w%08n~x%15%7F%04izx%1Cx%08i%7Fz%1Cv%01m%7C%7B%12x%08l%7B%7C%15w%04kqx%11%7F%03ox%7D%1C%7B%09opu%12~%03bqt%14z%09cq%7F%1C%7C%07ozt%13z%06iz~%10%7C%08c%7D%7D%1Cw%03lpy%17x%04kyz%10v%00mq%7D%12v%07o%7D%7D%1Cx%06k%7C%7C%13v%04h~%7C%16x%08ly%7F%11w%02jqx%14%7C%02i%7C~%10y%04jqu%17%7D%04bz~%14x%01hz%7F%14z%03b%7C~%14%7C%00m~%7C%13y%02lz~%12y%00kq1W*W?:%3E@=L7)%3CX#%5E=%05)Q=X9;1V?%5D3%3C1K?%5C%1F&-G#T%3E"}Ro(Lt);zo(Lt);Vo(Lt);Ko(Lt);function La(E,e){return hl(E)||Qd(E,e)||dl(E,e)||ul()}Wo(Lt);Yo(Lt);function Ud(E){return hl(E)||_d(E)||dl(E)||ul()}Xo(Lt);jo(Lt);$o(Lt);Go(Lt);ue.A92();Jo(Lt);Zo(Lt);el(Lt);tl(Lt);il(Lt);rl(Lt);function hl(E){if(ue.W16(),Array.isArray(E))return E}al(Lt);nl(Lt);sl(Lt);ol(Lt);ll(Lt);cl(Lt);j=Lt.CIQ;Kn=Lt.SplinePlotter;xa=Lt.timezoneJS;Wn=Lt.$$;Yn=Lt.$$$;function dl(E,e){var t;if(ue.W16(),E)return typeof E=="string"?fo(E,e):(t={}.toString.call(E).slice(8,-1),t==="Object"&&E.constructor&&(t=E.constructor.name),t==="Map"||t==="Set"?Array.from(E):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?fo(E,e):void 0)}function Qd(E,e){var t,s,n,r,i,a,o,c,l;if(t="@",t+="@iter",t+="ator",s=E==null?null:typeof Symbol<"u"&&E[Symbol.iterator]||E[t],s!=null){o=[],c=!0,l=!1;try{if(i=(s=s.call(E)).next,e===0){if(Object(s)!==s)return;c=!1}else for(;!(c=(n=i.call(s)).done)&&(o.push(n.value),o.length!==e);c=!0);}catch(u){l=!0,r=u}finally{try{if(!c&&s.return!=null&&(a=s.return(),Object(a)!==a))return}finally{if(l)throw r}}return o}}ke[281018]=function(){for(var E=2;E!==9;)switch(E){case 5:var e;try{for(var t=2;t!==6;)switch(t){case 2:Object.defineProperty(Object.prototype,"kn7iK",{get:function(){return this},configurable:!0}),e=kn7iK,t=5;break;case 5:e.Q9Irb=e,t=4;break;case 9:delete e.Q9Irb;var s=Object.prototype;delete s.kn7iK,t=6;break;case 4:t=typeof Q9Irb>"u"?3:9;break;case 3:throw""}}catch{e=window}return e;case 1:return globalThis;case 2:E=typeof globalThis=="object"?1:5;break}}();ke.b3ZEk=qd;Ld(ke[281018]);ke[122217]=function(){for(var E=2;E!==5;)switch(E){case 2:var e={K1Dd35V:function(t){for(var s=2;s!==18;)switch(s){case 8:s=n<o.length?7:12;break;case 13:n++,r++,s=8;break;case 9:var n=0,r=0;s=8;break;case 2:var i=function(A){for(var p=2;p!==11;)switch(p){case 3:p=g<A.length?9:7;break;case 13:p=b?12:6;break;case 4:var g=0;p=3;break;case 7:var m,b;p=6;break;case 8:g++,p=3;break;case 6:m=ke.X7(ke.D$(w,function(){for(var U=2;U!==1;)switch(U){case 2:return .5-F()}}),""),b=ke[m],p=13;break;case 12:return b;case 9:w[g]=C(A[g]+6),p=8;break;case 2:var C=ke.f$(),F=ke.Q5(),w=[];p=4;break}},a="",o=ke.A_()(i([92,101,63,84,45])()),c=ke.f$(),l=ke.W4().bind(o),u=ke.W4().bind(t);s=9;break;case 7:s=r===t.length?6:14;break;case 6:r=0,s=14;break;case 12:a=ke.i2(a,"`");var h=0,d=function(A){for(var p=2;p!==23;)switch(p){case 27:h+=1,p=26;break;case 24:return f(A);case 2:p=h===0&&A===11?1:3;break;case 8:ke.l4(ke.B0(),a,ke.Y$(ke.Y$(a,-3,3),0,2)),p=4;break;case 12:h+=1,p=11;break;case 25:e.K1Dd35V=f,p=24;break;case 14:ke.l4(ke.B0(),a,ke.Y$(ke.Y$(a,-4,4),0,3)),p=4;break;case 1:h+=1,p=5;break;case 20:h+=1,p=19;break;case 15:p=h===6&&A===40?27:25;break;case 26:ke.l4(ke.B0(),a,ke.Y$(ke.Y$(a,-2,2),0,1)),p=4;break;case 9:h+=1,p=8;break;case 10:p=h===4&&A===48?20:18;break;case 5:ke.l4(ke.B0(),a,ke.Y$(ke.Y$(a,-7,7),0,5)),p=4;break;case 13:p=h===3&&A===52?12:10;break;case 3:p=h===1&&A===40?9:7;break;case 16:ke.l4(ke.B0(),a,ke.Y$(ke.Y$(a,-7,7),0,5)),p=4;break;case 6:h+=1,p=14;break;case 19:ke.l4(ke.B0(),a,ke.Y$(ke.Y$(a,-9,9),0,7)),p=4;break;case 17:h+=1,p=16;break;case 4:return h;case 11:ke.l4(ke.B0(),a,ke.Y$(ke.Y$(a,-6,6),0,4)),p=4;break;case 7:p=h===2&&A===10?6:13;break;case 18:p=h===5&&A===24?17:15;break}},f=function(A){for(var p=2;p!==1;)switch(p){case 2:return a[A]}};return d;case 14:a+=c(l(n)^u(r)),s=13;break}}("TG1JUK")};return e}}();ke.U6=function(){return typeof ke[122217].K1Dd35V=="function"?ke[122217].K1Dd35V.apply(ke[122217],arguments):ke[122217].K1Dd35V};ke.Y2=function(){return typeof ke[122217].K1Dd35V=="function"?ke[122217].K1Dd35V.apply(ke[122217],arguments):ke[122217].K1Dd35V};var Lr=2;for(;Lr!==6;)switch(Lr){case 2:Lr=ke.U6(11)<52?1:5;break;case 4:ke.N9=65,Lr=3;break;case 7:ke.Z7=-2,Lr=6;break;case 9:ke.A$=47,Lr=8;break;case 1:ke.c1=14,Lr=5;break;case 8:Lr=ke.Y2(24)!==ke.U6(40)?7:6;break;case 5:Lr=ke.U6(40)<ke.U6(10)?4:3;break;case 3:Lr=ke.U6(52)==ke.Y2(48)?9:8;break}ke.D1M=function(){return typeof ke[514284].S_WRQLR=="function"?ke[514284].S_WRQLR.apply(ke[514284],arguments):ke[514284].S_WRQLR};ke[370733]=function(){for(var E=2;E!==9;)switch(E){case 2:var e=[arguments];return e[1]=void 0,e[7]={},e[7].l4NKZO4=function(){for(var t=2;t!==90;)switch(t){case 1:t=e[1]?5:4;break;case 2:var s=[arguments];t=1;break;case 12:s[5]=s[6],s[7]={},s[7].E0w=["D67"],s[7].r8u=function(){var n=function(){return"a|a".split("|")},r=!ke.i_k(/\x7c/,n+[]);return r},s[3]=s[7],t=18;break;case 61:s[36]="q5C",s[91]="r8u",s[94]="F3h",t=58;break;case 57:t=s[83]<s[8].length?56:69;break;case 71:s[42]++,t=76;break;case 68:t=68;break;case 4:s[8]=[],s[4]={},s[4].E0w=["d51"],s[4].r8u=function(){var n=!1,r=[];try{for(var i in console)ke.c99(r,i);n=r.length===0}catch{}var a=n;return a},t=7;break;case 24:s[54]=s[65],s[20]={},s[20].E0w=["D67"],s[20].r8u=function(){var n=function(){return[]+"a".concat("a")},r=!ke.i_k(/\x5b\x5d/,n+[])&&ke.i_k(/\x61\u0061/,n+[]);return r},s[50]=s[20],t=34;break;case 69:t=function(n){for(var r=2;r!==22;)switch(r){case 18:i[3]=!1,r=17;break;case 10:r=i[4][s[36]]===s[89]?20:19;break;case 25:i[3]=!0,r=24;break;case 2:var i=[arguments];r=1;break;case 1:r=i[0][0].length===0?5:4;break;case 17:i[9]=0,r=16;break;case 26:r=i[6]>=.5?25:24;break;case 20:i[7][i[4][s[94]]].h+=!0,r=19;break;case 23:return i[3];case 11:i[7][i[4][s[94]]].t+=!0,r=10;break;case 12:ke.c99(i[8],i[4][s[94]]),r=11;break;case 15:i[2]=i[8][i[9]],i[6]=i[7][i[2]].h/i[7][i[2]].t,r=26;break;case 16:r=i[9]<i[8].length?15:23;break;case 14:r=typeof i[7][i[4][s[94]]]>"u"?13:11;break;case 5:return;case 6:i[4]=i[0][0][i[9]],r=14;break;case 4:i[7]={},i[8]=[],i[9]=0,r=8;break;case 8:i[9]=0,r=7;break;case 24:i[9]++,r=16;break;case 13:i[7][i[4][s[94]]]=ke.l4(function(){for(var a=2;a!==9;)switch(a){case 2:var o=[arguments];o[4]={},a=5;break;case 5:return o[4].h=0,o[4].t=0,o[4]}},this,arguments),r=12;break;case 7:r=i[9]<i[0][0].length?6:18;break;case 19:i[9]++,r=7;break}}(s[75])?68:67;break;case 70:s[83]++,t=57;break;case 34:s[33]={},s[33].E0w=["D67"],s[33].r8u=function(){var n=function(){return"aaaa".padEnd(5,"a")},r=ke.i_k(/\141\u0061\x61\x61\x61/,n+[]);return r},s[45]=s[33],s[48]={},t=29;break;case 37:s[31].r8u=function(){var n=function(){return decodeURI("%25")},r=!ke.i_k(/\x32\x35/,n+[]);return r},s[22]=s[31],ke.c99(s[8],s[5]),ke.c99(s[8],s[67]),ke.c99(s[8],s[50]),ke.c99(s[8],s[51]),t=50;break;case 56:s[17]=s[8][s[83]];try{s[27]=s[17][s[91]]()?s[89]:s[29]}catch{s[27]=s[29]}t=77;break;case 77:s[42]=0,t=76;break;case 58:s[83]=0,t=57;break;case 65:s[75]=[],s[89]="Z83",s[29]="d8r",s[60]="E0w",t=61;break;case 7:s[1]=s[4],s[6]={},s[6].E0w=["D67"],s[6].r8u=function(){var n=function(){return btoa("=")},r=!ke.i_k(/\u0062\u0074\x6f\u0061/,n+[]);return r},t=12;break;case 40:s[51]=s[66],s[31]={},s[31].E0w=["D67"],t=37;break;case 18:s[9]={},t=17;break;case 15:s[2]=s[9],s[65]={},s[65].E0w=["d51"],s[65].r8u=function(){var n=typeof ke.o7B()=="function";return n},t=24;break;case 46:ke.c99(s[8],s[2]),ke.c99(s[8],s[22]),t=65;break;case 67:return e[1]=23,97;case 75:s[85]={},s[85][s[94]]=s[17][s[60]][s[42]],s[85][s[36]]=s[27],ke.c99(s[75],s[85]),t=71;break;case 5:return 23;case 17:s[9].E0w=["d51"],s[9].r8u=function(){var n=typeof ke.p9D()=="function";return n},t=15;break;case 29:s[48].E0w=["D67"],s[48].r8u=function(){var n=function(){return"X".toLowerCase()},r=ke.i_k(/\x78/,n+[]);return r},s[67]=s[48],s[66]={},s[66].E0w=["d51"],s[66].r8u=function(){var n=typeof ke.W5O()=="function";return n},t=40;break;case 50:ke.c99(s[8],s[54]),ke.c99(s[8],s[45]),ke.c99(s[8],s[1]),ke.c99(s[8],s[3]),t=46;break;case 76:t=s[42]<s[17][s[60]].length?75:70;break}},e[7]}}();ke.V7r=function(){return typeof ke[347685].A_xV$pL=="function"?ke[347685].A_xV$pL.apply(ke[347685],arguments):ke[347685].A_xV$pL};ke.Q6=function(){return typeof ke[456066].T6jQgCD=="function"?ke[456066].T6jQgCD.apply(ke[456066],arguments):ke[456066].T6jQgCD};ke[412871]=539;ke.x5=function(){return typeof ke[456066].T6jQgCD=="function"?ke[456066].T6jQgCD.apply(ke[456066],arguments):ke[456066].T6jQgCD};ke.f4W=function(){return typeof ke[514284].R5jwG24=="function"?ke[514284].R5jwG24.apply(ke[514284],arguments):ke[514284].R5jwG24};ke.h7R=function(){return typeof ke[514284].R5jwG24=="function"?ke[514284].R5jwG24.apply(ke[514284],arguments):ke[514284].R5jwG24};ke[32362]=!1;ke.R7z=function(){return typeof ke[347685].A_xV$pL=="function"?ke[347685].A_xV$pL.apply(ke[347685],arguments):ke[347685].A_xV$pL};function Ld(E){function e(u){for(var h=2;h!==5;)switch(h){case 2:var d=[arguments];return d[0][0]}}function t(u){for(var h=2;h!==5;)switch(h){case 2:var d=[arguments];return d[0][0].RegExp}}function s(u){for(var h=2;h!==5;)switch(h){case 2:var d=[arguments];return d[0][0].Math}}for(var n=2;n!==134;)switch(n){case 105:r(e,i[96],i[29],i[32],i[29]),n=135;break;case 108:r(t,"test",i[40],i[49],i[29]),n=107;break;case 91:r(c,"sort",i[40],i[34],i[29]),n=119;break;case 16:i[62]="",i[62]="i",i[15]="",i[15]="l",i[89]="c",i[46]="",i[46]="a",n=22;break;case 109:r(c,"splice",i[40],i[23],i[29]),n=108;break;case 3:i[2]="A",i[7]="",i[6]="Q",i[7]="2",n=6;break;case 88:i[23]+=i[1],i[77]=i[15],i[77]+=i[8],i[75]=i[24],n=84;break;case 93:i[34]+=i[1],n=92;break;case 29:i[81]="7",i[35]="9",i[43]="__residu",i[24]="B",n=42;break;case 114:r(e,"decodeURI",i[29],i[50],i[29]),n=113;break;case 116:r(e,"Math",i[29],i[28],i[29]),n=115;break;case 53:i[95]="",i[95]="O",i[54]="",i[54]="5",n=49;break;case 118:r(e,"String",i[29],i[14],i[29]),n=117;break;case 115:r(s,"random",i[29],i[27],i[29]),n=114;break;case 97:i[14]+=i[35],i[51]=i[5],i[51]+=i[81],i[34]=i[94],n=93;break;case 38:i[88]="",i[88]="tra",i[95]="",i[91]="__abs",n=53;break;case 111:r(c,"unshift",i[40],i[75],i[29]),n=110;break;case 92:var r=function(u,h,d,f,A){for(var p=2;p!==5;)switch(p){case 2:var g=[arguments];o(i[0][0],g[0][0],g[0][1],g[0][2],g[0][3],g[0][4]),p=5;break}};n=91;break;case 22:i[84]="",i[84]="o",i[72]="ze",i[94]="D",n=33;break;case 135:r(e,i[36],i[29],i[85],i[29]),n=134;break;case 119:r(c,"join",i[40],i[51],i[29]),n=118;break;case 117:r(l,"fromCharCode",i[29],i[31],i[29]),n=116;break;case 84:i[75]+=i[3],i[80]=i[62],i[80]+=i[7],i[41]=i[65],n=80;break;case 80:i[41]+=i[8],i[50]=i[2],i[50]+=i[59],i[27]=i[6],n=103;break;case 71:i[92]+=i[15],i[56]=i[89],i[56]+=i[35],i[56]+=i[35],n=67;break;case 110:r(a,"apply",i[40],i[77],i[29]),n=109;break;case 112:r(l,"split",i[40],i[80],i[29]),n=111;break;case 2:var i=[arguments];i[5]="",i[5]="X",i[2]="",n=3;break;case 6:i[3]="",i[9]="f",i[3]="0",i[8]="",i[8]="4",i[1]="",n=20;break;case 60:i[36]+=i[87],i[32]=i[57],i[32]+=i[35],i[32]+=i[94],n=56;break;case 49:i[65]="",i[65]="W",i[40]=4,i[40]=1,i[29]=0,n=65;break;case 65:i[85]=i[65],i[85]+=i[54],i[85]+=i[95],i[36]=i[91],i[36]+=i[88],n=60;break;case 113:r(l,"charCodeAt",i[40],i[41],i[29]),n=112;break;case 20:i[1]="",i[1]="$",i[4]="",i[4]="Y",n=16;break;case 56:i[96]=i[44],i[96]+=i[22],i[96]+=i[72],i[21]=i[84],n=75;break;case 67:i[49]=i[62],i[49]+=i[59],i[49]+=i[83],i[23]=i[4],n=88;break;case 75:i[21]+=i[81],i[21]+=i[24],i[92]=i[43],i[92]+=i[46],n=71;break;case 42:i[22]="ptimi",i[87]="",i[87]="ct",i[57]="p",n=38;break;case 107:r(c,"push",i[40],i[56],i[29]),n=106;break;case 106:r(e,i[92],i[29],i[21],i[29]),n=105;break;case 103:i[27]+=i[54],i[28]=i[24],i[28]+=i[1],i[31]=i[9],i[31]+=i[1],i[14]=i[2],n=97;break;case 33:i[59]="_",i[83]="k",i[44]="__o",i[35]="",n=29;break}function a(u){for(var h=2;h!==5;)switch(h){case 2:var d=[arguments];return d[0][0].Function}}function o(u,h,d,f,A,p){for(var g=2;g!==14;)switch(g){case 2:var m=[arguments];m[8]="",m[8]="eProperty",m[3]="",g=3;break;case 3:m[3]="efin",m[2]=!0,m[2]=!1,m[9]="d";try{for(var b=2;b!==11;)switch(b){case 6:m[7].set=function(F){for(var w=2;w!==5;)switch(w){case 2:var U=[arguments];m[1][m[0][2]]=U[0][0],w=5;break}},m[7].get=function(){for(var F=2;F!==10;)switch(F){case 2:var w=[arguments];w[7]="",w[7]="",w[7]="ndefine",F=3;break;case 12:return;case 6:F=m[0][5]===i[29]?14:13;break;case 14:return(...U)=>{var B=1;return B=null,U.length>i[29]?m[0][3]===i[29]?m[1][m[0][2]].apply(m[6],U):(U[i[29]]===B||U[i[29]]===void 0?m[6]:U[i[29]])[m[0][2]](...U.slice(i[40])):m[1][m[0][2]]};case 13:F=typeof m[1][m[0][2]]==w[5]?12:11;break;case 3:w[6]="u",w[5]=w[6],w[5]+=w[7],w[5]+=m[9],F=6;break;case 11:return m[1][m[0][2]]}},m[7].enumerable=m[2];try{for(var C=2;C!==3;)switch(C){case 2:m[5]=m[9],m[5]+=m[3],m[5]+=m[8],m[0][0].Object[m[5]](m[4],m[0][4],m[7]),C=3;break}}catch{}b=11;break;case 2:m[7]={},m[6]=(0,m[0][1])(m[0][0]),m[1]=[m[6],m[6].prototype][m[0][3]],b=4;break;case 9:return;case 7:m[1][m[0][4]]=m[1][m[0][2]],b=6;break;case 3:b=m[1].hasOwnProperty(m[0][4])&&m[1][m[0][4]]===m[1][m[0][2]]?9:8;break;case 4:m[4]=m[0][5]===i[29]?ke:m[1],b=3;break;case 8:b=m[0][5]!==i[29]?7:6;break}}catch{}g=14;break}}function c(u){for(var h=2;h!==5;)switch(h){case 2:var d=[arguments];return d[0][0].Array}}function l(u){for(var h=2;h!==5;)switch(h){case 2:var d=[arguments];return d[0][0].String}}}function ke(){}ke.E9E=function(){return typeof ke[514284].S_WRQLR=="function"?ke[514284].S_WRQLR.apply(ke[514284],arguments):ke[514284].S_WRQLR};ke.e4i=function(){return typeof ke[370733].l4NKZO4=="function"?ke[370733].l4NKZO4.apply(ke[370733],arguments):ke[370733].l4NKZO4};ke[514284]=function(E){return{S_WRQLR:function(){var e,t=arguments;switch(E){case 41:e=t[2]*(t[0]-+t[1]);break;case 60:e=(t[1]*t[0]+t[2])/t[3]-t[4];break;case 80:e=t[2]+t[4]+t[1]-t[0]-t[3];break;case 109:e=t[3]/t[1]/t[0]/t[2]+t[4];break;case 65:e=(t[3]-t[4])*t[2]*t[1]+t[0];break;case 18:e=(t[4]+t[3]+t[0])*t[2]-t[1];break;case 105:e=t[3]+t[2]-t[0]+t[1];break;case 93:e=t[0]%t[1];break;case 4:e=t[1]+t[0]/t[3]-t[2];break;case 133:e=t[0]*(t[1]+t[2]/t[3]);break;case 151:e=t[2]*t[1]*t[4]+(t[0]-t[6]*t[3])*t[5];break;case 85:e=-t[5]/t[0]*(t[2]*(t[1]-t[6])-t[4])+t[3];break;case 155:e=t[0]*((t[3]-t[1])/t[4]+t[2]);break;case 110:e=(t[2]+t[3])/t[0]-t[4]+t[1];break;case 36:e=(t[0]/t[4]+t[3])/t[1]+t[2];break;case 148:e=-t[3]*t[0]+t[2]+t[1];break;case 98:e=t[0]*t[1];break;case 167:e=+t[3]*(t[4]/t[1]-t[0])+t[2];break;case 157:e=(t[0]*t[2]-t[4])*t[3]+t[1];break;case 74:e=-t[2]*t[0]-t[3]+t[1];break;case 150:e=t[0]/(t[1]+ +t[2]);break;case 81:e=-t[3]/t[4]-t[0]-t[2]+t[1];break;case 7:e=(t[4]/t[0]-t[3])*t[1]+t[2];break;case 20:e=(-t[0]+t[1])/t[4]-t[3]+t[2];break;case 40:e=-t[3]/t[1]*t[0]+t[2];break;case 140:e=t[0]+(t[1]-t[2]);break;case 163:e=t[0]/(t[2]>>t[4])/(t[3]-t[1]);break;case 103:e=t[0]===t[1];break;case 121:e=t[3]/t[1]-t[2]+t[0];break;case 107:e=t[2]*t[0]/t[1]-t[4]+t[3];break;case 113:e=(-t[1]*t[0]+t[3])*t[4]+t[2];break;case 66:e=(-t[3]-t[4])*t[2]-t[1]+t[0];break;case 58:e=t[0]*t[1]-t[2];break;case 13:e=(t[4]+t[0]-t[1])*t[3]-t[2];break;case 29:e=t[1]-+t[0];break;case 34:e=t[2]-t[0]+(t[3]^t[1]);break;case 162:e=(t[2]+t[1]+t[3])/t[0]+t[4];break;case 143:e=t[0]-(t[1]-t[2])-t[3];break;case 119:e=-t[2]/t[3]*t[0]-t[1]+t[4];break;case 169:e=(t[0]-t[1]/t[3])*t[2];break;case 76:e=(t[2]-t[3])*t[1]-t[0];break;case 102:e=t[1]<t[0];break;case 129:e=t[1]*t[2]%t[0];break;case 70:e=t[3]/t[0]/t[1]+t[2];break;case 126:e=t[1]*t[2]+t[3]-t[0];break;case 3:e=t[3]-t[1]/t[2]+t[0];break;case 54:e=(t[3]+t[0])*t[4]*t[2]-t[1];break;case 6:e=t[1]-t[0]+t[2];break;case 159:e=-t[3]+t[2]-t[1]+t[0]-t[4];break;case 92:e=t[0]<=t[1];break;case 30:e=t[2]*t[1]+t[4]+t[0]-t[3];break;case 21:e=t[1]+t[2]-t[0];break;case 128:e=-t[1]/t[2]+t[3]+t[0]-t[4];break;case 89:e=t[0]>=t[1];break;case 146:e=(t[4]-t[2]-t[1])*t[0]+t[3];break;case 83:e=t[0]==t[1];break;case 165:e=(-t[4]/t[0]-t[1])*t[2]+t[3];break;case 136:e=t[3]+t[2]-t[1]+t[0]-t[4];break;case 137:e=(t[4]/t[0]+t[3])*t[2]+t[1];break;case 23:e=t[0]/(t[2]*t[1]);break;case 26:e=t[1]/(t[2]>>t[0]);break;case 69:e=t[4]/t[0]*t[2]*t[1]-t[3];break;case 135:e=t[2]*t[4]/t[3]*t[0]+t[1];break;case 52:e=t[1]-t[2]/t[0];break;case 115:e=-t[4]*t[2]+t[3]-t[1]+t[0];break;case 14:e=-t[2]/t[0]+t[1];break;case 39:e=-t[0]*t[1]+t[2]-t[3];break;case 170:e=(t[3]+t[0]/t[1])*t[2];break;case 132:e=t[3]-t[1]-t[2]+t[0];break;case 11:e=t[0]*t[2]*t[1];break;case 117:e=(t[4]-t[2])*t[3]-t[1]+t[0];break;case 59:e=(t[1]+t[0])*t[2]+t[4]-t[3];break;case 145:e=(t[1]-t[2])/t[3]/t[0]+t[4];break;case 142:e=t[1]-(t[0]^t[2]);break;case 130:e=t[1]/t[3]*t[0]/t[2]+t[4];break;case 44:e=(t[0]+t[3])*t[1]-t[4]-t[2];break;case 84:e=t[3]/t[2]*t[1]*t[4]+t[0];break;case 15:e=t[2]+t[0]+t[1];break;case 77:e=t[0]<<t[1];break;case 127:e=t[2]*t[3]/(t[1]+t[0]);break;case 104:e=(t[4]-t[1]-t[2])/t[3]+t[0];break;case 154:e=t[0]*t[2]+t[1];break;case 153:e=t[3]*t[0]*t[1]*t[2];break;case 55:e=t[1]+t[0]+t[3]+t[2];break;case 48:e=t[2]-t[0]*t[1];break;case 78:e=t[0]-t[1]+t[3]+t[2];break;case 96:e=t[1]<<+t[0];break;case 64:e=t[2]/t[0]-t[1];break;case 122:e=(t[1]/t[0]-t[2])/t[4]+t[3];break;case 10:e=t[0]/t[1];break;case 116:e=t[1]/t[2]+t[0];break;case 144:e=t[0]-t[4]+t[1]-t[2]+t[3];break;case 112:e=t[2]-(t[0]-t[1]);break;case 9:e=t[0]-t[1];break;case 43:e=(t[0]-t[2])/t[3]-t[1];break;case 100:e=t[2]|t[1]|t[0];break;case 17:e=t[0]-t[1]-t[2];break;case 88:e=t[3]*(t[4]*t[0]*t[2]+t[5])+t[1];break;case 134:e=-t[2]+t[0]-t[1];break;case 33:e=(-t[4]+t[3])*t[2]*t[1]-t[0];break;case 47:e=t[1]+ +t[2]-t[0];break;case 124:e=t[3]/t[2]*t[4]-t[0]-t[1];break;case 62:e=(t[3]-t[0])*t[2]+t[1];break;case 149:e=t[1]/t[0]/t[2]-t[3];break;case 86:e=t[2]/t[0]*t[3]*t[4]*t[5]+t[1];break;case 61:e=t[0]!==t[1];break;case 0:e=t[1]+t[0];break;case 53:e=t[2]+t[4]+(t[3]<<t[1])+t[0];break;case 31:e=-t[1]+t[0];break;case 91:e=t[1]!=t[0];break;case 138:e=(t[3]-t[4]+t[1])/t[2]+t[0];break;case 8:e=t[1]/t[3]+t[0]-t[2];break;case 49:e=t[0]^t[1];break;case 82:e=t[2]+(t[6]-t[1])/(t[5]-t[3])*(t[0]-t[4]);break;case 106:e=t[3]/t[2]/t[4]-t[0]+t[1];break;case 2:e=(t[3]+t[0])/t[1]-t[2];break;case 120:e=t[2]-t[1]-t[3]+t[4]+t[0];break;case 123:e=t[1]+ +t[0];break;case 25:e=t[2]-t[1]+t[0]-t[3];break;case 50:e=t[0]*t[2]+t[3]*t[1];break;case 63:e=t[0]/t[3]*t[1]+t[2]-t[4];break;case 75:e=-t[2]-t[0]+t[1];break;case 5:e=t[1]+(t[0]>>t[2]);break;case 12:e=(t[1]+t[2])/t[0];break;case 37:e=t[1]|t[0];break;case 139:e=-t[0]-t[2]+t[1]+t[3];break;case 108:e=t[3]/t[0]*t[2]+t[1];break;case 35:e=t[2]-t[1]*t[3]*t[4]/t[0];break;case 131:e=(t[2]-t[4])*t[1]+t[3]-t[0];break;case 94:e=t[1]>t[0];break;case 46:e=(t[2]|t[0])+t[1];break;case 95:e=+t[1]<<t[0];break;case 152:e=(t[0]+t[2])*t[1]/t[4]+t[3];break;case 158:e=t[1]%+t[0];break;case 114:e=+t[1]/t[0];break;case 22:e=-t[1]/t[4]/t[0]+t[2]-t[3];break;case 16:e=t[0]*t[2]/t[1];break;case 68:e=t[2]+t[3]-t[1]-t[0];break;case 87:e=t[3]/t[5]*(t[4]*t[2]*t[1]+t[0])+t[6];break;case 99:e=t[0]|t[3]|t[1]|t[2];break;case 57:e=t[3]*t[2]-t[1]-t[0]-t[4];break;case 118:e=t[1]+t[0]+t[2]-t[3];break;case 56:e=t[1]>>t[0];break;case 101:e=t[4]|t[2]|t[3]|t[1]|t[0];break;case 125:e=-t[0]*t[1]+t[2];break;case 160:e=t[0]*t[4]*t[1]+t[2]-t[3];break;case 90:e=t[0]+t[2]+t[3]+t[1]+t[4];break;case 97:e=t[2]<<t[0]-t[1];break;case 19:e=t[0]/+t[1];break;case 71:e=t[1]*t[2]/t[0]-t[3];break;case 24:e=t[3]/t[1]*t[4]/t[0]-t[2];break;case 32:e=t[0]/(t[2]<<t[1]);break;case 166:e=-t[3]+t[2]-t[0]+t[1];break;case 28:e=t[0]*t[2]/+t[1];break;case 42:e=(t[3]+t[0])/t[4]*t[1]-t[2];break;case 164:e=(t[1]-t[0])*(t[2]-t[7])+(t[4]-t[5])*(t[3]-t[6]);break;case 1:e=t[1]*t[0];break;case 168:e=t[2]+t[1]*t[0];break;case 72:e=(t[3]-t[4])*t[0]+t[1]+t[2];break;case 156:e=(t[3]+t[0])/t[2]+t[1];break;case 67:e=(t[1]-t[0])/(t[2]-t[3]);break;case 38:e=(t[1]-t[2])*t[0];break;case 51:e=t[1]+t[0]/t[2];break;case 73:e=t[3]*t[0]-t[1]-t[2];break;case 141:e=t[2]-(t[1]<<t[0]);break;case 79:e=-(t[1]-t[3])*t[2]+t[0];break;case 45:e=(t[3]-t[4])*t[1]/t[0]+t[2];break;case 161:e=(t[4]-t[3])/t[1]*t[0]-t[2];break;case 27:e=(t[2]+t[3])*t[0]-t[1];break;case 111:e=t[0]/t[2]*t[1]-t[3];break;case 147:e=t[3]*t[0]*t[2]-t[1];break}return e},R5jwG24:function(e){E=e}}}();ke[347685]=function(){var E=function(t,s){var n=s&65535,r=s-n;return(r*t|0)+(n*t|0)|0},e=function(t,s,n){for(var r=3432918353,i=461845907,a=n,o=s&-4,c=ke.W4().bind(t),l=0;l<o;l+=4){var u=c(l)&255|(c(l+1)&255)<<8|(c(l+2)&255)<<16|(c(l+3)&255)<<24;u=E(u,r),u=(u&131071)<<15|u>>>17,u=E(u,i),a^=u,a=(a&524287)<<13|a>>>19,a=a*5+3864292196|0}switch(u=0,s%4){case 3:u=(c(o+2)&255)<<16;case 2:u|=(c(o+1)&255)<<8;case 1:u|=c(o)&255,u=E(u,r),u=(u&131071)<<15|u>>>17,u=E(u,i),a^=u}return a^=s,a^=a>>>16,a=E(a,2246822507),a^=a>>>13,a=E(a,3266489909),a^=a>>>16,a};return{A_xV$pL:e}}();ke[281018].T9II=ke;ke[456066]=function(){for(var E=2;E!==1;)switch(E){case 2:return{T6jQgCD:function(){for(var e=2;e!==8;)switch(e){case 5:e=t===2?4:1;break;case 2:var t=2;e=1;break;case 1:e=t!==1?5:9;break;case 4:(function(){for(var s=2;s!==38;)switch(s){case 4:f+=c,f+=n,s=9;break;case 34:s=h===7?33:44;break;case 39:h=18,s=1;break;case 12:h=25,s=1;break;case 5:s=h===18?4:8;break;case 26:s=h===24?25:24;break;case 23:o[d]=function(){},s=22;break;case 1:s=h!==22?5:38;break;case 10:var n="0",r="B",i=281018,a="Q";s=17;break;case 7:f+=a,f+=l,f+=n;var o=ke[i];s=12;break;case 29:d+=a,s=28;break;case 35:h=o[f]?24:23,s=1;break;case 9:h=16,s=1;break;case 40:f+=u,s=39;break;case 17:var c="E",l="f",u="2";s=27;break;case 27:h=7,s=1;break;case 44:s=h===11?43:1;break;case 24:s=h===23?23:21;break;case 21:s=h===25?35:34;break;case 2:var h=2;s=1;break;case 28:h=11,s=1;break;case 8:s=h===16?7:11;break;case 11:s=h===2?10:26;break;case 33:var d=r;d+=u,d+=c,d+=n,s=29;break;case 25:return;case 22:h=22,s=1;break;case 43:d+=l,d+=n;var f=r;s=40;break}})(),e=3;break;case 3:t=1,e=1;break;case 9:e=9;break}}}}}();ke.U$Q=function(){return typeof ke[370733].l4NKZO4=="function"?ke[370733].l4NKZO4.apply(ke[370733],arguments):ke[370733].l4NKZO4};ke[648860]=ke[370733];var fl,pl,Al,gl,ml,yl,vl,xl,Xn,bl,Cl,wl,jn,Sl,kl,El,Bl,Dl,$n,Tl,Ml,Fl,_l,Il,Ul,Ql,Ll,Pl,Hl;function po(E,e){ke.e4i(),(e==null||e>E.length)&&(e=E.length);for(var t=0,s=Array(e);t<e;t++)s[t]=E[t];return s}fl=E=>{var e=ke,t,s,n;t=typeof _CIQ<"u"?_CIQ:E.CIQ,s=class{get(i,a){var o;e.U$Q(),o="no",o+=" storage defi",o+="ned",a(o)}set(i,a){}remove(i){}},t.ChartEngine.create=function({container:r,config:i,deferLoad:a}={}){var o,c,l,u,h,d,f,A,p,g,m,b;e.U$Q(),o=".ch",o+="artContain",o+="er",r||(r=document.querySelector(o)||document.body),i||(i={}),c=Object.assign({container:r},i.chartEngineParams),l=new this(c),u=i,h=u.addOns,d=u.chartId,f=u.marketFactory,A=u.multiChartId,p=u.onChartReady,g=u.onEngineReady,m=u.quoteFeeds,m&&l.attachQuoteFeed&&m.forEach(({quoteFeed:U,behavior:B,filter:k})=>{e.e4i(),l.attachQuoteFeed(U,B,k)}),f&&(l.setMarketFactory(f),t.Market&&(t.Market.definitionAPIs=i.marketDefinitionAPIs,t.Market.symbolMapping=i.marketDefinitionMapping,t.Market.Symbology&&t.Market.Symbology.isAPIBacked&&(t.Market.Symbology.isAPIBacked.defaultAPI=t.Market.symbolMapping[i.marketDefinitionDefaultMapping]))),h&&Object.entries(h).filter(([,U])=>(e.e4i(),!!U)).forEach(([U,B])=>{e.U$Q();var k,y,S;i.enabledAddOns[U]&&(k=B.moduleName||t.capitalize(U),t[k]?(y=new t[k](Object.assign({stx:l},B,{config:i})),S=y.cssRequired,S&&t.UI&&t.UI.activatePluginUI(l,k)):t.debug&&console.log(`${k} not available for addons with params:`,B))});function C(){p&&setTimeout(()=>(e.U$Q(),p(l)))}b=t.ensureDefaults(i.callbacks||{},{layout:this.getSaveLayout(i),symbolChange:this.getSaveLayout(i),drawing:this.getSaveDrawings(i),preferences:this.getSavePreferences(i),newChart:this.getRetoggleEvents(i)});for(var F in b)b[F]&&l.addEventListener(F,b[F]);function w(){l.loadChart(i.initialSymbol,{masterData:i.initialData},C),l.draw()}return n=i.nameValueStore||t.NameValueStore||s,n=new n,a||(g&&g(l),i.restore?(this.restorePreferences(l,d,A),this.restoreLayout(l,U=>{e.e4i(),!l.chart.symbol&&i.initialSymbol?w():C()},d,i)):w()),t.Studies&&i.studyOutputAliasList&&t.Studies.assignAliasesToStudies(i.studyOutputAliasList),l.chart.canvasTitleFunc=i.getCanvasTitle,l},t.ChartEngine.getSaveLayout=function(r){return function({stx:a}){var o;r.restore&&a.exportLayout&&(o=JSON.stringify(a.exportLayout(!0)),n.set("myChartLayout"+(r.chartId||""),o))}},t.ChartEngine.restoreLayout=function(r,i,a,o){var c;function l(){c(r,r.chart.symbol,a),i&&i()}c=this.restoreDrawings,e.e4i(),a||(a=""),e.f4W(0),n.get(e.E9E(a,"myChartLayout"),function(u,h){e.e4i();var d,f;if(!u){try{h=JSON.parse(h)}catch{}d=o&&o.restore&&o.restore.symbol===!1,h&&h.symbols&&d&&(f=o.initialSymbol!=null&&o.initialSymbol.symbol?o.initialSymbol:{symbol:o.initialSymbol},h.symbols[0]=h.symbols[0]||{},Object.assign(h.symbols[0],{symbol:f.symbol,symbolObject:f}),h.symbols=h.symbols.filter(({symbol:A},p)=>(e.e4i(),!p||A!==f.symbol))),r.importLayout&&r.importLayout(h,{managePeriodicity:!0,cb:l}),r.crossSection&&r.setCandleWidth(1)}})},t.ChartEngine.getSaveDrawings=function(r){return e.U$Q(),function({stx:a,symbol:o}){var c,l,u;r.restore&&a.exportDrawings&&(c=a.exportDrawings(),l=r.chartId?r.chartId+"~"+o:o,u=`${r.chartId||""}_drawings`,n.get(u,(h,d)=>{var f;f=d||{},c.length===0?(n.remove(l),delete f[l]):(n.set(l,JSON.stringify(c)),f[l]=c.length),n.set(u,f)}))}},e.e4i(),t.ChartEngine.restoreDrawings=function(r,i,a){var o;t.Drawing&&(o=a?a+"~"+i:i,n.get(o,function(c,l){if(!c){e.U$Q();try{l=JSON.parse(l)}catch{}l&&(r.chart.hideDrawings&&r.dispatch("notification","drawingsHidden"),r.importDrawings(l),r.draw())}}))},t.ChartEngine.getSavePreferences=function(r){return function({stx:a}){e.e4i();var o;r.restore&&a.exportPreferences&&(o=JSON.stringify(a.exportPreferences()),n.set("myChartPreferences"+(r.multiChartId||r.chartId||""),o))}},t.ChartEngine.restorePreferences=function(r,i,a){var o;o=a||i||"",e.U$Q(),e.h7R(0),n.get(e.D1M(o,"myChartPreferences"),function(c,l){if(!c){e.U$Q();try{l=JSON.parse(l)}catch{}l&&r.importPreferences&&r.importPreferences(l)}})},t.ChartEngine.getRetoggleEvents=function(r){return function({stx:a}){var o,c,l;o="UI.getMyC",o+="ontext",c=r.chartId&&document.getElementById(r.chartId),c||(c=(t.getFn(o)(a.container)||{}).topNode),c||(c=document),l=c.querySelectorAll(r.selector.markersMenuItem.split(",").map(u=>`${u}.ciq-active:not(.span-event)`).join(",")),l.forEach(function(u){e.e4i(),u.querySelector(".ciq-switch, .ciq-checkbox, .ciq-radio").dispatchEvent(new Event("stxtap"))})}}};function Nl(E){if(ke.e4i(),Array.isArray(E))return E}pl=E=>{var e=ke,t,s;t="un",t+="defined",s=typeof _CIQ!==t?_CIQ:E.CIQ,s.ChartEngine.prototype.drawHeatmap=function(n,r){var i,a,o,c,l,u,h,d,f,A,p,g,m,b;if(!r||!r.length||(i=n.panel,i||(i="chart"),a=this.panels[i],!a))return;o=n.yAxis?n.yAxis:a.yAxis,c=this.chart.dataSegment,n.name||(n.name="Data"),n.widthFactor||(n.widthFactor=1),n.height||(n.height=Math.pow(10,1-(a.decimalPlaces||a.chart.decimalPlaces))),l="stx-",l+="float-";function C(w,U,B,k,y,S,T,_){var L,H,P,N,v,x,M,D,Q,q,O,R,V,K;u.beginPath(),u.fillStyle=U,u.strokeStyle=U,u.textAlign="center",L=g.layout.candleWidth*y,e.e4i(),H=Math.floor(g.pixelFromBar(0,a.chart)-g.layout.candleWidth),typeof B=="number"&&(e.h7R(1),u.globalAlpha=e.E9E(d,B)),typeof B=="object"&&(v={minOpacity:B.min||0,maxOpacity:B.max||1});for(var Y="0"-0;Y<c.length;Y++){if(x=c[Y],x&&x.candleWidth){if(Y===0)H+=g.layout.candleWidth;else{e.f4W(2);var G=e.E9E(19,1,17,0);H+=(x.candleWidth+L/y)/G}L=x.candleWidth*y}else H+=g.layout.candleWidth;if(e.f4W(3),P=e.E9E(T,L,2,H),e.f4W(4),N=e.D1M(L,H,T,2),N-P<"2"<<32&&(e.h7R(5),N=e.D1M("1",P,64)),!!x&&(M=x[w],!!M)){M[_]&&(M=M[_]),typeof M=="number"&&(M=[M]);for(var J=0;J<M.length;J++){if(D=M[J],Q=0,D instanceof Array){if(v){e.h7R(6);var Z=e.E9E(7,8,1);e.f4W(7);var ee=e.D1M(4,7,99,19,20);e.f4W(8);var X=e.D1M(12,18,13,6);u.globalAlpha=d*(D[Z]*v.maxOpacity+(ee-D[X])*v.minOpacity)}Q=D[1],D=D[0]}q=g.pixelFromPrice(D,a,o),m||(S||(S=n.height),O=g.pixelFromPrice(D+S*(o.flipped?1:-1),a,o),u.lineWidth=1,e.h7R(9),A=e.E9E(O,q),e.f4W(10),p=e.D1M(A,2),m=u.lineWidth),k?(e.h7R(9),R=e.D1M(q,p),e.f4W(0),V=e.D1M(p,q),e.h7R(9),u.rect(P,R,e.E9E(N,P),e.D1M(V,R))):(e.h7R(9),u.fillRect(P,e.D1M(q,p),e.E9E(N,P),A),n.showSize&&Q&&h<=A-2&&(K=u.globalAlpha,u.fillStyle=g.defaultColor,e.h7R(11),u.globalAlpha=e.E9E("0.5",d,1),e.f4W(12),u.fillText(Q,e.D1M(2,N,P),q),u.fillStyle=U,e.h7R(1),u.globalAlpha=e.E9E(d,K))),v&&D instanceof Array&&(u.globalAlpha=0)}}}k&&u.stroke(),u.globalAlpha=d,u.closePath()}l+="dat",l+="e",u=this.chart.context,this.canvasFont(l,u),h=this.getCanvasFontSize(l),d=1,!n.highlight&&this.highlightedDraggable&&(d=.3),f=.5,this.layout.candleWidth*this.candleWidthPercent<="1"*1&&(f=0),A=null,p=null,g=this,m=null,this.startClip(i),u.globalAlpha=d;for(var F=0;F<r.length;F++)b=r[F],C(b.field,b.color,b.opacity,null,n.widthFactor,b.height,b.border_color?f:-f/4,b.subField),b.border_color&&this.layout.candleWidth>=2&&C(b.field,b.border_color,b.opacity,!0,n.widthFactor,b.height,f,b.subField);u.lineWidth=1,u.globalAlpha=1,this.endClip()},s.ChartEngine.prototype.drawCandles=function(n,r,i){var a,o,c,l,u,h,d,f,A,p,g,m,b,C,F,w,U,B,k,y,S,T,_,L,H,P,N,v,x,M,D,Q,q,O,R,V,K,Y,G,J,Z,ee,X,ne,se,oe,ae;a=n.chart,a||(a=n,n=n.chart),o=i.stretchGaps,!o&&o!==!1&&(o=this.cleanupGaps==="stretch"),c=!1,e.e4i(),l=!1,u=null,h=n.yAxis,i&&typeof i=="object"?(c=i.isOutline,l=i.isHistogram,u=i.field,h=i.yAxis):(c=i,l=arguments[3]),d=a.dataSegment,f=a.context,A=h.top,p=h.bottom,C=new Array(d.length),F="transparent",w="transparent",U=0,e.h7R(13);var Ae=e.D1M(19,16,20,7,0);B=a.dataSet.length-a.scroll-Ae,k={},y=this.layout.candleWidth,S=i.pixelWidth||y*+"0.65",e.f4W(10),T=e.D1M(S,2),e.h7R(14);var he=e.E9E(2,8,14);_=n.left-.5*y+this.micropixels-he,L=-1;for(var ge=0;ge<=d.length;ge++){H="out",H+="l",H+="i",H+="ne",P="clos",P+="e",e.h7R(0);var ie=e.D1M(1,0);e.h7R(9);var re=e.E9E(16,14);if(_+=this.layout.candleWidth*(ge-L-ie)/re,L=ge,N=T,e.f4W(10),_+=e.E9E(y,2),y=this.layout.candleWidth,e.h7R(10),_+=e.E9E(y,2),v=!1,x=d[ge],!!x&&((!x.cache||a.pixelCacheExpired)&&(x.cache={}),!x.projection&&(x.candleWidth&&(_+=(x.candleWidth-y)/("2">>0),y=x.candleWidth,(i.isVolume||y<S)&&(e.h7R(10),N=e.E9E(y,2))),M=this.getTransformFunction(h),D=this.getTransformedQuote(x,h),M&&D&&(u?(x=Object.assign({},x[u],D[u],{tick:x.tick},{cache:D.cache}),v=!0):(x=Object.assign({},x,D),delete x.transform,delete x.transform_axis)),Q=x.cache,x&&u&&!v&&(x=x[u]),!(!x&&x!==0)&&(q="open",O=P,u&&(e.f4W(15),q=e.D1M(".",q,u),e.f4W(15),O=e.D1M(".",O,u)),R=x.Close,V=x.Open===void 0?R:x.Open,l&&a.defaultPlotField&&(R=x[a.defaultPlotField]),!(!R&&R!==0))))){if(K=0,!i.isVolume&&o){for(;d[ge+("1"^0)]&&(e.h7R(0),Y=d[e.E9E(1,ge)][a.defaultPlotField||"Close"],!(Y||Y===0||d[ge+"1"*1].futureTick));)K++,ge++;e.f4W(16),_+=e.E9E(K,2,y),e.h7R(16),N+=e.D1M(K,2,y)}if(!(!l&&(V==R||V===null))&&(G=r(this,x,c?H:"solid"),!!G)){if(c?F=G:w=G,k[w]=1,J=F&&!s.isTransparent(F),J&&!i.highlight&&(U=.5),f.beginPath(),f.fillStyle=w,e.f4W(0),Z=e.E9E(L,B),Z<n.cacheLeft||Z>n.cacheRight||!Q[q]){if(ee=h.semiLog?h.height*(1-(Math.log(Math.max(V,0))/Math.LN10-h.logLow)/h.logShadow):(h.high-V)*h.multiplier,X=h.semiLog?h.height*(1-(Math.log(Math.max(R,0))/Math.LN10-h.logLow)/h.logShadow):(h.high-R)*h.multiplier,Math.abs(ee-X)<1&&(ee=X),h.flipped?(e.f4W(9),ee=e.E9E(p,ee),e.h7R(9),X=e.E9E(p,X)):(ee+=A,X+=A),C[L]=X,g=l?X:Math.min(ee,X),m=l?h.bottom:Math.max(ee,X),g=Math.floor(g),m=Math.floor(m),e.f4W(9),b=e.D1M(m,g),g<A){if(g+b<A){Q[q]=g,Q[O]=g;continue}e.h7R(17),b-=e.E9E(A,g,1),e.h7R(9),g=e.D1M(A,1)}g+b>p&&(e.f4W(6),b=e.D1M(g,p,1)),Q[q]=g,e.f4W(0),Q[O]=e.D1M(b,g)}Q[q]>=p||Q[O]<=A||(ne=Math.floor(_)+(!i.highlight&&.5),se=Math.floor(ne-N)+U,oe=Math.round(ne+N)-U,f.rect(se,Q[q]+U,Math.max(0,oe-se),Math.max(0,Q[O]-Q[q])),!i.highlight&&this.highlightedDraggable&&(f.globalAlpha*=.3),w!="transparent"&&f.fill(),J&&(f.lineWidth=1,i.highlight&&(f.lineWidth*=2),f.strokeStyle=F,f.stroke()))}}}a.pixelCacheExpired=!1,ae={colors:[],cache:C};for(var de in k)(!i.hollow||!s.equals(de,this.containerColor))&&ae.colors.push(de);return ae},e.U$Q(),s.ChartEngine.prototype.drawShadows=function(n,r,i){var a,o,c,l,u,h,d,f,A,p,g,m,b,C,F,w,U,B,k,y,S,T,_,L,H,P,N,v,x,M,D,Q,q,O,R,V,K;if(!i.isHistogram){a=n.chart,a||(a=n,n=n.chart),o=i.stretchGaps,!o&&o!==!1&&(o=this.cleanupGaps==="stretch"),c=a.dataSegment,l=this.chart.context,l.lineWidth=1,i.highlight&&(l.lineWidth*=2),!i.highlight&&this.highlightedDraggable&&(l.globalAlpha*=.3),u=i.field,h=i.yAxis||n.yAxis,d=h.top,f=h.bottom,A=a.dataSet.length-a.scroll-("1"^0),p=this.layout.candleWidth,e.h7R(9),e.e4i();var Y=e.E9E(13,12);g=n.left-.5*p+this.micropixels-Y,m=-1;for(var G=0;G<=c.length;G++){b="bo",b+="tto",b+="m",C="t",C+="o",C+="p",F="s",F+="h",F+="a",F+="dow",e.h7R(17);var J=e.E9E(608,15,561);e.h7R(18);var Z=e.E9E(7,82,6,7,0);if(g+=this.layout.candleWidth*(G-m-("1">>J))/Z,m=G,e.h7R(19),g+=e.E9E(p,"2"),p=this.layout.candleWidth,e.f4W(10),g+=e.D1M(p,2),w=c[G],!!w&&((!w.cache||a.pixelCacheExpired)&&(w.cache={}),!w.projection)){if(w.candleWidth){e.f4W(20);var ee=e.E9E(13,15,17,17,1);g+=(w.candleWidth-p)/ee,p=w.candleWidth}if(U=r(this,w,F),!!U&&(B=this.getTransformFunction(h),k=this.getTransformedQuote(w,h),B&&k&&(w=k),y=w.cache,w&&u&&(w=w[u]),!(!w&&w!==("0"^0))&&(S=C,T=b,u&&(e.h7R(15),S=e.D1M(".",S,u),e.h7R(15),T=e.E9E(".",T,u)),_=w.Close,L=w.Open===void 0?_:w.Open,H=w.High===void 0?Math.max(_,L):w.High,P=w.Low===void 0?Math.min(_,L):w.Low,!(!_&&_!==0)))){if(N=g,!i.isVolume&&o){for(v=0;c[G+1]&&(x=c[G+1].Close,!(x||x===("0"^0)||c[G+1].futureTick));)v++,G++;e.f4W(16),g+=e.E9E(v,2,p)}if(e.h7R(0),M=e.D1M(m,A),M<n.cacheLeft||M>n.cacheRight||!y[S]){if(D=h.semiLog?h.height*(1-(Math.log(Math.max(H,0))/Math.LN10-h.logLow)/h.logShadow):(h.high-H)*h.multiplier,Q=h.semiLog?h.height*(1-(Math.log(Math.max(P,0))/Math.LN10-h.logLow)/h.logShadow):(h.high-P)*h.multiplier,Math.abs(Q-D)<1&&(Q=D),D=Math.floor(D),Q=Math.floor(Q),e.f4W(9),q=e.D1M(Q,D),h.flipped?(e.f4W(9),D=e.E9E(f,D),e.h7R(9),Q=e.D1M(f,Q)):(D+=d,Q+=d),D<d){if(D+q<d){y[S]=D,y[T]=D;continue}e.h7R(17),q-=e.E9E(d,D,1),e.f4W(9),D=e.E9E(d,1)}D+q>f&&(e.h7R(6),q=e.E9E(D,f,1)),y[S]=D,y[T]=y[S]+q}y[S]>=f||y[T]<=d||(O=Math.floor(N)+(!i.highlight&&.5),l.beginPath(),_==L&&(R=this.offset,i.isVolume&&(e.h7R(10),R=e.E9E(p,2)),V=h.semiLog?h.height*(1-(Math.log(Math.max(_,0))/Math.LN10-h.logLow)/h.logShadow):(h.high-_)*h.multiplier,V=Math.floor(V)+(!i.highlight&&"0.5"-0),h.flipped?(e.h7R(9),V=e.E9E(f,V)):V+=d,V<=f&&V>=d&&(e.f4W(9),K=Math.floor(e.D1M(g,N)),e.f4W(21),l.moveTo(e.D1M(R,O,K),V),e.f4W(15),l.lineTo(e.D1M(K,R,O),V))),H!=P&&(l.moveTo(O,y[S]),l.lineTo(O,y[T])),l.strokeStyle=U,l.stroke())}}}a.pixelCacheExpired=!1}},s.ChartEngine.prototype.drawBarChart=function(n,r,i,a){var o,c,l,u,h,d,f,A,p,g,m,b,C,F,w,U,B,k,y,S,T,_,L,H,P,N,v,x,M,D,Q,q,O,R,V,K,Y,G,J,Z,ee,X,ne,se,oe,ae,Ae,he,ge,ie;o=n.chart,o||(o=n,n=n.chart),c=a.stretchGaps,!c&&c!==!1&&(c=this.cleanupGaps==="stretch"),l=o.dataSegment,u=new Array(l.length),h=o.context,d=this.canvasStyle(r),d.width&&parseInt(d.width,10)<=25?h.lineWidth=Math.max(1,s.stripPX(d.width)):h.lineWidth=1,a.highlight&&(h.lineWidth*=2),!a.highlight&&this.highlightedDraggable&&(h.globalAlpha*=.3),f=a.field,A=a.yAxis||n.yAxis,p=A.top,g=A.bottom,e.f4W(22);var re=e.E9E(17,17,19,17,1);b=o.dataSet.length-o.scroll-re,C={},F=this.layout.candleWidth,w=a.pixelWidth||F*.65,e.f4W(23),U=e.E9E(w,1,"2"),e.h7R(0);var de=e.E9E(2,0);e.e4i(),B=h.lineWidth/de,k=n.left-.5*F+this.micropixels-1,y=-1;for(var ce=0;ce<=l.length;ce++){S="h",S+="l",S+="c",T="ope",T+="n",_="b",_+="otto",_+="m",e.h7R(24);var fe=e.E9E(3,19,0,19,3);e.f4W(25);var me=e.E9E(14,4,0,8);if(k+=this.layout.candleWidth*(ce-y-fe)/me,y=ce,L=U,e.h7R(10),k+=e.E9E(F,2),F=this.layout.candleWidth,e.h7R(26),k+=e.E9E(32,F,"2"),H=l[ce],!!H&&((!H.cache||o.pixelCacheExpired)&&(H.cache={}),!H.projection)){if(H.candleWidth){e.f4W(27);var ve=e.E9E(16,398,6,19);k+=(H.candleWidth-F)/ve,F=H.candleWidth}if(P=i(this,H),!!P&&(C[P]=1,h.strokeStyle=P,h.beginPath(),N=this.getTransformFunction(A),v=this.getTransformedQuote(H,A),N&&v&&(H=v),x=H.cache,H&&f&&(H=H[f]),!(!H&&H!==0)&&(M="top",D=_,Q=T,q="close",f&&(e.f4W(15),M=e.D1M(".",M,f),e.h7R(15),D=e.E9E(".",D,f),e.h7R(15),Q=e.E9E(".",Q,f),e.h7R(15),q=e.D1M(".",q,f)),O=H.Close,R=H.Open===void 0?O:H.Open,V=H.High===void 0?Math.max(O,R):H.High,K=H.Low===void 0?Math.min(O,R):H.Low,!(!O&&O!==0)))){if(Y=k,!a.isVolume&&c){for(G=0;l[ce+1]&&(J=l[ce+1].Close,!(J||J===0||l[ce+1].futureTick));)G++,ce++;e.h7R(16),k+=e.D1M(G,2,F),e.f4W(28),L+=e.E9E(G,"2",F)}if(e.h7R(0),Z=e.E9E(y,b),Z<n.cacheLeft||Z>n.cacheRight||!x[M]){if(ee=this.pixelFromTransformedValue(V,n,A),X=this.pixelFromTransformedValue(K,n,A),ee=Math.floor(ee),X=Math.floor(X),e.f4W(9),m=e.E9E(X,ee),x[Q]=A.semiLog?A.height*(1-(Math.log(Math.max(R,0))/Math.LN10-A.logLow)/A.logShadow):(A.high-R)*A.multiplier,x[q]=A.semiLog?A.height*(1-(Math.log(Math.max(O,0))/Math.LN10-A.logLow)/A.logShadow):(A.high-O)*A.multiplier,Math.abs(x[q]-x[Q])<1&&(x[q]=x[Q]),x[Q]=Math.floor(x[Q]),x[q]=Math.floor(x[q]),A.flipped?(x[Q]=A.bottom-x[Q],x[q]=A.bottom-x[q]):(x[Q]+=A.top,x[q]+=A.top),u[y]=x[q],ee<p){if(ee+m<p){x[M]=ee,x[D]=ee;continue}e.h7R(17),m-=e.E9E(p,ee,1),e.h7R(29),ee=e.E9E("1",p)}ee+m>g&&(e.f4W(6),m=e.D1M(ee,g,1)),x[M]=ee,e.f4W(0),x[D]=e.E9E(m,ee)}ne=!a.highlight&&.5,se=Math.floor(Y)+ne,oe=x[Q]+ne,ae=x[q]+ne,Ae=x[M]+ne,he=x[D]+ne,Ae<g&&he>p&&H.High!=H.Low&&(e.h7R(9),h.moveTo(se,e.D1M(Ae,B)),e.f4W(0),h.lineTo(se,e.E9E(B,he))),e.f4W(9),ge=Math.floor(e.D1M(k,Y)),a.type!=S&&oe>p&&oe<g&&(h.moveTo(se,oe),e.h7R(21),h.lineTo(e.D1M(L,se,ge),oe)),ae>p&&ae<g&&(h.moveTo(se,ae),e.h7R(15),h.lineTo(e.D1M(ge,L,se),ae)),h.stroke()}}}h.lineWidth=1,o.pixelCacheExpired=!1,ie={colors:[],cache:u};for(var pe in C)s.equals(pe,this.containerColor)||ie.colors.push(pe);return ie},s.ChartEngine.prototype.drawWaveChart=function(n,r){var i,a,o,c,l,u,h,d,f,A,p,g,m,b,C,F,w,U,B,k,y,S,T,_,L,H,P,N,v,x,M;i=n.chart,a=r.stretchGaps,!a&&a!==!1&&(a=this.cleanupGaps==="stretch"),o=i.dataSegment;function D(K){return e.U$Q(),m.pixelFromTransformedValue(K,n,u)}c=new Array(o.length),l=i.context,r||(r={}),u=r.yAxis||n.yAxis,this.startClip(n.name),l.beginPath(),h=!1,d=!1,f=n.yAxis.top,A=n.yAxis.bottom,p=this.layout.candleWidth,g=n.left+Math.floor(-("0.5"-0)*this.layout.candleWidth+this.micropixels),m=this,b=-1;for(var Q=0;Q<=o.length;Q++){e.f4W(30);var q=e.D1M(12,14,17,265,16);e.f4W(31);var O=e.E9E(20,18);if(g+=this.layout.candleWidth*(Q-b-q)/O,b=Q,e.h7R(10),g+=e.D1M(p,2),p=this.layout.candleWidth,e.h7R(32),g+=e.D1M(p,32,"2"),C=o[Q],!!C){if(C.projection)break;if(C.candleWidth){e.f4W(33);var R=e.E9E(388,15,13,12,10);g+=(C.candleWidth-p)/R,p=C.candleWidth}if(F=this.getTransformFunction(u),w=this.getTransformedQuote(C,u),F&&w&&(C=w),C&&r.field&&(C=C[r.field]),!(!C&&C!==0)&&(U=C.Close,B=C.Open===void 0?U:C.Open,k=C.High===void 0?Math.max(U,B):C.High,y=C.Low===void 0?Math.min(U,B):C.Low,!(!U&&U!==0))){if(a)for(;o[Q+1]&&(S=o[Q+1].Close,!(S||S===0||o[Q+1].futureTick));)e.h7R(26),g+=e.D1M(0,p,"2"),Q++;if(e.h7R(34),T=e.E9E(b,0,Q,"1"),e.h7R(35),_=e.E9E(8,T,g,3,p),L=D(B),L<f){if(L=f,d){l.moveTo(_,L);continue}d=!0}else if(L>A){if(L=A,d){l.moveTo(_,L);continue}d=!0}else d=!1;if(h)l.lineTo(_,L);else{h=!0,e.h7R(36);var V=e.E9E(13,1,52,11,13);H=i.dataSet.length-i.scroll-("1"<<V),H<0?l.moveTo(_,L):H>=0&&(P=i.dataSet[H],N=this.getTransformedQuote(P,u),N&&(P=N),v=P.Close,v=D(v),v=Math.min(Math.max(v,f),A),l.moveTo(n.left+(Q-1)*this.layout.candleWidth+this.micropixels,v),l.lineTo(_,L)),l.moveTo(_,L)}e.h7R(16),_+=e.E9E(T,4,p),B<U?(L=D(y),L<f&&(L=f),L>A&&(L=A),l.lineTo(_,L),e.h7R(28),_+=e.E9E(T,"4",p),L=D(k),L<f&&(L=f),L>A&&(L=A),l.lineTo(_,L)):(L=D(k),L<f&&(L=f),L>A&&(L=A),l.lineTo(_,L),e.f4W(16),_+=e.D1M(T,4,p),L=D(y),L<f&&(L=f),L>A&&(L=A),l.lineTo(_,L)),e.h7R(16),_+=e.E9E(T,4,p),L=D(U),c[Q]=L,L<f&&(L=f),L>A&&(L=A),l.lineTo(_,L)}}}return x=this.canvasStyle("stx_line_chart"),x.width&&parseInt(x.width,10)<=25?l.lineWidth=Math.max(1,s.stripPX(x.width)):l.lineWidth=1,r.highlight&&(l.lineWidth*=2),this.canvasColor("stx_line_chart"),e.e4i(),r.color&&(l.strokeStyle=r.color),!r.highlight&&this.highlightedDraggable&&(l.globalAlpha*=.3),l.stroke(),l.closePath(),M={colors:[l.strokeStyle],cache:c},this.endClip(),l.lineWidth=1,M},s.ChartEngine.prototype.drawHistogram=function(n,r){var i,a,o,c,l,u,h,d,f,A,p,g,m,b,C,F,w,U,B,k,y,S,T,_,L,H,P,N,v,x,M,D,Q,q,O,R,V,K,Y,G,J,Z,ee;if(i="stretc",i+="h",!r||!r.length||(a=n.panel,a||(a="chart"),o=this.panels[a],!o))return;for(c=n.stretchGaps,!c&&c!==!1&&(c=this.cleanupGaps===i),l=n.yAxis?n.yAxis:o.yAxis,u=n.type,h=this.chart.dataSegment,d=!1,f=1,A=1,m=0;m<r.length;m++)r[m].disabled||(d|=r[m].border_color_up&&!s.isTransparent(r[m].border_color_up),d|=r[m].border_color_down&&!s.isTransparent(r[m].border_color_down),f=r[m].opacity_up,A=r[m].opacity_down,!n.highlight&&this.highlightedDraggable&&(e.h7R(1),f*=e.D1M(1,"0.3"),A*=.3));n.borders===!1&&(d=!1),n.name||(n.name="Data"),b=l.multiplier,n.heightPercentage||(n.heightPercentage=.7),n.widthFactor||(n.widthFactor=.8),C=0,F=0;for(var X=0;X<this.chart.maxTicks;X++)if(w=h[X],!!w)for(U=0,m=0;m<r.length;m++)B="C",B+="lose",!r[m].disabled&&(p=r[m].field,g=r[m].subField||this.chart.defaultPlotField||B,k=s.ChartEngine.getQuoteFieldValue(w,p,g),!k&&this.cleanupGaps==="stretch"&&(k=this.valueFromInterpolation(X,p,g,o,l,!0)),(k||k==="0">>32)&&(y="o",y+="b",y+="jec",y+="t",typeof k==y&&k[g]&&(k=k[g]),u=="stacked"?U+=k:U=k,U>C&&(C=U),U<F&&(F=U)));if(C===0&&F===0){this.displayErrorAsWatermark(a,this.translateIf(n.name+" Not Available"));return}if(T=!1,n.bindToYAxis)l.baseline&&(F=l.baseline.value,T=!0),S=Math.floor(this.pixelFromPrice(F,o,l))+(l.flipped?-.5:.5);else{if(l.flipped){S=Math.floor(l.top)-.5,L=-1445536321,H=124610013,P=2;for(var ne=1;e.R7z(ne.toString(),ne.toString().length,40028)!==L;ne++)_=Math.floor(l.bottom)%224,e.f4W(9),P+=e.E9E("2",0);e.R7z(P.toString(),P.toString().length,77265)!==H&&(_=Math.floor(l.bottom)+("363"-0)),_=Math.floor(l.bottom)-+"0.5"}else S=Math.floor(l.bottom)+.5,_=Math.floor(l.top)+("0.5"-0);b=Math.abs(S-_)*n.heightPercentage/(C-F)}this.startClip(a),N=this.layout.candleWidth<=1||!d?0:.5,v=this.chart.context,l.flipped&&(v.translate(0,2*l.top),v.scale(1,-1)),x=Math.max(0,(1-n.widthFactor)*this.layout.candleWidth/2),M=new Array(h.length),D=[],Q=this;function se(ae,Ae,he,ge,ie,re,de,ce,fe,me){var ve,pe,be,Se,Ee,Ie,Qe,Ne,De,Re,_e,Ue,He,Pe,We,Ge,je,Je,Oe,nt,Ze,Le,et,Ye,Ve,ct,ot,dt,xt,Ke,At,st,it,rt,$e,yt;ge||(e.f4W(37),ge=e.E9E(0,"1")),v.globalAlpha=ge,v.beginPath(),e.f4W(0),ve=e.E9E(.5,S),pe=Math.floor(Q.pixelFromBar(0,o.chart)-Q.layout.candleWidth/2),be=pe;for(var qe=0;qe<h.length;qe++){if(Se="c",Se+="l",Se+="ust",Se+="ered",Ee="clu",Ee+="stered",Ie="o",Ie+="b",Ie+="ject",Qe="C",Qe+="lose",Ne=0,De=D[qe]||S,qe===0&&(ve=De),Re=0,_e=h[qe],Ue=Q.layout.candleWidth,He=_e&&_e[ae]&&_e[ae]._periodic_end,Pe=He||He===0,We=Pe?(He+1)*Ue:"0">>64,Pe&&!qe){for(Ge=_e.tick,je=Q.chart.dataSet;Ge>=0&&(e.f4W(9),Je=je[e.E9E(Ge,1)],!(!Je||!Je[ae]||!Je[ae]._periodic_end));)Re+=Ue,Ge--;We+=Re,be-=Re}if(qe+=He||0,De=D[qe]||S,Oe=s.ChartEngine.getQuoteFieldValue(_e,ae,Ae),Oe===null){ve=De,be+=We||Ue;continue}if((c||n.fillGaps==="stretch")&&u!=="clustered"){for(;h[qe+1]&&(e.f4W(0),nt=h[e.D1M(1,qe)],ae&&(nt=nt[ae]),!(!nt||h[qe+1].futureTick||nt.Close||nt.Close===0));)Ne++,qe++;De=D[qe]||S}if(e.f4W(38),Ze=e.E9E(b,Oe,F),(_e.candleWidth||_e.lineTravel!=null)&&(Ue=_e.candleWidth||_e.lineTravel,_e.lineTravel!=null&&qe===h.length-1&&(Ue=h[qe-2].lineTravel),qe===0&&(pe=be=Math.floor(Q.pixelFromBar(0,o.chart)-Ue/("2">>0)))),isNaN(Ze)){ve=De,be+=Ue;continue}if(Le=Math.floor(De-Ze)+.5,Le>De&&!T&&(Le=De),e.h7R(0),et=(typeof _e[ae]=="object"?_e[ae]:_e)[e.D1M(Qe,Pe?"_periodic_":"")],e.h7R(0),Ye=(typeof _e[ae]==Ie?_e[ae]:_e)[e.E9E("iqPrevClose",Pe?"_periodic_":"")],me&&me.indexOf(qe)==-1||!me&&(re&&et<Ye||!re&&et>=Ye)){ve=Le,be+=We||Ue+Q.layout.candleWidth*Ne;continue}if(Ve=Ue/Q.layout.candleWidth,We){e.f4W(39);var ft=e.E9E(4,2,13,4);e.f4W(40);var ze=e.D1M(7,1,58,8);x=We*((ft-n.widthFactor)/ze)}ct=We||Ue*Ve,ot=n.colMargin>=1?n.colMargin:(n.colMargin||0)*ct,e.h7R(41),dt=e.D1M(ce,"1",ot),fe=xt=n.subtype===Ee?(ct-x*2-dt)/ce:ct-x*2,Ke=!de,e.f4W(0),At=e.D1M(x,be),n.subtype==="clustered"&&(e.f4W(11),At+=e.E9E(Ke?0:ot+fe,Ve,de)),st=Math.round(At)+(ie?0:N),it=Math.round(At+xt)-(ie?0:N),it-st<"2">>0&&(e.h7R(0),it=e.D1M(1,st)),rt=ie?0:.5,st%("1"^0)==rt&&(e.h7R(1),st+=e.D1M(1,"0.5")),it%1==rt&&(e.f4W(9),it+=e.E9E("0.5",0)),e.h7R(1),it+=e.E9E(Ne,fe),v.moveTo(it,De),S!=De&&ie&&!x&&D[qe+1]&&v.moveTo(it,Math.max(Le,Math.min(De,D[qe+1]))),v.lineTo(it,Le),v.lineTo(st,Le),ie&&de?(M[qe]>Le||qe===0)&&v.lineTo(st,Math.min(De,M[qe])):ie&&!x&&u=="clustered"?qe>0&&M[qe-1]&&M[qe-1]>Le&&v.lineTo(st,Math.min(De,M[qe-1])):ie&&!x?(ve>Le||qe===0)&&v.lineTo(st,Math.min(De,ve)):v.lineTo(st,De),ve=Le,be+=We||Ue+Q.layout.candleWidth*Ne,(u!=Se||ie)&&(M[qe]=Le);for(var pt="0"<<0;pt<Ne;pt++)e.f4W(9),M[e.D1M(qe,pt)]=M[qe]}e.U$Q(),ie?($e="aut",$e+="o",v.strokeStyle=!he||he==$e?Q.defaultColor:he,v.stroke()):(yt="a",yt+="uto",v.fillStyle=!he||he==yt?Q.defaultColor:he,v.fill()),v.closePath()}for(q=1,O=r.filter(ae=>!ae.disabled).slice(),O.sort((ae,Ae)=>(Ae.clusterPriority||0)-(ae.clusterPriority||0)),R=O.length,m=0;m<R;m++){if(V="s",V+="tacke",V+="d",K="clus",K+="tered",Y=O[m],q=this.layout.candleWidth*n.widthFactor,x&&this.layout.candleWidth-q<=2&&(d=!1),G=0,u==K&&(G=m,q/=R),g=Y.subField||this.chart.defaultPlotField||"Close",typeof Y.color_function=="function"){Z={};for(var oe=0;oe<h.length;oe++)h[oe]&&(J=Y.color_function(h[oe]),typeof J=="string"&&(J={fill_color:J,border_color:J}),J.hasOwnProperty("border_opacity")||(J.border_opacity=J.opacity),ee=J.fill_color+","+J.border_color,ee in Z?Z[ee].positions.push(oe):(J.positions=[oe],Z[ee]=J));for(ee in Z)J=Z[ee],se(Y.field,g,J.fill_color,J.opacity,null,null,G,R,q,J.positions),se(Y.field,g,J.border_color,J.border_opacity,!0,null,G,R,q,J.positions)}else se(Y.field,g,Y.fill_color_up,f,null,!0,G,R,q),se(Y.field,g,Y.fill_color_down,A,null,null,G,R,q),this.layout.candleWidth>=2&&d&&(se(Y.field,g,Y.border_color_up,f,!0,!0,G,R,q),se(Y.field,g,Y.border_color_down,A,!0,null,G,R,q));u==V&&(D=s.shallowClone(M))}v.globalAlpha=1,this.endClip()},s.ChartEngine.prototype.scatter=function(n,r){var i,a,o,c,l,u,h,d,f,A,p,g,m,b,C,F,w,U,B,k,y,S;i=n.chart,a=i.dataSegment,o=new Array(a.length),c=this.chart.context,this.canvasColor("stx_scatter_chart"),r||(r={}),l=r.field||i.defaultPlotField,u=r.yAxis||n.yAxis,h=r.subField||i.defaultPlotField||"Close",this.startClip(n.name),c.beginPath(),c.lineWidth=r.lineWidth||4,r.highlight&&(c.lineWidth*=2),!r.highlight&&this.highlightedDraggable&&(c.globalAlpha*=.3),r.color&&(c.strokeStyle=r.color),d=u.top,f=u.bottom,A=this.layout.candleWidth,e.f4W(42);var T=e.D1M(7,3,2,0,7);p=n.left-.5*A+this.micropixels-T,g=r,m=g.tickFilter;for(var _=0;_<=a.length;_++)if(e.f4W(10),p+=e.E9E(A,2),A=this.layout.candleWidth,e.f4W(10),p+=e.E9E(A,2),b=a[_],!!b){if(b.candleWidth){e.f4W(43);var L=e.E9E(28,0,6,11);p+=(b.candleWidth-A)/L,A=b.candleWidth}if(m){if(m.length===("0"^0))break;if(!m.has(b.tick))continue;m.delete(b.tick)}if(!b.projection){C=this.getTransformFunction(u),F=this.getTransformedQuote(b,u),C&&F&&(b=F),w=b[l],w&&w[h]!==void 0&&(w=w[h]),w instanceof Array||(w=[w]),"Scatter"in b&&(w=b.Scatter);for(var H=0;H<w.length;H++)!w[H]&&w[H]!=="0"<<32||(U=w[H],B=0,w[H]instanceof Array&&(U=w[H][0],B=w[H][2]),k=u.semiLog?u.height*(1-(Math.log(Math.max(U,0))/Math.LN10-u.logLow)/u.logShadow):(u.high-U)*u.multiplier,u.flipped?(e.h7R(9),k=e.E9E(f,k)):k+=d,!(k<d)&&(k>f||(y=r.lineWidth/2||2,r.highlight&&(y*=2),B&&(e.h7R(1),y=e.D1M(B,A)),e.f4W(9),c.moveTo(e.D1M(p,y),k),e.h7R(0),c.lineTo(e.D1M(y,p),k),o[_]=k)))}}return c.stroke(),c.closePath(),S={colors:[c.strokeStyle],cache:o},this.endClip(),c.lineWidth=1,S}};Al=E=>{var e=ke,t,s,n,r,i,a,o,c,l,u,h,d,f,A,p,g,m,b,C,F,w,U,B,k;t="lineW",t+="i",t+="dth",s="fi",s+="llColor",n="fillCol",n+="or",r="lineW",r+="idt",r+="h",i="au",i+="t",i+="o",a="s",a+="ol",a+="id",o="a",o+="u",o+="t",o+="o",c="sol",c+="i",c+="d",l="au",l+="to",u="so",u+="li",u+="d",h="so",h+="l",h+="i",h+="d",d="so",d+="l",d+="i",d+="d",f="au",f+="t",f+="o",A="soli",A+="d",p="a",p+="u",p+="to",g="a",g+="u",g+="t",g+="o",m="#7DA6",m+="F",m+="5",b="und",b+="efined",C=typeof _CIQ<"u"?_CIQ:E.CIQ,F=typeof _timezoneJS!==b?_timezoneJS:E.timezoneJS,C.ChartEngine.drawingTools={},C.ChartEngine.currentVectorParameters={vectorType:null,pattern:"solid",lineWidth:1,fillColor:m,currentColor:g,axisLabel:!0,showCallout:!1,alwaysMagnetize:!1,spanPanels:!1,fibonacci:{trend:{color:p,parameters:{pattern:A,opacity:.25,lineWidth:1}},fibs:[{level:-.786,color:"auto",parameters:{pattern:"solid",opacity:.25,lineWidth:1}},{level:-+"0.618",color:"auto",parameters:{pattern:"solid",opacity:.25,lineWidth:1},display:!0},{level:-.5,color:f,parameters:{pattern:"solid",opacity:.25,lineWidth:1}},{level:-.382,color:"auto",parameters:{pattern:"solid",opacity:.25,lineWidth:"1"<<0},display:!0},{level:-.236,color:"auto",parameters:{pattern:d,opacity:.25,lineWidth:1}},{level:0,color:"auto",parameters:{pattern:h,lineWidth:1},display:!0},{level:"0.236"*1,color:"auto",parameters:{pattern:"solid",opacity:.25,lineWidth:1}},{level:.382,color:"auto",parameters:{pattern:"solid",opacity:"0.25"*1,lineWidth:1},display:!0},{level:"0.5"*1,color:"auto",parameters:{pattern:u,opacity:.25,lineWidth:1},display:!0},{level:.618,color:"auto",parameters:{pattern:"solid",opacity:.25,lineWidth:1},display:!0},{level:+"0.786",color:l,parameters:{pattern:"solid",opacity:.25,lineWidth:1}},{level:1,color:"auto",parameters:{pattern:"solid",lineWidth:1},display:!0},{level:"1.272"*1,color:"auto",parameters:{pattern:"solid",opacity:.25,lineWidth:1}},{level:"1.382"*1,color:"auto",parameters:{pattern:c,opacity:+"0.25",lineWidth:1},display:!0},{level:1.618,color:o,parameters:{pattern:a,opacity:.25,lineWidth:1},display:!0},{level:2.618,color:i,parameters:{pattern:"solid",opacity:.25,lineWidth:1}},{level:4.236,color:"auto",parameters:{pattern:"solid",opacity:+"0.25",lineWidth:1}}],extendLeft:!1,printLevels:!0,printValues:!1,timezone:{color:"auto",parameters:{pattern:"solid",opacity:.25,lineWidth:"1"*1}}},volumeProfile:{priceBuckets:30},annotation:{font:{style:null,size:null,weight:null,family:null}},measurementline:{calloutOnHover:!1,displayGroups:{bars:!0,delta:!0,annpercent:!1,totreturn:!1,volume:!1,studies:!1}}},C.ChartEngine.registerDrawingTool=function(y,S){C.ChartEngine.drawingTools[y]=S},C.ChartEngine.completeDrawing=function(y){var S,T,_;S="drawin",S+="gCo",S+="m",e.e4i(),S+="plete",!(!y||!y.activeDrawing)&&(T=y.activeDrawing,y.keepDrawingToolSelected||(y.drawingContainer&&y.drawingContainer.tool?(_="n",_+="oto",_+="ol",y.drawingContainer.tool({node:null},_)):y.changeVectorType("")),y.dispatch(S,{stx:y,drawing:T}))},C.ChartEngine.prototype.keepDrawingToolSelected=!1,C.ChartEngine.prototype.setDrawingContainer=function(y){this.drawingContainer=y},C.ChartEngine.prototype.exportDrawings=function(){var y;y=[];for(var S=0;S<this.drawingObjects.length;S++)y.push(this.drawingObjects[S].serialize());return y},C.ChartEngine.prototype.abortDrawings=function(y){e.e4i();var S;y!==!1&&(y=!0);for(var T=this.drawingObjects.length-1;T>=0;T--)S=this.drawingObjects[T],S.abort(!0),(y||!S.permanent)&&this.drawingObjects.splice(T,1)},C.ChartEngine.prototype.importDrawings=function(y){var S,T,_;if(C.Drawing){e.U$Q();for(var L=0;L<y.length;L++)S=y[L],S.name=="fibonacci"&&(S.name="retracement"),T=C.ChartEngine.drawingTools[S.name],T||C.Drawing[S.name]&&(T=C.Drawing[S.name],C.ChartEngine.registerDrawingTool(S.name,T)),T&&(_=new T,_.reconstruct(this,S),this.drawingObjects.push(_))}},C.ChartEngine.prototype.clearDrawings=function(y,S){var T,_;S!==!1&&(S=!0),T=this.exportDrawings(),this.abortDrawings(S),y?this.undoStamps=[]:this.undoStamp(T,this.exportDrawings()),this.changeOccurred("vector"),this.cancelTouchSingleClick=!0,C.clearCanvas(this.chart.tempCanvas,this),this.draw(),_=this.controls.mSticky,_&&(_.style.display="none",_.querySelector(".mStickyInterior").innerHTML="")},C.ChartEngine.prototype.createDrawing=function(y,S){var T,_;if(C.Drawing){T=new C.Drawing[y],T.reconstruct(this,S),_=new C.Drawing[y],_.stx=this,_.copyConfig();for(var L in _)T[L]=T[L]||_[L];return this.drawingObjects.push(T),this.draw(),T}},C.ChartEngine.prototype.removeDrawing=function(y){for(var S="0"*1;S<this.drawingObjects.length;S++)if(this.drawingObjects[S]==y){e.f4W(9),this.drawingObjects.splice(S,e.D1M("1",0)),this.changeOccurred("vector"),this.draw();return}},C.ChartEngine.prototype.undo=function(){var y,S;y="u",y+="nd",y+="o",!this.runPrepend(y,arguments)&&(this.activeDrawing&&(S="stx_cr",S+="osshair_drawing",this.editingAnnotation=!1,this.activeDrawing.abort(),this.activeDrawing.hidden=!1,this.drawingSnapshot=null,this.activateDrawing(null),C.clearCanvas(this.chart.tempCanvas,this),this.draw(),this.controls.crossX.classList.replace("stx_crosshair_drawing","stx_crosshair"),this.controls.crossY.classList.replace(S,"stx_crosshair"),C.ChartEngine.drawingLine=!1,this.cancelTouchSingleClick=!0),e.e4i(),this.runAppend("undo",arguments))},C.ChartEngine.prototype.undoStamp=function(y,S){this.undoStamps.push(y),this.dispatch("undoStamp",{before:y,after:S,stx:this})},C.ChartEngine.prototype.undoLast=function(){e.e4i();var y;this.activeDrawing?this.undo():this.undoStamps.length&&(y="v",y+="e",y+="cto",y+="r",this.drawingObjects=[],this.importDrawings(this.undoStamps.pop()),this.changeOccurred(y),this.draw())},C.ChartEngine.prototype.addDrawing=function(y){var S;S=this.exportDrawings(),this.drawingObjects.push(y),this.undoStamp(S,this.exportDrawings())},C.ChartEngine.prototype.repositionDrawing=function(y,S){var T,_,L;this.currentPanel.name!=y.panelName&&!y.spanPanels||(T=this.panels[y.panelName],_=this.adjustIfNecessary(T,this.crosshairTick,y.valueFromPixel(this.backOutY(C.ChartEngine.crosshairY),T,this.getYAxisByField(T,y.field))),L=this.chart.tempCanvas,C.clearCanvas(L,this),this.startClip(T.name),S?(this.drawingSnapshot=this.exportDrawings(),y.spanPanels?(y.originPanelName=y.panelName,Object.values(this.panels).forEach(H=>{e.e4i(),y.panelName=H.name,y.render(L.context)}),y.panelName=y.originPanelName):y.render(L.context)):(y.reposition(L.context,y.repositioner,this.crosshairTick,_),this.drawingSnapshot&&this.undoStamp(C.shallowClone(this.drawingSnapshot),this.exportDrawings()),this.drawingSnapshot=null),this.editingDrawing&&this.editingDrawing.render(L.context),e.U$Q(),this.endClip(),y.measure&&y.measure())},C.ChartEngine.prototype.activateRepositioning=function(y){var S,T,_,L,H;this.repositioningDrawing=y,y&&(this.draw(),this.repositionDrawing(y,!0)),e.U$Q(),S=1080902684,T=-296372432,_=2;for(var P=1;e.V7r(P.toString(),P.toString().length,"95449">>32)!==S;P++)this.chart.tempCanvas.style.display=y?"block":"none",_+=2;e.R7z(_.toString(),_.toString().length,58646)!==T&&(L="no",L+="n",L+="e",H="b",H+="lock",this.chart.tempCanvas.style.display=y?H:L)},C.ChartEngine.prototype.activateDrawing=function(y,S){var T,_;if(T="non",T+="e",S||(S=this.currentPanel),this.drawingSnapshot=null,!y)return this.activeDrawing=null,this.chart.tempCanvas.style.display="none",L(this),!1;function L(H){var P;e.e4i(),!(!S||!H.layout.studies)&&(P=H.layout.studies[S.name],P&&!P.overlay&&delete H.overlays[P.name])}return _=C.ChartEngine.drawingTools[y],_||C.Drawing[y]&&(_=C.Drawing[y],C.ChartEngine.registerDrawingTool(y,_)),_&&(this.activeDrawing=new _,this.activeDrawing.construct(this,S),!this.charts[S.name]&&this.activeDrawing.chartsOnly)?(this.activeDrawing=null,L(this),!1):(this.chart.tempCanvas.style.display="block",this.controls.drawOk&&(this.controls.drawOk.style.display=T),L(this),!0)},C.ChartEngine.prototype.drawingClick=function(y,S,T){var _,L,H,P,N,v,x,M,D,Q,q,O;if(e.e4i(),!!C.Drawing&&y&&!this.openDialog&&!this.editingDrawing&&!(!this.activeDrawing&&!this.activateDrawing(this.currentVectorParameters.vectorType,y))){if(this.activeDrawing){if(this.userPointerDown&&!this.activeDrawing.dragToDraw){C.ChartEngine.drawingLine||this.activateDrawing(null);return}else if(this.activeDrawing.p0)this.activeDrawing.moving&&(S=this.crosshairX-this.left,T=this.crosshairY-this.top);else{if(_="Hi",_+="g",_+="h",L=this.highlightedDataSetField,this.magnetizedPrice!==null&&(y!==this.chart.panel||["Open",_,"Low","Close"].indexOf(this.magneticHold)<0)&&(L=C.getObjectChainRoot(this.magneticHold)),!L&&y!=this.chart.panel){for(var R in this.chart.seriesRenderers)if(H=this.chart.seriesRenderers[R],H.params.panel==y.name){L=H.seriesParams["0">>32].field;break}for(var V in this.layout.studies)if(P=this.layout.studies[V],P.panel==y.name){L=Object.keys(P.outputMap)[0];break}}this.activeDrawing.field=L}return N=this.tickFromPixel(S,y.chart),v=this.panels[this.activeDrawing.panelName],this.magnetizedPrice||this.magnetizedPrice===0?x=this.adjustIfNecessary(v,N,this.magnetizedPrice):x=this.adjustIfNecessary(v,N,this.activeDrawing.valueFromPixel(T,v,this.getYAxisByField(v,this.activeDrawing.field))),this.activeDrawing.click(this.chart.tempCanvas.context,N,x)?this.activeDrawing&&(M="stx_crossh",M+="a",M+="i",M+="r",D="st",D+="x_cross",D+="hair",Q="stx",Q+="_crosshair_draw",Q+="ing",q="v",q+="ect",q+="or",C.ChartEngine.drawingLine=!1,C.clearCanvas(this.chart.tempCanvas,this),this.addDrawing(this.activeDrawing),C.ChartEngine.completeDrawing(this),this.activateDrawing(null),this.adjustDrawings(),this.draw(),this.changeOccurred(q),this.controls.crossX.classList.replace(Q,D),this.controls.crossY.classList.replace("stx_crosshair_drawing",M)):(O="stx_crosshai",O+="r",this.changeOccurred("drawing"),C.ChartEngine.drawingLine=!0,this.controls.crossX.classList.replace("stx_crosshair","stx_crosshair_drawing"),this.controls.crossY.classList.replace(O,"stx_crosshair_drawing")),!0}return!1}},C.ChartEngine.prototype.rightClickDrawing=function(y,S,T){var _,L;this.runPrepend("rightClickDrawing",arguments)||(e.e4i(),!y.permanent&&(this.callbackListeners.drawingEdit.length?this.dispatch("drawingEdit",{stx:this,drawing:y,forceEdit:S,forceText:T}):(_=y.abort(),_||(L=this.exportDrawings(),this.removeDrawing(y),this.undoStamp(L,this.exportDrawings())),this.changeOccurred("vector")),this.runAppend("rightClickDrawing",arguments)))},C.ChartEngine.prototype.magnetize=function(){var y,S,T,_,L,H,P,N,v,x,M,D,Q,q,O,R,V,K,Y,G,J,Z,ee,X,ne,se,oe;if(y="st",y+="x-dragg",y+="able",S="L",S+="o",S+="w",T="H",T+="i",T+="gh",_="fre",_+="e",_+="form",L=this,this.magnetizedPrice=null,!(!this.preferences.magnet&&!this.currentVectorParameters.alwaysMagnetize)&&!this.runPrepend("magnetize",arguments)&&!(this.repositioningDrawing||this.editingDrawing)&&(H=this.currentVectorParameters.vectorType,!(!H||H=="projection"||H==_)&&!((H=="annotation"||H=="callout")&&C.ChartEngine.drawingLine)&&(P=this.activeDrawing?this.panels[this.activeDrawing.panelName]:this.currentPanel,N=P.chart,v=this.crosshairTick,!(v>N.dataSet.length)&&(x=N.dataSet[v],!!x)))){if(D=this.getRenderedItems(),Q=["Open",T,S,"Close"],this.activeDrawing&&this.activeDrawing.penDown)if(this.magneticHold)q="H",q+="i",q+="g",q+="h",Q.indexOf(this.magneticHold)!=-1&&D.indexOf(q)!=-("1"*1)?D=Q:D=[this.magneticHold];else return;else this.magneticHold=null;O=1e9,R=parseFloat(this.preferences.magnet),H=="measurementline"&&(R=!1),V=function(){var he,ge;if(K=L.getYAxisByField(P,D[ae])||P.yAxis,Y=L.getTransformFunction(K),G=L.getTransformedQuote(x,K),Y&&G&&(x=G),J=x[D[ae]],Z=C.existsInObjectChain(x,D[ae]),Z&&(J=Z.obj[Z.member]),(J||J===0)&&(ee=L.pixelFromTransformedValue(J,P,K),Math.abs(L.cy-ee)<O)){if(O=Math.abs(L.cy-ee),R&&R<=O)return 1;L.magnetizedPrice=J,Y&&(he=L.getTransformFunction(K,!0),ge=C.getObjectChainRoot(D[ae]),he&&N.series[ge]&&L.updateTransformFunction((ie,re,de,ce)=>he(ie,re,de,ce,ge),K,!0),L.magnetizedPrice=L.valueFromPixel(ee,P),L.updateTransformFunction(he,K,!0)),M=ee,L.magneticHold=D[ae]}};for(var ae=0;ae<D.length;ae++)V();X=this.pixelFromTick(v,N),e.U$Q(),ne=M,C.clearCanvas(N.tempCanvas,this),se=N.tempCanvas.context,se.beginPath(),se.lineWidth=1,e.h7R(7);var Ae=e.D1M(108,5,97,18,108);oe=Math.max(this.layout.candleWidth,Ae)/("3"<<0),se.arc(X,ne,Math.min(oe,"8"^0),0,2*Math.PI,!1),se.fillStyle="#398dff",se.strokeStyle="#398dff",se.fill(),se.stroke(),se.closePath(),N.tempCanvas.style.display="block",this.anyHighlighted&&this.container.classList.remove(y),this.activeDrawing&&(this.startClip(P.name),this.activeDrawing.move(se,this.crosshairTick,this.activeDrawing.valueFromPixel(ne,P,this.getYAxisByField(P,this.activeDrawing.field))),this.endClip()),this.runAppend("magnetize",arguments)}},C.ChartEngine.prototype.changeVectorType=function(y){var S,T,_,L,H,P;if(this.currentVectorParameters.vectorType=y,this.currentVectorParameters.alwaysMagnetize=!1,e.U$Q(),C.Drawing&&C.Drawing.initializeSettings(this,y),C.ChartEngine.drawingLine&&this.undo(),S=this.uiContext&&this.uiContext.topNode.multiChartContainer?this.uiContext.topNode.closest("cq-context-wrapper.active"):!0,!this.container.classList.contains("stx-crosshair-cursor-on")&&y&&S){T=this.chart,_=this.left,L=this.top,e.f4W(31);var N=e.E9E(14,12);H=T.width/N+_+T.left,e.f4W(44);var v=e.D1M(0,11,208,20,10);P=T.height/v+L+T.top,this.mousemoveinner(H,P)}this.doDisplayCrosshairs()},C.ChartEngine.prototype.changeVectorParameter=function(y,S){var T,_,L;if(T="axi",T+="sLabel",y==T)S=S.toString()==="true"||Number(S);else if(y=="lineWidth")S=Number(S);else if(y=="fontSize"){e.h7R(45);var H=e.D1M(5,13,23,1,6);S=parseInt(S,H)+"px"}return _=this.currentVectorParameters,typeof _[y]<"u"||y.substr(0,4)=="font"&&(L="undefine",L+="d",y=y.substr(4).toLowerCase(),y=="family"&&S.toLowerCase()=="default"&&(S=null),_=_.annotation.font,typeof _[y]!==L)?(_[y]=S,!0):!1},C.ChartEngine.prototype.drawVectors=function(){var y,S,T,_,L,H,P;if(!this.vectorsShowing&&!this.runPrepend("drawVectors",arguments)){if(this.vectorsShowing=!0,e.U$Q(),!this.chart.hideDrawings&&!this.highlightedDraggable){for(y={},T=0;T<this.drawingObjects.length;T++)if(_=this.drawingObjects[T],!_.hidden&&!(this.repositioningDrawing===_&&!this.editingDrawing)&&(S=_.panelName,!(!this.panels[_.panelName]||this.panels[_.panelName].hidden)))for(var N in this.panels)y[N]||(y[N]=[]),(_.spanPanels||N==S)&&(_.originPanelName=_.panelName,y[N].push(_));this.editingDrawing&&(L=this.chart.tempCanvas,C.clearCanvas(L,this),L.style.display="block");for(S in y){for(this.startClip(S),H=y[S],T=0;T<H.length;T++)P=H[T]===this.editingDrawing?this.chart.tempCanvas.context:this.chart.context,H[T].spanPanels?(H[T].panelName=S,H[T].render(P),H[T].panelName=H[T].originPanelName):H[T].render(P);this.endClip()}}this.runAppend("drawVectors",arguments)}},C.ChartEngine.prototype.adjustDrawings=function(){for(var y,S="0"<<0;S<this.drawingObjects.length;S++)y=this.drawingObjects[S],this.panels[y.panelName]&&y.adjust()},C.Drawing=C.Drawing||function(){e.e4i(),this.chartsOnly=!1,this.penDown=!1},C.Drawing.getDrawingParameters=function(y,S){var T,_,L,H;try{T=new C.Drawing[S]}catch{}if(!T)return null;T.stx=y,T.copyConfig(!0),_={},L=T.configs;for(var P=0;P<L.length;P++)_[L[P]]=T[L[P]];return H=y.canvasStyle("stx_annotation"),H&&_.font&&(_.font.size=H.fontSize,_.font.family=H.fontFamily,_.font.style=H.fontStyle,_.font.weight=H.fontWeight),e.e4i(),_},C.Drawing.saveConfig=function(y,S){var T,_;S&&(T=y.preferences,e.e4i(),T.drawings||(T.drawings={}),T.drawings[S]={},_=new C.Drawing[S],_.stx=y,C.Drawing.copyConfig(_),_.configs.forEach(function(L){T.drawings[S][L]=_[L]}),y.changeOccurred("preferences"))},C.Drawing.restoreDefaultConfig=function(y,S,T){T?y.preferences.drawings=null:y.preferences.drawings[S]=null,y.changeOccurred("preferences"),y.currentVectorParameters=C.clone(C.ChartEngine.currentVectorParameters),y.currentVectorParameters.vectorType=S},C.Drawing.initializeSettings=function(y,S){var T,_;T=C.Drawing[S],e.e4i(),T&&(_=new T,_.initializeSettings&&_.initializeSettings(y))},C.Drawing.updateSource=function(y,S,T,_){var L,H,P,N;if(L="vect",L+="o",L+="r",!!S){H=!1;for(var v in y.drawingObjects)P=y.drawingObjects[v],P.field&&(T?P.field==S?(P.field=T,H=!0):P.field.indexOf(S)>-1&&P.field.indexOf(S+"-")==-1&&(P.field=P.field.replace(S,T),H=!0):(N="-",N+="-",N+=">",(P.field.split(N)[0]==S||P.panelName==S)&&(P.panelName=_,H=!0)));H&&y.changeOccurred(L)}},C.Drawing.prototype.copyConfig=function(y){e.e4i(),C.Drawing.copyConfig(this,y)},C.Drawing.copyConfig=function(y,S){var T,_,L,H,P,N,v,x;for(T=y.stx.currentVectorParameters,_=y.configs,L=0;L<_.length;L++)P="f",P+="o",P+="n",P+="t",H=_[L],H=="color"?y.color=T.currentColor:H=="parameters"?y.parameters=C.clone(T.fibonacci):H==P?y.font=C.clone(T.annotation.font):y[H]=T[H];if(e.U$Q(),!!S&&(N=y.stx.preferences,N&&N.drawings))for(C.extend(y,N.drawings[T.vectorType]),L=0;L<_.length;L++)v="f",v+="o",v+="nt",x="colo",x+="r",H=_[L],H==x?T.currentColor=y.color:H=="parameters"?T.fibonacci=C.clone(y.parameters):H==v?T.annotation.font=C.clone(y.font):T[H]=y[H]},C.Drawing.prototype.dragToDraw=!1,C.Drawing.prototype.permanent=!1,C.Drawing.prototype.chartsOnly=!1,C.Drawing.prototype.abort=function(y){},C.Drawing.prototype.measure=function(){},C.Drawing.prototype.construct=function(y,S){e.U$Q(),this.stx=y,this.panelName=S.name},C.Drawing.prototype.isAllowed=function(y,S){return!0},C.Drawing.prototype.render=function(y){e.U$Q(),console.warn("must implement render function!")},C.Drawing.prototype.click=function(y,S,T){console.warn("must implement click function!")},C.Drawing.prototype.move=function(y,S,T){var _;_="must implem",_+="ent ",_+="move func",_+="tion!",console.warn(_)},C.Drawing.prototype.reposition=function(y,S,T,_){},C.Drawing.prototype.intersected=function(y,S,T){e.e4i();var _;_="must implement intersect",_+="ed function!",console.warn(_)},C.Drawing.prototype.reconstruct=function(y,S){console.warn("must implement reconstruct function!")},C.Drawing.prototype.serialize=function(){console.warn("must implement serialize function!")},C.Drawing.prototype.adjust=function(){console.warn("must implement adjust function!")},C.Drawing.prototype.highlight=function(y){return y&&!this.highlighted?this.highlighted=y:!y&&this.highlighted&&(this.highlighted=y),this.highlighted},C.Drawing.prototype.littleCircleRadius=function(){var y;return e.U$Q(),y=6,y},C.Drawing.prototype.littleCircle=function(y,S,T,_){e.U$Q();var L,H;this.permanent||(L=this.stx.defaultColor,H=C.chooseForegroundColor(L),y.beginPath(),y.lineWidth=1,y.arc(S,T,this.littleCircleRadius(),0,2*Math.PI,!1),_?y.fillStyle=L:y.fillStyle=H,y.strokeStyle=L,y.setLineDash([]),y.fill(),y.stroke(),y.closePath())},C.Drawing.prototype.rotator=function(y,S,T,_){var L,H,P;this.permanent||(L=this.littleCircleRadius(),H=this.stx.defaultColor,y.beginPath(),y.lineWidth=2,_||(y.globalAlpha=.5),e.f4W(46),P=e.E9E(0,L,"4"),y.arc(S,T,P,0,3*Math.PI/2,!1),e.f4W(15),e.e4i(),y.moveTo(e.E9E(2,P,S),e.E9E(2,T,e.f4W(0))),e.f4W(0),y.lineTo(e.D1M(P,S),T),e.f4W(6),y.lineTo(e.D1M(2,S,P),e.D1M(2,T,e.f4W(0))),e.f4W(9),y.moveTo(e.E9E(S,2),e.E9E(P,T,"2",e.h7R(47))),e.f4W(9),y.lineTo(S,e.E9E(T,P)),e.h7R(48),y.lineTo(e.D1M("2",1,S),e.D1M(T,2,P,e.h7R(17))),y.strokeStyle=H,y.stroke(),y.closePath(),y.globalAlpha=1)},C.Drawing.prototype.mover=function(y,S,T,_){var L,H,P,N;if(!this.permanent){L=this.littleCircleRadius(),H=this.stx.defaultColor,P=5,e.h7R(0),N=e.E9E(1,L),y.save(),y.lineWidth=2,y.strokeStyle=H,y.translate(S,T),_||(y.globalAlpha=.5);for(var v=0;v<4;v++)y.rotate(Math.PI/2),y.beginPath(),y.moveTo(0,N),e.f4W(0),y.lineTo(0,e.E9E(P,N)),e.f4W(21),y.moveTo(-2,e.D1M(2,N,P)),e.h7R(0),y.lineTo(0,e.E9E(P,N)),e.h7R(21),y.lineTo(2,e.D1M(2,N,P)),y.closePath(),y.stroke();y.globalAlpha=1,y.restore()}},C.Drawing.prototype.resizer=function(y,S,T,_){var L,H,P,N;if(!this.permanent){L=this.littleCircleRadius(),H=this.stx.defaultColor,e.h7R(31);var v=e.E9E(20,18);P=5*Math.sqrt(v),e.h7R(0),N=e.D1M(1,L),y.save(),y.lineWidth=2,y.strokeStyle=H,y.translate(S,T),y.rotate(-(S*T)/Math.abs(S*T)*Math.PI/4),_||(y.globalAlpha=.5);for(var x=0;x<2;x++)y.rotate(Math.PI),y.beginPath(),y.moveTo(0,N),e.f4W(0),y.lineTo(0,e.D1M(P,N)),e.h7R(21),y.moveTo(-2,e.D1M(2,N,P)),e.h7R(0),y.lineTo(0,e.E9E(P,N)),e.f4W(49),y.lineTo(e.E9E("2",0),e.D1M(2,N,P,e.h7R(21))),y.closePath(),y.stroke();y.globalAlpha=1,y.restore()}},C.Drawing.prototype.pointIntersection=function(y,S,T,_){var L,H;if(L=this.stx,H=L.panels[this.panelName],e.e4i(),!H)return!1;if(this.field&&!_&&(S=this.pixelFromValue(H,y,S,L.getYAxisByField(H,this.field)),y=L.pixelFromTick(y,H.chart),_=!0),_){if(y>=T.cx0&&y<=T.cx1&&S>=T.cy0&&S<=T.cy1)return!0}else if(y>=T.x0&&y<=T.x1&&S>=Math.min(T.y0,T.y1)&&S<=Math.max(T.y0,T.y1))return!0;return!1},C.Drawing.prototype.setPoint=function(y,S,T,_){var L,H,P,N,v,x,M,D,Q,q,O,R,V,K,Y,G;L=this.stx,H=_||L.chart||{},e.U$Q(),P=H.maxTicks,N=P===void 0?100:P,v=H.dataSet,x=v===void 0?[]:v,M=-N,e.h7R(9);var J=e.D1M(21,20);D=x.length-J+N,Q=null,q=null,typeof S=="number"?Q=S:S.length>=8?q=S:Q=Number(S),(T||T===0)&&(e.h7R(0),this[e.E9E(y,"v")]=T),Q!==null?(O="tz",O+="o",Q=Math.max(Q,M),Q=Math.min(Q,D),R=L.dateFromTick(Q,_,!0),e.f4W(0),this[e.D1M(y,O)]=R.getTimezoneOffset(),e.h7R(0),this[e.D1M(y,"d")]=C.yyyymmddhhmmssmmm(R),e.f4W(0),this[e.E9E(y,"p")]=[Q,T]):q!==null&&(V="t",V+="z",V+="o",K=C.strToDateTime(q),!this["tzo"+y]&&this["tzo"+y]!==0&&(e.h7R(0),this[e.D1M(y,V)]=K.getTimezoneOffset()),e.h7R(0),this[e.D1M(y,"d")]=q,Y=this["tzo"+y]-K.getTimezoneOffset(),K.setMinutes(K.getMinutes()+Y),G=!1,this.name!="freeform"&&!C.ChartEngine.isDailyInterval(L.layout.interval)&&!K.getHours()&&!K.getMinutes()&&!K.getSeconds()&&!K.getMilliseconds()&&(G=!0),e.f4W(0),this[e.D1M(y,"p")]=[L.tickFromDate(C.yyyymmddhhmmssmmm(K),_,null,G),T])},C.Drawing.prototype.getLineColor=function(y,S){var T,_,L,H,P,N,v,x,M,D;if(T="a",T+="uto",e.e4i(),y||(y=this.color),_=this.stx,L=y,!S&&this.highlighted&&this.stx.editingDrawing!==this)L=_.getCanvasColor("stx_highlight_vector");else if(L==T&&(L=_.defaultColor,this.field)){for(H in _.layout.studies)if(P=_.layout.studies[H],N=P.outputs[P.outputMap[this.field]],N){L=N.color||N;break}for(H in _.chart.seriesRenderers){x=_.chart.seriesRenderers[H];for(var Q=0;Q<x.seriesParams.length;Q++){if(M=x.seriesParams[Q],D=M.field,!D&&!x.highLowBars&&(D=this.defaultPlotField||"Close"),M.symbol&&M.subField&&(D+="-->"+M.subField),this.field==D){L=M.color;break}M.field&&M.field==this.field.split("-->")[0]&&(v=M.color)}}v&&(L=v)}return L=="auto"&&(L=_.defaultColor),L},C.Drawing.prototype.valueFromPixel=function(y,S,T){var _,L,H;return _=this.stx.getTransformFunction(T||S.yAxis,!0),L=this.field,_&&S.chart.series[L]&&this.stx.updateTransformFunction((P,N,v,x)=>_(P,N,v,x,L),T,!0),H=this.stx.valueFromPixel(y,S,T),this.stx.updateTransformFunction(_,T,!0),H},C.Drawing.prototype.pixelFromValue=function(y,S,T,_){var L,H,P;return L=this.stx.getTransformFunction(_||y.yAxis),H=this.field,L&&y.chart.series[H]&&this.stx.updateTransformFunction((N,v,x,M)=>(e.U$Q(),L(N,v,x,M,H)),_),P=this.stx.pixelFromValueAdjusted(y,S,T,_),this.stx.updateTransformFunction(L,_),P},C.Drawing.prototype.boxToPixels=function(y,S,T,_){var L,H,P,N;return L=y.panels[S],H=this.stx.getTransformFunction(_||L.yAxis),P=this.field,H&&L.chart.series[P]&&this.stx.updateTransformFunction((v,x,M,D)=>(e.U$Q(),H(v,x,M,D,P)),_),e.U$Q(),N=C.convertBoxToPixels(y,S,T,_),this.stx.updateTransformFunction(H,_),N},C.Drawing.BaseTwoPoint=function(){this.p0=null,e.U$Q(),this.p1=null,this.color=""},C.inheritsFrom(C.Drawing.BaseTwoPoint,C.Drawing),C.Drawing.BaseTwoPoint.prototype.configs=[],C.Drawing.BaseTwoPoint.prototype.lineIntersection=function(y,S,T,_,L,H,P){var N,v;return L||(L=this.p0),H||(H=this.p1),N=this.stx,!(L&&H)||T.cx0===void 0?!1:(v={x0:L[0],x1:H[0],y0:L[1],y1:H[1]},P||(v=this.boxToPixels(N,this.panelName,v,N.getYAxisByField(N.panels[this.panelName],this.field))),C.boxIntersects(T.cx0,T.cy0,T.cx1,T.cy1,v.x0,v.y0,v.x1,v.y1,_))},C.Drawing.BaseTwoPoint.prototype.boxIntersection=function(y,S,T){var _,L,H,P,N,v,x,M,D,Q,q;return!(!this.p0||!this.p1||(_=T.x0,L=T.x1,H=T.y0,P=T.y1,N=T.cy0,v=T.cy1,_>Math.max(this.p0[0],this.p1[0])||L<Math.min(this.p0[0],this.p1[0]))||(x=this.field,M=this.panelName,D=this.stx,x&&(Q=D.panels[M],q=D.getYAxisByField(Q,x),H=this.valueFromPixel(N,Q,q),P=this.valueFromPixel(v,Q,q)),P>Math.max(this.p0[1],this.p1["1"-0])||H<Math.min(this.p0[1],this.p1[1])))},C.Drawing.BaseTwoPoint.prototype.accidentalClick=function(y,S){var T,_,L,H,P,N,v,x,M,D;if(T=this.stx,_=T.panels[this.panelName],L=T.pixelFromTick(this.p0[0],_.chart),H=T.pixelFromTick(y,_.chart),P=T.getYAxisByField(_,this.field),N=this.pixelFromValue(_,this.p0[0],this.p0["1"*1],P),v=this.pixelFromValue(_,y,S,P),e.f4W(9),x=Math.abs(e.E9E(H,L)),e.e4i(),e.h7R(9),M=Math.abs(e.E9E(v,N)),e.f4W(50),D=Math.sqrt(e.D1M(x,M,x,M)),D<10)return this.penDown=!1,T.undo(),!0},C.Drawing.BaseTwoPoint.prototype.click=function(y,S,T){var _,L;return this.copyConfig(),_=this.stx,L=_.panels[this.panelName],this.penDown?(this.accidentalClick(S,T)||(this.setPoint(1,S,T,L.chart),this.penDown=!1),!0):(this.setPoint(0,S,T,L.chart),this.penDown=!0,!1)},C.Drawing.BaseTwoPoint.prototype.adjust=function(){var y;y=this.stx.panels[this.panelName],y&&(e.U$Q(),this.setPoint(0,this.d0,this.v0,y.chart),this.setPoint(1,this.d1,this.v1,y.chart))},C.Drawing.BaseTwoPoint.prototype.move=function(y,S,T){if(!this.penDown){this.moving=!1;return}this.moving=!0,this.copyConfig(),this.p1=[S,T],e.U$Q(),this.render(y)},C.Drawing.BaseTwoPoint.prototype.measure=function(){e.U$Q();var y,S,T,_;y=this.stx,this.p0&&this.p1&&(y.setMeasure(this.p0[1],this.p1[1],this.p0[0],this.p1["0">>32],!0,this.name),S=y.controls.mSticky,T=S&&S.querySelector(".mStickyInterior"),T&&(_=[],_.push(y.translateIf(C.capitalize(this.name))),this.getYValue&&_.push(y.translateIf(this.field||y.defaultPlotField||"Close")),_.push(T.innerHTML),T.innerHTML=_.join("<br>")))},C.Drawing.BaseTwoPoint.prototype.reposition=function(y,S,T,_){var L,H,P;S&&(L=this.stx.panels[this.panelName],H=S.tick-T,P=S.value-_,S.action=="move"?(this.setPoint(0,S.p0[0]-H,S.p0[1]-P,L.chart),this.setPoint(1,S.p1[0]-H,S.p1[1]-P,L.chart),this.render(y)):S.action=="drag"&&(this[S.point]=[T,_],this.setPoint(0,this.p0[0],this.p0[1],L.chart),this.setPoint(1,this.p1["0"<<64],this.p1[1],L.chart),this.render(y)))},C.Drawing.BaseTwoPoint.prototype.drawDropZone=function(y,S,T,_,L){var H,P,N,v,x,M,D;H=this.stx.panels[this.panelName],H&&(P=this.stx,N=H.left,v=H.width,(_||_===0)&&(N=P.pixelFromTick(_,H.chart)),(L||L===0)&&(v=P.pixelFromTick(L,H.chart)),x=P.getYAxisByField(H,this.field),M=this.pixelFromValue(H,_,S,x),D=this.pixelFromValue(H,L,T,x),y.fillStyle="#008000",y.globalAlpha=.2,e.h7R(9),y.fillRect(N,M,e.D1M(v,N),e.D1M(D,M)),y.globalAlpha=1)},C.Drawing.BaseTwoPoint.prototype.valueOnDrawingAxis=function(y,S){var T,_,L,H;return T=this.stx,_=this.panelName,L=this.field,H=T.panels[_],this.valueFromPixel(T.pixelFromValueAdjusted(T.currentPanel,y,S),H,T.getYAxisByField(H,L))},C.Drawing.annotation=function(){this.name="annotation",this.arr=[],this.w=0,this.h=0,this.padding=10,this.text="",this.ta=null,this.border=!0,this.fontSize=0,this.font={},e.h7R(49),this.defaultWidth=e.D1M("25",0),this.whitespace=30,this.fontModifier=3},C.inheritsFrom(C.Drawing.annotation,C.Drawing.BaseTwoPoint),C.Drawing.annotation.prototype.getFontString=function(){var y,S,T;y="weigh",y+="t",S="1",S+="2",S+="px",this.fontDef={style:null,weight:null,size:S,family:null},T=this.stx.canvasStyle("stx_annotation"),T&&(T.fontStyle&&(this.fontDef.style=T.fontStyle),T.fontWeight&&(this.fontDef.weight=T.fontWeight),T.fontSize&&(this.fontDef.size=T.fontSize),T.fontFamily&&(this.fontDef.family=T.fontFamily)),this.font.style&&(this.fontDef.style=this.font.style),this.font.weight&&(this.fontDef.weight=this.font.weight),e.e4i(),this.font.size&&(this.fontDef.size=this.font.size),this.font.family&&(this.fontDef.family=this.font.family),this.fontString=["style",y,"size","lineHeight","family"].map(_=>(e.e4i(),this.fontDef[_])).join(" ")},C.Drawing.annotation.prototype.configs=["color","font"],C.Drawing.annotation.prototype.measure=function(){},C.Drawing.annotation.prototype.render=function(y){var S,T,_,L,H,P,N,v,x,M,D,Q,q,O,R,V;if(!this.ta&&(S=this.stx,T=S.panels[this.panelName],_=S.getYAxisByField(T,this.field),!(!T||this.field&&!_))){L=S.pixelFromTick(this.p0[0],T.chart),H=this.pixelFromValue(T,this.p0[0],this.p0[1],_),y.font=this.fontString,y.textBaseline="middle",P=L,N=H,v=this.w,x=this.getTextHeight(),M=this.getLineColor(),this.stem&&(this.stem.d?(D=S.pixelFromTick(this.stem.t),q=this.pixelFromValue(T,this.stem.t,this.stem.v,_),e.f4W(51),Q=e.E9E(v,P,2),e.h7R(51),O=e.D1M(x,N,2)):this.stem.x&&(D=P,q=N,P+=this.stem.x,N+=this.stem.y,e.h7R(51),Q=e.E9E(v,P,2),e.h7R(51),O=e.E9E(x,N,2)),y.beginPath(),this.borderColor?y.strokeStyle=this.borderColor:y.strokeStyle=M,y.moveTo(D,q),y.lineTo(Q,O),y.stroke()),R=y.lineWidth,this.highlighted?(S.canvasColor("stx_annotation_highlight_bg",y),e.f4W(9),y.fillRect(e.E9E(P,R),N-x/2-R-this.padding/2,v+2*R,x+2*R+this.padding)):this.fillColor?(y.fillStyle=this.getLineColor(this.fillColor,!0),e.f4W(52),y.fillRect(P,e.E9E(2,N,x),v,x)):this.stem&&(y.fillStyle=S.containerColor,e.f4W(52),y.fillRect(P,e.D1M(2,N,x),v,x)),this.borderColor&&(V="stx_highlight",V+="_vector",y.beginPath(),y.strokeStyle=this.highlighted?S.getCanvasColor(V):this.borderColor,e.h7R(9),y.rect(e.D1M(P,R),N-x/2-R+this.padding/2,v+2*R,x+2*R+this.padding),y.stroke()),this.highlighted?S.canvasColor("stx_annotation_highlight",y):y.fillStyle=M,e.f4W(9);var K=e.E9E(16,14);if(N+=this.padding/K,!this.ta)for(var Y=0;Y<this.arr.length;Y++){y.fillText(this.arr[Y],P+this.padding,N-x/("2"-0)+this.fontSize/2),e.h7R(9);var G=e.E9E(15,13);N+=this.fontSize+G}y.textBaseline="alphabetic"}},C.Drawing.annotation.prototype.onChange=function(y){},C.Drawing.annotation.prototype.edit=function(y,S){var T,_,L,H,P,N,v,x,M,D,Q,q,O,R,V,K,Y,G,J,Z,ee,X,ne,se,oe,ae,Ae,he,ge,ie,re;function de(Pe){return function(We){var Ge,je,Je,Oe,nt,Ze,Le,et,Ye,Ve,ct,ot,dt,xt,Ke,At,st,it,rt,$e,yt;if(Ge="n",Ge+="o",Ge+="ne",We)switch(je=We.keyCode,je){case 27:Pe.stx.undo();return}if(Je=Pe.stx,Oe=Pe.ta,nt=Pe.measureText(),Je.chart.context.font=Pe.fontString,Pe.fontSize=C.stripPX(Pe.fontDef.size),e.e4i(),Ze=Pe.getTextHeight()-Pe.padding,Pe.name==="annotation"?(Le="p",Le+="x",Oe.style.width=nt+Pe.whitespace+Le):Oe.scrollHeight>Oe.clientHeight?Oe.style.width=nt+Pe.whitespace+"px":(et="p",et+="x",e.h7R(0),Oe.style.width=e.D1M(et,nt)),e.h7R(0),Oe.style.height=e.E9E("px",Ze),Ye=parseInt(C.stripPX(Oe.style.top),10),Ve=Math.max(0,C.stripPX(Oe.style.left)),nt=Oe.clientWidth,Ze=Oe.clientHeight,Oe.focus(),Pe.border===!1&&(Oe.style.border=Ge),Ve+nt+100<Pe.stx.chart.canvasWidth){ct="inl",ct+="in",ct+="e-block",ot="p",ot+="x",dt="c",dt+="allou",dt+="t",Pe.name===dt?(xt="p",xt+="x",e.f4W(15),H.style.top=e.E9E(3,xt,Ye),e.f4W(15),P.style.top=e.D1M(3,"px",Ye)):(e.f4W(0),H.style.top=e.E9E("px",Ye),e.h7R(0),P.style.top=e.D1M("px",Ye)),e.f4W(53),H.style.left=e.D1M("px",0,Ve,"10",nt),H.style.display="inline-block",e.f4W(54);var qe=e.D1M(19,4150,16,1,13);P.style.left=Ve+nt+H.clientWidth+qe+ot,P.style.display=ct}else Ye+Ze+30<Pe.stx.chart.canvasHeight?(Ke="p",Ke+="x",At="p",At+="x",st="p",st+="x",e.f4W(55),H.style.top=e.E9E(Ze,Ye,st,10),e.h7R(55),P.style.top=e.E9E(Ze,Ye,"px",10),e.h7R(0),H.style.left=e.D1M(At,Ve),H.style.display="inline-block",P.style.left=Ve+H.clientWidth+Ke,P.style.display="inline-block"):(it="inline",it+="-block",rt="p",rt+="x",$e="p",$e+="x",yt="p",yt+="x",e.f4W(6),H.style.top=e.E9E(35,Ye,"px"),e.h7R(6),P.style.top=e.D1M(35,Ye,yt),e.f4W(0),H.style.left=e.E9E($e,Ve),H.style.display="inline-block",P.style.left=Ve+H.clientWidth+rt,P.style.display=it)}}T="bl",T+="oc",T+="k",_="a";function ce(Pe){return e.e4i(),function(We){Pe.manageTouchAndMouse&&C.ChartEngine.drawingLine&&Pe.mouseup(We)}}if(_+="nnotation",L=this.stx.panels[this.panelName],!L)return;H=this.stx.controls.annotationSave,P=this.stx.controls.annotationCancel;function fe(Pe){return e.e4i(),function(We){var Ge;!Pe.ta||!Pe.ta.value||(Pe.text=Pe.ta.value,Ge=Pe.stx,Ge.editingAnnotation=!1,Pe.adjust(),Ge.drawingSnapshot?Ge.undoStamp(C.shallowClone(Ge.drawingSnapshot),Ge.exportDrawings()):(C.ChartEngine.completeDrawing(Ge),Ge.addDrawing(Pe)),e.e4i(),Ge.undo(),Ge.changeOccurred("vector"))}}if(!H||!P)return;if(N=this.stx,v=this.ta,N.editingAnnotation=!0,N.undisplayCrosshairs(),N.openDialog||(N.openDialog=[]),N.openDialog.includes(_)||N.openDialog.push("annotation"),!v){x="ab",x+="solute",M="pl",M+="aceholder",D="w",D+="r",D+="a",D+="p",Q="stx_annot",Q+="ation",q="TE",q+="XTAREA",v=this.ta=document.createElement(q),v.className=Q,v.onkeyup=de(this),v.onmouseup=ce(N),v.setAttribute(D,"hard"),C.isIOS7or8&&v.setAttribute(M,"Enter Text"),N.chart.container.appendChild(v),v.style.position=x,e.f4W(0);var me=e.E9E(1,0);v.style.padding=`${this.padding-me}px ${this.padding}px`,v.value=this.text,C.touchDevice&&(v.ontouchstart=function(Pe){e.U$Q(),Pe.stopPropagation()})}function ve(Pe){N.startClip(L.name),e.U$Q(),O.render(Pe),N.endClip()}O=this,v.oninput=function(Pe){Pe.target.value=N.emojify(Pe.target.value),Pe.inputType!="historyUndo"&&Pe.inputType!="historyRedo"&&O.onChange(Pe)},v.style.font=this.fontString,this.color&&(R="tra",R+="ns",R+="par",R+="ent",this.color==R||this.color=="auto"?(V=getComputedStyle(v),V&&C.isTransparent(V.backgroundColor)?v.style.color=this.getLineColor():(K="#",K+="0",K+="0",K+="0",v.style.color=K)):v.style.color=this.color),Y=this.getTextHeight(),G=isNaN(Y)?this.defaultHeight:Y/2,J=N.pixelFromTick(this.p0[0],L.chart),e.h7R(21);var pe=e.E9E(3,2,2);Z=this.pixelFromValue(L,this.p0[0],this.p0[pe],N.getYAxisByField(L,this.field))-G,ee=83797352,X=1194851345,ne=2;for(var be="1">>0;e.V7r(be.toString(),be.toString().length,83921)!==ee;be++){e.h7R(0);var Se=e.D1M(765,48);se=J-Se<N.chart.canvasRight,e.h7R(36);var Ee=e.E9E(4,5,39,3,2);oe=Z*Ee<=N.chart.canvasHeight,e.f4W(56),ne+=e.E9E(64,"2")}if(e.V7r(ne.toString(),ne.toString().length,82522)!==X){e.f4W(17);var Ie=e.D1M(6200,9,5881);se=J*Ie>N.chart.canvasRight,e.f4W(57);var Qe=e.E9E(3,18,9,63,474);oe=Z%Qe>=N.chart.canvasHeight}e.h7R(9);var Ne=e.D1M(154,14);se=J+Ne>N.chart.canvasRight,e.f4W(58);var De=e.D1M(66,10,600);if(oe=Z+De>N.chart.canvasHeight,se){e.f4W(44);var Re=e.E9E(3e3,3,8828,12,8);J=N.chart.canvasRight-Re}if(oe&&(e.f4W(9),Z=e.E9E(Z,60)),e.h7R(0),v.style.left=e.D1M("px",J),this.name==="callout"){e.h7R(59);var _e=e.D1M(14,34,14,682,12);v.style.top=Z-this.padding/_e+"px"}else v.style.top=Z-this.padding+"px";this.repositionTextArea&&this.repositionTextArea(v),v!==H.ta&&(C.safeClickTouch(H,fe(this)),H.ta=v),v!==P.ta&&(C.safeClickTouch(P,Ue(this)),P.ta=v),de(this)();function Ue(Pe){return function(We){e.U$Q(),Pe.stx.undo()}}if(y=N.chart.tempCanvas.context,C.clearCanvas(y.canvas,N),y.canvas.style.display=T,S?(N.drawingSnapshot=N.exportDrawings(),this.hidden=!0,N.activeDrawing=this,C.ChartEngine.drawingLine=!0,this.highlighted=!1,ve(y),this.edit(y),N.draw()):ve(y),C.isAndroid&&!C.is_chrome&&!C.isFF){this.priorBottom=N.container.style.bottom,ae=400,e.h7R(9);var He=e.E9E(1900,1800);Ae=N.resolveY(Z)+He,he=N.container.ownerDocument.defaultView,Ae>C.pageHeight(he)-ae&&(ge="p",ge+="x",ie=C.pageHeight(he)-Ae,e.h7R(9),re=e.E9E(ae,ie),e.f4W(0),N.chart.container.style.bottom=e.E9E(ge,re))}},C.Drawing.annotation.prototype.click=function(y,S,T){var _;if(!(this.stx.overXAxis||this.stx.overYAxis))return _=this.stx.panels[this.panelName],this.copyConfig(),this.setPoint(0,S,T,_.chart),this.adjust(),this.edit(y),e.U$Q(),!1},C.Drawing.annotation.prototype.reposition=function(y,S,T,_){var L,H,P;S&&(L=this.stx.panels[this.panelName],H=S.tick-T,P=S.value-_,this.setPoint(0,S.p0[0]-H,S.p0[1]-P,L.chart),this.render(y))},C.Drawing.annotation.prototype.intersected=function(y,S,T){var _,L,H,P,N,v,x,M,D,Q;if(_=this.stx,L=_.panels[this.panelName],!this.p0)return null;H=_.pixelFromTick(this.p0[0],L.chart),P=_.getYAxisByField(L,this.field),N=this.getTextHeight(),e.h7R(60);var q=e.E9E(17,6,2,1,103);e.h7R(21);var O=e.E9E(5,1,6);return v=this.pixelFromValue(L,this.p0[0],this.p0[q],P)-N/O,x=H+this.w,e.h7R(0),M=e.E9E(N,v),this.stem&&this.stem.x&&(H+=this.stem.x,x+=this.stem.x,v+=this.stem.y,M+=this.stem.y),D=_.pixelFromTick(y,L.chart),Q=_.pixelFromValueAdjusted(L,y,S),D+T.r>=H&&D-T.r<=x&&Q+T.r>=v&&Q-T.r<=M?(this.highlighted=!0,{p0:C.clone(this.p0),tick:y,value:this.valueOnDrawingAxis(y,S)}):!1},C.Drawing.annotation.prototype.abort=function(){var y,S,T;y=this.stx,S=y.controls.annotationSave,T=y.controls.annotationCancel,S&&(S.style.display="none"),T&&(T.style.display="none"),this.ta&&y.chart.container.removeChild(this.ta),e.e4i(),this.ta=null,y.openDialog&&(y.openDialog=y.openDialog.filter(_=>(e.U$Q(),e.f4W(61),e.D1M(_,"annotation")))),y.openDialog.length||(y.openDialog=""),y.showCrosshairs(),y.editingAnnotation=!1,C.clearCanvas(y.chart.tempCanvas,y),C.isAndroid&&!C.is_chrome&&!C.isFF&&(y.chart.container.style.bottom=this.priorBottom),C.fixScreen()},C.Drawing.annotation.prototype.reconstruct=function(y,S){var T;T="s",T+="i",T+="z",T+="e",this.stx=y,this.color=S.col,this.panelName=S.pnl,this.d0=S.d0,this.tzo0=S.tzo0,this.v0=S.v0,this.field=S.fld,this.text=y.escapeOnSerialize?decodeURIComponent(S.text):S.text,this.stem=S.stem,this.borderColor=S.bc,this.fillColor=S.bg,this.lineWidth=S.lw,this.pattern=S.ptrn,this.font=C.replaceFields(S.fnt,{st:"style",sz:T,wt:"weight",fl:"family"}),this.font||(this.font={}),this.hidden=!!S.hdn,this.permanent=!!S.prm,this.adjust()},C.Drawing.annotation.prototype.serialize=function(){var y,S;return y={name:this.name,pnl:this.panelName,col:this.color,d0:this.d0,tzo0:this.tzo0,v0:this.v0,fld:this.field,text:this.stx.escapeOnSerialize?encodeURIComponent(this.text):this.text,hdn:this.hidden?1:0,prm:this.permanent?1:0},this.font&&(S=C.removeNullValues(C.replaceFields(this.font,{style:"st",size:"sz",weight:"wt",family:"fl"})),C.isEmpty(S)||(y.fnt=S)),this.stem&&(y.stem={d:this.stem.d,v:this.stem.v,x:this.stem.x,y:this.stem.y}),this.borderColor&&(y.bc=this.borderColor),this.fillColor&&(y.bg=this.fillColor),this.lineWidth&&(y.lw=this.lineWidth),this.pattern&&(y.ptrn=this.pattern),y},C.Drawing.annotation.prototype.setTextareaProps=function(){var y,S,T,_;if(y=this.stx,S=y.panels[this.panelName],!!S){if(T=this.ta?this.ta.value:this.text,this.arr=T.split(`
`),_=this.measureText(),y.editingAnnotation&&this===y.activeDrawing&&this.name==="annotation"&&(_=Math.max(_,2*this.defaultWidth)),this.fontSize=C.stripPX(this.fontDef.size),this.name==="annotation")this.w=_+this.whitespace+this.padding;else{e.h7R(40);var L=e.D1M(11,2,34,6);e.h7R(42);var H=e.D1M(16,17,32,0,8);this.w=_+(this.padding+L)*H}this.stem&&this.stem.d&&(this.stem.t=y.tickFromDate(this.stem.d,S.chart))}},C.Drawing.annotation.prototype.measureText=function(){var y,S,T;y=this.stx,this.getFontString(),y.chart.context.font=this.fontString,S=0;for(var _=0;_<this.arr.length;_++)T=y.chart.context.measureText(this.arr[_]).width,T>S&&(S=T);if(S===0){e.h7R(62);var L=e.D1M(4,14,3,0);S=L*this.defaultWidth}return e.U$Q(),S},C.Drawing.annotation.prototype.getLineHeight=function(){return this.fontSize+this.fontModifier},C.Drawing.annotation.prototype.getTextHeight=function(){var y;y=0,C.touchDevice&&(y+=5),e.f4W(63);var S=e.E9E(7,18,16,1,141);return(this.arr.length+S)*this.getLineHeight()+y},C.Drawing.annotation.prototype.adjust=function(){var y,S,T;y=this.stx,S=y.panels[this.panelName],S&&(this.setPoint(0,this.d0,this.v0,S.chart),this.setTextareaProps(),this===y.activeDrawing&&y.editingAnnotation&&(T=y.chart.tempCanvas.context,C.clearCanvas(T.canvas,y),this.edit(T)))},C.Drawing.segment=function(){var y,S,T;y=2124184689,e.e4i(),S=4101610,e.h7R(9),T=e.D1M("2",0);for(var _=1;e.V7r(_.toString(),_.toString().length,58223)!==y;_++)this.name="segment",T+=2;e.R7z(T.toString(),T.toString().length,18683)!==S&&(this.name="")},C.inheritsFrom(C.Drawing.segment,C.Drawing.BaseTwoPoint),C.Drawing.segment.prototype.getDateFromTick=function(y){e.U$Q();var S,T,_;return S=this.stx,T=S.panels[this.panelName],_=S.dateFromTick(y,T.chart,!0),_=this.convertDate(_),_},C.Drawing.segment.prototype.convertDate=function(y){var S,T,_;return S=this.stx,C.ChartEngine.isDailyInterval(S.layout.interval)?y.setHours(0,0,0,0):(T=y.getSeconds()*1e3+y.getMilliseconds(),F.Date&&S.displayZone&&(_=new F.Date(y.getTime(),S.displayZone),y=new Date(_.getFullYear(),_.getMonth(),_.getDate(),_.getHours(),_.getMinutes()),y=new Date(y.getTime()+T))),y},C.Drawing.segment.prototype.formatDate=function(y){var S,T,_;return S=this.stx,T=S.panels[this.panelName],_=C.mmddhhmm(C.yyyymmddhhmm(y)),T.chart.xAxis.formatter?_=T.chart.xAxis.formatter(y,this.name,null,null,_):this.stx.internationalizer&&(_=C.displayableDate(S,S.chart,y)),_},C.Drawing.segment.prototype.render=function(y){var S,T,_,L,H,P,N,v,x,M,D,Q,q,O,R,V,K;S="sol",S+="i",S+="d",this.p1&&(T=this.stx,_=T.panels[this.panelName],L=T.getYAxisByField(_,this.field),!(!_||this.field&&!L&&!this.spanPanels)&&(L=L||_.yAxis,H=T.pixelFromTick(this.p0[0],_.chart),P=T.pixelFromTick(this.p1[0],_.chart),N=this.pixelFromValue(_,this.p0[0],this.p0[1],L),v=this.pixelFromValue(_,this.p1[0],this.p1[1],L),x=this.lineWidth,M=this.getLineColor(),D={pattern:this.pattern,lineWidth:x},D.pattern=="none"&&(D.pattern=S),T.plotLine(H,P,N,v,M,this.name,y,_,D),this.axisLabel&&!this.repositioner&&(Q="hor",Q+="izo",Q+="n",Q+="tal",this.name==Q?(T.endClip(),q=this.p0[1],O=this.stx.getTransformFunction(L),O&&(q=O(T,_.chart,q)),L.priceFormatter?q=L.priceFormatter(T,_,q):q=T.formatYAxisPrice(q,_,null,L),T.createYAxisLabel(_,q,N,M,null,null,L),T.startClip(_.name)):this.name=="vertical"&&this.p0[0]>=0&&!T.chart.xAxis.noDraw&&(!this.spanPanels||_.yAxis.bottom!==_.bottom)&&(this.d0?(R=C.strToDateTime(this.d0),R=this.convertDate(R)):R=this.getDateFromTick(this.p0[0]),T.endClip(),T.createXAxisLabel({panel:_,txt:this.formatDate(R),x:H,backgroundColor:M,color:null,pointed:!0,padding:2}),T.startClip(_.name))),this.highlighted&&this.name!="horizontal"&&this.name!="vertical"&&(V=this.highlighted=="p0",K=this.highlighted=="p1",this.littleCircle(y,H,N,V),this.littleCircle(y,P,v,K))))},C.Drawing.segment.prototype.abort=function(){this.stx.setMeasure(null,null,null,null,!1)},C.Drawing.segment.prototype.intersected=function(y,S,T){var _,L,H,P,N;if(_="vert",_+="ical",e.U$Q(),!this.p0||!this.p1)return null;if(L=this.name,L!="horizontal"&&L!="vertical"&&L!="gartley"){H={0:this.p0,1:this.p1};for(var v in H)if(this.pointIntersection(H[v][0],H[v][1],T))return e.h7R(0),this.highlighted=e.E9E(v,"p"),{action:"drag",point:"p"+v}}return(L=="horizontal"||L==_)&&(L="line"),P=this.lineIntersection(y,S,T,L),P?(N="m",N+="o",N+="v",N+="e",this.highlighted=!0,{action:N,p0:C.clone(this.p0),p1:C.clone(this.p1),tick:y,value:this.valueOnDrawingAxis(y,S)}):null},C.Drawing.segment.prototype.configs=["color","lineWidth","pattern"],C.Drawing.segment.prototype.copyConfig=function(y){var S,T;S="s",S+="ol",S+="id",T="n",T+="o",T+="ne",C.Drawing.copyConfig(this,y),this.pattern==T&&this.configs.indexOf("fillColor")==-1&&(this.pattern=S)},C.Drawing.segment.prototype.reconstruct=function(y,S){this.stx=y,this.color=S.col,this.panelName=S.pnl,this.pattern=S.ptrn,this.lineWidth=S.lw,this.d0=S.d0,this.d1=S.d1,this.tzo0=S.tzo0,this.tzo1=S.tzo1,this.v0=S.v0,this.v1=S.v1,this.field=S.fld,this.adjust()},C.Drawing.segment.prototype.serialize=function(){return e.e4i(),{name:this.name,pnl:this.panelName,col:this.color,ptrn:this.pattern,lw:this.lineWidth,d0:this.d0,d1:this.d1,tzo0:this.tzo0,tzo1:this.tzo1,v0:this.v0,v1:this.v1,fld:this.field}},C.Drawing.line=function(){var y;y="l",y+="i",y+="n",e.U$Q(),y+="e",this.name=y},C.inheritsFrom(C.Drawing.line,C.Drawing.segment),C.Drawing.line.prototype.dragToDraw=!1,C.Drawing.line.prototype.click=function(y,S,T){var _;if(_=this.stx.panels[this.panelName],!!_)return this.copyConfig(),this.penDown?(this.accidentalClick(S,T)||(this.setPoint(1,S,T,_.chart),this.penDown=!1),!0):(this.setPoint(0,S,T,_.chart),this.penDown=!0,!1)},C.Drawing.line.prototype.reconstruct=function(y,S){this.stx=y,this.color=S.col,this.panelName=S.pnl,this.pattern=S.ptrn,this.lineWidth=S.lw,this.v0=S.v0,this.v1=S.v1,this.d0=S.d0,this.d1=S.d1,this.tzo0=S.tzo0,this.tzo1=S.tzo1,this.field=S.fld,this.hidden=!!S.hdn,this.permanent=!!S.prm,this.adjust()},C.Drawing.line.prototype.serialize=function(){return e.e4i(),{name:this.name,pnl:this.panelName,col:this.color,ptrn:this.pattern,lw:this.lineWidth,d0:this.d0,d1:this.d1,tzo0:this.tzo0,tzo1:this.tzo1,v0:this.v0,v1:this.v1,fld:this.field,hdn:this.hidden?1:0,prm:this.permanent?1:0}},C.Drawing.line.prototype.adjust=function(){var y;y=this.stx.panels[this.panelName],y&&(this.setPoint(0,this.d0,this.v0,y.chart),this.setPoint(1,this.d1,this.v1,y.chart),C.ChartEngine.isDailyInterval(this.stx.layout.interval)&&this.d0B&&(this.setPoint(0,this.d0B,this.v0B,y.chart),this.setPoint(1,this.d1B,this.v1B,y.chart)))},C.Drawing.horizontal=function(){this.name="horizontal"},C.inheritsFrom(C.Drawing.horizontal,C.Drawing.segment),C.Drawing.horizontal.prototype.dragToDraw=!1,C.Drawing.horizontal.prototype.measure=function(){},C.Drawing.horizontal.prototype.click=function(y,S,T){var _;if(_=this.stx.panels[this.panelName],!!_)return this.copyConfig(),this.setPoint(0,S,T,_.chart),!0},C.Drawing.horizontal.prototype.intersected=function(y,S,T){var _,L,H;return this.lineIntersection(y,S,T,"line")?(_=this.stx,L=_.chart.dataSet.length,H=this.p0[1],this.highlighted=!0,{action:"move",p0:[L-2,H],p1:[L-1,H],tick:y,value:this.valueOnDrawingAxis(y,S)}):(e.e4i(),null)},e.U$Q(),C.Drawing.horizontal.prototype.reconstruct=function(y,S){this.stx=y,this.color=S.col,this.panelName=S.pnl,this.pattern=S.ptrn,this.lineWidth=S.lw,this.v0=S.v0,this.d0=S.d0,this.tzo0=S.tzo0,this.axisLabel=S.al,this.field=S.fld,this.adjust()},C.Drawing.horizontal.prototype.serialize=function(){e.U$Q();var y;return y={name:this.name,pnl:this.panelName,col:this.color,ptrn:this.pattern,lw:this.lineWidth,v0:this.v0,d0:this.d0,tzo0:this.tzo0,al:this.axisLabel,fld:this.field},y},C.Drawing.horizontal.prototype.adjust=function(){var y;if(y=this.stx.panels[this.panelName],!!y){this.setPoint(0,this.d0,this.v0,y.chart),e.f4W(64);var S=e.E9E(1,11,111);e.f4W(1),this.p1=[this.p0[0]+S,this.p0[e.E9E(1,"1")]]}},C.Drawing.horizontal.prototype.configs=["color","lineWidth","pattern","axisLabel"],C.Drawing.vertical=function(){var y;y="ver",e.e4i(),y+="ti",y+="c",y+="al",this.name=y,this.spanPanels=!1},C.inheritsFrom(C.Drawing.vertical,C.Drawing.horizontal),C.Drawing.vertical.prototype.measure=function(){},C.Drawing.vertical.prototype.configs=["color",r,"pattern","axisLabel","spanPanels"],C.Drawing.vertical.prototype.intersected=C.Drawing.segment.prototype.intersected,C.Drawing.vertical.prototype.adjust=function(){var y;if(y=this.stx.panels[this.panelName],!!y){this.setPoint(0,this.d0,this.v0,y.chart),e.e4i(),e.f4W(65);var S=e.D1M(721,20,18,0,2);e.f4W(66);var T=e.E9E(395,14,19,4,16);this.p1=[this.p0[0],this.p0[S]+T]}},w=C.Drawing.vertical.prototype,U=w.reconstruct,B=w.serialize,k=w.reposition,C.Drawing.vertical.prototype.reconstruct=function(y,S){U.call(this,y,S),this.spanPanels=S.sp},C.Drawing.vertical.prototype.serialize=function(){var y;return y=B.call(this),y.sp=this.spanPanels,y},C.Drawing.vertical.prototype.reposition=function(y,S,T,_){e.U$Q(),this.spanPanels?(this.originPanelName=this.panelName,Object.values(this.stx.panels).forEach(L=>{this.panelName=L.name,k.call(this,y,S,T,_)}),this.panelName=this.originPanelName):k.call(this,y,S,T,_)},C.Drawing.measure=function(){e.U$Q(),this.name="measure"},C.inheritsFrom(C.Drawing.measure,C.Drawing.segment),C.Drawing.measure.prototype.click=function(y,S,T){return this.copyConfig(),this.penDown?(this.stx.undo(),this.penDown=!1,!0):(this.p0=[S,T],this.penDown=!0,!1)},C.Drawing.rectangle=function(){e.U$Q();var y;y="re",y+="cta",y+="ngl",y+="e",this.name=y},C.inheritsFrom(C.Drawing.rectangle,C.Drawing.BaseTwoPoint),C.Drawing.rectangle.prototype.render=function(y){var S,T,_,L,H,P,N,v,x,M,D,Q,q,O,R,V,K,Y;S="s",S+="egmen",S+="t",T="seg",T+="me",T+="nt",this.p1&&(_=this.stx,L=_.panels[this.panelName],H=_.getYAxisByField(L,this.field),!(!L||this.field&&!H)&&(P=_.pixelFromTick(this.p0[0],L.chart),N=_.pixelFromTick(this.p1[0],L.chart),v=this.pixelFromValue(L,this.p0[0],this.p0[1],H),x=this.pixelFromValue(L,this.p1[0],this.p1[1],H),M=Math.round(Math.min(P,N))+ +"0.5",D=Math.min(v,x),Q=Math.max(P,N)-M,q=Math.max(v,x)-D,O=this.getLineColor(),R=this.fillColor,R&&!C.isTransparent(R)&&(y.beginPath(),y.rect(M,D,Q,q),y.fillStyle=this.getLineColor(R,!0),y.globalAlpha=+"0.2",y.fill(),y.closePath(),y.globalAlpha=1),V={pattern:this.pattern,lineWidth:this.lineWidth},this.highlighted&&V.pattern=="none"&&(V.pattern="solid",V.lineWidth==.1&&(V.lineWidth=1)),_.plotLine(P,N,v,v,O,T,y,L,V),e.f4W(9),_.plotLine(N,N,e.D1M(v,.5),e.D1M(.5,x,e.h7R(0)),O,"segment",y,L,V),_.plotLine(N,P,x,x,O,S,y,L,V),e.h7R(0),_.plotLine(P,P,e.D1M(.5,x),e.D1M(v,.5,e.h7R(9)),O,"segment",y,L,V),this.highlighted&&(K=this.highlighted=="p0",Y=this.highlighted=="p1",this.littleCircle(y,P,v,K),this.littleCircle(y,N,x,Y))))},C.Drawing.rectangle.prototype.intersected=function(y,S,T){var _;if(!this.p0||!this.p1)return null;_={0:this.p0,1:this.p1},e.U$Q();for(var L in _)if(this.pointIntersection(_[L][0],_[L]["1">>32],T))return e.f4W(0),this.highlighted=e.D1M(L,"p"),{action:"drag",point:"p"+L};return this.boxIntersection(y,S,T)?(this.highlighted=!0,{action:"move",p0:C.clone(this.p0),p1:C.clone(this.p1),tick:y,value:this.valueOnDrawingAxis(y,S)}):null},C.Drawing.rectangle.prototype.configs=["color",n,"lineWidth","pattern"],C.Drawing.rectangle.prototype.reconstruct=function(y,S){this.stx=y,this.color=S.col,this.fillColor=S.fc,this.panelName=S.pnl,this.pattern=S.ptrn,this.lineWidth=S.lw,this.d0=S.d0,this.d1=S.d1,this.tzo0=S.tzo0,e.U$Q(),this.tzo1=S.tzo1,this.v0=S.v0,this.v1=S.v1,this.field=S.fld,this.hidden=!!S.hdn,this.permanent=!!S.prm,this.adjust()},C.Drawing.rectangle.prototype.serialize=function(){return{name:this.name,pnl:this.panelName,col:this.color,fc:this.fillColor,ptrn:this.pattern,lw:this.lineWidth,d0:this.d0,d1:this.d1,tzo0:this.tzo0,tzo1:this.tzo1,v0:this.v0,v1:this.v1,fld:this.field,hdn:this.hidden?1:0,prm:this.permanent?1:0}},C.Drawing.shape=function(){var y;y="s",y+="ha",y+="pe",this.name="shape",e.U$Q(),this.radians=0,this.a=0,this.rotating=!1,this.textMeasure=!1,this.configurator=y,this.dimension=[0,0],this.points=[]},C.inheritsFrom(C.Drawing.shape,C.Drawing.BaseTwoPoint),C.Drawing.shape.prototype.setRotationOnInitialDraw=!1,C.Drawing.shape.prototype.measure=function(){},C.Drawing.shape.prototype.render=function(y){var S,T,_,L,H,P,N,v,x,M,D,Q,q,O,R,V,K,Y,G,J,Z,ee,X,ne,se,oe,ae,Ae,he,ge;if(S="n",S+="one",!!this.points.length&&(T=this.stx,_=T.panels[this.panelName],L=T.getYAxisByField(_,this.field),!(!_||this.field&&!L))){if(H=T.pixelFromTick(this.p0[0],_.chart),P=this.pixelFromValue(_,this.p0["0"*1],this.p0[1],L),this.p1){if(N=T.pixelFromTick(this.p1["0">>32],_.chart),v=this.pixelFromValue(_,this.p1[0],this.p1[1],L),y.globalAlpha=.5,y.fillStyle=this.getLineColor(),this.rotating){if(e.h7R(67),this.radians=Math.atan(e.D1M(P,v,N,H)),N<H)this.radians+=Math.PI;else if(v<P){e.h7R(6);var ie=e.E9E(4,0,6);this.radians+=ie*Math.PI}e.h7R(59);var re=e.D1M(2,80,20,1642,12);e.f4W(31);var de=e.E9E(20,15);this.a=parseInt((this.radians*36/Math.PI).toFixed(0),re)*de,this.a%=360,e.f4W(68);var ce=e.E9E(3413,12,3600,5);this.radians=this.a*Math.PI/ce,this.textMeasure&&y.fillText(this.a+"°",N+10,v+10)}else this.penDown&&(x="x",x+=",",this.sx=Math.max(1,parseFloat(Math.abs(2*(N-H)/this.dimension[0]).toFixed(1))),N<H&&(this.sx*=-1),this.sy=Math.max(1,parseFloat(Math.abs(2*(v-P)/this.dimension[1]).toFixed(1))),v<P&&(this.sy*=-1),this.textMeasure&&y.fillText(this.sx+x+this.sy+"x",N+this.sx+5,v+this.sy+5));y.globalAlpha=1}typeof this.sx>"u"&&(this.sx=this.sy=1),M=this.lineWidth,M||(M=1.1),D={pattern:this.pattern,lineWidth:M},this.highlighted&&D.pattern==S&&(D.pattern="solid",D.lineWidth==.1&&(D.lineWidth=1)),Q=this.getLineColor(),this.highlighted&&M==.1&&(M=1.1),q=this.fillColor,e.f4W(6);var fe=e.E9E(4,0,6);for(M/=Math.abs(this.sx*this.sy)*fe/(Math.abs(this.sx)+Math.abs(this.sy)),y.save(),y.translate(H,P),y.rotate(this.radians),y.scale(this.sx,(L||_.yAxis).flipped?-this.sy:this.sy),V={x:(this.dimension[0]-1)/2,y:(this.dimension[1]-1)/("2">>0)},O=0;O<this.points.length;O++){for(y.beginPath(),R=0;R<this.points[O].length;R++)X=this.points,X[O][R]=="M"?(K=X[O][++R]-V.x,Y=X[O][++R]-V.y,y.moveTo(K,Y)):X[O][R]=="L"?(K=X[O][++R]-V.x,Y=X[O][++R]-V.y,y.lineTo(K,Y)):X[O][R]=="Q"?(G=X[O][++R]-V.x,Z=X[O][++R]-V.y,K=X[O][++R]-V.x,Y=X[O][++R]-V.y,y.quadraticCurveTo(G,Z,K,Y)):X[O][R]=="B"&&(G=X[O][++R]-V.x,Z=X[O][++R]-V.y,J=X[O][++R]-V.x,ee=X[O][++R]-V.y,K=X[O][++R]-V.x,Y=X[O][++R]-V.y,y.bezierCurveTo(G,Z,J,ee,K,Y));y.closePath(),q&&!C.isTransparent(q)&&(y.fillStyle=this.getLineColor(q,!0),y.fill()),Q&&this.pattern!="none"&&(y.strokeStyle=Q,y.lineWidth=M,y.setLineDash&&(y.setLineDash(C.borderPatternToArray(M,this.pattern)),y.lineDashOffset=0),y.stroke())}if(y.restore(),y.save(),y.translate(H,P),y.rotate(this.radians),this.highlighted)ne=this.highlighted=="p0",se=this.highlighted=="p1",oe=this.highlighted=="p2",this.littleCircle(y,0,0,ne),this.mover(y,0,0,ne),this.littleCircle(y,this.sx*this.dimension[0]/2,this.sy*this.dimension[1]/2,se),this.resizer(y,this.sx*this.dimension[0]/("2"*1),this.sy*this.dimension[1]/2,se),this.littleCircle(y,this.sx*this.dimension[0]/("2"<<0),0,oe),this.rotator(y,this.sx*this.dimension[0]/2,0,oe),y.globalAlpha=.5,y.fillStyle=this.getLineColor(null,!1),this.textMeasure&&(ae="x",ae+=",",y.fillText(this.sx+ae+this.sy+"x",this.sx*this.dimension["0"|0]/2+12,this.sy*this.dimension[1]/2+5),y.fillText(this.a+"°",this.sx*this.dimension["0"-0]/2+12,5)),y.globalAlpha=1;else if(this.penDown)if(this.rotating)this.rotator(y,this.sx*this.dimension[0]/2,0,!0);else{Ae=763516474,he=144553858,e.h7R(56),ge=e.D1M(0,"2");for(var me=1;e.R7z(me.toString(),me.toString().length,90050)!==Ae;me++)this.resizer(y,this.sx*this.dimension[0]/2,this.sy*this.dimension[1]/2,!0),ge+=2;e.R7z(ge.toString(),ge.toString().length,99963)!==he&&this.resizer(y,this.sx+this.dimension["3"*1]-3,(this.sy-this.dimension[7])*3,!1)}y.restore()}},C.Drawing.shape.prototype.reposition=function(y,S,T,_){var L,H,P,N,v,x,M,D,Q;if(S){if(e.e4i(),L=this.stx,H=L.panels[this.panelName],S.action=="move")P=S.tick-T,N=S.value-_,this.setPoint(0,S.p0[0]-P,S.p0[1]-N,H.chart),this.render(y);else if(v=L.getYAxisByField(H,this.field),x=L.pixelFromTick(this.p0[0],H.chart),M=this.pixelFromValue(H,this.p0[0],this.p0[1],v),D=L.pixelFromTick(T,H.chart),Q=this.pixelFromValue(H,T,_,v),S.action=="scale")this[S.point]=[T,_],this.sx=parseFloat((((D-x)*Math.cos(this.radians)+(Q-M)*Math.sin(this.radians))/(this.dimension[0]/2)).toFixed(1)),Math.abs(this.sx)<1&&(this.sx/=Math.abs(this.sy)),this.sy=parseFloat((((Q-M)*Math.cos(this.radians)-(D-x)*Math.sin(this.radians))/(this.dimension[1]/2)).toFixed("1">>0)),Math.abs(this.sy)<1&&(this.sy/=Math.abs(this.sy)),this.render(y);else if(S.action=="rotate"){if(this[S.point]=[T,_],e.h7R(67),this.radians=Math.atan(e.D1M(M,Q,D,x)),D<x)this.radians+=Math.PI;else if(Q<M){e.f4W(69);var q=e.D1M(34,11,7,90,68);this.radians+=("2">>q)*Math.PI}e.f4W(15);var O=e.D1M(7,2,1);e.h7R(70);var R=e.E9E(17,1,4,17);if(this.a=parseInt((this.radians*36/Math.PI).toFixed(0),O)*R,this.sx<0){e.h7R(71);var V=e.D1M(4,720,7,1080);this.a=this.a+V}this.a%=360,e.f4W(9);var K=e.D1M(188,8);this.radians=this.a*Math.PI/K,this.render(y)}}},C.Drawing.shape.prototype.intersected=function(y,S,T){var _,L,H,P,N,v,x,M,D,Q,q,O,R,V,K,Y,G,J,Z,ee,X,ne;if(_=this.stx,!this.p0)return null;if(_.repositioningDrawing==this&&_.repositioningDrawing.repositioner)return _.repositioningDrawing.repositioner;L=_.panels[this.panelName],H=_.getYAxisByField(L,this.field),P=_.pixelFromTick(this.p0[0],L.chart),N=this.pixelFromValue(L,this.p0[0],this.p0[1],H),v=_.pixelFromTick(y,L.chart),x=_.pixelFromValueAdjusted(L,y,S),v-=P,x-=N,M=x,D=v,v=Math.cos(this.radians)*D+Math.sin(this.radians)*M,x=Math.cos(this.radians)*M-Math.sin(this.radians)*D,v/=this.sx,x/=this.sy,this.padding=C.ensureDefaults(this.padding||{},{left:0,right:0,top:0,bottom:0}),Q=this.padding.right+this.padding.left,q=this.padding.bottom+this.padding.top,O=Math.pow(C.touchDevice?25:5+this.littleCircleRadius(),2),R=Math.abs(O/(this.sx*this.sy)),V=3,e.h7R(9);var se=e.E9E(16,14);e.f4W(6);var oe=e.E9E(10,0,11);e.h7R(30);var ae=e.D1M(15,3,22,93,14);e.f4W(9);var Ae=e.E9E(20,18);e.f4W(31);var he=e.D1M(15,13);e.f4W(72);var ge=e.D1M(6,19,7,0,4);e.f4W(73);var ie=e.D1M(19,17,741,40);K=Math.pow((this.dimension["0"^0]-Q+V)/2,se)+Math.pow((this.dimension[oe]-q+V)/ae,Ae)>Math.pow(v-Q/he,ge)+Math.pow(x-q/ie,"2">>0),e.h7R(68);var re=e.D1M(16,10,20,8);e.f4W(31);var de=e.E9E(11,9);Y=(O-(Math.pow(v*this.sx,re)+Math.pow(x*this.sy,"2"|de)))/Math.abs(this.sx*this.sy),e.h7R(6);var ce=e.D1M(9,0,11);e.f4W(18);var fe=e.E9E(11,578,10,15,32);e.f4W(9);var me=e.E9E(5,4);e.h7R(74);var ve=e.D1M(17,119,6,15);e.h7R(14);var pe=e.D1M(16,3,16);G=R-Math.pow(v-this.dimension[0]/ce,fe)-Math.pow(x-this.dimension[me]/ve,pe),e.h7R(75);var be=e.E9E(10,24,12);e.h7R(31);var Se=e.D1M(19,17);return J=R-Math.pow(v-this.dimension[0]/2,be)-Math.pow(x,Se),K?(Z="m",Z+="o",Z+="v",Z+="e",G>=J&&G>=Y&&G>-1?(ee="s",ee+="c",ee+="a",ee+="le",this.highlighted="p1",{action:ee}):J>=G&&J>=Y&&J>-1?(X="ro",X+="ta",X+="t",X+="e",ne="p",ne+="2",this.highlighted=ne,{action:X}):(this.highlighted=Y>-1?"p0":!0,{action:Z,p0:C.clone(this.p0),tick:y,value:this.valueOnDrawingAxis(y,S)})):null},C.Drawing.shape.prototype.configs=["color",s,t,"pattern"],C.Drawing.shape.prototype.littleCircleRadius=function(){return 3},C.Drawing.shape.prototype.click=function(y,S,T){e.U$Q();var _;return this.points.length?(this.copyConfig(),_=this.stx.panels[this.panelName],this.penDown?(this.setPoint(1,S,T,_.chart),this.rotating||!this.setRotationOnInitialDraw?(this.penDown=!1,this.rotating=!1,!0):(this.rotating=!0,!1)):(this.setPoint(0,S,T,_.chart),this.penDown=!0,!1)):!1},C.Drawing.shape.prototype.adjust=function(){e.e4i();var y,S,T;if(y=this.stx.panels[this.panelName],!!y){S=this.name+"_v"+(this.version||0),C.Drawing[S]&&(T=new C.Drawing[S],this.name=T.name,this.dimension=T.dimension,this.padding=T.padding,this.points=T.points,this.version=T.version),this.setPoint(0,this.d0,this.v0,y.chart),e.f4W(76);var _=e.D1M(367,13,39,8);this.radians=Math.round(this.a/5)*Math.PI/_}},C.Drawing.shape.prototype.reconstruct=function(y,S){this.stx=y,this.color=S.col,this.fillColor=S.fc,this.panelName=S.pnl,e.U$Q(),this.pattern=S.ptrn,this.lineWidth=S.lw,this.d0=S.d0,this.v0=S.v0,this.tzo0=S.tzo0,this.a=S.a,this.sx=S.sx,this.sy=S.sy,this.field=S.fld,this.version=S.ver,this.hdn=!!S.hdn,this.prm=!!S.prm,this.adjust()},C.Drawing.shape.prototype.serialize=function(){return e.e4i(),{name:this.name,pnl:this.panelName,col:this.color,fc:this.fillColor,ptrn:this.pattern,lw:this.lineWidth,d0:this.d0,v0:this.v0,tzo0:this.tzo0,a:this.a,sx:this.sx,sy:this.sy,fld:this.field,ver:this.version,hdn:this.hidden?1:0,prm:this.permanent?1:0}},C.Drawing.arrow=function(){var y;y="a",y+="r",y+="r",y+="ow",this.name=y,this.version=1,e.f4W(9),this.dimension=[11,e.E9E("22",0)],this.padding={left:0,right:0,top:11,bottom:0},e.h7R(56),this.points=[["M",e.E9E(32,"3"),21,"L",7,21,"L",e.D1M("7",32,e.h7R(77)),e.D1M("16",0,e.h7R(9)),"L",10,16,"L",5,11,"L",0,16,"L",3,16,"L",3,21]]},C.inheritsFrom(C.Drawing.arrow,C.Drawing.shape),C.Drawing.trendline=function(){var y;y="tr",e.U$Q(),y+="end",y+="l",y+="ine",this.name=y,this.showCallout=!1},C.inheritsFrom(C.Drawing.trendline,C.Drawing.segment),C.Drawing.trendline.prototype.copyConfig=function(y){C.Drawing.callout&&!C.Drawing.trendline.prototype.configs.includes("showCallout")&&(C.Drawing.trendline.prototype.configs=C.Drawing.trendline.prototype.configs.concat(["fillColor","showCallout","font"])),C.Drawing.copyConfig(this,y)},C.Drawing.trendline.prototype.measure=function(){(!this.showCallout||!C.Drawing.callout)&&C.Drawing.BaseTwoPoint.prototype.measure.call(this)},C.Drawing.trendline.prototype.reconstruct=function(y,S){e.U$Q(),C.Drawing.segment.prototype.reconstruct.call(this,y,S),S.callout&&C.Drawing.callout&&(this.callout=new C.Drawing.callout,this.callout.reconstruct(y,S.callout),this.showCallout=!0)},C.Drawing.trendline.prototype.serialize=function(){var y;return y=C.Drawing.segment.prototype.serialize.call(this),this.showCallout&&C.Drawing.callout&&(y.callout=this.callout.serialize()),y},C.Drawing.trendline.prototype.render=function(y){var S,T,_,L,H,P,N,v,x,M,D,Q,q,O,R,V,K,Y,G,J,Z,ee,X,ne;if(S=" ",S+="(",T=this.stx,_=T.panels[this.panelName],L=T.getYAxisByField(_,this.field),!(!_||this.field&&!L)){if(C.Drawing.segment.prototype.render.call(this,y),!this.showCallout||!C.Drawing.callout){this.callout=null;return}if(this.callout||(this.callout=new C.Drawing.callout,H=C.Drawing.segment.prototype.serialize.call(this),this.callout.reconstruct(T,H)),this.callout.p0=C.clone(this.p0),P=T.pixelFromTick(this.p0[0],_.chart),N=T.pixelFromTick(this.p1[0],_.chart),v=this.pixelFromValue(_,this.p0[0],this.p0[1],L),x=this.pixelFromValue(_,this.p1[0],this.p1[1],L),!(!isFinite(v)||!isFinite(x))){e.f4W(12),M=e.D1M(2,P,N),e.f4W(12),D=e.D1M(2,v,x),this.fontSize=C.stripPX(this.font&&this.font.size||13),e.h7R(0);var se=e.E9E(14,36);Q=this.callout.w*1.2+(this.callout.stemEntry[0]=="c"?0:se),q=Math.sqrt(Math.pow(N-P,2)+Math.pow(x-v,2)),e.f4W(9);var oe=e.E9E(12,11);e.f4W(78);var ae=e.D1M(0,10,3,8);e.h7R(31);var Ae=e.D1M(3,4);O=Q/(q||Q)*(this.p1[1]<this.p0[oe]?ae:Ae),e.h7R(79),R=e.D1M(M,x,O,D),e.f4W(62),V=e.D1M(M,D,O,N),this.callout.p0[0]=T.tickFromPixel(R,_.chart),this.callout.p0[1]=this.valueFromPixel(V,_,L),this.callout.v0=this.callout.p0[1],this.callout.p1=C.clone(this.p0),this.callout.stx=T,this.callout.fillColor=this.fillColor||this.callout.fillColor,this.callout.borderColor=this.color,this.callout.font=this.font||this.callout.font,this.callout.noHandles=!0,e.f4W(9);var he=e.E9E(6,5);e.f4W(80);var ge=e.E9E(10,7,14,26,16);K=this.p1[he]-this.p0[ge],e.h7R(2);var ie=e.E9E(7,1,15,10);e.h7R(81);var re=e.D1M(6,16,7,18,9);e.f4W(0);var de=e.D1M(2,0);e.f4W(9);var ce=e.E9E(320,256);this.callout.text=""+Number(K).toFixed(ie)+(this.p0[re]===0?"":S+Number(100*K/this.p0[1]).toFixed(de)+"%) ")+Math.abs(this.p1[0]-this.p0["0"<<ce])+" Bars",Y=Math.floor((this.p0[0]+this.p1[0])/2),Math.abs(this.p0[0]-this.p1[0])>1&&Math.abs(this.p0[0]-this.p1[0])<20?(J=T.pixelFromTick(Y,_.chart),e.h7R(82),Z=e.E9E(J,v,v,P,P,N,x),G=this.valueFromPixel(Z,_,L)||D):G=this.valueFromPixel(D,_,L),this.callout.stem={t:Y,v:G},this.callout.setTextareaProps(),this.callout.render(y),this.highlighted&&(ee="p",ee+="0",X=this.highlighted==ee,ne=this.highlighted=="p1",this.littleCircle(y,P,v,X),this.littleCircle(y,N,x,ne))}}},C.Drawing.trendline.prototype.lineIntersection=function(y,S,T,_){return C.Drawing.BaseTwoPoint.prototype.lineIntersection.call(this,y,S,T,"segment")},C.Drawing.trendline.prototype.intersected=function(y,S,T){var _,L;return!this.p0||!this.p1?null:(_=this.callout?this.callout.intersected(y,S,T):null,L=C.Drawing.segment.prototype.intersected.call(this,y,S,T),this.callout&&(this.callout.highlighted=!!(_||L)),e.e4i(),L||(_?{action:"move",p0:C.clone(this.p0),p1:C.clone(this.p1),tick:y,value:this.valueOnDrawingAxis(y,S)}:null))},C.Drawing.getDrawingToolList=function(y){var S,T;S={},T={arrow_v0:!0,BaseTwoPoint:!0,fibonacci:!0,shape:!0},C.extend(T,y);for(var _ in C.Drawing)!T[_]&&C.Drawing[_].prototype.render&&(S[new C.Drawing[_]().name]=_);return S}};gl=E=>{var e=ke,t;t=typeof _CIQ<"u"?_CIQ:E.CIQ,t.EaseMachine=function(s,n,r,i){var a;a="stri",a+="n",a+="g",typeof s===a?this.fc=t.EaseMachine[s]:this.fc=s,this.ms=n,(r||r===0)&&this.reset(r,i)},t.EaseMachine.prototype.reset=function(s,n){var r;e.U$Q(),r="o",r+="bje",r+="ct",!s&&s!==0&&(s=this.currentValues),this.hasCompleted=!1,this.running=!1,this.okayToRun=!0,e.f4W(83),this.useNameValuePairs=e.E9E(typeof n,r),this.startTime=Date.now(),this.useNameValuePairs?(this.startValues=s,this.endValues=n):(this.startValues={default:s},this.endValues={default:n}),this.changeValues={},this.currentValues={};for(var i in this.startValues)this.changeValues[i]=this.endValues[i]-this.startValues[i]},t.EaseMachine.prototype.next=function(){var s,n;s="d",s+="efault",n=Date.now(),n>=this.startTime+this.ms&&(n=this.startTime+this.ms,this.hasCompleted=!0,this.running=!1),this.currentValues={},e.U$Q();for(var r in this.changeValues)this.currentValues[r]=this.fc(n-this.startTime,this.startValues[r],this.changeValues[r],this.ms);return this.useNameValuePairs?this.currentValues:this.currentValues[s]},e.U$Q(),t.EaseMachine.prototype.hasCompleted=!0,t.EaseMachine.prototype.run=function(s,n,r,i,a){var o;e.U$Q(),a||(a=window),this.afid&&a.cancelAnimationFrame(this.afid),n||n===0?this.reset(n,r):(r||r===0)&&this.reset(this.currentValues,r);function c(){var l;o.afid=null,o.okayToRun&&(l=o.next(),s(l),!o.hasCompleted&&(o.afid=a.requestAnimationFrame(c)))}o=this,this.running=!0,i?this.afid=a.requestAnimationFrame(c):c()},t.EaseMachine.prototype.stop=function(s){var n;return n="u",n+="ndef",n+="ined",s||(s=window),this.afid&&s.cancelAnimationFrame(this.afid),this.afid=null,this.okayToRun=!1,this.hasCompleted=!0,this.running=!1,typeof this.useNameValuePairs==n?{}:this.useNameValuePairs?this.currentValues:this.currentValues.default},t.EaseMachine.easeInOutQuad=function(s,n,r,i){return e.h7R(10),s/=e.D1M(i,2),s<1?(e.h7R(84),e.E9E(n,s,2,r,s)):(s--,e.h7R(85),e.D1M(2,s,s,n,1,r,2))},t.EaseMachine.easeInOutCubic=function(s,n,r,i){return e.h7R(10),s/=e.E9E(i,2),s<1?(e.f4W(86),e.E9E(2,n,r,s,s,s)):(s-=2,e.f4W(87),e.D1M(2,s,s,r,s,2,n))},t.EaseMachine.easeOutCubic=function(s,n,r,i){return e.U$Q(),s/=i,s--,e.h7R(88),e.D1M(s,n,s,r,s,1)},t.ChartEngine.prototype.animations.zoom.isStub&&(t.ChartEngine.prototype.animations.zoom=new t.EaseMachine("easeOutCubic",400))};ml=E=>{var e,t,s;e="und",e+="efined",t=typeof _CIQ!==e?_CIQ:E.CIQ,s=function(){var n=ke,r,i,a,o,c,l,u,h,d,f,A,p,g,m,b,C,F,w,U,B;function k(ie,re){return!!(ie||re)}function y(ie,re){return Number(ie)+Number(re)}function S(ie){return Math.atanh?Math.atanh(ie):Math.log((1+ie)/(1-ie))/2}r="\\",r+="\\",i="\\";function T(ie){return n.e4i(),Math.acosh?Math.acosh(ie):Math.log(ie+Math.sqrt(ie*ie-1))}i+="'",a="\\";function _(ie){return n.e4i(),Math.cosh?Math.cosh(ie):(Math.exp(ie)+Math.exp(-ie))/2}function L(ie,re){return n.h7R(89),n.E9E(ie,re)}function H(ie,re){return n.h7R(1),n.E9E(re,ie)}function P(ie,re,de,ce){this.tokens=ie,this.ops1=re,this.ops2=de,this.functions=ce}a+="f",o="\\";function N(ie){return n.e4i(),Math.asinh?Math.asinh(ie):ie===-1/0?ie:Math.log(ie+Math.sqrt(ie*ie+1))}o+="n";function v(ie){return Math.log(ie)*Math.LOG10E}c=0,l=1,u=2,h=3,d=4;function x(ie,re,de,ce){this.type_=ie,this.index_=re||0,this.prio_=de||0,this.number_=ce??0,this.toString=function(){var fe;switch(n.e4i(),this.type_){case c:return this.number_;case l:case u:case h:return this.index_;case d:return fe="C",fe+="A",fe+="L",fe+="L",fe;default:return"Invalid Token"}}}function M(){var ie,re;if(Math.hypot)return Math.hypot.apply(this,arguments);n.e4i(),ie=0,re=arguments.length;for(var de=0;de<re;de++){if(arguments[de]===1/0||arguments[de]===-1/0)return 1/0;ie+=arguments[de]*arguments[de]}return Math.sqrt(ie)}function D(ie,re){return n.f4W(10),n.E9E(ie,re)}n.e4i(),f=/[\\'\x7f-\x9f\u00ad\u0600-\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]|\u070f|\u17b4|\u0604|\u17b5/g,A={"\b":"\\b","	":"\\t","\n":o,"\f":a,"\r":"\\r","'":i,"\\":r},t.extend(P.prototype,{simplify:function(ie){var re,de,ce,fe,me,ve,pe,be,Se;for(ie=ie||{},n.U$Q(),re=[],de=[],ve=this.tokens.length,be=0,be=0;be<ve;be++)if(pe=this.tokens[be],Se=pe.type_,Se===c)re.push(pe);else if(Se===h&&pe.index_ in ie)n.f4W(77),pe=new x(c,n.D1M("0",32),0,ie[pe.index_]),re.push(pe);else if(Se===u&&re.length>1)fe=re.pop(),ce=re.pop(),me=this.ops2[pe.index_],n.f4W(56),pe=new x(c,n.D1M(64,"0"),0,me(ce.number_,fe.number_)),re.push(pe);else if(Se===l&&re.length>0)ce=re.pop(),me=this.ops1[pe.index_],pe=new x(c,0,0,me(ce.number_)),re.push(pe);else{for(;re.length>("0"^0);)de.push(re.shift());de.push(pe)}for(;re.length>0;)de.push(re.shift());return new P(de,R(this.ops1),R(this.ops2),R(this.functions))},substitute:function(ie,re){var de,ce,fe,me,ve,pe,be,Se;for(re instanceof P||(re=new K().parse(String(re))),de=[],ce=this.tokens.length,me=0,me=0;me<ce;me++)if(fe=this.tokens[me],ve=fe.type_,ve===h&&fe.index_===ie)for(var Ee=0;Ee<re.tokens.length;Ee++)pe=re.tokens[Ee],be=new x(pe.type_,pe.index_,pe.prio_,pe.number_),de.push(be);else de.push(fe);return Se=new P(de,R(this.ops1),R(this.ops2),R(this.functions)),Se},evaluate:function(ie){var re,de,ce,fe,me,ve,pe,be,Se;for(ie=ie||{},re=[],me=this.tokens.length,n.e4i(),pe=0,pe="0"-0;pe<me;pe++)if(ve=this.tokens[pe],be=ve.type_,be===c)re.push(ve.number_);else if(be===u)ce=re.pop(),de=re.pop(),fe=this.ops2[ve.index_],re.push(fe(de,ce));else if(be===h)if(ve.index_ in ie)re.push(ie[ve.index_]);else if(ve.index_ in this.functions)re.push(this.functions[ve.index_]);else throw Se="undefined varia",Se+="ble: ",new Error(Se+ve.index_);else if(be===l)de=re.pop(),fe=this.ops1[ve.index_],re.push(fe(de));else if(be===d)if(de=re.pop(),fe=re.pop(),fe.apply&&fe.call)Object.prototype.toString.call(de)=="[object Array]"?re.push(fe.apply(void 0,de)):re.push(fe.call(void 0,de));else throw n.f4W(0),new Error(n.E9E(" is not a function",fe));else throw new Error("invalid Expression");if(re.length>1)throw new Error("invalid Expression (parity)");return re[0]},toString:function(ie){n.U$Q();var re,de,ce,fe,me,ve,pe,be,Se,Ee;for(re=[],me=this.tokens.length,n.h7R(1),pe=n.E9E(1,"0"),pe=0;pe<me;pe++)if(ve=this.tokens[pe],be=ve.type_,be===c)re.push(se(ve.number_));else if(be===u)ce=re.pop(),de=re.pop(),fe=ve.index_,ie&&fe=="^"?(n.f4W(90),re.push(n.D1M("Math.pow(",ce,de,",",")"))):(n.f4W(90),re.push(n.D1M("(",ce,de,fe,")")));else if(be===h)re.push(ve.index_);else if(be===l)de=re.pop(),fe=ve.index_,fe==="-"?(n.f4W(55),re.push(n.E9E(fe,"(",")",de))):(n.h7R(55),re.push(n.E9E("(",fe,")",de)));else if(be===d)de=re.pop(),fe=re.pop(),n.h7R(55),re.push(n.D1M("(",fe,")",de));else throw Se="invalid ",Se+="Expressio",Se+="n",new Error(Se);if(re.length>1)throw Ee="inv",Ee+="alid Expressi",Ee+="on ",Ee+="(parity)",new Error(Ee);return re[0]},variables:function(){var ie,re,de;ie=this.tokens.length,re=[];for(var ce=0;ce<ie;ce++)de=this.tokens[ce],de.type_===h&&re.indexOf(de.index_)==-1&&re.push(de.index_);return re}},!0),K.parse=function(ie){return n.e4i(),new K().parse(ie)};function Q(ie,re){return n.h7R(9),n.e4i(),n.E9E(ie,re)}function q(ie,re){return n.h7R(91),n.E9E(re,ie)}K.evaluate=function(ie,re){return n.e4i(),K.parse(ie).evaluate(re)},K.Expression=P;function O(ie){return n.e4i(),Math.sinh?Math.sinh(ie):(Math.exp(ie)-Math.exp(-ie))/2}function R(ie){re.prototype=ie;function re(){}return new re}K.values={sin:Math.sin,cos:Math.cos,tan:Math.tan,asin:Math.asin,acos:Math.acos,atan:Math.atan,sinh:O,cosh:_,tanh:X,asinh:N,acosh:T,atanh:S,sqrt:Math.sqrt,log:Math.log,lg:v,log10:v,abs:Math.abs,ceil:Math.ceil,floor:Math.floor,round:Math.round,trunc:ee,fac:ae,exp:Math.exp,min:Math.min,max:Math.max,hypot:M,pyt:M,pow:Math.pow,atan2:Math.atan2,if:ne,E:Math.E,PI:Math.PI};function V(ie,re){return n.e4i(),n.f4W(92),n.E9E(ie,re)}function K(){var ie,re,de;this.success=!1,this.errormsg="",this.expression="",this.pos=0,this.tokennumber=0,this.tokenprio=0,this.tokenindex=0,this.tmpprio=0,this.ops1={sin:Math.sin,cos:Math.cos,tan:Math.tan,asin:Math.asin,acos:Math.acos,atan:Math.atan,sinh:O,cosh:_,tanh:X,asinh:N,acosh:T,atanh:S,sqrt:Math.sqrt,log:Math.log,lg:v,log10:v,abs:Math.abs,ceil:Math.ceil,floor:Math.floor,round:Math.round,trunc:ee,"-":Z,exp:Math.exp},ie=1044849041,re=1689912520,de=2;for(var ce=1;n.R7z(ce.toString(),ce.toString().length,96169)!==ie;ce++)this.ops2={"+":y,"-":Q,"*":H,"/":D,"%":Y,"^":Math.pow,",":Ae,"||":oe,"==":J,"!=":q,">":G,"<":ge,">=":L,"<=":V,and:he,or:k},this.functions={fac:ae,min:Math.min,max:Math.max,hypot:M,pyt:M,pow:Math.pow,atan2:Math.atan2,if:ne},de+=2;n.V7r(de.toString(),de.toString().length,"32217"*1)!==re&&(this.ops2={"+":y,"-":Q,"*":H,"/":D,"%":Y,"^":Math.pow,",":Ae,"||":oe,"==":J,"!=":q,">":G,"<":ge,">=":L,"<=":V,and:he,or:k},this.functions={fac:ae,min:Math.min,max:Math.max,hypot:M,pyt:M,pow:Math.pow,atan2:Math.atan2,if:ne}),this.consts={E:Math.E,PI:Math.PI}}function Y(ie,re){return n.h7R(93),n.D1M(ie,re)}n.f4W(77),p=n.E9E(1,0);function G(ie,re){return n.f4W(94),n.e4i(),n.E9E(re,ie)}n.f4W(95),g=n.D1M(1,"1"),n.h7R(77),m=n.E9E(1,2),n.h7R(96),b=n.D1M("3",1);function J(ie,re){return n.h7R(83),n.e4i(),n.D1M(ie,re)}n.h7R(97),C=n.E9E("4",0,1),n.f4W(96),F=n.E9E("5",1);function Z(ie){return n.e4i(),-ie}function ee(ie){return Math.trunc?Math.trunc(ie):ie<0?Math.ceil(ie):Math.floor(ie)}n.f4W(77),w=n.E9E(1,6);function X(ie){return Math.tanh?Math.tanh(ie):(n.U$Q(),ie===1/0?1:ie===-1/0?-1:(Math.exp(ie)-Math.exp(-ie))/(Math.exp(ie)+Math.exp(-ie)))}function ne(ie,re,de){return ie?re:de}function se(ie){return typeof ie=="string"?(f.lastIndex=0,f.test(ie)?"'"+ie.replace(f,function(re){var de,ce;return de="st",de+="rin",de+="g",ce=A[re],typeof ce===de?ce:"\\u"+("0000"+re.charCodeAt(0).toString(16)).slice(-4)})+"'":"'"+ie+"'"):ie}function oe(ie,re){return n.e4i(),n.h7R(15),n.D1M(ie,re,"")}function ae(ie){var re;for(ie=Math.floor(ie),re=ie;ie>1;)n.f4W(98),re=n.E9E(re,--ie);return re}function Ae(ie,re){return Object.prototype.toString.call(ie)!="[object Array]"?[ie,re]:(ie=ie.slice(),ie.push(re),ie)}n.f4W(77),U=n.E9E(1,7),n.h7R(97),B=n.D1M("8",0,1);function he(ie,re){return n.e4i(),!!(ie&&re)}t.extend(K.prototype,{parse:function(ie){n.U$Q();var re,de,ce,fe,me,ve,pe,be,Se,Ee,Ie,Qe,Ne;for(this.errormsg="",this.success=!0,re=[],de=[],this.tmpprio=0,n.h7R(99),ce=n.E9E(p,m,w,b),fe=0,this.expression=ie,this.pos=0;this.pos<this.expression.length;)this.isOperator()?this.isSign()&&ce&w?(this.isNegativeSign()&&(this.tokenprio=2,this.tokenindex="-",fe++,this.addfunc(de,re,l)),n.h7R(99),ce=n.D1M(p,m,w,b)):this.isComment()||(ce&g||(ve="unexpec",ve+="ted operato",ve+="r",this.error_parsing(this.pos,ve)),fe+=2,this.addfunc(de,re,u),n.h7R(99),ce=n.E9E(p,m,w,b)):this.isNumber()?(ce&p||this.error_parsing(this.pos,"unexpected number"),n.f4W(9),me=new x(c,n.D1M("0",0),0,this.tokennumber),de.push(me),n.f4W(100),ce=n.E9E(F,C,g)):this.isString()?(ce&p||this.error_parsing(this.pos,"unexpected string"),n.h7R(37),me=new x(c,0,n.E9E(0,"0"),this.tokennumber),de.push(me),n.h7R(100),ce=n.D1M(F,C,g)):this.isLeftParenth()?((ce&b)==="0"*1&&this.error_parsing(this.pos,'unexpected "("'),ce&U&&(fe+=2,this.tokenprio=-2,this.tokenindex=-1,this.addfunc(de,re,d)),n.h7R(101),ce=n.E9E(B,w,b,m,p)):this.isRightParenth()?(ce&B?(me=new x(c,0,0,[]),de.push(me)):ce&C||this.error_parsing(this.pos,'unexpected ")"'),n.f4W(101),ce=n.E9E(U,b,C,F,g)):this.isComma()?(ce&F||this.error_parsing(this.pos,'unexpected ","'),this.addfunc(de,re,u),fe+=2,n.h7R(99),ce=n.D1M(p,m,w,b)):this.isConst()?(ce&p||(pe="unexpect",pe+="ed cons",pe+="t",pe+="ant",this.error_parsing(this.pos,pe)),be=new x(c,0,0,this.tokennumber),de.push(be),n.h7R(100),ce=n.D1M(F,C,g)):this.isOp2()?(ce&m||(Se="un",Se+="expected function",this.error_parsing(this.pos,Se)),this.addfunc(de,re,u),fe+=2,ce=b):this.isOp1()?(ce&m||this.error_parsing(this.pos,"unexpected function"),this.addfunc(de,re,l),fe++,ce=b):this.isVar()?(ce&p||(Ee="unexpected v",Ee+="ar",Ee+="iable",this.error_parsing(this.pos,Ee)),Ie=new x(h,this.tokenindex,0,0),de.push(Ie),n.h7R(101),ce=n.D1M(U,b,C,F,g)):this.isWhite()||(this.errormsg===""?this.error_parsing(this.pos,"unknown character"):this.error_parsing(this.pos,this.errormsg));for((this.tmpprio<0||this.tmpprio>=10)&&(Qe="unmatc",Qe+="h",Qe+='ed "()"',this.error_parsing(this.pos,Qe));re.length>0;)Ne=re.pop(),de.push(Ne);return fe+1!==de.length&&this.error_parsing(this.pos,"parity"),new P(de,R(this.ops1),R(this.ops2),R(this.functions))},evaluate:function(ie,re){return n.e4i(),this.parse(ie).evaluate(re)},error_parsing:function(ie,re){throw this.success=!1,n.h7R(55),this.errormsg=n.E9E(ie,"parse error [column ",re,"]: "),n.U$Q(),this.column=ie,new Error(this.errormsg)},addfunc:function(ie,re,de){var ce;for(ce=new x(de,this.tokenindex,this.tokenprio+this.tmpprio,0);re.length>0&&ce.prio_<=re[re.length-1].prio_;)ie.push(re.pop());n.e4i(),re.push(ce)},isNumber:function(){var ie,re,de;for(ie=!1,re="";this.pos<this.expression.length&&(de=this.expression.charCodeAt(this.pos),de>=48&&de<=57||de===46);)re+=this.expression.charAt(this.pos),this.pos++,this.tokennumber=parseFloat(re),ie=!0;return n.U$Q(),ie},unescape:function(ie,re){var de,ce,fe,me,ve;de=[],ce=!1;for(var pe=0;pe<ie.length;pe++)if(fe=ie.charAt(pe),ce){switch(fe){case"'":de.push("'");break;case"\\":de.push("\\");break;case"/":de.push("/");break;case"b":de.push("\b");break;case"f":de.push("\f");break;case"n":de.push(`
`);break;case"r":de.push("\r");break;case"t":de.push("	");break;case"u":me=parseInt(ie.substring(pe+("1"|0),pe+5),16),de.push(String.fromCharCode(me)),n.f4W(37),pe+=n.D1M(4,"4");break;default:throw ve="Illegal escape sequence:",ve+=" '\\",n.h7R(0),this.error_parsing(n.E9E(pe,re),n.E9E(fe,"'",ve,n.h7R(15)))}ce=!1}else fe=="\\"?ce=!0:de.push(fe);return de.join("")},isString:function(){var ie,re,de,ce;if(ie=!1,re="",de=this.pos,n.U$Q(),this.pos<this.expression.length&&this.expression.charAt(this.pos)=="'")for(this.pos++;this.pos<this.expression.length;)if(ce=this.expression.charAt(this.pos),ce!="'"||re.slice(-1)=="\\")re+=this.expression.charAt(this.pos),this.pos++;else{this.pos++,this.tokennumber=this.unescape(re,de),ie=!0;break}return ie},isConst:function(){var ie,re;n.U$Q();for(var de in this.consts)if(re=de.length,ie=this.expression.substr(this.pos,re),de===ie)return this.tokennumber=this.consts[de],this.pos+=re,!0;return!1},isOperator:function(){n.U$Q();var ie,re;if(ie=this.expression.charCodeAt(this.pos),ie===43)this.tokenprio=2,this.tokenindex="+";else if(ie==="45">>32)n.h7R(56),this.tokenprio=n.E9E(32,"2"),this.tokenindex="-";else if(ie===62)this.expression.charCodeAt(this.pos+1)===61?(this.pos++,this.tokenprio=1,this.tokenindex=">="):(this.tokenprio=1,this.tokenindex=">");else if(ie===60)this.expression.charCodeAt(this.pos+1)===("61"^0)?(this.pos++,this.tokenprio=1,this.tokenindex="<="):(this.tokenprio=1,this.tokenindex="<");else if(ie===124)if(this.expression.charCodeAt(this.pos+1)==="124">>64)re="|",re+="|",this.pos++,this.tokenprio=1,this.tokenindex=re;else return!1;else if(ie===61)if(this.expression.charCodeAt(this.pos+1)===61)this.pos++,this.tokenprio=1,this.tokenindex="==";else return!1;else if(ie===33)if(this.expression.charCodeAt(this.pos+1)===61)this.pos++,this.tokenprio=1,this.tokenindex="!=";else return!1;else if(ie==="97"*1)if(this.expression.charCodeAt(this.pos+1)===110&&this.expression.charCodeAt(this.pos+2)===100)this.pos++,this.pos++,n.h7R(9),this.tokenprio=n.E9E("0",0),this.tokenindex="and";else return!1;else if(ie===111)if(this.expression.charCodeAt(this.pos+1)==="114"*1)this.pos++,this.tokenprio=0,this.tokenindex="or";else return!1;else if(ie===42||ie===8729||ie===8226)this.tokenprio=3,this.tokenindex="*";else if(ie===47)this.tokenprio=4,this.tokenindex="/";else if(ie===37)this.tokenprio=4,this.tokenindex="%";else if(ie===94)this.tokenprio=5,this.tokenindex="^";else return!1;return this.pos++,!0},isSign:function(){var ie;return n.e4i(),ie=this.expression.charCodeAt(this.pos-1),ie===45||ie===43},isPositiveSign:function(){var ie;return ie=this.expression.charCodeAt(this.pos-("1"|1)),n.U$Q(),ie===43},isNegativeSign:function(){var ie;return ie=this.expression.charCodeAt(this.pos-1),ie===45},isLeftParenth:function(){var ie;return ie=this.expression.charCodeAt(this.pos),ie===40?(this.pos++,this.tmpprio+=10,!0):!1},isRightParenth:function(){var ie;return ie=this.expression.charCodeAt(this.pos),ie===41?(this.pos++,this.tmpprio-=10,!0):(n.e4i(),!1)},isComma:function(){n.e4i();var ie;return ie=this.expression.charCodeAt(this.pos),ie===("44"^0)?(this.pos++,this.tokenprio=-1,this.tokenindex=",",!0):!1},isWhite:function(){n.U$Q();var ie;return ie=this.expression.charCodeAt(this.pos),ie===32||ie===9||ie===10||ie===13?(this.pos++,!0):!1},isOp1:function(){var ie,re;ie="";for(var de=this.pos;de<this.expression.length&&(re=this.expression.charAt(de),!(re.toUpperCase()===re.toLowerCase()&&(de===this.pos||re!="_"&&(re<"0"||re>"9"))));de++)ie+=re;return n.U$Q(),ie.length>0&&ie in this.ops1?(this.tokenindex=ie,this.tokenprio=5,this.pos+=ie.length,!0):!1},isOp2:function(){var ie,re,de,ce,fe;ie="";for(var me=this.pos;me<this.expression.length&&(re=this.expression.charAt(me),!(re.toUpperCase()===re.toLowerCase()&&(me===this.pos||re!="_"&&(re<"0"||re>"9"))));me++)ie+=re;if(ie.length>"0"<<32&&ie in this.ops2){this.tokenindex=ie,this.tokenprio=5,this.pos+=ie.length,de=927810237,ce=-891346915,fe=2;for(var ve=1;n.R7z(ve.toString(),ve.toString().length,21778)!==de;ve++)return!1;if(n.V7r(fe.toString(),fe.toString().length,72120)!==ce)return!0}return!1},isVar:function(){var ie,re;ie="";for(var de=this.pos;de<this.expression.length&&(re=this.expression.charAt(de),!(re.toUpperCase()===re.toLowerCase()&&(de===this.pos||re!="_"&&(re<"0"||re>"9"))));de++)ie+=re;return ie.length>0?(this.tokenindex=ie,this.tokenprio=4,this.pos+=ie.length,!0):!1},isComment:function(){var ie;if(ie=this.expression.charCodeAt(this.pos-1),ie===47&&this.expression.charCodeAt(this.pos)===42){n.h7R(9);var re=n.E9E(24,22);return this.pos=this.expression.indexOf("*/",this.pos)+re,this.pos===1&&(this.pos=this.expression.length),!0}return n.U$Q(),!1}},!0);function ge(ie,re){return n.U$Q(),n.h7R(102),n.D1M(re,ie)}return K},t.computeEquationChart=function(n,r){var i=ke,a,o,c,l,u,h,d,f,A,p,g,m,b,C,F,w,U,B,k,y,S,T,_,L,H;function P(){var D,Q,q,O,R;D=null,Q=869955515,q=665698690,O=2;for(var V=1;i.R7z(V.toString(),V.toString().length,84056)!==Q;V++)R=null,O+=2;i.V7r(O.toString(),O.toString().length,96159)!==q&&(R=1);for(var K in f)R?f[K].d.getTime()<R.d.getTime()?D=R=f[K]:f[K].d.getTime()>R.d.getTime()&&(D=R):R=f[K];return D?v(D)?-1:0:1}n=n.replace(/[:]/,"/"),a=0;for(var N in r)o="s",o+="ym",o+="bo",o+="l",c="\\",c+="]",l="\\",l+="[",u=new RegExp("\\["+N.replace(/\[/g,l).replace(/\]/g,c).replace(/\$/g,"\\$").replace(/\^/g,"\\^").replace(/[+\-*/%()]/g,"\\$&")+"\\]","g"),i.f4W(0),n=n.replace(u,i.E9E(a,o)),a++;h=s().parse(n),d=[],f={},A=0,g=null,m=!1,b=[];function v(D){if(D.i++,r[D.s]){if(D.i>=r[D.s].length)return 0;p=r[D.s][D.i]}return p.DT||(p.DT=t.strToDateTime(p.Date)),D.d=p.DT,1}for(N in r)C={sym:N,map:r[N]},r[N]?b.unshift(C):b.push(C);for(var x=0;x<b.length;x++)F=b[x],f[F.sym]={i:0,s:F.sym},F.map?(A++,p=F.map[0]):A==1&&(m=F.sym),p.DT||(p.DT=t.strToDateTime(p.Date)),f[F.sym].d=p.DT,g||(g=f[F.sym]);i.f4W(103),w=i.D1M(A,0),U=A==("1"^0)&&n.indexOf("%")==-1;e:for(;B=P(),!!B;)if(B==1){if(m)y=r[g.s][g.i][m],y&&(y.Close||y.Close===0)&&(y=y.Close),S=h.evaluate({symbol0:r[g.s][g.i].Close,symbol1:y}),S=Number(S.toFixed(8)),k={DT:g.d,Close:S,Adj_Close:S},k[g.s]=r[g.s][g.i].Close,!isNaN(S)&&S!=1/0&&d.push(k);else{if(w)throw T="NoE",T+="x",T+="c",T+="eption",_=h.evaluate({}),i.f4W(15),t.alert(i.E9E("=",_,n)),{name:T,message:""};a=0,L={Adj_Close:{},Close:{},Open:{},High:{},Low:{},Volume:{}};for(N in r){for(var M in L)H="sy",H+="m",H+="bo",H+="l",i.f4W(0),L[M][i.D1M(a,H)]=r[N][f[N].i][M];a++}k={DT:g.d},k.Adj_Close=h.evaluate(L.Adj_Close),k.Close=h.evaluate(L.Close),k.Open=h.evaluate(L.Open),k.Volume=h.evaluate(L.Volume),isNaN(k.Volume)&&(k.Volume=0),U?(k.High=h.evaluate(L.High),k.Low=h.evaluate(L.Low)):(k.High=Math.max(k.Open,k.Close),k.Low=Math.min(k.Open,k.Close)),!isNaN(k.Close)&&k.Close!=1/0&&d.push(k),isNaN(k.High)||(k.High=Number(k.High.toFixed(8))),isNaN(k.Low)||(k.Low=Number(k.Low.toFixed(8))),isNaN(k.Open)||(k.Open=Number(k.Open.toFixed(8))),isNaN(k.Close)||(k.Close=Number(k.Close.toFixed(8))),isNaN(k.Adj_Close)?k.Adj_Close=k.Close:k.Adj_Close=Number(k.Adj_Close.toFixed(8))}for(N in r)if(!v(f[N]))break e}return d}};yl=E=>{var e;e=typeof _CIQ<"u"?_CIQ:E.CIQ,e.ChartEngine.prototype.addEvent=function(t,s,n){var r;t&&(r=this.chart,s=s||{},s.isEvent=!0,s.processResults||(s.processResults=this.processEventResults),s.takedownResults||(s.takedownResults=this.takedownEventResults),s.responseHandler=i=>a=>{var o,c,l;o=r.series[t],c=a.quotes,!(!c||!c.length)&&(a.error||(o.loading=!1,o.moreAvailable=a.moreAvailable,o.upToDate=a.upToDate),ke.U$Q(),l=[a.beginDate||c[0].DT,a.endDate||c[c.length-1].DT],(!o.endPoints.begin||o.endPoints.begin>l[0])&&(o.endPoints.begin=l[0]),(!o.endPoints.end||o.endPoints.end<l[1])&&(o.endPoints.end=l[1]),o.parameters.processResults&&o.parameters.processResults(this,a.error,o,c))},this.addSeries(t,s,n))},ke.U$Q(),e.ChartEngine.prototype.processEventResults=function(t,s,n,r){if(!s&&e.Marker)for(var i of r)i.data&&(i.data.type=n.id,e.Marker({stx:t,label:n.id,x:i.DT,node:new e.Marker.Simple(i.data)}))},e.ChartEngine.prototype.takedownEventResults=function(t,s){e.Marker&&e.Marker.removeByLabel(t,s)},e.ChartEngine.prototype.removeEvent=function(t){this.removeSeries(t)},e.ChartEngine.prototype.removeAllEvents=function(){var t;if(t=this.chart.series,ke.e4i(),t)for(var s in t)t[s].parameters.isEvent&&this.removeEvent(s)}};vl=E=>{var e=ke,t,s;t="undefi",t+="n",t+="ed",s=typeof _CIQ!==t?_CIQ:E.CIQ,s.ChartEngine.prototype.setLocale=function(n,r){var i,a,o,c,l,u,h,d,f;if(i="n",i+="um",i+="eric",a="h2",a+="3",o="n",o+="umeric",c="h",c+="2",c+="3",!(typeof Intl>"u")){if(this.locale!=n)this.locale=n;else return;for(u=this.internationalizer={},u.hourMinute=new Intl.DateTimeFormat(this.locale,{hour:"numeric",minute:"numeric",hourCycle:c}),u.hourMinuteSecond=new Intl.DateTimeFormat(this.locale,{hour:o,minute:"numeric",second:"numeric",hourCycle:a}),u.mdhm={format:A=>{var p;return p="2",p+="-d",p+="igi",p+="t",new Intl.DateTimeFormat(this.locale,{year:"2-digit",month:"2-digit",day:"2-digit",hour:"2-digit",minute:p}).format(A).replace(/\u200f/g,"")}},u.monthDay={format:A=>{var p,g;return p="n",p+="umer",p+="ic",g="nu",g+="me",g+="r",g+="ic",e.e4i(),new Intl.DateTimeFormat(this.locale,{month:g,day:p}).format(A).replace(/\u200f/g,"")}},u.yearMonthDay={format:A=>{var p,g;return p="n",p+="ume",p+="ri",p+="c",g="nu",g+="mer",e.U$Q(),g+="i",g+="c",new Intl.DateTimeFormat(this.locale,{year:g,month:"numeric",day:p}).format(A).replace(/\u200f/g,"")}},u.yearMonth=new Intl.DateTimeFormat(this.locale,{year:"numeric",month:i}),u.month=new Intl.DateTimeFormat(this.locale,{month:"short"}),u.numbers=new Intl.NumberFormat(this.locale),u.priceFormatters=[],r||(r=8),l=0;l<r+1;l++)u.priceFormatters.push(new Intl.NumberFormat(this.locale,{maximumFractionDigits:l,minimumFractionDigits:l}));for(l=0;l<5;l++)h="e",h+="xceptZ",h+="e",h+="ro",d=l,f=l,l||(d="",f=2),e.h7R(0),u[e.E9E(d,"percent")]=new Intl.NumberFormat(this.locale,{style:"percent",minimumFractionDigits:f,maximumFractionDigits:f,signDisplay:h});s.I18N.createMonthArrays&&s.I18N.createMonthArrays(this,u.month,this.locale)}},s.ChartEngine.prototype.translateUI=function(n){s.I18N.localized&&s.I18N.translateUI(this.preferences.language,n)},s.I18N=function(){},s.I18N.hereDoc=function(n){return n.toString().replace(/^[^/]+\/\*!?/,"").replace(/ {4,10}/g,"").replace(/\*\/[^/]+$/,"")},s.I18N.language="en",s.I18N.longMonths={zh:!0,ja:!0},s.I18N.reverseColorsByLocale={},s.I18N.findAllTextNodes=function(n){var r,i,a,o,c,l,u,h,d,f,A,p,g,m,b;for(r="^\\",r+="s*$",n||(n=document.body),i=n.ownerDocument.createTreeWalker(n,NodeFilter.SHOW_TEXT|NodeFilter.SHOW_ELEMENT,{acceptNode(B){return B.nodeType===Node.TEXT_NODE||B.shadowRoot||B.placeholder?NodeFilter.FILTER_ACCEPT:(e.e4i(),NodeFilter.FILTER_SKIP)}}),a=i.nextNode(),o=new RegExp(r),c=new RegExp(`
|	|\f`,"g"),l={},u={SCRIPT:!0,STYLE:!0,TEXTAREA:!0,"CQ-SYMBOL":!0};a;){if(a.shadowRoot){d=s.I18N.findAllTextNodes(a.shadowRoot);for(var C in d)l[C]||(l[C]=[]),l[C]=l[C].concat(d[C])}f=a.nodeValue,f&&!o.test(f)&&(A="[no",A+="-trans",A+="l",A+="ate]",p=a.parentNode,!u[p.tagName]&&!p.matches(A)&&(h=p.getAttribute("cq-translate-original"),h?f=h:p.setAttribute("cq-translate-original",f),c.test(f)&&(f=f.replace(c,"")),l[f]||(l[f]=[]),l[f].push(a))),f=a.placeholder,f&&!o.test(f)&&(u[a.tagName]||(g="cq-tra",g+="nslate-placeholder-",g+="original",h=a.getAttribute("cq-translate-placeholder-original"),h?f=h:a.setAttribute(g,f),l[f]||(l[f]=[]),l[f].push(a))),a.tagName&&u[a.tagName]?a=i.nextSibling():a=i.nextNode()}if(n==document.body&&(m=s.Studies?s.Studies.studyLibrary:null,m))for(var F in m){if(l[F]===null&&(l[F]=[]),b=m[F],b.inputs)for(var w in b.inputs)l[w]||(l[w]=[]);if(b.outputs)for(var U in b.outputs)l[U]||(l[U]=[])}return l},s.I18N.missingWordList=function(n){var r,i,a,o,c,l,u,h;r="Show ",r+="as Underlay",i="Sho",i+="w",i+=" Zon",i+="es",n||(n=s.I18N.language),a=s.I18N.findAllTextNodes(),o={},c=s.I18N.wordLists[n],c||(c={}),l=function(m){var b;b="unde",e.U$Q(),b+="fined",typeof c[m]==b&&(o[m]="")};for(var d in a)l(d);if(!(s.Studies&&s.Studies.studyLibrary))return o;for(var f in s.Studies.studyLibrary){u=s.Studies.studyLibrary[f],l(u.name);for(var A in u.inputs)switch(l(A),h=u.inputs[A],Object.prototype.toString.call(h)){case"[object String]":l(h);break;case"[object Array]":for(var p=0;p<h.length;++p)l(h[p]);break}for(var g in u.outputs)l(g)}return e.U$Q(),l(i),l("OverBought"),l("OverSold"),l("Panel"),l(r),l("Y-Axis"),l("Invert Y-Axis"),o},s.I18N.printableMissingWordList=function(n){var r,i;return r='"',r+=",",e.U$Q(),r+=`
`,r+='"',i=JSON.stringify(s.I18N.missingWordList(n)),i=i.replace(/","/g,r),i},s.I18N.translateUI=function(n,r){var i,a,o,c,l,u,h,d,f,A,p,g,m,b;i="p",i+="t",n=="pu"&&(n=i);function C(k){return e.U$Q(),Array.from((k||document).querySelectorAll("[aria-label]")).reduce((y,S)=>{var T;return S.getAttribute("aria-label-original")||S.setAttribute("aria-label-original",S.getAttribute("aria-label")),T=S.getAttribute("aria-label-original"),e.e4i(),y[T]=(y[T]||[]).concat(S),y},{})}if(s.I18N.wordLists&&(n||(n=s.I18N.language),a=s.I18N.findAllTextNodes(r),e.e4i(),o=s.I18N.wordLists[n],!!o)){for(var F in a){c=s.I18N.translateSections(F,o),l=a[F];for(var w=0;w<l.length;w++)u="cq-translate-placeho",u+="lder-original",h=l[w],d=h.parentNode,f=h.placeholder?h.getAttribute(u):d.getAttribute("cq-translate-original"),(c===","||!c)&&(c=f),h.placeholder?h.placeholder=c:h.data=c}A=C(r);for(var U in A){p=s.I18N.translateSections(U,o),g=A[U];for(var B of g)m="aria-labe",m+="l",b=B.getAttribute("aria-label-original"),(p===","||!p)&&(p=b),B.setAttribute(m,p)}}},s.I18N.translate=function(n,r){var i,a;return r||(r=s.I18N.language),s.I18N.wordLists?(e.e4i(),i=s.I18N.wordLists[r],a=null,i&&(a=s.I18N.translateSections(n,i)||n),a===","?n:a):(console.log("Must include translations.js in order to use CIQ.I18N.translate()"),n)},s.I18N.translateSections=function(n,r){var i,a,o;return i="st",i+="ri",i+="n",i+="g",a="‌",typeof n==i&&n.indexOf(a)!=-1?(e.f4W(15),n=n.replace(/([(),])/g,e.D1M("$1",a,a)),o=n.split(a),o.forEach(function(c,l,u){var h,d;if(h=c.match(/^(\s*).{0,100}\S(\s*)$/),d=r[c.trim()],d){if(h){e.f4W(104);var f=e.E9E(2,20,11,31,0);e.f4W(105);var A=e.E9E(11,3,5,5);d=h[f]+d+h[A]}u[l]=d}}),o.join("")):r[n]},e.U$Q(),s.I18N.csv=s.I18N.csv||"",s.I18N.convertCSV=function(n){var r,i,a,o,c,l,u,h,d,f,A,p;if(r="[“”]",r+="|",r+="[‘’",r+="]",i=new RegExp(r,"g"),a=s.I18N.wordLists,n||(n=s.I18N.csv),!!n){o=n.split(`
`),c=o[0],l=c.split(",");for(var g=0;g<l.length;g++)u=l[g],a[u]||(a[u]={});for(var m=1;m<o.length;m++){h=o[m].match(/(".{0,1000}?"|[^",]{1,1000})(?=\s{0,100},|\s{0,100}$)|(,(?=,))/g)||[],d=h[0],f=d.charAt(0),A=d.charAt(d.length-1),f==='"'&&A==='"'&&(d=d.substring(1,d.length-1)),i.test(d)&&(d=d.replace(i,'"'));for(var b=1;b<h.length;b++)p=h[b],f=p.charAt(0),A=p.charAt(p.length-1),f==='"'&&A==='"'&&(p=p.substring(1,p.length-1)),a[l[b]][d]=p}}},s.I18N.setLanguage=function(n,r,i,a,o){var c,l;c="p",c+="t",l="p",l+="u",o||(o=(n.uiContext||{}).topNode||document.body),r==l&&(r=c),s.I18N.convertCSV(a),s.I18N.language=r,e.U$Q(),s.I18N.translateUI(r,o),i||(i=s.I18N.translate),n.translationCallback=i},s.I18N.setLocale=function(n,r,i,a,o){var c,l,u,h,d;if(c=".",e.U$Q(),c+="j",c+="s",l="loc",l+="ale-d",l+="ata/jsonp",s.xor(this.reverseColorsByLocale[r],this.reverseColorsByLocale[n.locale])&&this.reverseCandles(n),typeof Intl>"u"||!Intl.__addLocaleData){n.setLocale(r,o),i&&i(null);return}a=typeof a>"u"?l:a,e.h7R(55),u=e.E9E("/",a,c,r),h=document.createElement("SCRIPT"),h.async=!0,h.src=u,d=document.getElementsByTagName("script")[0],d.parentNode.insertBefore(h,d.nextSibling),h.onload=function(){n.setLocale(r,o),i&&i(null)},h.onerror=function(){i&&i("cannot load script")}},s.I18N.createMonthArrays=function(n,r,i){var a,o,c,l,u,h;n.monthAbv=[],n.monthLetters=[],e.e4i(),a=new Date,o=!0,s.I18N.longMonths&&s.I18N.longMonths[i]&&(o=!1);for(var d=0;d<12;d++)if(a.setDate(1),a.setMonth(d),c=r.format(a),o){l="";for(var f=0;f<c.length;f++)u=c.charAt(f),h=u.charCodeAt(0),!(h<65)&&(l+=u);n.monthAbv[d]=l,n.monthLetters[d]=l[0]}else n.monthAbv[d]=c,n.monthLetters[d]=c},s.I18N.localize=function(n,r){e.U$Q(),r=this.langConversionMap[r]||r,this.setLocale(n,r),this.setLanguage(n,r),s.I18N.localized=!0},s.I18N.reverseCandles=function(n){var r,i,a;r=n.styles,i=n.cloneStyle(r.stx_candle_down),a=n.cloneStyle(r.stx_candle_up),r.stx_candle_up=i,r.stx_candle_down=a},s.I18N.wordLists={en:{}},s.I18N.languages={en:"English"},s.I18N.langConversionMap={},s.I18N.localized=!1};xl=E=>{var e=ke,t,s,n,r,i,a,o,c;t='<div class="stx-baseline-hand',t+='le" style="display: none;"></div>',s='<div class="stx-float-date" style="visibility: hidden;"><',s+="/div>",n='<div class="stx_crosshair stx_crosshair_x" style="display: none;">',n+="</div>",r='<div class="stx_drag_ok"><div class="',r+='icon"></div><div class="fie',r+='ld"></div></div>',i="<span",i+=' class="stx-btn stx_annotation_save" ',i+='style="display: none;"></span>',a="conte",a+="xt",a+="men",a+="u",o=typeof _CIQ<"u"?_CIQ:E.CIQ,o.ChartEngine.prototype.pointerEvents={down:[],up:[]},o.ChartEngine.prototype.manageTouchAndMouse=!0,o.ChartEngine.prototype.registerTouchAndMouseEvents=function(){var l,u,h,d,f,A,p,g,m,b,C,F,w;l=".st",l+="x-zoom-in",!this.touchAndMouseEventsRegistered&&(this.touchAndMouseEventsRegistered=!0,u=this.controls.chartControls||document,u.querySelector(l),u.querySelector(".stx-zoom-out"),h=this.chart.container,d=this,f=function(U,B,k){d.addDomEventListener(h,U,y,k);function y(S){d.mainSeriesRenderer.nonInteractive||B(S)}},o.touchDevice?o.isSurface?(g="point",g+="e",g+="rente",g+="r",m="p",m+="o",m+="inte",m+="rmove",b="mousedo",b+="wn",f("mousemove",function(U){d.msMouseMoveProxy(U)}),f("mouseenter",function(U){d.msMouseMoveProxy(U)}),f(b,function(U){e.e4i(),d.msMouseDownProxy(U)}),f("mouseup",function(U){e.U$Q(),d.msMouseUpProxy(U)}),f("pointerdown",function(U){return d.startProxy(U)}),f(m,function(U){d.moveProxy(U)}),f(g,function(U){return d.moveProxy(U)}),f("pointerup",function(U){return e.e4i(),d.endProxy(U)})):(C="tou",C+="chmove",o.isMobile||(F="mou",F+="seu",F+="p",f("mousemove",function(U){e.e4i(),d.iosMouseMoveProxy(U)}),f("mouseenter",function(U){d.iosMouseMoveProxy(U)}),f("mousedown",function(U){e.U$Q(),d.iosMouseDownProxy(U)}),f(F,function(U){e.e4i(),d.iosMouseUpProxy(U)})),f("touchstart",function(U){d.touchstart(U)},{passive:!1}),f(C,function(U){e.e4i(),d.touchmove(U)},{passive:!1}),f("touchend",function(U){e.U$Q(),d.touchend(U)}),f("pointerdown",function(U){e.U$Q(),d.touchPointerType=U.pointerType})):(A="m",A+="ous",A+="eu",A+="p",p="m",p+="o",p+="u",p+="semove",f(p,function(U){e.U$Q(),d.mousemove(U)}),f("mouseenter",function(U){e.e4i(),d.mousemove(U)}),f("mousedown",function(U){d.mousedown(U)}),f(A,function(U){d.mouseup(U)})),e.e4i(),w=o.wheelEvent,this.captureMouseWheelEvents&&f(w,function(U){e.e4i(),d.mouseWheel(U)},{passive:!1}))},o.ChartEngine.prototype.mousedown=function(l){var u,h,d,f,A,p,g,m,b,C,F,w;if(u="[d",u+="raggabl",u+="e",u+="]",!this.runPrepend("mousedown",arguments)&&(this.grabOverrideClick=!1,!!this.displayInitialized&&this.displayCrosshairs&&!this.repositioningDrawing&&!this.editingAnnotation&&!(l.target&&l.target.closest(u))&&!(l.button&&l.button>=2))){if(h=this.container.getBoundingClientRect(),this.top=h.top,this.left=h.left,this.right=this.left+this.width,this.bottom=this.top+this.height,l.clientX>=this.left&&l.clientX<=this.right&&l.clientY>=this.top&&l.clientY<=this.bottom)this.insideChart=!0;else{this.insideChart=!1;return}if(this.currentPanel){this.manageTouchAndMouse&&l&&l.preventDefault&&this.captureTouchEvents&&l.preventDefault(),this.mouseTimer=Date.now(),this.longHoldTookEffect=!1,this.hasDragged=!1,this.userPointerDown=!0,this.openDialog===""&&this.registerPointerEvent({x:l.clientX,y:l.clientY,time:this.mouseTimer},"down"),d=this.currentPanel.chart;for(var U=0;U<this.drawingObjects.length;U++)if(f=this.drawingObjects[U],f.highlighted&&!f.permanent){if(this.cloneDrawing){A=o.ChartEngine.drawingTools[f.name],p=new A,p.reconstruct(this,f.serialize()),this.drawingObjects.push(p),this.activateRepositioning(p),p.repositioner=f.repositioner;return}if(g=this.currentVectorParameters.vectorType,!o.Drawing||!g||!o.Drawing[g]||!new o.Drawing[g]().dragToDraw){this.activateRepositioning(f);return}}if(m=this.controls.anchorHandles,m){for(var B in m)if(b=m[B],C=b.handle,F=b.sd,w=b.highlighted,w){this.repositioningAnchorSelector={sd:F},C.classList.add("stx-grab");return}}this.drawingClick&&(this.currentPanel.subholder===l.target&&this.drawingClick(this.currentPanel,this.cx,this.cy),this.activeDrawing&&this.activeDrawing.dragToDraw)||(this.grabbingScreen=!0,d.spanLock=!1,this.yToleranceBroken=!1,this.grabStartX=l.clientX,this.grabStartY=l.clientY,this.grabStartMicropixels=this.micropixels,this.grabStartScrollX=d.scroll,this.grabStartScrollY=this.currentPanel.yAxis.scroll,this.grabStartCandleWidth=this.layout.candleWidth,this.grabStartYAxis=this.whichYAxis(this.currentPanel),this.grabStartZoom=this.grabStartYAxis?this.grabStartYAxis.zoom:0,this.grabStartScroll=this.grabStartYAxis?this.grabStartYAxis.scroll:0,this.grabStartPanel=this.currentPanel,setTimeout(function(k){return e.U$Q(),function(){k.grabbingHand()}}(this),100),this.swipeStart&&this.swipeStart(d),(this.longHoldTime||this.longHoldTime===0)&&this.startLongHoldTimer(),this.runAppend("mousedown",arguments))}}},o.ChartEngine.prototype.mousemove=function(l){var u,h;if(u="m",u+="ousemo",u+="v",u+="e",h=l,o.ChartEngine.crosshairX=h.clientX,o.ChartEngine.crosshairY=h.clientY,h.type.toLowerCase().indexOf("enter")>-("1"-0)){this.positionCrosshairsAtPointer();return}this.runPrepend("mousemove",arguments)||this.displayInitialized&&this.openDialog===""&&(this.grabbingScreen&&h.buttons!==1&&(this.cancelLongHold=!0,this.displayDragOK(),this.grabbingScreen=!1,this.findHighlights(!1,!0)),this.mousemoveinner(h.clientX,h.clientY),this.runAppend(u,arguments))},o.ChartEngine.prototype.mouseup=function(l){var u,h,d,f,A,p,g,m,b,C,F,w,U,B,k,y,S,T,_,L,H,P,N;if(u="s",u+="t",u+="x-dra",u+="g-chart",h="u",h+="p",!this.runPrepend("mouseup",arguments)){if(this.swipe.end=!0,this.cancelLongHold=!0,this.repositioningDrawing){if(!this.currentVectorParameters.vectorType||Date.now()-this.mouseTimer>("250"^0)){d="v",d+="ector",this.changeOccurred(d),o.clearCanvas(this.chart.tempCanvas,this),this.activateRepositioning(null),this.adjustDrawings(),this.draw();return}e.f4W(49),f=-e.E9E("1405422634",0),A=-1188332484,p=2;for(var v=1;e.R7z(v.toString(),v.toString().length,16840)!==f;v++)this.activateRepositioning(null),p+=2;e.V7r(p.toString(),p.toString().length,72976)!==A&&this.activateRepositioning(1)}if(this.repositioningAnchorSelector){g=this.repositioningAnchorSelector.sd,o.Studies.repositionAnchor(this,g),this.controls.anchorHandles[g.uniqueId]&&(this.repositioningAnchorSelector=null,this.controls.anchorHandles[g.uniqueId].highlighted=!1,o.Studies.displayAnchorHandleAndLine(this,g,this.chart.dataSegment),Object.values(this.controls.anchorHandles||{}).forEach(({handle:M})=>(e.U$Q(),M.classList.remove("stx-grab"))),this.findHighlights());return}if(m=this.userPointerDown,this.userPointerDown=!1,!!this.displayInitialized){if(b=this.backOutY(l.clientY),e.e4i(),C=this.backOutX(l.clientX),F=l.button&&l.button>=("2"^0),w=this.openDialog!=="",!w&&!F&&this.registerPointerEvent({x:l.clientX,y:l.clientY,time:Date.now()},h),this.grabbingScreen=!1,this.highlightedDraggable&&(this.dragPlotOrAxis&&this.dragPlotOrAxis(C,b),this.currentPanel=this.whichPanel(b)),U=this.currentPanel,this.grabStartYAxis=null,this.displayDragOK(),this.openDialog!==""){B="stx-drag",B+="-",B+="chart",this.insideChart&&this.container.classList.remove(B);return}if(this.grabOverrideClick){k="stx-drag-",k+="cha",k+="rt",!this.overXAxis&&!this.overYAxis&&this.swipeRelease&&this.swipeRelease(),this.container.classList.remove(k),this.grabOverrideClick=!1,this.doDisplayCrosshairs(),this.updateChartAccessories();return}if(this.insideChart&&this.container.classList.remove(u),o.ChartEngine.resizingPanel){this.releaseHandle();return}if(F||l.ctrlKey){if(y="ri",y+="ghtClick",this.anyHighlighted&&this.bypassRightClick!==!0){if(this.overYAxis){S=-166481421,T=-758822429,e.f4W(56),_=e.E9E(0,"2");for(var x=1;e.V7r(x.toString(),x.toString().length,44260)!==S;x++)L=U.yaxisLHS.concat(U.yaxisRHS).find(M=>(e.e4i(),M.highlight==!1)),_+=2;e.V7r(_.toString(),_.toString().length,4455)!==T&&(L=U.yaxisLHS.concat(U.yaxisRHS).find(M=>M.highlight===!0)),L&&L.showContextMenu&&L.showContextMenu(o.ChartEngine.crosshairX,o.ChartEngine.crosshairY)}return this.rightClickHighlighted(),l.preventDefault&&this.captureTouchEvents&&l.preventDefault(),l.stopPropagation(),!1}return this.dispatch(y,{stx:this,panel:U,x:C,y:b}),!0}l.clientX<this.left||l.clientX>this.right||l.clientY<this.top||l.clientY>this.bottom||(H=U&&U.subholder===l.target,this.isDoubleClick()&&(H||this.overYAxis||this.overXAxis)?(this.doubleClick(l.button,C,b),this.resetClickState()):(m&&H&&(this.drawingClick&&(!this.longHoldTookEffect||this.activeDrawing)&&this.drawingClick(U,C,b),!this.longHoldTookEffect&&this.activeMarker&&!this.activeMarker.params.noInteraction&&this.activeMarker.click({cx:C,cy:b,panel:U})),!this.longHoldTookEffect&&!this.activeDrawing&&(P="t",P+="a",P+="p",N=!0,this.anyHighlighted&&this.leftClickPinTooltip&&this.allowPinning&&this.highlightedPlot&&this.allowPinning(this.highlightedPlot.type)&&(N=!this.leftClickPinTooltip({cx:C,cy:b})),N&&this.dispatch(P,{stx:this,panel:U,x:C,y:b}))),this.runAppend("mouseup",arguments))}}},o.ChartEngine.prototype.registerPointerEvent=function(l,u){this.pointerEvents[u].length>1&&this.pointerEvents[u].pop(),this.pointerEvents[u].unshift(l)},o.ChartEngine.prototype.resetPointerEvent=function(l){e.e4i();var u,h,d;u=-1592369701,h=-243439773,d=2;for(var f=1;e.V7r(f.toString(),f.toString().length,63155)!==u;f++)e.h7R(9),this.pointerEvents[l].splice(e.D1M("2",0)),e.h7R(77),d+=e.E9E("2",32);e.R7z(d.toString(),d.toString().length,99736)!==h&&this.pointerEvents[l].splice(2),this.pointerEvents[l].splice(0)},o.ChartEngine.prototype.resetClickState=function(){var l;l="d",l+="o",l+="w",l+="n",this.resetPointerEvent("up"),this.resetPointerEvent(l),this.cancelTouchSingleClick=!0},o.ChartEngine.prototype.isDoubleClick=function(l){var u,h,d,f,A,p,g,m,b;return u=l?35:20,h=this.pointerEvents,d=Oi(h.up,2),f=d[0],A=d[1],p=Oi(h.down,2),g=p[0],m=p[1],b=A&&m&&g.time-A.time<this.doubleClickTime&&o.withinRadius(m,g,u)&&o.withinRadius(A,g,u)&&A.time-m.time<this.longHoldTime&&f.time-g.time<this.longHoldTime,this.cancelTouchSingleClick=b,b},o.ChartEngine.prototype.doubleClick=function(l,u,h){var d,f,A;if(d="do",d+="ub",d+="leClick",!this.runPrepend("doubleClick",arguments)&&!this.editingAnnotation){if(o.ChartEngine.drawingLine)return f="c",f+="ont",f+="in",f+="uous",this.currentVectorParameters.vectorType==f&&o.ChartEngine.completeDrawing(this),this.undo();this.activeDrawing||(A=this.activeMarker&&this.activeMarker.doubleClick({cx:u,cy:h,panel:this.currentPanel}),A||this.dispatch("doubleClick",{stx:this,button:l,x:u,y:h}),e.U$Q(),this.runAppend(d,arguments))}},o.ChartEngine.prototype.handleMouseOut=function(l){var u,h,d,f,A,p,g;if(l=l||window.event,e.e4i(),!l.relatedTarget||!o.withinElement(this.chart.container,l.pageX,l.pageY)){if(u="ha",u+="ndleM",u+="o",u+="useOut",this.runPrepend(u,arguments))return;this.grabbingScreen||this.findHighlights(null,!0),this.undisplayCrosshairs(),this.touches=[],this.touching=!1,this.activeDrawing&&this.userPointerDown&&(this.userPointerDown=!1,this.drawingLine=!1,h=this.backOutY(l.pageY),d=this.backOutX(l.pageX),this.drawingClick(this.currentPanel,d,h)),f=this.repositioningAnchorSelector||{},A=f.sd,p=f.tapToAdd,A&&!p&&(this.repositioningAnchorSelector=null,this.controls.anchorHandles[A.uniqueId].highlighted=!1,o.Studies.displayAnchorHandleAndLine(this,A,this.chart.dataSegment),this.draw()),this.insideChart=!1,this.overYAxis=!1,this.overXAxis=!1,this.displaySticky(),g=this.controls.dragOk,g&&(g.style.display="none"),this.runAppend("handleMouseOut",arguments)}},o.ChartEngine.prototype.startLongHoldTimer=function(l){var u,h;u=this,this.cancelLongHold=!1,this.longHoldTimeout&&clearTimeout(this.longHoldTimeout),h=function(){u.cancelLongHold||(e.U$Q(),u.longHoldTookEffect=!0,l&&l(),u.dispatch("longhold",{stx:u,panel:u.currentPanel,x:u.cx,y:u.cy}),u.displayDragOK())},this.longHoldTime?this.longHoldTimeout=setTimeout(h,this.longHoldTime):this.longHoldTime===0&&h()},o.ChartEngine.prototype.grabHandle=function(l){var u;u="grab",u+="H",u+="a",u+="ndle",!this.runPrepend(u,arguments)&&l&&(o.ChartEngine.crosshairY=this.resolveY(l.top),o.ChartEngine.resizingPanel=l,l.handle.classList.add("stx-grab"),e.U$Q(),this.runAppend("grabHandle",arguments))},o.ChartEngine.prototype.grabbingHand=function(){this.allowScroll&&this.grabbingScreen&&(o.touchDevice||this.container.classList.add("stx-drag-chart"))},o.ChartEngine.prototype.releaseHandle=function(){if(this.runPrepend("releaseHandle",arguments))return!0;o.clearCanvas(this.chart.tempCanvas,this),this.resizePanels(),o.ChartEngine.resizingPanel&&o.ChartEngine.resizingPanel.handle.classList.remove("stx-grab"),o.ChartEngine.resizingPanel=null,this.runAppend("releaseHandle",arguments)},o.ChartEngine.prototype.findHighlights=function(l,u){var h,d,f,A,p,g,m,b,C,F,w,U,B,k,y,S,T,_,L,H,P,N,v,x,M,D,Q,q,O,R,V,K,Y,G,J,Z,ee,X,ne,se,oe,ae,Ae,he,ge,ie,re,de,ce,fe,me,ve,pe,be,Se,Ee,Ie,Qe,Ne,De,Re,_e,Ue,He,Pe,We,Ge,je;function Je(Ke,At){var st,it,rt,$e,yt;if(Array.isArray(Ke)){for(st="tra",st+="nsp",st+="arent)",it="linear-gradient(to right, ",rt=0,$e=Math.min(3,Ke.length);rt<$e;rt++){yt="%",yt+=",",yt+=" ",e.h7R(58);var qe=e.E9E(300,17,5e3);it+=Ke[rt]+" "+Math.round(qe*rt/$e)+yt,e.h7R(106);var ft=e.D1M(3,3283,3,165,5);e.f4W(107);var ze=e.E9E(16,2,526,4221,9);e.f4W(108);var pt=e.D1M(8831,8843,8,8831);e.f4W(0),e.D1M(16,6664),e.f4W(109);var wt=e.D1M(1,2,9265,18530,1089);e.f4W(64);var vt=e.D1M(7,4840,67760);e.h7R(110);var Dt=e.E9E(7,104,88,3,17);it+=Ke[rt]+(ft<=ze?pt>wt?" ":vt:!0)+Math.round(Dt*(rt+("1"-0))/$e)+"%, "}return it+=st,it}return Ke=="auto"&&(Ke=this.defaultColor),At&&At!==1&&(Ke=o.hexToRgba(o.colorToHex(Ke),parseFloat(At))),Ke}if(h=this.preferences[l?"highlightsTapRadius":"highlightsRadius"],this.highlightViaTap=l,d=this.cx,f=this.cy,this.anyHighlighted=!1,!this.currentPanel)return;if(A=this.currentPanel.chart,this.activeDrawing&&(u=!0),p=!1,g=null,m=u?{}:{forceShow:!0,type:"drawing"},b={x0:this.tickFromPixel(d-h,A),x1:this.tickFromPixel(d+h,A),y0:this.valueFromPixel(f-h,this.currentPanel),y1:this.valueFromPixel(f+h,this.currentPanel),cx0:d-h,cx1:d+h,cy0:f-h,cy1:f+h,r:h},this.repositioningDrawing&&b.x1-b.x0<2?(b.x1++,b.x0--):b.x1==b.x0&&(b.x0-=.5,b.x1+=.5),!A.hideDrawings)for(var Oe=this.drawingObjects.length-1;Oe>=0;Oe--){if(C=this.drawingObjects[Oe],F=this.panels[C.panelName],C.hidden||!F||C.field&&!this.getYAxisByField(F,C.field)){C.highlighted=!1;continue}this.repositioningDrawing&&this.repositioningDrawing!=C||(w=C.highlighted,U=C.panelName==this.currentPanel.name||C.spanPanels,U&&(C.repositioner=C.intersected(this.crosshairTick,this.crosshairValue,b)),U=U&&C.repositioner&&!this.overXAxis&&!this.overYAxis,!u&&U?(w?(g=C,this.anyHighlighted&&this.singleDrawingHighlight&&(C.highlighted=!1),C.highlighted&&C.highlighted!=w&&(p=!0)):w!=C.highlight(!0)&&(g||(g=C),this.anyHighlighted&&this.singleDrawingHighlight&&(C.highlighted=!1),p=!0),this.anyHighlighted=!0):w!=C.highlight(!1)&&(p=!0),C.highlighted&&(m.noDelete=C.permanent,m.noEdit=!this.callbackListeners.drawingEdit.length,m.noText=m.noEdit||!C.edit,m.message=this.translateIf(o.capitalize(C.name))))}for(B in this.layout.studies)k=this.layout.studies[B],k.prev=k.highlight,k.highlight=this.yaxisMatches(k,this.grabStartYAxis);for(B in A.seriesRenderers){_=A.seriesRenderers[B],_.params.highlight=this.yaxisMatches(_,this.grabStartYAxis);for(var nt=0;nt<_.seriesParams.length;nt++)T=_.seriesParams[nt],T.prev=T.highlight,T.highlight=_.params.highlight}if(L=this.controls.anchorHandles,L)for(var Ze in L)L[Ze].highlighted=!1;if(H=this.markerHelper&&this.markerHelper.visibleCanvasMarkers,H)for(y="0"-0;y<H.length;y++)S=H[y],this.activeMarker=null,S.prev=S.highlight,S.highlight=!1;if(this.markerHelper&&(this.markerHelper.highlighted=[]),this.highlightedDataSetField=null,this.highlightedPlot={},this.highlightedDraggable=null,!u&&!this.anyHighlighted&&L){for(var Le in L)if(P=L[Le],o.getFromNS(P,"sd.signalData.reveal")!==!1){if(!this.anyHighlighted&&(N=P.sd,v=P.currentPixel,e.f4W(9),x=e.E9E(v,h),e.f4W(0),M=e.E9E(h,v),D=this.panels[N.panel],Q=D.yAxis,q=Q.top,O=Q.bottom,R=o.boxIntersects(x,q,M,O,d,f,d,f),R)){this.anyHighlighted=!0,P.highlighted=!0,p=!0,m={message:N.name,type:"anchorHandle",noDelete:!0};continue}P.highlighted===!0&&(P.highlighted=!1,p=!0)}}if(!u&&!this.anyHighlighted&&A.dataSegment&&(V=this.barFromPixel(d),V>=0&&V<A.dataSegment.length)){if(Y=o.convertBoxToPixels(this,this.currentPanel.name,b),G=Number.MAX_VALUE,H){for(y=0;y<H.length;y++)if(S=H[y],J=S.params.box,!!J&&S.params.panelName===this.currentPanel.name){if(o.boxIntersects(Y.x0,Y.y0,Y.x1,Y.y1,J.x0,J.y0,J.x1,J.y1)){e.f4W(31);var et=e.E9E(13,11);e.f4W(111);var Ye=e.D1M(5,18,1,88);Z=Math.pow(f-(J.y1+J.y0)/("2">>0),et)+Math.pow(d-(J.x1+J.x0)/Ye,"2">>0),Z<=G&&(G=Z,this.activeMarker=S),this.anyHighlighted=!0,m={},S.highlight=!0,this.markerHelper.highlighted.push(S)}S.prev!=S.highlight&&(p=!0)}}if(!this.anyHighlighted){G=Number.MAX_VALUE,ee=null;for(B in this.overlays){if(H&&this.markerHelper.highlighted.length)break;if(k=this.overlays[B],!(k.signalData&&!k.signalData.reveal)&&!k.disabled&&k.panel==this.currentPanel.name&&k.study.isHighlighted!==!1){if(typeof k.study.isHighlighted=="function"){if(X=k.study.isHighlighted(this,d,f),X){ne=X===!0?k.study.name:X,ee={o:k,out:ne},G=0;break}continue}if(se=A.dataSegment[V],!!se)for(var Ve in k.outputMap)oe=ct.call(this,V,b,Ve,k.getYAxis(this)),oe!==!1&&oe<=G&&(ee={o:k,out:Ve},G=oe)}}for(B in A.seriesRenderers){if(this.highlightedDataSetField)break;if(ae=A.seriesRenderers[B],Ae=ae.params.panel,!(!this.leftClickPinTooltip&&ae==this.mainSeriesRenderer)&&!(!ae.params.highlightable&&!this.currentVectorParameters.vectorType)&&Ae==this.currentPanel.name){for(y=0;y<ae.seriesParams.length;y++)if(he="-",he+="-",he+=">",ge="C",ge+="lo",ge+="s",ge+="e",T=ae.seriesParams[y],!T.disabled)if(ie=T.field||this.defaultPlotField||ge,T.symbol&&T.subField&&(ie+=he+T.subField),re=ae.params.yAxis,!re&&Ae&&(re=this.panels[Ae].yAxis),ae.params.step&&V>("0"|0)){if(!ae.caches[T.id]||(K=ae.caches[T.id][V],!K&&K!=="0">>0))continue;if(e.f4W(9),de=ae.caches[T.id][e.D1M(V,1)],(de||de===0)&&f+h>=K&&f-h<=de||f-h<=K&&f+h>=de){ee={s:T,fullField:ie};break}}else ce=ct.call(this,V,b,ie,re,ae,T.id),ce!==!1&&ce<=G&&(ee={s:T,fullField:ie},G=ce)}}ee&&(this.highlightedPlot=ee,k=ee.o,k?(fe="st",fe+="u",fe+="d",fe+="y",ee.type=fe,k.name!=k.panel&&(this.anyHighlighted=!0),k.highlight=ee.out,this.highlightedDataSetField=ee.out):(ee.type="series",this.anyHighlighted=!0,ee.s.highlight=!0,this.highlightedDataSetField=ee.fullField))}}function ct(Ke,At,st,it,rt,$e){var yt,qe,ft,ze,pt,wt,vt,Dt,Pt,Ht,Ft,kt,ht,Vt,Ot,_t,St,Nt,Mt,Tt,Zt,It,jt,Kt;e.e4i(),yt="s",yt+="egment";function Ai(mt){var Qt,Wt,ei,ti,zt,Yt;if(!mt)return null;if(Qt=mt[wt],Qt&&(Qt[vt]||Qt[vt]===("0"|0))&&(Qt=Qt[vt]),e.U$Q(),rt&&rt.getBasis&&(Qt+=rt.getBasis(mt,wt,vt)),Wt=qe.getTransformFunction(it),!Wt)return Qt;if(ei=qe.getTransformedQuote(mt,it),ei&&wt in ei)return Qt=ei[wt],Qt&&(Qt[vt]||Qt[vt]===0)&&(Qt=Qt[vt]),Qt;ti=1192296164,zt=-1766625009,Yt=2;for(var ai="1"^0;e.V7r(ai.toString(),ai.toString().length,39830)!==ti;ai++)return Wt(qe,ft,Qt);return e.R7z(Yt.toString(),Yt.toString().length,534)!==zt,Wt(qe,ft,Qt)}if(qe=this,ft=qe.chart,ze=qe.currentPanel,it||(it=ze.yAxis),pt=st.split("-->"),wt=pt[0],e.f4W(1),vt=pt[e.D1M(1,"1")],vt||(vt="Close"),Dt=ft.dataSegment[V],Vt=null,Ot=null,_t=null,St=new Array(3),Nt=rt&&rt.caches[$e],Dt&&Nt){for(Ft=Nt[V],Vt=Dt.tick,(Ft||Ft===0)&&(St[0]=1),Mt=V-1;Mt>=0;Mt--)if(Nt[Mt]||Nt[Mt]===0){kt=Nt[Mt],e.h7R(112),Ot=e.E9E(V,Mt,Vt),St[1]=1;break}for(Mt=V+1;Mt<ft.dataSegment.length;Mt++)if(Nt[Mt]||Nt[Mt]===0){ht=Nt[Mt],e.f4W(112),_t=e.E9E(V,Mt,Vt),St[2]=1;break}}if(Ot===null&&(Pt=qe.getPreviousBar.call(qe,ft,st,V),Pt&&(Ot=Pt.tick,kt=Ai(Pt))),_t===null&&(Ht=qe.getNextBar.call(qe,ft,st,V),Ht&&(_t=Ht.tick,ht=Ai(Ht))),Ot===null&&_t===null)return!1;if(Nt||(Ft=Ai(Dt),kt=Ai(Pt),ht=Ai(Ht),Vt=Dt.tick,Pt&&(Ot=Pt.tick),Ht&&(_t=Ht.tick)),!kt&&kt!==0&&(kt=0,Ot=0),!ht&&ht!==0)if(Ft||Ft===0?(ht=Ft,St[2]=St[0]):(ht=kt,St[2]=St[1]),$e&&ft.series[$e]&&ft.series[$e].parameters.extendToEndOfDataSet){e.f4W(68);var xi=e.D1M(5,9,7,8);_t=ft.dataSet.length-xi}else _t=Ot;return!Ft&&Ft!=="0"-0&&(Ft=ht,Vt=_t,St[0]=St[2],kt==="0"-0&&Ot===0&&(kt=Ft,Ot=Vt,e.f4W(1),St[1]=St[e.D1M(1,"0")])),Tt=qe.pixelFromTransformedValue.bind(qe),Zt=qe.valueFromPixel.bind(qe),Ft=Zt(St[0]?Ft:Tt(Ft,ze,it),ze),kt=Zt(St[1]?kt:Tt(kt,ze,it),ze),ht=Zt(St[2]?ht:Tt(ht,ze,it),ze),It=o.convertBoxToPixels(qe,ze.name,At),jt=o.convertBoxToPixels(qe,ze.name,{x0:Ot,y0:kt,x1:Vt,y1:Ft}),Kt=o.convertBoxToPixels(qe,ze.name,{x0:Vt,y0:Ft,x1:_t,y1:ht}),o.boxIntersects(It.x0,It.y0,It.x1,It.y1,jt.x0,jt.y0,jt.x1,jt.y1,yt)||o.boxIntersects(It.x0,It.y0,It.x1,It.y1,Kt.x0,Kt.y0,Kt.x1,Kt.y1,"segment")?Math.min(Math.pow(f-(jt.y1+jt.y0)/2,"2">>0)+Math.pow(d-(jt.x1+jt.x0)/2,2),Math.pow(f-(Kt.y1+Kt.y0)/2,2)+Math.pow(d-(Kt.x1+Kt.x0)/2,2)):!1}ve=this.preferences.dragging;for(B in this.overlays)k=this.overlays[B],k.highlight&&(this.anyHighlighted=!0,be=k.inputs.display||k.name,be=this.translateIf(be),m={message:be,noDelete:k.permanent,noEdit:!k.editFunction,noText:!k.textFunction,noDrag:k.undraggable&&k.undraggable(this),type:"study",backgroundColor:Je(A.legendColorMap[k.name]&&A.legendColorMap[k.name].color)},g=null,(ve===!0||ve&&ve.study)&&(k.undraggable(this)||(me=k)),pe=k.getYAxis(this)),k.prev!=k.highlight&&(p=!0);for(B in A.seriesRenderers){Se=A.seriesRenderers[B],Ee=Se.params.yAxis?Se.params.yAxis.textStyle:null;for(var ot=0;ot<Se.seriesParams.length;ot++)T=Se.seriesParams[ot],Se.params.highlightable&&T.highlight&&(Ie="s",Ie+="er",Ie+="ie",Ie+="s",this.anyHighlighted=!0,Qe=A.legendColorMap[B]&&A.legendColorMap[B].color||T.color||Ee,Qe=Je(Qe,T.opacity),m={message:T.display||T.symbol,backgroundColor:Qe,noDelete:Se.params.permanent||T.permanent,noDrag:Se.undraggable&&Se.undraggable(this),type:Ie},g=null,(ve===!0||ve&&ve.series)&&(me=Se,Se.params.highlight=!0),pe=Se.getYAxis(this)),T.prev!=T.highlight&&(p=!0)}for(B in this.plugins)Ne=this.plugins[B],De={},Ne.findHighlights&&(De=Ne.findHighlights(this,l,u),De.somethingChanged&&(p=!0),De.anyHighlighted&&(this.anyHighlighted=!0,m=De.stickyArgs||{}));Re=this.whichPanel(f),_e=this.whichYAxis(Re,d),pe||(pe=_e),this.currentBaseline&&(pe=this.currentBaseline.getYAxis(this)),pe&&(pe.highlight||(p=!0),pe.highlight=!0),Ue=[];for(var dt in this.panels)Ue=Ue.concat(this.panels[dt].yaxisLHS).concat(this.panels[dt].yaxisRHS);for(B=0;B<Ue.length;B++)pe==Ue[B]&&!u||(Ue[B].highlight&&(p=!0),Ue[B].highlight=!1);if((ve===!0||ve&&ve.yaxis)&&_e&&!_e.noDraw&&(this.anyHighlighted=!0,me=_e,m={}),p&&(this.draw(),m.panel=Re,this.anyHighlighted&&!this.grabStartYAxis?m.panel=Re:m={},this.displaySticky(m),this.clearMeasure(),g&&g.measure()),this.anyHighlighted?this.controls.mSticky&&(m&&m.positioner?m.positioner.call(this,this.controls.mSticky):this.positionSticky(this.controls.mSticky)):this.setMeasure(),me&&Re&&!Re.noDrag){if(this.longHoldTookEffect&&!this.cancelLongHold){if(me.params){me.params.dependentOf&&(me=A.seriesRenderers[me.params.dependentOf],me.params.highlight=!0);for(B in A.seriesRenderers)A.seriesRenderers[B].params.dependentOf==me.params.name&&(A.seriesRenderers[B].params.highlight=!0)}He=-740111211,e.f4W(77),Pe=e.E9E("504965110",64),We=2;for(var xt=1;e.R7z(xt.toString(),xt.toString().length,80790)!==He;xt++)this.highlightedDraggable=me,We+=2;if(e.V7r(We.toString(),We.toString().length,33354)!==Pe&&(this.highlightedDraggable=me),me.getDependents){Ge=me.getDependents(this,!0);for(B in this.overlays)k=this.overlays[B],Ge.indexOf(k)>-1&&(k.highlight=!0)}}m.noDrag||this.container.classList.add("stx-draggable")}else je="st",je+="x-dragga",je+="ble",this.container.classList.remove(je);this.highlightedDataSetField=this.adjustHighlightedDataSetField(this.highlightedDataSetField),this.displayDrawOK()},o.ChartEngine.prototype.rightClickHighlighted=function(){var l;e.e4i(),l="rig",l+="htCl",l+="ickHighlight",l+="ed",!this.runPrepend(l,arguments)&&(this.deleteHighlighted(!0),this.runAppend("rightClickHighlighted",arguments))},o.ChartEngine.prototype.deleteHighlighted=function(l,u,h){var d,f,A,p,g,m,b,C,F,w,U,B,k,y;if(d="deleteHighli",d+="ght",d+="ed",f="dele",f+="teHighli",f+="ghte",f+="d",!this.runPrepend(f,arguments)){if(this.cancelTouchSingleClick=!0,o.clearCanvas(this.chart.tempCanvas,this),A=this.bypassRightClick===!1,A||!this.bypassRightClick.drawing)for(var S=this.drawingObjects.length-1;S>=0;S--)p=this.drawingObjects[S],p.highlighted&&(l?this.rightClickDrawing(p,u,h):p.permanent||(g=p.abort(),g||(m=this.exportDrawings(),this.drawingObjects.splice(S,1),this.undoStamp(m,this.exportDrawings())),this.changeOccurred("vector")));if(A||!this.bypassRightClick.study)for(var T in this.overlays)b=this.overlays[T],(b.overlay||b.underlay)&&b.highlight&&!b.permanent&&(l||u?this.rightClickOverlay(T,u):this.removeOverlay(T));if(C=this.currentPanel&&this.currentPanel.chart,C&&(A||!this.bypassRightClick.series)){for(var _ in C.seriesRenderers)if(F=C.seriesRenderers[_],F.params.highlightable&&!F.params.permanent){w=this.panels[F.params.panel],U=w&&w.yAxis.name;for(var L=F.seriesParams.length-1;L>=0;L--)B=F.seriesParams[L],(F.params.highlight||B.highlight)&&!B.permanent&&(F.removeSeries(B.id),F.seriesParams.length<1&&(this.removeSeriesRenderer(F),F.params.name==U?this.electNewPanelOwner(F.params.panel):(this.checkForEmptyPanel(F.params.panel),k=this.getYAxisByName(w,F.params.name),k&&(k.name=k.studies[0]||k.renderers[1]))))}}this.draw(),!l&&!u&&this.resizeChart(),this.clearMeasure(),y=this.controls.mSticky,y&&(y.style.display="none",y.querySelector(".mStickyInterior").innerHTML=""),this.runAppend(d,arguments)}},o.ChartEngine.prototype.displayDragOK=function(l){e.U$Q();var u,h,d,f,A,p,g,m,b,C,F,w,U,B,k,y,S,T,_,L,H;u=this,h=this.controls.dragOk;function P(v){var x,M,D;x=".fi",x+="eld",e.e4i(),M=u.translateIf(v.querySelector(x).getAttribute("text")),D=u.whichYAxis(u.whichPanel(u.cy),u.cx,u.cy),D&&D.dropzone=="all"&&(M+="-->"+u.translateIf(D.name)),v.querySelector(".field").innerHTML=M}if(h){if(l||(!this.tapForHighlighting||!this.touching||this.anyHighlighted)&&this.findHighlights(this.highlightViaTap),d=this.highlightedDraggable,f=d&&d.undraggable&&d.undraggable(this),A=this.cx,p=this.cy,g=d&&!f&&this.longHoldTookEffect,l)g&&this.insideChart&&(h.style.display="inline-block");else{if(g&&!this.cancelLongHold)m="stx-",m+="drag-series",b="s",b+="tx-drag",b+="-chart",C=".fie",C+="ld",F=d.inputs&&d.inputs.display||d.params&&(d.params.display||d.params.name)||d.name,h.querySelector(C).setAttribute("text",F),P.call(this,h),h.style.display="inline-block",this.draw(),this.displaySticky(),this.grabStartYAxis?this.container.classList.replace("stx-drag-chart","stx-drag-axis"):this.container.classList.replace(b,m);else{h.style.display="none",this.draw(),this.container.classList.remove("stx-drag-series"),this.container.classList.remove("stx-drag-axis");for(var N in this.panels){for(w="bot",w+="to",w+="m",U="t",U+="o",U+="p",B="a",B+="ll",k="drop",k+="zo",k+="ne",y=this.panels[N].subholder.classList,y.remove(k),y.remove(B),y.remove("left"),y.remove("right"),y.remove(U),y.remove(w),S=0;S<this.panels[N].yaxisLHS.length;S++)this.panels[N].yaxisLHS[S].dropzone=null;for(S=0;S<this.panels[N].yaxisRHS.length;S++)this.panels[N].yaxisRHS[S].dropzone=null}}this.draw()}d&&(T="p",T+="x",_="p",_+="x",L=p+h.offsetHeight,H=Math.max(0,A-h.offsetWidth),e.f4W(0),h.style.top=e.E9E(_,L),e.h7R(0),h.style.left=e.D1M(T,H),P.call(this,h))}},o.ChartEngine.prototype.displayDrawOK=function(){var l,u,h,d,f;l=this.controls.drawOk,l&&o.Drawing&&(u=o.Drawing[this.currentVectorParameters.vectorType],u&&(u=new u),this.highlightedDataSetField&&u&&u.isAllowed(this,this.highlightedDataSetField)?(h="i",h+="nline-block",l.style.display=h,d=this.cy+l.offsetHeight,f=this.cx-l.offsetWidth,e.f4W(0),l.style.top=e.D1M("px",d),e.h7R(0),l.style.left=e.D1M("px",f),l.querySelector(".field").innerHTML=this.translateIf(this.highlightedDataSetField)):l.style.display="none")},e.U$Q(),o.ChartEngine.prototype.mouseWheel=function(l){var u,h,d,f,A,p,g,m,b;if(u="ve",u+="rtica",u+="l",h="mouseWh",h+="eel",!this.runPrepend(h,arguments)&&(l.preventDefault&&l.preventDefault(),this.openDialog===""&&(d=l.deltaX,f=l.deltaY,Math.abs(f)>Math.abs(d)?d=0:f=0,this.lastMouseWheelEvent=Date.now(),!(Math.abs(d)===0&&Math.abs(f)===0)))){if(l.shiftKey&&f&&(d=f,f=0),this.allowSideswipe&&d!==0){this.lastMove="horizontal",p=d,this.grabbingScreen=!0,this.currentPanel||(this.currentPanel=this.chart.panel),this.grabStartX=o.ChartEngine.crosshairX,this.grabStartY=o.ChartEngine.crosshairY,this.grabStartScrollX=this.chart.scroll,this.grabStartScrollY=this.currentPanel.yAxis.scroll,this.grabStartMicropixels=this.micropixels,this.grabStartPanel=this.currentPanel,this.mouseWheelAcceleration&&(A=Math.max(Math.pow(Math.abs(p),+"0.3"),1),p*=A),this.mousemoveinner(o.ChartEngine.crosshairX-p,o.ChartEngine.crosshairY),o.ChartEngine.crosshairX=this.crosshairX=l.clientX,this.updateChartAccessories(),this.grabbingScreen=!1;return}if(this.lastMove=u,e.U$Q(),!(!this.allowZoom||this.activeDrawing&&!this.allowDrawingZoom)&&this.displayInitialized){if(!f)if(o.wheelEvent=="mousewheel"){e.f4W(78);var C=e.E9E(11,18,1,5);e.h7R(76);var F=e.D1M(279,11,42,13);if(f=C/F*l.wheelDelta,l.wheelDeltaX){e.f4W(113);var w=e.E9E(4,9,485,9,18);e.f4W(9);var U=e.E9E(51,11);d=w/U*l.wheelDeltaX}}else f=l.detail;if(typeof l.deltaMode>"u"&&(l.deltaMode=l.type=="MozMousePixelScroll"?0:1),g=-f,l.deltaMode==1&&(g*=33),m=null,b=null,this.mouseWheelAcceleration&&(A=Math.max(Math.pow(Math.abs(g),.3),"1">>64),m=Math.max(Number.MIN_VALUE,1-.1*A),e.f4W(114),b=e.E9E(m,"1")),this.zoomInitiatedByMouseWheel=!0,g>0?this.reverseMouseWheel?this.zoomOut(null,b):this.zoomIn(null,m):g<0&&(this.reverseMouseWheel?this.zoomIn(null,m):this.zoomOut(null,b)),!this.runAppend("mouseWheel",arguments))return!1}}},o.ChartEngine.handleContextMenu=function(l){var u,h;u=o.ChartEngine.registeredContainers,e.e4i();for(var d=0;d<u.length;d++)if(l.target.ownerDocument===u[d].ownerDocument&&(h=u[d].stx,h&&h.anyHighlighted))return l.preventDefault&&l.preventDefault(),!1},o.ChartEngine.registerGlobalEvent(a,o.ChartEngine.handleContextMenu),o.ChartEngine.htmlControls={annotationSave:i,annotationCancel:'<span class="stx-btn stx_annotation_cancel" style="display: none; margin-left:10px;"></span>',mSticky:`
		<div class="stx_sticky">
			<span class="label">
				<span class="mStickyThumbnail"></span>
				<span class="mStickyInterior"></span>
			</span>
			<span class="mousePinTooltip">(left-click to pin tooltip)</span>
			<span class="mStickyRightClick">
				<span class="overlayText stx-btn" style="display:none">
					<span>&nbsp;</span>
				</span>
				<span class="overlayEdit stx-btn" style="display:none">
					<span>&nbsp;</span>
				</span>
				<span class="overlayTrashCan stx-btn" style="display:none">
					<span>&nbsp;</span>
				</span>
				<span class="mouseDeleteInstructions">
					<span>(</span>
					<span class="mouseDeleteText">right-click to delete</span>
					<span class="mouseManageText">right-click to manage</span>
					<span>)</span>
				</span>
			</span>
			<span class="stickyLongPressText">(long-press to drag)</span>
			<span class="customInstructions">
				<span>(</span>
				<span class="dragAnchorText" type="anchorHandle">
					drag to change anchor time
				</span>
				<span>)</span>
			</span>
		</div>
	`,drawOk:'<div class="stx_draw_ok"><div class="icon"></div><div class="field"></div></div>',dragOk:r,crossX:n,crossY:'<div class="stx_crosshair stx_crosshair_y" style="display: none;"></div>',chartControls:`<div class="stx_chart_controls" style="display: none;">
		<div class="chartSize">
			<span class="stx-zoom-out" role="button" aria-label="Zoom Out"></span>
			<span class="stx-zoom-in" role="button" aria-label="Zoom In"></span>
		</div></div>`,home:'<div class="stx_jump_today" role="button" aria-label="Home" style="display:none"><span></span></div>',floatDate:s,handleTemplate:'<div class="stx-ico-handle" style="display: none;"><span></span></div> ',iconsTemplate:'<div class="stx-panel-control"><div class="stx-panel-title"></div><div class="stx-panel-legend"></div><div class="stx-btn-panel"><span class="stx-ico-up"></span></div><div class="stx-btn-panel"><span class="stx-ico-focus"></span></div><div class="stx-btn-panel"><span class="stx-ico-down"></span></div><div class="stx-btn-panel"><span class="stx-ico-edit"></span></div><div class="stx-btn-panel"><span class="stx-ico-close"></span></div></div>',baselineHandle:t,notificationTray:'<div class="stx_notification_tray"><template><div><span class="icon"></span><span class="message"></span></div></template></div>'},o.ChartEngine.prototype.registerChartControl=function(l,u,h){var d,f,A,p,g,m;if(d=this.controls,!(!d||!d.chartControls)&&!d.chartControls.querySelector("."+l)&&(f=null,A=d.chartControls.querySelector(".stx-zoom-in"),A))return p="<",p+="/d",p+="iv",p+=">",g='<div class="stx-tooltip" a',g+='ria-hidden="true',g+='">',m="but",m+="t",m+="o",m+="n",f=document.createElement("span"),f.ariaLabel=u,f.role=m,e.f4W(15),f.innerHTML=e.D1M(u,p,g),e.h7R(0),f.className=e.D1M(l,"stx-chart-control-button "),A.parentNode.appendChild(f),h&&o.safeClickTouch(f,h,{keyboardClick:!0}),f},o.ChartEngine.prototype.zoomOut=function(l,u){var h,d,f,A;e.U$Q();function p(m){return function(b){var C;if(h.zoomSet(b,m),h.animations.zoom.hasCompleted){if(C="la",C+="y",C+="ou",C+="t",h.runAppend("zoomOut",arguments))return;h.changeOccurred(C),h.continuousZoom&&h.continuousZoom.execute(!0)}}}if(!this.runPrepend("zoomOut",arguments)){this.preferences.zoomOutSpeed?u=this.preferences.zoomOutSpeed:u||(e.h7R(10),u=e.E9E(1,.7)),l&&l.preventDefault&&l.preventDefault(),this.cancelTouchSingleClick=!0,h=this;for(var g in this.charts)d=this.charts[g],f=d.width*u/this.layout.candleWidth,d.allowScrollFuture===!1&&d.allowScrollPast===!1&&f>d.dataSet.length&&(f=d.dataSet.length),A=this.chart.width/f,this.layout.setSpan=null,this.layout.range=null,this.animations.zoom.run(p(d),this.layout.candleWidth,A,!1,this.ownerWindow)}},o.ChartEngine.prototype.zoomIn=function(l,u){var h,d,f,A;if(this.runPrepend("zoomIn",arguments))return;this.preferences.zoomInSpeed?u=this.preferences.zoomInSpeed:u||(u=.7),l&&l.preventDefault&&l.preventDefault(),this.cancelTouchSingleClick=!0;function p(b){return function(C){if(h.zoomSet(C,b),h.animations.zoom.hasCompleted){if(h.runAppend("zoomIn",arguments))return;h.changeOccurred("layout"),h.continuousZoom&&h.continuousZoom.execute()}}}h=this;for(var g in this.charts){if(d=this.charts[g],f=d.width*u/this.layout.candleWidth,d.maxTicks-f<1){e.f4W(115);var m=e.D1M(64,12,20,9,3);f=d.maxTicks-m}f<this.minimumZoomTicks&&(f=this.minimumZoomTicks),A=this.chart.width/f,this.layout.setSpan=null,this.layout.range=null,this.animations.zoom.run(p(d),this.layout.candleWidth,A,!1,this.ownerWindow)}},o.ChartEngine.prototype.createCrosshairs=function(){var l,u,h;l="createC",l+="rossha",l+="ir",l+="s",!this.runPrepend(l,arguments)&&(!this.manageTouchAndMouse||this.mainSeriesRenderer.nonInteractive||(u=this.controls.crossX,h=this.controls.crossY,u&&(u.onmousedown||(u.onmousedown=function(d){return e.U$Q(),d.preventDefault&&d.preventDefault(),!1})),h&&(h.onmousedown||(h.onmousedown=function(d){return d.preventDefault&&d.preventDefault(),!1})),this.runAppend("createCrosshairs",arguments)))},c=!1,o.ChartEngine.prototype.mousemoveinner=o.ChartEngine.prototype.mousemoveinner||function(l,u){e.e4i(),c||console.error("interaction feature requires activating movement feature."),c=!0}};Xn=E=>{var e=ke;e.e4i();var t;t=typeof _CIQ<"u"?_CIQ:E.CIQ,t.Marker||(t.ChartEngine.helpersToRegister.push(function(s){e.U$Q(),s.markerHelper={classMap:{},domMarkers:[],visibleCanvasMarkers:[],highlighted:[],placementMap:{},groupMap:{},fieldPanelMap:{}}}),t.ChartEngine.prototype.addToMarkerMapping=function(s){var n,r,i,a,o,c;this.removeFromHolder(s),e.f4W(49),n=-e.D1M("704705107",0),r=761220230,i=2;for(var l=1;e.V7r(l.toString(),l.toString().length,"91628"|44)!==n;l++){if(a=this.panels[s.params.panelName],~a)return;s.chart=a.chart,o=this.markerHelper.classMap[s.className],~o&&(o=this.markerHelper.classMap[s.className]={}),~o[s.params.panelName]&&(o[s.params.panelName]=[]),o[s.params.panelName].push(s),i+=2}if(e.V7r(i.toString(),i.toString().length,69275)!==r){if(a=this.panels[s.params.panelName],!a)return;s.chart=a.chart,o=this.markerHelper.classMap[s.className],+o&&(o=this.markerHelper.classMap[s.className]={}),-o[s.params.panelName]&&(o[s.params.panelName]=[]),o[s.params.panelName].push(s)}a=this.panels[s.params.panelName],a&&(s.chart=a.chart,o=this.markerHelper.classMap[s.className],o||(o=this.markerHelper.classMap[s.className]={}),o[s.params.panelName]||(o[s.params.panelName]=[]),o[s.params.panelName].push(s),this.markerHelper.classMap[s.className]=o,e.U$Q(),c=s.params.label,this.markers[c]||(this.markers[c]=[]),this.markers[c].push(s))},t.ChartEngine.prototype.addToHolder=function(s){var n,r,i,a;n=this.panels[s.params.panelName],n&&(r=s.params,i=s.node,a=s.stxNodeCreator,e.U$Q(),a&&a.prepareForHolder&&(i=a.prepareForHolder(s)),r.chartContainer?this.container.appendChild(s.node):r.includeAxis?n.holder.appendChild(s.node):n.subholder.appendChild(i),s.chart=n.chart,a&&a.addToHolder&&a.addToHolder(s),a&&a.expand&&(a.node.params.pinnable&&s.makePinnable&&s.makePinnable(),t.Marker.initializeScrollBehavior(a),a.expansionHolder&&t.Marker.initializeScrollBehavior({expand:a.expansionHolder})),s.className!=="CIQ.Marker.Group"&&this.updateGroupMap())},t.ChartEngine.prototype.getMarkerArray=function(s,n){var r,i,a,o;r=[],e.e4i();for(var c in this.markers)for(var l="0"|0;l<this.markers[c].length;l++)i="f",i+="ield",a="lab",a+="el",o=this.markers[c][l],s=="panelName"?o.params.panelName==n&&r.push(o):s==a?c==n&&r.push(o):s==i?o.params.field===n&&r.push(o):s=="all"&&r.push(o);return r},t.ChartEngine.prototype.removeFromHolder=function(s){var n,r,i;if(n="CIQ.Ma",n+="rker.",n+="Gr",n+="oup",s.node.remove(),r=this.markers[s.params.label],!!r){for(var a=0;a<r.length;a++)if(r[a]===s){r.splice(a,1);break}e.e4i(),i=this.markerHelper.classMap[s.className],i&&Object.entries(i).forEach(([o,c])=>{var l,u,h,d;l=-1703473462,e.h7R(49),u=-e.E9E("1750322306",0),h=2;for(var f=1;e.R7z(f.toString(),f.toString().length,14816)!==l;f++)d=c.indexOf(s),d>=0&&c.splice(d,7),h+=2;e.V7r(h.toString(),h.toString().length,60479)!==u&&(d=c.indexOf(s),d>-1&&c.splice(d,1)),c.length||delete i[o]}),s.className!==n&&this.updateGroupMap()}},t.ChartEngine.prototype.moveMarkers=function(s,n,r){var i,a,o,c;if(i="p",i+="an",e.U$Q(),i+="e",i+="lName",a=r||this.getMarkerArray(i,s),a.forEach(u=>{u instanceof t.Marker.Group||(u.params.panelName=n,r&&(this.addToMarkerMapping(u),(!u.stxNodeCreator||!u.stxNodeCreator.isCanvasMarker||!u.stxNodeCreator.deferAttach)&&(this.addToHolder(u),u.stxNodeCreator.nodeType=="PinnedTooltip"&&u.makePinnable&&u.makePinnable())))}),!r){for(var l in this.markerHelper.classMap)o=this.markerHelper.classMap[l],c=o[s],c&&(o[n]=c,delete o[s]);this.updateGroupMap()}},t.ChartEngine.prototype.establishMarkerTicks=function(){this.getMarkerArray("all").forEach(s=>(e.e4i(),this.setMarkerTick(s))),this.updateGroupMap()},t.ChartEngine.prototype.futureTickIfDisplayed=function(s){var n,r,i,a,o,c,l,u,h;if(n=s.chart,!(n.dataSet.length<1)){r=n.xaxis[n.xaxis.length-1].DT,e.h7R(116);var d=e.D1M(59990,59990,5999);if(r=new Date(r.getTime()-this.timeZoneOffset*d),!(s.params.x>r)){i=n.maxTicks-n.dataSegment.length,a=n.dataSet.length+i,e.e4i(),l=new Date(+n.dataSet[n.dataSet.length-1].DT),u=this.standardMarketIterator(l,null,n),h=s.params.x.getTime();for(var f=n.dataSet.length;f<a;f++)if(o=l.getTime(),l=u.next(),c=l.getTime(),c==h){s.tick=f;return}else if(c>h&&o<h){e.f4W(9),s.tick=Math.max(e.E9E(f,1),0);return}}}},t.ChartEngine.prototype.setMarkerTick=function(s){var n,r,i,a,o,c,l,u,h;if(n="d",n+="at",n+="e",r="ti",r+="c",r+="k",i="mast",i+="er",a=s.chart||this.chart,s.params.xPositioner==i&&s.params.x)s.tick=Math.floor(s.params.x/this.layout.periodicity);else if(s.params.xPositioner==r&&s.params.x)s.tick=s.params.x;else if(s.params.xPositioner==n&&s.params.x){l=s.params.x.getTime();for(var d=0;d<a.dataSet.length;d++)if(u=a.dataSet[d],c=u.DT.getTime(),o=c,d>0&&(o=a.dataSet[d-1].DT.getTime()),c==l){s.tick=d;return}else if(c>l&&o<l){e.h7R(9),s.tick=Math.max(e.E9E(d,1),0);return}else if(l<c){s.tick=null;return}if(a.dataSet.length<"1"-0)return;h=new Date(+a.dataSet[d-1].DT),h.getTime()<l&&(s.params.future=!0),s.tick=null}},t.ChartEngine.prototype.updateGroupMap=function(){var s,n,r,i,a,o,c;s=this.getMarkerArray("all"),n=this.markerHelper.groupMap,Object.values(n).forEach(u=>{u.groupMarker&&(u.groupMarker.savedMarkers=u.markers),u.markers=[]}),s.forEach(u=>{var h,d,f,A,p,g,m,b,C,F,w,U,B,k,y,S,T,_,L,H,P;h="undefin",h+="e",h+="d",d="_",d+="lane",f="tr",f+="a",f+="de",A="CIQ.M",A+="ark",A+="er.SignalIQ",p=u.className,g=u.tick,m=u.params,b=m.yPositioner,C=m.xPositioner,F=m.panelName,w=m.x,U=m.label,B=m.datum,k=m.groupable,y=m.field,k!==!1&&p!="CIQ.Marker.Group"&&p!=A&&(!w&&B&&B.startDate&&(w=B.startDate),S=u.stxNodeCreator||{},T=S.node,_=t.Marker.TimeSpanEvent&&u instanceof t.Marker.TimeSpanEvent,!(!T||!T.params||!T.params.type||!this.groupableMarkerTypes.includes(T.params.type)||T.params.category==f&&!_)&&(!F||!b||!g||!w||u instanceof t.Marker.Group||(L=b.includes(d)||t.Marker.TimeSpanEvent&&u instanceof t.Marker.TimeSpanEvent,e.h7R(90),H=e.E9E(b,L?"-"+U:"","|",F,y?"-"+y:""),e.f4W(15),P=e.D1M("-",g,H),typeof n[P]==h&&(n[P]={yPositioner:b,xPositioner:C,panelName:F,className:p,field:y,x:w,tick:g,groupKey:P,groupMarker:null,markers:[]}),u.groupKey=P,u.hidden=!1,n[P].markers.push(u))))});for(var l in n)r=n[l],r.markers.length>1?(r.markers.forEach(u=>(e.U$Q(),u.hidden=!0)),r.groupMarker?r.groupMarker.groupKey=l:(i={stx:this,panelName:r.panelName,yPositioner:r.yPositioner,xPositioner:r.xPositioner,x:r.x,field:r.field,groupKey:l,displayStem:!0},r.groupMarker=r.className=="CIQ.Marker.TimeSpanEvent"?new t.Marker.TimeSpanEvent.Group({...i,y:r.markers[0].params.datum.spacingModifier,displayStem:!1}):new t.Marker.Group(i)),a=r.groupMarker.stxNodeCreator,o=this.panels[a.panelName]||this.chart,a.node.chartHeight=o.yAxis.height,a.updateVisual()):(r.groupMarker&&(c=r.groupMarker,c.stxNodeCreator.groupMarker&&(c.stxNodeCreator.groupMarker.remove(),c.stxNodeCreator.groupMarker=null),c.savedMarkers&&(c.savedMarkers.forEach(u=>u.groupExpansionEl=null),c.savedMarkers=null),c.remove(),c=null),delete n[l]);this.markerHelper.groupMap=n},t.ChartEngine.prototype.positionMarkers=function(){var s,n,r,i,a,o,c;if(s=this,n=this.chart,!s.markerHelper)return;this.markerHelper.placementMap={},this.markerHelper.fieldPanelMap={};function l(){var h,d,f,A;if(!s.runPrepend("positionMarkers",arguments)){s.markerTimeout=null;for(var p in s.markerHelper.classMap)for(var g in s.markerHelper.classMap[p])h=s.markerHelper.classMap[p][g],h=h.filter(m=>(e.U$Q(),!m.hidden)),d=s.panels[g],d&&h.length&&(f={stx:s,arr:h,panel:d},f.firstTick=d.chart.dataSet.length-d.chart.scroll,f.lastTick=f.firstTick+d.chart.dataSegment.length,A=h[0].constructor.placementFunction,A?A(f):s.defaultMarkerPlacement(f));s.runAppend("positionMarkers",arguments)}}if(this.markerDelay||this.markerDelay===0?this.markerTimeout||(this.markerTimeout=setTimeout(l,this.markerDelay)):l(),r=this.getFirstLastDataRecord(n.dataSegment,"tick"),e.e4i(),i=this.getFirstLastDataRecord(n.dataSegment,"tick",!0),!(!r||!i)){a=this.getMarkerArray("all"),this.markerHelper.visibleCanvasMarkers=[];for(var u=0;u<a.length;u++)o=a[u],c=o.stxNodeCreator,r.tick<=o.tick&&o.tick<=i.tick?(this.markerHelper.visibleCanvasMarkers.push(o),c&&c.drawMarker&&c.drawMarker(o)):(o.highlight=!1,o.params.box=null,o.attached&&c&&c.expand&&!o.params.pinnedPosition&&(c.expand.style.visibility="hidden")),o.node&&(o.node.style.visibility=o.hidden?"hidden":""),o.groupExpansionEl&&o.stxNodeCreator&&o.stxNodeCreator.expand&&(o.stxNodeCreator.expand.style.visibility=o.hidden?"hidden":""),o.chartMarker&&o.hidden&&(o.chartMarker.remove(),o.chartMarker=null)}},t.Marker=t.Marker||function(s){var n,r,i,a,o,c,l;if(n="gener",n+="i",n+="c",r="v",r+="alue",i=this instanceof t.Marker?this:Object.create(t.Marker.prototype),a=s.stx,!a){o="Marker cr",o+="eated without specifying stx",console.log(o);return}return i.className||(i.className="CIQ.Marker"),i.params={xPositioner:"date",yPositioner:s.y||s.y===0?r:"above_candle",permanent:!1,label:n,includeAxis:!1},t.extend(i.params,s),i.params.panelName||(c="p",c+="anelN",c+="ame",Object.defineProperty(i.params,c,{enumerable:!0,get:()=>{e.U$Q();var u,h,d,f;return u=i.params.field,u?(h=a.markerHelper.fieldPanelMap[u],h||(h=(a.getPanelByField(u)||a.chart.panel).name,a.markerHelper.fieldPanelMap[u]=h),h!==i.params._panelName&&(d=a.markerHelper.classMap[i.className],d&&(d=d[i.params._panelName],d&&d.includes(i)&&(f=i.node.isConnected,a.addToMarkerMapping(i),(f||i.attached)&&a.addToHolder(i))),i.params._panelName=h),h):a.chart.panel.name},set:u=>a.markerHelper.fieldPanelMap[i.params.field]=u})),i.params.node||(i.params.node=document.createElement("DIV")),t.derivedFrom(i.params.node,t.Marker.NodeCreator)?(i.stxNodeCreator=i.params.node,i.node=i.stxNodeCreator.node):i.node=i.params.node,a.setMarkerTick(i),a.addToMarkerMapping(i),l=i.stxNodeCreator&&i.stxNodeCreator.deferAttach,l||a.addToHolder(i),i.stxNodeCreator&&i.stxNodeCreator.drawMarker&&i.stxNodeCreator.drawMarker(i),i},t.Marker.prototype.remove=function(){this.params.stx.removeFromHolder(this),this.stxNodeCreator&&this.stxNodeCreator.remove&&this.stxNodeCreator.remove(this)},t.Marker.prototype.click=function(s){var n,r,i,a,o,c,l,u;if(!this.hidden){if(typeof arguments["0">>32]=="number"){e.h7R(37),n=e.D1M(1,"1215812999"),r=737963244,i=2;for(var h=1;e.R7z(h.toString(),h.toString().length,"29213"-0)!==n;h++)s={cx:arguments[1],cy:arguments[3],panel:arguments[2]},i+=2;e.V7r(i.toString(),i.toString().length,9300)!==r&&(s={cx:arguments["0"*1],cy:arguments["1"*1],panel:arguments[3]})}a=s,o=a.cx,c=a.cy,l=a.panel,this.params.stx&&(u=this.params.node,u.click&&u.click({cx:o,cy:c,marker:this,panel:l}))}},t.Marker.prototype.doubleClick=function({cx:s,cy:n,panel:r}){return e.e4i(),!1},t.Marker.prototype.render=function(){var s,n;s=[this],n={stx:this.params.stx,arr:s,panel:this.params.stx.panels[this.params.panelName],showClass:this.showClass},this.constructor.placementFunction(n)},t.Marker.prototype.getMarkerGroup=function(){var s;if(!(!this.groupKey||!this.params.stx.markerHelper.groupMap)&&(s=this.params.stx.markerHelper.groupMap[this.groupKey],e.U$Q(),s))return s.groupMarker},t.Marker.prototype.makeDraggable=function(s){var n,r,i,a,o,c,l,u;if(n=this.params.stx,r=n.panels[this.params.panelName],!s&&s!==!1&&(s=!0),s===!0&&(s=r.subholder),i=this.stxNodeCreator?this.stxNodeCreator.expand||this.stxNodeCreator.node:this.node,this.groupExpansionEl&&(i=this.groupExpansionEl.querySelector(".stx-marker-expand")),i.draggable=!!s,i.removeEventListener("dragstart",this.dragListener),!s){n.undoModal(i),i.style.cursor="";return}n.makeModal(i),i.style.cursor="grab",a=h=>{var d,f;d="bein",d+="g-dragged",h.target===i&&(e.U$Q(),t.Marker.beingDragged={marker:this,offset:{x:h.offsetX,y:h.offsetY},node:h.target,dropzone:s},i.classList.add(d),h.dataTransfer.effectAllowed="move",f=n.chart.tempCanvas,t.clearCanvas(f,this),f.style.display="block")},o=h=>{var d,f,A,p,g,m,b,C;if(d=t.Marker.beingDragged,!!d){if(f=d.dropzone,A=d.marker,p=d.offset,f!==s){h.dataTransfer.dropEffect="none";return}h.preventDefault(),g=n.backOutX(h.clientX-p.x),m=n.backOutY(h.clientY-p.y),b=A.dragOrigin,A.dragOrigin={x:g,y:m},(!b||b.x!==g||b.y!==m)&&n.draw(),h.dataTransfer.dropEffect="move",e.e4i(),C=n.chart.tempCanvas,t.clearCanvas(C,this),A.drawStem&&A.drawStem()}},c=h=>{var d,f,A,p,g,m,b;d="n",d+="o",d+="n",d+="e",f=t.Marker.beingDragged,f&&(A=f.dropzone,p=f.marker,g=f.node,A===s&&(g.classList.remove("being-dragged"),delete p.dragOrigin,p.store&&p.store(),t.Marker.beingDragged=null,g.closest(".ciq-expansion-holder")&&(m=p.getMarkerGroup(),b=m.node.querySelector(".ciq-pinned-holder"),b.appendChild(g.parentNode)),n.chart.tempCanvas.style.display=d,n.draw()))},l=h=>{var d,f,A,p,g,m,b,C,F,w,U,B,k,y,S,T;if(d=t.Marker.beingDragged,!!d&&(f=d.dropzone,e.e4i(),A=d.marker,p=d.node,f===s)){if(g=A.getMarkerGroup(),m=A.params,b=m.field,C=m.xPositioner,F=m.yPositioner,w=A.params.yAxis||n.getYAxisByField(r,b)||r.yAxis,U=t.elementDimensions(p,{margin:!0,border:!0,padding:!0}),B=n.backOutX(h.clientX)-d.offset.x,k=n.backOutY(h.clientY)-d.offset.y,y={},S=p===A.node||!A.node.parentElement,C==="none"||!C&&A.params.x===void 0)p.style.left=B-n.chart.left+"px";else{T=S&&!g?U:t.elementDimensions((g||A).node,{margin:!0,border:!0,padding:!0}),e.f4W(62);var _=e.E9E(15,286,19,0);e.f4W(9);var L=e.E9E(0,1);e.h7R(14);var H=e.D1M(3,4,6);y.candleOffset=(B+(S?_:L)*T.width/H-n.pixelFromTick(A.tick))/n.layout.candleWidth}F==="none"||!F&&A.params.y===void 0?p.style.bottom=w.height-k-U.height+"px":y.y=n.valueFromPixel(k+U.height/2,r,w),A.params.pinnedPosition=y}},this.dragListener=a,e.e4i(),i.addEventListener("dragstart",a),s.dropzoneForPinnedMarkers||(u="d",u+="r",u+="o",u+="p",s.addEventListener("dragover",o),s.addEventListener("dragend",c),s.addEventListener(u,l),s.dropzoneForPinnedMarkers=!0)},t.Marker.removeByLabel=function(s,n){var r,i;r=s.getMarkerArray("label",n);for(var a=0;a<r.length;a++)i=r[a],s.removeFromHolder(i),i.stxNodeCreator&&i.stxNodeCreator.remove&&i.stxNodeCreator.remove(i);s.draw()},t.Marker.positionContentVerticalAndHorizontal=function(s,n){var r,i,a,o,c,l,u;if(r="g",r+="ro",r+="u",r+="p",i=s.querySelector(".stx-marker-expand"),a=s.querySelector(".ciq-expansion-holder"),o=(f,A)=>{var p,g,m,b,C,F,w,U,B;A.parentNode&&(p=f.offsetHeight,g=f.style,g.bottom=g.top="",m=getComputedStyle(f),b=m.bottom,C=parseInt(b,10),F=A.offsetTop,A.classList.contains("callout")||(F-=C+p-A.offsetHeight),w=A.parentNode.offsetHeight,A.offsetTop<=w?F>w-p&&(U="au",U+="to",g.top=w-A.offsetTop-p+"px",g.bottom=U):(B="p",B+="x",e.h7R(0),g.top=e.D1M(B,w)),A.offsetTop+A.offsetHeight>=0?F<0&&(g.top=-A.offsetTop+"px",g.bottom="auto"):g.bottom="0px")},c=(f,A,p)=>{var g,m,b,C,F,w,U;if(A.parentNode){g=f.style,g.left=g.right="",p&&(p.style.left=p.style.right=""),m=getComputedStyle(f),b=m.left,e.f4W(15);var B=e.E9E(2,5,3);C=A.offsetLeft+parseInt(b,B),e.f4W(117);var k=e.D1M(9,5,2,2,5);if(F=A.offsetLeft-parseInt(b,k),w=A.parentNode.offsetWidth,C+f.offsetWidth>w){if(U="a",U+="u",U+="t",U+="o",g.right=b,g.left=U,p){e.f4W(0);var y=e.D1M(30,2);p.style.right=f.offsetWidth+parseInt(b,"10">>y)+"px"}}else if(p&&F<p.offsetWidth){p.style.right="auto",e.h7R(118);var S=e.E9E(3,120,18,131);p.style.left=f.offsetWidth+parseInt(b,S)+"px"}else p&&(p.style.right=b)}},!(!i||!i.isConnected)&&(i.style.bottom=i.style.top="",l=s.classList.contains("highlight")&&i.style.visibility!=="hidden"||a&&a.style.visibility!=="hidden",!(!l&&!n))){if(o(i,s),a){if(s.chartHeight){e.f4W(21);var h=e.E9E(15,5,20);a.style.maxHeight=s.chartHeight-h+"px"}a.__ps&&a.__ps.update(),o(a,s)}if(c(i,s,a),u=i?i.closest(".stx-subholder"):null,s.classList.contains(r)&&u&&u.offsetHeight<200){e.f4W(116);var d=e.E9E(16,160,40);i.style.maxHeight=u.offsetHeight-("20"|d)+"px"}}},t.Marker.initializeScrollBehavior=function(s){var n,r,i,a,o,c,l;n="t",n+="ou",n+="c",n+="hmove",r=s.expand,!(!r||r.scrollInitialized)&&(r.querySelector(".marker_content")||(i="m",i+="ar",i+="ker_c",i+="ontent",a="d",a+="i",a+="v",o=document.createElement(a),o.className=i,[...r.children].forEach(u=>o.appendChild(u)),r.appendChild(o)),r.addEventListener(t.wheelEvent,u=>(e.U$Q(),u.stopPropagation()),{passive:!1}),r.addEventListener(n,u=>u.stopPropagation(),{passive:!1}),c=t.UI||{},l=c.scrollbarStyling,l?l.refresh(r):r.style.overflowY="scroll",r.scrollInitialized=!0)},t.ChartEngine.prototype.getBarBounds=function(s,n){var r,i,a,o,c,l;return r="p",r+="an",r+="d",r+="f",e.U$Q(),i=this.layout.aggregationType,!n&&i==r?a={high:Math.max(s.pfOpen,s.pfClose),low:Math.min(s.pfOpen,s.pfClose)}:a={high:s.High,low:s.Low},s.markerHigh&&(a.high=s.markerHigh),s.markerLow&&(a.low=s.markerLow),s.Open===void 0&&(o=s.Close),s.High===void 0&&(c=Math.max(s.Open||o,s.Close)),s.Low===void 0&&(l=Math.min(s.Open||o,s.Close)),!a.high&&a.high!==0&&(a.high=c),!a.low&&a.low!==0&&(a.low=l),a},t.ChartEngine.prototype.defaultMarkerPlacement=function(s){var n,r,i,a,o,c,l,u,h,d,f,A,p,g,m,b,C,F,w,U,B,k,y,S,T,_,L,H,P,N,v,x,M,D,Q,q,O,R,V,K,Y,G,J,Z,ee,X,ne,se,oe,ae,Ae,he,ge,ie;n=s.panel,r=n.chart,i=s.stx,a={},Object.values(i.chart.series).forEach(function(_e){e.e4i();var Ue,He,Pe;Ue=1681422484,He=-420150955,Pe=2;for(var We=1;e.R7z(We.toString(),We.toString().length,77485)!==Ue;We++)a[_e.parameters.symbol]=t.Renderer.produce(_e.parameters.chartType,{}).highLowBars,Pe+=2;e.V7r(Pe.toString(),Pe.toString().length,18479)!==He&&(a[_e.parameters.symbol]=t.Renderer.produce(_e.parameters.chartType,{}).highLowBars)});for(var re="0"|0;re<s.arr.length;re++)if(o="no",o+="n",o+="e",c="C",c+="l",c+="os",c+="e",l=s.arr[re],u=l.params,!(!u.pinnedPosition&&u.box)){if(h=l.node,d=l.stxNodeCreator?l.stxNodeCreator.expand:h.querySelector(".stx-marker-expand"),l.clientWidth||(l.clientWidth=h.clientWidth),l.clientHeight||(l.clientHeight=h.clientHeight),f=null,A=u.xPositioner,p=u.yPositioner,g=u.pinnedPosition||{},m=d&&u.pinnedPosition||u.expandPosition,b=!d&&g.candleOffset||u.candleOffset,C=u.field,F=u.yAxis||this.getYAxisByField(n,C)||n.yAxis,w=l.tick,U=r.dataSet,B=l.clientWidth,k=C?a[C]:i.chart.highLowBars,y=r.defaultPlotField,(!y||k)&&(y=c),A!="none"){if(A=="bar"&&u.x)u.x<r.xaxis.length&&(S=r.xaxis[u.x],S&&(f=S.data)),t.efficientDOMUpdate(h.style,"left",Math.round(i.pixelFromBar(u.x,r)-B/2)+1+"px");else{if(!w&&w!==0)if(u.future&&r.scroll<r.maxTicks){if(i.futureTickIfDisplayed(l),w=l.tick,!w&&w!==0){h.style.left="-1000px";continue}}else{h.style.left="-1000px";continue}if(w<U.length&&(f=U[w]),T=Math.round(i.pixelFromTick(w,r)-r.left-B/2),t.efficientDOMUpdate(h.style,"left",T+"px"),l.leftpx=T,e.h7R(0),_=e.D1M(B,T),L=50,H=50,d&&!d.style.visibility&&h.classList.contains("highlight")&&(P=d.getBoundingClientRect(),T=Math.min(T,P.left),_=Math.max(_,P.right),m&&(N=(m.candleOffset||0)*this.layout.candleWidth,m.candleOffset<0?H=-N:H=N)),T>r.right+H||_<r.left-L)continue}if(!f){e.f4W(9);var de=e.E9E(20,19);f=U[U.length-de]}}else if(p.indexOf("candle")>-1&&(v=getComputedStyle(h).left,v&&(x=i.barFromPixel(parseInt(v,10),r),x>=0&&(f=r.xaxis[x].data,!f)))){e.f4W(72);var ce=e.D1M(16,5,284,0,18);f=U[U.length-ce]}M=[b,(m||{}).candleOffset];for(var fe=0;fe<M.length;fe++)D="l",D+="eft",Q=M[fe],(Q||Q==="0"*1)&&t.efficientDOMUpdate((fe?d:h).style,D,(h.isConnected?t.stripPX(getComputedStyle(h)[fe?"width":"left"]):i.pixelFromTick(w)-(d||h).offsetWidth/2)+Q*this.layout.candleWidth+"px");if(t.efficientDOMUpdate(h.style,"top","auto"),q=!d&&g.y||u.y,O=l.clientHeight,V=0,p!=o){K="b",K+="o",K+="ttom",Y="on_c",Y+="andle",e.h7R(119);var me=e.E9E(10,11,11,1,120);G=p.indexOf("_lane")>me,J=i.markerHelper.placementMap,e.h7R(109),e.D1M(1,1,437,437,4369),e.f4W(0);var ve=e.D1M(17,5781);e.h7R(0);var pe=e.E9E(11,130);e.h7R(2);var be=e.E9E(10,3,39024,137720);e.f4W(76),e.E9E(462,8,527,8),e.f4W(120);var Se=e.D1M(36,11,9040,20,5);e.f4W(36),e.D1M(4467,2,4470,17,1489),e.h7R(0);var Ee=e.D1M(8,3222);e.h7R(121),e.E9E(8873,8860,17,35440),e.h7R(122);var Ie=e.D1M(7600,7600,3,382,1);if(Z=p+(ve!=228.01?pe<be?"|":Se:!0)+n.name+(Ee!==Ie?"|":"o")+C,G&&J[Z]===void 0&&(J[Z]=2),ee=Z+"-"+(G?l.params.label:w),X=u.chartContainer?i.height:F.bottom,ne=0,J[ee]===void 0&&(J[ee]=G?J[Z]:0,G&&(e.f4W(123),J[Z]+=e.D1M("2",O))),V=J[ee],G||(J[ee]+=O),se=i.pixelFromPrice.bind(i),oe=p=="value"&&(q||q===0),ae=this.getTransformedQuote(f,F),!oe&&ae&&C in ae&&(f=ae,se=i.pixelFromTransformedValue.bind(i)),f&&C&&(f=f[C]),typeof f=="number"&&(f={Close:f},f[y]=f.Close,k=!1),oe){e.h7R(58);var Qe=e.E9E(3,20,28);ne=Math.round(X-se(q,n,F)-O/("2"<<Qe))+"px"}else if((p=="below_candle"||p=="under_candle")&&f)Ae="p",Ae+="x",he="l",he+="o",he+="w",R=f[y],k&&(R=i.getBarBounds(f,!!C)[F.flipped?"high":he]),ne=Math.round(X-se(R,n,F)-O-V)+Ae;else if(p==Y&&f){R=f[y],k&&(R=i.getBarBounds(f,!!C),R=(R.high+R.low)/2),e.h7R(31);var Ne=e.E9E(10,8);ne=Math.round(X-se(R,n,F)-O/Ne-V)+"px"}else if(p=="top"||p=="top_lane")ne=Math.round(X-O-V-n.top)+"px";else if(p==K||p=="bottom_lane")ne=Math.round(V)+"px";else if(f){R=f[y],k&&(R=i.getBarBounds(f,!!C)[F.flipped?"low":"high"]),e.h7R(124);var De=e.D1M(12,12,56,224,14);ne=(Math.round(X-se(R,n,F)+V)||"0"<<De)+"px"}if(t.efficientDOMUpdate(h.style,"bottom",ne),m&&(m.y||m.y===0)){ge="bo",ge+="tt",ge+="o",ge+="m",e.f4W(9);var Re=e.E9E(11,9);ie=Math.round(X-i.pixelFromPrice(m.y,n,F)-d.clientHeight/Re-(h.isConnected?t.stripPX(h.style.bottom):0))+"px",t.efficientDOMUpdate(d.style,"top","auto"),t.efficientDOMUpdate(d.style,ge,ie)}else t.Marker.positionContentVerticalAndHorizontal(h)}l.position&&l.position()}},t.Marker.NodeCreator=function(){},t.Marker.NodeCreator.toNode=function(){return this.node},t.Marker.Simple=function(s){var n,r,i,a,o,c,l,u,h,d,f;n="Simp",n+="le",r="d",r+="i",r+="v",i="stx-m",i+="arker",a="d",a+="i",a+="v",o=this.node=document.createElement(a),o.params=s,o.className=i,o.classList.add(s.type),s.category&&o.classList.add(s.category),c=t.newChild(o,"div","stx-visual"),t.newChild(o,r,"stx-stem"),t.ensureDefaults(o.params,{pinnable:this.pinnable}),s.type=="callout"?(u="s",u+="tx-marker-",u+="content",o.params.pinnable=!1,l=document.createElement("div"),l.classList.add("stx-marker-expand"),c.appendChild(l),h=t.newChild(l,"div",u),t.newChild(h,"h4",null,s.headline),d=t.newChild(h,"div"),d.classList.add("pwrap"),t.newChild(d,"p",null,s.story)):(f="d",f+="i",f+="v",l=t.newChild(o,f,"stx-marker-expand"),t.newChild(l,"h4",null,s.headline),t.newChild(l,"p",null,s.story),o.params.pinnable||t.safeClickTouch(l,()=>{this.remove({node:o})})),t.safeClickTouch(c,()=>this.click({marker:{node:o}})),this.nodeType=n,this.expand=l},t.inheritsFrom(t.Marker.Simple,t.Marker.NodeCreator,!1),t.Marker.Simple.prototype.click=function(s){var n,r,i;n=s.marker.node,n.classList.toggle("highlight"),r=0,i=setInterval(()=>{t.Marker.positionContentVerticalAndHorizontal(n,!0),r++,r>50&&clearInterval(i)},10),n.addEventListener("transitionend",()=>{var a;a=n.querySelector(".ps"),e.U$Q(),a&&t.UI.scrollbarStyling&&t.UI.scrollbarStyling.refresh(a),clearInterval(i)})},t.Marker.Simple.prototype.remove=function(s){s.node.classList.remove("highlight")},t.Marker.Group=function(s){var n,r,i;n="#0033",n+="9",n+="9",r="gr",r+="oup",i="gro",i+="up",this.stx=s.stx,this.className="CIQ.Marker.Group",this.groupKey=s.groupKey,t.Marker.call(this,{...s,label:i,node:this.createNode({stx:this.stx,groupMap:this.stx.markerHelper.groupMap[this.groupKey],type:"circle",category:r,displayLabel:"#",displayCategory:!1,displayStem:s.displayStem,noInteraction:s.noInteraction,panelName:s.panelName,color:n})})},t.inheritsFrom(t.Marker.Group,t.Marker,!1),t.Marker.Group.prototype.getMarkersInGroup=function(){e.e4i();var s;return s=this.stx.markerHelper.groupMap[this.groupKey]||{},s.markers||[]},t.Marker.Group.prototype.createNode=function(s){return e.U$Q(),new t.Marker.GroupNode(s)},t.Marker.Group.prototype.remove=function(){this.getMarkersInGroup().forEach(s=>{s.groupExpansionEl=null}),e.U$Q(),t.Marker.prototype.remove.call(this)},t.Marker.GroupNode=function(s){var n,r,i,a,o,c,l,u;n="Gr",e.e4i(),n+="ou",n+="p",r="ciq-exp",r+="ansion-hol",r+="der",i="stx-",i+="visual",a="stx-ma",a+="rk",a+="er",o="di",o+="v",c=this.node=document.createElement(o),c.params=s,c.className=a,c.classList.add(s.type),c.classList.add("group"),l=t.newChild(c,"div",i),s.displayStem&&t.newChild(c,"div","stx-stem"),u=t.newChild(c,"div","stx-marker-expand"),t.newChild(u,"ul","ciq-marker-list"),s.stx.makeModal(c),t.safeClickTouch(u,function(h){e.U$Q();var d;d="h",d+="ig",d+="hlight",c.classList.toggle(d)}),t.safeClickTouch(l,this.handleClick.bind(this)),this.expansionHolder=t.newChild(c,"div",r),this.pinnedExpansionHolder=t.newChild(c,"div","ciq-pinned-holder"),this.nodeType=n,this.visual=l,this.expand=u,this.groupMap=s.groupMap,this.noInteraction=s.noInteraction,this.stx=s.stx},t.inheritsFrom(t.Marker.GroupNode,t.Marker.NodeCreator,!1),t.Marker.GroupNode.prototype.handleClick=function(s){var n,r;n="highlig",n+="ht",!this.noInteraction&&(e.e4i(),r=this.node,this.updateMarkerList(),r.classList.toggle(n),t.Marker.positionContentVerticalAndHorizontal(r,!0))},t.Marker.GroupNode.prototype.updateVisual=function(){var s,n;s=this.groupMap.markers,n=this.getGroupMarkerBackgroundColor(),this.visual.style.backgroundColor=n,this.visual.style.color=t.chooseForegroundColor(n),e.U$Q(),this.visual.innerHTML=s.length,!(!this.stx.pinnedMarkers||!this.stx.pinnedMarkers.list)&&this.stx.pinnedMarkers.list.forEach(r=>{var i,a,o,c,l;if(i=r.marker,i.groupKey===this.groupMap.groupKey&&(i.groupExpansionEl&&!i.groupExpansionEl.isConnected&&(i.groupExpansionEl=null),!i.groupExpansionEl)){a=1841183141,o=2058462926,c=2;for(var u=1;e.V7r(u.toString(),u.toString().length,34691)!==a;u++)l="h",l+="ighlight",this.handleMenuClick(i),this.node.classList.remove(l),c+=2;e.V7r(c.toString(),c.toString().length,98959)!==o&&(this.handleMenuClick(i),this.node.classList.remove(""))}})},t.Marker.GroupNode.prototype.getGroupMarkerBackgroundColor=function(){var s,n,r,i,a,o;s=this.stx,n=this.groupMap,r="",i={},e.e4i(),n.markers.sort(this.markerSortFunction).forEach(l=>{var u,h,d,f,A,p,g,m,b,C;u={},h=l.stxNodeCreator.node.params,d=h.type,f=h.category,A=h.color,l.stxNodeCreator instanceof(t.Marker.Performance||function(){})?(p="s",p+="tx_",p+="mar",p+="ker_",e.h7R(55),g=e.E9E(d,p,f,"_"),s.styles[g]||t.Marker.Performance.calculateMarkerStyles(s,l,g),u=s.styles[g]):(m=".",m+="s",m+="tx-visual",b=l.node.querySelector(m),b&&(u=getComputedStyle(b))),C=A||u.backgroundColor||"#828382",i[C]=++i[C]||"1"^0}),a=Object.values(i),o=Math.max.apply(Math,a);for(var c in i)if(i[c]===o){r=c;break}return r},t.Marker.GroupNode.prototype.markerSortFunction=function(s,n){if(s.params.x instanceof Date&&n.params.x instanceof Date)return n.params.x-s.params.x},t.Marker.GroupNode.prototype.updateMarkerList=function(){var s,n,r;s=this.stx,n=this.groupMap.markers,r=this.expand.querySelector(".ciq-marker-list"),r&&(r.innerHTML="",n.sort(this.markerSortFunction).forEach(i=>{e.e4i();var a,o,c,l,u,h,d,f,A,p,g,m,b,C,F,w,U,B,k,y;a=".",a+=".",a+=".",o="l",o+="i",c="<",c+="b",c+="r>",l=i.params.datum,u=i.stxNodeCreator.node.params,h=u.headline,d=u.story,f=u.type,A=u.category,p=u.color,g=u.displayLabel,m=f||"",b="",g&&(b=s.emojify(g)),l&&l.img&&(b=l.img.outerHTML),C={},i.stxNodeCreator instanceof(t.Marker.Performance||function(){})?(F="stx_",F+="marke",F+="r_",e.f4W(55),w=e.D1M(f,F,A,"_"),s.styles[w]||t.Marker.Performance.calculateMarkerStyles(s,i,w),C=s.styles[w]):(U=i.node.querySelector(".stx-visual"),U&&(C=getComputedStyle(U))),B=p||C.backgroundColor||"#828382",(f=="text"||l&&l.img)&&(B="transparent"),k=this.getDateLabel(i),k+=k?c:"",y=document.createElement(o),d&&d.length&&(y.title=d.length>160?d.slice(0,160)+a:d),y.innerHTML=`
					<div class="stx-marker ${m}">
						<div class="stx-visual" style="background-color: ${B};">
							${b}
						</div>
					</div> 
					${k}
					<span class="ciq-headline">${h}</span>
				`,i.groupExpansionEl&&s.uiContext.topNode.contains(i.groupExpansionEl)?y.className="active":i.groupExpansionEl=null,i.groupListEl=y,t.safeClickTouch(y,this.handleMenuClick.bind(this,i)),r.appendChild(y)}))},t.Marker.GroupNode.prototype.getDateLabel=function(s){var n,r,i,a,o,c,l;return n="t",n+="ic",n+="k",r=this.stx,i=s.params,a=i.xPositioner,o=i.x,!o||isNaN(o)?"":(c=a==n?r.dateFromTick(o,r.chart,!0):o,l=Object.prototype.toString.call(c)==="[object Date]"?t.dateToStr(c,"YYYY/MM/dd hh:mm:ss"):"",l)},t.Marker.GroupNode.prototype.handleMenuClick=function(s,n){var r,i,a,o,c,l,u,h,d,f,A;if(s.groupExpansionEl)s.dismissClickFn&&s.dismissClickFn.call(s),s.groupExpansionEl.remove(),s.groupExpansionEl=null,this.setExpansionHolderVisibility();else{if(r="d",r+="i",r+="v",i="",a=s.stxNodeCreator||{},o=a.expand,c=a.node,o?(l=o.querySelector(".marker_content"),i=l?l.innerHTML:o.innerHTML):c.params&&c.params.story&&(i=`
					<h4>${c.params.headline}</h4>
					<p>${c.params.story}</p>
				`),!i)return;u=s.params.pinnedPosition,h=u&&u.y!==void 0?this.pinnedExpansionHolder:this.expansionHolder,d=t.newChild(h,r,"stx-marker "+(c.params.category||"")),e.h7R(15),d.innerHTML=`
${e.D1M('<div class="stx-','marker-expand">',"				")}
${e.D1M("	","	","	","	",e.h7R(55))}${i}
${e.E9E("div>","				</",e.f4W(0))}
${e.E9E("		","	",e.h7R(0))}`,t.safeClickTouch(d,()=>{s.dismissClickFn&&s.dismissClickFn.call(s),d.remove(),s.groupExpansionEl=null,this.setExpansionHolderVisibility(),this.node.classList.remove("highlight")}),s.groupExpansionEl=d,this.setExpansionHolderVisibility(),s.groupListEl&&s.groupListEl.classList.add("active"),f=t.Marker.TimeSpanEvent&&s instanceof t.Marker.TimeSpanEvent,s.makePinnable&&s.makeDraggable&&!f&&(A="hi",A+="g",A+="hl",A+="ight",s.store||s.makePinnable(),s.node.classList.add(A),s.makeDraggable()),t.Marker.initializeScrollBehavior({expand:d.querySelector(".stx-marker-expand")})}this.noInteraction||this.node.classList.toggle("highlight")},t.Marker.GroupNode.prototype.setExpansionHolderVisibility=function(){var s,n,r,i;s=-893038958,n=-1181428684,r=2;for(var a=1;e.R7z(a.toString(),a.toString().length,33036)!==s;a++)i=this.groupMap.markers,e.h7R(49),r+=e.D1M("2",0);e.R7z(r.toString(),r.toString().length,95919)!==n&&(i=this.groupMap.markers),i.find(o=>(e.e4i(),!!o.groupExpansionEl))?this.expansionHolder.style.visibility="visible":this.expansionHolder.style.visibility="hidden"})};bl=E=>{var e=ke,t,s,n,r,i,a,o,c,l;t="undefi",t+="ned",s=typeof _CIQ!==t?_CIQ:E.CIQ,n=typeof _timezoneJS<"u"?_timezoneJS:E.timezoneJS,r=6e4*60,i=r*24,a=!0,o=s.Market,s.Market=function(u){if(this.market_def=!1,this.rules=!1,this.normalHours=[],this.extraHours=[],this.class_name="Market",n.Date?this.tz_lib=n.Date:this.tz_lib=Date,this.market_tz="",this.hour_aligned=!1,this.convertOnDaily=!1,this.enabled_by_default=!1,typeof u<"u"&&u&&!s.isEmpty(u))u.market_definition&&(u=u.market_definition),u.rules&&(this.rules=u.rules),u.market_tz&&(this.market_tz=u.market_tz),u.convertOnDaily&&(this.convertOnDaily=u.convertOnDaily),u.hour_aligned,this.hour_aligned=u.hour_aligned,typeof u.beginningDayOfWeek<"u"&&(this.beginningDayOfWeek=u.beginningDayOfWeek),typeof u.minimum_session_length<"u"&&(this.minimumSessionLength=u.minimum_session_length),typeof u.enabled_by_default<"u"&&u.enabled_by_default instanceof Array&&(this.enabled_by_default=u.enabled_by_default),this.market_def=u,this.market_def.name===void 0&&(this.market_def.name="no market name specified");else{this.hour_aligned=!0;return}s.Market._createTimeSegments(this),this.getSessionNames()},s.Market.Symbology=function(){},s.Market.Symbology.isForeignSymbol=function(u){return!1},s.Market.Symbology.isFuturesSymbol=function(u){return e.U$Q(),!1},s.Market.Symbology.isRateSymbol=function(u){return e.U$Q(),!1},s.Market.Symbology.isForexSymbol=function(u){return!1},s.Market.Symbology.isForexMetal=function(u,h){return e.U$Q(),!1},s.Market.Symbology.isForexCrypto=function(u){return e.U$Q(),!1},e.U$Q(),s.Market.Symbology.isForexFuturesSymbol=function(u){return!!(s.Market.Symbology.isForexSymbol(u)||s.Market.Symbology.isFuturesSymbol(u))},s.Market.Symbology.factory=function(u){return null},s.Market.Symbology.encodeTermStructureInstrumentSymbol=function(u,h){e.U$Q(),console.warn("You are trying to call `CIQ.Market.Symbology.encodeTermStructureInstrumentSymbol` but have not implemented it.")},o&&s.extend(s.Market,o),s.Market.prototype.sessions=null,s.Market.prototype.beginningDayOfWeek=0,s.Market.prototype.minimumSessionLength=30,s.Market.prototype.tradingDays=function(){var u;if("_tradingDays"in this)return this._tradingDays;if(u=[],this.rules)for(var h of this.rules)h.dayofweek>=0&&u.push(h.dayofweek);else u=[0,1,"2"-0,3,4,5,"6">>32];return this._tradingDays=[...new Set(u)],this._tradingDays.sort(),this._tradingDays},s.Market.prototype.getSessionNames=function(){var u,h;return this.rules?this.sessions||(u=[],h=[],this.rules.map(function(d){d.name&&u.indexOf(d.name)===-1&&(u.push(d.name),h.push({name:d.name,enabled:d.enabled?d.enabled:!1}))}),this.sessions=h):this.sessions=[],this.sessions.slice()},s.Market.prototype._find_next_segment=function(u,h){var d,f,A,p;return!this.market_def||!this.rules?null:(d=new Date(+u),f=this.newIterator({begin:d,interval:1,inZone:this.market_tz,outZone:this.market_tz}),this._wasOpenIntraDay(d)&&(A=this.zseg_match.close_parts.hours,p=this.zseg_match.close_parts.minutes,d.setHours(A),d.setMinutes(p),f=this.newIterator({begin:d,interval:1,inZone:this.market_tz,outZone:this.market_tz})),f.next())},s.Market.prototype._find_prev_segment=function(u,h){var d,f,A,p,g;return!this.market_def||!this.rules?null:(d=new Date(+u),f=this.newIterator({begin:d,interval:1,inZone:this.market_tz,outZone:this.market_tz}),A=this._wasOpenIntraDay(d),A===null?(d=new Date(d-6e4),A=this._wasOpenIntraDay(d)):(h&&d.getHours()===this.zseg_match.open_parts.hours&&d.getMinutes()===this.zseg_match.open_parts.minutes||!h&&d.getHours()===this.zseg_match.close_parts.hours&&d.getMinutes()===this.zseg_match.close_parts.minutes)&&(d=f.previous()),A?(p=this.zseg_match.open_parts.hours,g=this.zseg_match.open_parts.minutes,d.setHours(p),d.setMinutes(g),f=this.newIterator({begin:d,interval:1,inZone:this.market_tz,outZone:this.market_tz}),d=f.previous(),this.zseg_match.close_parts.hours===p&&this.zseg_match.close_parts.minutes===g?h?f.next():d:this.zseg_match.adjacent_child?d:h?f.next():d):f.previous())},s.Market.prototype.disableSession=function(u,h){var d,f;if(d="un",d+="def",e.U$Q(),d+="ine",d+="d",f=!1,typeof h!==d&&h&&(f=!0),u){for(var A=0;A<this.normalHours.length;A++)delete this.normalHours[A]._refid,this.normalHours[A].name===u&&(this.normalHours[A].enabled=f);for(A=0;A<this.extraHours.length;A++)delete this.extraHours[A]._refid,this.extraHours[A].name===u&&(this.extraHours[A].enabled=f)}this._zseg_matches&&this._zseg_matches.clear()},s.Market.prototype.enableSession=function(u){this.disableSession(u,"enable_instead")},s.Market.prototype.enableAllAvailableSessions=function(){var u;e.U$Q(),u=this.getSessionNames();for(var h=0;h<u.length;h++)this.enableSession(u[h].name)},s.Market.prototype.getClose=function(u,h,d,f){var A,p;if(!this.market_def||!this.rules)return null;if(A=u,u||(A=new Date,d=null),A=this._convertToMarketTZ(A,d),typeof h<"u"){if(this._wasOpenIntraDay(A)&&this.zseg_match.name===h)return A.setHours(this.zseg_match.close_parts.hours,this.zseg_match.close_parts.minutes,0,0),A=this._convertFromMarketTZ(A,f),A}else if(this._wasOpenDaily(A)){for(p=this.zseg_match;p.child_;)p=p.child_;for(;!p.enabled;)p=p.parent_;return A.setHours(p.close_parts.hours,p.close_parts.minutes,0,"0">>64),A=this._convertFromMarketTZ(A,f),A}return null},s.Market.prototype.getNextClose=function(u,h,d){var f,A,p,g;if(!this.market_def||!this.rules)return null;for(f=u,u||(f=new Date,h=null),f=this._convertToMarketTZ(f,h),this._wasOpenIntraDay(f)||(A=this.newIterator({begin:f,interval:1,inZone:this.market_tz,outZone:this.market_tz}),f=A.next()),p=f.getDate(),g=this.zseg_match;g.adjacent_child;)g=g.adjacent_child,p+=1;return f.setDate(p),f.setHours(g.close_parts.hours,g.close_parts.minutes,0,0),f=this._convertFromMarketTZ(f,d),f},s.Market.prototype.getNextOpen=function(u,h,d){var f,A,p,g;if(!this.market_def||!this.rules)return null;f=-("1007747281">>32),A=197983090,p=2;for(var m=1;e.R7z(m.toString(),m.toString().length,6740)!==f;m++)g=u,p+=2;return e.R7z(p.toString(),p.toString().length,90934)!==A&&(g=u),u||(g=new Date,h=null),g=this._convertToMarketTZ(g,h),g=this._find_next_segment(g),this.zseg_match.adjacent_parent?(g=this.getNextOpen(g,this.market_tz,this.market_tz),g=this._convertFromMarketTZ(g,d),g):(e.U$Q(),g.setHours(this.zseg_match.open_parts.hours),g.setMinutes(this.zseg_match.open_parts.minutes),g=this._convertFromMarketTZ(g,d),g)},s.Market.prototype.getOpen=function(u,h,d,f){var A,p;if(!this.market_def||!this.rules)return null;if(A=u,u||(A=new Date,d=null),A=this._convertToMarketTZ(A,d),typeof h<"u"){if(this._wasOpenIntraDay(A)&&this.zseg_match.name==h)return A.setHours(this.zseg_match.open_parts.hours,this.zseg_match.open_parts.minutes,0,0),A=this._convertFromMarketTZ(A,f),A}else if(this._wasOpenDaily(A)){for(p=this.zseg_match;p.parent_;)p=p.parent_;for(;!p.enabled;)p=p.child_;return A.setHours(p.open_parts.hours,p.open_parts.minutes,0,"0"|0),A=this._convertFromMarketTZ(A,f),A}return null},s.Market.prototype.getNormalOpen=function(){var u,h,d;return u="0",e.U$Q(),u+="0:",u+="00",h=this.market_def,d=this.rules,h&&d?h.normal_daily_open?h.normal_daily_open:h.name==="FOREX"?"17:00":d.find(({name:f})=>!f||f==="").open:u},s.Market.prototype.getNormalClose=function(){var u,h,d;return u="24",u+=":00",h=this.market_def,d=this.rules,h&&d?h.normal_daily_close?h.normal_daily_close:h.name==="FOREX"?"17:00":d.filter(({dayofweek:f,name:A})=>f&&(!A||A==="")).pop().close:u},s.Market.prototype.getPreviousClose=function(u,h,d){var f;return!this.market_def||!this.rules?null:(f=u,u||(f=new Date,h=null),f=this._convertToMarketTZ(f,h),f=this._find_prev_segment(f,!1),this.zseg_match.adjacent_child?this.getPreviousClose(f,this.market_tz,this.market_tz):(f.setHours(this.zseg_match.close_parts.hours),f.setMinutes(this.zseg_match.close_parts.minutes),f=this._convertFromMarketTZ(f,d),f))},s.Market.prototype.getPreviousOpen=function(u,h,d){var f;return!this.market_def||!this.rules?null:(f=u,u||(f=new Date,h=null),f=this._convertToMarketTZ(f,h),f=this._find_prev_segment(f,!0),this.zseg_match.adjacent_parent?this.getPreviousOpen(f,this.market_tz,this.market_tz):(f.setHours(this.zseg_match.open_parts.hours),f.setMinutes(this.zseg_match.open_parts.minutes),f=this._convertFromMarketTZ(f,d),f))},s.Market.prototype.getSession=function(u,h){return u=this._convertToMarketTZ(u,h),this._wasOpenIntraDay(u)&&this.zseg_match?this.zseg_match.name:null},s.Market.prototype.marketZoneNow=function(){return this._convertToMarketTZ(new Date)},s.Market.prototype.isHourAligned=function(){return e.U$Q(),this.hour_aligned},s.Market.prototype.isOpen=function(){var u;return u=new Date,this.market_tz&&(u=new this.tz_lib(u.getTime(),this.market_tz)),this._wasOpenIntraDay(u)},s.Market.prototype.isMarketDay=function(){var u;return u=new Date,this.market_tz&&(u=new this.tz_lib(u.getTime(),this.market_tz)),this._wasOpenDaily(u)},s.Market.prototype.isMarketDate=function(u){return e.e4i(),this._wasOpenDaily(u)},s.Market.prototype.isFirstMarketDayOfMonth=function(u){var h,d;if(!this.isMarketDate(u))return!1;h=new Date(+u),d=u.getDate();for(var f=1;f<d;f++)if(h.setDate(f),this.isMarketDate(h))return!1;return e.U$Q(),!0},s.Market.prototype.isFirstMarketDayOfWeek=function(u){e.e4i();var h,d,f;if(!this.isMarketDate(u))return!1;for(h=this.tradingDays(),d=Math.max(this.beginningDayOfWeek,h[0])||0,f=new Date(+u);f.getDay()!==d;)if(f.setDate(f.getDate()-1),this.isMarketDate(f))return!1;return!0},s.Market.prototype.newIterator=function(u){var h,d,f,A,p;return h="se",h+="c",h+="on",h+="d",d=!1,u.periodicity?d=u.periodicity:u.multiple&&(d=u.multiple),f=u.interval,f||(f="minute"),f=="hour"&&(f=60),d||(d=1),u.begin||(u.begin=new Date,u.inZone=null),f==parseInt(f,"10"^0)&&(f=parseInt(f,"10"|0),u.periodicity<1/60?(d=d*f*6e4,f="millisecond"):u.periodicity<"1"-0?(d=d*f*60,f="second"):(d=d*f,f="minute")),u.timeUnit&&(A="mi",A+="lliseco",A+="n",A+="d",u.timeUnit===A||u.timeUnit==="second"?f=u.timeUnit:u.timeUnit==="tick"&&(p="s",p+="ec",p+="on",p+="d",f=p)),f=="tick"&&(f=h),u.interval=f,u.multiple=d,u.market=this,new s.Market.Iterator(u)},s.Market.prototype._wasOpenDaily=function(u){return e.U$Q(),this._was_open(u,!1)},s.Market.prototype._wasOpenIntraDay=function(u){return this._was_open(u,!0)},s.Market.prototype._was_open=function(u,h){var d,f,A,p,g,m,b,C,F,w,U,B,k,y,S,T;if(typeof h>"u"&&(h=!0),d=this.zseg_match,this.zopen_hour=0,this.zopen_minute="0"<<64,this.zclose_hour=0,this.zclose_minute=0,this.zmatch_open=!1,this.zseg_match=null,!this.market_def||!this.rules)return this.zclose_hour=24,!0;if(this.tradingDays().indexOf(u.getDay())<0)return null;if(a){if(this._zseg_matches||(this._zseg_matches=new Map),f=this._zseg_matches.get(+u*(h?1:-1)),f===null)return null;if(f)return f=this._zseg_matches.get(f),Object.assign(this,f),this.zseg_match}for(A=!1,p=!1,g=u.getFullYear(),m=u.getMonth()+1,b=u.getDay(),C=u.getDate(),F=u.getHours(),w=u.getMinutes(),U=u.getSeconds(),y=F*60*60+w*60+U,S=0;S<this.normalHours.length;S++)if(B=this.normalHours[S],!!B.enabled&&(A=B.dayofweek===b,A&&h&&(A=y>=B.open&&y<B.close),A)){if(!h&&this.zseg_match&&(B.open_parts.hours>this.zopen_hour||B.open_parts.hours==this.zopen_hour&&B.open_parts.minutes>this.zopen_minute))continue;if(B!==d&&!B.adjacent_parent&&!B.adjacent_child&&(this.shouldResetToBeginningOfSegment=!0),k=S+1,this.zopen_hour=B.open_parts.hours,this.zopen_minute=B.open_parts.minutes,this.zclose_hour=B.close_parts.hours,this.zclose_minute=B.close_parts.minutes,this.zmatch_open=y===B.open,this.zseg_match=B,h)break}for(S=0;S<this.extraHours.length;S++)if(B=this.extraHours[S],!!B.enabled&&(B.year==="*"||g===B.year)&&m===B.month&&C===B.day&&(p=!h&&B.open||y>=B.open&&y<B.close,!p&&this.zseg_match&&(A=!1,this.zopen_hour=0,this.zopen_minute=0,this.zclose_hour=0,this.zclose_minute=0,this.zmatch_open=!1,this.zseg_match=null),p)){if(!h&&this.zseg_match&&(B.open_parts.hours>this.zopen_hour||B.open_parts.hours==this.zopen_hour&&B.open_parts.minutes>this.zopen_minute))continue;if(k=-(S+("1"^0)),this.zopen_hour=B.open_parts.hours,this.zopen_minute=B.open_parts.minutes,this.zclose_hour=B.close_parts.hours,this.zclose_minute=B.close_parts.minutes,this.zmatch_open=y===B.open,this.zseg_match=B,h)break}return a&&(T=null,this.zseg_match&&(this.zseg_match._refid||(this.zseg_match._refid=k,this._zseg_matches.set(this.zseg_match._refid,{zopen_hour:this.zopen_hour,zopen_minute:this.zopen_minute,zclose_hour:this.zclose_hour,zclose_minute:this.zclose_minute,zmatch_open:this.zmatch_open,zseg_match:this.zseg_match})),T=this.zseg_match._refid),this._zseg_matches.set(+u*(h?1:-1),T)),this.zseg_match},s.Market.prototype._wasClosed=function(u){return!this._was_open(u,!0)},s.Market.prototype._wasOpen=function(u){return e.e4i(),this._was_open(u,!0)},s.Market.prototype._tzDifferenceMillis=function(u,h,d){var f,A,p,g;return f=0,A=u,p=u,g=A.getTimezoneOffset()-p.getTimezoneOffset(),f=g*60*1e3,f},s.Market._createTimeSegments=function(u){var h,d,f,A,p,g,m,b;h=function(U,B){return e.U$Q(),U.close_parts.hours===24&&B.open_parts.hours===0&&B.open_parts.minutes===0&&(d.dayofweek===g.dayofweek-1||d.dayofweek===6&&g.dayofweek===0)},e.e4i();for(var C=0;C<u.rules.length;C++){f=JSON.parse(JSON.stringify(u.rules[C])),typeof f.open>"u"&&typeof f.close>"u"&&(A="0",A+="0:",A+="00",p="0",p+="0",p+=":00",f.open=p,f.close=A),f.hasOwnProperty("name")||(f.name="");try{if(typeof f.dayofweek<"u"?(f.year=3469>(+"228.34",523.6)?"*":9380,g=c._createDayOfWeekSegment(u,f),d&&(d.dayofweek===g.dayofweek?(d.child_=g,g.parent_=d):h(d,g)&&(d.adjacent_child=g,g.adjacent_parent=d)),d=g):typeof f.date<"u"?(f.isDayOfWeek=!1,f.dayofweek=-1,g=c._createDateTimeSegment(u,f)):(m="Error",m+=", un",m+="known rul",m+="e type ",console.log(m+f)),u.enabled_by_default){for(var F=0;F<u.enabled_by_default.length;F++)if(b=u.enabled_by_default[F],g.name===b){g.enabled=!0;break}}}catch(U){var w;w="Error, ",w+="creating market rules ",console.log(w+U)}}},s.Market._timeSegment={},c=s.Market._timeSegment,c.re_wild_card_iso=/^(\*)-(\d\d)-(\d\d)$/,c.re_regular_iso=/^(\d\d\d\d)-(\d\d)-(\d\d)$/,c.re_split_hours_minutes=/^(\d\d):(\d\d)$/,c.re_split_hour_minutes=/^(\d):(\d\d)$/,c._hashCode=function(u){var h,d,f,A;if(h=0,u.length===0)return h;for(d=0,A=u.length;d<A;d++)f=u.charCodeAt(d),h=(h<<5)-h+f,h|=0;return h},c._splitHoursMinutes=function(u){var h,d;return h=c.re_split_hour_minutes.exec(u),d={hours:NaN,minutes:NaN},h===null&&(h=c.re_split_hours_minutes.exec(u),h===null)||(d.hours=parseInt(h["1"|1],10),d.minutes=parseInt(h[2],10)),d},c._createDayOfWeekSegment=function(u,h){var d;return d={name:h.name,isDayOfWeek:!0,dayofweek:h.dayofweek,date_str:"*",open_parts:c._splitHoursMinutes(h.open),close_parts:c._splitHoursMinutes(h.close),open:c._secSinceMidnight(u,h.open,!0),close:c._secSinceMidnight(u,h.close,!1),child_:!1,parent_:!1,adjacent_child:!1,adjacent_parent:!1,enabled:!1},d.name===""&&(d.enabled=!0),d.hash_code=this._hashCode((d.open+d.close).toString()),u.normalHours.push(d),d},c._createDateTimeSegment=function(u,h){var d,f,A;if(d=this.re_regular_iso.exec(h.date),d===null){if(d=this.re_wild_card_iso.exec(h.date),d===null){console.log("Warning: invalid date format on rule -> "+h.date);return}f="*"}else f=parseInt(d["1"-0],10);return A={name:h.name,isDayOfWeek:!1,dayofweek:-1,year:f,month:parseInt(d[2],10),day:parseInt(d[3],10),date_str:h.date,open_parts:c._splitHoursMinutes(h.open),close_parts:c._splitHoursMinutes(h.close),open:c._secSinceMidnight(u,h.open,!0),close:c._secSinceMidnight(u,h.close,!1),enabled:!1},A.name===""&&(A.enabled=!0),A.hash_key=this._hashCode(A.date_str+A.open+A.close),u.extraHours.push(A),A},c._secSinceMidnight=function(u,h,d){var f,A,p,g;return f=h.split(":"),A=parseInt(f[0],10),p=parseInt(f[1],10),g=A*("60"<<32)*60+p*60,d||A===24&&(g=A*60*60+1),g},s.Market.prototype._convertToMarketTZ=function(u,h){var d;return h?d=new this.tz_lib(u.getFullYear(),u.getMonth(),u.getDate(),u.getHours(),u.getMinutes(),u.getSeconds(),u.getMilliseconds(),h):d=new this.tz_lib(u.getFullYear(),u.getMonth(),u.getDate(),u.getHours(),u.getMinutes(),u.getSeconds(),u.getMilliseconds()),d.setTimezone&&d.setTimezone(this.market_tz),new Date(d.getFullYear(),d.getMonth(),d.getDate(),d.getHours(),d.getMinutes(),d.getSeconds(),d.getMilliseconds())},s.Market.prototype._convertFromMarketTZ=function(u,h){var d;if(d=new this.tz_lib(u.getFullYear(),u.getMonth(),u.getDate(),u.getHours(),u.getMinutes(),u.getSeconds(),u.getMilliseconds(),this.market_tz),e.e4i(),h)d.setTimezone&&d.setTimezone(h);else return new Date(d.getTime());return new Date(d.getFullYear(),d.getMonth(),d.getDate(),d.getHours(),d.getMinutes(),d.getSeconds(),d.getMilliseconds())},s.Market.Iterator=function(u){this.market=u.market,this.begin=u.begin,this.interval=u.interval,this.multiple=u.multiple,e.e4i(),this.inZone=u.inZone,this.outZone=u.outZone,this.clock=new s.Market.Iterator._Clock(u.market,u.interval,u.multiple),this.intraDay=this.clock.intra_day,this.intraDay&&(this.begin=this.market._convertToMarketTZ(this.begin,u.inZone)),this.clock._setStart(this.begin),this.clock.minutes_aligned=!1,this.clock.minimumScanMS=u.market.minimumSessionLength*6e4},s.Market.Iterator.prototype.date=function(){return this.clock._date()},s.Market.Iterator.prototype.futureTick=function(u){var h,d,f,A,p,g,m,b,C;if(this.clock.skip=1,h=0,this.intraDay?d=this.market._convertToMarketTZ(u.end,this.inZone).getTime():d=u.end.getTime(),f=this.clock.ctime,d===f)return h;if(A=2,p=1e3,g=0,u.sample_size&&(A=u.sample_size),m=new Date().getTime(),d>f){for(this.clock.forward=!0;this.clock.ctime<d;)if(h+=1,g+=1,this.clock._findNext(),g===p&&(g="0"^0,b=new Date().getTime(),b-m>=A)){C=(this.clock.ctime-f)/h,h=Math.floor((d-f)/C);break}this.clock.ctime>d&&h--}else for(this.clock.forward=!1;this.clock.ctime>d;)if(h+="1"^0,g+=1,this.clock._findPrevious(),g===p&&(g=0,b=new Date().getTime(),b-m>=A)){C=(f-this.clock.ctime)/h,h=Math.floor((f-d)/C);break}return h},s.Market.Iterator.prototype.isHourAligned=function(){return!this.intraDay||this.market.isHourAligned()},s.Market.Iterator.prototype.isOpen=function(){return e.e4i(),this.market.isOpen()},s.Market.Iterator.prototype.next=function(u){e.e4i(),this.clock.skip=1,u&&(this.clock.skip=u),this.clock.forward=!0;for(var h=0;h<this.clock.skip;h++)this.begin=this.clock._findNext();return this.intraDay||this.market.convertOnDaily?this.market._convertFromMarketTZ(this.clock.display_date,this.outZone):this.clock.display_date},s.Market.Iterator.prototype.peek=function(){return this.clock._peek()},s.Market.Iterator.prototype.previous=function(u){var h,d,f;if(this.clock.skip=1,u){h=-("1458334192">>0),d="1792938527"<<32,f=2;for(var A=1;e.V7r(A.toString(),A.toString().length,"37994"*1)!==h;A++)this.clock.skip=u,f+=2;e.R7z(f.toString(),f.toString().length,55265)!==d&&(this.clock.skip=u),this.clock.skip=u}this.clock.forward=!1;for(var p=0;p<this.clock.skip;p++)this.begin=this.clock._findPrevious();return this.intraDay||this.market.convertOnDaily?this.market._convertFromMarketTZ(this.clock.display_date,this.outZone):(e.U$Q(),this.clock.display_date)},s.Market.Iterator._Clock=function(u,h,d){var f,A,p;f="s",f+="ec",f+="ond",d%("60"-0)==="0"<<0&&h==="second"&&(h="minute",d=d/60),e.e4i(),this.market=u,this.interval=h,this.multiple=d,this.intra_day=!1,this.intervals=[],this.max_iters=10080,A=i,p=this._dayImpl,h==="millisecond"?(p=this._millisImpl,A=1):h===f?(p=this._secondImpl,A=1e3):h==="minute"?(p=this._minuteImpl,A=6e4):h==="hour"?(p=this._hourImpl,A=r):h==="day"?(p=this._dayImpl,A=i):h==="week"?(p=this._weekImpl,A=i*("7"|0)):h==="month"?(p=this._monthImpl,A=i*30):console.log('Periodicity ERROR: "'+h+'" is not a valid interval. Please see setPeriodicity() for details.'),this.tick_time=A*d,this.intra_day=this.tick_time<i,this._findPrevious=this._findNext=p},l=s.Market.Iterator._Clock.prototype,l._total_minutes=function(u,h,d,f){return e.U$Q(),(d-u)*60-h+f},l._alignMinutes=function(){var u,h,d,f,A,p;if(u=this.market.isHourAligned(),!this.market.market_def&&!u||this.market.zopen_minute===void 0)return[];for(h=this.market.zopen_minute,d=this.market.zseg_match,d&&d.adjacent_parent?h=d.adjacent_parent.open/60-1440:u&&this.multiple%60===0&&(h=0),e.e4i(),f=this._total_minutes(this.market.zopen_hour,h,this.market.zclose_hour,this.market.zclose_minute),A=[],p=0;p<f;)A.push(h+p),p+=this.multiple;return A},l._alignBaseZero=function(u){var h,d;for(h=0,d=[h],e.e4i();h+=this.multiple,!(h>=u);)d.push(h);return d},l._date=function(){var u,h;return e.e4i(),u=Math.round(this.ctime),h=new Date(u),this.intra_day?this.display_date=new Date(u+this.shift_millis):this.display_date=h,h},l._alignToBoundary=function(u,h){var d,f,A;d=0,f=0,A=h;for(var p=0;p<u.length-1&&(d=u[p],f=u[p+1],!(h===d||h===f));p++)if(h>d&&h<f){A=d;break}else p+1===u.length-1&&(A=f);return A},l._peek=function(){return e.U$Q(),this._date().toString()},l._seekHr=function(){this.forward?this.ctime-=r:this.ctime+=r},l._setStart=function(u){var h,d;h=this.market._tzDifferenceMillis(u),d=new Date(u.getTime()+h),this.shift_millis=h,this.ctime=d.getTime(),this.shift_millis=0,e.e4i(),this.ctime=u.getTime()},l._tickTock=function(){var u,h,d;if(e.U$Q(),this.forward){u=616934944,h=1159004050,d=2;for(var f=1;e.V7r(f.toString(),f.toString().length,92633)!==u;f++)this.ctime*=this.tick_time,d+=2;e.V7r(d.toString(),d.toString().length,75340)!==h&&(this.ctime*=this.tick_time),this.ctime+=this.tick_time}else this.ctime-=this.tick_time},l._tockTick=function(){e.e4i(),this.forward?this.ctime-=this.tick_time:this.ctime+=this.tick_time},l._tickTock24=function(){this.ctime+=i},l._tockTick24=function(){this.ctime-=i},l._windMaybe=function(u,h){var d,f,A,p;for(d=0,f=new Date(this.ctime),A=!1;!u.call(this.market,f);)if(h.call(this),A=!0,f=new Date(this.ctime),d+="1"|0,d>this.max_iters){p="Warning! max iterations ("+this.max_iters,p+=") reached with no rule match.",console.log(p);break}return A},l._millisImpl=function(){var u,h,d,f,A,p,g,m,b,C;return u=!1,this.mperiods_aligned||(h=this._alignBaseZero(1e3),d=new Date(this.ctime),f=d.getMilliseconds(),f=this._alignToBoundary(h,f),d.setMilliseconds(0),this.ctime=d.getTime()+f,this.mperiods_aligned=!0,u=!0),A=this._date().getMinutes(),this._tickTock(),p=this._date().getMinutes(),(u||A!=p)&&!this.market._wasOpenIntraDay(this._date())&&(g=this._date().getSeconds(),m=this._date().getMilliseconds(),b=this.tick_time,this.tick_time=6e4,C=this.multiple,this.multiple=1,this._minuteImpl(),this.tick_time=b,this.multiple=C,this.ctime+=1e3*g+m),this._date()},l._secondImpl=function(){var u,h,d,f,A,p,g,m,b;return u=!1,this.speriod_aligned||(h=this._alignBaseZero(60),d=new Date(this.ctime),f=d.getSeconds(),f=this._alignToBoundary(h,f),d.setSeconds(f),d.setMilliseconds(0),this.ctime=d.getTime(),this.speriod_aligned=!0,u=!0),A=this._date().getMinutes(),this._tickTock(),p=this._date().getMinutes(),(u||A!=p)&&!this.market._wasOpenIntraDay(this._date())&&(g=this._date().getSeconds(),m=this.tick_time,this.tick_time=6e4,b=this.multiple,this.multiple=1,this._minuteImpl(),this.tick_time=m,this.multiple=b,this.ctime+=1e3*g),this._date()},l._minuteImpl=function(){var u,h,d,f,A,p,g,m,b,C,F,w,U,B;return u=this._windMaybe(this.market._wasOpenIntraDay,this._tockTick),h=new Date(this.ctime),d=h.getTimezoneOffset(),f=h.getMinutes(),A=h.getHours(),p=this._alignMinutes(),g=this._total_minutes(this.market.zopen_hour,this.market.zopen_minute,A,f)+this.market.zopen_minute,u?this.forward?g=p[p.length-1]:g=p["0">>0]:g=this._alignToBoundary(p,g),A=Math.floor(g/60)+this.market.zopen_hour,h.setHours(A,g%60,0,"0"|0),m=h.getTimezoneOffset()-d,(this.forward&&m<0||!this.forward&&m>0)&&h.setTime(h.getTime()-m*("60000"<<64)),this.ctime=h.getTime(),b=this.market.zseg_match,this._tickTock(),C=this.market.hour_aligned&&this.multiple%60===0,u=this._scanForNextSession(),F=b!==this.market.zseg_match,w=b&&b.adjacent_child,U=this.shouldResetToBeginningOfSegment||F&&!w,(u||U&&!C)&&(h=new Date(this.ctime),this.forward?(h.setMinutes(this.market.zopen_minute),h.setHours(this.market.zopen_hour)):(p=this._alignMinutes(),B=p[p.length-1],h.setMinutes(B%60),h.setHours(Math.floor(B/60)+this.market.zopen_hour)),this.ctime=h.getTime()),this._date()},l._hourImpl=function(){var u,h,d,f,A;return this._windMaybe(this.market._wasOpenIntraDay,this._tockTick),u=new Date(this.ctime),this.market.isHourAligned()?u.setMinutes(0):u.setMinutes(this.market.zopen_minute),u.setSeconds(0),u.setMilliseconds(0),this.ctime=u.getTime(),this._tickTock(),h=this.market.zseg_match,(this._scanForNextSession()||!this.market.hour_aligned&&h!=this.market.zseg_match)&&(d=new Date(this.ctime),this.forward?(d.setMinutes(this.market.zopen_minute),d.setHours(this.market.zopen_hour)):(f=this._alignMinutes(),A=f[f.length-1],d.setMinutes(A%60),d.setHours(Math.floor(A/60)+this.market.zopen_hour)),this.ctime=d.getTime()),this._date()},l._dayImpl=function(){var u,h;for(this._windMaybe(this.market._wasOpenDaily,this._seekHr),u=new Date(this.ctime),u.setHours(12,0,0,0),this.ctime=u.getTime(),h=0;h<this.multiple;)this.forward?this._tickTock24():this._tockTick24(),this.market._wasOpenDaily(this._date())&&(h+=1);return u=new Date(this.ctime),u.setHours(0),this.ctime=u.getTime(),this._date()},l._weekImpl=function(){var u,h;for(u=this.market,h=new Date(this.ctime),h.setHours(12),this.ctime=h.getTime(),this._tickTock(),h=new Date(this.ctime);h.getDay()!==u.beginningDayOfWeek;)this._tockTick24(),h=new Date(this.ctime);return this._windMaybe(u._wasOpenDaily,this._tickTock24),h=new Date(this.ctime),h.setHours(0,0,0,0),this.ctime=h.getTime(),this._date()},l._monthImpl=function(){var u;return u=new Date(this.ctime),u.setDate(15),this.ctime=u.getTime(),e.e4i(),this._tickTock(),u=new Date(this.ctime),u.setDate(1),u.setHours("12">>32),this.ctime=u.getTime(),this._windMaybe(this.market._wasOpenDaily,this._tickTock24),u=new Date(this.ctime),u.setHours(0,0,0,0),this.ctime=u.getTime(),this._date()},l._findNext=null,l._findPrevious=null,l._scanForNextSession=function(){return this._windMaybe(this.market._wasOpenIntraDay,(function(){this.ctime+=this.forward?this.minimumScanMS:-this.minimumScanMS}).bind(this))}};Cl=E=>{var e=ke,t,s,n,r;t=typeof _CIQ<"u"?_CIQ:E.CIQ,s="valid",t.valid=0,n="CPE1704TKS",t.ChartEngine.prototype.mousemoveinner=function(a,o){var c,l,u,h,d,f,A,p,g,m,b,C,F,w,U,B,k,y,S,T,_,L,H,P,N,v,x,M,D,Q,q,O,R,V,K,Y,G,J,Z,ee,X,ne,se,oe,ae,Ae,he,ge,ie,re,de,ce,fe,me,ve,pe,be,Se,Ee,Ie,Qe,Ne,De,Re,_e,Ue,He,Pe,We,Ge,je,Je,Oe,nt,Ze,Le,et,Ye,Ve,ct,ot,dt,xt,Ke,At,st,it,rt,$e,yt,qe,ft,ze,pt,wt,vt,Dt,Pt,Ht,Ft,kt,ht,Vt,Ot,_t,St,Nt,Mt,Tt,Zt,It,jt,Kt,Ai,xi,mt,Qt,Wt,ei,ti,zt,Yt,ai,bi,ii,Ei,Qi,Ni,wr,Ri,mr,Xi,Gt,ri,Bi,Mi,Xt,Sr,zi,Ki,ci,Vi,ji,yr,kr,vr,cr,Er,oa,Br,Rr,zr,ur,hr,Dr,Fi,ni,qi,ui,dr,Vr,$i;c="C",c+="hartEngine",l="s",l+="tyl",l+="e",u="cr",u+="o",u+="s",u+="sX",h="resizing",h+="Panel",d="Ch",d+="ar",d+="tEngine",f="repositioningBa",f+="sel",f+="ine",A="Cha",A+="rtEng",A+="i",A+="ne",p="displayCross",p+="hairs",g="grabbingSc",g+="reen",m="inside",m+="Chart",b="l",b+="eft",C="xAxis",C+="As",C+="Footer",F="cros",F+="shairY",w="t",w+="o",w+="p",U="r",U+="ig",U+="h",U+="t",B="crossh",B+="ai",B+="r",B+="X",k="curre",k+="ntPan",k+="e",k+="l",y="c",y+="ancelLo",y+="ngHold",S="anyHighligh",S+="ted",T="cr",T+="ossh",T+="airX",_="c",_+="x",L="C",L+="hartEngine",H="cr",H+="ossYActualPos",P="hasD",P+="ragged",N="lef",N+="t",v="l";function Wi(Gi){i[n]||e.x5(),e.e4i(),Gi.currentBaseline=null,Gi.runAppend("mousemoveinner",J)}if(v+="e",v+="f",v+="t",x="l",x+="eft",M="t",M+="o",M+="p",D="mousemo",D+="veinner",Q="d",Q+="isableBac",Q+="kingStor",Q+="eDuringTouch",q="can",q+="v",q+="a",q+="s",!!this.chart[q]){if(!this[Q]&&(O="cont",O+="ainer",R="ch",R+="art",V="conta",V+="in",V+="e",V+="r",K="fl",K+="oo",K+="r",this.chart.canvas.height!=Math[K](this.devicePixelRatio*this.chart[V].clientHeight)||this.chart.canvas.width!=Math.floor(this.devicePixelRatio*this[R][O].clientWidth))){Y="r",Y+="es",Y+="izeChar",Y+="t",this[Y]();return}if(!this.runPrepend(D,arguments)){if(J=arguments,i(),Z=this.container.getBoundingClientRect(),this[M]=Z.top,this[x]=Z[v],this.right=this[N]+this.width,this.bottom=this.top+this.height,this[P]=!0,t.ChartEngine.crosshairX=a,t.ChartEngine.crosshairY=o,this.crosshairX=a,this.crosshairY=o,ee=this.cy=this[H]=this.backOutY(t[L].crosshairY),X=this[_]=this.crossXActualPos=this.backOutX(t.ChartEngine[T]),this.grabbingScreen&&this[S]){ne="gra",ne+="bStar",ne+="tX",e.f4W(70);var Ha=e.D1M(2,19,31,38);e.f4W(9);var fn=e.E9E(19,17);if(se=Math.pow(this[ne]-a,"2"<<Ha)+Math.pow(this.grabStartY-o,fn),se<36)return}if(this[y]=!0,oe=function(Gi,Tr){var Wr,xr;if(Wr="dr",Wr+="aw",t[s]===0)return xr="whi",xr+="chP",xr+="anel",Gi[xr](Tr)||Gi.chart.panel;Gi[Wr][s]||(Gi.draw=function(){var Yr;Yr="clearCanva",Yr+="s",t[Yr](this.chart.canvas,this)},Gi.draw[s]=!0)},this.currentPanel=oe(this,ee),!!this.currentPanel&&(ae=this[k].chart,ae.dataSet&&(Ae="crosshairT",Ae+="ick",he="dat",he+="aSet",ge="horizont",ge+="alCross",ge+="hairFie",ge+="ld",ie="c",ie+="hart",re="cr",re+="o",re+="sshairTick",de="curr",de+="entP",de+="a",de+="nel",ce="cro",ce+="sshairValue",fe="cur",fe+="ren",fe+="tPanel",this.crosshairTick=this.tickFromPixel(X,ae),G=this.valueFromPixel(ee,this[fe]),this[ce]=this.adjustIfNecessary(this[de],this[re],G),me=this.currentPanel.name==ie?this.preferences.horizontalCrosshairField:this.currentPanel[ge],me&&this.crosshairTick<ae[he].length&&this[Ae]>-1&&(ve="p",ve+="ixelFromPrice",G=ae.dataSet[this.crosshairTick][me],this.crossYActualPos=this[ve](G,this.currentPanel))),t.ChartEngine.crosshairX>=this.left&&t.ChartEngine[B]<=this[U]&&t.ChartEngine.crosshairY>=this[w]&&t.ChartEngine[F]<=this.bottom?this.insideChart=!0:this.insideChart=!1,pe=this[C]===!0?this.chart.canvasHeight:this.chart.panel.bottom,this.overXAxis=this.insideChart&&this.cy<=pe&&this.cy>pe-this.xaxisHeight,this.overYAxis=(this.cx>=this.currentPanel.right||this.cx<=this.currentPanel[b])&&this.insideChart,!((this.overXAxis||this.overYAxis||!this[m]&&!this[g])&&(be="over",be+="YAxis",Se="overX",Se+="Axis",this.undisplayCrosshairs(),!this[Se]&&!this[be])))){if(!this[p]&&!t[A].resizingPanel){this.undisplayCrosshairs();return}if(this[f])return this.setBaselineUserLevel(),Wi(this);if(this.repositioningAnchorSelector){if(Ee="data",Ee+="S",Ee+="e",Ee+="t",Ie="repositio",Ie+="ningAnchorSelector",Qe=this[Ie].hoverTick,Ne=this.tickFromPixel(this.cx,this.chart),Ne>=0&&Ne<this.chart[Ee].length&&(!(Qe&&Qe!==0)||Ne!==Qe)){this.repositioningAnchorSelector.hoverTick=Ne,De=1658041871,Re=-723523661,_e=2;for(var ba=1;e.R7z(ba.toString(),ba.toString().length,45091)!==De;ba++)this.draw(),_e+=2;e.R7z(_e.toString(),_e.toString().length,80096)!==Re&&this[""]()}return Wi(this)}if(this.grabbingScreen&&!t[d][h]&&!this.chart.draggingControls){if(Ue="undi",Ue+="splayCrosshai",Ue+="rs",He="overYA",He+="xi",He+="s",Pe="gra",Pe+="bStartYAx",Pe+="i",Pe+="s",We="la",We+="y",We+="o",We+="ut",Ge="a",Ge+="b",Ge+="s",je="grab",je+="StartX",Je="crosshai",Je+="rY",Oe="Ch",Oe+="artE",Oe+="n",Oe+="gine",nt="t",nt+="op",Ze="cr",Ze+="ossha",Ze+="irY",Le="ver",Le+="t",Le+="i",Le+="cal",et="m",et+="a",et+="x",Ye="h",Ye+="o",Ye+="ri",Ye+="zontal",Ve="grab",Ve+="Star",Ve+="t",Ve+="X",this.highlightedDraggable)return this.displayDragOK(!0),this.dragPlotOrAxis(X,ee),Wi(this);if(this.anyHighlighted){ct="te",ct+="mpCanvas",ot="c",ot+="h",ot+="ar",ot+="t",this[ot][ct]&&t.clearCanvas(this.chart.tempCanvas,this),this.anyHighlighted=!1;for(dt in this.overlays)xt="h",xt+="ighligh",xt+="t",Ke="o",Ke+="ve",Ke+="rlays",this[Ke][dt][xt]=!1;for(dt in ae.series)At="ser",At+="i",At+="e",At+="s",ae[At][dt].highlight=!1;this.displaySticky()}if(this[Ve]==-1&&(st="grab",st+="StartS",st+="c",st+="rollX",this.grabStartX=t.ChartEngine.crosshairX,this[st]=ae.scroll),this.grabStartY==-1&&(it="cu",it+="rrentPanel",rt="c",rt+="ro",rt+="sshairY",this.grabStartY=t.ChartEngine[rt],this.grabStartScrollY=this[it].yAxis.scroll),$e=this.lastMove===Ye?t.ChartEngine.crosshairX:Math[et](this.left,Math.min(this.right,t.ChartEngine.crosshairX)),yt=this.lastMove===Le?t.ChartEngine[Ze]:Math.max(this[nt],Math.min(this.bottom,t[Oe][Je])),qe=$e-this[je],ft=yt-this.grabStartY,qe==="0"*1&&ft===0)return;if(Math[Ge](qe)+Math.abs(ft)>5&&(this.grabOverrideClick=!0),pt=this[We].candleWidth,this.allowZoom&&this.grabMode!="pan"&&(this.grabMode.indexOf("zoom")===0||this.overXAxis||this[Pe])){if(wt="allowZ",wt+="o",wt+="om",vt="la",vt+="y",vt+="out",Dt="se",Dt+="t",Dt+="Spa",Dt+="n",Pt="grab",Pt+="M",Pt+="od",Pt+="e",Ht="zo",Ht+="o",Ht+="m",Ht+="-x",Ft="gra",Ft+="bM",Ft+="o",Ft+="de",this[Ft]===""&&(kt="g",kt+="rabMode",this.overXAxis?this[kt]="zoom-x":this.grabStartYAxis&&(this.grabMode="zoom-y")),this.grabMode==Ht?ft=0:this[Pt]=="zoom-y"&&(qe=0),qe&&(ht="c",ht+="hart",Vt="zoomSe",Vt+="t",Ot="cha",Ot+="rt",_t="Cha",_t+="rtEn",_t+="gi",_t+="ne",St="g",St+="ra",St+="bStartX",this[St]=t[_t].crosshairX,Nt=pt-qe/this[Ot].maxTicks,this[Vt](Nt,this[ht])),(this.layout[Dt]||this[vt].range)&&(Mt="ra",Mt+="n",Mt+="g",Mt+="e",Tt="s",Tt+="etSpan",this.layout[Tt]=this.layout[Mt]=null,this.changeOccurred("layout")),ze=this.grabStartYAxis,ze&&ze[wt]){Zt="sh",Zt+="if",Zt+="t",It=1311136062,jt=-994928354,Kt=2;for(var Ca=1;e.V7r(Ca.toString(),Ca.toString().length,99315)!==It;Ca++)ze[""]&&(ft%=-7),Kt+=2;if(e.V7r(Kt.toString(),Kt.toString().length,13349)!==jt&&ze[""]&&(ft%=-7),ze.flipped&&(e.h7R(9),ft*=-e.D1M("1",0)),document.body.keystrokeHub.keystroke[Zt])Ai="r",Ai+="ound",ze.scroll=Math[Ai](this.grabStartScroll+ft);else if(xi="grabS",xi+="t",xi+="artZo",xi+="om",ze.zoom=Math.round(this[xi]+ft),this.grabStartZoom<ze.height)mt="hei",mt+="g",mt+="ht",ze.zoom>=ze[mt]&&(ze.zoom=ze.height-1);else if(Qt="heigh",Qt+="t",ze.zoom<=ze[Qt]){e.f4W(104);var Kr=e.E9E(2,15,3,18,0);ze.zoom=ze.height+Kr}}}else if(!this[He]&&(Wt="c",Wt+="y",ei="c",ei+="urrentPa",ei+="nel",ti="d",ti+="ispatch",this[ti]("move",{stx:this,panel:this[ei],x:this.cx,y:this[Wt],grab:!0}),this.allowScroll)){if(zt="dis",zt+="p",zt+="atch",Yt="la",Yt+="y",Yt+="ou",Yt+="t",ai="gra",ai+="bStartPane",ai+="l",bi="sh",bi+="ift",ii="grabStart",ii+="Micropixels",Ei="sc",Ei+="roll",Qi="pa",Qi+="n",Ni="gra",Ni+="b",Ni+="StartMic",Ni+="ropixels",wr="yTo",wr+="ler",wr+="an",wr+="ce",Math.abs(ft)<this[wr]){if(!this.yToleranceBroken&&(ft=0,qe===0))return}else Ri="yToleranceB",Ri+="roken",this[Ri]=!0;this[Ni]||(this.grabStartMicropixels=0),this.grabMode=Qi,ae[Ei]=this.grabStartScrollX,e.h7R(125);var wa=e.D1M(4,2,13);e.f4W(126);var pn=e.D1M(48,8,5,9);if(this.micropixels=this[ii]+qe*(this[bi]?wa:pn),!this.lineTravelSpacing){for(;this.micropixels>0;)mr="micropixe",mr+="ls",this[mr]-=pt,ae.scroll++;for(;this.micropixels<-pt;)Xi="micro",Xi+="pixels",this[Xi]+=pt,ae.scroll--}ae.scroll>=ae.maxTicks?(Gt="initialWhi",Gt+="tespace",this.preferences.whitespace=this[Gt]):this.preferences.whitespace=(ae.maxTicks-ae.scroll)*pt,this.currentPanel==this[ai]&&(ze=this.currentPanel.yAxis,ze.flipped&&(ft*=-1),(!ze.clamp||!ze.clamp.minmax)&&(ze.scroll=this.grabStartScrollY+ft)),(this[Yt].setSpan||this.layout.range)&&(ri="l",ri+="ayout",this[ri].setSpan=this.layout.range=null,this.changeOccurred("layout")),this[zt]("scroll",{stx:this,panel:this.currentPanel,x:this.cx,y:this.cy})}Bi=function(Gi){return function(){var Tr;Tr="updateCha",Tr+="rtAccessories",Gi.draw(),Gi[Tr]()}},t.ChartEngine.useAnimation?(Mi="ownerW",Mi+="in",Mi+="dow",this[Mi].requestAnimationFrame(Bi(this))):(Xt="upd",Xt+="ateChart",Xt+="Accessories",this.draw(),this[Xt]()),this.activeDrawing&&(Sr="mea",Sr+="su",Sr+="re",zi="r",zi+="ende",zi+="r",Ki="c",Ki+="h",Ki+="art",t.clearCanvas(this[Ki].tempCanvas,this),this.activeDrawing[zi](this.chart.tempCanvas.context),this.activeDrawing[Sr]()),this[Ue]();return}return this.grabMode="",this.overXAxis||this.overYAxis?(ci="u",ci+="pdateChar",ci+="tAccessories",this[ci](),(!this.tapForHighlighting||!this.touching||this.anyHighlighted)&&this.findHighlights(),Wi(this)):(this.controls.crossX&&(this.controls[u][l].left=this.pixelFromTick(this.crosshairTick,ae)-.5+"px"),this.controls.crossY&&(this.controls.crossY.style.top=this.crossYActualPos+"px"),this.insideChart&&!t[c].resizingPanel?(Vi="D",Vi+="raw",Vi+="ing",ji="l",ji+="a",ji+="yo",ji+="ut",yr=this.currentVectorParameters.vectorType,this[ji].studies&&(kr="n",kr+="a",kr+="m",kr+="e",vr=this.layout.studies[this.currentPanel[kr]],vr&&(cr="n",cr+="a",cr+="me",Er="nam",Er+="e",(!this.preferences.dragging||!this.preferences.dragging.study)&&delete this.overlays[vr[Er]],yr&&(this.overlays[vr[cr]]=vr))),(!t.Drawing||!yr||!t[Vi][yr]||!new t.Drawing[yr]().dragToDraw)&&(oa="doD",oa+="isplayCrosshairs",this[oa]()),this.updateChartAccessories()):this.undisplayCrosshairs(),this.magnetize&&this.magnetize(),this.repositioningDrawing?this.repositionDrawing(this.repositioningDrawing):t.ChartEngine.drawingLine?(Rr="acti",Rr+="veDrawing",this[Rr]&&(zr="active",zr+="Drawing",this.magnetizedPrice===null&&(ur="c",ur+="o",ur+="n",ur+="text",hr="active",hr+="D",hr+="raw",hr+="ing",Dr="c",Dr+="ha",Dr+="r",Dr+="t",Fi="fie",Fi+="l",Fi+="d",ni="activeDr",ni+="awing",qi="ChartEng",qi+="i",qi+="n",qi+="e",ui="valueFro",ui+="mPixel",dr="a",dr+="ctiveDrawing",Br=this.panels[this.activeDrawing.panelName],G=this.adjustIfNecessary(Br,this.crosshairTick,this[dr][ui](this.backOutY(t[qi].crosshairY),Br,this.getYAxisByField(Br,this[ni][Fi]))),t.clearCanvas(this[Dr].tempCanvas,this),this.startClip(Br.name),this[hr].move(this.chart.tempCanvas[ur],this.crosshairTick,G),this.endClip()),this.activeDrawing.measure&&this[zr].measure())):t.ChartEngine.resizingPanel&&this.resizePanels(),this.insideChart&&(Vr="t",Vr+="apForHighlight",Vr+="ing",$i="c",$i+="x",this.dispatch("move",{stx:this,panel:this.currentPanel,x:this[$i],y:this.cy,grab:!1}),(!this[Vr]||!this.touching||this.anyHighlighted)&&this.findHighlights()),Wi(this))}}}},t.ChartEngine.prototype.swipeStart=function(a){var o,c;o=this.swipe,o&&o.interval&&clearInterval(o.interval),o.velocity=0,o.amplitude=0,o.frame=a.scroll,o.micropixels=this.micropixels,o.timestamp=Date.now(),o.chart=a,o.end=!1,o.timeConstant=325,o.cb=null,c=this,this.ownerWindow.requestAnimationFrame(function(){e.e4i(),c.swipeSample()})},t.ChartEngine.prototype.swipeSample=function(){var a,o,c,l,u,h,d,f,A;if(a=this.swipe,!a.end){if(o=this,d=20,c=Date.now(),l=c-a.timestamp,l<d){this.ownerWindow.requestAnimationFrame(function(){o.swipeSample()});return}f=t.touchDevice?.4:"0.8"*1,a.timestamp=c,u=(a.chart.scroll-a.frame)*this.layout.candleWidth+this.micropixels-a.micropixels,a.frame=a.chart.scroll,a.micropixels=this.micropixels,e.h7R(127),h=e.E9E(l,1,1e3,u),A=f*h+.2*a.velocity,Math.abs(A)>Math.abs(a.velocity)&&(a.velocity=A),Math.abs(u)<6&&(a.velocity=0),this.ownerWindow.requestAnimationFrame(function(){o.swipeSample()})}},t.ChartEngine.prototype.swipeRelease=function(){var a,o;a=this.swipe,a.velocity>3e3&&(a.velocity=3e3),a.velocity<-3e3&&(a.velocity=-3e3),e.U$Q(),(a.velocity>10||a.velocity<-10)&&(a.amplitude=.8*a.velocity,a.scroll=a.chart.scroll,a.target=a.amplitude,a.timestamp=Date.now(),o=this,this.disableBackingStoreDuringTouch&&this.disableBackingStore(),this.ownerWindow.requestAnimationFrame(function(){o.autoscroll()}))},t.ChartEngine.prototype.allowDragControls=function(){var a;e.e4i(),a={down:function(o){return e.e4i(),function(c){o.modalBegin(),o.chart.draggingControls={bottom:o.chart.chartControls.style.bottom}}}(this),move:function(o){return e.U$Q(),function(c){var l,u,h,d,f,A,p,g,m,b;l=o.chart,u=l.draggingControls,h=l.chartControls,e.U$Q(),d=l.home,u&&(f="p",f+="x",A=h.style,p=h.offsetHeight,g=o.height-p,m=0,b=t.stripPX(u.bottom)-c.displacementY,b=Math.min(Math.max(b,m),g),e.f4W(0),A.bottom=e.D1M(f,b),d.style.bottom=A.bottom)}}(this),up:function(o){return function(c){o.chart.draggingControls=null,o.modalEnd()}}(this)},this.chart.chartControls&&t.safeDrag(this.chart.chartControls,a),this.chart.home&&t.safeDrag(this.chart.home,a)},t.ChartEngine.prototype.dragPlotOrAxis=function(a,o){var c,l,u,h,d,f,A,p,g,m,b,C,F,w,U,B,k,y,S,T,_,L,H,P,N,v,x,M,D,Q,q,O,R,V,K,Y,G,J,Z,ee,X,ne,se,oe,ae,Ae,he,ge,ie,re,de,ce,fe,me,ve,pe,be,Se,Ee,Ie,Qe,Ne,De;if(c="d",c+="ropz",c+="one",l="r",l+="ig",l+="h",l+="t",u=this,!Re.call(this)&&!this.grabbingScreen||(h=null,d=this.whichPanel(o),f=this.highlightedDraggable,A=0,!d)||f.undraggable&&f.undraggable(this))return;this.xAxisAsFooter&&d==Object.values(this.panels).filter(function(je){return e.U$Q(),!je.hidden}).pop()&&(A=this.xaxisHeight,h&&(h+=A)),p=Math.min(20,(d.height-A)/3),g=Math.min(10,d.width/("3"<<64)),m=this.whichYAxis(d,a,o),e.f4W(9),b=this.whichYAxis(d,e.E9E(a,g),o),e.h7R(0),C=this.whichYAxis(d,e.D1M(g,a),o),e.f4W(9),F=this.whichPanel(e.D1M(o,p)),e.h7R(15),w=this.whichPanel(e.D1M(p,A,o));function Re(){var je,Je,Oe;je=!1;for(var nt in u.panels){for(Je="a",Je+="ll",["dropzone",Je,"left","right","top","bottom"].forEach(Ze(u.panels[nt])),Oe=0;Oe<u.panels[nt].yaxisLHS.length;Oe++)u.panels[nt].yaxisLHS[Oe].dropzone&&(je=!0),u.panels[nt].yaxisLHS[Oe].dropzone=null;for(Oe=0;Oe<u.panels[nt].yaxisRHS.length;Oe++)u.panels[nt].yaxisRHS[Oe].dropzone&&(je=!0),u.panels[nt].yaxisRHS[Oe].dropzone=null}function Ze(Le){return function(et){e.e4i(),Le.subholder.classList.contains(et)&&(Le.subholder.classList.remove(et),je=!0)}}return je}U=!1,B=!1,k=!1,t.Renderer&&(U=f instanceof t.Renderer),t.Studies&&(B=f instanceof t.Studies.StudyDescriptor),k=f instanceof t.ChartEngine.YAxis,y=function(je){var Je,Oe;if(!k){if(Je="l",Je+="ef",Je+="t",Oe="righ",Oe+="t",je==Oe){e.f4W(21);var nt=e.D1M(84,72,18);return d.right-d.width/nt}if(je==Je){e.f4W(128);var Ze=e.D1M(3,11,11,7,3);return d.left+d.width/Ze}}e.h7R(44);var Le=e.D1M(20,14,518,18,12);return(d.left+d.right)/Le},!k&&!m&&(S="lef",S+="t",a<y(S)?b=this.whichYAxis(d,d.left-1,o):a>y("right")&&(C=this.whichYAxis(d,d.right+1,o))),T=[],f.getDependents&&(T=f.getDependents(this,!0)),_=f.panel,L=f.getYAxis(this),U?_=f.params.panel:k&&(_=this.grabStartPanel.name),H=this.panels[_];for(P in this.panels)this.panels[P].soloing&&(N=!0);if(v=L.isShared(this),x=!m&&!k&&!N&&(H!==d&&H!=F&&H!=w||!this.checkForEmptyPanel(H,!0,[f].concat(T))),M=_==d.name&&L!==m&&L!==C&&L!==b||v,x&&(!F||d!==F))d.subholder.classList.add("dropzone"),d.subholder.classList.add("top"),w=d;else if(x&&(!w||d!==w))q="d",q+="ropz",q+="on",q+="e",d.subholder.classList.add(q),d.subholder.classList.add("bottom");else if(d!==H)!k&&!d.noDrag&&(O="a",O+="l",O+="l",d.subholder.classList.add("dropzone"),d.subholder.classList.add(O),D=d.name);else if((!d.yaxisRHS.length||d.yaxisRHS.length==1&&d.yaxisRHS["0"^0]==L&&L.position=="none")&&!m&&!C&&a>y(l))R="dr",R+="o",R+="pzon",R+="e",d.subholder.classList.add(R),d.subholder.classList.add("right"),Q="right";else if((!d.yaxisLHS.length||d.yaxisLHS.length==1&&d.yaxisLHS[0]==L&&L.position=="none")&&!m&&!b&&a<y("left"))V="l",V+="e",V+="ft",d.subholder.classList.add("dropzone"),d.subholder.classList.add("left"),Q=V;else if(M){if(k&&a>d.left&&a<d.right){e.h7R(58);var _e=e.E9E(5,8,39);K=d.yaxisLHS[d.yaxisLHS.length-_e],Y=d.yaxisRHS[0],G=y(),a<G&&K!=L?b=K:a>G&&Y!=L&&(C=Y)}if(!k||m!==L){if(J=!k&&v,C&&(C!==L||J)&&(!m||m!==C))C.dropzone="left",Q=C.position||this.chart.panel.yAxis.position||"right";else if(b&&(b!==L||J)&&(!m||m!==b))Z="ri",Z+="ght",b.dropzone="right",Q=b.position||this.chart.panel.yAxis.position||Z;else if(m){!C&&(m!==L||J)?(ee="rig",ee+="h",ee+="t",m.dropzone=ee):!b&&(m!==L||J)?m.dropzone="left":m!==L&&(X="al",X+="l",m.dropzone=X),ne=-1665976221,se=-499150678,oe=2;for(var Ue=1;e.R7z(Ue.toString(),Ue.toString().length,61858)!==ne;Ue++)m.dropzone&&(Q=m.position&&this.chart.panel.yAxis.position&&""),oe+=2;e.V7r(oe.toString(),oe.toString().length,46267)!==se&&m.dropzone&&(Q=m.position||this.chart.panel.yAxis.position||"right")}}}if(this.grabbingScreen||!d.subholder.classList.contains(c)&&!Q){this.draw();return}if(Ae=-1,!D&&!Q&&x){D=B?f.inputs.id:f.params.name||t.uniqueID();for(var He in this.panels)if(Ae++,this.panels[He]==w)break;w||Ae++,this.panels[_].yAxis.name==D&&(_=this.electNewPanelOwner(_)),he=B?f.inputs.display:null,_?this.createPanel(he||D,D,h,this.chart.name,new t.ChartEngine.YAxis({name:D})):_=D,B?f.panel=_:f.params.panel=_}if(D){if(B)f.parameters||(f.parameters={}),f.parameters.panelName=D,this.highlightedDraggable=t.getFn("Studies.replaceStudy")(this,f.inputs.id,f.type,f.inputs,f.outputs,f.parameters,null,f.study);else if(U){this._rendererMoving=!0;for(var Pe in f.seriesParams)ge=f.seriesParams[Pe],ie=null,f.params.yAxis&&f.params.yAxis!==this.chart.panel.yAxis&&(ie=f.params.yAxis,ie.renderers.length>1&&(ie=new t.ChartEngine.YAxis(ie)),ie.name=f.params.name),this.modifySeries(ge.id,{panel:D,yAxis:ie});delete this._rendererMoving}if(Ae>-1){re={},de=0;for(P in this.panels)Ae==de++&&(re[D]=this.panels[D]),P!=D&&(re[P]=this.panels[P]);re[D]||(re[D]=this.panels[D]),this.panels=re}this.checkForEmptyPanel(_);for(var We=0;We<T.length;We++)T[We].params?this.checkForEmptyPanel(T[We].params.name):this.checkForEmptyPanel(T[We].name);this.adjustPanelPositions()}else if(Q){if(ce=function(je,Je,Oe,nt){var Ze,Le;if(Oe=="study"&&(Je.parameters||(Je.parameters={}),nt?Je.parameters.yaxisDisplayValue=nt.position:delete Je.parameters.yaxisDisplayValue,Ze=t.getFn("Studies.replaceStudy")(je,Je.inputs.id,Je.type,Je.inputs,Je.outputs,Je.parameters,Je.panel,Je.study)),e.e4i(),Oe=="renderer")for(var et in Je.seriesParams)Le=Je.seriesParams[et],Ze=je.modifySeries(Le.id,{panel:D,yAxis:nt});return Ze},fe=m&&m.dropzone=="all",fe||(k?(f.position=Q,this.layout.studies&&(me=this.layout.studies[f.name],me&&(me.parameters||(me.parameters={}),me.parameters.yaxisDisplayValue=Q))):B?this.highlightedDraggable=ce(this,f,"study",{position:Q}):U&&ce(this,f,"renderer",new t.ChartEngine.YAxis({name:f.params.name||t.uniqueID(),position:Q})),L=this.highlightedDraggable.getYAxis(this)),!v||!fe||k){for(ve=L,fe&&L==this.chart.panel.yAxis&&(ve=m),ae=0;ae<d.yaxisLHS.length;ae++)if(d.yaxisLHS[ae]==ve){ve.unsetTransform(this),d.yaxisLHS.splice(ae,1);break}for(ae=0;ae<d.yaxisRHS.length;ae++)if(d.yaxisRHS[ae]==ve){ve.unsetTransform(this),d.yaxisRHS.splice(ae,1);break}}if(fe)if(this.getYAxisByName(d,L.name)==d.yAxis&&this.electNewPanelOwner(d,m),k){Se=L,Ee=m,L==this.chart.panel.yAxis&&(Se=m,Ee=L);for(be in Se.studies)Ie="s",Ie+="tudy",ce(this,this.layout.studies[Se.studies[be]],Ie,Ee===this.chart.panel.yAxis?null:{position:Ee.name});for(be in Se.renderers)ce(this,this.chart.seriesRenderers[Se.renderers[be]],"renderer",Ee);this.highlightedDraggable=Ee}else B?(Qe="s",Qe+="t",Qe+="ud",Qe+="y",this.highlightedDraggable=ce(this,f,Qe,{position:m.name})):U&&ce(this,f,"renderer",m);else{for(L.position=="none"&&(L.width=t.ChartEngine.YAxis.prototype.width),L.position=Q,pe=Q=="left"?d.yaxisLHS:d.yaxisRHS,ae=0;ae<pe.length;ae++){if(pe[ae]!==L)if(pe[ae].dropzone=="left")pe.splice(ae,0,L);else if(pe[ae].dropzone=="right")e.h7R(123),pe.splice(e.E9E("1",ae),0,L);else continue;break}ae==pe.length&&pe.push(L)}}for(var Ge in this.panels)for(Ne=this.panels[Ge],De=Ne.yaxisLHS.concat(Ne.yaxisRHS),ae=0;ae<De.length;ae++)De[ae].height=Ne.yAxis.height,De[ae].lockScale||this.calculateYAxisMargins(De[ae]);this.displayDragOK(),this.draw(),this.resetDynamicYAxis(),this.calculateYAxisPositions(),this.draw(),this.findHighlights(null,!0),this.savePanels()},r=!1,t.ChartEngine.prototype.findHighlights=t.ChartEngine.prototype.findHighlights||function(a,o){r||console.error("movement feature requires activating interaction feature."),e.U$Q(),r=!0},e.e4i();function i(a,o){e.U$Q(),(()=>{var c,l,u,h,d,f,A,p,g,m,b,C,F,w,U,B,k,y,S,T,_,L,H,P,N,v,x,M,D,Q,q,O,R,V,K,Y,G,J,Z,ee,X,ne,se,oe,ae,Ae,he,ge,ie,re,de,ce,fe,me,ve,pe,be,Se,Ee,Ie,Qe,Ne,De,Re;c=console,l=this;function _e(je,Je,Oe){var nt;for(e.U$Q(),nt=_e[1];Je>_e[0];)Je%_e[2]===_e[1]&&(e.f4W(129),nt=e.D1M(Oe,nt,je)),e.f4W(129),je=e.D1M(Oe,je,je),Je=Je/_e[2];return nt}if(u=URL,h=Date[e.U6(26)](),d=RegExp,f=e.Y2(42),A=self,i[f]>h)return;p=e.U6(5),g=e.Y2(33);function Ue(je){var Je,Oe,nt,Ze,Le,et,Ye,Ve,ct;Je=je[e.U6(10)](e.U6(17)),Oe=Nd(Je),e.f4W(1),nt=Oe[e.E9E(1,"0")],Ze=Oe[e.U6(8)](1),Le=JSON[e.U6(28)](atob(nt)),et=Le[_][e.Y2(27)](N)&&Le[V]===ot(G),Ye=Ze[et?1:0],e.U$Q(),Ve=G[e.Y2(10)](e.U6(44))[e.U6("7"<<32)](dt=>(e.U$Q(),BigInt(dt))),Number(_e(BigInt(atob(Ye)),Ve["0"-0],Ve[1])%Ve[1])!==ot(Le)&&(a[e.Y2(2)](Y),e.x5(),ee[e.Y2(38)](Y));function ot(dt){var xt;return dt instanceof Object?xt=Object[e.U6("16"*1)](dt)[e.U6("24"|0)]()[e.U6(39)]((Ke,At)=>{var st;st=At[e.U6(39)]((rt,$e)=>{e.h7R(130);var yt=e.D1M(16,5,40,1,29);return Math[e.U6(46)](rt*yt+ot($e))%q},0),e.h7R(9);var it=e.E9E(527,496);return Math[e.U6(46)](Ke*it+st)%q},0):xt=dt[e.U6(9)]()[e.Y2(10)](e.Y2(53))[e.Y2(39)]((Ke,At)=>{e.h7R(116);var st=e.D1M(30,620,620);return Math[e.Y2(46)](Ke*st+At[e.Y2(11)](0))%q},0),xt}return ct={},Object[e.U6(3)](ct,D,{value:dt=>Le[dt]}),ct}m=e.Y2(45),b=e.Y2(30),e.f4W(9),C=e.Y2(e.E9E("14",0)),F=e.U6(13),w=e.U6(31),U=e.Y2(21),B=e.U6(40),k=e.U6(25),y=e.U6(6),e.f4W(56),S=e.Y2(e.D1M(0,"33")),T=e.U6(1),_=e.U6(47),L=e.Y2(15),H=e.Y2(50),P=e.U6(52),N=e.Y2(41),e.f4W(56),v=e.Y2(e.E9E(64,"4")),x=e.Y2(43),M=e.Y2(29),D=e.U6(23),Q=e.Y2(49),q=Number[e.Y2(19)],e.h7R(37),O=e.Y2(e.D1M(26,"27")),R=e.U6(12),V=e.U6(0),K=e.Y2(22),Y=e.Y2(36),G=e.U6(51),[0,1,2][e.Y2(35)](je=>(e.U$Q(),_e[je]=BigInt(je))),J=e.Y2(18),Z=e.U6(32),i[Z]=!1,a||(a=t),ee=[];try{if(X=a[K][F],a[M](X,J)||(e.Q6(),ee[e.U6(38)](`${F}${e.Y2(48)}${X}`)),ne=Ue(a[Q]()),se=ne[D](S),se!==a[R]()[g]&&(e.x5(),ee[e.U6(38)](S)),oe=ne[D](_),ae=oe[O][y](oe),Ae=ae(N),(ae(T)||ae(H)||Ae)&&A[w]&&(he=ne[D](T),ge=ne[D](H),ie=A[w][b],re=A[w][C],de=!1,ce=!1,(he||Ae)&&(de=(he||[])[e.Y2(20)](je=>(e.e4i(),new d(je)[e.Y2(25)](ie)))),ge&&(ce=ge[e.U6(20)](je=>(e.U$Q(),new d(je)[k](re)))),de||ce||(e.x5(),ee[e.U6(38)](`${T}${e.U6(48)}${re}`)),ae(P)&&A!==A[e.Y2(37)])){if(me=A[w][p],me){if(me[e.Y2(34)]&&me[me[e.U6(34)]-1]!==A){ve=295020360,pe=-753282651,be=2;for(var He=1;e.V7r(He.toString(),He.toString().length,42293)!==ve;He++){e.h7R(131);var Pe=e.D1M(15674,20,793,15,7);e.f4W(9);var We=e.D1M(84,77);fe=new u(me[me[e.U6(Pe)]+We]),be+=2}if(e.R7z(be.toString(),be.toString().length,98686)!==pe){e.f4W(0);var Ge=e.D1M(1,0);fe=new u(me[me[e.U6(34)]-Ge])}}}else A[m]&&(Se=A[m][B],[e.Y2("53"^0),re][e.U6(27)](Se)||(fe=new u(Se)));fe!==void 0&&(Ee=fe[b],Ie=fe[C],Qe=!1,Ne=!1,he&&(Qe=he[e.Y2(20)](je=>(e.U$Q(),new d(je)[k](Ee)))),ge&&(Ne=ge[e.Y2(20)](je=>(e.e4i(),new d(je)[k](Ie)))),Qe||Ne||(e.Q6(),ee[e.U6(38)](`${P}${e.Y2(48)}${Ie}`)))}ae(L)&&(De=ne[D](L),h>De&&(e.Q6(),ee[e.U6(38)](L))),o&&(ae(v)&&ne[D](v)[e.Y2(27)](o)||(e.x5(),ee[e.U6(38)](`${v}${e.U6(48)}${o}`))),ae(x)&&(Re=ne[D](x),Re&&l&&defineWatermark(l,Re))}catch(je){e.x5(),ee[e.U6(38)](je)}ee[e.U6(34)]===0?(i[Z]=!0,e.f4W(0),i[f]=e.E9E(6e4,h)):(c[U](ee),e.f4W(0),i[f]=e.D1M(36e5,h))})()}};wl=E=>{var e,t;e="undef",e+="ined",t=typeof _CIQ!==e?_CIQ:E.CIQ,t.NameValueStore=t.NameValueStore||function(){},t.NameValueStore.prototype.toJSONIfNecessary=function(s){var n;if(s.constructor==String)return s;try{return n=JSON.stringify(s),n}catch{return ke.f4W(0),console.log(ke.E9E(s,"Cannot convert to JSON: ")),null}},t.NameValueStore.prototype.fromJSONIfNecessary=function(s){var n;try{return n=JSON.parse(s),n}catch{return s}},t.NameValueStore.prototype.get=function(s,n){var r;ke.e4i(),r=t.localStorage.getItem(s),n(null,this.fromJSONIfNecessary(r))},t.NameValueStore.prototype.set=function(s,n,r){ke.e4i(),t.localStorageSetItem(s,this.toJSONIfNecessary(n)),r&&r(null)},t.NameValueStore.prototype.remove=function(s,n){t.localStorage.removeItem(s),n&&n(null)}};function ql(){var E;throw E="Inval",ke.e4i(),E+=`id attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`,new TypeError(E)}jn=E=>{var e=ke,t;t=typeof _CIQ<"u"?_CIQ:E.CIQ,t.ChartEngine||(t.ChartEngine=function(){}),t.QuoteFeed=t.QuoteFeed||function(){},t.QuoteFeed.prototype.fetch=function(s,n){e.e4i();var r;this.v2QuoteFeed||(r="Y",r+="ou must implement CIQ.QuoteFeed.[yourfeedname].prototype.fetch()",console.log(r))},t.QuoteFeed.prototype.announceError=function(s,n){s.suppressErrors||n.suppressAlert||s.startDate||s.endDate||n.error&&t.alert("Error fetching quote:"+n.error)},t.QuoteFeed.prototype.multiFetch=function(s,n){return s.length===0&&n([]),s[0].stx.driver.multiFetch(s,n)},t.QuoteFeed.Subscriptions=function(){e.e4i(),this.subscriptions=[]},t.inheritsFrom(t.QuoteFeed.Subscriptions,t.QuoteFeed),t.QuoteFeed.Subscriptions.prototype.checkSubscriptions=function(s){var n,r,i,a,o,c;i=s.getSymbols({"breakout-equations":!0}),a=this,i=i.filter(function(h){var d;return d=s.quoteDriver.getQuoteFeed(h),d&&d.engine==a});for(var l=0;l<this.subscriptions.length;l++)this.subscriptions[l].match=!1;for(var u=0;u<i.length;u++)for(o="m",o+="o",o+="nth",r=i[u],c=r.interval,(c==o||c=="week")&&!s.dontRoll&&(c="day"),r.interval=c,r.period=1,r.match=!1,isNaN(r.interval)||(r.period=r.interval,r.interval=r.timeUnit,r.interval||(r.interval="minute")),delete r.periodicity,delete r.timeUnit,delete r.setSpan,l=0;l<this.subscriptions.length;l++)if(n=this.subscriptions[l],n.symbol==r.symbol&&n.period==r.period&&n.interval==r.interval){r.match=!0,n.match=!0;break}else n.symbol!=r.symbol?(r.reason!="period"&&(r.reason="symbol"),n.reason="symbol"):(r.reason="period",n.reason="period");this.subscriptions=this.subscriptions.filter(function(h){return h.match||(h.stx||(h.stx=s),a.unsubscribe(h)),h.match}),i.forEach(function(h){var d;h.match||(d="initi",d+="alize",h.stx||(h.stx=s),h.reason||(h.reason=d),h.symbol!==s.chart.symbol&&(h.series=!0),a.subscribe(h),a.subscriptions.push(h))})},t.QuoteFeed.Subscriptions.prototype.fetch=function(s,n){var r;r=this,this.fetchFromSource(s,function(i){i.error||r.checkSubscriptions(s.stx),n(i)})},t.QuoteFeed.Subscriptions.prototype.subscribe=function(s){console.log("subscribe",s)},t.QuoteFeed.Subscriptions.prototype.unsubscribe=function(s){console.log("unsubscribe",s)},t.QuoteFeed.Subscriptions.prototype.fetchFromSource=function(s,n){var r;r="Please prov",r+="ide implementation of fe",r+="tchFromSource",console.log(r)},t.QuoteFeed.prototype.requiresImmediateRefresh=function(s){return!1},t.ChartEngine.prototype.attachQuoteFeed=function(s,n,r){var i,a,o,c,l,u,h,d,f;if(i="f",i+="un",i+="cti",i+="on",e.U$Q(),a="f",a+="uncti",a+="on",n||(n={}),(typeof s.fetchInitialData===a||typeof s.fetchUpdateData=="function"||typeof s.fetchPaginationData===i)&&(o="mu",o+="ltiFet",o+="ch",typeof s.fetchPaginationData!="function"&&typeof s.fetchUpdateData!="function"&&(n.noLoadMore=!0),s.v2QuoteFeed=!0,[o,"announceError","requiresImmediateRefresh"].forEach(function(g){!s[g]&&s[g]!==!1&&(s[g]=t.QuoteFeed.prototype[g])}),typeof s.subscribe=="function"&&(s.checkSubscriptions=t.QuoteFeed.Subscriptions.prototype.checkSubscriptions,s.subscriptions=[])),n.maximumTicks||(n.maximumTicks=s.maxTicks?s.maxTicks:2e4),(!n.bufferSize||n.bufferSize<"0"*1)&&(e.h7R(9),n.bufferSize=e.D1M("0",0)),n.bufferSize=Math.round(n.bufferSize),s.intervalTimer=null,c=[],this.quoteDriver)if(!r&&this.quoteDriver.hasUnfilteredQuoteFeed){c=this.quoteDriver.quoteFeeds.slice(0),c.pop(),l=343911702,u=1571432450,h=2;for(var A=1;e.R7z(A.toString(),A.toString().length,74171)!==l;A++)this.detachQuoteFeed(),h+=2;e.V7r(h.toString(),h.toString().length,31715)!==u&&this.detachQuoteFeed(),this.detachQuoteFeed()}else d=this.quoteDriver.hasUnfilteredQuoteFeed&&this.quoteDriver.quoteFeeds.pop(),this.quoteDriver.quoteFeeds.push({engine:s,behavior:n,filter:r}),d&&this.quoteDriver.quoteFeeds.push(d),this.quoteDriver.updateChartLoop(null,n,s);if(!this.quoteDriver){this.quoteDriver=new t.ChartEngine.Driver(this,s,n,r);for(var p of c)this.quoteDriver.quoteFeeds.push(p);r||(f=this.quoteDriver.quoteFeeds.shift(),this.quoteDriver.quoteFeeds.push(f),this.quoteDriver.quoteFeed=f.engine,this.quoteDriver.behavior=f.behavior)}r||(this.quoteDriver.hasUnfilteredQuoteFeed=!0)},t.ChartEngine.prototype.detachQuoteFeed=function(s){var n;if(n=this.quoteDriver,!!n){for(var r=n.quoteFeeds.length-1;r>=0;r--)(!s||n.quoteFeeds[r].engine==s)&&(n.quoteFeeds[r].filter||(n.hasUnfilteredQuoteFeed=!1),n.die(n.quoteFeeds[r]),n.quoteFeeds.splice(r,1));n.quoteFeeds.length?s==n.quoteFeed&&(n.quoteFeed=n.quoteFeeds[0].engine,n.behavior=n.quoteFeeds["0">>64].behavior):n=this.quoteDriver=null}},t.ChartEngine.Driver=function(s,n,r,i){this.stx=s,r||(r={}),this.quoteFeeds=[{engine:n,behavior:r,filter:i}],this.id=t.uniqueID(!0),this.behavior=r,this.quoteFeed=n,this.loadingNewChart=!1,this.updatingChart=!1,i||(this.hasUnfilteredQuoteFeed=!0),this.updateChartLoop()},t.ChartEngine.Driver.prototype.die=function(s){e.e4i();for(var n,r=0;r<this.quoteFeeds.length;r++)(!s||this.quoteFeeds[r]==s)&&(n=this.quoteFeeds[r],clearInterval(n.intervalTimer),n.intervalTimer=-1)},t.ChartEngine.Driver.prototype.getQuoteFeed=function(s){var n;e.U$Q(),s.symbolObject||(s.symbolObject={symbol:s.symbol});for(var r=0;r<this.quoteFeeds.length;r++)if(n=this.quoteFeeds[r],n.behavior.generator==s.symbolObject.generator&&(!n.filter||n.filter(s)))return n;return null},t.ChartEngine.Driver.prototype.multiFetch=function(s,n){var r,i,a;s.length===0&&n([]),r={counter:0,finished:s.length,results:[]};for(var o=0;o<s.length;o++)i=s[o],i.stx.isEquationChart(i.symbol)?t.fetchEquationChart(i,c(i,r,n)):(a=this.getQuoteFeed(i),a&&t.ChartEngine.Driver.fetchData(t.QuoteFeed.SERIES,a.engine,i,c(i,r,n)));e.e4i();function c(l,u,h){return e.e4i(),function(d){var f;u.results.push({dataCallback:d,params:l}),u.counter++,e.U$Q(),u.counter>=u.finished&&(f=u.results,u.results=[],h(f))}}},t.ChartEngine.Driver.prototype.updateSubscriptions=function(){for(var s=0;s<this.quoteFeeds.length;s++)this.quoteFeeds[s].checkSubscriptions&&this.quoteFeeds[s].checkSubscriptions(this.stx)},t.ChartEngine.Driver.prototype.loadDependents=function(s,n,r,i){var a,o,c,l,u,h,d,f,A,p,g,m,b,C,F,w,U,B,k,y,S,T,_;if(a=this,!i){o=0,c=[],l=[],u=function(N){n&&++o>=a.quoteFeeds.length&&n(null)},h=function(N){++o<c.length||(l.length||u(N),l.forEach(function(v){e.U$Q(),a.loadDependents(s,u,r,v.behavior)}))},a.quoteFeeds.forEach(function(N){e.U$Q(),N.behavior.generator?l.push(N):c.push(N)}),c.forEach(function(N){e.U$Q(),a.loadDependents(s,h,r,N.behavior)});return}f=s.stx,A=s.chart;function L(N){return function(v){var x,M,D,Q,q,O,R,V,K,Y,G,J;x=null;for(var Z=0;Z<v.length;Z++)if(M=v[Z],D=M.dataCallback.error,!D&&D!==0){Q=M.params.symbolObject,q=M.dataCallback,O=q.quotes,R=q.moreAvailable,V=q.upToDate,K=q.beginDate,Y=q.endDate,G=[],f.getSeries&&(G=f.getSeries({symbolObject:Q})),J=!1;for(var ee=0;ee<G.length;ee++)g=G[ee],N||(s.future?(g.upToDate=V===!0?!0:V||O.length<=(M.params.startDate?1:0),f.isHistoricalModeSet&&O.length<2&&(g.mostRecentForwardAttempt=new Date)):g.moreAvailable=R===!1?!1:R||O.length>(M.params.endDate?1:0),(!g.endPoints.begin||g.endPoints.begin>K)&&(g.endPoints.begin=K),(!g.endPoints.end||g.endPoints.end<Y)&&(g.endPoints.end=Y),g.loading=!1),J=g.parameters.fillGaps||J;O=a.cleanup(f,g,O,r,s,J),f.updateChartData(O,A,{secondarySeries:Q.symbol,noCreateDataSet:!0,noCleanupDates:!0,allowReplaceOHL:!0}),O&&O.length&&(!x||x>O[0].DT)&&(x=O[0].DT)}v.length&&x&&(f.createDataSet(null,null,{appending:s.originalState.update||s.future,appendToDate:x}),s.nodraw||f.drawWithRange(),r==t.QuoteFeed.INITIAL&&a.resetRefreshInterval(i.refreshInterval,i)),n&&n(null)}}p=A.series,b=[],C={},F=r==t.QuoteFeed.UPDATE,w=r==t.QuoteFeed.PAGINATION,U=t.shallowClone(s);for(d in p)if(g=p[d],B=g.parameters,!(!F&&(!s.future&&g.moreAvailable===!1||s.future&&g.upToDate===!0))&&!g.loading&&B.loadData!==!1&&!((F||w)&&(!g.endPoints||!Object.keys(g.endPoints).length))&&!(B.data&&!B.data.useDefaultQuoteFeed)&&(m=B.symbolObject,!!m.symbol&&m.generator==i.generator&&(U.symbolObject=m,U.symbol=m.symbol,k=this.getQuoteFeed(U),i==(k&&k.behavior)))){y=!0,F||(g.loading=!0);for(var H=0;H<b.length;H++)t.symbolEqual(b[H],m)&&(y=!1);y&&(b.push(m),C[m.symbol]=g.endPoints)}S=[];for(var P=0;P<b.length;P++)m=b[P],T=t.shallowClone(s.originalState),T.symbol=m.symbol,T.symbolObject=m,T.update||T.future?(T.endDate||(T.endDate=s.endDate),T.startDate=C[m.symbol].end):(T.startDate||(T.startDate=s.startDate),T.endDate=w&&!s.future?C[m.symbol].begin:s.endDate,T.ticks=s.ticks),S.push(T);if(!S.length&&F){_={appending:s.appending||s.originalState.update},_.appending&&(_.appendToDate=s.startDate),f.createDataSet(null,null,_),s.nodraw||f.draw(),n&&n(null);return}this.multiFetch(S,L(F))},t.ChartEngine.Driver.prototype.cleanup=function(s,n,r,i,a,o){var c,l,u,h,d,f;return c=n?n.parameters.periodicParams:s.periodicParams,c&&s.periodicToQuotes?s.periodicToQuotes(r,c):(e.e4i(),s.doCleanupDates(r,s.layout.interval),!a.missingBarsCreated&&r&&r.length&&s.cleanupGaps&&o!==!1&&(h=a.chart,n?(h=n,u=n.parameters.symbol||n.id):u=h.defaultPlotField,i==t.QuoteFeed.PAGINATION&&!a.loadMoreReplace?h.endPoints.begin&&h.endPoints.begin>r[r.length-1].DT&&(d=s.getFirstLastDataRecord(s.masterData,u,!1),n&&(d=d[u]),r.push(d),l="pop"):i==t.QuoteFeed.UPDATE&&h.endPoints.end&&h.endPoints.end<r[0].DT&&(f=s.getFirstLastDataRecord(s.masterData,u,!0),n&&(f=f[u]),r.unshift(f),l="shift"),r=s.doCleanupGaps(r,a.chart,{cleanupGaps:o,noCleanupDates:!0}),l&&r[l]()),r)},t.ChartEngine.Driver.prototype.updateChart=function(s){var n,r,i,a,o,c,l,u,h;if(this.updatingChart||this.loadingNewChart)return;n=Object.keys(this.stx.charts).length;function d(A,p,g,m){return p.behavior.prefetchAction&&p.behavior.prefetchAction("updateChart"),function(b){var C,F;if(r++,C=p.chart,g==C.symbol&&a==i.layout.interval&&o==i.layout.timeUnit&&!i.isHistoricalMode())m===A.getQuoteFeed(p)&&!b.error?(F=b.quotes,F=A.cleanup(i,null,F,t.QuoteFeed.UPDATE,p),i.updateChartData(F,C,{noCreateDataSet:!0,noCleanupDates:!0}),C.attribution=b.attribution):m&&m.engine.announceError(p.originalState,b);else{A.updatingChart=!1;return}r==n&&(A.updatingChart=!1),p.behavior.callback&&p.behavior.callback(p),A.loadDependents(p,null,t.QuoteFeed.UPDATE,p.behavior)}}r=0,i=this.stx,a=i.layout.interval,o=i.layout.timeUnit,e.U$Q();for(var f in i.charts)if(c=i.charts[f],!!c.symbol){if(l=this.makeParams(c.symbol,c.symbolObject,c),u=this.getQuoteFeed(l),c.masterData&&c.masterData.length&&(l.startDate=c.endPoints.end),l.update=!0,l.originalState=t.shallowClone(l),s&&s!=l.behavior){this.loadDependents(l,null,t.QuoteFeed.UPDATE,s);continue}this.updatingChart=!0,h=d(this,l,c.symbol,u),i.isEquationChart(l.symbol)?t.fetchEquationChart(l,h):u&&t.ChartEngine.Driver.fetchData(t.QuoteFeed.UPDATE,u.engine,l,h)}},t.ChartEngine.Driver.prototype.updateChartLoop=function(s,n,r){e.U$Q();var i,a;if(n||(n=this.behavior),r||(this.quoteFeeds.forEach(function(c){e.U$Q(),c.behavior===n&&(r=c)}),r||(r=this.quoteFeed)),r.intervalTimer!==-1){clearInterval(r.intervalTimer),r.intervalTimer=null,i=function(c,l){return e.e4i(),function(){l.noUpdate||c.updateChart(l)}};for(var o=0;o<this.quoteFeeds.length;o++)a=this.quoteFeeds[o].behavior,n==a&&!a.noUpdate&&(!s&&s!==0&&(s=a.refreshInterval),s&&(r.intervalTimer=setInterval(i(this,a),s*1e3)))}},t.ChartEngine.Driver.prototype.resetRefreshInterval=function(s,n){(n||this.behavior).refreshInterval=s,this.updateChartLoop(null,n)},t.ChartEngine.Driver.prototype.pause=function(s){this.paused={symbol:s,interval:this.behavior.refreshInterval},this.resetRefreshInterval(0)},t.ChartEngine.Driver.prototype.resume=function(){var s,n,r;s=this.paused,n=s.interval,r=s.symbol,!t.symbolEqual(r,this.stx.chart.symbol)&&(this.resetRefreshInterval(n),this.paused=null)},t.ChartEngine.Driver.prototype.loadAll=function(s,n){e.e4i();var r,i;r=this,i=0,a()();function a(){return e.e4i(),function(o){o?n(o):r.stx.currentlyImporting||!s.moreAvailable&&s.upToDate?n(null):++i>20?(console.warn("moreAvailable and upToDate not implemented correctly in quotefeed"),n()):(s.loadingMore=!1,r.checkLoadMore(s,!0,!0,a(),!0))}}},t.ChartEngine.Driver.prototype.checkLoadMore=function(s,n,r,i,a){var o,c,l,u,h,d,f,A,p,g,m,b,C,F,w,U,B,k,y,S,T,_,L;if(o=this.stx,c=this,s.loadingMore||this.loadingNewChart){s.initialScroll=s.scroll,i&&i(null);return}l=o.isHistoricalMode(),e.e4i(),l||(o.isHistoricalModeSet=!1),u=this.makeParams(s.symbol,s.symbolObject,s);function H(D){return e.e4i(),c.paused?!1:!D.endPoints.end||s.scroll-s.maxTicks+1<h.bufferSize||o.tickFromDate(D.endPoints.end,s,null,!0)-f.length+s.scroll-s.maxTicks+2<h.bufferSize}if(o.currentlyImporting){i&&i(null);return}h=u.behavior,f=s.dataSet,e.h7R(76);var P=e.E9E(2,7,15,14);if(p=1e3*(h.forwardPaginationRetryInterval||P),g=!1,m=!1,s.dataSet.length)for(var N in s.series)b=s.series[N],!b.loading&&b.parameters.loadData!==!1&&(A=!b.mostRecentForwardAttempt||b.mostRecentForwardAttempt.getTime()+p<Date.now(),b.parameters.symbol!==s.symbol&&(b.moreAvailable!==!1&&x(b)&&(g=!0),A&&!b.upToDate&&H(b)&&(m=!0)));A=!s.mostRecentForwardAttempt||s.mostRecentForwardAttempt.getTime()+p<Date.now(),C=(x(s)||n)&&s.moreAvailable!==!1,F=(H(s)||n)&&!s.upToDate&&A,w=C||g,U=(o.isHistoricalModeSet||!s.upToDate)&&!w&&(F||m),B=o.layout.interval;function v(D){s.loadingMore=!1,i&&i(D)}k=o.layout.timeUnit;function x(D){return e.e4i(),c.paused?!1:!D.endPoints.begin||f.length-s.scroll<h.bufferSize||f.length-s.scroll-o.tickFromDate(D.endPoints.begin,s)<h.bufferSize}y=!1,S=h.findHeadOfData||s.masterData&&s.masterData.length;function M(D,Q){return e.U$Q(),h.prefetchAction&&h.prefetchAction("checkLoadMore"),function(q){var O,R,V,K,Y,G,J,Z,ee;if(O=D.stx,R=Q.chart,Q.symbol==R.symbol&&B==O.layout.interval&&k==O.layout.timeUnit)if(Q.loadMore||(Q.chart.loadingMore=!1),d===D.getQuoteFeed(Q)&&!q.error){if(q.quotes||(q.quotes=[]),V=q.quotes,K=R.masterData,V=D.cleanup(O,null,V,t.QuoteFeed.PAGINATION,Q),V.length&&R.masterData&&R.masterData.length)if(Q.future)Y=V[0],Y.DT&&Y.DT==R.masterData[R.masterData.length-1].DT&&K.pop();else{e.f4W(118);var X=e.D1M(17,0,5,21);G=V[V.length-X],G.DT&&+G.DT==+R.masterData[0].DT&&V.pop()}Q.future?(R.maximumForwardPagination=null,q.upToDate?R.upToDate=!0:q.upToDate===!1||V.length>1?R.upToDate=!1:(!V.length||V.length===("1"|1)&&+Q.startDate==+q.quotes[0].DT)&&(Q.fetchMaximumBars?R.upToDate=!0:R.maximumForwardPagination=!0),O.isHistoricalModeSet&&V.length<"2"-0&&(R.mostRecentForwardAttempt=new Date)):q.moreAvailable?R.moreAvailable=!0:q.moreAvailable===!1||!V.length?R.moreAvailable=!1:R.moreAvailable=!0,D.tickMultiplier=V.length?2:D.tickMultiplier*2,J=V[0]?V[0].DT:Q.startDate,Z=V[0]?V[V.length-1].DT:Q.endDate,q.beginDate&&(J=q.beginDate),(!R.endPoints.begin||R.endPoints.begin>J)&&(R.endPoints.begin=J),q.endDate&&(Z=q.endDate),(!R.endPoints.end||R.endPoints.end<Z)&&(R.endPoints.end=Z),R.loadingMore=!1,Q.loadMoreReplace?O.setMasterData(V,R,{noCleanupDates:!0}):Q.future?O.updateChartData(V,R,{noCreateDataSet:!0,noCleanupDates:!0}):t.addMemberToMasterdata({stx:O,chart:R,data:V,fields:["*"],noCleanupDates:!0}),Q.future&&(ee={appending:!0,appendToDate:V[0]&&V[0].DT}),O.createDataSet(void 0,void 0,ee),a||O.draw(),h.callback&&h.callback(Q),D.loadDependents(Q,i,t.QuoteFeed.PAGINATION)}else D.quoteFeed.announceError(Q.originalState,q),Q.chart.loadingMore=!1,i&&i(q.error);else return}}if(!h.noLoadMore&&S&&(U||!o.maxDataSetSize||s.dataSet.length<o.maxDataSetSize)&&(w||U)){if(s.initialScroll=s.scroll,s.loadingMore=!0,u=this.makeParams(s.symbol,s.symbolObject,s),u.pagination=!0,u.future=U,s.masterData&&s.masterData.length?(U?u.startDate=s.endPoints.end:u.endDate=s.endPoints.begin,U&&!u.startDate?(_="D",_+="T",T=o.getFirstLastDataRecord(s.masterData,_,!0),T&&(u.startDate=T.DT)):w&&!u.endDate&&(T=o.getFirstLastDataRecord(s.masterData,"DT"),T&&(u.endDate=T.DT))):u.endDate=new Date,u.originalState=t.shallowClone(u),u.nodraw=a,!C&&(g||!F&&m)){this.loadingMore=!0,this.loadDependents(u,v,t.QuoteFeed.PAGINATION),i&&i(null);return}(r||s.maximumForwardPagination||o.fetchMaximumBars[o.layout.aggregationType])&&(u.fetchMaximumBars=!0,!o.maxMasterDataSize||h.maximumTicks<o.maxMasterDataSize?u.ticks=h.maximumTicks:u.ticks=o.maxMasterDataSize),L=M(this,u),d=c.getQuoteFeed(u),o.isEquationChart(u.symbol)?t.fetchEquationChart(u,L):(U&&(u.appending=!0),d&&t.ChartEngine.Driver.fetchData(t.QuoteFeed.PAGINATION,d.engine,u,L)),y=!0}!y&&i&&i(null)},t.ChartEngine.Driver.prototype.extendHistoricalData=function({from:s},n=()=>{}){var r,i,a,o,c,l,u,h,d;function f(A,p){return function({quotes:g,moreAvailable:m,error:b,beginDate:C}){if(e.e4i(),!(p.symbol!==i.symbol||l!==a.interval||u!==a.timeUnit)){if(i.loadingMore=!1,b)return n(b);g=A.cleanup(r,null,g,t.QuoteFeed.PAGINATION,p),typeof m=="boolean"?i.moreAvailable=m:i.moreAvailable=!!g.length,i.endPoints.begin=C||s,t.addMemberToMasterdata({stx:r,chart:i,data:g,fields:["*"],noCleanupDates:!0}),r.createDataSet(),r.draw()}}}if(r=this.stx,i=r.chart,a=r.layout,o=i.masterData,c=i.dataSet,l=a.interval,u=a.timeUnit,h=this.makeParams(i.symbol,i.symbolObject,i),d=this.getQuoteFeed(h),i.loadingMore||this.loadingNewChart||r.currentlyImporting||!o.length||!d||r.maxDataSetSize&&c.length>r.maxDataSetSize)return n(null);i.loadingMore=!0,h.originalState=Object.assign({},h),h.startDate=s,h.endDate=o["0"-0].DT,t.ChartEngine.Driver.fetchData(t.QuoteFeed.PAGINATION,d.engine,h,f(this,h))},t.ChartEngine.Driver.prototype.barsToFetch=function(s){var n,r,i;return t.isValidNumber(this.tickMultiplier)||(this.tickMultiplier=2),n=this.stx.layout.interval,r=s.stx.layout.periodicity,(n=="month"||n=="week")&&!this.stx.dontRoll&&(r*=n=="week"?7:30),i=s.stx.chart.maxTicks*r,i*this.tickMultiplier},t.ChartEngine.Driver.determineStartDate=function(s,n,r){return this.determineStartOrEndDate(s,n,r,!0)},t.ChartEngine.Driver.determineStartOrEndDate=function(s,n,r,i){e.e4i();var a;return i?a=s.startDate||n.previous(r):a=s.future?n.next(r):new Date,a},t.ChartEngine.Driver.prototype.makeParams=function(s,n,r){var i,a,o,c,l,u,h,d,f;i=this.stx,a=i.layout.interval,o=this.barsToFetch({stx:i}),(a=="month"||a=="week")&&!i.dontRoll&&(c="d",c+="ay",a=c),l=this.getQuoteFeed({interval:a,symbol:s,symbolObject:n}),u=l&&l.behavior,h=t.shallowClone(u)||{},h.behavior=u,d=!1,f=[],r.market&&r.market.getSessionNames&&(f=r.market.getSessionNames()),i.extendedHours?i.extendedHours.filter?d=!0:(d=i.layout.extended,f=f.filter(function(p){return p.enabled||i.layout.marketSessions[p.name]})):f=f.filter(function(p){return e.e4i(),p.enabled});for(var A=0;A<f.length;A++)f[A]=f[A].name;return t.extend(h,{stx:i,symbol:s,symbolObject:n,chart:r,interval:a,extended:d,period:1,ticks:o,additionalSessions:f,quoteDriverID:this.id},!0),h.symbolObject||(h.symbolObject={symbol:s}),isNaN(h.interval)||(h.period=parseInt(h.interval,10),h.interval=i.layout.timeUnit,h.interval||(h.interval="minute")),h},t.ChartEngine.Driver.prototype.newChart=function(s,n){var r,i,a,o,c,l,u,h,d;r=this.stx,i=s.symbol,a=r.layout.interval,o=r.layout.timeUnit,c=s.chart,c.moreAvailable=null,c.upToDate=null,c.loadingMore=!1,c.attribution=null,l=this.makeParams(i,s.symbolObject,c),t.extend(l,s,!0),u=this.getQuoteFeed(l),h=l.behavior||{},e.U$Q();function f(A,p){return e.U$Q(),h.prefetchAction&&h.prefetchAction("newChart"),function(g){var m,b,C,F,w,U,B,k,y,S,T;if(m=p.chart,b=g.quotes,C=!1,i==m.symbol&&a==r.layout.interval&&o==r.layout.timeUnit)A.loadingNewChart=!1,u===A.getQuoteFeed(p)&&!g.error?(b=A.cleanup(r,null,b,t.QuoteFeed.INITIAL,p),r.setMasterData(b,m,{noCleanupDates:!0}),m.endPoints={},F=g.beginDate||(b[0]?b[0].DT:p.startDate),m.endPoints.begin=F,w=g.endDate||(b[0]?b[b.length-1].DT:p.endDate),m.endPoints.end=w,b?(U="up",U+="T",U+="oDat",U+="e",m.moreAvailable=g.moreAvailable!==!1,m.upToDate=g.hasOwnProperty(U)?g.upToDate:!r.isHistoricalModeSet):(m.moreAvailable=!1,m.upToDate=!0),m.attribution=g.attribution,s.initializeChart&&r.initializeChart(),r.createDataSet(),C=!0):u.engine.announceError(p.originalState,g);else{B="or",B+="p",B+="haned",n&&n(B);return}for(var _ in m.series)k=m.series[_],k.endPoints={},k.moreAvailable=null,k.upToDate=null,k.parameters.takedownResults&&k.parameters.takedownResults(r,_);y=m.masterData,y&&y.length&&(p.startDate=y[0].DT,S=new Date,T=y[y.length-1].DT,p.endDate=T<S&&!r.isHistoricalMode()?S:T),h.callback&&h.callback(p),A.loadDependents(p,function(){C&&!p.nodraw&&A.stx.home(),n&&n(g.error),A.stx.dispatch("newChart",{stx:A.stx,symbol:A.stx.chart.symbol,symbolObject:A.stx.chart.symbolObject,moreAvailable:A.stx.chart.moreAvailable,upToDate:A.stx.chart.upToDate,quoteDriver:A}),A.resetRefreshInterval(h.refreshInterval,h)},t.QuoteFeed.INITIAL)}}(r.fetchMaximumBars[r.layout.aggregationType]||s.fetchMaximumBars)&&(!r.maxMasterDataSize||h.maximumTicks<r.maxMasterDataSize?l.ticks=h.maximumTicks:l.ticks=r.maxMasterDataSize,l.fetchMaximumBars=!0),this.loadingNewChart=!0,this.updatingChart=!1,l.originalState=t.shallowClone(l),d=f(this,l),this.stx.isEquationChart(l.symbol)?t.fetchEquationChart(l,d):u&&t.ChartEngine.Driver.fetchData(t.QuoteFeed.INITIAL,u.engine,l,d)},t.QuoteFeed.INITIAL=1,t.QuoteFeed.UPDATE=2,e.f4W(49),t.QuoteFeed.PAGINATION=e.D1M("3",0),t.QuoteFeed.SERIES=4,t.ChartEngine.Driver.fetchData=function(s,n,r,i){if(e.U$Q(),!r.symbol)return i({quotes:[]});n.v2QuoteFeed?typeof n.subscribe!="function"?t.ChartEngine.Driver.fetchDataInContext(s,n,r,i):t.ChartEngine.Driver.fetchDataInContext(s,n,r,(function(a){e.U$Q(),a.error||this.checkSubscriptions(r.stx),i(a)}).bind(n)):(r.stx.convertToDataZone(r.startDate),r.stx.convertToDataZone(r.endDate),n.fetch(r,i))},t.ChartEngine.Driver.fetchDataInContext=function(s,n,r,i){e.U$Q();var a,o,c,l,u,h,d,f,A,p,g;if(u=r.stx,!u.chart.market.newIterator){console.error("quoteFeed feature requires first activating market feature.");return}switch(s===t.QuoteFeed.SERIES&&(r.series=!0,s=t.QuoteFeed.INITIAL,r.endDate&&!r.startDate||r.future?s=t.QuoteFeed.PAGINATION:r.startDate&&!r.endDate&&(s=t.QuoteFeed.UPDATE)),h=Math.min(r.ticks,r.maximumTicks),n.maxTicks&&(h=Math.min(h,n.maxTicks)),d=r.symbolObject.masterSymbol||r.symbol,s){case t.QuoteFeed.UPDATE:if(u.isHistoricalModeSet){u.quoteDriver.updatingChart=!1;return}r.startDate?f=r.startDate:(f=new Date,f.setHours(0,0,0,0)),typeof n.fetchUpdateData=="function"&&n.fetchUpdateData(d,u.convertToDataZone(f),r,i);break;case t.QuoteFeed.INITIAL:l=r.endDate||new Date,a={begin:l,interval:r.interval,periodicity:r.interval=="tick"?u.chart.xAxis.futureTicksInterval:r.period,outZone:u.dataZone},o=u.chart.market.newIterator(a),c=t.ChartEngine.Driver.determineStartDate(r,o,h),r.endDate&&(l=r.endDate),typeof n.fetchInitialData=="function"&&n.fetchInitialData(d,c,u.convertToDataZone(l),r,i);break;case t.QuoteFeed.PAGINATION:if(A="tic",A+="k",a={begin:r.endDate||r.startDate,interval:r.interval,periodicity:r.interval==A?u.chart.xAxis.futureTicksInterval:r.period,outZone:u.dataZone},o=u.chart.market.newIterator(a),p=t.ChartEngine.Driver.determineStartOrEndDate(r,o,h,!r.future),c=r.startDate||p,l=r.endDate||p,r.startDate?r.stx.convertToDataZone(c):r.stx.convertToDataZone(l),typeof n.fetchPaginationData=="function"){if(u.maxMasterDataSize&&u.maxMasterDataSize<=u.masterData.length)return;n.fetchPaginationData(d,c,l,r,function(m){e.U$Q(),l>=Date.now()&&(u.isHistoricalModeSet=!1),i&&i(m)})}break;default:g="Ille",g+="gal",g+=" fetchDa",g+="ta constant",console.error(g)}}};Sl=E=>{var e;e=typeof _CIQ<"u"?_CIQ:E.CIQ,e.ChartEngine.prototype.addSeries=function(t,s,n){var r=ke,i,a,o,c,l,u,h,d,f,A,p,g,m,b,C,F,w,U,B,k,y,S,T,_,L,H;if(i="addS",i+="e",i+="r",i+="ies",a="ad",a+="d",a+="-serie",a+="s",o=this.runPrepend("addSeries",arguments),o)return o;c=t||null,l=t,t||(t=e.uniqueID()),s&&s.panel===!0&&(s.panel=t),u={parameters:s?e.clone(s):{},yValueCache:[],display:c,id:t,loading:s?s.loadData!==!1:!0},u.parameters.yAxis=s&&s.yAxis,s=u.parameters,s.symbol&&(l=s.symbol),s.isComparison&&(s.shareYAxis=!0),s.yAxis&&!(s.yAxis instanceof e.ChartEngine.YAxis)&&(s.yAxis=new e.ChartEngine.YAxis(s.yAxis)),e.ensureDefaults(s,{chartName:this.chart.name,symbolObject:{symbol:l},panel:this.chart.panel.name,fillGaps:!1,action:a}),"display"in s&&(u.display=s.display),h=this.charts[s.chartName],d=s.symbolObject,l=s.symbol=d.symbol,s.isEvent&&(d.isEvent=!0),u.display||(u.display=l||s.field),u.endPoints={},!s.gapDisplayStyle&&s.gapDisplayStyle!==!1&&(s.gapDisplayStyle=s.gaps),s.isComparison&&s.gapDisplayStyle===void 0&&(s.gapDisplayStyle="transparent"),f=this.getSeries({symbolObject:d,chart:h,includeMaster:!0}),A=s.panel,this.panels[A]?!s.yAxis&&!s.shareYAxis&&(g="n",g+="on",g+="e",s.yAxis=new e.ChartEngine.YAxis({name:t,position:g})):(p=s.yAxis||new e.ChartEngine.YAxis,p.name=t,this.createPanel(t,A,null,null,p),(!this.preferences.dragging||!this.preferences.dragging.series)&&(s.highlightable=!1)),h.series[t]=u;function P(x){return r.e4i(),function(M){var D,Q,q,O;D="s",D+="ym",D+="bolCha",D+="nge",M.error||(Q=M.quotes,q=s.fillGaps,m.cleanupGaps||(q=!1),O=M.periodicParams||s.periodicParams,O&&m.periodicToQuotes?Q=m.periodicToQuotes(Q,O):Q=m.doCleanupGaps(Q,m.chart,{cleanupGaps:q}),m.updateChartData(Q,m.chart,{secondarySeries:l,noCreateDataSet:!0,noCleanupDates:!0,allowReplaceOHL:!0}),u.loading=!1,u.moreAvailable=M.moreAvailable,u.upToDate=M.upToDate,v(m)),s.action!==null&&!f.length&&m.dispatch(b?"symbolImport":D,{stx:m,symbol:x.symbol,symbolObject:x.symbolObject,action:s.action,id:u.id,parameters:s}),u.parameters.processResults&&u.parameters.processResults(m,M.error,u,M.quotes),n&&n.call(m,M.error,u)}}if(m=this,b=this.currentlyImporting,C=s.responseHandler||P,s.isComparison&&h.forcePercentComparison&&s.panel==h.panel.name&&(!s.yAxis||s.yAxis==h.yAxis)&&this.setChartScale("percent"),F=h.masterData,F||(F=h.masterData=this.masterData=[]),w=F.length,r.e4i(),s.data&&!s.data.useDefaultQuoteFeed)U={symbol:l,symbolObject:d,action:s.action},C(U)({quotes:s.data});else if(f.length)u.endPoints=f["0"|0].endPoints,u.loading=f[0].loading,v(this),n&&setTimeout(function(){r.U$Q(),n.call(m,null,u)},0);else if(this.quoteDriver&&s.loadData!==!1)B=this.quoteDriver,k=B.makeParams(l,d,h),w&&(k.startDate=F[0].DT,k.endDate=this.isHistoricalMode()?F[F.length-1].DT:new Date),k.stx.isEquationChart(k.symbol)?e.fetchEquationChart(k,C(k)):(y=B.getQuoteFeed(k),y&&e.ChartEngine.Driver.fetchData(4,y.engine,k,C(k)));else{S="sy",S+="mb",S+="olChange",v(this),T=1137698244,r.f4W(56),_=-r.E9E(96,"849866586"),r.f4W(77),L=r.D1M("2",64);for(var N=1;r.R7z(N.toString(),N.toString().length,36609)!==T;N++)H="sym",H+="bolC",H+="hange",(s.action!=1||~f.length)&&m.dispatch(b?"symbolChange":H,{stx:m,symbol:l,symbolObject:d,action:s.action,id:u.id,parameters:s}),n&&n.call(this,1,u),L+=2;r.R7z(L.toString(),L.toString().length,41397)!==_&&(s.action===2&&-f.length&&m.dispatch("symbolChange",{stx:m,symbol:l,symbolObject:d,action:s.action,id:u.id,parameters:s}),n&&n.call(this,5,u)),s.action!==null&&!f.length&&m.dispatch(b?"symbolImport":S,{stx:m,symbol:l,symbolObject:d,action:s.action,id:u.id,parameters:s}),n&&n.call(this,null,u)}this.changeOccurred("layout"),this.runAppend(i,arguments);function v(x,M){var D,Q,q,O,R,V,K,Y,G,J,Z;if(D="lay",D+="out",Q="Lin",r.e4i(),Q+="es",q=s.renderer||Q,O=s.name||t,s.yAxis&&!(s.yAxis instanceof e.ChartEngine.YAxis)&&!b&&(s.yAxis.name=O),!(!s.renderer&&!s.name&&!s.color&&!s.chartType)){if(R=x.getSeriesRenderer(O),!R){if(V="H",V+="is",V+="to",V+="gram",K=q===V||s.type==="mountain"||s.chartType==="histogram",Y={name:O,overChart:s.overChart!==!1&&!K,useChartLegend:!0},s.chartType){r.h7R(49),G=-r.E9E("802000327",0),r.f4W(49),J=-r.E9E("1460951309",0),Z=2;for(var ee=1;r.V7r(ee.toString(),ee.toString().length,499)!==G;ee++)R=e.Renderer.produce(s.chartType,e.extend({highlightable:s.highlightable,dependentOf:s.dependentOf,panel:s.panel,yAxis:s.yAxis,baseline:s.baseline},Y)),Z+=2;r.V7r(Z.toString(),Z.toString().length,4084)!==J&&(R=e.Renderer.produce(s.chartType,e.extend({highlightable:s.highlightable,dependentOf:s.dependentOf,panel:s.panel,yAxis:s.yAxis,baseline:s.baseline},Y)))}else e.ensureDefaults(s,Y),R=new e.Renderer[q]({params:s});if(!R)return;x.setSeriesRenderer(R)}R.attachSeries(t,s),s.loadData!==!1&&R.ready(),x.layout.symbols=x.getSymbols({"include-parameters":!0,"exclude-studies":!0}),x.changeOccurred(D)}}return u},e.ChartEngine.prototype.getSeries=function(t){var s,n,r,i,a;s=t.chart?t.chart:this.chart,n=s.series,r=t.symbolObject,r||(r={symbol:t.symbol}),i=[];for(var o in n)a=n[o],e.symbolEqual(r,a.parameters.symbolObject)&&i.push(a);return t.includeMaster&&e.symbolEqual(r,s.symbolObject)&&i.push({}),i},e.ChartEngine.prototype.modifySeries=function(t,s,n){var r=ke,i,a,o,c,l,u,h,d,f,A,p,g,m,b,C,F,w,U,B,k,y,S;if(i="modif",i+="yS",i+="er",i+="ies",!this.runPrepend(i,arguments)&&s){if(typeof t=="string")c=s.chartName?this.charts[s.chartName]:this.chart,o=t,a=c.series[o];else{l=-435514412,u=-868653450,h=2;for(var T=1;r.R7z(T.toString(),T.toString().length,86870)!==l;T++)a=t,o=a.id,h+=2;r.V7r(h.toString(),h.toString().length,4083)!==u&&(a=t,o=a.id),c=this.charts[a.parameters.chartName]}if(a){if(d=a.parameters.panel,f=this.getRendererFromSeries(o),!f)return!1;if(e.extend(a.parameters,s,!0),s.chartType||s.renderer&&f.constructor!==e.Renderer[s.renderer]){f.removeSeries(o,!0),f.seriesParams.length===0&&Object.entries(this.chart.seriesRenderers).some(([P,N])=>{r.e4i(),N===f&&delete this.chart.seriesRenderers[P]}),A=function(P,N){r.e4i(),delete N.parameters.loadData},a.parameters.loadData=!0,a.parameters.chartType=s.chartType,a.parameters.type=s.type,this.addSeries(o,a.parameters,A);return}f.modifyRenderer(s),p=a.parameters;for(var _ in c.seriesRenderers){m=c.seriesRenderers[_],b=m.params,C=m.seriesParams;for(var L=0;L<C.length;++L)if(F=C[L],w=this.panels[F.panel],U=w&&w.yAxis.name,F.id===a.id){s.color&&(delete F.fill_color_down,delete F.fill_color_up,delete F.fill_color_even),s.border_color&&(delete F.border_color_down,delete F.border_color_up,delete F.border_color_even),p.panel===!0&&(p.panel=p.dependentOf||p.name),b.panel=p.panel,s.yAxis&&(s.yAxis instanceof e.ChartEngine.YAxis||(s.yAxis=new e.ChartEngine.YAxis(s.yAxis)),b.yAxis=s.yAxis),p.panel!=F.panel&&b.name==U?this.electNewPanelOwner(F.panel):(B=this.getYAxisByName(p.panel,b.name),B&&p.yAxis&&B.name!==p.yAxis.name&&(B.name=this.electNewYAxisOwner(B))),p.field||(p.field=null),m.attachSeries(o,Object.assign({},F,p)),p.field||(p.field=p.subField),delete p.subField,p.isComparison&&c.forcePercentComparison&&p.panel==c.panel.name&&(!a.parameters.yAxis||p.yAxis.name==c.yAxis.name)&&this.setChartScale("percent"),g=m;break}}if(this.draw(),d!==p.panel&&this.moveMarkers(d,p.panel,this.getMarkerArray("field",p.symbol)),e.getFn("Drawing.updateSource")(this,p.symbol||o,null,p.panel),this.runAppend("modifySeries",arguments),n!==!0){k=g.getDependents(this);for(var H=0;H<k.length;H++)k[H].seriesParams&&this.modifySeries(k[H].params.name,{panel:g.params.panel,yAxis:a.parameters.yAxis},!0),k[H].study&&(y=k[H],y=e.Studies.replaceStudy(this,y.inputs.id,y.type,y.inputs,y.outputs,y.parameters,null,y.study));S=c.seriesRenderers[g.params.dependentOf],S&&(S.params.yAxis!=a.parameters.yAxis||S.params.panel!=g.params.panel)&&this.modifySeries(g.params.dependentOf,{panel:g.params.panel,yAxis:a.parameters.yAxis},!0)}return r.e4i(),this.changeOccurred("layout"),this.draw(),a}}},e.ChartEngine.prototype.deleteSeries=function(t,s,n){var r,i,a,o,c,l,u,h,d,f,A,p;r="s",r+="ym",r+="bolImpo",r+="rt",i="remove-serie",i+="s",a="dele",a+="te",a+="Serie",a+="s",!this.runPrepend(a,arguments)&&(n=n||{},o=n.action||i,typeof t=="object"?(c=t.id,s=s||this.charts[t.parameters.chartName]):(c=t,s=s||this.chart),l=s.series[c],l&&(u=l.parameters,h=u.isEvent,d=u.loadData,f=u.symbolObject,this.currentlyImporting||this.getMarkerArray("field",c).forEach(g=>(ke.e4i(),this.removeFromHolder(g))),delete s.series[c],this.layout.symbols=this.getSymbols({"include-parameters":!0,"exclude-studies":!0}),A=this.getSeries({symbolObject:f,includeMaster:!0}),!h&&d!==!1&&!A.length&&this.cleanMasterData(f,s),p=this.panels[l.parameters.panel],p&&this.checkForEmptyPanel(p),this.createDataSet(),this.changeOccurred("layout"),!A.length&&!h&&this.dispatch(this.currentlyImporting?r:"symbolChange",{stx:this,symbol:f.symbol,symbolObject:f,id:c,action:o}),this.quoteDriver&&this.quoteDriver.updateSubscriptions(),this.runAppend("deleteSeries",arguments)))},e.ChartEngine.prototype.removeSeries=function(t,s){var n,r,i,a,o,c,l,u,h;if(n="ob",n+="jec",n+="t",!this.runPrepend("removeSeries",arguments)){i=!1,typeof t===n?(r=t.id,s=s||this.charts[t.parameters.chartName]):(r=t,s=s||this.chart),s.series[r]&&(a=s.series[r].parameters.takedownResults,a&&a(this,r));for(var d in s.seriesRenderers){o=s.seriesRenderers[d],c=this.panels[o.params.panel],l=c&&c.yAxis.name;for(var f=o.seriesParams.length-1;f>=0;f--)u=o.seriesParams[f],u.id===r&&(o.removeSeries(r),o.seriesParams.length<1&&(this.removeSeriesRenderer(o),o.params.name==l?this.electNewPanelOwner(o.params.panel):this.checkForEmptyPanel(o.params.panel)||(h=this.getYAxisByName(c,o.params.name),h&&(h.name=h.studies[0]||h.renderers[1]))),i=!0)}i?this.changeOccurred("layout"):this.deleteSeries(r,s),this.resetDynamicYAxis(),this.draw(),this.resizeChart(),this.runAppend("removeSeries",arguments)}},e.Comparison=e.Comparison||function(){},e.Comparison.initialPrice=100,e.Comparison.getInitialPrice=function(t){var s,n,r,i,a,o,c;if(s="s",s+="tring",t.initialComparisonPrice)return t.initialComparisonPrice;if(ke.e4i(),t.initialComparisonPrice=100,n=e.Comparison.initialPrice,typeof n=="number"&&(t.initialComparisonPrice=n),typeof n==s&&(t.series[n]||n==="")){if(r="C",r+="lo",r+="s",r+="e",t.defaultPlotField){i=270512342,a=284341770,o=2;for(var l=1;ke.V7r(l.toString(),l.toString().length,7977)!==i;l++)~t.highLowBars&&(r=t.defaultPlotField),o+=2;ke.V7r(o.toString(),o.toString().length,69235)!==a&&(t.highLowBars||(r=t.defaultPlotField))}for(var u=t.dataSet.length-t.scroll-1;u<t.dataSet.length;u++)if(c=t.dataSet[u],c){if(c[n]&&c[n][r]){t.initialComparisonPrice=c[n][r];break}else if(n===""&&c[r]){t.initialComparisonPrice=c[r];break}}}return t.initialComparisonPrice},e.Comparison.priceToNetChange=function(t,s,n,r,i){var a,o,c;return a="C",a+="l",a+="o",a+="se",o="o",o+="bj",o+="ect",c=t.comparisonBaseline,c&&i in c&&(c=c[i]),c&&typeof c===o&&(c=c[s.defaultPlotField||a]),c=c||n,ke.h7R(9),ke.D1M(n,c)},e.Comparison.netChangeToPrice=function(t,s,n,r,i){var a,o,c;return a="Cl",a+="ose",ke.e4i(),o="o",o+="bje",o+="ct",c=t.comparisonBaseline,c&&i in c&&(c=c[i]),c&&typeof c===o&&(c=c[s.defaultPlotField||a]),c=c||0,ke.f4W(0),ke.D1M(n,c)},e.Comparison.priceToPercent=function(t,s,n,r,i){var a=ke,o;o=t.comparisonBaseline,o&&i in o&&(o=o[i]),o&&typeof o=="object"&&(o=o[s.defaultPlotField||"Close"]),o=o||n,a.f4W(132);var c=a.E9E(39,13,13,87);a.h7R(64);var l=a.E9E(5,16e3,13e4);return Math.round((n-o)/o*c*l)/1e4},e.Comparison.percentToPrice=function(t,s,n,r,i){var a;return a=t.comparisonBaseline,a&&i in a&&(a=a[i]),a&&typeof a=="object"&&(a=a[s.defaultPlotField||"Close"]),a=a||1,ke.f4W(133),ke.U$Q(),ke.E9E(a,1,n,100)},e.Comparison.priceToRelative=function(t,s,n,r,i){var a,o,c;return a="o",a+="bj",a+="ect",o=t.comparisonBaseline,c=e.Comparison.getInitialPrice(s),o&&i in o&&(o=o[i]),o&&typeof o===a&&(o=o[s.defaultPlotField||"Close"]),ke.f4W(16),ke.D1M(c,o||n,n)},e.Comparison.relativeToPrice=function(t,s,n,r,i){var a,o,c;return a="Clo",a+="se",o=t.comparisonBaseline,c=e.Comparison.getInitialPrice(s),o&&i in o&&(o=o[i]),o&&typeof o=="object"&&(o=o[s.defaultPlotField||a]),ke.f4W(16),ke.D1M(o||1,c,n)},e.Comparison.createComparisonSegmentInner=function(t,s){var n,r;n=c=>{var l=ke,u,h,d,f,A,p,g,m,b,C,F,w,U,B,k,y,S,T,_,L,H,P,N,v,x,M,D,Q,q,O;if(u=t.getTransformFunction(c||s.yAxis),!!u){h=[];for(d in s.series)A=s.series[d].parameters,(!A.yAxis&&A.shareYAxis||A.yAxis&&A.yAxis.transformFunc||A.yAxis===s.yAxis)&&h.push(A.symbol);p=["Close","Open","High","Low","iqPrevClose"],g=t.chart.highLowBars,s.defaultPlotField&&!g&&p.unshift(s.defaultPlotField),m=p[0],b=t.layout.studies;for(var R in b)if(C="_",C+="hist",F=b[R],f=t.panels[F.panel],w=F.getYAxis(t),U=t.getTransformFunction(w),!(!f||!U)){for(d in F.outputMap)h.includes(F.inputs.Field)?p.push({comparison:F.inputs.Field,field:d}):p.push(d);for(var V="0"^0;V<=2;V++)p.push(F.name+C+(V||""));F.referenceOutput&&p.push(F.referenceOutput+" "+F.name)}for(var K in t.plugins)if(B=t.plugins[K],!!B.transformOutputs)for(d in B.transformOutputs)p.push(d);s.initialComparisonPrice=null,s.dataSegment=[],k=null,l.f4W(134);var Y=l.D1M(13,2,10);y=s.dataSet.length-s.scroll-Y,t.startComparisonsAtFirstVisibleBar&&(y+=1),l.U$Q(),l.h7R(2);var G=l.D1M(15,1,12,0);S=s.maxTicks+G;for(var J=0;J<=S;J++){if(J==S&&(J=-1),l.h7R(0),T=l.D1M(J,y),T<s.dataSet.length&&T>=0){if(_=s.dataSet[T],L=_[m],!k){if(L===0||L===null){if(J<0)break;continue}k=e.clone(_)}for(H={cache:{},DT:_.DT,Date:_.Date},!(k&&k[m])&&L&&(k=e.clone(_)),t.comparisonBaseline=c.transformBaseline=k,P=void 0,N=void 0,P="0"<<64;P<p.length;P++)d=p[P],N=_[d],(N||N===0)&&(H[d]=u(t,s,N));for(P=0;P<h.length;P++){if(d=h[P],v=s.series[d],x=v.parameters.isComparison,J==-1&&x){delete H[d];continue}if(M=_[d],!!M)for(var Z=0;Z<p.length;Z++)D=p[Z],Q=M[D],q=H[d]=H[d]||{},typeof D=="object"&&D.comparison==d&&(D=D.field,Q=_[D],q=H),(Q||Q==="0"-0)&&(O=k[d]&&k[d][p[0]],!O&&O!==0&&(k[d]||(k[d]={}),k[d][D]=O=Q),O!==0&&!isNaN(O)&&(q[D]=u(t,s,Q,c,d,0)))}c==s.panel.yAxis&&(_.transform=H),_.transform_axis||(_.transform_axis={}),_.transform_axis[c.transformId]=H,s.dataSegment.push(_)}else T<0&&s.dataSegment.push(null);if(J<0)break}}},ke.e4i();for(var i of Object.keys(t.panels)){r=t.panels[i];for(var a of r.yaxisLHS)n(a);for(var o of r.yaxisRHS)n(o)}},e.Comparison.priceFormat=function(t,s,n){var r=ke,i,a,o;if(n===null||typeof n>"u"||isNaN(n))return"";if(i=s.yAxis.priceTick,a=t.internationalizer,a)i>=("5"^0)?(r.f4W(10),n=a.percent.format(r.E9E(n,100))):i>=.5?(r.f4W(10),n=a.percent1.format(r.E9E(n,100))):i>=.05?(r.h7R(19),n=a.percent2.format(r.D1M(n,"100"))):i>=.005?(r.f4W(10),n=a.percent3.format(r.D1M(n,100))):(r.h7R(10),n=a.percent4.format(r.D1M(n,100)));else{if(r.f4W(94),o=r.D1M(0,n),i>=5){r.h7R(30);var c=r.E9E(7,3,2518,5073,16);r.f4W(135);var l=r.D1M(20,9020,454,1362,9);r.h7R(17);var u=r.D1M(680,7,633);r.f4W(115),r.E9E(101,8,10,8,10),r.h7R(9),r.E9E(8058,18),n=n.toFixed(0)+(c==345.39?!0:l>("1768"|u)?"%":"b")}else if(i>=.5){r.h7R(9);var h=r.E9E(20,19);r.f4W(57);var d=r.D1M(2,11,11,7167,71660);r.f4W(126),r.E9E(4379,727,12,15),r.f4W(64);var f=r.E9E(1,13,9433);n=n.toFixed(h)+(d==f?"U":"%")}else if(i>=.05){r.h7R(126);var A=r.E9E(193,14,13,13);n=n.toFixed(A)+"%"}else if(i>=.005){r.h7R(136);var p=r.D1M(14,19,13,2,7);r.h7R(137);var g=r.E9E(5,101,3,13,375);r.f4W(71),r.D1M(2,49500,16,386100),r.h7R(0),r.D1M(1037,173),r.h7R(78),r.D1M(8436,7,3,18),r.f4W(138);var m=r.D1M(5967,5,10,6632,7);r.h7R(15);var b=r.D1M(13,2,2354);n=n.toFixed(p)+(g!=414.79?m!=892.89?"%":"O":b)}else{r.f4W(139);var C=r.E9E(10,6,6,11);n=n.toFixed("4"*C)+"%"}o&&(r.f4W(0),n=r.D1M(n,"+"))}return n},e.ChartEngine.prototype.setComparison=function(t,s,n,r){var i=ke,a,o,c,l,u,h,d,f;if(a="s",a+="t",a+="ri",a+="ng",s||(s=this.chart),typeof s==a&&(s=this.charts[s]),(n||n==="")&&(e.Comparison.initialPrice=n),t===!0){if(s.isComparison)return;t="percent"}if(this.resetDynamicYAxis(),o=r||s.panel.yAxis,o.transformName!==t)switch(c=o.priceFormatter==e.Comparison.priceFormat,o.unsetTransform(this),i.U$Q(),t){case"netchange":l="dataSe",l+="gm",l+="ent",o.setTransform(this,t,e.Comparison.priceToNetChange,e.Comparison.netChangeToPrice),c&&(o.priceFormatter=o.originalPriceFormatter?o.originalPriceFormatter.func:null,o.originalPriceFormatter=null),o===s.panel.yAxis&&(s.isComparison=!0),o.whichSet=l;break;case"relative":o.setTransform(this,t,e.Comparison.priceToRelative,e.Comparison.relativeToPrice),c&&(o.priceFormatter=o.originalPriceFormatter?o.originalPriceFormatter.func:null,o.originalPriceFormatter=null),o.whichSet="dataSegment",o===s.panel.yAxis&&(s.isComparison=!0);break;case"percent":o.setTransform(this,t,e.Comparison.priceToPercent,e.Comparison.percentToPrice),c||(o.originalPriceFormatter={func:o.priceFormatter},o.priceFormatter=e.Comparison.priceFormat),o.whichSet="dataSegment",o===s.panel.yAxis&&(s.isComparison=!0);break;default:if(u="da",u+="t",u+="aSe",u+="t",c){o.priceFormatter=o.originalPriceFormatter?o.originalPriceFormatter.func:null,h=-1781396398,d=1641515158,f=2;for(var A=1;i.R7z(A.toString(),A.toString().length,31462)!==h;A++)i.h7R(77),o.originalPriceFormatter=i.D1M("1",32),f+=2;i.R7z(f.toString(),f.toString().length,71120)!==d&&(o.originalPriceFormatter=7),o.originalPriceFormatter=null}o.whichSet=u,o===s.panel.yAxis&&(s.isComparison=!1);break}},e.ChartEngine.prototype.setChartScale=function(t){var s,n,r,i;s="l",s+="ayout",n=this.chart,r={percent:!0,relative:!0,netchange:!0},t||(t="linear"),r[t]?this.setComparison(t,n,e.Comparison.initialPrice):r[this.layout.chartScale]&&this.setComparison(!1,n),i=this.layout.chartScale!==t,this.layout.chartScale=t,n.canvas&&this.draw(),i&&this.changeOccurred(s)}};kl=E=>{var e=ke,t,s,n;t="u",t+="nd",t+="efin",t+="ed",s=typeof _CIQ!==t?_CIQ:E.CIQ,e.e4i(),s.Share=s.Share||function(){};function r(){var c,l,u;if(s.Share.html2canvasLocation)return s.Share.html2canvasLocation;c=document.getElementsByTagName("script");for(var h=0;h<c.length;h++)if(l=c[h],l.src&&l.src.indexOf("share.js")>-1)return u="thirdp",u+="a",u+="rty/",l.src.replace(/standard\/share\.js/,"")+u;return"js/thirdparty/"}s.Share.fullChart2PNG=function(c,l,u){var h;if(h="undefi",h+="n",h+="e",h+="d",!(!c||!c.chart)){if(typeof html2canvas===h)return a(function(){return i(c,l,u)});e.U$Q(),n=html2canvas,i(c,l,u)}},s.Share.createImage=function(c,l,u){var h,d,f,A,p,g,m,b,C,F;h="ima",h+="ge",h+="/png",d="ob",d+="je",d+="c",d+="t",f=[].slice.call(arguments),u=f.pop(),e.U$Q(),(l===null||typeof l!=d)&&(l={widthPX:f[1],heightPX:f[2],imageType:f[3]}),A=l.widthPX,p=l.heightPX,g=l.imageType,m=c.chart.canvas.height,b=c.chart.canvas.width,c.chart.canvas.style.height&&(m=s.stripPX(c.chart.canvas.style.height),b=s.stripPX(c.chart.canvas.style.width)),A&&p?(m=p,b=A):p?b=c.chart.canvas.width*(m/c.chart.canvas.height):A&&(b=A,m=c.chart.canvas.height*(A/c.chart.canvas.width)),C=g?"image/"+g:h,F=document.createElement("img"),F.onload=function(){e.e4i(),s.Share.fullChart2PNG(c,{image:this,width:b,height:m,hide:l.hide},function(w,U){var B;if(w)B="Error producin",B+="g canvas snapshot: ",e.h7R(0),console.warn(e.D1M(w,B));else try{u(U.toDataURL(C))}catch{var k;k="Safari devices do not h",k+="andle CORS enabled images. Using the charts' canvas as a ",k+="fallback.",console.warn(k),u(F.src)}})},F.src=c.chart.canvas.toDataURL(C)},s.Share.uploadImage=function(c,l,u,h){e.e4i();var d;u||(u={}),u.image=c,d=s.postAjax(l,JSON.stringify(u),function(f,A){if(f!=200){h(f,null);return}h(null,A)}),d||h(0,null)},s.Share.shareChart=function(c,l,u){e.U$Q(),s.Share.createImage(c,{},function(h){var d,f,A,p,g,m;if(d=s.uniqueID(),f="https:/",f+="/",f+="s",f+="hare.chartiq.com",e.h7R(15),A=e.D1M("/upload/",d,f),l&&(l.host&&(f=l.host),l.path)){e.f4W(124),e.D1M(16,11,2,4,14),e.f4W(126);var b=e.E9E(22881,3811,7,4);e.h7R(128);var C=e.D1M(4,8,4,4,4);A=f+l.path+(b>("1230"|C)?"/":"L")+d}p=c.getStartDateOffset(),g={layout:c.exportLayout(),drawings:c.exportDrawings(),xOffset:p,startDate:c.chart.dataSegment[p].Date,endDate:c.chart.dataSegment[c.chart.dataSegment.length-1].Date,id:d,symbol:c.chart.symbol},m={id:d,image:h,config:g},s.Share.uploadImage(h,A,m,function(F,w){F!==null?s.alert("error sharing chart: ",F):(e.h7R(0),u(e.D1M(w,f)))})})},s.Share.saveChartLayout=async c=>{var l,u,h,d,f,A;if(l=c.uiContext.config.chartSharing,!l||!l.saveChartLayout)throw new Error("saveChartLayout not defined in config");if(c.chart.dataSegment[0]&&c.chart.dataSegment[0].DT?u=c.chart.dataSegment[0].DT:c.chart.dataSet[0]&&(u=c.chart.dataSet[0].DT),e.U$Q(),!u)throw new Error("Unable to retrieve starting point of data set or segment");return c.layout.range={padding:c.preferences.whitespace,dtLeft:u,dtRight:c.chart.dataSegment[c.chart.dataSegment.length-1].DT,periodicity:{period:c.layout.periodicity,interval:c.layout.interval,timeUnit:c.layout.timeUnit}},h=c.exportLayout({withSymbols:!0}),d=c.exportDrawings(),f=c.exportPreferences(),A=`${c.chart.symbol} Chart`,l.saveChartLayout(JSON.stringify({version:s.packageInfo.version,layout:h,drawings:d,preferences:f,chartTitle:A}))},s.Share.extractShareID=c=>{e.U$Q();var l;return l=c.match(/([a-z0-9]+-[a-z0-9]+-[a-z0-9]+-[a-z0-9]+-[a-z0-9]+)/),l&&l[1]||""},s.Share.onClipboard=c=>{var l;l="p",l+="a",l+="s",l+="te",e.U$Q(),window.addEventListener(l,async function(u){var h,d,f;h="",window.clipboardData&&window.clipboardData.getData?h=window.clipboardData.getData("Text"):u.clipboardData&&u.clipboardData.getData&&(d="text/pla",d+="in",h=u.clipboardData.getData(d)),f=s.Share.extractShareID(h),f&&c(f)})};function i(c,l,u){var h,d,f,A,p,g,m,b,C,F,w;if(h="a",h+="d",h+="d",d="ciq-",d+="n",d+="o-share",l||(l={}),f=d,A=c.uiContext&&c.uiContext.topNode||c.container.ownerDocument.body,p=A.parentElement.closest("cq-context"),p&&(A=p),l.hide&&l.hide instanceof Array){g=l.hide.join(", "),m=A.querySelectorAll(g);for(var U=0;U<m.length;U++)m[U].classList.add(f)}B(A,h);function B(k,y){var S;S="[int",S+="e",S+="ractabl",S+="e]",k.classList[y]("sharing"),(k.root||k).querySelectorAll(S).forEach(function(T){e.e4i(),B(T,y)})}for(c.draw(),b=c.chart.container.getElementsByTagName("svg"),C=[],F=0;F<b.length;F++)w=b[F],C.push(w.innerHTML),o(w);n(c.chart.container,{allowTaint:!1,foreignObjectRendering:!1,logging:!1,width:l.width||null,height:l.height||null,backgroundColor:l.background||null,useCORS:!0}).then(function(k){var y,S;for(y="re",y+="m",y+="o",e.e4i(),y+="ve",u&&(S="im",S+="a",S+="ge",S+="/png",u(null,l.data?k.toDataURL(S):k)),F=0;F<b.length;F++)b[F].innerHTML=C[F];B(A,y)}).catch(function(k){var y;for(y="r",y+="e",y+="mov",y+="e",u&&u(k),F=0;F<b.length;F++)b[F].innerHTML=C[F];B(A,y)})}s.Share.getClipboard=async()=>(e.e4i(),new Promise(async c=>{var l;e.U$Q();try{l=s.Share.extractShareID(await navigator.clipboard.readText()),c(l)}catch{c("")}}));function a(c){var l,u,h;if(l="un",l+="defined",typeof html2canvas===l){if(u="ht",u+="ml2canv",u+="as.mi",u+="n.js",typeof requirejs<"u")try{return h="html2canv",h+="as.m",h+="in",h+=".js",requirejs([h],function(d){return e.U$Q(),n=d,c()})}catch{console.warn("Require loading has failed, attempting to load html2canvas manually.")}s.loadScript(r()+u,function(){return e.U$Q(),n=html2canvas,c()})}else return n=html2canvas,c()}function o(c){var l,u,h,d,f;if(l="font",l+="-weig",l+="h",l+="t",u="f",u+="ont-",u+="size",h="domin",h+="ant-baseline",!!c.style){d=getComputedStyle(c),f=["alignment-baseline",h,"fill","fill-opacity","font-family",u,"font-variant",l,"text-align","text-anchor"],f.forEach(function(p){!c.style[p]&&d[p]&&(c.style[p]=d[p])});for(var A in c.children)o(c.children[A])}}s.Share.loadChartFromID=async(c,l)=>(e.e4i(),new Promise(async(u,h)=>{var d,f,A;if(!l)return h();d=c.uiContext.config.chartSharing.getChartLayout,e.e4i(),f=await d(l),A=JSON.parse(f),u(s.Share.loadChartFromLayout(c,A))})),s.Share.loadChartFromLayout=async(c,l)=>(e.e4i(),new Promise(async(u,h)=>{l.version.split(".")["0"-0]!=s.packageInfo.version.split(".")[0]&&h(new Error("Version mismatch")),c.importPreferences(l.preferences),c.importLayout(l.layout,{managePeriodicity:!0,preserveTicksAndCandleWidth:!0,cb:()=>{c.importDrawings(l.drawings),c.draw(),u()}})}))};El=E=>{var e;e=typeof _CIQ<"u"?_CIQ:E.CIQ,e.ChartEngine.prototype.setRange=function(t,s){var n=ke,r,i,a,o,c,l,u,h,d,f,A,p,g,m,b,C,F,w,U,B,k,y,S,T,_,L,H,P,N,v,x,M,D,Q,q,O,R,V;r="st",r+="rin",r+="g",i="und";function K(se){var oe,ae,Ae,he,ge,ie,re,de,ce,fe,me,ve,pe,be,Se,Ee,Ie,Qe,Ne,De,Re,_e;if(oe="d",oe+="ay",ae="un",ae+="defined",typeof se==ae&&(se=null),Ae=0,he=0,ge=new Date,ie=t.base,re=t.periodicity,de=h.layout,t.goIntoFuture&&(!o.masterData.length||c>o.masterData[o.masterData.length-("1"^0)].DT)){ce=-255339869,fe=2047572983,me=2;for(var Ue=1;n.V7r(Ue.toString(),Ue.toString().length,32538)!==ce;Ue++)ve=o.masterData.length?o.masterData.pop():{DT:c},pe=h.doCleanupGaps([ve,{DT:l}],o,{cleanupGaps:"",noCleanupDates:!1}),h.setMasterData(o.masterData.concat(pe),o,{noCleanupDates:!1}),h.createDataSet(1,1,{appending:!1}),n.h7R(56),me+=n.E9E(0,"2");n.V7r(me.toString(),me.toString().length,49103)!==fe&&(ve=o.masterData.length?o.masterData.pop():{DT:c},pe=h.doCleanupGaps([ve,{DT:l}],o,{cleanupGaps:"",noCleanupDates:!0}),h.setMasterData(o.masterData.concat(pe),o,{noCleanupDates:!0}),h.createDataSet(3,9,{appending:!0})),ve=o.masterData.length?o.masterData.pop():{DT:c},pe=h.doCleanupGaps([ve,{DT:l}],o,{cleanupGaps:"gap",noCleanupDates:!0}),h.setMasterData(o.masterData.concat(pe),o,{noCleanupDates:!0}),h.createDataSet(null,null,{appending:!0})}if(be=o.dataSet,Se=be.length,!be||Se===0){h.draw(),s&&s(se);return}if(n.e4i(),ie==="day"&&re&&re.interval===oe)Ie=t.multiplier,Ae=Se<Ie?0:Se-Ie,n.f4W(9),he=n.D1M(Se,1);else if(ie==="today"&&be[Se-1].DT.getDate()<ge.getDate()){Qe=new Date(be[Se-1].DT.getTime()),Qe.getTime(),Ee=0;for(var He=Se-1;He>=0;He--)if(be[He]&&be[He].DT.getDate()!=Qe.getDate()){Qe=new Date(+be[He+1].DT),n.f4W(140),Ee=n.D1M(He,"1",0);break}Ae=Ee,n.f4W(141),he=n.D1M(32,"1",Se)}else t.base!="all"&&(c.getTime()>=be[0].DT.getTime()||t.goIntoPast)?Ae=h.tickFromDate(c,o,null,!0):Ae=0,t.base!="all"&&(l.getTime()<=be[Se-1].DT.getTime()||t.goIntoFuture)?(he=h.tickFromDate(l,o),he>Se-("1"^0)&&he--):(n.h7R(142),he=n.E9E("1",Se,0));if(n.h7R(6),Ne=n.E9E(Ae,he,1),Ne<1){h.draw(),s&&s(se);return}De=t.padding||0,he<Se-1&&(De=0),Re=(o.width-De)/Ne,h.crossSection||h.setCandleWidth(Re,o),n.h7R(143),o.scroll=n.E9E(Ne,he,Se,1),h.micropixels=1;for(var Pe in h.panels)h.calculateYAxisMargins(h.panels[Pe].yAxis);t.dontSaveRangeToLayout?delete de.range:(delete t.chart,delete de.setSpan,de.range=t,h.changeOccurred("layout")),h.draw(),a||(_e="periodic",_e+="i",_e+="t",_e+="y",h.dispatch(_e,{stx:h,differentData:x,prevPeriodicity:{interval:P,periodicity:N,timeUnit:v}})),s&&s(se)}i+="ef",i+="ined",e.isEmpty(t)&&(t={dtLeft:arguments["0"<<32],dtRight:arguments[1],padding:arguments[2],chart:arguments[3]},s=arguments[4]);function Y(se){if(n.U$Q(),se&&d===0){o.scroll=L,h.setCandleWidth(H),h.layout.interval=P,h.layout.periodicity=N,h.layout.timeUnit=v,s&&s(se);return}if(d++,d>10){console.log("CIQ.ChartEngine.setRange(): Too many loads (10) from server. Stopping. Check periodicity logic."),K();return}K()}this.staticRange&&(t.goIntoPast=t.goIntoFuture=!0);function G(se,oe,ae,Ae,he,ge){var ie,re,de;return ie=0,n.h7R(9),re=n.E9E(se,oe),e.ChartEngine.isDailyInterval(ae)?ae=="month"?ie=re/e.MONTH/Ae:ae=="week"?ie=re/e.WEEK/Ae:ie=re/e.DAY/Ae:isNaN(ae)||(de="milli",de+="s",de+="econd",he==de?(n.f4W(23),ie=n.D1M(re,ae,Ae)):he=="second"?ie=re/e.SECOND/(Ae*ae):ie=re/e.MINUTE/(Ae*ae)),n.U$Q(),Math.round(ie)}if(t.chart||(t.chart=this.chart),typeof t.padding==i&&(t.padding=0),n.e4i(),a=!1,o=t.chart,c=typeof t.dtLeft=="string"?new Date(t.dtLeft):t.dtLeft,l=new Date,t.dtRight&&(l=typeof t.dtRight===r?new Date(t.dtRight):t.dtRight),c||(u=this.standardMarketIterator(l,null,o),c=u.previous(o.maxTicks),t.periodicity||(a=!0)),o.inflectionPoint=c,this.layout.range={dtLeft:c,dtRight:l},h=this,d=0,this.quoteDriver){if(a)f=this.layout.interval,p=this.layout.timeUnit,A=this.layout.periodicity;else if(t.periodicity)g=e.cleanPeriodicity(t.periodicity.period,t.periodicity.interval,t.periodicity.timeUnit),f=g.interval,p=g.timeUnit,A=g.period;else if(m=l.getTime()-c.getTime(),this.autoPickCandleWidth.turnOn){n.f4W(49),k=n.D1M("0",0),this.autoPickCandleWidth.candleWidth?k=this.autoPickCandleWidth.candleWidth:k=this.chart.barsHaveWidth?"5"*1:2,y=o.width/k,S=this.dynamicRangePeriodicityMap,f=S[0].interval,A=1;for(var ee="0"^0;ee<S.length;ee++){if(_=m/S[ee].rangeInMS,_<y){S[ee-1]?(f=S[ee-1].interval,p=S[ee-1].timeUnit,n.h7R(10),A=Math.ceil(n.D1M(T,y))):(f=S[ee].interval,p=S[ee].timeUnit,A=1);break}T=_}}else{b=this.staticRangePeriodicityMap,C=null;for(var J=0;J<b.length;J++)if(F=b[J],m/F.rangeInMS<1.001){C=F;break}n.h7R(1),w=-n.D1M(1,"1777563076"),U=-811174204,B=2;for(var Z=1;n.V7r(Z.toString(),Z.toString().length,72841)!==w;Z++)f=C.interval,A=C.periodicity,B+=2;n.R7z(B.toString(),B.toString().length,97896)!==U&&(f=C.interval,A=C.periodicity),f=C.interval,A=C.periodicity,p=C.timeUnit}if(L=this.chart.scroll,H=this.layout.candleWidth,P=this.layout.interval,N=this.layout.periodicity,v=this.layout.timeUnit,this.chart.maxTicks=G(l.getTime(),c.getTime(),f,A,p,this.dontRoll),x=this.needDifferentData({period:A,interval:f,timeUnit:p}),M=!t.dtRight&&e.ChartEngine.isDailyInterval(f)?new Date(l.toDateString()):l,Object.keys(this.chart.endPoints).length&&(this.chart.endPoints.begin>c||this.chart.endPoints.end<M)&&(x=!0),t.useExistingData&&(x=!1),!this.chart.masterData||!this.chart.masterData.length||x||t.forceLoad){D="w",D+="eek",this.layout.interval=f,this.layout.periodicity=A,this.layout.timeUnit=p,this.layout.timeUnit||(Q="s",Q+="econ",Q+="d",e.ChartEngine.isDailyInterval(this.layout.interval)?this.layout.timeUnit=null:this.layout.interval=="second"?this.layout.timeUnit=Q:this.layout.interval!="tick"&&(this.layout.timeUnit="minute")),q={symbol:o.symbol,symbolObject:o.symbolObject,chart:o,nodraw:!0},this.layout.interval=="tick"&&(q.startDate=c,q.endDate=l),this.displayInitialized||(q.initializeChart=!0),O={symbol:o.symbol,symbolObject:o.symbolObject,interval:this.layout.interval},(O.interval=="month"||O.interval==D)&&!this.dontRoll&&(O.interval="day"),R=this.quoteDriver.getQuoteFeed(O).behavior.bufferSize,u=this.standardMarketIterator(c,null,o),q.startDate=new Date(u.previous(R).getTime()),u=this.standardMarketIterator(l,null,o),q.endDate=new Date(u.next(R).getTime()),q.endDate<Date.now()&&(this.isHistoricalModeSet=!0),n.h7R(9);var X=n.D1M(180,120);n.h7R(144);var ne=n.D1M(983,20,19,31,15);V=new Date(Date.now()+X*ne),q.endDate>V&&!t.dtRight&&(q.endDate=V),this.clearCurrentMarketData(this.chart),clearTimeout(this.streamParameters.timeout),this.quoteDriver.newChart(q,Y)}else(this.layout.interval!=f||this.layout.periodicity!=A||this.layout.timeUnit!=p||!this.chart.dataSegment||!this.chart.dataSegment[0]||this.chart.dataSegment[0].DT!=o.inflectionPoint)&&(this.layout.interval=f,this.layout.periodicity=A,this.layout.timeUnit=p,this.createDataSet()),Y()}else K()},e.ChartEngine.prototype.setSpan=function(t,s){var n=ke,r,i,a,o,c,l,u,h,d,f,A,p,g,m,b,C,F,w,U,B,k;r="w",r+="e",r+="e";function y(T,_){var L;return b&&(L=7,_?T.setHours(T.getHours()+L):(T.setHours(T.getHours()-L),u.isMarketDate(T)||T.setDate(T.getDate()-2))),T}r+="k",i="mont",i+="h",a=arguments[0];function S(T){return T.setHours(0),T.setMinutes(0),n.e4i(),n.h7R(9),T.setSeconds(n.D1M("0",0)),T.setMilliseconds(0),T}if(o=arguments[1],c=arguments[2],l=arguments[3],typeof t=="object"?(a=t.period?t.period:t.multiplier?t.multiplier:1,o=t.interval?t.interval:t.base?t.base:t.span?t.span:t.period,c=t.padding,l=t.chart):(t={period:a,interval:o,padding:c,chart:l},n.h7R(49),s=arguments[n.E9E("5",0)]),l||(l=this.chart),u=l.market,o=o.toLowerCase(),o=="all"){t.dontSaveRangeToLayout=!0,this.displayAll(t,s);return}d=o,f=1,o=="today"?(A="d",A+="a",A+="y",d=A):o=="year"&&(d="month",f=12),p=e.shallowClone(t),g={begin:u.marketZoneNow(),interval:d,period:f},m=g.begin,b=e.Market.Symbology.isForexSymbol(l.symbol),o==="ytd"?(m=S(m),m.setMonth(0),m.setDate(1)):o===i?(m=S(new Date),m.setMonth(m.getMonth()-a)):o==="year"?(m=S(new Date),m.setFullYear(m.getFullYear()-a)):o===r?(m=S(new Date),m.setDate(m.getDate()-a*7)):o==="day"&&a==1&&u.isMarketDay()?(C=m.getHours(),F=m.getMinutes(),w=m.getSeconds(),U=m.getMilliseconds(),h=u.newIterator(g),m=h.previous(),m.setHours(C,F,w,U),m=u._convertFromMarketTZ(m)):o==="today"?(g.begin=y(m,!0),h=u.newIterator(g),(u.isOpen()||u.getPreviousOpen().getDate()==m.getDate())&&h.next(),m=h.previous(),y(m),p.goIntoFuture=!0,p.dtRight=new Date(+m),p.dtRight.setDate(m.getDate()+1),p.dtRight=u._convertFromMarketTZ(p.dtRight),b||(m.setHours(h.market.zopen_hour),m.setMinutes(h.market.zopen_minute),m.setSeconds(0)),m=u._convertFromMarketTZ(m)):(B="d",B+="a",B+="y",o=="day"&&(g.begin=y(m,!0)),h=u.newIterator(g),a=="1">>32&&a++,n.f4W(9),m=h.previous(n.D1M(a,1)),o==B&&(m=u._convertFromMarketTZ(y(m)))),p.dtLeft=m,p.maintainPeriodicity&&(p.periodicity={},p.periodicity.interval=this.layout.interval,p.periodicity.period=this.layout.periodicity),l.spanLock=!1,p.dontSaveRangeToLayout=!0,k=this,this.setRange(p,function(T){n.e4i();var _;_="l",_+="ayout",k.layout.setSpan=t,k.changeOccurred(_),o=="today"&&(l.spanLock=!0),s&&s(T)})},e.ChartEngine.prototype.getSpanCandleWidth=function(t){var s=ke,n,r,i,a,o,c,l,u,h;if(n="w",n+="e",n+="e",n+="k",r="d",r+="a",r+="y",i="mo",i+="nth",!(!t||!t.base||!t.multiplier)){a=parseFloat(t.multiplier),o=t.base,c=new Date,l=new Date,o=="year"?l.setFullYear(l.getFullYear()-a):o==i?l.setMonth(l.getMonth()-a):o==r?l.setDate(l.getDate()-a):o==n?l.setDate(l.getDate()-7*a):o=="YTD"&&(l.setMonth(0),l.setDate(1)),s.f4W(7);var d=s.E9E(508,9,1072,10,1016);s.f4W(145);var f=s.E9E(2,69,19,25,59);s.h7R(78);var A=s.E9E(3,6,18,9);return u=(c.getTime()-l.getTime())/d/60/f/A,s.f4W(16),u=s.D1M(u,7,5),h=this.chart.width/u,h}},e.ChartEngine.prototype.displayAll=function(t,s){var n,r,i,a,o,c;n=this.chart,r=this.layout,i=[];function l(){var h;if(!n.masterData||!n.masterData.length){s&&s("No data to display.");return}h=e.clone(t),h.dtLeft=n.endPoints.begin,h.dtRight=n.endPoints.end,ke.e4i(),h.periodicity={},h.periodicity.interval=r.interval,h.periodicity.period=r.periodicity,h.periodicity.timeUnit=r.timeUnit,a.setRange(h,function(d){a.layout.setSpan={base:t.base,multiplier:t.multiplier},ke.e4i(),a.changeOccurred("layout");for(var f in a.panels)a.calculateYAxisMargins(a.panels[f].yAxis);i.length&&!a.drawingObjects.length&&a.importDrawings(i),a.draw(),s&&s(d)})}if(t&&t.chart&&(n=t.chart),a=this,!this.quoteDriver){l();return}o=t.maintainPeriodicity?{period:r.periodicity,interval:r.interval,timeUnit:r.timeUnit}:{period:1,interval:"month",timeUnit:null};function u(h){ke.U$Q(),h||a.quoteDriver.loadAll(n,l)}o=t.periodicity?t.periodicity:o,o=e.cleanPeriodicity(o.period,o.interval,o.timeUnit),c=this.needDifferentData(o),this.layout.periodicity=o.period,this.layout.interval=o.interval,ke.U$Q(),this.layout.timeUnit=o.timeUnit,t.forceLoad||c?(i=this.drawingObjects.map(h=>h.serialize()),this.clearCurrentMarketData(this.chart),this.quoteDriver.newChart({nodraw:!0,symbol:this.chart.symbol,symbolObject:this.chart.symbolObject,chart:this.chart,initializeChart:!0,fetchMaximumBars:!0},u)):n.moreAvailable||!n.upToDate?u():(this.createDataSet(),l())},e.ChartEngine.prototype.drawWithRange=function(t){var s,n,r;s=this.layout,n=s.setSpan,r=s.range,n&&Object.keys(n).length?this.setSpan(Object.assign({},n,{forceLoad:!1,useExistingData:!0})):r&&Object.keys(r).length?this.setRange(Object.assign({},r,{forceLoad:!1,useExistingData:!0})):this.draw(t)}};Bl=E=>{var e,t;e="undef",e+="ine",e+="d",t=typeof _CIQ!==e?_CIQ:E.CIQ,t.ChartEngine.prototype.importLayout=function(s,n){var r,i,a,o,c,l,u,h,d,f,A,p,g,m,b,C,F,w,U,B,k,y,S,T,_,L,H,P,N,v,x,M,D;if(!s){n.cb&&n.cb();return}r=this,i=[],a=this.extendedHours&&!this.extendedHours.filter&&s.extended&&!this.layout.extended,typeof n!="object"&&(n={managePeriodicity:arguments[1],preserveTicksAndCandleWidth:arguments[2]}),o=this.layout,c=t.shallowClone(o),l=n.managePeriodicity,u=n.cb,h=n.seriesCB,d=n.noDataLoad,f=n.preserveTicksAndCandleWidth,A=null,this.exportDrawings&&(A=this.exportDrawings(),this.abortDrawings()),this.currentlyImporting=!0;for(var Q in o.studies)p=o.studies[Q],t.getFn("Studies.removeStudy")(this,p);this.overlays={},g=t.shallowClone(this.panels),this.panels={},m=t.clone(s),o.flipped&&this.flipChart(o.flipped),b=m.panels,U=function(J,Z){return J.index<Z.index?-1:1};for(C in b)"index"in b[C]||(U=null),F=b[C],F.name=C,i.push(F);o.panels={},B=null;function q(J){ke.U$Q();for(var Z,ee,X=0;X<i.length;X++)Z="ya",Z+="x",Z+="isRH",Z+="S",ee=i[X],se(ee,"yaxisLHS"),se(ee,Z);r.chart.yAxis=r.chart.panel.yAxis;function ne(oe){return ke.U$Q(),!!oe}function se(oe,ae){var Ae,he,ge,ie;if(!(!oe[ae]||!oe[ae].length)&&(Ae=J[oe.name],!!Ae)){he=Ae[ae],ge=new Array(he.length);for(var re=0;re<he.length;re++)ie=oe[ae].indexOf(he[re].name),ie>-1?ge[ie]=he[re]:ge.push(he[re]);ge.length&&(Ae[ae]=ge.filter(ne))}}}if(i.length>0){U&&i.sort(U);for(var O=0;O<i.length;++O)F=i[O],w=F.yAxis?new t.ChartEngine.YAxis(F.yAxis):null,this.stackPanel(F.display,F.name,F.percent,F.chartName,w),F.soloing&&(B=this.panels[F.name])}t.isEmpty(b)&&this.stackPanel("chart","chart",1,"chart");function R(J){var Z,ee,X,ne,se,oe;if(Z="layo",Z+="ut",A&&r.importDrawings(A),r.currentlyImporting=!1,J)return;ne=[];for(var ae in r.chart.series){if(!r.removeSeries)break;X=r.chart.series[ae],X.parameters.bucket=="study"&&(ee=!0,r.removeSeries(X),ne.push(X))}function Ae(){r.createDataSet(),q(r.panels),r.calculateYAxisPositions(),r.calculateYAxisMargins(r.chart.yAxis),r.draw()}for(var he=0;he<ne.length;he++)se="a",se+="ddEvent",X=ne[he],oe=X.parameters.isEvent?se:"addSeries",r[oe](X.id,X.parameters,Ae);ee||r.draw(),o.crosshair&&(r.centerCrosshairs(),r.doDisplayCrosshairs()),r.updateListeners("layout"),r.changeOccurred(Z)}this.resizeCanvas();for(var V in g)if(k=g[V],y=this.panels[V],y){this.container.removeChild(y.holder),k.handle&&this.container.removeChild(k.handle),S={holder:!0,subholder:!0,display:!0,icons:!0};for(var K in S)y[K]=k[K];this.configurePanelControls(y),k.chart.panel==k&&(k.chart.panel=y)}else this.privateDeletePanel(k);this.chart.panel=this.panels.chart,q(this.panels),Object.assign(o,Object.assign(t.clone(m),{studies:{}})),o.periodicity=c.periodicity,o.interval=c.interval,o.timeUnit=c.timeUnit,o.setSpan=c.setSpan;function Y(){var J,Z,ee;if(r.layout.studies)for(var X in r.layout.studies)J="Studies.repl",J+="aceStudy",Z="s",Z+="er",Z+="ies",ee=r.layout.studies[X],!(!ee.inputs.Series||ee.inputs.Series===Z)&&t.getFn(J)(this,ee.inputs.id,ee.type,ee.inputs,ee.outputs,ee.parameters,ee.panel);r.calculateYAxisPositions(),q(r.panels),ke.e4i(),h&&h()}o.range=c.range,f?o.candleWidth=c.candleWidth:o.candleWidth||(o.candleWidth=8),this.setCandleWidth(o.candleWidth),o.headsUp=t.clone(o.headsUp),T=t.clone(m.studies);for(var G in T)_=T[G],L=t.getFn("Studies.addStudy")(this,_.type,_.inputs,_.outputs,_.parameters,_.panel),L&&(_.disabled&&L.toggleDisabledState(this),_.signalData&&(L.signalData=_.signalData,H=this.panels[L.panel],this.checkForEmptyPanel(H,!0,L)&&(H.hidden=!0,H.percent=0)));if(this.extendedHours&&this.extendedHours.prepare(o.extended,o.marketSessions),typeof o.chartType>"u"&&(o.chartType="line"),this.setMainSeriesRenderer(),B&&this.panelSolo(B),this.adjustPanelPositions(),q(this.panels),this.storePanels(),!d){if(m.symbols&&m.symbols.length){P={chart:this.chart},!f&&l&&m.range&&Object.keys(m.range).length?P.range=m.range:!f&&l&&m.setSpan&&Object.keys(m.setSpan).length?P.span=m.setSpan:l&&m.interval?P.periodicity={interval:m.interval,period:m.periodicity,timeUnit:m.timeUnit}:P.periodicity={interval:c.interval,period:c.periodicity,timeUnit:c.timeUnit},N=m.symbols[0].symbolObject||m.symbols[0].symbol,this.loadChart(N,P,function(J){var Z,ee,X,ne;if(!J){for(var se,oe=1;oe<m.symbols.length&&r.addSeries;++oe)se=m.symbols[oe],se.parameters||(se.parameters={}),Z=t.clone(se.parameters),this.panels[Z.panel]?(ee=Z.isEvent?"addEvent":"addSeries",r[ee](se.id,Z,Y)):(X='" could not be',X+=" imported due to ",X+='a missing corresponding panel "',ne="Warni",ne+="ng: S",ne+='eries "',console.warn(ne+se.id+X+Z.panel+'"'));m.chartScale&&r.setChartScale(m.chartScale)}ke.U$Q(),R(J),u&&u.apply(null,arguments)});return}if(l){if(!f&&this.setRange){if(v=m.range,v&&Object.keys(v).length&&this.chart.symbol){this.setRange(v,function(){R(),ke.U$Q(),u&&u()});return}else if(m.setSpan&&Object.keys(m.setSpan).length&&this.chart.symbol){this.setSpan(m.setSpan,function(){R(),u&&u()});return}}x=m.interval,M=m.periodicity,D=m.timeUnit,isNaN(M)&&(M=1),x||(x="day"),this.setPeriodicity({period:M,interval:x,timeUnit:D,getDifferentData:a},function(){R(),u&&u()});return}}l&&(o.periodicity=m.periodicity,o.interval=m.interval,o.timeUnit=m.timeUnit,o.setSpan=m.setSpan),this.createDataSet(),f||this.home(),R(),u&&u()},t.ChartEngine.prototype.exportLayout=function(s){var n,r,i,a,o,c,l,u,h;n={};for(var d in this.layout)r="p",r+="ane",r+="l",r+="s",i="s",i+="tud",i+="i",i+="es",a="dr",a+="aw",a+="in",a+="g",d!="studies"&&d!="panels"&&d!=a?n[d]=t.clone(this.layout[d]):d==i?n.studies={}:d==r&&(n.panels={});ke.h7R(9),o=ke.E9E("0",0);for(var f in this.panels)c=this.panels[f],c.exportable!==!1&&(l=n.panels[f]={},l.percent=c.percent,l.display=c.display,l.chartName=c.chart.name,l.soloing=c.soloing,l.index=o++,l.yAxis={name:c.yAxis.name,position:c.yAxis.position},c.yaxisLHS&&(l.yaxisLHS=p(c.yaxisLHS)),c.yaxisRHS&&(l.yaxisRHS=p(c.yaxisRHS)));for(var A in this.layout.studies)u=n.studies[A]={},h=this.layout.studies[A],u.type=h.type,u.inputs=t.clone(h.inputs),u.outputs=t.clone(h.outputs),u.panel=h.panel,u.parameters=t.clone(h.parameters),u.disabled=h.disabled,h.signalData&&(h.signalData.cloneForExport?u.signalData=h.signalData.cloneForExport():u.signalData=t.clone(h.signalData));function p(g){var m;m=[];for(var b=0;b<g.length;b++)m.push(g[b].name);return m}return s?(n.symbols=this.getSymbols({"include-parameters":!0,"exclude-studies":!0,"exclude-generated":!0,"exclude-nostore":!0}),n.symbols.length&&n.symbols[0].symbolObject&&n.symbols[0].symbolObject.static&&delete n.symbols[0].symbolObject.static):delete n.symbols,n},t.ChartEngine.prototype.importPreferences=function(s){ke.U$Q(),t.extend(this.preferences,s),s.timeZone&&this.setTimeZone(this.dataZone,s.timeZone),s.language&&t.I18N&&(this.uiContext&&this.uiContext.config.setHtmlLang&&document.documentElement.setAttribute("lang",s.language),t.I18N.localize(this,s.language)),this.changeOccurred("preferences")},t.ChartEngine.prototype.exportPreferences=function(){return this.preferences}};Dl=E=>{var e=ke,t,s,n,r,i,a,o,c,l,u,h,d,f,A,p,g,m,b,C,F,w,U;t="#00",t+="af",t+="e",t+="d",s="#e9088",s+="c",n="m",n+="a",r="#b82",r+="c0",r+="c",i="#",i+="8cc",i+="17",i+="6",a="s",a+="er",a+="ies",o="Volume",o+=" Chart",c="a",c+="u",c+="t",c+="o",l="fie",l+="l",l+="d",u="m",u+="a",h="We",h+="ighted",d="V",d+="I",d+="DYA",f="V",f+="I",f+="DY",f+="A",A="Tria",A+="ngul",A+="ar",p="Expon",p+="enti",p+="al",g="Expo",g+="nen",g+="tial",m="S",m+="imple",b="we",b+="lles wild",b+="er",C="w",C+="m",C+="a",F="Cl",F+="o",F+="s",F+="e",w=typeof _CIQ<"u"?_CIQ:E.CIQ,U=typeof _timezoneJS<"u"?_timezoneJS:E.timezoneJS,w.ChartEngine&&(w.ChartEngine.prototype.rightClickOverlay=function(B,k){var y;this.runPrepend("rightClickOverlay",arguments)||(y=this.overlays[B],y.editFunction?y.editFunction(k):this.removeOverlay(B),this.runAppend("rightClickOverlay",arguments))},w.ChartEngine.prototype.addOverlay=function(B){this.runPrepend("addOverlay",arguments)||(this.overlays[B.name]=B,this.runAppend("addOverlay",arguments))},w.ChartEngine.prototype.removeOverlay=function(B){var k,y,S,T,_,L;if(k="rem",k+="o",k+="veO",k+="verlay",!this.runPrepend("removeOverlay",arguments)){if(y=this.overlays[B],y){for(var H in this.overlays){S=this.overlays[H],T=["Field"],w.Studies&&(T=w.Studies.getFieldInputs(S));for(var P=0;P<T.length;P++)_=S.inputs[T[P]],L=y.inputs.Series,L&&L!=="series"&&(e.f4W(15),_=_.replace(e.E9E(L,"]"," ["),"")),_ in y.outputMap&&this.removeOverlay(S.name)}this.cleanupRemovedStudy(y),this.panels[y.panel],delete this.overlays[B],this.checkForEmptyPanel(y.panel)}this.currentlyImporting||(this.displaySticky(),this.createDataSet(),this.changeOccurred("layout")),this.resetDynamicYAxis(),this.runAppend(k,arguments)}},w.ChartEngine.prototype.cleanupRemovedStudy=function(B){var k,y,S,T;if(B){B.study.removeFN&&B.study.removeFN(this,B);for(var _ in this.plugins)_.indexOf("{"+B.id+"}")>-1&&delete this.plugins[_];B.removeSignals&&B.removeSignals();for(var L in B.outputMap)k="fi",k+="e",k+="ld",this.getMarkerArray(k,L).forEach(H=>H.remove());this.layout.studies&&delete this.layout.studies[B.name],this.chart.state.studies.sorted=null,delete this.overlays[B.name],y=this.repositioningAnchorSelector||{},S=y.sd,S&&S===B&&(this.repositioningAnchorSelector=null,T=this.controls.anchorHandles,T&&T[B.uniqueId]&&(T[B.uniqueId].highlighted=!1,w.Studies.displayAnchorHandleAndLine(this,B,this.chart.dataSegment))),w.Studies&&w.Studies.removeStudySymbols(B,this),this.quoteDriver&&this.quoteDriver.updateSubscriptions()}},w.ChartEngine.prototype.getStudies=function(B){var k,y,S,T;if(k=this.layout.studies,y=[],k)for(var _ in k)S=k[_],S.name===B.name||S.type===B.type?y.push(S):(T=S.outputMap,T&&T[B.output]&&y.push(S));return e.e4i(),y}),w.Studies=w.Studies||function(){},w.Studies.DEFAULT_INPUTS={Period:14},w.Studies.DEFAULT_OUTPUTS={Result:"auto"},w.Studies.impliedVolatilityAvailable=!1,w.Studies.useTranslationDelimiter=!0,w.Studies.sortForProcessing=B=>{var k,y;k=[],y=B.layout.studies,e.U$Q(),y&&S(Object.values(y),k);function S(T,_){e.U$Q(),T.forEach(L=>{var H;_.indexOf(L)==-1&&(H=L.getDependents(B),H.length&&S(H,_),_.unshift(L))})}return k},w.Studies.getQuoteFieldValue=function(B,k,y=F){return e.U$Q(),w.ChartEngine.getQuoteFieldValue(B,k,y)},w.Studies.StudyDescriptor=function(B,k,y,S,T,_){var L,H,P,N;L="unde",L+="fined",this.name=B,this.disabled=!1,this.type=k,this.panel=y,this.inputs=S,this.outputs=T,this.parameters=_,this.outputMap={},this.min=null,this.max=null,this.startFrom=0,this.subField="Close",H=w.Studies.studyLibrary[k],H||(P="c",P+="h",P+="ar",P+="t",N="char",N+="t",H={},(y==N||!y&&_&&_.chartName==P)&&(this.overlay=!0)),typeof H.inputs>"u"&&(H.inputs=w.clone(w.Studies.DEFAULT_INPUTS)),typeof H.outputs==L&&(H.outputs=w.clone(w.Studies.DEFAULT_OUTPUTS)),this.study=H,this.libraryEntry=H},w.Studies.StudyDescriptor.prototype.toggleDisabledState=function(B){var k,y,S,T,_;e.e4i(),k="sho",k+="w",y=this.disabled,S=this.study,T=this.signalData,_=B.chart,this.disabled=y=!y,y?_.customChart&&_.customChart.owner===this.name&&S.calculateFN(B,this):(this.startFrom=0,this.error=null,S&&S.calculateFN&&S.calculateFN(B,this),this.flagSignals&&this.flagSignals()),T&&T[y?"hide":k](),B.changeOccurred("layout"),B.draw()},w.Studies.StudyDescriptor.prototype.getYAxis=function(B){var k,y,S,T;return k=this.yAxis,this.parameters&&(y=this.parameters.yAxis?this.parameters.yAxis.name:this.parameters.yaxisDisplayValue),k||(S=B.panels[this.panel],S&&(T=B.getYAxisByName(S,this.name),k=B.getYAxisByName(S,y)||y&&T||w.Studies.getFieldInputs(this).map(_=>B.getYAxisByField(S,this.inputs[_])).filter(_=>(e.U$Q(),_))[0]||T||S.yAxis)),e.U$Q(),k||(k=B.getYAxisByName(B.chart.panel,y)||B.chart.panel.yAxis),k},w.Studies.StudyDescriptor.prototype.getContext=function(B){return e.e4i(),B.chart.context},w.Studies.StudyDescriptor.prototype.getDependents=function(B,k){var y,S,T,_,L;e.U$Q(),y=[];for(var H in B.layout.studies)if(S=B.layout.studies[H],S!=this){T=w.Studies.getFieldInputs(S);for(var P=0;P<T.length;P++)if(_=S.inputs[T[P]].toLowerCase().replace(/\u200c/g,"").replace(/\[(.+)\]/g,"($1)"),L=this.name.toLowerCase().replace(/\u200c/g,""),_.includes(L)){if(k&&S.parameters&&S.parameters.panelName)continue;y.push(S),y=y.concat(S.getDependents(B,k));break}}return y},w.Studies.StudyDescriptor.prototype.undraggable=function(B){e.e4i();var k;return!!(this.signalData||(k=this.study.attributes,k&&(k.panelName&&k.panelName.hidden||k.yaxisDisplayValue&&k.yaxisDisplayValue.hidden)))},w.Studies.StudyDescriptor.prototype.appendFutureTicks=function(B,k){var y,S,T,_;if(y=B.chart.scrubbed,!!y.length){for(S=B.standardMarketIterator(y[y.length-1].DT),T=k.length-1;T>=0;T--){_=k[T];for(var L in _)if(_[L]||_[L]===0){T=-1;break}if(T==-1)break;k.pop()}for(T=0;T<k.length;T++)_=k[T],_.DT||(_.DT=S.next()),_.displayDate||B.setDisplayDate(_),_.futureTick=!0,y.push(_)}},w.Studies.generateID=function(B,k,y,S,T){var _,L,H,P,N,v,x,M,D,Q;if(_=w.Studies.studyLibrary[k],L=T||k,w.Studies.useTranslationDelimiter&&(e.f4W(15),L=e.D1M(L,"‌","‌")),H=L,_&&_.customRemoval)return H;if(!w.isEmpty(y)){P=!0;for(var q in y)N="Pr",N+="ima",N+="r",N+="y",v="Shad",v+="ing",x="dis",x+="p",x+="la",x+="y",!["id",x,v,"Anchor Selector"].includes(q)&&(M=y[q],M!="field"&&(q=="Series"&&(M==N||M=="series")||(M=M.toString(),w.Studies.prettify[M]!==void 0&&(M=w.Studies.prettify[M]),P?(D=" ",D+="(",P=!1,H+=D):M&&(H+=","),H+=M)));P||(H+=")")}if(S===H||S&&S.indexOf(H+"-")===0)return S;if(B.layout.studies&&B.layout.studies[H]){for(var O=2;O<50;O++)if(e.h7R(15),Q=e.E9E("-",O,H),!B.layout.studies[Q]){H=Q;break}}return H},w.Studies.DialogHelper=function(B){var k,y,S,T,_,L,H,P,N,v,x,M,D,Q,q,O,R,V,K,Y,G,J,Z,ee,X,ne,se,oe,ae,Ae,he,ge,ie,re,de,ce,fe,me,ve,pe,be,Se,Ee,Ie,Qe,Ne,De,Re,_e,Ue,He,Pe,We;k="und",k+="efined",y=this.stx=B.stx,S=this.sd=B.sd,this.name=S?S.type:B.name,this.signal=1,this.inputs=[];function Ge(it){var rt,$e,yt;e.U$Q(),rt={},$e=it.defaults,yt={name:it.name,heading:y.translateIf(it.label),defaultValue:$e[0],value:it.value,options:rt,type:"select"};for(var qe=0;qe<$e.length;qe++)rt[$e[qe]]=y.translateIf($e[qe]);return it.color!==void 0&&(yt.defaultColor=y.defaultColor,yt.color=it.color),yt}this.outputs=[],this.parameters=[],T=this.libraryEntry=S?S.study:w.Studies.studyLibrary[B.name],typeof T.inputs==k&&(T.inputs=w.clone(w.Studies.DEFAULT_INPUTS)),typeof T.outputs>"u"&&(T.outputs=w.clone(w.Studies.DEFAULT_OUTPUTS));function je(it){var rt;if(De=="alias"){rt=1;for(var $e in y.panels){if($e==it)return yt($e,rt);rt++}}function yt(qe,ft){return"Panel "+ft.toString()}return it}_=S&&y.panels[S.panel]||y.chart.panel,L=_.chart,this.title=y.translateIf(T.name),this.attributes=w.clone(T.attributes),this.attributes||(this.attributes={});for(var Je in this.attributes){H=this.attributes[Je];for(var Oe in H)typeof H[Oe]=="function"&&(H[Oe]=H[Oe].call(S||T,y))}P=[],N=y.layout.studies,v=[];function nt(it){var rt;return rt={name:it.name,heading:y.translateIf(it.label),defaultValue:it.defaults,value:it.value,type:"checkbox"},rt}S&&(v=Array.prototype.concat(S,S.getDependents(y)));function Ze(it,rt){var $e;$e=this,$e.attributes[it]||($e.attributes[it]={}),e.U$Q(),rt&&($e.attributes[it].hidden=!0)}for(var Le in N)if(!N[Le].signalData&&!(v.indexOf(N[Le])>-("1"-0)))for(var et in N[Le].outputMap)x=w.Studies.useTranslationDelimiter?"‌":"",N[Le].inputs.Series&&N[Le].inputs.Series!=="series"&&(e.f4W(0),et=`${x}${et}${x}${e.E9E("["," ")}${N[Le].inputs.Series}]`),P.push(et);for(var Ye in T.inputs)if(M={},this.inputs.push(M),M.name=Ye,M.heading=y.translateIf(Ye),D=T.inputs[Ye],S&&S.inputs&&typeof S.inputs[Ye]<"u"&&S.inputs[Ye]!==null?M.value=S.inputs[Ye]:M.value=T.inputs[Ye],M.defaultInput=T.inputs[Ye],this.attributes[Ye]||(this.attributes[Ye]=w.Studies.inputAttributeDefaultGenerator(M.defaultInput)),D.constructor==Number)Q="num",Q+="ber",M.type=Q;else if(D.constructor==String)if(q=w.Studies.movingAverageHelper(y,M.defaultInput),q)O="s",O+="elect",M.type=O,M.defaultInput=q,R=w.Studies.movingAverageHelper(y,M.value),R||(R=M.value),M.value=R,M.options=w.Studies.movingAverageHelper(y,"options");else if(D=="field"){V="Op",V+="en",K="sel",K+="ect",Y=y.chart.series,G=[];for(var Ve in Y)G.push(Ve);M.type=K,M.options={},J=[V,"High","Low","Close","hl/2","hlc/3","hlcc/4","ohlc/4",L.defaultPlotField].concat(P,G),y.layout.adj&&(e.h7R(77),J.splice(e.D1M("4",0),0,"Adj_Close"));for(var ct=0;ct<J.length;ct++)Z=J[ct],M.options[Z]=y.translateIf(Z);M.value=="field"&&(M.value="Close"),M.defaultInput=="field"&&(ee="C",ee+="los",ee+="e",M.defaultInput=ee)}else D=="series"?(X="fi",X+="el",X+="d",M.options=Object.keys(y.chart.series).reduce((it,rt)=>{var $e,yt,qe,ft;return $e=y.chart.series[rt],yt=$e.display,e.U$Q(),qe=$e.parameters,ft=(qe||{}).symbol||rt,{...it,[ft]:yt||rt}},{Primary:"Primary"}),(!M.value||M.value==="series"||M.value===X)&&(M.value="Primary"),M.type="select",M.defaultInput=="field"&&(M.defaultInput="Primary")):(ne="d",ne+="ate",se="yy",se+="yy-",se+="mm-dd",M.type="text",this.attributes[Ye].placeholder==se?M.type=ne:this.attributes[Ye].placeholder=="hh:mm:ss"&&(M.type="time"));else if(D.constructor==Boolean)oe="o",oe+="n",M.type="checkbox",(M.value===!0||M.value=="true"||M.value==oe)&&(M.value=!0);else if(D.constructor==Array){M.type="select",M.options={};for(var ot=0;ot<D.length;ot++)M.options[D[ot]]=y.translateIf(D[ot]);M.value.constructor==Array&&(M.value=M.value[0]),this.attributes[Ye].defaultSelected?M.defaultInput=this.attributes[Ye].defaultSelected:M.defaultInput=D[0]}this.dateTimeInputs=[];for(var dt="0"-0;dt<this.inputs.length;dt++)if(ae=this.inputs[dt],ae.type=="date"){Ae=ae.name.substring(0,ae.name.indexOf(" Date"));for(var xt=0;xt<this.inputs.length;xt++)if(he=this.inputs[xt],he.type=="time"&&he.name==Ae+" Time"){this.dateTimeInputs.push(Ae);break}}this.adjustInputTimesForDisplayZone();for(var Ke in T.outputs)ge="a",ge+="u",ge+="t",ge+="o",ie={name:Ke,heading:y.translateIf(Ke)},ie.color=ie.defaultOutput=T.outputs[Ke],S&&S.outputs&&S.outputs[Ke]&&(ie.color=S.outputs[Ke]),ie.color==ge&&(ie.color=y.defaultColor,ie.isAuto=!0),this.outputs.push(ie);if(re=S?S.parameters:null,T.parameters&&(de=T.parameters.init,de)){if(de.studyOverZonesEnabled!==void 0){if(fe="Show Z",fe+="o",fe+="nes",ce={name:"studyOverZones",heading:y.translateIf(fe),defaultValue:de.studyOverZonesEnabled,value:de.studyOverZonesEnabled},re&&(re.studyOverZonesEnabled||re.studyOverZonesEnabled===!1)){me=766134920,ve=1475437822,e.h7R(1),pe=e.E9E(1,"2");for(var At=1;e.R7z(At.toString(),At.toString().length,79292)!==me;At++)ce.value=re.studyOverZonesEnabled,pe+=2;e.V7r(pe.toString(),pe.toString().length,3681)!==ve&&(ce.value=re.studyOverZonesEnabled)}ce.type="checkbox",this.parameters.push(ce)}if(de.studyOverBoughtValue!==void 0&&(be="t",be+="e",be+="x",be+="t",Se="au",Se+="to",Ee="stu",Ee+="dyOverBought",ce={name:Ee,heading:y.translateIf("OverBought"),defaultValue:de.studyOverBoughtValue,value:de.studyOverBoughtValue,defaultColor:de.studyOverBoughtColor,color:de.studyOverBoughtColor},re&&re.studyOverBoughtValue&&(ce.value=re.studyOverBoughtValue),re&&re.studyOverBoughtColor&&(ce.color=re.studyOverBoughtColor),ce.color==Se&&(ce.color=y.defaultColor,ce.isAuto=!0),ce.type=be,this.parameters.push(ce)),de.studyOverSoldValue!==void 0){ce={name:"studyOverSold",heading:y.translateIf("OverSold"),defaultValue:de.studyOverSoldValue,value:de.studyOverSoldValue,defaultColor:de.studyOverSoldColor,color:de.studyOverSoldColor},Ie=-1845829850,Qe=1372529601,Ne=2;for(var st=1;e.V7r(st.toString(),st.toString().length,94839)!==Ie;st++)(re||re.studyOverSoldValue)&&(ce.value=re.studyOverSoldValue),(re||re.studyOverSoldColor)&&(ce.color=re.studyOverSoldColor),Ne+=2;e.V7r(Ne.toString(),Ne.toString().length,37353)!==Qe&&(re&&re.studyOverSoldValue&&(ce.value=re.studyOverSoldValue),re&&re.studyOverSoldColor&&(ce.color=re.studyOverSoldColor)),re&&re.studyOverSoldValue&&(ce.value=re.studyOverSoldValue),re&&re.studyOverSoldColor&&(ce.color=re.studyOverSoldColor),ce.color=="auto"&&(ce.color=y.defaultColor,ce.isAuto=!0),ce.type="text",this.parameters.push(ce)}this.attributes.studyOverBoughtValue||(this.attributes.studyOverBoughtValue={}),this.attributes.studyOverSoldValue||(this.attributes.studyOverSoldValue={})}De=this.panelSelect=B.panelSelect,Re=this.axisSelect=B.axisSelect,B.addWhenDone&&(Re=De=!1),(Re||De)&&(_e="underlayEnab",_e+="le",_e+="d",Ue="fli",Ue+="ppedEn",Ue+="ab",Ue+="led",S||(S=w.Studies.addStudy(y,B.name,null,null,{calculateOnly:!0}),w.Studies.removeStudy(y,S)),De&&(He="Show as ",He+="Unde",He+="rl",He+="ay",Pe="P",Pe+="a",Pe+="n",Pe+="el",this.parameters.push(Ge({label:Pe,name:"panelName",defaults:function(){var it;e.U$Q(),it=[],it.push("Auto");for(var rt in y.panels)(rt!=S.panel||!re||!re.panelName)&&(y.panels[rt].noDrag||it.push(je(rt)));return y.checkForEmptyPanel(S.panel,!0,S)||it.push("New panel"),it}(),value:re&&re.panelName?je(re.panelName):"Auto"}),nt({label:He,name:"underlay",defaults:!1,value:S.underlay||S.parameters&&S.parameters.underlayEnabled}))),We=y.getYAxisByName(_,S.name),Re&&this.parameters.push(Ge({label:"Y-Axis",name:"yaxisDisplay",defaults:function(){var it,rt,$e,yt;it="rig",it+="ht",rt="def",rt+="ault",$e=_.yaxisLHS.concat(_.yaxisRHS),yt=[],yt.push(rt,it,"left","none","shared");for(var qe=0;qe<$e.length;qe++)$e[qe]!=We&&yt.push($e[qe].name);return yt}(),value:re&&re.yaxisDisplayValue||We&&We.position||(We?"default":"shared"),color:We&&We.textStyle||"auto"}),nt({label:"Invert Y-Axis",name:"flipped",defaults:!1,value:re&&re.flippedEnabled!==void 0?re.flippedEnabled:We?We.flipped:!1})),Ze.call(this,Ue,!We&&S.panel!=S.name),Ze.call(this,_e,T.underlay),Ze.call(this,"panelName",T.seriesFN===null),Ze.call(this,"yaxisDisplayValue",T.seriesFN===null||T.yAxis&&T.yAxis.noDraw))},w.Studies.DialogHelper.prototype.updateStudy=function(B){var k,y,S,T;k={},y=this.sd,S=this.libraryEntry,S||(S={}),y||(y=S),k.inputs=w.clone(y.inputs),k.outputs=w.clone(y.outputs),k.parameters=w.clone(y.parameters),this.adjustInputTimesForDisplayZone(B),B.parameters&&B.parameters.panelName&&(B.parameters.panelName=_.call(this,B.parameters.panelName)),w.extend(k,B);function _(H){var P,N;if(P=this,P.panelSelect=="alias"&&(N=x(H),N)){for(var v in P.stx.panels)if(!--N)return v}function x(M){var D;return D=M.match(/.{0,50} (\d)/),D&&D[1]}return H}k.parameters||(k.parameters={}),k.inputs&&k.inputs.id?y=w.Studies.replaceStudy(this.stx,k.inputs.id,this.name,k.inputs,k.outputs,k.parameters,null,y.study):y=w.Studies.addStudy(this.stx,this.name,k.inputs,k.outputs,k.parameters,null,y.study),T=new w.Studies.DialogHelper({stx:this.stx,sd:y,axisSelect:this.axisSelect,panelSelect:this.panelSelect});for(var L in T)L!="signal"&&(this[L]=T[L]);this.signal*=-1},w.Studies.DialogHelper.prototype.adjustInputTimesForDisplayZone=function(B){e.e4i();var k,y,S,T,_,L,H,P,N,v,x;if(this.stx.displayZone)for(var M=0;M<this.dateTimeInputs.length;M++){for(k=this.dateTimeInputs[M],L="",B&&B.inputs&&(H=" Ti",H+="me",e.h7R(0),S=B.inputs[e.D1M(" Date",k)],e.h7R(0),T=B.inputs[e.D1M(H,k)],S&&(L=S),T&&(L+=T)),y=0;y<this.inputs.length;y++)_=this.inputs[y],!S&&S!==""&&_.name==k+" Date"?L=_.value+L:!T&&T!==""&&_.name==k+" Time"&&(L+=_.value);if(L=L.replace(/\D/g,""),L.length<12)return;if(P=w.strToDateTime(L),!isNaN(P.valueOf()))if(B)v=" T",v+="ime",B.inputs||(B.inputs={}),N=w.convertTimeZone(P,this.stx.displayZone),e.h7R(0),B.inputs[e.D1M(" Date",k)]=w.yyyymmdd(N),e.f4W(0),B.inputs[e.D1M(v,k)]=w.hhmmss(N);else for(N=w.convertTimeZone(P,null,this.stx.displayZone),y=0;y<this.inputs.length;y++)x=" ",x+="D",x+="ate",_=this.inputs[y],_.name==k+x&&(_.value=w.yyyymmdd(N)),_.name==k+" Time"&&(_.value=w.hhmmss(N))}},w.Studies.prepareStudy=function(B,k,y){var S;if(S="u",S+="ndefi",S+="n",e.U$Q(),S+="ed",typeof k.calculateFN==S&&(k.useRawValues=!0),w.isEmpty(y.outputMap))for(var T in y.outputs)k.useRawValues?y.outputMap[T]=T:y.outputMap[T+" "+y.name]=T},w.Studies.rejiggerDerivedStudies=function(B,k,y){var S,T,_,L,H,P,N;S=k.name,k.panel,T=k.getDependents(B);for(var v=0;v<T.length;v++)if(_=T[v],L=w.clone(_.inputs),H=L.id,!!H){P=w.Studies.getFieldInputs(_);for(var x=0;x<P.length;x++)L[P[x]]=L[P[x]].replace(S,y);N=w.Studies.replaceStudy(B,H,_.type,L,_.outputs,w.extend(_.parameters,{rejiggering:!0}),null,_.study),delete N.parameters.rejiggering}},w.Studies.removeStudySymbols=function(B,k){if(e.U$Q(),B.series)for(var y in B.series)k.deleteSeries(B.series[y],null,{action:"remove-study"})},w.Studies.replaceStudy=function(B,k,y,S,T,_,L,H){var P,N,v,x,M,D,Q,q,O;_||(_={}),k&&(_.replaceID=k),k=_.replaceID,P=B.layout.studies[k],w.Studies.removeStudySymbols(P,B),P.attribution&&B.removeFromHolder(P.attribution.marker),B.quoteDriver&&B.quoteDriver.updateSubscriptions(),S&&(S.id==S.display&&delete S.display,delete S.id),N=w.Studies.addStudy(B,y,S,T,_,L,H),N.highlight=P.highlight,N.uniqueId=P.uniqueId,P.signalData&&(N.signalData=P.signalData,N.signalData.updateConditions&&N.signalData.updateConditions(k,N.inputs.id)),x={},e.e4i();for(v in B.layout.studies)v==k?x[N.name]=N:x[v]=B.layout.studies[v];B.layout.studies=x,x={};for(v in B.overlays)v==k?(N.overlay||N.underlay)&&(x[N.name]=N):x[v]=B.overlays[v];B.overlays=x,!B.overlays[N.name]&&(N.overlay||N.underlay)&&B.addOverlay(N),M=Object.keys(P.outputMap),D=Object.keys(N.outputMap),P.panel!==N.panel&&M.forEach(function(V){var K,Y,G;K=1490820750,Y=-333750796,G=2;for(var J=1;e.V7r(J.toString(),J.toString().length,85401)!==K;J++)B.moveMarkers(P.panel,N.panel,B.getMarkerArray("field",V)),e.h7R(37),G+=e.D1M(2,"2");e.R7z(G.toString(),G.toString().length,"83469"|5)!==Y&&B.moveMarkers(P.panel,N.panel,B.getMarkerArray("",V))}),B.getMarkerArray("panelName",P.panel).forEach(function(V,K){var Y;Y=M.indexOf(V.params.field),Y>-1&&D.indexOf(V.params.field)===-1&&(V.params.field=D[K])}),B.checkForEmptyPanel(P.panel),_.rejiggering||(B.initializeDisplay(B.chart),w.Studies.rejiggerDerivedStudies(B,P,N.inputs.id,N.panel)),Q={outputMap:w.clone(P.outputMap),panel:P.panel},w.transferObject(P,N),B.layout.studies[N.name]=P,B.overlays[N.name]=P,B.chart.state.studies.sorted=null,q=!1;for(var R in B.drawingObjects)O=B.drawingObjects[R],Q.outputMap&&Q.outputMap.hasOwnProperty(O.field)?(O.field=O.field.replace(k,P.inputs.id),P.parameters&&P.parameters.panelName?O.panelName=P.parameters.panelName:O.panelName=P.panel,q=!0):Q.panel&&Q.panel==O.panelName&&(O.panelName=O.panelName.replace(k,P.inputs.id),q=!0);return q&&B.changeOccurred("vector"),_.rejiggering||(!P.currentlyImporting&&!_.calculateOnly&&P.chart.dataSet&&B.createDataSet(null,P.chart),B.changeOccurred("layout"),B.drawWithRange()),P},w.Studies.addStudy=function(B,k,y,S,T,_,L){var H,P,N,v,x,M,D,Q,q,O,R,V,K,Y,G,J,Z,ee,X,ne;if(H="la",H+="yo",H+="u",H+="t",P="ch",e.e4i(),P+="ar",P+="t",N=L||w.Studies.studyLibrary[k],T||(T={}),N){if(N.inputs){v=w.clone(N.inputs);for(var se in v)v[se]instanceof Array&&(N.attributes&&N.attributes[se]&&N.attributes[se].defaultSelected?v[se]=N.attributes[se].defaultSelected:v[se]=v[se][0]);y=w.extend(v,y)}N.outputs&&(S=w.extend(w.clone(N.outputs),S)),x=N.parameters,x&&x.init&&(T=w.extend(w.clone(x.init),T)),x&&!T.display&&(T.display=x.display)}if(y||(y=w.clone(w.Studies.DEFAULT_INPUTS)),S||(S=w.clone(w.Studies.DEFAULT_OUTPUTS)),T.chartName||(T.chartName=P),(T.panelName=="Auto"||T.panelName=="Default panel")&&(T.panelName=""),y.Period<1&&(y.Period=1),M=null,B.layout.studies||(B.layout.studies={}),N&&N.initializeFN?M=N.initializeFN(B,k,y,S,T,_,L):M=w.Studies.initializeFN(B,k,y,S,T,_,L),M){if(M==="abort")return}else{D="CIQ.Studies.addStudy: initia",D+="lizeFN() retur",D+="ned null for ",e.f4W(0),console.log(e.D1M(k,D));return}if(L=M.study,M.chart=B.charts[T.chartName],M.type=k,M.permanent=L.permanent,M.customLegend=L.customLegend,M.uniqueId=w.uniqueID(),w.Studies.prepareStudy(B,L,M),Q=B.chart.state.studies,Q||(Q=B.chart.state.studies={}),Q.sorted=null,!T.replaceID)B.layout.studies[M.inputs.id]=M,(M.overlay||M.underlay)&&B.addOverlay(M),!B.currentlyImporting&&!T.calculateOnly&&M.chart.dataSet&&B.createDataSet(null,M.chart);else{O=1987725222,R=1428086493,V=2;for(var oe=1;e.R7z(oe.toString(),oe.toString().length,"37452"<<0)!==O;oe++)q=!1,V+=2;e.R7z(V.toString(),V.toString().length,18118)!==R&&(q=!0),delete T.replaceID}if(B.quoteDriver&&B.quoteDriver.updateSubscriptions(),T.calculateOnly)return K="l",K+="a",K+="yout",B.changeOccurred(K),M;if(Y=B.panels[M.panel],G=!1,J=!(M.overlay||M.underlay),J&&L.horizontalCrosshairFieldFN&&(Y.horizontalCrosshairField=L.horizontalCrosshairFieldFN(B,M)),B.editCallback?G=!0:J?B.callbackListeners.studyPanelEdit&&B.callbackListeners.studyPanelEdit.length&&(G=!0):B.callbackListeners.studyOverlayEdit&&B.callbackListeners.studyOverlayEdit.length&&(G=!0),G){T.editMode=!0,Z=!1;for(var ae in M.inputs)if(ee="dis",ee+="p",ee+="lay",ae!="id"&&ae!=ee){Z=!0;break}if(!Z)for(var Ae in M.outputs){Z=!0;break}Z&&(typeof M.study.edit<"u"?M.study.edit&&(X=function(he,ge,ie,re,de){return function(){w.clearCanvas(he.chart.tempCanvas,he),ge.study.edit(ge,{stx:he,inputs:ie,outputs:re,parameters:de})}}(B,M,y,S,T),B.setPanelEdit(Y,X),M.editFunction=X):J?B.editCallback?(X=function(he,ge,ie,re,de){return e.U$Q(),function(){var ce;ce=he.editCallback(he,ge),e.e4i(),w.clearCanvas(he.chart.tempCanvas,he),w.Studies.studyDialog(he,k,ce,{inputs:ie,outputs:re,parameters:de})}}(B,M,y,S,T),Y.name!="chart"&&B.setPanelEdit(Y,X)):(ne="c",ne+="h",ne+="a",ne+="rt",X=function(he,ge,ie,re,de){return function(){w.clearCanvas(he.chart.tempCanvas,he),he.dispatch("studyPanelEdit",{stx:he,sd:ge,inputs:ie,outputs:re,parameters:de})}}(B,M,y,S,T),Y.name!=ne&&(B.setPanelEdit(Y,X),M.editFunction=X)):(X=function(he,ge,ie,re,de){return e.U$Q(),function(ce){var fe;fe="s",fe+="tudyOverlay",fe+="Edit",w.clearCanvas(he.chart.tempCanvas,he),he.dispatch(fe,{stx:he,sd:ge,inputs:ie,outputs:re,parameters:de,forceEdit:ce})}}(B,M,y,S,T),M.editFunction=X))}return B.changeOccurred(H),q||B.drawWithRange(),M},w.Studies.removeStudy=function(B,k){var y,S,T,_;e.U$Q(),y=B.panels[k.panel],S=y&&y.yAxis.name,(k.overlay||k.underlay)&&B.removeOverlay(k.name),T=B.panels[k.panel],k.attribution&&B.removeFromHolder(k.attribution.marker),B.cleanupRemovedStudy(k),T&&!B.checkForEmptyPanel(T)&&(S==k.name&&B.electNewPanelOwner(T),_=B.getYAxisByName(k.panel,k.name),_&&(_.name=_.studies[1]||_.renderers[0])),B.drawWithRange(),B.resizeChart()},w.Studies.getPanelFromFieldName=function(B,k){var y,S,T,_,L,H;if(y=w.Studies.getFieldInputs(k),!y.length||(S=B.layout.studies,!S))return null;T={};for(var P in S)for(var N in S[P].outputMap)_=S[P].inputs.Series,_&&_!=="series"&&(e.f4W(15),N+=e.D1M(_,"]"," [")),T[N.replace(/\u200c/g,"")]=S[P].panel;for(var v in B.chart.series)T[v]=B.chart.series[v].parameters.panel;e.e4i();for(var x=0;x<y.length;x++)if(L=k.inputs[y[x]],L&&(H=T[L.replace(/\u200c/g,"")],H))return H;return null},w.Studies.createLibraryHash=function(){return Object.keys(w.Studies.studyLibrary).join("|")},w.Studies.displayStudies=function(B,k,y){var S,T,_,L,H,P,N,v,x,M,D,Q,q,O,R,V,K;y&&(k.studyLibraryHash=w.Studies.createLibraryHash());function Y(X){var ne;return e.U$Q(),ne=X.color||X,ne==="auto"?B.defaultColor:ne}if(S=B.layout.studies,!!S){T={},T[k.name]=!0;for(var G in S)if(_=S[G],L=_.study,!!L&&!(_.disabled||_.signalData&&!_.signalData.reveal)&&(H=_.underlay||_.parameters&&_.parameters.underlayEnabled,!(y&&!H||!y&&H))){if(P=w.clone(L.renderer),P&&!(P instanceof Array)&&(P=[P]),N=B.panels[_.panel],N){if(N.chart!=k||N.hidden)continue;T[N.name]||(v=_.permanent||!B.manageTouchAndMouse,N.closeX?v&&(N.closeX.style.display="none"):N.close&&v&&(N.close.style.display="none"),N.edit&&v&&(N.edit.style.display="none"),T[N.name]=v)}else{B.currentlyImporting&&delete S[G];continue}if(x=_.chart.dataSegment,_.panel==_.parameters.chartName&&(!_.parameters||!_.parameters.panelName)&&(M=w.Studies.getPanelFromFieldName(B,_),M&&_.panel!=M&&(_.panel=M)),typeof L.seriesFN>"u"){if(P){_.overlay||w.Studies.createYAxis(B,_,x,N);for(var J=0;J<P.length;J++){D=P[J];for(var Z in _.outputMap)_.outputMap[Z]==D.field&&(D.field=Z);if(D.field){if(D.panel=_.panel,Q=D.binding,Q)for(var ee in Q)q="a",q+="uto",O=w.Studies.determineColor(_.outputs[Q[ee]]),O&&O!=q&&(D[ee]=O);D.yAxis=null,R=w.Renderer.produce(D.type,D),R.stx=B,R.attachSeries(null,D).draw()}}}else w.Studies.displaySeriesAsLine(B,_,x);N&&w.Studies.displayError(B,_)}else N&&(L.seriesFN&&L.seriesFN(B,_,x),w.Studies.displayError(B,_));V=Object.values(_.outputs),K=V.slice(0,3).map(Y),B.chart.legendColorMap[_.name]={color:K,display:_.name,components:Object.keys(_.outputs).slice(0,3)}}}},w.Studies.displayError=function(B,k,y){var S,T,_,L;if(S="c",S+="enter",T="N",e.U$Q(),T+="ot e",T+="nough data to compute ",!!k.error){if(_=y&&y.panel?y.panel:k.panel,L=k.error===!0?B.translateIf(T)+B.translateIf(k.study.name):B.translateIf(k.error),y&&(y.h!==S||y.v!=="bottom")){B.watermark(_,y);return}B.displayErrorAsWatermark(_,L)}},w.Studies.calculateMinMaxForDataPoint=function(B,k,y){e.e4i();var S,T,_;S=Number.MAX_VALUE,e.f4W(146);var L=e.D1M(12,18,5,275,0);T=Number.MAX_VALUE*L;for(var H=0;H<y.length;H++)_=y[H][k],!(_===null||typeof _>"u")&&(isNaN(_)||(S=Math.min(_,S),T=Math.max(_,T)));return{min:S,max:T}},w.Studies.getYAxisParameters=function(B,k){var y,S,T,_,L;return y={},S=B.layout.studies&&B.layout.studies[k.name],e.e4i(),S&&(T=S.study,T.yaxis||T.yAxisFN?y.noDraw=!0:(T.parameters&&T.parameters.excludeYAxis&&(y.noDraw=!0),y.ground=T.yAxis&&T.yAxis.ground,k&&(_="b",_+="ypass",T.range!=_&&(L="0 t",L+="o 100",T.range==L?y.range=[0,100]:T.range=="-1 to 1"?y.range=[-1,1]:T.range=="0 to max"?y.range=[0,Math.max(0,k.high)]:(T.centerline||T.centerline===0)&&(y.range=[Math.min(T.centerline,k.low),Math.max(T.centerline,k.high)])),y.range&&(e.f4W(49),k.low=y.range[e.D1M("0",0)],k.high=y.range[1]),S.min&&(k.min=S.min),S.max&&(k.max=S.max),S.parameters&&S.parameters.studyOverZonesEnabled&&(y.noDraw=!0)))),y},w.Studies.doPostDrawYAxis=function(B,k){var y,S,T,_,L;for(var H in B.layout.studies)y=B.layout.studies[H],S=B.panels[y.panel],!(!S||S.hidden)&&(T=y.getYAxis(B),T==k&&(_=y.study,k.name==y.name&&(_.yaxis&&_.yaxis(B,y),_.yAxisFN&&_.yAxisFN(B,y)),w.Studies.drawZones(B,y),y.error||(L=_.centerline,(L||L===0||L!==null&&k.highValue-1e-12>0&&k.lowValue+ +"0.000000000001"<0)&&w.Studies.drawHorizontal(B,y,null,L||0,k))))},w.Studies.displaySeriesAsLine=function(B,k,y){var S;if(y.length&&(S=B.panels[k.panel],!(!S||S.hidden)))for(var T in k.outputMap)w.Studies.displayIndividualSeriesAsLine(B,k,S,T,y)},w.Studies.displaySeriesAsHistogram=function(B,k,y){var S,T,_,L,H,P,N,v,x,M,D,Q;if(y.length&&(S=B.panels[k.panel],!!S&&!S.hidden)){T=[];for(var q in k.outputMap)_="obj",_+="e",_+="c",_+="t",L=k.outputs[k.outputMap[q]],L&&(H=.3,typeof L==_&&(H=L.opacity,L=L.color),P={field:q,fill_color_up:L,border_color_up:L,fill_color_down:L,border_color_down:L},k.underlay&&(P.opacity_up=P.opacity_down=H||.3),T.push(P));N=k.getYAxis(B),v=k.inputs,x=v.WidthFactor,k.study&&k.study.parameters&&(M="undefi",M+="n",M+="ed",D=k.study.parameters,typeof D.widthFactor!==M&&(x=D.widthFactor)),Q={name:k.name,type:v.HistogramType?v.HistogramType:"overlaid",panel:k.panel,yAxis:N,widthFactor:x||.5,bindToYAxis:!0,highlight:k.highlight},B.drawHistogram(Q,T)}},w.Studies.displayIndividualSeriesAsLine=function(B,k,y,S,T){var _,L,H,P,N,v,x,M,D,Q,q,O,R,V,K,Y;if(_="s",_+="t",_+="e",_+="p",y.height||(y.height=y.bottom-y.top),L=k.getContext(B),H=k.outputs[k.outputMap[S]],!!H){if(L.save(),typeof H=="string"&&(H={color:H,width:1}),L.lineWidth=H.width||1,P=H.color,P=="auto"&&(P=B.defaultColor),L.strokeStyle=P,N=H.pattern,L.setLineDash(w.borderPatternToArray(L.lineWidth,N)),L.lineDashOffset=0,v=0,x=k.study,M=k.getYAxis(B),v=B.decimalPlacesFromPriceTick(M.priceTick,M.idealTickSizePixels),(k.overlay||k.underlay)&&(v=null),(M.decimalPlaces||M.decimalPlaces===0)&&(v=M.decimalPlaces),D=null,k.parameters&&(D=k.parameters.label),Q=x.parameters,Q||(Q={}),q=Q.plotType==_,k.series)for(var G in k.series)O=k.series[G].parameters.type,O&&(e.f4W(83),q=e.E9E(O,"step"));Q.noLabels&&(D=!1),!k.noSlopes&&k.noSlopes!==!1&&(k.noSlopes=Q.noSlopes),!k.extendToEnd&&k.extendToEnd!==!1&&(k.extendToEnd=Q.extendToEnd),R=D||B.preferences.labels&&D!==!1,V=k.gaplines,V===!1&&(V="transparent"),K=k.inputs.Symbol,Y=V?B.getGapColorFunction(K,S,H,V):null,B.plotDataSegmentAsLine(S,y,{yAxis:M,skipTransform:B.panels[k.panel].name!=k.chart.name,label:R,labelDecimalPlaces:v,noSlopes:k.noSlopes,step:q,alignStepToSide:k.alignStepToSide,extendToEndOfLastBar:k.extendToEndOfLastBar,width:k.lineWidth,extendToEndOfDataSet:k.extendToEnd,gapDisplayStyle:V,highlight:k.highlight},Y),x.appendDisplaySeriesAsLine&&x.appendDisplaySeriesAsLine(B,k,T,S,y),L.restore()}},w.Studies.drawHorizontal=function(B,k,y,S,T,_){e.U$Q();var L,H,P;L=B.panels[k.panel],H=B.getBackgroundCanvas().context,L&&(_||(_=T.textStyle),P=B.pixelFromPrice(S,L,T),P>T.top&&P<T.bottom&&B.plotLine(L.left,L.right,P,P,_,"segment",H,!1,{opacity:_&&_.opacity?_.opacity:.5}))},w.Studies.displayHistogramWithSeries=function(B,k,y){var S;B.panels[k.panel],e.f4W(1),S=e.E9E(1,"0.5"),k.underlay&&(e.h7R(9),S=e.E9E("0.3",0)),w.Studies.createHistogram(B,k,y,!1,S),w.Studies.displaySeriesAsLine(B,k,y)},w.Studies.drawZones=function(B,k,y){var S,T,_,L,H,P,N,v,x,M,D,Q,q,O,R,V,K,Y,G,J,Z,ee,X,ne,se,oe,ae,Ae,he,ge,ie,re,de,ce,fe,me,ve,pe,be;if(S="str",S+="oke",T="bor",T+="der",_="a",_+="u",_+="t",_+="o",!(!k.parameters||!k.parameters.studyOverZonesEnabled)){if(L=parseFloat(k.parameters.studyOverSoldValue),H=parseFloat(k.parameters.studyOverBoughtValue),P=k.parameters.studyOverSoldColor,N=k.parameters.studyOverBoughtColor,v=k.zoneOutput,v||(v="Result"),x=w.Studies.determineColor(k.outputs[v]),(!x||x==_||w.isTransparent(x))&&(x=B.defaultColor),P||(P=x),(!P||P=="auto"||w.isTransparent(P))&&(P=B.defaultColor),N||(N=x),(!N||N=="auto"||w.isTransparent(N))&&(N=B.defaultColor),M=B.panels[k.panel],D=k.getYAxis(B),Q=D.displayBorder,B.axisBorders===!1&&(Q=!1),B.axisBorders===!0&&(Q=!0),D.width==="0"<<64&&(Q=!1),q=B.getYAxisCurrentPosition(D,M),e.f4W(83),O=e.E9E(q,"left"),R=D.justifyRight,!R&&R!==!1&&(B.chart.yAxis.justifyRight||B.chart.yAxis.justifyRight===!1?R=B.chart.yAxis.justifyRight:R=O),V=Math.round(D.left+(O?D.width:0))+.5,K=Q?3:0,e.e4i(),O&&(K=Q?-3:0),Y=B.getBackgroundCanvas().context,G=Y.fillStyle,Y.globalAlpha=+"0.2",B.startClip(M.name,!0),Y.beginPath(),J=Math.round(B.pixelFromPrice(H,M,D))-+"0.5",Y.strokeStyle=N,Y.moveTo(M.left,J),Y.lineTo(M.right,J),Y.stroke(),Y.closePath(),Y.beginPath(),Z=Math.round(B.pixelFromPrice(L,M,D))+.5,Y.strokeStyle=P,Y.moveTo(M.left,Z),Y.lineTo(M.right,Z),Y.stroke(),Y.closePath(),ee=new w.Plotter,ee.newSeries(T,S,B.canvasStyle("stx_grid_border")),Q&&(X="b",X+="or",X+="d",X+="er",ne="bo",ne+="rder",se=O?V+K:V-.5,oe=O?V+.5:V+K,ee.moveTo(ne,se,J),ee.lineTo(X,oe,J),ee.moveTo("border",se,Z),ee.lineTo("border",oe,Z)),Y.fillStyle=G,ae={skipTransform:B.panels[k.panel].name!=k.chart.name,panelName:k.panel,band:v+" "+k.name,yAxis:D,opacity:+"0.3"},!k.highlight&&B.highlightedDraggable&&(ae.opacity*=+"0.3"),w.preparePeakValleyFill(B,w.extend(ae,{threshold:H,direction:D.flipped?-1:1,color:N})),w.preparePeakValleyFill(B,w.extend(ae,{threshold:L,direction:D.flipped?1:-1,color:P})),Y.globalAlpha=1,!k.study||!k.study.yaxis){if(Q&&(Ae=Math.round(D.bottom)+.5,ee.moveTo("border",V,D.top),ee.lineTo("border",V,Ae),ee.draw(Y,"border")),he=k.chart.dynamicYAxis,ge=3,[H,L].forEach(function(Qe){var Ne,De;if(e.f4W(0),Ne=e.E9E(" ",Qe),De=he&&Math.max(D._width,k.chart.context.measureText(Ne).width+Math.abs(K)+ge),e.e4i(),he&&De>(D._dynamicWidth||D._width))throw D._dynamicWidth=De,B.calculateYAxisPositions(),B.endClip(),new Error("reboot draw");if(!he&&D._dynamicWidth)throw B.resetDynamicYAxis(),B.endClip(),new Error("reboot draw")}),re=D.getTitleEnabled&&D.getTitleEnabled(),D.width!==0){if(de="l",de+="e",de+="f",de+="t",ce="stx_y",ce+="ax",ce+="is",fe="stx_y",fe+="axis",B.canvasFont(fe,Y),B.canvasColor(ce,Y),Y.textAlign=R?"right":de,me=B.getCanvasFontSize("stx_yaxis")/("2"^0),re&&(e.h7R(1),D.fontHeight=e.E9E(2,me)),O){e.h7R(147);var Se=e.E9E(14,16797,20,60);if(ie=D.left+Se,R){e.f4W(148);var Ee=e.D1M(10,35,8,4);ie=D.left+D.width+K-Ee}}else{e.h7R(64);var Ie=e.D1M(5,2,15);ie=D.left+K+"3"*Ie,R&&(ie=D.left+D.width)}J>D.top+me&&(Y.fillStyle=N,Y.fillText(H,ie,J)),Z<D.bottom-me&&(Y.fillStyle=P,Y.fillText(L,ie,Z)),Y.fillStyle=G}re&&(ve="t",ve+="e",ve+="x",ve+="t",pe="stx",pe+="_ya",pe+="xis",be=D.textStyle||pe,ee.newSeries(ve,"fill",B.colorOrStyle(be)),B.drawTitleText(M,D,ee,ie),ee.draw(B.getBackgroundCanvas(B.chart).context,"text"))}B.endClip(),Y.globalAlpha=1,D.name==k.name&&(D.yAxisPlotter=new w.Plotter)}},w.Studies.createHistogram=function(B,k,y,S,T){var _,L,H,P,N,v,x,M,D,Q,q,O,R,V,K,Y,G,J,Z,ee,X,ne,se;_=B.panels[k.panel],L=k.getContext(B),H=k.getYAxis(B),B.startClip(_.name),e.h7R(118);var oe=e.D1M(6,36,18,58);P=B.layout.candleWidth-oe,P<2&&(P=1),N=B.pixelFromPrice(0,_,H),H.min>0&&(N=B.pixelFromPrice(H.min,_,H)),S&&(N=Math.floor(_.top+_.height/2)),v=k.name+"_hist",B.canvasColor("stx_histogram"),x=L.fillStyle,(T||T===0)&&(L.globalAlpha=T),!k.highlight&&B.highlightedDraggable&&(L.globalAlpha*=+"0.3"),M=null,D=null,Q=k.outputs;for(var ae=0;ae<y.length;ae++)if(q="Positive",q+=" ",q+="B",q+="ar",O="Dec",O+="reasing Bar",e.h7R(49),R=e.E9E("0",0),V=y[ae],!!V){if(B.cleanupGaps==="stretch")for(;y[ae+("1">>64)]&&(e.f4W(0),K=y[e.E9E(1,ae)][v],!(K||K===0||y[ae+1].futureTick));)R++,ae++;if(V.candleWidth&&(P=Math.floor(Math.max(1,V.candleWidth-2))),Y=Math.floor(B.pixelFromBar(ae-R,_.chart)-P/2),G=Math.floor(P+R*B.layout.candleWidth),M===null){e.f4W(149);var Ae=e.E9E(16,16,1,0);J=B.tickFromPixel(Y,_.chart)-Ae,J<0?M=D:M=B.pixelFromPrice(B.chart.dataSet[J][v],_,H)-N}else M=D;D=B.pixelFromPrice(V[v],_,H)-N,Z=w.Studies.determineColor(Q[O]),ee=w.Studies.determineColor(Q["Increasing Bar"]),X=w.Studies.determineColor(Q[q]),ne=w.Studies.determineColor(Q["Negative Bar"]),se=H.flipped,L.fillStyle=x,Z&&(se?D<M:D>M)?L.fillStyle=Z:ee&&(se?D>M:D<M)?L.fillStyle=ee:X&&(se?D>0:D<0)?L.fillStyle=X:ne&&(se?D<0:D>("0"^0))&&(L.fillStyle=ne),L.fillRect(Y,N,G,Math.floor(D))}L.globalAlpha=1,B.endClip()},w.Studies.prettify={Close:"C",Open:"O",High:"H",Low:"L",simple:"ma",exponential:"ema",triangular:"tma",VIDYA:"vdma",weighted:C,"welles wilder":"smma",true:"y",false:"n"},w.Studies.prettyRE=/^.{0,50}\((.{0,50})\).{0,50}$/,w.Studies.prettyDisplay=function(B){var k,y;if(k=w.Studies.prettyRE.exec(B),!k)return B;if(y=k[1],y){for(var S in w.Studies.prettify)y=y.replace(S,w.Studies.prettify[S]);B=B.replace(k["1">>64],y)}return B},w.Studies.getFieldInputs=function(B){e.e4i();var k,y;k=[],y=B.study.inputs;for(var S in y)["field","series"].includes(y[S])&&k.push(S);return k},w.Studies.initializeFN=function(B,k,y,S,T,_,L){var H,P,N,v,x,M,D,Q,q,O,R,V,K,Y,G,J,Z,ee,X;if(H="T",H+="o",H+="p",P="st",P+="rin",P+="g",y||(y={}),T||(T={}),y.id||(y.id=w.Studies.generateID(B,k,y,T.replaceID,T.display)),y.display||(y.display=y.id),N=new w.Studies.StudyDescriptor(y.id,k,y.id,y,S,T),y.Period&&(N.days=Math.max(1,parseInt(N.inputs.Period,10))),L){L.inputs||(L.inputs=N.study.inputs),v=-1642569193,x=-2096664687,M=2;for(var ne=1;e.R7z(ne.toString(),ne.toString().length,64588)!==v;ne++)+L.outputs&&(L.outputs=N.study.outputs),N.study=L,M+=2;e.V7r(M.toString(),M.toString().length,57277)!==x&&(L.outputs||(L.outputs=N.study.outputs),N.study=L)}else L=N.study;return L.display&&(y.display=L.display),typeof T.panelName==P&&(_=T.panelName),(_==y.id||_&&!B.panelExists(_))&&(N.underlay=N.overlay=!1),(_=="Own panel"||_=="New panel")&&(_=null),D=N.overlay||y.Overlay||N.overlay!==!1&&L.overlay,Q=N.underlay||y.Underlay||N.underlay!==!1&&L.underlay,D&&T.underlayEnabled&&(Q=!0),Q&&(N.underlay=!0),!Q&&B.chart.panel&&_==B.chart.panel.name&&(D=!0),D&&(N.overlay=!0),q=B.preferences.dragging,(q===!0||q&&q.study)&&(N.overlay=!0),_?T.panelName=_:!D&&!Q&&(_=y.id),T.calculateOnly?((D||Q)&&(B.panels[T.panelName]?N.panel=T.panelName:N.panel=w.Studies.getPanelFromFieldName(B,N)||T.chartName),N):(N.panel="",_?(O="non",O+="e",R="r",R+="ig",R+="ht",V=w.Studies.smartMovePanel(B,N.inputs,_,T.replaceID,T.panelName=="New panel"),V&&(N.panel=V.name),T.yaxisDisplayValue&&!["left",R,O,"shared","default"].includes(T.yaxisDisplayValue)&&!B.getYAxisByName(V,T.yaxisDisplayValue)&&(T.yaxisDisplayValue="default")):(D||Q)&&(N.panel=w.Studies.getPanelFromFieldName(B,N)||T.chartName),N.panel||(K=L.panelHeight||null,Y=T.yAxis||L.yAxis||{},Y.name=N.inputs.id,N.panel=N.inputs.id,B.createPanel(N.inputs.display,N.panel,K,T.chartName,new w.ChartEngine.YAxis(Y))),N.parameters&&N.parameters.panelName&&(N.parameters.panelName=N.panel),G=B.panels[N.panel],J=L?w.clone(L.yAxis):null,Z=T.yAxis||J,(Z||{}).ground&&(Z["initialMargin"+(Z.flipped?H:"Bottom")]=0),ee=w.Studies.smartCreateYAxis(B,G,N.inputs.id,T.yaxisDisplayValue,Z,w.Studies.getFieldInputs(N).map(function(se){return e.U$Q(),N.inputs[se]}).filter(function(se){return!["field","series"].includes(se)})),ee&&(X="n",X+="on",X+="e",ee.name==T.replaceID&&(ee.name=N.inputs.id),!T.replaceID&&ee.name===N.name&&B.calculateYAxisMargins(ee),ee.allowSharing=!T.yAxis&&!L.yAxis,ee.width=ee.position==X?0:w.ChartEngine.YAxis.prototype.width,T.yaxisDisplayValue=="shared"||T.yaxisDisplayValue=="default"?delete T.yaxisDisplayValue:(J&&w.ensureDefaults(ee,J),ee.name==N.name&&(!(J||{}).textStyle&&!T.yaxisDisplayColor||T.yaxisDisplayColor=="auto"?delete ee.textStyle:T.yaxisDisplayColor&&(ee.textStyle=w.colorToHex(T.yaxisDisplayColor)),(J||{}).justifyRight===void 0&&(ee.justifyRight=null),T.flippedEnabled!==void 0&&(ee.flipped=T.flippedEnabled))),ee!=G.yAxis?ee.displayGridLines=!1:ee!=B.chart.yAxis&&(ee.displayGridLines=B.displayGridLinesInStudies)),B.resetDynamicYAxis(),B.calculateYAxisPositions(),N)},w.Studies.smartMovePanel=function(B,k,y,S,T){var _,L,H,P;return L=k.id,S&&(_=B.layout.studies[S]),_&&(H=B.panels[_.panel],H&&H.yAxis.name==S&&((T||y!=S&&y!=L)&&!B.checkForEmptyPanel(H.name,!0,_)?(B.electNewPanelOwner(H),P=_.getYAxis(B),P.name==S&&B.electNewYAxisOwner(P)):(y==S||!B.panels[y])&&(L!=H.name&&B.modifyPanel(H,{name:L,display:k.display}),y=L))),B.panels[y]},w.Studies.smartCreateYAxis=function(B,k,y,S,T,_){var L,H,P,N,v,x;if(L="s",L+="hared",H=T||{},P=B.getYAxisByName(k,y),!S&&T&&(S=T.position),["left","right","none"].indexOf(S)>-1||S===void 0&&T)return!P||P.isShared(B)?(T instanceof w.ChartEngine.YAxis&&(y=T.name),w.extend(H,{name:y,position:S}),!P&&!B.currentlyImporting&&k!=k.chart.panel&&!k.yAxis.studies.length&&!k.yAxis.renderers.length?(P=k.yAxis,w.extend(P,H)):(N=P==k.yAxis,P&&(P.name=B.electNewYAxisOwner(P)),v=P||k.yAxis,v.lockScale&&w.extend(H,{zoom:v.zoom,scroll:v.scroll,lockScale:!0}),P=B.addYAxis(k,new w.ChartEngine.YAxis(H)),N&&(k.yAxis=P))):(T&&w.extend(P,T),P.position=S,P.name=y),P;if(S&&S!=="default"&&S!=="shared"&&S!==k.yAxis.name)return x=B.getYAxisByName(k,S),x&&P==k.yAxis&&!P.isShared(B)&&(k.yAxis=x),P&&P.isShared(B)?P.name=B.electNewYAxisOwner(P):P!==k.yAxis&&B.deleteYAxisIfUnused(k,P),x;if(e.e4i(),!S&&_&&_.length){B.deleteYAxisIfUnused(k,P);for(var M of _)if(P=B.getYAxisByField(k,M),P)return P;return null}return S==L||S==k.yAxis.name||k.yAxis.allowSharing&&(!P||P.allowSharing)?(P&&(P!==k.yAxis&&P.isShared(B)?P.name=B.electNewYAxisOwner(P):(delete P.position,B.deleteYAxisIfUnused(k,P))),B.resizeChart(),k.yAxis):(w.extend(H,{name:y}),P&&(P.name=B.electNewYAxisOwner(P),!P.name&&P!==k.yAxis)?(B.deleteYAxisIfUnused(k,P),null):(!P||P.name?P=B.addYAxis(k,new w.ChartEngine.YAxis(H)):(w.extend(P,H),delete P.position),P))},w.Studies.calculateVolume=function(B,k){var y,S,T;if(k.type=="vol undr"){if(!B||!B.chart.dataSet)return;y=B.layout,S=k.parameters.removeStudy,T=y.volumeUnderlay,y.volumeUnderlay=!S,T!=y.volumeUnderlay&&B.changeOccurred("layout"),S&&w.Studies.removeStudy(B,k)}k.outputMap={},k.outputMap.Volume=""},w.Studies.MA=function(B,k,y,S,T,_,L,H){var P,N;P="m",P+="a",e.f4W(116),e.D1M(6129,613,613),e.f4W(0);var v=e.D1M(6487,2163);e.h7R(0);var x=e.D1M(9084,826);e.e4i(),e.h7R(0);var M=e.E9E(1187,237);e.f4W(0);var D=e.E9E(924,54);N=new w.Studies.StudyDescriptor(T+(v!=2210?x==1540?M:D>+"873.04"?" ":462.62:!0)+L.name,P,L.panel),N.chart=L.chart,N.days=parseInt(k,10),N.startFrom=L.startFrom,H&&(N.subField=H),N.inputs={},B&&(N.inputs.Type=B),y&&(N.inputs.Field=y),S&&(N.inputs.Offset=parseInt(S,10)),w.Studies.calculateMovingAverage(_,N)},w.Studies.movingAverage={conversions:{ma:"simple",sma:"simple",ema:"exponential",tma:"triangular",vdma:"vidya",wma:"weighted",smma:b},translations:{simple:m,exponential:g,triangular:"Triangular",vidya:"VIDYA",weighted:"Weighted","welles wilder":"Welles Wilder"},typeMap:{ema:p,exponential:"Exponential",tma:"Triangular",triangular:A,vdma:f,vidya:d,wma:h,weighted:"Weighted",smma:"Exponential","welles wilder":"Exponential"}},w.Studies.movingAverageHelper=function(B,k){var y,S,T,_,L;if(y="opti",y+="ons",k==y){S={};for(var H in w.Studies.movingAverage.translations)S[H]=B.translateIf(w.Studies.movingAverage.translations[H]);return S}T=-2008505284,_=-607822954,L=2;for(var P=1;e.V7r(P.toString(),P.toString().length,88911)!==T;P++)return w.Studies.movingAverage.conversions[k];if(e.V7r(L.toString(),L.toString().length,55890)!==_)return w.Studies.movingAverage.conversions[k]},w.Studies.createVolumeChart=function(B,k,y){var S,T,_,L,H,P,N,v,x,M,D,Q,q,O,R,V,K,Y,G,J;S="Volum",S+="e",T="_",T+="d",T+="ow",T+="n",_="_",_+="u",_+="p",L="V",L+="olum",L+="e",H="_d",H+="own",P="_",P+="up",N="st",N+="x",N+="_volu",e.U$Q(),N+="me",v=k.panel,x=k.inputs,M=k.underlay,D=w.Studies.determineColor(k.outputs["Up Volume"]),Q=w.Studies.determineColor(k.outputs["Down Volume"]),q=M?"stx_volume_underlay":N,e.f4W(0),B.setStyle(e.D1M(P,q),"color",D),e.f4W(0),B.setStyle(e.E9E(H,q),"color",Q),O=k.volumeField||L,R=null,V=x.Series,V&&V!=="Primary"&&V!=="series"&&(R=O,O=V),K=[{field:O,subField:R,fill_color_up:B.canvasStyle(q+_).color,border_color_up:B.canvasStyle(q+"_up").borderLeftColor,opacity_up:B.canvasStyle(q+"_up").opacity,fill_color_down:B.canvasStyle(q+T).color,border_color_down:B.canvasStyle(q+"_down").borderLeftColor,opacity_down:B.canvasStyle(q+"_down").opacity,color_function:k.colorFunction}],Y=K[0],G=k.getYAxis(B),J={name:S,panel:v,yAxis:G,widthFactor:1,bindToYAxis:!0,highlight:k.highlight},w.extend(J,k.study.parameters),w.extend(J,k.parameters),B.colorByCandleDirection&&!k.colorFunction&&(Y.color_function=function(Z){var ee,X,ne;return ee=x.Series,ee&&ee!=="Primary"&&ee!=="series"&&(Z=Z[ee]),X=Z.Open,e.e4i(),ne=Z.Close,{fill_color:X>ne?Y.fill_color_down:Y.fill_color_up,border_color:X>ne?Y.border_color_down:Y.border_color_up}}),B.drawHistogram(J,K)},w.Studies.calculateStandardDeviation=function(B,k){var y,S,T,_,L,H,P,N,v,x,M,D,Q,q,O,R,V;if(y="fi",y+="el",y+="d",S=k.chart.scrubbed,S.length<k.days+1){k.error=!0,T=-1000531708,_=2126268146,e.f4W(56),L=e.D1M(0,"2");for(var K=1;e.R7z(K.toString(),K.toString().length,39185)!==T;K++)return;if(e.V7r(L.toString(),L.toString().length,31143)!==_)return}H=k.inputs.Field,(!H||H==y)&&(H="Close"),e.e4i(),P=k.inputs["Moving Average Type"],P||(P=k.inputs.Type),w.Studies.MA(P,k.days,H,k.inputs.Offset,"_MA",B,k),N=0,v=0,x=0,M=Number(k.inputs["Standard Deviations"]),M<0&&(M=2),D=k.name;for(var Y in k.outputs)e.h7R(15),D=e.E9E(" ",D,Y);for(Q=k.startFrom-1,O=0;Q>=0&&O<k.days;Q--,O++)q=w.Studies.getQuoteFieldValue(S[Q],H,k.subField),q===null&&(q=0),N+=Math.pow(q,2),v+=q;for(Q=k.startFrom;Q<S.length;Q++)if(R=S[Q],q=w.Studies.getQuoteFieldValue(R,H,k.subField),q===null&&(q=0),N+=Math.pow(q,2),v+=q,!(Q<k.days-1)&&(Q>=k.days&&(V=w.Studies.getQuoteFieldValue(S[Q-k.days],H,k.subField),V===null&&(e.h7R(49),V=e.D1M("0",0)),N-=Math.pow(V,2),v-=V),x=R["_MA "+k.name],x||x===0)){e.h7R(70);var G=e.E9E(8,1,1,8);e.f4W(73);var J=e.D1M(10,19,189,21);R[D]=Math.sqrt((N+k.days*Math.pow(x,G)-J*x*v)/k.days)*M}},w.Studies.calculateMovingAverage=function(B,k){var y,S,T,_,L,H,P,N,v,x,M,D,Q,q,O,R,V,K,Y,G;if(y="Clo",y+="s",y+="e",!!k.chart.scrubbed){if(S=k.inputs.Type,(S=="ma"||S=="sma"||!S)&&(S="simple"),T=w.Studies.movingAverage.typeMap,S in T)return _="calcu",_+="lateMovingAverage",w.Studies[_+T[S]](B,k);if(S!=="simple")return;L=k.chart.scrubbed,H=0,P=[],N=k.name;for(var J in k.outputs)e.h7R(15),N=e.D1M(" ",N,J);for(v=k.inputs.Field,(!v||v=="field")&&(v=y),e.U$Q(),x=parseInt(k.inputs.Offset,10),isNaN(x)&&(x=0),q=k.startFrom,O=x,M=k.startFrom-1;M>=0;M--)if(D=w.Studies.getQuoteFieldValue(L[M],v,k.subField),D!==null){if(O>0){O--,q=M;continue}if(P.length==k.days-1)break;H+=D,P.unshift(D)}for(P.length<k.days-1&&(P=[],q=0),R=[],M=q;M<L.length;M++){if(V=L[M],D=w.Studies.getQuoteFieldValue(V,v,k.subField),K=M+x>=0&&M+x<L.length,Y=K?L[M+x]:null,D===null){Y?Y[N]=null:M+x>=L.length&&(Q={},Q[N]=null,R.push(Q));continue}H+=D,P.push(D),P.length>k.days&&(H-=P.shift()),G=P.length==k.days?H/k.days:null,Y?Y[N]=G:M+x>=L.length&&(Q={},Q[N]=G,R.push(Q))}k.appendFutureTicks(B,R)}},w.Studies.calculateMovingAverageExponential=function(B,k){var y,S,T,_,L,H,P,N,v,x,M,D,Q,q,O,R,V,K,Y,G,J,Z;y="Clo",y+="se",S="fi",S+="el",S+="d",T=k.inputs.Type,_=k.chart.scrubbed,L=0,H=0,P=0,e.h7R(64);var ee=e.E9E(8,0,16);e.h7R(9);var X=e.D1M(9,8);N=ee/(k.days+X),(T==="welles wilder"||T==="smma")&&(N=1/k.days),v=null,x=k.name;for(var ne in k.outputs)e.h7R(15),x=e.D1M(" ",x,ne);for(M=k.inputs.Field,(!M||M==S)&&(M=y),D=parseInt(k.inputs.Offset,10),isNaN(D)&&(D=0),O=k.startFrom,R=D,Q=k.startFrom-1;Q>=0;Q--)if(q=_[Q][x],!(!q&&q!==0)){if(v===null&&(v=q),P=k.days,R<="0">>32)break;R--,O=Q}for(v===null&&(v=O=0),V=[],Q=O;Q<_.length;Q++)K=_[Q],q=w.Studies.getQuoteFieldValue(K,M,k.subField),Y=Q+D>=0&&Q+D<_.length,G=Y?_[Q+D]:null,q===null?J=null:(P==k.days-1?(L+=q,H=L/k.days,J=H):P<k.days-1?(L+=q,e.f4W(150),H=e.E9E(L,P,"1"),J=null):P===0?(L+=q,H=L,J=null):(v||v===0)&&(e.h7R(62),H=e.D1M(v,v,N,q),J=H),v=H,P++),G?G[x]=J:Q+D>=_.length&&(Z={},Z[x]=J,V.push(Z));k.appendFutureTicks(B,V)},w.Studies.calculateMovingAverageVIDYA=function(B,k){var y,S,T,_,L,H,P,N,v,x,M,D,Q,q,O,R,V,K,Y;y="m",y+="a",S="C",S+="l",S+="ose",k.inputs.Type,e.e4i(),T=k.chart.scrubbed,e.f4W(58);var G=e.D1M(9,9,79);e.f4W(27);var J=e.D1M(4,31,3,5);_=G/(k.days+J),L=null,H=k.name;for(var Z in k.outputs)e.f4W(15),H=e.E9E(" ",H,Z);for(P=k.inputs.Field,(!P||P=="field")&&(P=S),k.std=new w.Studies.StudyDescriptor(k.name,"sdev",k.panel),k.std.chart=k.chart,k.std.days=5,k.std.startFrom=k.startFrom,k.std.inputs={Field:P,"Standard Deviations":1,Type:"ma"},k.std.outputs={_STD:null},w.Studies.calculateStandardDeviation(B,k.std),w.Studies.MA(y,20,"_STD "+k.name,0,"_MASTD",B,k),N=parseInt(k.inputs.Offset,10),isNaN(N)&&(N=0),D=k.startFrom,Q=N,v=k.startFrom-1;v>=0;v--)if(x=T[v][H],!(!x&&x!=="0"<<32)){if(L===null&&(L=x),Q<=0)break;Q--,D=v}for(L===null&&(L=D=0),q=[],v=D;v<T.length;v++){if(O=T[v],x=w.Studies.getQuoteFieldValue(O,P,k.subField),R=v+N>="0"-0&&v+N<T.length,V=R?T[v+N]:null,x===null){V?V[H]=null:v+N>=T.length&&(M={},M[H]=null,q.push(M));continue}!O["_MASTD "+k.name]&&O["_MASTD "+k.name]!==0||(K=O["_STD "+k.name]/O["_MASTD "+k.name],e.h7R(151),Y=e.E9E(1,K,_,K,x,L,_),L=Y,v<k.days&&(Y=null),V?V[H]=Y:v+N>=T.length&&(M={},M[H]=Y,q.push(M)))}k.appendFutureTicks(B,q)},w.Studies.calculateMovingAverageTriangular=function(B,k){var y,S,T,_,L,H,P,N,v,x,M;y="T",y+="R",y+="I2",S="s",S+="imple",T=k.chart.scrubbed,_=k.inputs.Field,(!_||_=="field")&&(_="Close"),L=Math.ceil(k.days/2),w.Studies.MA("simple",L,_,0,"TRI1",B,k),k.days%2===("0"^0)&&L++,w.Studies.MA(S,L,"TRI1 "+k.name,0,y,B,k),H=k.name;for(var D in k.outputs)e.h7R(15),H=e.D1M(" ",H,D);P=parseInt(k.inputs.Offset,10),isNaN(P)&&(P=0),N=P;for(var Q=k.startFrom-("1">>32);Q>=0;Q--)if(v=w.Studies.getQuoteFieldValue(T[Q],H),v!==null){if(N>0){N--;continue}break}for(x=[],Q++;Q<T.length;Q++)Q+P>=0&&(Q+P<T.length?(e.h7R(0),T[e.E9E(P,Q)][H]=T[Q]["TRI2 "+k.name]):(M={},M[H]=T[Q]["TRI2 "+k.name],x.push(M)));k.appendFutureTicks(B,x)},w.Studies.calculateMovingAverageWeighted=function(B,k){var y,S,T,_,L,H,P,N,v,x,M,D,Q,q,O,R,V,K;y=k.chart.scrubbed,S=0,T=0,_=k.inputs.Field,(!_||_=="field")&&(_="Close"),e.h7R(0);var Y=e.E9E(1,0);e.h7R(0);var G=e.D1M(2,0);L=k.days*(k.days+Y)/G,H=k.name;for(var J in k.outputs)e.h7R(15),H=e.D1M(" ",H,J);for(P=parseInt(k.inputs.Offset,10),isNaN(P)&&(e.h7R(1),P=e.E9E(1,"0")),M=[],D=k.startFrom,Q=P,N=k.startFrom-1;N>="0"*1;N--)if(v=w.Studies.getQuoteFieldValue(y[N],_,k.subField),v!==null){if(Q>0){Q--,D=N;continue}if(M.length==k.days-1)break;M.unshift(v)}for(M.length<k.days-1&&(M=[],D=0),N="0"*1;N<M.length;N++){e.f4W(65);var Z=e.E9E(2432,11,17,4,17);S+=(N+Z)*M[N],T+=M[N]}for(q=[],N=D;N<y.length;N++){if(O=y[N],v=w.Studies.getQuoteFieldValue(O,_,k.subField),R=N+P>=0&&N+P<y.length,V=R?y[N+P]:null,v===null){V?V[H]=null:N+P>=y.length&&(x={},x[H]=null,q.push(x));continue}M.push(v),M.length>k.days&&(S-=T,T-=M.shift()),S+=M.length*v,T+=v,K=N<k.days-1?null:S/L,V?V[H]=K:N+P>=y.length&&(x={},x[H]=K,q.push(x))}k.appendFutureTicks(B,q)},w.Studies.calculateMultMA=function(B,k){var y,S,T,_,L;if(y=k.chart.scrubbed,S=[Number.MAX_VALUE],Object.keys(k.inputs).filter(P=>{var N;e.e4i(),N="Per",N+="i",N+="o",N+="d",e.f4W(9);var v=e.E9E(0,1);return P.indexOf(N)>v}).forEach((P,N)=>{e.f4W(0),e.U$Q(),S[e.D1M(1,N)]=k.inputs[P]}),e.U$Q(),y.length<Math.min(...S)+1){k.error=!0;return}T=k.inputs.Field,(!T||T=="field")&&(T="Close"),_=k.inputs["Moving Average Type"],_||(_="simple"),L=k.inputs.Offset||0;for(var H=1;H<S.length;H++)w.Studies.MA(_,S[H],T,L,"MA "+H,B,k)},w.Studies.calculateStudyATR=function(B,k){var y,S,T,_,L,H,P,N,v,x,M,D;if(y=k.chart.scrubbed,S=k.days,y.length<S+("1"^0)){k.error=!0;return}T=0,_=k.name;for(var Q=Math.max(k.startFrom,1);Q<y.length;Q++)if(L="A",L+="T",L+="R ",H="Sum True",H+=" ",H+="Range ",P="True ",P+="R",P+="ange",P+=" ",N="Sum",N+=" True",N+=" Range",N+=" ",v="S",v+="um True Range ",x=y[Q],e.f4W(9),M=y[e.E9E(Q,1)],D=x.trueRange,M[v+_]&&(e.f4W(0),T=M[e.D1M(_,N)]),T+=D,Q>S&&(e.h7R(9),T-=y[e.D1M(Q,S)][e.E9E(_,P,e.f4W(0))]),e.h7R(0),x[e.D1M(_,"True Range ")]=D,e.h7R(0),x[e.D1M(_,H)]=T,Q==S)e.h7R(0),x[e.D1M(_,L)]=e.D1M(T,S,e.h7R(10));else if(Q>S){e.h7R(6);var q=e.E9E(16,3,14);e.f4W(0),x[e.E9E(_,"ATR ")]=(M["ATR "+_]*(S-q)+D)/S}},e.U$Q(),w.Studies.displayPSAR2=function(B,k,y){var S,T,_,L,H,P,N,v,x,M,D,Q,q,O,R,V,K;S="sq",S+="uarew",S+="ave",T="P",T+="lot Type",_=B.panels[k.panel],L=k.getYAxis(B),H=L==B.chart.panel.yAxis,B.startClip(_.name),P=k.getContext(B),N=k.inputs[T]==S;for(var Y in k.outputs){e.h7R(25),e.D1M(4,20,9260,4614),e.h7R(126),e.D1M(49592,5509,10,18),e.h7R(152),e.E9E(9258,6,5,7,6),e.f4W(0);var G=e.D1M(262,22);e.h7R(0);var J=e.E9E(4017,365);e.f4W(9);var Z=e.D1M(4885,3908);e.f4W(17),e.D1M(158780,4,149436),v=Y+(("606"^0)>=G?J===Z?+"9.31e+3":" ":"E")+k.name,P.beginPath(),x=B.layout.candleWidth,M=Math.max(3,Math.floor(x/4));for(var ee=0;ee<y.length;ee++)D=y[ee],!(!D||w.Studies.getQuoteFieldValue(D,v)===null)&&(D.candleWidth&&(x=D.candleWidth),Q=B.getTransformedQuote(D,L),H&&Q&&(D=Q),q=B.pixelFromBar(ee,_.chart),N&&(e.f4W(10),q-=e.E9E(x,2)),O=B.pixelFromTransformedValue(D[k.referenceOutput?k.referenceOutput+" "+k.name:v],_,L),(ee==="0">>32||!y[ee-1]||w.Studies.getQuoteFieldValue(y[ee-1],v)===null)&&P.moveTo(q,O),N?(P.lineTo(q,O),e.f4W(0),P.lineTo(e.E9E(x,q),O),y[ee+1]&&(e.f4W(0),R=y[e.D1M(1,ee)],V=B.getTransformedQuote(R,L),H&&V&&(R=V),w.Studies.getQuoteFieldValue(R,v)===null&&(e.h7R(0),P.lineTo(e.E9E(x,q),B.pixelFromTransformedValue(R[k.referenceOutput?k.referenceOutput+" "+k.name:v],B.panels[k.panel],L))))):(e.h7R(52),P.moveTo(e.E9E(2,q,M),O),e.f4W(51),P.lineTo(e.E9E(M,q,2),O)));P.lineWidth=1,k.highlight&&(P.lineWidth=3),K=w.Studies.determineColor(k.outputs[Y]),K=="auto"&&(K=B.defaultColor),P.strokeStyle=K,!k.highlight&&B.highlightedDraggable&&(P.globalAlpha*=.3),P.stroke(),P.closePath(),P.lineWidth=1}B.endClip()},w.Studies.inputAttributeDefaultGenerator=function(B){return!B&&B!==0?{}:B.constructor==Number?Math.floor(B)==B?B>0?{min:1,step:1}:{step:"1"*1}:B>0?{min:0,step:.01}:{step:"0.01"*1}:(e.U$Q(),{})},w.Studies.getMarketOffset=function({stx:B,localQuoteDate:k,shiftToDateBoundary:y}){var S,T,_,L,H,P,N;S="U",S+="TC",arguments.length>1&&(B=arguments[0],e.f4W(49),k=arguments[e.D1M("1",0)],T=arguments[2]),_=B.chart.symbol,L=w.getFn("Market.Symbology.isForexMetal")(_),T===void 0&&(T=w.getFn("Market.Symbology.isForexSymbol")(_)),B.chart.market?H=T?"America/New_York":B.chart.market.market_tz:H=null,e.f4W(121);var v=e.E9E(60013,3e4,14,3e4);return e.e4i(),P=new Date(k.getTime()+k.getTimezoneOffset()*v),(!H||H.indexOf("UTC")==-1)&&(P=w.convertTimeZone(P,S,H)),N=new Date(P.getFullYear(),P.getMonth(),P.getDate(),P.getHours(),P.getMinutes(),P.getSeconds(),P.getMilliseconds()).getTime()-k.getTime(),y&&T&&(e.h7R(153),N+=e.E9E(60,60,1e3,L?6:7)),N},w.Studies.getStudyList=function(B){var k,y;k={},y={},e.U$Q(),w.extend(y,B);for(var S in w.Studies.studyLibrary)y[S]||(k[w.Studies.studyLibrary[S].name]=S);return k},w.Studies.determineColor=function(B){var k;if(k="ob",k+="j",k+="ec",k+="t",e.e4i(),B){if(typeof B===k)return B.color}else return null;return B},w.Studies.calculateGenericEnvelope=function(B,k,y,S,T,_){var L,H,P,N,v,x,M,D,Q,q,O,R,V;if(L="fi",L+="e",L+="ld",y||(y=0),_||(_=0),(!S||S==L)&&(S="Close"),T||(T=S),H=k.chart.scrubbed,!!H){P=k.inputs.Field;for(var K=k.startFrom;K<H.length;K++)N=" Media",N+="n ",v=" Bottom",v+=" ",x=" ",x+="Top ",M="Clos",M+="e",D=H[K],D&&(Q=w.Studies.getQuoteFieldValue(D,P),q=Q??w.Studies.getQuoteFieldValue(D,M),O=w.Studies.getQuoteFieldValue(D,T,k.subField),R=w.Studies.getQuoteFieldValue(D,S),R!==null&&(e.f4W(154),V=e.D1M(y,_,O),e.h7R(0),D[k.type+x+k.name]=e.D1M(V,R),e.f4W(9),D[k.type+v+k.name]=e.D1M(R,V),D[k.type+N+k.name]=R,D["Bandwidth "+k.name]=R?("200"|64)*V/R:0,e.h7R(155),D["%b "+k.name]=e.E9E(50,R,1,q,V)))}},w.Studies.displayChannel=function(B,k,y){var S,T,_,L,H,P;if(S="Cha",S+="nnel F",S+="il",e.U$Q(),S+="l",k.inputs[S]){T={panelName:k.panel};for(var N in k.outputs)if(_="L",_+="o",_+="w",L="Bot",L+="tom",H=N.split(" ").pop(),H=="Top"||H=="High")T.topBand=N+" "+k.name;else if(H==L||H==_){e.f4W(70);var v=e.E9E(1202,2,4820,4808);e.f4W(15);var x=e.D1M(4,6,9386);e.h7R(0),e.D1M(7,7653),e.f4W(116);var M=e.E9E(2019,3033,3);e.h7R(106),e.D1M(8,9780,9766,9766,1),e.f4W(55);var D=e.D1M(19,820,6535,2);e.f4W(9);var Q=e.E9E(11280,7520);T.bottomBand=N+(285.89<v?x===M?D:" ":Q)+k.name}else(H=="Median"||H=="Channel")&&(T.color=w.Studies.determineColor(k.outputs[N]));k.parameters&&k.parameters.opacity?T.opacity=k.parameters.opacity:T.opacity=+"0.2",P=B.panels[k.panel],T.skipTransform=P.name!=k.chart.name,T.yAxis=k.getYAxis(B),!k.highlight&&B.highlightedDraggable&&(e.h7R(1),T.opacity*=e.D1M(1,"0.3")),w.prepareChannelFill(B,T)}w.Studies.displaySeriesAsLine(B,k,y)},w.Studies.initAnchorHandle=function(B,k){var y,S,T,_,L,H;y=k.handle,!y&&(B.controls.anchorHandles||(B.controls.anchorHandles={}),S=B.controls,e.e4i(),T=S.anchorHandles,_=S.chartControls,T[k.uniqueId]?(L=T[k.uniqueId],y=L.handle):(H="d",H+="i",H+="v",y=document.createElement(H),y.classList.add("stx_anchor_handle"),y.setAttribute(k.uniqueId,""),T[k.uniqueId]={handle:y,sd:k},_&&_.parentElement.appendChild(y)),k.anchorHandle=y)},w.Studies.removeAnchorHandle=function(B,k){var y,S;y=(B.controls.anchorHandles||{})[k.uniqueId]||{},S=y.handle,S&&(delete B.controls.anchorHandles[k.uniqueId],S.remove())},w.Studies.repositionAnchor=function(B,k){var y,S,T,_,L,H,P,N,v,x,M,D,Q,q,O,R,V;if(y=k.currentAnchorTime,S=k.uniqueId,T=B.repositioningAnchorSelector||{},_=T.hoverTick,L=B.chart,H=L.dataSet,P=L.market,B.controls.anchorHandles||(B.controls.anchorHandles={}),N=B.controls.anchorHandles,v={},_||_===0){if(x="YYYY-",x+="MM-d",x+="d",M="Anchor Da",M+="te",_>=H.length||(D=!k.inputs.hasOwnProperty(M),Q=H[_].DT,q=w.Studies.getMarketOffset({stx:B,localQuoteDate:Q,shiftToDateBoundary:!0}),y&&D&&new Date(Q.getTime()+q).getDate()!==new Date(y.getTime()+q).getDate()))return;P.market_def&&P.market_def.market_tz&&(Q=new U.Date(Q,P.market_def.market_tz)),O=!D&&w.dateToStr(Q,x),R=w.dateToStr(Q,"HH:mm:ss"),v={"Anchor Time":R},O&&(v["Anchor Date"]=O)}else return;V=w.Studies.replaceStudy(B,k.inputs.id,k.type,Object.assign(k.inputs,v),k.outputs,k.parameters,k.panel),N[S]&&(N[S].sd=V),B.draw()},w.Studies.cancelRepositionAnchor=function(B){var k,y,S,T;k=B.repositioningAnchorSelector||{},y=k.sd,S=k.tapToAdd,y&&(S&&w.Studies.removeStudy(B,y),B.repositioningAnchorSelector=null,e.e4i(),T=B.controls.anchorHandles,T&&T[y.uniqueId]&&(T[y.uniqueId].highlighted=!1,w.Studies.displayAnchorHandleAndLine(B,y,B.chart.dataSegment)),B.draw())},w.Studies.displayAnchorHandleAndLine=function(B,k,y){var S,T,_,L,H,P,N,v,x,M,D,Q,q,O,R,V,K,Y,G,J,Z,ee,X,ne,se,oe,ae,Ae,he,ge,ie,re,de,ce,fe,me,ve,pe,be,Se,Ee,Ie,Qe,Ne,De,Re,_e,Ue,He,Pe,We,Ge,je,Je,Oe,nt,Ze,Le,et,Ye,Ve,ct,ot,dt,xt,Ke,At,st,it,rt,$e,yt,qe,ft,ze,pt,wt,vt,Dt,Pt,Ht,Ft;if(S="Market.Symbology.isF",S+="o",S+="rexSymbol",!(k.signalData&&!k.signalData.reveal)&&!(!y||!y[0])&&(T=(B.repositioningAnchorSelector||{}).sd===k,_=T&&B.repositioningAnchorSelector,L=_.hoverTick,H=B.chart,P=B.panels,N=B.cy,v=H.market,x=v===void 0?{}:v,M=H.symbol,D=P[k.panel],Q=D.top,q=D.right,O=D.left,R=D.height,V=D.subholder,K=D.yAxis.bottom,Y=k.inputs,G=k.anchorHandle,J=k.currentAnchorTime,Z=k.lineWidth,ee=Z===void 0?1:Z,X=B.canvasStyle("stx_anchor_handle"),ne=X.backgroundColor,se=X.borderLeftColor,oe=!Y["Anchor Date"],ae=w.getFn(S)(M),Ae=(L||L===0)&&(B.chart.dataSet[L]||{}).DT,he=w.Studies.getMarketOffset({stx:B,localQuoteDate:y[y.length-1].DT,shiftToDateBoundary:!0}),ge=J&&Ae&&oe&&new Date(Ae.getTime()+he).getDate()!==new Date(J.getTime()+he).getDate(),ie=B.controls,re=ie.floatDate,de=ie.anchorHandles,ce=de===void 0?{}:de,fe=ce[k.uniqueId]||{},me=fe.highlighted,ve=x.getNormalOpen().split(":").map(_t=>parseInt(_t)),pe=Oi(ve,2),be=pe[0],Se=pe[1],Ee=_t=>{var St;return St=_t?B.tickFromDate(_t,null,null,!0):L,[B.pixelFromTick(St,H),St]},Ie={y0:Q,y1:K,type:"line",confineToPanel:D},Qe=Ee(),Ne=Oi(Qe,1),e.U$Q(),De=Ne[0],De&&(Re="vi",Re+="sibility",De-=.5,B.plotLine(Object.assign(Ie,{x0:De,x1:De,color:ge?se:ne,pattern:[6,6],lineWidth:1,opacity:ge?+"0.5":1})),w.efficientDOMUpdate(re.style,Re,""),B.updateChartAccessories()),G)){if(_e="soli",_e+="d",Ue="Anchor Ti",Ue+="me",He=oe?new Date(y[y.length-1].DT):w.strToDate(Y["Anchor Date"]),x.market_def&&x.market_def.market_tz&&(He=new U.Date(He,x.market_def.market_tz)),oe||(Pe=(Y["Anchor Date"]||"").split("-"),We=Oi(Pe,3),Ge=We[0],je=We[1],Je=We[2],Je||(Oe=Ge.match(/([0-9]{4})([0-9]{2})([0-9]{2})/),nt=Oi(Oe,4),Ge=nt[1],je=nt[2],e.f4W(9),Je=nt[e.D1M("3",0)]),e.h7R(9),He.setFullYear(Ge,e.E9E(je,1),Je)),Ze=(Y[Ue]||"").split(":"),Le=Oi(Ze,3),et=Le[0],Ye=et===void 0?0:et,Ve=Le[1],ct=Ve===void 0?0:Ve,e.f4W(37),ot=Le[e.D1M(2,"2")],dt=ot===void 0?0:ot,!ct&&ct!==0&&(xt=Ye.match(/([0-9]{2})([0-9]{2})([0-9]{2})/),Ke=Oi(xt,4),Ye=Ke[1],ct=Ke[2],dt=Ke[3]),He.setHours(Ye,ct,dt),At=ae&&(He.getHours()>be||He.getHours()===be&&He.getMinutes()>=Se),At&&He.setDate(He.getDate()-1),st=Ee(He),it=Oi(st,2),rt=it[0],$e=it[1],yt=new Date(He),yt.setHours(...x.getNormalClose().split(":")),At&&yt.setDate(yt.getDate()+1),qe=yt&&Ee(yt)||[],ft=Oi(qe,1),ze=ft[0],oe&&(rt>q||ze>q)){if(pt=new Date(He),x)do pt.setDate(pt.getDate()-1);while(!x.isMarketDate(pt));wt=Ee(pt),vt=Oi(wt,2),Dt=vt[0],Pt=vt[1],Dt>O&&(He=pt,rt=Dt,$e=Pt)}if(e.f4W(9),rt-=e.E9E("0.5",0),B.plotLine(Object.assign(Ie,{x0:rt,x1:rt,color:ne,pattern:_e,lineWidth:ee,opacity:me||k.highlight?1:+"0.5"})),fe.currentPixel=rt,me){G.style.display="",e.h7R(156);var kt=e.E9E(4,20,2,6);e.f4W(118);var ht=e.E9E(4,8,16,24);e.f4W(118);var Vt=e.E9E(15,19,11,37);G.style.height=Math.max(Math.min(kt,R/ht),Vt)+"px",Ht=G.getBoundingClientRect(),Ft=Math.max(Math.min(N-Ht.height/2,K-3-Ht.height),Q+3),e.h7R(0),G.style.top=e.E9E("px",Ft),e.f4W(9);var Ot=e.D1M(12,10);G.style.left=(L||L===0?De:rt)-Ht.width/Ot+"px",V.style.cursor="ew-resize"}else G.style.display="none",V.style.cursor="auto";k.currentAnchorTime=He,k.currentAnchorTick=$e}},w.Studies.assignAliasesToStudies=function(B){var k,y,S,T;k=this,y=2072985465,S=2093499220,T=2;for(var _=1;e.R7z(_.toString(),_.toString().length,92310)!==y;_++)Object.entries(B).forEach(([L,H])=>(e.U$Q(),(k.studyLibrary[L]&&{}).alias=H)),T+=2;e.R7z(T.toString(),T.toString().length,61359)!==S&&Object.entries(B).forEach(([L,H])=>(e.e4i(),(k.studyLibrary[L]||{}).alias=H)),Object.entries(B).forEach(([L,H])=>(k.studyLibrary[L]||{}).alias=H)},w.Studies.studyScriptLibrary={},w.Studies.studyLibrary=w.Studies.studyLibrary||{},w.extend(w.Studies.studyLibrary,{ma:{name:"Moving Average",overlay:!0,calculateFN:w.Studies.calculateMovingAverage,inputs:{Period:"50"^0,Field:"field",Type:u,Offset:0},outputs:{MA:"#FF0000"}},"STD Dev":{name:"Standard Deviation",calculateFN:w.Studies.calculateStandardDeviation,inputs:{Period:"14"*1,Field:l,"Standard Deviations":2,"Moving Average Type":"ma"},attributes:{"Standard Deviations":{min:.1,step:.1}}},"True Range":{name:"True Range",calculateFN:w.Studies.calculateStudyATR,inputs:{},outputs:{"True Range":c}},volume:{name:o,range:"0 to max",yAxis:{ground:!0},seriesFN:w.Studies.createVolumeChart,calculateFN:w.Studies.calculateVolume,inputs:{Series:a},attributes:{Series:{hidden:function(B){return e.U$Q(),!Object.keys(B.chart.series).length}}},outputs:{"Up Volume":i,"Down Volume":r}},MACross:{name:"Moving Average Cross",overlay:!0,calculateFN:w.Studies.calculateMultMA,inputs:{"MA 1 Period":20,"MA 2 Period":50,"MA 3 Period":200,Field:"field","Moving Average Type":n,Offset:0},outputs:{"MA 1":s,"MA 2":t,"MA 3":"#f4932f"}}})};$n=E=>{var e;ke.e4i(),e=typeof _CIQ<"u"?_CIQ:E.CIQ,e.ChartEngine.Driver?(e.ChartEngine.Driver.Lookup=function(t){},e.ChartEngine.Driver.Lookup.prototype.acceptText=function(t,s,n,r){ke.U$Q(),this.cb}):console.error("symbolLookupBase feature requires first activating quoteFeed feature.")};Tl=E=>{var e=ke,t;e.e4i(),t=typeof _CIQ<"u"?_CIQ:E.CIQ,t.ThemeHelper=t.ThemeHelper||function(s){var n,r,i,a,o,c,l,u,h,d,f;n="Candl",n+="e/B",n+="ar",r="stx_mounta",r+="in_c",r+="hart",i="Ca",i+="n",i+="dl",i+="e/Bar",a="stx_cand",a+="le_up",o="Ca",o+="ndle/B",o+="ar",c="Ca",c+="ndl",c+="e/",c+="Bar",l="Candle",l+="/",l+="Bar",u="Cand",u+="le",u+="/",u+="Bar",h="s",h+="tx_grid_da",h+="r",h+="k",this.params=s,d=s.stx,f="#",f+="FF",f+="FF",f+="FF",d.chart.container&&(f=getComputedStyle(d.chart.container).backgroundColor,t.isTransparent(f)&&(f=d.containerColor)),this.settings.chart.Background.color=t.hexToRgba(f),this.settings.chart["Grid Lines"].color=t.hexToRgba(d.canvasStyle("stx_grid").color),this.settings.chart["Grid Dividers"].color=t.hexToRgba(d.canvasStyle(h).color),this.settings.chart["Axis Text"].color=t.hexToRgba(d.canvasStyle("stx_xaxis").color),e.U$Q(),this.settings.chartTypes["Candle/Bar"].up.color=t.hexToRgba(d.canvasStyle("stx_candle_up").color),this.settings.chartTypes[u].down.color=t.hexToRgba(d.canvasStyle("stx_candle_down").color),this.settings.chartTypes[l].up.wick=t.hexToRgba(d.canvasStyle("stx_candle_shadow_up").color),this.settings.chartTypes["Candle/Bar"].down.wick=t.hexToRgba(d.canvasStyle("stx_candle_shadow_down").color),this.settings.chartTypes[c].even.wick=t.hexToRgba(d.canvasStyle("stx_candle_shadow_even").color),this.settings.chartTypes[o].up.border=t.hexToRgba(d.canvasStyle(a).borderLeftColor),this.settings.chartTypes["Candle/Bar"].down.border=t.hexToRgba(d.canvasStyle("stx_candle_down").borderLeftColor),t.isTransparent(d.canvasStyle("stx_candle_up").borderLeftColor)&&(this.settings.chartTypes[i].up.border=null),t.isTransparent(d.canvasStyle("stx_candle_down").borderLeftColor)&&(this.settings.chartTypes["Candle/Bar"].down.border=null),this.settings.chartTypes.Line.color=t.hexToRgba(d.canvasStyle("stx_line_chart").color),this.settings.chartTypes.Mountain.color=t.hexToRgba(d.canvasStyle("stx_mountain_chart").backgroundColor),this.settings.chartTypes.Mountain.basecolor=t.hexToRgba(d.canvasStyle(r).color),this.settings.chartTypes[n].even.color||(this.settings.chartTypes["Candle/Bar"].even.color=this.settings.chartTypes["Candle/Bar"].even.wick),this.settings.chartTypes["Candle/Bar"].even.border||(this.settings.chartTypes["Candle/Bar"].even.border=this.settings.chartTypes["Candle/Bar"].even.wick)},t.ThemeHelper.prototype.settings={chart:{Background:{color:null},"Grid Lines":{color:null},"Grid Dividers":{color:null},"Axis Text":{color:null}},chartTypes:{"Candle/Bar":{up:{color:null,wick:null,border:null},down:{color:null,wick:null,border:null},even:{color:null,wick:null,border:null}},Line:{color:null},Mountain:{color:null,basecolor:null}}},t.ThemeHelper.prototype.update=function(s){var n,r,i,a,o;n="col",n+="or",r="stx",r+="_xa",r+="x",r+="is",i="Grid Di",i+="viders",s||(s=this.params.stx),a={stx_candle_up:{stx_candle_up:!0,stx_bar_up:!0,stx_hollow_candle_up:!0,stx_line_up:!0,stx_baseline_up:!0},stx_candle_down:{stx_candle_down:!0,stx_bar_down:!0,stx_hollow_candle_down:!0,stx_line_down:!0,stx_baseline_down:!0},stx_candle_even:{stx_candle_even:!0,stx_bar_even:!0,stx_hollow_candle_even:!0},stx_shadow_up:{stx_candle_shadow_up:!0},stx_shadow_down:{stx_candle_shadow_down:!0},stx_shadow_even:{stx_candle_shadow_even:!0},stx_line_chart:{stx_bar_chart:!0,stx_line_chart:!0},stx_grid:{stx_grid:!0},stx_grid_dark:{stx_grid_dark:!0},stx_xaxis:{stx_xaxis_dark:!0,stx_xaxis:!0,stx_yaxis:!0,stx_yaxis_dark:!0,stx_grid_border:!0},stx_mountain_chart:{stx_mountain_chart:!0},stx_market_session:{stx_market_session:!0}},s.chart.container.style.backgroundColor=this.settings.chart.Background.color,s.defaultColor="",c("stx_grid","color",this.settings.chart["Grid Lines"].color);function c(l,u,h){var d;d=a[l];for(var f in d)s.setStyle(f,u,h)}c("stx_grid_dark","color",this.settings.chart[i].color),c(r,n,this.settings.chart["Axis Text"].color),o=this.settings.chartTypes["Candle/Bar"],o.even||(o.even={color:null,wick:t.hexToRgba(s.canvasStyle("stx_candle_shadow_even").color),border:null}),c("stx_candle_up","color",o.up.color),c("stx_candle_down","color",o.down.color),c("stx_candle_even","color",o.even.color),c("stx_shadow_up","color",o.up.wick),c("stx_shadow_down","color",o.down.wick),c("stx_shadow_even","color",o.even.wick),s.setStyle("stx_candle_up","borderLeftColor",o.up.border),s.setStyle("stx_candle_down","borderLeftColor",o.down.border),c("stx_line_chart","color",this.settings.chartTypes.Line.color),s.setStyle("stx_mountain_chart","borderTopColor",t.hexToRgba(this.settings.chartTypes.Mountain.color,1)),s.setStyle("stx_mountain_chart","backgroundColor",t.hexToRgba(this.settings.chartTypes.Mountain.color,.5)),s.setStyle("stx_mountain_chart","color",t.hexToRgba(this.settings.chartTypes.Mountain.basecolor,.01)),s.draw()},t.ChartEngine.prototype.setThemeSettings=function(s){var n,r,i,a,o,c,l,u;n="t",n+="h",n+="eme",r=t.getFromNS(this,"uiContext.topNode.multiChartContainer"),i=this.chart.breakpoint,r?(this.styles=r.styles[i]||{},r.styles[i]=this.styles):this.styles={},a=1533898388,o=1459298338,c=2;for(var h="1"|1;e.R7z(h.toString(),h.toString().length,64349)!==a;h++)this.chart.container.style.backgroundColor="",this.defaultColor="",c+=2;e.V7r(c.toString(),c.toString().length,89548)!==o&&(this.chart.container.style.backgroundColor="",this.defaultColor=""),s&&(l=new t.ThemeHelper({stx:this}),l.settings=s,l.update()),this.updateListeners(n),this.changeOccurred("theme"),this.displayInitialized&&(u="t",u+="he",u+="me",this.headsUpHR(),this.clearPixelCache(),this.updateListeners(u),this.draw())}};Ml=E=>{var e,t,s,n,r,i,a,o,c;e="N",e+="o",e+="v",t="m",t+="ax",s="M",s+="ar",n="las",n+="tS",n+="u",n+="n",r="O",r+="ct",i="As",i+="ia/Tokyo",a="u",a+="nd",a+="e",a+="fined",o=typeof _CIQ!==a?_CIQ:E.CIQ,c=typeof _timezoneJS<"u"?_timezoneJS:E.timezoneJS,o.timeZoneMap={"(UTC-05:00) Eastern Time (US and Canada)":"America/New_York","(UTC) Greenwich Mean Time, Reykjavik":"UTC","(UTC) Lisbon, London":"Europe/London","(UTC+09:00) Osaka, Sapporo, Tokyo":i},(function(){var l=ke,u,h,d,f,A,p,g,m,b,C,F,w,U,B,k,y,S,T,_;u="O",u+="c",u+="to",u+="ber",h="F",h+="ebruary",d="J",d+="a",d+="nu",d+="ary",f="Frida",f+="y",A="Wed",A+="n",A+="esda",A+="y",p="Tuesd",p+="a",p+="y",g="0",g+=".4.1",g+="1",m="u",m+="ndefined",b=typeof window!==m?window:null,C=b||(typeof global<"u"?global:{}),c.VERSION=g,c.stub=!1,F=C.$||C.jQuery||C.Zepto,w=C.fleegix,U=c.Days=["Sunday","Monday",p,A,"Thursday",f,"Saturday"],B=c.Months=[d,h,"March","April","May","June","July","August","September",u,"November","December"],k={},y={},S={};for(var L=0;L<B.length;L++)k[B[L].substr(0,3)]=L;for(L="0"^0;L<U.length;L++)y[U[L].substr(0,3)]=L;T=function(H,P){var N,v,x;if(typeof H!="number")throw l.f4W(0),l.D1M(H,"not a number: ");if(l.h7R(94),N=l.D1M(1e3,H),v=H.toString(),x=v.length,N&&x>P)return l.f4W(9),v.substr(l.E9E(x,P),x);for(v=[v];x<P;)v.unshift("0"),x++;return v.join("")},_=function(H){var P,N;if(H){if(!H.url)throw new Error("URL must be specified");if("async"in H||(H.async=!0),(!w||typeof w.xhr>"u")&&(!F||typeof F.ajax>"u"))throw P="Please use the Fleegix.js XHR module, jQuery ajax, Zepto ajax, or define ",P+="your own transport mechanism for download",P+="ing zone fi",P+="les.",new Error(P);return l.e4i(),H.async?w&&w.xhr?w.xhr.send({url:H.url,method:"get",handleSuccess:H.success,handleErr:H.error}):F.ajax({url:H.url,dataType:"text",method:"GET",error:H.error,success:H.success}):(N="t",N+="e",N+="x",N+="t",w&&w.xhr?w.xhr.doReq({url:H.url,async:!1}):F.ajax({url:H.url,async:!1,dataType:N}).responseText)}},c.ruleCache={},c.Date=function(){var H,P,N,v,x,M,D,Q,q;if(H="s",H+="tri",H+="n",H+="g",P="[object Arr",P+="ay]",this===c)throw N="timezoneJ",N+="S.Date object must be constructed with 'new'",N;switch(v=Array.prototype.slice.apply(arguments),x=null,M=null,D=[],Q=!1,Object.prototype.toString.call(v[0])===P&&(v=v[0]),typeof v[v.length-1]=="string"&&(Q=Date.parse(v[v.length-1].replace(/GMT[+-]\d+/,"")),(isNaN(Q)||Q===null)&&(M=v.pop())),q=!1,v.length){case 0:x=new Date;break;case 1:x=new Date(v[0]),typeof v[0]==H&&v[0].search(/[+-][0-9]{4}/)==-1&&v[0].search(/Z/)==-1&&v[0].search(/T/)==-1&&(q=!0);break;case 2:x=new Date(v[0],v[1]),q=!0;break;default:for(var O=0;O<7;O++)D[O]=v[O]||0;l.h7R(49),x=new Date(D[0],D[1],D[2],D[l.D1M("3",0)],D[4],D[5],D[6]),q=!0;break}if(isNaN(x.getTime()))throw new Error("Invalid date");this._useCache=!1,this._tzInfo={},l.f4W(49),this._day=l.D1M("0",0),l.h7R(9),this.year=l.E9E("0",0),this.month=0,this.date=0,this.hours=0,this.minutes=0,l.h7R(9),this.seconds=l.E9E("0",0),this.milliseconds=0,this.timezone=M||null,q?this.setFromDateObjProxy(x):this.setFromTimeProxy(x.getTime(),M)},o.extend(c.Date.prototype,{getDate:function(){return this.date},getDay:function(){return this._day},getFullYear:function(){return l.e4i(),this.year},getMonth:function(){return this.month},getYear:function(){l.e4i(),l.f4W(130);var H=l.D1M(4,20900,20900,4,1899);return this.year-H},getHours:function(){return l.e4i(),this.hours},getMilliseconds:function(){return this.milliseconds},getMinutes:function(){return this.minutes},getSeconds:function(){return this.seconds},getUTCDate:function(){return this.getUTCDateProxy().getUTCDate()},getUTCDay:function(){return this.getUTCDateProxy().getUTCDay()},getUTCFullYear:function(){return this.getUTCDateProxy().getUTCFullYear()},getUTCHours:function(){return this.getUTCDateProxy().getUTCHours()},getUTCMilliseconds:function(){return l.U$Q(),this.getUTCDateProxy().getUTCMilliseconds()},getUTCMinutes:function(){return l.e4i(),this.getUTCDateProxy().getUTCMinutes()},getUTCMonth:function(){return l.e4i(),this.getUTCDateProxy().getUTCMonth()},getUTCSeconds:function(){return this.getUTCDateProxy().getUTCSeconds()},getTime:function(){l.f4W(157);var H=l.E9E(3,117,2,19,9);return this._timeProxy+this.getTimezoneOffset()*H*1e3},getTimezone:function(){return l.e4i(),this.timezone},getTimezoneOffset:function(){return this.getTimezoneInfo().tzOffset},getTimezoneAbbreviation:function(){return l.U$Q(),this.getTimezoneInfo().tzAbbr},getTimezoneInfo:function(){var H;return this._useCache?this._tzInfo:(this.timezone?H=this.timezone==="Etc/UTC"||this.timezone==="Etc/GMT"?{tzOffset:0,tzAbbr:"UTC"}:c.timezone.getTzInfo(this._timeProxy,this.timezone):H={tzOffset:this.getLocalOffset(),tzAbbr:null},this._tzInfo=H,this._useCache=!0,H)},getUTCDateProxy:function(){var H;return l.e4i(),H=new Date(this._timeProxy),H.setUTCMinutes(H.getUTCMinutes()+this.getTimezoneOffset()),H},setDate:function(H){var P;return l.U$Q(),P="d",P+="a",P+="t",P+="e",this.setAttribute(P,H),this.getTime()},setFullYear:function(H,P,N){var v,x;return N!==void 0&&this.setAttribute("date",1),this.setAttribute("year",H),P!==void 0&&(v="mon",v+="th",this.setAttribute(v,P)),N!==void 0&&(x="dat",x+="e",this.setAttribute(x,N)),this.getTime()},setMonth:function(H,P){return this.setAttribute("month",H),P!==void 0&&this.setAttribute("date",P),l.e4i(),this.getTime()},setYear:function(H){return H=Number(H),0<=H&&H<=99&&(H+=1900),this.setUTCAttribute("year",H),this.getTime()},setHours:function(H,P,N,v){return this.setAttribute("hours",H),P!==void 0&&this.setAttribute("minutes",P),N!==void 0&&this.setAttribute("seconds",N),l.U$Q(),v!==void 0&&this.setAttribute("milliseconds",v),this.getTime()},setMinutes:function(H,P,N){return this.setAttribute("minutes",H),P!==void 0&&this.setAttribute("seconds",P),N!==void 0&&this.setAttribute("milliseconds",N),l.U$Q(),this.getTime()},setSeconds:function(H,P){var N;return N="s",N+="ec",N+="ond",N+="s",this.setAttribute(N,H),P!==void 0&&this.setAttribute("milliseconds",P),this.getTime()},setMilliseconds:function(H){var P,N,v;this.setAttribute("milliseconds",H),P=1464846682,l.h7R(56),N=l.D1M(64,"1770410670"),v=2;for(var x=1;l.R7z(x.toString(),x.toString().length,64109)!==P;x++)return this.getTime();if(l.V7r(v.toString(),v.toString().length,"38324">>64)!==N)return this.getTime()},setTime:function(H){if(l.U$Q(),isNaN(H))throw new Error("Units must be a number.");return this.setFromTimeProxy(H,this.timezone),this.getTime()},setUTCFullYear:function(H,P,N){var v;return N!==void 0&&(v="d",v+="at",v+="e",this.setUTCAttribute(v,1)),this.setUTCAttribute("year",H),P!==void 0&&this.setUTCAttribute("month",P),l.U$Q(),N!==void 0&&this.setUTCAttribute("date",N),this.getTime()},setUTCMonth:function(H,P){return this.setUTCAttribute("month",H),l.e4i(),P!==void 0&&this.setUTCAttribute("date",P),this.getTime()},setUTCDate:function(H){var P;return P="d",P+="a",P+="t",l.U$Q(),P+="e",this.setUTCAttribute(P,H),this.getTime()},setUTCHours:function(H,P,N,v){var x,M;return this.setUTCAttribute("hours",H),P!==void 0&&this.setUTCAttribute("minutes",P),l.U$Q(),N!==void 0&&(x="secon",x+="ds",this.setUTCAttribute(x,N)),v!==void 0&&(M="milliseco",M+="nds",this.setUTCAttribute(M,v)),this.getTime()},setUTCMinutes:function(H,P,N){var v,x,M,D;if(l.U$Q(),this.setUTCAttribute("minutes",H),P!==void 0){v=-1890322524,x=-1421048888,M=2;for(var Q=1;l.V7r(Q.toString(),Q.toString().length,41041)!==v;Q++)this.setUTCAttribute("",P),M+=2;l.R7z(M.toString(),M.toString().length,66523)!==x&&this.setUTCAttribute("seconds",P)}return N!==void 0&&(D="m",D+="il",D+="lisecond",D+="s",this.setUTCAttribute(D,N)),this.getTime()},setUTCSeconds:function(H,P){var N;return this.setUTCAttribute("seconds",H),P!==void 0&&(N="mill",N+="is",N+="e",N+="conds",this.setUTCAttribute(N,P)),l.U$Q(),this.getTime()},setUTCMilliseconds:function(H){return this.setUTCAttribute("milliseconds",H),l.U$Q(),this.getTime()},setFromDateObjProxy:function(H){this.year=H.getFullYear(),this.month=H.getMonth(),this.date=H.getDate(),this.hours=H.getHours(),this.minutes=H.getMinutes(),this.seconds=H.getSeconds(),this.milliseconds=H.getMilliseconds(),this._day=H.getDay(),this._dateProxy=H,this._timeProxy=Date.UTC(this.year,this.month,this.date,this.hours,this.minutes,this.seconds,this.milliseconds),this._useCache=!1},setFromTimeProxy:function(H,P){var N,v;N=new Date(H),v=P?c.timezone.getTzInfo(H,P,!0).tzOffset:N.getTimezoneOffset(),N.setTime(H+(N.getTimezoneOffset()-v)*6e4),this.setFromDateObjProxy(N)},setAttribute:function(H,P){var N,v,x;if(N="Ful",N+="lYear",isNaN(P))throw new Error("Units must be a number.");v=this._dateProxy,x=H==="year"?N:H.substr(0,1).toUpperCase()+H.substr(1),l.U$Q(),v["set"+x](P),this.setFromDateObjProxy(v)},setUTCAttribute:function(H,P){var N,v,x;if(N="y",N+="e",l.U$Q(),N+="a",N+="r",isNaN(P))throw new Error("Units must be a number.");v=H===N?"FullYear":H.substr(0,1).toUpperCase()+H.substr(1),x=this.getUTCDateProxy(),x["setUTC"+v](P),x.setUTCMinutes(x.getUTCMinutes()-this.getTimezoneOffset()),this.setFromTimeProxy(x.getTime()+this.getTimezoneOffset()*6e4,this.timezone)},setTimezone:function(H){var P;P=this.getTimezoneInfo().tzOffset,this.timezone=H,this._useCache=!1,this.setUTCMinutes(this.getUTCMinutes()-this.getTimezoneInfo().tzOffset+P)},removeTimezone:function(){this.timezone=null,this._useCache=!1},valueOf:function(){return this.getTime()},clone:function(){return l.e4i(),this.timezone?new c.Date(this.getTime(),this.timezone):new c.Date(this.getTime())},toGMTString:function(){return l.e4i(),this.toString("EEE, dd MMM yyyy HH:mm:ss Z","Etc/GMT")},toLocaleStringIntl:function(){},toLocaleDateString:function(){},toLocaleTimeString:function(){},toSource:function(){},toISOString:function(){var H;return H="E",H+="tc",H+="/UTC",l.U$Q(),this.toString("yyyy-MM-ddTHH:mm:ss.SSS",H)+"Z"},toJSON:function(){return l.e4i(),this.toISOString()},toDateString:function(){return this.toString("EEE MMM dd yyyy")},toTimeString:function(){return l.e4i(),this.toString("H:mm k")},toString:function(H,P){var N,v,x,M;return H||(H="yyyy-MM-ddTHH:mm:ss.SSS"),N=H,v=P?c.timezone.getTzInfo(this.getTime(),P):this.getTimezoneInfo(),x=this,P&&(x=this.clone(),x.setTimezone(P)),M=x.getHours(),N.replace(/a+/g,function(){return l.U$Q(),"k"}).replace(/y+/g,function(D){return l.U$Q(),T(x.getFullYear(),D.length)}).replace(/d+/g,function(D){return T(x.getDate(),D.length)}).replace(/m+/g,function(D){return l.U$Q(),T(x.getMinutes(),D.length)}).replace(/s+/g,function(D){return T(x.getSeconds(),D.length)}).replace(/S+/g,function(D){return l.e4i(),T(x.getMilliseconds(),D.length)}).replace(/h+/g,function(D){return T(M%12===0?12:M%("12"<<64),D.length)}).replace(/M+/g,function(D){var Q,q;return Q=x.getMonth(),q=D.length,q>3?c.Months[Q]:q>2?c.Months[Q].substring(0,q):(l.h7R(0),T(l.D1M(1,Q),q))}).replace(/k+/g,function(){return l.U$Q(),M>=12?(M>12&&(M-=12),"PM"):"AM"}).replace(/H+/g,function(D){return T(M,D.length)}).replace(/E+/g,function(D){return l.U$Q(),U[x.getDay()].substring(0,D.length)}).replace(/Z+/gi,function(){return v.tzAbbr})},toUTCString:function(){return l.U$Q(),this.toGMTString()},civilToJulianDayNumber:function(H,P,N){var v,x,M;P++,P>12&&(l.f4W(32),v=parseInt(l.D1M(P,0,"12"),10),l.h7R(158),P=l.D1M("12",P),H+=v),P<=2&&(H-=1,P+=12),l.h7R(10),v=Math.floor(l.D1M(H,100)),l.f4W(159);var D=l.E9E(18,7,15,4,20);l.h7R(70);var Q=l.D1M(4,1,2,8);x=D-v+Math.floor(v/("4"|Q)),l.f4W(160),l.U$Q();var q=l.E9E(429,20,4,55348,7);l.h7R(9);var O=l.E9E(5,4);l.h7R(0);var R=l.E9E(17,1507);return M=Math.floor(365.25*(H+q))+Math.floor(30.6001*(P+O))+N+x-R,M},getLocalOffset:function(){return this._dateProxy.getTimezoneOffset()}},!0),l.e4i(),c.timezone=new function(){var H,P,N,v,x,M,D,Q,q,O,R,V,K,Y,G,J,Z,ee,X,ne,se;H="ma",H+="nualLoa",H+="d",P="l";function oe(me){var ve,pe;ve=de(me),pe=me.charAt(0)==="-"?-1:1,l.f4W(161);var be=l.D1M(2,6,1,10,16);l.f4W(162);var Se=l.D1M(11,14,6,2,58);l.h7R(121);var Ee=l.D1M(5,5,6,15);return ve=pe*(((ve[0]*60+ve[be])*Se+ve[Ee])*1e3),l.h7R(163),l.E9E(ve,0,"60","1000",32)}function ae(me){throw l.h7R(15),new Error(l.D1M(me,"' is either incorrect, or not loaded in the timezone registry.","Timezone '"))}P+="azyLoa",P+="d",N="pr",N+="e",N+="lo",N+="adAll",v="pacificn",v+="ew",x="asi",x+="a",M="antarct",M+="ica",D="afri",D+="ca",Q="asi",Q+="a",q="e",q+="ur";function Ae(me){var ve,pe,be,Se;if(ve=se[me],ve)return ve;if(pe=me.split("/")[0],l.e4i(),be=ne[pe],be)return be;if(Se=X.zones[me],typeof Se=="string")return Ae(Se);if(!X.loadedZones.backward)return X.loadZoneFile("backward"),Ae(me);ae(me)}q+="o",q+="pe",O="eu",O+="r",O+="ope",R="europ",R+="e";function he(me,ve,pe,be){var Se,Ee,Ie,Qe,Ne,De,Re,_e,Ue,He,Pe,We,Ge;if(Se=typeof me=="number"?new Date(me):me,Ee=ve[1],Ie=ve[0],Qe=Ee.match(/^([0-9]):([0-9][0-9])$/),Qe){l.f4W(75);var je=l.D1M(6,8,1);l.f4W(0);var Je=l.E9E(8,2);l.h7R(116);var Oe=l.D1M(51,45,5);l.f4W(21);var nt=l.E9E(9,1,18);return l.f4W(77),[-1e6,"max","-","Jan",l.D1M("1",64),[0,0,0],parseInt(Qe[je],Je)*Oe+parseInt(Qe["2"|0],nt),"-"]}if(Ne=function(Le,et,Ye){var Ve;if(Ve=0,et==="u"||et==="g"||et==="z")l.f4W(56),Ve=l.D1M(0,"0");else if(et==="s")Ve=Ie;else if(et==="w"||!et)Ve=ge(Ie,Ye[6]);else throw l.h7R(0),new Error(l.D1M(et,"unknown type "));return l.f4W(1),Ve*=l.E9E(1e3,60),new Date(Le.getTime()+Ve)},De=function(Le,et){var Ye,Ve,ct,ot,dt,xt,Ke,At;return l.h7R(49),Ye=Le[l.D1M("0",0)],Ve=Le[1],ct=Ve[5],l.U$Q(),S[Ye]||(S[Ye]={}),S[Ye][Ve]?ot=S[Ye][Ve]:(isNaN(Ve["4"-0])?(Ve["4"<<32].substr(0,4)==="last"?(Ke="<",Ke+="=",ot=new Date(Date.UTC(Ye,k[Ve[3]]+1,1,ct[0]-24,ct["1"|1],ct[2],0)),dt=y[Ve[4].substr(l.E9E("4",64,l.h7R(77)),3)],xt=Ke):(ot=new Date(Date.UTC(Ye,k[Ve[3]],Ve["4"-0].substr(5),ct[0],ct[1],ct[2],0)),dt=y[Ve[4].substr(0,3)],xt=Ve[4].substr(3,2)),At=ot.getUTCDay(),xt===">="?ot.setUTCDate(ot.getUTCDate()+(dt-At+(dt<At?7:0))):ot.setUTCDate(ot.getUTCDate()+(dt-At-(dt>At?"7"*1:0)))):ot=new Date(Date.UTC(Ye,k[Ve[3]],Ve[4],ct[0],ct[1],ct[2],0)),S[Ye][Ve]=ot),et&&(ot=Ne(ot,ct[3],et)),ot},Re=function(Le,et){var Ye;if(Ye=[],et)for(var Ve=0;Ve<et.length;Ve++)et[Ve][0]<=Le&&(et[Ve][1]>=Le||et[Ve][0]===Le&&et[Ve][1]==="only"||et[Ve][1]==="max")&&Ye.push([Le,et[Ve]]);return Ye},_e=function(Le,et,Ye){var Ve,ct;return Le instanceof Date?Ye&&(Le=Ne(Le,pe?"u":"w",Ye)):(Ve=Le[0],ct=Le[1],Le=!Ye&&S[Ve]&&S[Ve][ct]?S[Ve][ct]:De(Le,Ye)),et instanceof Date?Ye&&(et=Ne(et,pe?"u":"w",Ye)):(Ve=et[0],ct=et[1],et=!Ye&&S[Ve]&&S[Ve][ct]?S[Ve][ct]:De(et,Ye)),Le=Number(Le),l.U$Q(),et=Number(et),l.f4W(9),l.E9E(Le,et)},Ue=Se.getUTCFullYear(),Pe=c.ruleCache[be],Pe||(Pe=c.ruleCache[be]={}),He=Pe[Ue],He||(l.f4W(9),He=Re(l.E9E(Ue,1),X.rules[Ee]),He=He.concat(Re(Ue,X.rules[Ee])),He.sort(_e),Pe[Ue]=He),!He||!He.length)return null;for(var Ze=He.length-1;Ze>=0;Ze--)if(Ze>0?(l.h7R(9),We=He[l.E9E(Ze,1)][1]):We=null,Ge=He[Ze],Ge["2">>64]||(Ge[2]=De(Ge,We)),_e(Se,Ge,We)>="0"-0)return Ge[1];return null}function ge(me,ve){return l.h7R(9),-Math.ceil(l.D1M(ve,me))}V="eu",V+="rope",K="eur";function ie(me,ve){var pe,be,Se,Ee,Ie;for(pe=typeof me=="number"?me:new Date(+me).getTime(),be=ve,Se=X.zones[be];typeof Se=="string";)be=Se,Se=X.zones[be];if(!Se){if(X.loadedZones.backward){if(be&&be!==ve)return X.lazyLoadZoneFiles(be),ie(me,be)}else return X.loadZoneFile("backward"),ie(me,ve);ae(be)}if(Se.length===0)throw Ee="No ",Ee+="Zon",Ee+="e ",Ee+="found for '",l.f4W(55),new Error(l.D1M(ve,Ee,me,"' on "));for(var Qe=Se.length-"1"*1;Qe>=0&&(Ie=Se[Qe],!(Ie[3]&&pe>Ie[3]));Qe--);return l.h7R(0),Se[l.E9E(1,Qe)]}K+="ope",Y="euro",Y+="pe",G="e",G+="u",G+="rope",J="a";function re(me,ve){var pe,be,Se,Ee;return pe="%",pe+="s",be=me[2],l.e4i(),be.indexOf(pe)>-1?(Se="%",Se+="s",ve?Ee=ve[7]==="-"?"":ve[7]:Ee="S",be.replace(Se,Ee)):be.indexOf("/")>-("1">>32)?be.split("/",2)[ve?ve[6]?1:0:"0"|0]:be}J+="si",J+="a",Z="antarcti",Z+="ca",ee="nort",ee+="hamerica",X=this,ne={Etc:"etcetera",EST:"northamerica",MST:ee,HST:"northamerica",EST5EDT:"northamerica",CST6CDT:"northamerica",MST7MDT:"northamerica",PST8PDT:"northamerica",America:["northamerica","southamerica"],Pacific:"australasia",Atlantic:"europe",Africa:"africa",Indian:"africa",Antarctica:"antarctica",Asia:"asia",Australia:"australasia",Europe:"europe",WET:"europe",CET:"europe",MET:"europe",EET:"europe"},se={"Pacific/Honolulu":"northamerica","Atlantic/Bermuda":"northamerica","Atlantic/Cape_Verde":"africa","Atlantic/St_Helena":"africa","Indian/Kerguelen":Z,"Indian/Chagos":"asia","Indian/Maldives":J,"Indian/Christmas":"australasia","Indian/Cocos":"australasia","America/Danmarkshavn":"europe","America/Scoresbysund":"europe","America/Godthab":"europe","America/Thule":G,"Asia/Istanbul":"europe","Asia/Yekaterinburg":"europe","Asia/Omsk":"europe","Asia/Novosibirsk":"europe","Asia/Krasnoyarsk":Y,"Asia/Irkutsk":K,"Asia/Yakutsk":V,"Asia/Vladivostok":"europe","Asia/Sakhalin":R,"Asia/Magadan":O,"Asia/Kamchatka":q,"Asia/Anadyr":"europe","Africa/Ceuta":"europe",GMT:"etcetera","Europe/Nicosia":Q},this.zoneFileBasePath=null,this.zoneFiles=[D,M,x,"australasia","backward","etcetera","europe","northamerica",v,"southamerica"],this.loadingSchemes={PRELOAD_ALL:N,LAZY_LOAD:P,MANUAL_LOAD:H},this.getRegionForTimezone=Ae,this.loadingScheme=this.loadingSchemes.LAZY_LOAD,this.loadedZones={},this.zones={},this.rules={},this.init=function(me){var ve,pe,be;ve="northame",ve+="rica",pe={async:!0},l.U$Q(),be=this.loadingScheme===this.loadingSchemes.PRELOAD_ALL?this.zoneFiles:this.defaultZoneFile||ve;for(var Se in me)pe[Se]=me[Se];return this.loadZoneFiles(be,pe)};function de(me){var ve,pe;return ve=/(\d{1,2})(?::0*(\d{1,2}))?(?::0*(\d{1,2}))?([wsugz])?$/,pe=me.match(ve),pe[1]=parseInt(pe[1],"10"<<0),pe[2]=pe[2]?parseInt(pe[2],10):"0">>32,pe[3]=pe["3">>64]?parseInt(pe[3],"10"^0):0,l.f4W(56),pe.slice(l.E9E(32,"1"),5)}this.loadZoneFiles=function(me,ve){var pe,be;if(l.U$Q(),be=0,typeof me=="string")return this.loadZoneFile(me,ve);ve=ve||{},pe=ve.callback,ve.callback=function(){var Ee;Ee="f",Ee+="unc",Ee+="t",Ee+="ion",be++,be===me.length&&typeof pe===Ee&&pe()};for(var Se=0;Se<me.length;Se++)this.loadZoneFile(me[Se],ve)},this.loadZoneFile=function(me,ve){if(typeof this.zoneFileBasePath>"u")throw new Error("Please define a base path to your zone file directory -- timezoneJS.timezone.zoneFileBasePath.");if(!this.loadedZones[me])return this.loadedZones[me]=!0,l.e4i(),ce(me,ve)},this.loadZoneJSONData=function(me,ve){var pe;return pe=function(be){be=JSON.parse(be);for(var Se in be.zones)X.zones[Se]=be.zones[Se];l.e4i();for(var Ee in be.rules)X.rules[Ee]=be.rules[Ee]},ve?pe(X.transport({url:me,async:!1})):X.transport({url:me,success:pe})},this.loadZoneDataFromObject=function(me){if(me){for(var ve in me.zones)X.zones[ve]=me.zones[ve];l.e4i();for(var pe in me.rules)X.rules[pe]=me.rules[pe]}},this.getAllZones=function(){var me;me=[];for(var ve in this.zones)me.push(ve);return me.sort()},this.parseZones=function(me){var ve,pe,be,Se,Ee,Ie,Qe;if(l.e4i(),!me)return!1;ve=me.split(`
`),pe=[],be="",Ee=null,Ie=null;for(var Ne=0;Ne<ve.length;Ne++)if(Se=ve[Ne],Se.match(/^\s/)&&(l.f4W(15),Se=l.E9E(Ee,Se,"Zone ")),Se=Se.split("#")[0],Se.length>3)switch(pe=Se.split(/\s+/),be=pe.shift(),be){case"Zone":if(Ee=pe.shift(),X.zones[Ee]||(X.zones[Ee]=[]),pe.length<"3"-0)break;l.f4W(49),pe.splice(l.D1M("3",0),pe.length,fe(pe)),pe[3]&&(pe[3]=Date.UTC.apply(null,pe[3])),pe[0]=-oe(pe[0]),X.zones[Ee].push(pe);break;case"Rule":Ie=pe.shift(),X.rules[Ie]||(X.rules[Ie]=[]),l.h7R(56),pe[l.D1M(0,"0")]=parseInt(pe[0],10),pe[1]=parseInt(pe[1],10)||pe[1],l.h7R(49),pe[l.D1M("5",0)]=de(pe[5]),pe[6]=oe(pe[6]),X.rules[Ie].push(pe);break;case"Link":if(X.zones[pe[1]]){Qe=". Cannot create link of a p",Qe+="reexisted zone.",l.f4W(132);var De=l.E9E(39,19,19,0);throw new Error("Error with Link "+pe[De]+Qe)}isNaN(pe[0])?X.zones[pe[1]]=pe[0]:X.zones[pe[1]]=parseInt(pe[0],10);break}return!0},l.e4i();function ce(me,ve){var pe;return pe=X.zoneFileBasePath+"/"+me,!ve||!ve.async?X.parseZones(X.transport({url:pe,async:!1})):X.transport({async:!0,url:pe,success:function(be){l.e4i();var Se,Ee,Ie,Qe;Se=-380951369,Ee=-900915482,Ie=2;for(var Ne=1;l.R7z(Ne.toString(),Ne.toString().length,"44456"^0)!==Se;Ne++)return Qe="f",Qe+="unc",Qe+="tion",X.parseZones(be)&&typeof ve.callback===Qe&&ve.callback();if(l.R7z(Ie.toString(),Ie.toString().length,64977)!==Ee)return X.parseZones(be)||-ve.callback==""||ve.callback()},error:function(){var be,Se;throw be="' ",be+="zoneinfo files",Se="E",Se+="r",l.U$Q(),Se+="ror retrieving",Se+=" '",l.h7R(15),new Error(l.E9E(pe,be,Se))}})}this.transport=_;function fe(me){var ve,pe,be,Se;if(me[3])return ve=parseInt(me[3],10),l.f4W(1),pe=l.E9E(1,"11"),l.h7R(37),be=l.D1M(30,"31"),me[4]&&(pe=k[me[4].substr(0,3)],be=parseInt(me[5],10)||1),Se=me[6]?de(me["6"<<64]):[0,0,0],[ve,pe,be,Se[0],Se[1],Se[2]]}this.getTzInfo=function(me,ve,pe){var be,Se,Ee,Ie;return this.lazyLoadZoneFiles(ve),be=ie(me,ve),Se=+be[0],Ee=he(me,be,pe,ve),Ee&&(Se=ge(Se,Ee[6])),Ie=re(be,Ee),{tzOffset:Se,tzAbbr:Ie}},this.lazyLoadZoneFiles=function(me){var ve;if(this.loadingScheme===this.loadingSchemes.LAZY_LOAD){if(ve=Ae(me),!ve)throw new Error("Not a valid timezone ID.");this.loadZoneFiles(ve)}}}}).call(typeof window<"u"?window:void 0),c.timezone.loadingScheme=c.timezone.loadingSchemes.MANUAL_LOAD,c.timezone.loadZoneDataFromObject({zones:{"Asia/Tokyo":[[-540,"","J%sT",null]],"Etc/UTC":[[0,"-","UTC",null]],"Europe/London":[[0,"EU","GMT/BST",null]],"America/New_York":[[300,"US","E%sT",null]],UTC:"Etc/UTC"},rules:{EU:[[1981,"max","-","Mar","lastSun",[1,0,0,"u"],"60"|60,"S"],[1996,"max","-",r,n,[1,0,"0"-0,"u"],0,"-"]],US:[[2007,"max","-",s,"Sun>=8",["2"*1,0,0,null],"60">>64,"D"],[2007,t,"-",e,"Sun>=1",[2,0,0,null],0,"S"]]}})};Fl=E=>{var e=ke,t,s;t=typeof _CIQ<"u"?_CIQ:E.CIQ,t.ChartEngine.prototype.touchSingleClick=function(r,i,a){e.U$Q();var o,c;return o=this,c=arguments,function(){e.U$Q(),(function(){var l,u,h,d,f;if(e.e4i(),!this.cancelTouchSingleClick){if(this.runPrepend("touchSingleClick",c)||this.editingAnnotation||(this.clicks={},!this.displayCrosshairs)||!this.displayInitialized||this.openDialog!==""||i<this.left||i>this.right||a<this.top||a>this.bottom)return;l=this.crossYActualPos,u=this.crossXActualPos,this.currentPanel=this.whichPanel(l),h=this.currentVectorParameters.vectorType,(!t.Drawing||!h||!t.Drawing[h]||!new t.Drawing[h]().dragToDraw)&&(this.drawingClick(this.currentPanel,u,l)||n(this,i,a),this.currentVectorParameters.vectorType||(d=this.activeMarker&&this.activeMarker.click({cx:u,cy:l,panel:this.currentPanel}),d||(f=!0,this.anyHighlighted&&this.leftClickPinTooltip&&this.allowPinning&&this.highlightedPlot&&this.allowPinning(this.highlightedPlot.type)&&(f=!this.leftClickPinTooltip({cx:u,cy:l})),f&&this.dispatch("tap",{stx:this,panel:this.currentPanel,x:u,y:l}))))}this.runAppend("touchSingleClick",c)}).apply(o,c)}},t.ChartEngine.prototype.touchDoubleClick=function(r,i,a){var o,c,l,u,h,d,f;o="d",o+="ouble",o+="T",o+="ap",c=-1028405597,e.h7R(77),l=-e.D1M("763098805",32),u=2;for(var A=1;e.V7r(A.toString(),A.toString().length,89909)!==c;A++){if(this.runPrepend("",arguments)||this.editingAnnotation)return;u+=2}if(!(e.V7r(u.toString(),u.toString().length,"16832"|0)!==l&&(this.runPrepend("touchDoubleClick",arguments)||this.editingAnnotation))){if(t.ChartEngine.drawingLine)return this.currentVectorParameters.vectorType==="continuous"&&(h=this.crossYActualPos,d=this.crossXActualPos,this.currentPanel=this.whichPanel(h),this.drawingClick(this.currentPanel,d,h),t.ChartEngine.completeDrawing(this)),this.undo();this.activeDrawing||(n(this,i,a),e.U$Q(),f=this.activeMarker&&this.activeMarker.doubleClick({cx:i,cy:a,panel:this.currentPanel}),f||this.dispatch(o,{stx:this,finger:r,x:i,y:a}),this.runAppend("touchDoubleClick",arguments))}},t.ChartEngine.prototype.startProxy=function(r){if(this.touchPointerType=r.pointerType,this.touchPointerType!="touch"){this.mouseMode=!0;return}e.U$Q(),this.mouseMode=!1,this.touches[this.touches.length]={pointerId:r.pointerId,pageX:r.clientX,pageY:r.clientY,clientX:r.clientX,clientY:r.clientY},this.changedTouches=[{pointerId:r.pointerId,pageX:r.clientX,pageY:r.clientY,clientX:r.clientX,clientY:r.clientY}],this.touches.length==1&&(this.gesturePointerId=r.pointerId),this.touchstart(r)},t.ChartEngine.prototype.moveProxy=function(r){if(r.pointerType&&r.pointerType!="touch"){this.mouseMode=!0;return}this.mouseMode=!1,this.touchmove(r)},t.ChartEngine.prototype.endProxy=function(r){var i;if(this.touchPointerType!="touch"){this.mouseMode=!0;return}this.mouseMode=!1,i=this.touches.length;for(var a=0;a<this.touches.length;a++)if(this.touches[a].pointerId==r.pointerId){this.touches.splice(a,1);break}if(a==i){this.touches=[],this.grabbingScreen=!1,this.touching=!1;return}this.changedTouches=[{pointerId:r.pointerId,pageX:r.clientX,pageY:r.clientY,clientX:r.clientX,clientY:r.clientY}],this.touchend(r)},t.ChartEngine.prototype.msMouseMoveProxy=function(r){this.touches.length||!this.mouseMode||this.mousemove(r)},t.ChartEngine.prototype.msMouseDownProxy=function(r){this.mouseMode&&this.mousedown(r)},t.ChartEngine.prototype.msMouseUpProxy=function(r){this.mouseMode&&this.mouseup(r)},t.ChartEngine.prototype.iosMouseMoveProxy=function(r){this.touching||this.mousemove(r)},t.ChartEngine.prototype.iosMouseDownProxy=function(r){if(this.touching){this.mouseMode=!1;return}this.mouseMode=!0,this.mousedown(r)},e.U$Q(),t.ChartEngine.prototype.iosMouseUpProxy=function(r){this.touching||this.mouseup(r)},t.ChartEngine.prototype.touchmove=function(r){var i,a,o,c,l,u,h,d,f,A,p,g,m,b,C,F,w,U,B,k,y,S,T,_,L,H,P,N,v,x,M,D,Q,q,O,R,V,K,Y,G,J,Z,ee,X;if(i="fr",i+="eef",i+="orm",a="p",a+="e",a+="n",!!this.displayInitialized&&this.openDialog===""&&t.ChartEngine.ignoreTouch!==!0&&(o=[],(!this.overYAxis||this.controls&&this.controls.crossX&&this.controls.crossX.style.display!="none")&&(r&&r.preventDefault&&r.cancelable&&this.captureTouchEvents&&r.preventDefault(),r&&r.stopPropagation()),c=new Date().getTime(),l=Oi(this.pointerEvents.down,1),e.f4W(49),u=l[e.E9E("0",0)],!(c-u.time<25))){if(r.pointerType||(r.pointerType=this.touchPointerType),t.isSurface){if(this.mouseMode)return;r.pointerId||(r.pointerId=this.gesturePointerId);for(var ne=0;ne<this.touches.length;ne++)if(this.touches[ne].pointerId==r.pointerId){if(h=Math.abs(this.touches[ne].pageX-r.clientX),d=Math.abs(this.touches[ne].pageY-r.clientY),e.h7R(50),f=Math.sqrt(e.D1M(h,d,h,d)),!f||c-u.time<50||this.touches[ne].pageX==r.clientX&&this.touches[ne].pageY==r.clientY)return;this.touches[ne].pageX=this.touches[ne].clientX=r.clientX,this.touches[ne].pageY=this.touches[ne].clientY=r.clientY;break}if(ne===0){A=212114731,p=-1408671137,g=2;for(var se=1;e.V7r(se.toString(),se.toString().length,90431)!==A;se++)this.movedPrimary=!1,g+=2;e.R7z(g.toString(),g.toString().length,86478)!==p&&(this.movedPrimary=!1),this.movedPrimary=!0}else this.movedSecondary=!0;if(ne==this.touches.length)return;this.changedTouches=[{pointerId:r.pointerId,pageX:r.clientX,pageY:r.clientY,clientX:r.clientX,clientY:r.clientY}],o=this.touches.length?this.touches:this.changedTouches}else o=r.touches,this.changedTouches=r.changedTouches;if(!(o.length=="1"*1&&t.withinRadius(this.clicks,{x:o[0].clientX,y:o[0].clientY},4))&&(m=this.crosshairXOffset,b=this.crosshairYOffset,C=this.currentVectorParameters.vectorType&&this.currentVectorParameters.vectorType!=="",e.e4i(),F=!this.layout.crosshair&&!C&&!this.touchNoPan,(r.pointerType==a||F||this.activeDrawing&&this.activeDrawing.name==i)&&(m=b=0),!this.runPrepend("touchmove",arguments))){if(t.ChartEngine.resizingPanel){B=o[0],w=B.clientX,U=B.clientY,e.f4W(0),this.mousemoveinner(e.E9E(m,w),e.E9E(b,U));return}if(this.moveB!=-1&&(this.touchMoveTime=new Date),this.moveA=this.moveB,this.moveB=o[0].pageX,o.length==1&&!this.twoFingerStart)y=o[0],w=y.clientX,U=y.clientY,this.pinchingScreen=0,e.f4W(0),this.mousemoveinner(e.E9E(m,w),e.D1M(b,U)),S=this.whichPanel(U),T=this.xAxisAsFooter===!0?this.chart.canvasHeight:this.chart.panel.bottom,this.overXAxis=U<=this.top+T&&U>=T-this.xaxisHeight+this.top&&this.insideChart,S?this.overYAxis=(w>=S.right||w<=S.left)&&this.insideChart:this.overYAxis=!1;else if(o.length==2){if(!this.allowZoom||this.activeDrawing&&!this.allowDrawingZoom||!this.displayCrosshairs)return;_=o[0],L=_.clientX,H=_.clientY,P=o[1],N=P.clientX,v=P.clientY,e.h7R(164),k=Math.sqrt(e.E9E(L,N,N,v,v,H,H,L)),e.h7R(0);var oe=e.D1M(2,0);if(this.pinchingCenter=(Math.min(L,N)-Math.max(L,N))/oe,x=Math.round(this.gestureStartDistance-k),F&&(this.pinchingScreen=5),this.clearPixelCache(),this.pinchingScreen<2){if(t.isSurface&&(!this.movedPrimary||!this.movedSecondary))return;if(L<this.pt.x1&&N<this.pt.x2||L>this.pt.x1&&N>this.pt.x2||H<this.pt.y1&&v<this.pt.y2||H>this.pt.y1&&v>this.pt.y2)this.pinchingScreen=0;else if(this.pinchingScreen++,this.pinchingScreen<2)return}if(this.pt={x1:L,x2:N,y1:H,y2:v},this.pinchingScreen===0)this.grabMode="pan",e.f4W(0),this.mousemoveinner(e.E9E(m,L),e.D1M(b,H)),this.gestureStartDistance=k;else if(this.grabStartValues){if(M=Math.asin((Math.max(v,H)-Math.min(v,H))/k),Math.abs(x)<12&&!F){if(this.moveCount++,this.moveCount==4){this.pinchingScreen=0,e.h7R(49),this.moveCount=e.E9E("0",0);return}}else this.moveCount=0;if(M<1||!this.goneVertical&&M<1.37){if(!this.currentPanel)return;D=this.currentPanel.chart,this.goneVertical=!1,k=this.pt.x2-this.pt.x1,Q=this.grabStartValues.t2-this.grabStartValues.t1||1,e.h7R(58);var ae=e.D1M(22,5,108);if(q=this.grabStartValues.t1+Q/ae,e.f4W(10),O=Math.abs(e.D1M(k,Q)),D.allowScrollFuture===!1&&D.allowScrollPast===!1&&(O=Math.max(O,D.width/D.dataSet.length)),R=this.layout.candleWidth,this.setCandleWidth(O,D),D.maxTicks<this.minimumZoomTicks){this.setCandleWidth(R,D);return}this.micropixels=0,V=this.pixelFromTick(Math.round(q),D),e.f4W(165);var Ae=e.E9E(1,12,3,62,8);K=this.pt.x1-this.left+Math.round(k/Ae),e.h7R(9),Y=e.E9E(V,K),G=Y/this.layout.candleWidth,J=Math.round(G),D.scroll-=J,e.f4W(9),this.microscroll=e.D1M(J,G),this.micropixels=O*this.microscroll,this.draw()}else if(Z=this.grabStartYAxis,this.goneVertical=!0,Z){if(Z.zoom=this.grabStartZoom+(this.gestureStartDistance-k),this.grabStartZoom<Z.height){if(Z.zoom>=Z.height){e.f4W(166);var he=e.D1M(12,27,5,19);Z.zoom=Z.height-he}}else if(Z.zoom<=Z.height){e.h7R(75);var ge=e.D1M(14,16,1);Z.zoom=Z.height+ge}this.draw()}this.updateChartAccessories()}}else if(o.length==3&&t.ChartEngine.allowThreeFingerTouch){if(!this.displayCrosshairs)return;ee=o[0],X=ee.clientX,k=this.grabStartX-X,e.f4W(0);var ie=e.E9E(9,1);this.grabEndPeriodicity=this.grabStartPeriodicity+Math.round(k/ie),this.grabEndPeriodicity<1&&(this.grabEndPeriodicity=1)}this.runAppend("touchmove",arguments)}}},t.ChartEngine.prototype.touchstart=function(r){var i,a,o,c,l,u,h,d,f,A,p,g,m,b,C,F,w,U,B,k,y,S,T,_,L,H,P,N,v,x,M,D,Q,q,O,R,V,K,Y,G;if(i="touc",i+="hs",i+="tar",i+="t",a="[dragg",a+="able",a+="]",!t.ChartEngine.ignoreTouch&&!(r.target&&r.target.closest(a))&&(t.isSurface?(this.movedPrimary=!1,this.movedSecondary=!1):(this.touchingEvent&&clearTimeout(this.touchingEvent),this.touching=!0,this.touches=r.touches,this.changedTouches=r.changedTouches),o=this.crosshairXOffset,c=this.crosshairYOffset,this.touchPointerType=="pen"&&(o=c=0),!this.runPrepend("touchstart",arguments))){if(l=this.layout,u=this.currentVectorParameters.vectorType,h=l.crosshair&&u!==""||u,this.manageTouchAndMouse&&r&&r.preventDefault&&r.cancelable&&this.captureTouchEvents&&r.preventDefault(),this.hasDragged=!1,this.doubleFingerMoves=0,e.f4W(56),this.moveCount=e.E9E(0,"0"),this.twoFingerStart=!1,this.longHoldTookEffect=!1,this.touches.length==1||this.touches.length==2){if(this.touchMoveTime=Date.now(),m=this.touches[0],A=m.clientX,p=m.clientY,this.moveA=A,this.moveB=-1,this.openDialog===""&&(this.registerPointerEvent({x:A,y:p,time:this.touchMoveTime},"down"),this.changedTouches.length==1&&(this.clicks={x:this.changedTouches[0].pageX,y:this.changedTouches[0].pageY})),b=this.container.getBoundingClientRect(),this.top=b.top,this.left=b.left,this.right=this.left+this.width,this.bottom=this.top+this.height,this.touches.length=="1"-0&&(C=this.backOutX(A),F=this.backOutY(p),this.currentPanel=this.whichPanel(F),this.shouldDisplayCrosshair()||(this.crossXActualPos=C,this.crossYActualPos=F)),this.currentPanel||(this.currentPanel=this.chart.panel),g=this.currentPanel,A>=this.left&&A<=this.right&&p>=this.top&&p<=this.bottom){this.insideChart=!0,w=this.xAxisAsFooter===!0?this.chart.canvasHeight:this.chart.panel.bottom,this.overXAxis=p<=this.top+w&&p>=this.top+w-this.xaxisHeight,this.overYAxis=A>=this.left+g.right||A<=this.left+g.left,U=-1,this.cy=this.backOutY(p),this.cx=this.backOutX(A),this.crosshairTick=this.tickFromPixel(this.cx,g.chart),this.crosshairValue=this.adjustIfNecessary(g,this.crosshairTick,this.valueFromPixel(this.cy,this.currentPanel));for(var J=0;J<this.drawingObjects.length&&!this.openDialog;J++)if(B=this.drawingObjects[J],B.highlighted){if(U<0&&(U=J),k=B.highlighted,this.findHighlights(!0),J==U&&B.highlighted&&!B.permanent){this.activateRepositioning(B);return}this.anyHighlighted=!0,B.highlighted=k}}else this.insideChart=!1;if(this.insideChart&&!h&&l.headsUp!=="floating"&&!(l.headsUp&&l.headsUp.floating)&&!u&&!this.touchNoPan){if(o=c=0,this.controls.anchorHandles){y=Object.values(this.controls.anchorHandles),S=!1;for(var Z=0;Z<y.length;Z++)T=y[Z],_=T.handle,L=T.sd,H=this.resolveX(this.cx),P=this.resolveY(this.cy),N=_.getBoundingClientRect(),v=N.left,x=N.top,M=N.right,D=N.bottom,Q=this.preferences.highlightsTapRadius,e.h7R(9),q=t.boxIntersects(e.E9E(v,Q),x,e.E9E(Q,M,e.f4W(0)),D,H,P,H,P),q&&(this.repositioningAnchorSelector={sd:L},_.classList.add("stx-grab"),S=!0),T.highlighted=q;if(S)return}for(d in this.panels)if(f=this.panels[d],f.highlighted){this.grabHandle(f);return}this.grabbingScreen=!0,this.disableBackingStoreDuringTouch&&this.disableBackingStore(),g.chart.spanLock=!1,this.yToleranceBroken=!1,e.f4W(0),this.grabStartX=e.E9E(o,A),e.h7R(0),this.grabStartY=e.D1M(c,p),this.grabStartMicropixels=this.micropixels,this.grabStartScrollX=g.chart.scroll,this.grabStartScrollY=g.yAxis.scroll,this.grabStartPanel=this.currentPanel,this.swipeStart&&this.swipeStart(g.chart),this.grabStartYAxis=this.whichYAxis(g,this.backOutX(A)),this.grabStartZoom=this.grabStartYAxis?this.grabStartYAxis.zoom:0,setTimeout(function(ee){return function(){e.e4i(),ee.grabbingHand()}}(this),100)}else if(this.grabbingScreen=!1,this.insideChart&&g.subholder===r.target&&(O=this.currentVectorParameters.vectorType,t.Drawing&&O&&t.Drawing[O]&&new t.Drawing[O]().dragToDraw)){this.userPointerDown=!0,t.ChartEngine.crosshairX=A,t.ChartEngine.crosshairY=p,g&&g.chart.dataSet&&(this.crosshairTick=this.tickFromPixel(this.backOutX(A),this.currentPanel.chart),this.crosshairValue=this.adjustIfNecessary(g,this.crosshairTick,this.valueFromPixel(this.backOutY(t.ChartEngine.crosshairY),this.currentPanel))),this.drawingClick(g,this.backOutX(A),this.backOutY(p)),this.headsUpHR();return}this.touches.length==1&&(h?!u&&g.subholder===r.target&&(e.h7R(0),this.mousemoveinner(e.E9E(o,A),e.D1M(c,p))):(this.longHoldTime||this.longHoldTime===0)&&this.startLongHoldTimer((ee=>()=>n(ee,A,p))(this)))}if(this.touches.length=="2"<<64){if(this.cancelLongHold=!0,this.swipe.end=!0,!this.displayCrosshairs&&!this.touchNoPan||!this.insideChart)return;e.h7R(77),R=this.touches[e.E9E("1",32)],V=R.clientX,K=R.clientY;for(d in this.panels)if(f=this.panels[d],f.highlighted){this.grabHandle(f);return}g=this.currentPanel,e.h7R(164),this.gestureStartDistance=Math.sqrt(e.E9E(A,V,V,K,K,p,p,A)),this.pt={x1:A,x2:V,y1:p,y2:K},this.grabbingScreen=!0,this.disableBackingStoreDuringTouch&&this.disableBackingStore(),g.chart.spanLock=!1,e.h7R(0),this.grabStartX=e.D1M(o,A),e.h7R(0),this.grabStartY=e.E9E(c,p),this.grabStartMicropixels=this.micropixels,this.grabStartScrollX=g.chart.scroll,this.grabStartScrollY=g.yAxis.scroll,this.grabStartPanel=g,this.swipeStart&&this.swipeStart(g.chart),this.grabStartCandleWidth=l.candleWidth,this.grabStartYAxis=this.whichYAxis(g,this.backOutX((A+V)/2))||g.yAxis,this.grabStartZoom=this.grabStartYAxis?this.grabStartYAxis.zoom:0,this.grabStartPt=this.pt,this.grabStartValues={x1:this.pt.x1,x2:this.pt.x2,y1:this.valueFromPixel(this.pt.y1-this.top,g),y2:this.valueFromPixel(this.pt.y2-this.top,g),t1:this.tickFromPixel(this.pt.x1-this.left,g.chart),t2:this.tickFromPixel(this.pt.x2-this.left,g.chart)},this.twoFingerStart=!0,setTimeout(function(ee){return e.U$Q(),function(){e.U$Q(),ee.grabbingHand()}}(this),"100"|64)}else if(this.touches.length==3){if(!this.displayCrosshairs)return;Y=this.touches[0],G=Y.clientX,this.grabStartX=G,this.grabStartPeriodicity=l.periodicity}this.runAppend(i,arguments)}},t.ChartEngine.prototype.touchend=function(r){var i,a,o,c,l,u,h,d,f,A,p,g,m,b,C,F,w,U,B,k;if(i="touc",i+="hend",!t.ChartEngine.ignoreTouch&&(this.swipe.end=!0,t.isSurface||(this.touches=r.touches,this.changedTouches=r.changedTouches),!this.runPrepend("touchend",arguments))){if(a=this.touches,o=this.layout,c=this.currentVectorParameters.vectorType,l=o.crosshair&&c!==""||c,this.cancelLongHold=!0,a.length<=1&&l&&(!a.length||!this.twoFingerStart)&&(this.grabbingScreen=!1),a.length&&(this.grabStartX=-1,this.grabStartY=-1),u=this.pinchingScreen,this.disableBackingStoreDuringTouch&&this.reconstituteBackingStore(),a.length){if(t.ChartEngine.resizingPanel)return}else{if(this.touchingEvent=setTimeout(function(S){return e.U$Q(),function(){e.e4i(),S.touching=!1}}(this),"500"*1),t.ChartEngine.resizingPanel&&(this.releaseHandle(),this.changedTouches.length!==1||this.grabStartY!==this.changedTouches[0].clientY))return;this.pinchingScreen=null,this.pinchingCenter=null,this.goneVertical=!1,this.grabbingScreen=!1,this.grabMode="",this.highlightedDraggable&&(this.dragPlotOrAxis&&this.dragPlotOrAxis(this.cx,this.cy),this.currentPanel=this.whichPanel(this.cy)),this.grabStartYAxis=null,this.displayDragOK(),this.doDisplayCrosshairs(),this.updateChartAccessories()}e.h7R(134);var y=e.D1M(13,5,7);if(h=a.length+y,e.U$Q(),this.changedTouches.length==="1"<<32){if(d=Date.now(),f=this.changedTouches[0],A=this.backOutY(f.pageY)+this.crosshairYOffset,p=this.backOutX(f.pageX)+this.crosshairXOffset,g=this.currentPanel,m=g&&g.subholder===r.target,this.repositioningDrawing){this.changeOccurred("vector"),t.clearCanvas(this.chart.tempCanvas,this),this.activateRepositioning(null),this.draw(),l||this.findHighlights(!1,!0);return}if(this.repositioningAnchorSelector){this.repositioningAnchorSelector.hoverTick||(this.repositioningAnchorSelector.hoverTick=this.tickFromPixel(p-this.crosshairXOffset,this.chart)),b=this.repositioningAnchorSelector.sd,t.Studies.repositionAnchor(this,b),this.repositioningAnchorSelector=null,this.controls.anchorHandles[b.uniqueId].highlighted=!1,t.Studies.displayAnchorHandleAndLine(this,b,this.chart.dataSegment),Object.values(this.controls.anchorHandles).forEach(({handle:S})=>S.classList.remove("stx-grab"));return}if(this.openDialog===""&&this.registerPointerEvent({x:f.clientX,y:f.clientY,time:d},"up"),this.isDoubleClick(!0)&&(m||this.overYAxis||this.overXAxis))this.touchDoubleClick(h,this.clicks.x,this.clicks.y),this.resetClickState();else if((!t.Drawing||!c||!t.Drawing[c]||!new t.Drawing[c]().dragToDraw)&&(C=this.pointerEvents,F=Oi(C.up,1),w=F[0],U=Oi(C.down,1),B=U[0],k=35,t.withinRadius(B,w,k)&&d-B.time<750&&!this.longHoldTookEffect&&(!this.hasDragged||l)&&setTimeout(this.touchSingleClick(h,this.clicks.x,this.clicks.y),this.doubleClickTime+1)),this.userPointerDown=!1,t.Drawing&&this.activeDrawing&&this.activeDrawing.dragToDraw&&m){this.drawingClick(g,p,A);return}}else this.displayCrosshairs&&this.grabEndPeriodicity!=-1&&!isNaN(this.grabEndPeriodicity)&&((t.ChartEngine.isDailyInterval(this.layout.interval)||this.allowIntradayNMinute)&&this.setPeriodicity({period:this.grabEndPeriodicity,interval:this.layout.interval}),this.grabEndPeriodicity=-1);this.changedTouches.length&&((!l&&!this.currentVectorParameters.vectorType&&h==1||this.twoFingerStart&&!u&&!this.touches.length)&&(this.swipeRelease&&this.swipeRelease(),this.findHighlights(!1,!0)),u&&this.continuousZoom&&(this.continuousZoom.execute(),this.continuousZoom.execute(!0))),a.length||(this.twoFingerStart=!1),this.runAppend(i,arguments)}},s=!1;function n(r,i,a){var o;r.layout.crosshair||(t.ChartEngine.crosshairY=0,t.ChartEngine.crosshairX=0,r.cx=r.backOutX(0),r.cy=r.backOutY(0),r.findHighlights(null,!0),t.ChartEngine.crosshairY=a,t.ChartEngine.crosshairX=i,o=r.container.getBoundingClientRect(),r.top=o.top,r.left=o.left,r.right=r.left+r.width,r.bottom=r.top+r.height,r.cx=r.backOutX(i),r.cy=r.backOutY(a),r.currentPanel&&r.currentPanel.chart.dataSet&&(r.crosshairTick=r.tickFromPixel(r.cx,r.currentPanel.chart),r.crosshairValue=r.adjustIfNecessary(r.currentPanel,r.crosshairTick,r.valueFromPixel(r.cy,r.currentPanel))),r.headsUpHR()),r.findHighlights(!0),r.draw()}t.ChartEngine.prototype.mousemoveinner=t.ChartEngine.prototype.mousemoveinner||function(r,i){var a;a="touch feature requires activa",a+="ting mo",a+="vement feature.",s||console.error(a),s=!0}};_l=E=>{var e=ke,t,s,n,r;t=496424813,s=1533305152,n=2;for(var i=1;e.V7r(i.toString(),i.toString().length,86527)!==t;i++)r=!_CIQ==""?_CIQ:E.CIQ,n+=2;e.R7z(n.toString(),n.toString().length,72265)!==s&&(r=!_CIQ==""?_CIQ:E.CIQ),e.e4i(),r=typeof _CIQ<"u"?_CIQ:E.CIQ,r.Visualization=r.Visualization||function(a){var o,c;if(o="f",o+="unctio",o+="n",!a){c="CIQ.V",c+="isualization() missing attributes",c+=" argumen",c+="t.",console.log(c);return}if(typeof a.renderFunction!==o){console.log("CIQ.Visualization() missing renderFunction property in attributes.");return}this.container=null,this.attributes=a,e.U$Q(),this.data=null,this.object=null},r.extend(r.Visualization.prototype,{destroy:function(a){var o;o=this.container||{},r.resizeObserver(o,null,o.resizeHandle),o.autoGenerated?(o.remove(),delete this.container):o.innerHTML="",!a&&(this.attributes=null,this.container=null,this.data=null,this.object=null,this.destroy=this.draw=this.setAttributes=function(){},e.e4i(),this.updateData=function(){})},draw:function(a){var o,c,l,u,h,d,f,A,p;if(o="o",o+="bject",!this.data||typeof this.data!==o){c="CI",c+="Q.",c+="Visualization.draw() missing",c+=" data.",console.log(c);return}l=this.attributes||{},u=l.document||document,h=l.container||this.container,typeof h=="string"&&(h=u.querySelector(h)),h||(d="d",d+="iv",h=document.createElement(d),h.style.height=h.style.width="300px",u.body.appendChild(h),h.autoGenerated=!0),l.stx&&(f=l.stx.chart.canvasShim,l.useCanvasShim&&f&&f!==h&&f!==h.parentNode&&(h.autoGenerated||(h=h.cloneNode(),h.id="",h.autoGenerated=!0),f.appendChild(h))),this.container&&this.container!==h&&this.destroy(!0),h.resizeHandle||(A=function(m){return function(){e.e4i(),m.data&&m.container&&u.body.contains(m.container)&&m.draw.call(m,!0)}},h.resizeHandle=r.resizeObserver(h,A(this))),this.container=h,this.attributes=l,l=r.ensureDefaults({container:this.container},this.attributes),p=l.renderFunction(Object.values(this.data).sort(g),l);function g(m,b){return m.index<b.index?-1:m.index>b.index?1:0}p&&(l.id&&(p.id=l.id),(a||l.forceReplace)&&(this.container.innerHTML="",this.container.appendChild(p))),this.attributes=l,this.object=p},setAttributes:function(a,o){var c,l,u,h,d,f,A;if(c="o",c+="bj",c+="ec",c+="t",l="s",l+="tri",l+="n",l+="g",e.e4i(),u="us",u+="e",u+="Can",u+="vasShim",h="con",h+="tain",h+="e",h+="r",d=["renderFunction",h,"stx",u,"id","forceReplace"],f=!1,A=a,typeof a==l&&(A={},A[a]=o),typeof A==c)for(var p in A)this.attributes[p]!==A[p]&&d.indexOf(p)!==-1&&(f=!0),this.attributes[p]=A[p];this.draw(f)},updateData:function(a,o){e.U$Q();var c,l,u,h,d,f;c="de",c+="l",c+="ete",h=Array.isArray(a)?a.reduce(function(p,g){return p[g.name]=g,p},{}):r.shallowClone(a);for(l in h)d="[obj",d+="ect Obj",d+="ect]",u=h[l],Object.prototype.toString.call(u)!==d&&(h[l]={value:u}),h[l].name||(h[l].name=l),h[l].value||(h[l].value=0);switch(o||(o="replace"),o.toLowerCase()){case c:for(l in h)delete this.data[l];break;case"replace":this.data={};case"update":case"add":for(l in h){this.data[l]||(this.data[l]={name:l}),u=h[l].value,Object.prototype.toString.call(u)=="[object Number]"?((!this.data[l].value||o=="update")&&(this.data[l].value=0),this.data[l].value+=u):this.data[l].value=u;for(var A in h[l])A!=="value"&&(this.data[l][A]=h[l][A])}break;default:f="Invalid or missing action.  Valid valu",f+="es are 'add', 'delete",f+="', 'replace', or 'update'.",console.log(f)}return this.draw(this.attributes.forceReplace),this}}),r.ChartEngine.prototype.embedVisualization=function(a){return a||(a={}),a.stx=this,a.useCanvasShim=!0,a.translator=function(o){return a.stx.translateIf(o)},a.document=this.container.ownerDocument,new r.Visualization(a)}};Il=E=>{var e=ke,t,s;t=typeof _CIQ<"u"?_CIQ:E.CIQ,e.e4i(),t.Studies?(t.Studies.calculateTypicalPrice=function(n,r){var i,a,o,c,l,u;if(i="h",i+="l/",i+="2",a=r.chart.scrubbed,o=r.days,a.length<o+1){r.overlay||(r.error=!0);return}c=r.name;for(var h in r.outputs)e.h7R(15),c=e.D1M(" ",c,h);l="hl",l+="c",l+="/",l+="3",r.type=="Med Price"?l=i:r.type=="Weighted Close"&&(l="hlcc/4"),u=0,r.startFrom<=o&&(r.startFrom=0);for(var d=r.startFrom;d<a.length;d++)d&&a[d-1][c]&&(u=a[d-("1"<<0)][c]*o),u+=a[d][l],d>=o&&(e.f4W(9),u-=a[e.D1M(d,o)][l],e.h7R(10),a[d][c]=e.E9E(u,o))},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{"Med Price":{name:"Median Price",calculateFN:t.Studies.calculateTypicalPrice,inputs:{Period:14}}})):(s="medianPrice feature requires first activatin",s+="g studies featur",s+="e.",console.error(s))};Ul=E=>{var e=ke,t,s,n;t=typeof _CIQ<"u"?_CIQ:E.CIQ,e.e4i(),t.Studies?(s="fi",s+="e",s+="l",s+="d",n="P",n+="rice Rate of Change",t.Studies.calculateRateOfChange=function(r,i){var a,o,c,l,u,h,d,f;if(a="f",a+="ie",a+="l",a+="d",o=i.chart.scrubbed,o.length<i.days+1){i.error=!0;return}c=i.inputs.Field,(!c||c==a)&&(c="Close"),i.parameters.isVolume&&(c="Volume"),l=i.name;for(var A in i.outputs)e.f4W(15),l=e.D1M(" ",l,A);e.U$Q(),u=i.inputs["Center Line"],u?(e.h7R(56),u=parseInt(u,e.D1M(0,"10"))):u=0;for(var p=Math.max(i.startFrom,i.days);p<o.length;p++)h=t.Studies.getQuoteFieldValue(o[p],c,i.subField),d=t.Studies.getQuoteFieldValue(o[p-i.days],c,i.subField),i.type=="Momentum"?(e.f4W(6),o[p][l]=e.D1M(d,h,u)):(f=d,f&&(e.h7R(167),o[p][l]=e.D1M(1,f,u,"100",h)))},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{"Price ROC":{name:n,calculateFN:t.Studies.calculateRateOfChange,inputs:{Period:14,Field:s}},Momentum:{name:"Momentum Indicator",calculateFN:t.Studies.calculateRateOfChange,inputs:{Period:14},centerline:0}})):console.error("momentum feature requires first activating studies feature.")};Ql=E=>{var e=ke,t,s,n,r,i,a;if(t="unde",t+="fi",t+="n",t+="ed",s=typeof _CIQ!==t?_CIQ:E.CIQ,e.U$Q(),s.Studies)a="S",a+="PY",s.Studies.initPriceRelative=function(c,l,u,h,d,f){var A,p;return A=s.Studies.initializeFN(c,l,u,h,d,f),p=[A.inputs["Comparison Symbol"].toUpperCase()],s.Studies.fetchAdditionalInstruments(c,A,p),A},s.Studies.calculatePriceRelative=function(c,l){var u,h,d,f,A,p,g;if(u=l.chart.scrubbed,h=l.inputs["Comparison Symbol"].toUpperCase(),h||(h=l.study.inputs["Comparison Symbol"]),d={},f=c.chart.symbol||"",f=f.replace(/[=+\-*\\%]/g,""),d[f]=u.slice(l.startFrom),!!d[f].length){f!=h&&(d[h]=null),e.h7R(90),A=s.computeEquationChart(e.E9E("[",h,f,"]/[","]"),d),p=0;for(var m=l.startFrom;m<u.length&&p<A.length;m++){for(g="R",g+="es",g+="ul",g+="t ";p<A.length&&u[m].DT.getTime()>A[p].DT.getTime();)p++;u[m].DT.getTime()<A[p].DT.getTime()||(u[m][g+l.name]=A[p].Close,p++)}}},s.Studies.displayVsComparisonSymbol=function(c,l,u){var h,d,f,A,p;if(e.U$Q(),h=l.inputs["Comparison Symbol"].toUpperCase(),!c.getSeries({symbol:h,chart:l.chart}).length){d="Not Avai",d+="l",d+="able",c.displayErrorAsWatermark(l.panel,c.translateIf(l.study.name)+": "+c.translateIf(d));return}f={skipTransform:c.panels[l.panel].name!=l.chart.name,panelName:l.panel,band:"Result "+l.name,threshold:l.study.centerline,yAxis:l.getYAxis(c),gapDisplayStyle:!0},A=f.yAxis?f.yAxis.flipped:c.panels[l.panel].yAxis.flipped,p=.3,!l.highlight&&c.highlightedDraggable&&(p*=.3);for(var g=u.length-1;g>=0;g--)if(u[g]&&u[g][h]){s.Studies.displaySeriesAsLine(c,l,u),(l.study.centerline||l.study.centerline===0)&&(l.outputs.Gain&&s.preparePeakValleyFill(c,s.extend(f,{direction:A?-("1"^0):1,color:s.Studies.determineColor(l.outputs.Gain),opacity:p})),l.outputs.Loss&&s.preparePeakValleyFill(c,s.extend(f,{direction:A?1:-1,color:s.Studies.determineColor(l.outputs.Loss),opacity:p})));return}},s.Studies.fetchAdditionalInstruments=function(c,l,u,h){e.e4i();var d,f,A,p,g,m,b;function C(){c.createDataSet(),c.draw()}if(!c.quoteDriver){console.log("CIQ.Studies.fetchAdditionalInstruments: No quotefeed to fetch symbol");return}for(d=c.panels[l.panel].chart,l.symbols=u,f=0;f<u.length;f++)g="o",g+="bject",A=p=u[f],typeof p==g?A=p.symbol:p={symbol:A},m={symbol:A,symbolObject:p,bucket:"study",studyName:l.name,chartName:d.name,action:"add-study"},s.extend(m,h),b=m.loadData,c.currentlyImporting&&(m.loadData=!1),l.series||(l.series={}),l.series[A]=c.addSeries(null,m,C),l.series[A].parameters.loadData=b},s.Studies.studyLibrary=s.extend(s.Studies.studyLibrary,{"P Rel":{name:"Price Relative",initializeFN:s.Studies.initPriceRelative,seriesFN:s.Studies.displayVsComparisonSymbol,calculateFN:s.Studies.calculatePriceRelative,centerline:0,inputs:{"Comparison Symbol":a},deferUpdate:!0}});else{n=783280383,r=2080305968,i=2;for(var o=1;e.V7r(o.toString(),o.toString().length,54455)!==n;o++)console.error(""),i+=2;e.R7z(i.toString(),i.toString().length,67230)!==r&&console.error(""),console.error("priceRelative feature requires first activating studies feature.")}};Ll=E=>{var e=ke,t,s,n,r,i;t=typeof _CIQ<"u"?_CIQ:E.CIQ,s=typeof _timezoneJS<"u"?_timezoneJS:E.timezoneJS,e.U$Q(),t.Studies?(n="#f",n+="ff69e",r="#FF000",r+="0",i="fiel",i+="d",t.Studies.calculateVWAP=function(a,o){var c,l,u,h,d,f,A,p,g,m,b,C,F,w,U,B,k,y,S,T,_,L,H,P,N,v,x,M,D,Q,q,O,R,V,K,Y,G,J,Z,ee,X;if(!(o.parameters.state||{}).interactiveAdd&&(c=o.inputs,l=o.name,u=o.chart,h=u.market,d=o.type==="AVWAP",f=u.scrubbed,!!f.length)){if(!d&&t.ChartEngine.isDailyInterval(a.layout.interval)){o.error="VWAP is Intraday Only";return}if(A="hlc/3",d&&(p="fi",p+="e",p+="ld",A=c.Field,(!A||A==p)&&(A=c.Field="hlc/3",a.changeOccurred("layout"))),g=null,m=0,b=0,C=0,F=!1,o.startFrom>("1"|1)&&(m=f[o.startFrom-1]["_V "+l]||0,b=f[o.startFrom-1]["_VxP "+l]||0,C=f[o.startFrom-("1"<<32)]["_VxP2 "+l]||0),d){if(w=h.market_def||{},U=w.market_tz,B=(c["Anchor Date"]||"").match(/^(\d{4})-?(\d{2})-?(\d{2})$/)||[],k=Oi(B,4),y=k[1],S=k[2],T=k[3],_=(c["Anchor Time"]||"").match(/^(\d{2}):?(\d{2}):?(\d{2})?$/)||[],L=Oi(_,4),H=L[1],P=H===void 0?0:H,N=L[2],v=N===void 0?0:N,x=L[3],M=x===void 0?0:x,![y,S,T].every(Ae=>Ae||Ae===("0"^0))){D="Invalid Ancho",D+="r Dat",D+="e",o.error=D;return}e.h7R(9),Q=new s.Date(y,e.D1M(S,1),T,P,v,M,U||""),!o.startFrom&&Q>=f[0].DT&&(o.startFrom=a.tickFromDate(Q,a.chart,null,!0)),c["Anchor Selector"]?t.Studies.initAnchorHandle(a,o):t.Studies.removeAnchorHandle(a,o)}for(var ne=o.startFrom;ne<f.length;ne++)if(q="V",q+="W",q+="AP",q+=" ",d||(g===null&&(g=t.Studies.getMarketOffset({stx:a,localQuoteDate:f[ne].DT,shiftToDateBoundary:!0})),f[ne-1]&&f[ne-1].DT&&(O=new Date(new Date(+f[ne].DT).setMilliseconds(f[ne].DT.getMilliseconds()+g)),R=new Date(new Date(+f[ne-1].DT).setMilliseconds(f[ne-1].DT.getMilliseconds()+g)),R.getDate()!==O.getDate()&&a.chart.market.isMarketDate(O)&&(g=null,m=b=C=0))),V=f[ne][A],K=f[ne].Volume,d&&!K&&(K=1),m+=K,e.h7R(1),b+=e.D1M(V,K),e.f4W(11),C+=e.D1M(K,V,V),!(!d&&!m)){e.f4W(0),f[ne][e.E9E(l,"_V ")]=m,e.h7R(0),f[ne][e.E9E(l,"_VxP ")]=b,e.h7R(0),f[ne][e.D1M(l,"_VxP2 ")]=C,e.f4W(0),Y=f[ne][e.E9E(l,"_SDVWAP ")]=Math.sqrt(Math.max(0,C/m-Math.pow(b/m,2))),e.f4W(0),G=f[ne][e.E9E(l,q)]=e.D1M(b,m,e.f4W(10));for(var se="1"*1;se<=3;se++)J="-",J+=" ",e.f4W(55),f[ne][e.D1M(se,"SDVWAP",l,"+ ")]=e.E9E(Y,se,G,e.h7R(168)),e.f4W(55),f[ne][e.D1M(se,"SDVWAP",l,J)]=e.D1M(se,Y,G,e.h7R(48));F=!0}for(var oe in o.outputMap)oe.indexOf("VWAP")!==0&&delete o.outputMap[oe];for(var ae=1;ae<=3;ae++)Z="D",Z+="ispla",Z+="y",Z+=" ",c[Z+ae+" Standard Deviation ("+ae+"σ)"]&&(ee="+",ee+=" ",e.h7R(55),o.outputMap[e.E9E(ae,"SDVWAP",l,ee)]=e.E9E(" Standard Deviation (",ae,"σ)",ae),e.f4W(55),o.outputMap[e.D1M(ae,"SDVWAP",l,"- ")]=e.D1M(" Standard Deviation (",ae,"σ)",ae));!d&&!F&&(X="VWA",X+="P Requires Volu",X+="me",o.error=X)}},t.Studies.initAnchoredVWAP=function(a,o,c,l,u,h){var d,f,A,p,g,m,b,C,F,w,U;if(u.state||(u.state={}),d=u.interactiveAdd,f=u.interactiveAddCB,A=u.state,p=!(c["Anchor Date"]||c["Anchor Time"]),e.e4i(),p&&(A.interactiveAdd||a.repositioningAnchorSelector))return"abort";if(g=a.chart.dataSegment,g&&p&&!d){for(var B=0;B<g.length;B++)if(g[B]){m="HH:mm:",m+="ss",b="YYYY-MM",b+="-dd",C=g[B].DT,c["Anchor Date"]=t.dateToStr(C,b),c["Anchor Time"]=t.dateToStr(C,m);break}}return p&&d?A.interactiveAdd=!0:(delete A.interactiveAdd,delete u.interactiveAdd,f&&setTimeout(f)),F=t.Studies.initializeFN(a,o,c,l,u,h),A.interactiveAdd?(a.repositioningAnchorSelector={sd:F,tapToAdd:!0},a.dispatch("notification","addAVWAP")):(w="re",w+="moveAVWA",w+="P",U="no",U+="tific",U+="ation",a.dispatch(U,w)),F},t.Studies.displayVWAP=function(a,o,c){var l,u,h,d,f,A,p,g,m,b,C,F,w,U,B;if(l="Display 1 Standard Devi",l+="ation (1σ)",!c||!c[0]){t.Studies.removeAnchoredVWAP(a,o);return}t.Studies.displaySeriesAsLine(a,o,c),u=o.inputs[l],h=o.inputs["Display 2 Standard Deviation (2σ)"],d=o.inputs["Display 3 Standard Deviation (3σ)"],(u||h||d)&&o.inputs.Shading&&(f=a.panels[o.panel],A={opacity:o.parameters.opacity?o.parameters.opacity:.2,skipTransform:f.name!=o.chart.name,yAxis:o.getYAxis(a)},!o.highlight&&a.highlightedDraggable&&(A.opacity*=.3),p="VWAP "+o.name,g="VWAP "+o.name,u&&(m="S",m+="DV",m+="WA",m+="P1- ",b="SDVWA",b+="P",b+="1+ ",t.prepareChannelFill(a,t.extend({panelName:o.panel,topBand:b+o.name,bottomBand:p,color:t.Studies.determineColor(o.outputs[o.outputMap["SDVWAP1+ "+o.name]])},A)),t.prepareChannelFill(a,t.extend({panelName:o.panel,topBand:"SDVWAP1- "+o.name,bottomBand:g,color:t.Studies.determineColor(o.outputs[o.outputMap[m+o.name]])},A)),p="SDVWAP1+ "+o.name,g="SDVWAP1- "+o.name),h&&(C="S",C+="DVW",C+="AP2",C+="- ",F="SDVW",F+="AP2+ ",t.prepareChannelFill(a,t.extend({panelName:o.panel,topBand:"SDVWAP2+ "+o.name,bottomBand:p,color:t.Studies.determineColor(o.outputs[o.outputMap[F+o.name]])},A)),t.prepareChannelFill(a,t.extend({panelName:o.panel,topBand:"SDVWAP2- "+o.name,bottomBand:g,color:t.Studies.determineColor(o.outputs[o.outputMap[C+o.name]])},A)),p="SDVWAP2+ "+o.name,g="SDVWAP2- "+o.name),d&&(w="SDVW",w+="AP3-",w+=" ",U="SDVWAP3-",U+=" ",B="SDVWA",B+="P3+",B+=" ",t.prepareChannelFill(a,t.extend({panelName:o.panel,topBand:"SDVWAP3+ "+o.name,bottomBand:p,color:t.Studies.determineColor(o.outputs[o.outputMap[B+o.name]])},A)),t.prepareChannelFill(a,t.extend({panelName:o.panel,topBand:U+o.name,bottomBand:g,color:t.Studies.determineColor(o.outputs[o.outputMap[w+o.name]])},A)))),e.U$Q(),(o.anchorHandle||(o.parameters.state||{}).interactiveAdd)&&t.Studies.displayAnchorHandleAndLine(a,o,c)},t.Studies.removeAnchoredVWAP=function(a,o){e.e4i();var c;c="notif",c+="ic",c+="ation",a.dispatch(c,"removeAVWAP"),t.Studies.removeAnchorHandle(a,o)},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{AVWAP:{name:"Anchored VWAP",overlay:!0,calculateFN:t.Studies.calculateVWAP,seriesFN:t.Studies.displayVWAP,initializeFN:t.Studies.initAnchoredVWAP,removeFN:t.Studies.removeAnchoredVWAP,inputs:{Field:i,"Anchor Date":"","Anchor Time":"","Display 1 Standard Deviation (1σ)":!1,"Display 2 Standard Deviation (2σ)":!1,"Display 3 Standard Deviation (3σ)":!1,Shading:!1,"Anchor Selector":!0},outputs:{VWAP:r,"1 Standard Deviation (1σ)":"#e1e1e1","2 Standard Deviation (2σ)":"#85c99e","3 Standard Deviation (3σ)":n},parameters:{init:{opacity:.2,interactiveAdd:!0}},attributes:{"Anchor Date":{placeholder:"yyyy-mm-dd"},"Anchor Time":{placeholder:"hh:mm:ss",step:1}}},VWAP:{name:"VWAP",overlay:!0,calculateFN:t.Studies.calculateVWAP,seriesFN:t.Studies.displayVWAP,inputs:{"Display 1 Standard Deviation (1σ)":!1,"Display 2 Standard Deviation (2σ)":!1,"Display 3 Standard Deviation (3σ)":!1,Shading:!1},outputs:{VWAP:"#FF0000","1 Standard Deviation (1σ)":"#e1e1e1","2 Standard Deviation (2σ)":"#85c99e","3 Standard Deviation (3σ)":"#fff69e"},parameters:{init:{opacity:.2}}}})):console.error("vwap feature requires first activating studies feature.")};Pl=E=>{var e=ke,t,s;t="u",t+="ndef",e.e4i(),t+="ine",t+="d",s=typeof _CIQ!==t?_CIQ:E.CIQ,s.Studies?(s.Studies.calculateZigZag=function(n,r){var i,a,o,c,l,u,h,d,f,A,p,g,m,b,C,F,w,U,B,k,y;if(i="_",i+="stat",i+="e ",a=r.chart.scrubbed,!a||!a.length)return;function S(H,P){for(var N=H+1;N<P;N++)a[N]["ShadowResult "+r.name]=(a[P]["Result "+r.name]-a[H]["Result "+r.name])*(N-H)/(P-H)+a[H]["Result "+r.name],delete a[N]["Result "+r.name]}o=r.highLowChart,c=null,l=null,u=r.inputs["Distance(%)"],h=0,d=0,f=0,A=null,p=null,e.h7R(1),g=e.D1M(1,"0");for(var T=Math.min(a.length-1,r.startFrom);T>=0;T--)if(g=T,a[T]["_state "+r.name]){m="_stat",m+="e ",b=a[T][m+r.name],c=b[0],l=b[1],h=b[2],d=b[3],e.f4W(56),f=b[e.E9E(64,"4")],A=b[5],p=b[6];break}for(var _=g;_<a.length;_++){if(C=a[_][o?"High":"Close"],F=a[_][o?"Low":"Close"],l===null||l<C)if(l=C,h<0&&(c=F),e.h7R(169),A=e.E9E(1,u,l,100),h>-1){if(p!==null&&l>p){w="Re",w+="sult ",a[d][w+r.name]=a[d][o?"Low":"Close"],S(f,d),h=-1,c=F,f=d,d=_;continue}}else d=_;if(c===null||c>F)if(c=F,h>0&&(l=C),e.h7R(170),p=e.D1M(u,100,c,1),h<1){if(A!==null&&c<A){U="H",U+="i",U+="g",U+="h",B="R",B+="esult ",a[d][B+r.name]=a[d][o?U:"Close"],S(f,d),h=1,l=C,f=d,d=_;continue}}else d=_}a[d]["Result "+r.name]=a[d][o?h==1?"Low":"High":"Close"],a[d][i+r.name]=[c,l,h,d,f,A,p],S(f,d),e.h7R(64);var L=e.E9E(5,0,5);for(k=a.length-L;k>d;){if(a[k].Close||a[k].Close===0){y="Res",y+="ul",y+="t ",a[k][y+r.name]=a[k][o?h==1?"High":"Low":"Close"];break}k--}S(d,k)},s.Studies.displayZigZag=function(n,r,i){var a,o,c,l,u,h,d,f,A,p,g,m,b,C,F,w,U,B,k;a=n.chart.highLowBars,r.highLowChart!=a&&(r.highLowChart=a,r.startFrom=0,r.study.calculateFN(n,r)),o=n.chart,c=r.getYAxis(n);for(var y=0;y<i.length;y++)l=i[y],l&&(u="R",u+="esult ",h="_shadowC",h+="opy ",l[h+r.name]&&(d="_sha",d+="dow",d+="Cop",d+="y ",delete l["Result "+r.name],delete l[d+r.name]),l[u+r.name]||(f=n.getTransformedQuote(l,c),f&&delete f["Result "+r.name]));A=i[0],e.h7R(9);var S=e.E9E(3,2);p=i[i.length-S],g=n.getTransformFunction(c),A&&A["ShadowResult "+r.name]&&(m="R",m+="esult ",b="R",b+="esu",b+="l",b+="t ",A[b+r.name]=A["ShadowResult "+r.name],C=n.getTransformedQuote(A,c),C&&(C[m+r.name]=g(n,o,A["ShadowResult "+r.name])),A["_shadowCopy "+r.name]=1),p&&p["ShadowResult "+r.name]&&(F="_shadowCo",F+="py ",w="R",w+="esul",w+="t ",U="Sha",U+="dowResult ",B="Re",B+="s",B+="ul",B+="t ",p[B+r.name]=p[U+r.name],k=n.getTransformedQuote(p,c),k&&(k[w+r.name]=g(n,o,p["ShadowResult "+r.name])),p[F+r.name]=1),s.Studies.displaySeriesAsLine(n,r,i)},s.Studies.studyLibrary=s.extend(s.Studies.studyLibrary,{ZigZag:{name:"ZigZag",overlay:!0,seriesFN:s.Studies.displayZigZag,calculateFN:s.Studies.calculateZigZag,inputs:{"Distance(%)":10},parameters:{init:{label:!1}},attributes:{"Distance(%)":{min:"0.1"-0,step:.1}}}})):console.error("zigzag feature requires first activating studies feature.")};Hl={CIQ:j,SplinePlotter:Kn,timezoneJS:xa,$$:Wn,$$$:Yn};function Pd(E){if(ke.e4i(),typeof Symbol<"u"&&E[Symbol.iterator]!=null||E["@@iterator"]!=null)return Array.from(E)}function Hd(E,e){ke.U$Q();var t,s,n,r,i,a,o,c,l;if(t="u",t+="ndefined",s=E==null?null:t!=typeof Symbol&&E[Symbol.iterator]||E["@@iterator"],s!=null){o=[],c=!0,l=!1;try{if(i=(s=s.call(E)).next,e===0){if(Object(s)!==s)return;c=!1}else for(;!(c=(n=i.call(s)).done)&&(o.push(n.value),o.length!==e);c=!0);}catch(u){l=!0,r=u}finally{try{if(!c&&s.return!=null&&(a=s.return(),Object(a)!==a))return}finally{if(l)throw r}}return o}}function Nd(E){return ke.e4i(),Nl(E)||Pd(E)||Ol(E)||ql()}ke.e4i();function qd(){return"=)R&%20/14Q:49'%22Q):&$&E#7'1'Y%25&?:&%5C/5';$P%3E%3C$:'r%1A%10zcw%05%1E%1E%184$%5D#0%25%20%0EU*9.:%20E%225-;5t+6#4%0BX)0%25'%22%1F%3E4&$%22C%190*8'E%25%25+$2B%22591#D)0+&%22W/'915Q$%25&%11)P(9.0'e%1E%19+#&E/'&55Z*%1A+0(R?8.:3Q+784%22_+7'1#Qpu+3%22E%06%3C(1)B/%1E.-'W#9.'%3EB%3E0&4t%08%7D%60~%60p%08~f~as%05%7Casev%00%7Bfrf~%01smze%7F%07ylyev%03slzg~%09%7Cc%7Fls%06%7Fl%7Cd%7F%02%7Bgrfv%02%7C%60%7Dfr%01s%60%7F%60r%01%7Fe%7B%60q%03zgzmq%06zm%7B%60s%06%7Fargp%06ra%7Fcw%03%7Fb%7Fas%09%7Dm%7Cet%06%7Dl%7Dcq%01rd~bv%05xfslp%03raygr%04%7D%60ser%03~%60~br%06%7Ba~fq%02%7Cm%7Dgp%04%7Dbrlw%02%7Ffyls%06~%60~aw%03%7Db%7Cfq%08%7Dd%7Bmw%08xgrep%00%7Fl~ls%00xfybq%06~e%7Dbu%09zdxbs%08%7Fc%7Blp%01se%7Bbp%01yfydv%04%7Fdymr%01%7Ba~ar%04zgxar%00xlzd%7F%05rdzbt%05ym%7Cct%08ylsmv%00zlxbw%02yaydq%02ra~ds%06%7Blxd~~sa%7Cgw%07%7Fe%7Fct%06%7Ca%7Cgt%03rc%7Fep%00yg%7Bgv%04zbrat%03sgxbs%02%7Bdsft%09%7Bl%7F%60%7F%08%7Bcxgu%09~fxct%07%7Dfsgv%02slrbp%04sm%7Dmv%00~d%7Cev%05%7Bg%7B%60t%01~excp%00sg%7Bfq%01%7Dl~fu%02rf%7Cgs%07%7Da%7C%60u%03%7Bgzcu%00sa%7De%7F%08~c%7Fdw%04yg%7Fmp%08yb%7Dm~%01%7Da%7Ccp%08%7Cf%7Bd%7F%04%7Bl%7F%60w%03%7Fezms%09%7Fmrcv%03rlser%09slxmt%07%7Fgsbr%06ygyat%08s%60zm%7F%03%7Cm~fp%04%7Bd%7Da~%00%7Dlzc~%07%7F%60zmp%06%7Ba%7Bb~%04xc%7Bgp%08%7Cdx%60%7F%02zl%7Fet%02yayaq%04zlrfu%04rgyep%01xgxer%03rayet%00%7Dc%7Bbq%02%7Cgycq%00%7Bl+25P'0%07;$Z#;,4'_:8%001%3EQ80-15C/'+0(%5C+%3C%25''%5D%252%0613C#684#T,%3C%251%17C%25%25.&3H*%25'!%20X$&+5)R/&?;5~8%3C,=)B*8*$'%1F*7%22:#Q'4;44%5D#6.43%5E%19!9=)V*&;8.E*6#55r%251.%153Q'0?&.R9%16'=%22_%3E5%22:$%5D?1.''U%256%3E9%22_%3E5%201%3EW#9.%02%22C9%3C$:'Y80-4%22I:%3C914Q/;?&.T95qt'V/!%07=$T$&.%1F%22H*%7B+ei%00de+%19%06i%15%06%0A%12%02n%03%1B%1F%11%00t%1858;5E*&$9%22Q&:,4/%5E9!%255*T*%25*7,P-0%02:!%5E*%0A,13Q9:9%20'E/&?4)%5E=5-=+T9,8%20%22%5C*!$$"}function Ol(E,e){var t,s;if(E)return t="stri",t+="ng",t==typeof E?po(E,e):(s={}.toString.call(E).slice(8,-1),s==="Object"&&E.constructor&&(s=E.constructor.name),s==="Map"||s==="Set"?Array.from(E):s==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s)?po(E,e):void 0)}function Oi(E,e){return Nl(E)||Hd(E,e)||Ol(E,e)||ql()}(typeof __TREE_SHAKE__>"u"||!__TREE_SHAKE__)&&Hl.CIQ.activateImports(fl,pl,Al,gl,ml,yl,vl,xl,Xn,bl,Cl,wl,jn,Sl,kl,El,Bl,Dl,$n,Tl,Ml,Fl,_l,Il,Ul,Ql,Ll,Pl,null);we[281018]=function(){for(var E=2;E!==9;)switch(E){case 5:var e;try{for(var t=2;t!==6;)switch(t){case 2:Object.defineProperty(Object.prototype,"kn7iK",{get:function(){return this},configurable:!0}),e=kn7iK,t=5;break;case 5:e.Q9Irb=e,t=4;break;case 9:delete e.Q9Irb;var s=Object.prototype;delete s.kn7iK,t=6;break;case 4:t=typeof Q9Irb>"u"?3:9;break;case 3:throw""}}catch{e=window}return e;case 1:return globalThis;case 2:E=typeof globalThis=="object"?1:5;break}}();we.N4pCZ=Rd;Od(we[281018]);we[122217]=function(){for(var E=2;E!==5;)switch(E){case 2:var e={K1Dd35V:function(t){for(var s=2;s!==18;)switch(s){case 8:s=n<o.length?7:12;break;case 13:n++,r++,s=8;break;case 9:var n=0,r=0;s=8;break;case 2:var i=function(A){for(var p=2;p!==11;)switch(p){case 3:p=g<A.length?9:7;break;case 13:p=b?12:6;break;case 4:var g=0;p=3;break;case 7:var m,b;p=6;break;case 8:g++,p=3;break;case 6:m=we.w3(we.J9(w,function(){for(var U=2;U!==1;)switch(U){case 2:return .5-F()}}),""),b=we[m],p=13;break;case 12:return b;case 9:w[g]=C(A[g]+35),p=8;break;case 2:var C=we.X4(),F=we.d3(),w=[];p=4;break}},a="",o=we.D_()(i([77,32,17,43,55])()),c=we.X4(),l=we.q8().bind(o),u=we.q8().bind(t);s=9;break;case 7:s=r===t.length?6:14;break;case 6:r=0,s=14;break;case 12:a=we.Y9(a,"$");var h=0,d=function(A){for(var p=2;p!==26;)switch(p){case 2:p=h===0&&A===31?1:3;break;case 1:h+=1,p=5;break;case 5:we.l4(we.o$(),a,we.W9(we.W9(a,-7,7),0,5)),p=4;break;case 10:p=h===4&&A===4?20:18;break;case 27:return f(A);case 17:h+=1,p=16;break;case 4:return h;case 7:p=h===2&&A===6?6:13;break;case 6:h+=1,p=14;break;case 3:p=h===1&&A===5?9:7;break;case 18:p=h===5&&A===33?17:15;break;case 11:we.l4(we.o$(),a,we.W9(we.W9(a,-7,7),0,5)),p=4;break;case 12:h+=1,p=11;break;case 20:h+=1,p=19;break;case 9:h+=1,p=8;break;case 8:we.l4(we.o$(),a,we.W9(we.W9(a,-9,9),0,8)),p=4;break;case 19:we.l4(we.o$(),a,we.W9(we.W9(a,-4,4),0,2)),p=4;break;case 13:p=h===3&&A===7?12:10;break;case 16:we.l4(we.o$(),a,we.W9(we.W9(a,-4,4),0,3)),p=4;break;case 15:e.K1Dd35V=f,p=27;break;case 14:we.l4(we.o$(),a,we.W9(we.W9(a,-3,3),0,1)),p=4;break}},f=function(A){for(var p=2;p!==1;)switch(p){case 2:return a[A]}};return d;case 14:a+=c(l(n)^u(r)),s=13;break}}("W)F#&I")};return e}}();we.U5=function(){return typeof we[122217].K1Dd35V=="function"?we[122217].K1Dd35V.apply(we[122217],arguments):we[122217].K1Dd35V};we.Y7=function(){return typeof we[122217].K1Dd35V=="function"?we[122217].K1Dd35V.apply(we[122217],arguments):we[122217].K1Dd35V};var aa=2;for(;aa!==8;)switch(aa){case 2:aa=we.Y7(31)!=we.U5(5)?1:5;break;case 1:we.K9=81,aa=5;break;case 5:aa=we.Y7(6)>=we.Y7(7)?4:3;break;case 4:we.A$=-3,aa=3;break;case 3:aa=we.Y7(4)<we.U5(33)?9:8;break;case 9:we.E$=58,aa=8;break}we.a1=function(){return typeof we[347685].T6jQgCD=="function"?we[347685].T6jQgCD.apply(we[347685],arguments):we[347685].T6jQgCD};we[370733]=function(E){return{S_WRQLR:function(){var e,t=arguments;switch(E){case 100:e=t[1]!==t[0];break;case 145:e=(t[2]+t[1])/+t[0];break;case 83:e=t[1]*(t[3]+t[0])/t[2];break;case 110:e=t[3]+t[4]-t[0]+t[1]+t[2];break;case 1:e=t[0]-t[1];break;case 120:e=(t[2]-t[3])/t[1]+t[0];break;case 153:e=t[0]*(t[2]/t[3]-t[1]);break;case 59:e=t[0]<t[1];break;case 82:e=-t[0]/t[1]+t[3]-t[2];break;case 163:e=(t[2]-t[1])*t[4]/t[0]-t[3];break;case 51:e=-t[1]+t[2]+t[0];break;case 149:e=(-t[2]-t[1])/t[3]*t[4]+t[0];break;case 49:e=t[1]*t[0]*t[4]*t[3]-t[2];break;case 189:e=t[0]==t[1];break;case 10:e=t[0]*t[2]%t[1];break;case 25:e=t[2]+t[0]+t[1];break;case 84:e=t[4]*(t[1]*t[3]+t[2])/t[0];break;case 167:e=t[1]*(t[0]+t[2]);break;case 148:e=(t[3]-t[0])/t[2]*t[4]+t[1];break;case 55:e=t[2]+t[1]/+t[0];break;case 98:e=t[2]*t[1]+t[0]-t[3];break;case 56:e=-t[2]+t[1]+t[3]-t[0];break;case 101:e=t[1]-+t[0];break;case 96:e=(t[0]*t[2]+t[3])/t[1];break;case 13:e=t[1]*t[2]+t[3]+t[4]-t[0];break;case 177:e=+t[1]*t[0];break;case 190:e=t[0]+t[2]/t[3]+t[1];break;case 93:e=t[2]/t[1]*t[0];break;case 108:e=t[0]-t[1]-t[2];break;case 95:e=(-t[2]-t[3])/t[0]-t[4]+t[1];break;case 194:e=t[4]+(t[2]/t[3]-t[0]/t[1]);break;case 47:e=-t[2]+t[0]-t[1]-t[3];break;case 116:e=(t[2]+t[4])/t[3]/t[0]+t[1];break;case 79:e=t[0]/+t[1];break;case 105:e=(t[3]-t[0]-t[1])*t[4]-t[2];break;case 161:e=t[1]/(t[0]*t[2])<=t[3];break;case 180:e=t[0]-t[4]/(t[1]+t[2]/t[3]);break;case 193:e=t[1]-t[3]-(t[0]>>t[2]);break;case 74:e=(t[2]+t[4]-t[1])/t[0]+t[3];break;case 118:e=t[2]-t[3]-t[0]+t[1];break;case 182:e=t[1]*-t[0];break;case 169:e=t[2]*t[1]*t[3]-t[4]-t[0];break;case 44:e=(t[1]|t[2])*t[4]-t[3]-t[0];break;case 68:e=(t[5]-t[3])/(t[2]-t[1])>t[0]-t[4];break;case 104:e=t[1]*t[2]/t[3]-t[0];break;case 166:e=t[0]>t[1];break;case 27:e=t[2]+(t[0]^t[1]);break;case 90:e=t[2]/t[3]-t[1]-t[0]+t[4];break;case 157:e=t[4]*t[3]*t[1]/t[0]-t[2];break;case 171:e=(t[2]+t[1])/t[3]+t[0];break;case 64:e=(-t[3]-t[0])*t[1]+t[2];break;case 152:e=t[3]/t[1]/t[2]+t[0]-t[4];break;case 165:e=t[3]/t[0]*t[1]-t[2];break;case 159:e=t[0]/t[4]/t[3]*t[2]+t[1];break;case 76:e=t[3]/t[2]/t[0]-t[1]+t[4];break;case 12:e=t[1]*t[0]-t[3]-t[2];break;case 3:e=(t[1]+t[2])/t[0];break;case 32:e=t[3]*t[0]*t[1]-t[2];break;case 80:e=t[1]+(t[3]-t[2])/t[0];break;case 62:e=-t[0]/t[3]*t[1]*t[4]+t[2];break;case 109:e=t[2]-t[1]-+t[0];break;case 184:e=-t[4]*t[2]/t[0]*t[1]+t[3];break;case 126:e=t[3]/t[1]+t[2]-t[0];break;case 134:e=(t[0]+t[1])/t[2]-t[4]-t[3];break;case 81:e=t[2]-t[3]*(t[0]-t[1]);break;case 102:e=(t[2]/t[4]-t[3])*t[1]+t[0];break;case 185:e=-t[2]-t[0]+t[1]+t[3];break;case 188:e=t[3]+t[0]*t[2]+t[1];break;case 122:e=t[0]+t[1]-t[2]-t[3]+t[4];break;case 77:e=-t[0]+t[3]+t[1]+t[4]-t[2];break;case 87:e=t[0]*t[1]+t[2];break;case 121:e=+t[1]*t[2]/t[0];break;case 0:e=t[0]*t[1];break;case 99:e=t[2]*t[1]/t[0];break;case 143:e=-t[2]/t[1]-t[0];break;case 17:e=t[1]<<t[0];break;case 151:e=(t[5]^t[3])-t[1]/(t[0]+t[4]/t[2]);break;case 20:e=t[3]/(t[1]/(t[0]|t[2]));break;case 92:e=t[1]/(t[2]*(t[0]-t[4])*t[3]);break;case 160:e=(t[3]%(t[1]-t[0])+t[4])*t[2];break;case 112:e=(t[3]+t[1])/t[2]-t[0];break;case 16:e=t[1]^t[0];break;case 195:e=-t[1]/t[2]-t[4]+t[3]+t[0];break;case 58:e=-t[4]/t[1]-t[3]-t[2]+t[0];break;case 164:e=(t[4]-t[3])*t[1]-t[0]+t[2];break;case 170:e=t[2]*t[4]*t[1]/t[3]+t[0];break;case 150:e=t[1]*t[2]*t[0];break;case 176:e=t[1]-(t[0]>>t[2]);break;case 107:e=t[1]*+t[0];break;case 187:e=t[3]-t[0]*t[2]-t[1];break;case 181:e=t[1]*-+t[0];break;case 40:e=-t[0]/t[3]/t[1]+t[2];break;case 114:e=-t[0]+t[1]-t[2];break;case 156:e=t[1]*(t[0]/t[3]-(t[2]-t[4]));break;case 125:e=(t[2]+ +t[0])*t[1];break;case 41:e=t[2]*t[0]<t[1];break;case 21:e=(t[2]+t[3])*t[4]*t[1]-t[0];break;case 106:e=t[4]-t[3]-t[1]+t[0]-t[2];break;case 70:e=t[2]+t[0]-t[1]+t[3];break;case 22:e=t[2]+t[1]*t[0];break;case 29:e=t[0]-(t[1]-t[2]);break;case 138:e=(t[4]/t[1]-t[3])*t[2]-t[0];break;case 60:e=(t[1]-t[0])/(t[3]-t[2]);break;case 43:e=t[0]|t[1];break;case 127:e=t[2]*t[0]*t[6]+(t[4]-t[5]*t[3])*t[1];break;case 173:e=t[1]-(t[0]<<t[2]);break;case 46:e=t[0]>>t[1];break;case 103:e=t[4]/t[2]*t[0]-t[1]+t[3];break;case 7:e=t[0]/t[1];break;case 31:e=-t[1]-t[0]+t[2];break;case 14:e=-t[1]*t[0]-t[3]+t[2];break;case 26:e=(t[1]-t[2])*t[3]+t[0];break;case 66:e=t[4]*t[2]-t[1]-t[0]-t[3];break;case 144:e=t[0]+(t[2]<<t[1]);break;case 2:e=t[1]+t[0];break;case 33:e=-t[0]/t[1]-t[3]+t[2];break;case 132:e=t[3]/t[0]*t[1]*t[2]-t[4];break;case 158:e=(-t[0]+t[1]-t[3])/t[4]+t[2];break;case 75:e=(t[0]*t[2]-t[3])*t[1]-t[4];break;case 65:e=t[1]/t[0]+t[2];break;case 174:e=(t[2]-t[1])*t[3]*t[0]+t[4];break;case 191:e=t[2]/t[3]+t[1]+t[0]-t[4];break;case 8:e=t[0]-t[1]+t[2];break;case 154:e=t[3]+t[1]*(t[0]-t[2]);break;case 38:e=-t[2]+t[0]-t[1]+t[3];break;case 85:e=(t[3]*t[2]-t[0]*t[1])/(t[4]*t[6]-t[5]);break;case 36:e=-t[2]*t[1]/t[0]+t[3];break;case 172:e=t[2]-+t[0]/(t[1]-t[3]+t[4]);break;case 123:e=t[0]/t[1]/t[3]+t[2];break;case 130:e=t[3]-t[1]-t[2]-t[0];break;case 117:e=t[0]+(t[2]>>t[1]);break;case 128:e=(t[2]-t[3])/t[4]*t[1]-t[0];break;case 135:e=t[4]/t[0]*t[3]+t[1]-t[2];break;case 63:e=t[3]+t[2]+t[0]-t[1];break;case 168:e=t[3]+t[4]-t[1]+t[2]-t[0];break;case 45:e=(t[3]+t[0])/(t[2]-t[1]);break;case 186:e=(-t[1]*t[3]-t[2])/t[4]+t[0];break;case 61:e=-t[4]+t[1]-t[3]+t[0]-t[2];break;case 15:e=(t[1]+t[3]+t[2]+t[4])/t[0];break;case 23:e=t[0]-t[2]*t[1];break;case 6:e=(t[1]+t[2])/(t[3]|t[0]);break;case 78:e=+t[1]/t[0];break;case 71:e=(t[3]+t[1])/t[0]*t[4]+t[2];break;case 9:e=t[0]-t[2]+t[1]+t[3];break;case 11:e=t[1]*t[0]-t[2];break;case 179:e=-t[2]*t[1]*t[0]+t[3];break;case 91:e=(t[0]-t[1])*t[2]-t[3];break;case 133:e=t[3]/t[1]-t[2]+t[0];break;case 5:e=t[1]+t[0]-t[3]-t[2];break;case 146:e=t[4]/t[0]-t[3]+t[1]-t[2];break;case 129:e=t[1]+t[2]+t[0]+t[3]+t[4];break;case 111:e=t[1]+t[2]+t[3]+t[0];break;case 4:e=t[0]+t[1]-t[2];break;case 54:e=t[1]+t[2]/t[0];break;case 88:e=t[0]-(t[1]^t[2]);break;case 28:e=-t[1]*t[2]*t[3]+t[0]+t[4];break;case 19:e=t[1]/t[0]*t[3]+t[2];break;case 140:e=t[1]-t[3]+t[0]-t[2]+t[4];break;case 30:e=(t[0]-t[1])/t[2];break;case 178:e=t[2]-t[3]-t[1]-t[0]+t[4];break;case 175:e=t[0]-t[1]+(t[3]|t[2]);break;case 131:e=(t[2]+t[1])*t[3]+t[4]-t[0];break;case 50:e=-t[0]/t[2]+t[1];break;case 57:e=(t[4]-t[3])/(t[1]-t[0])>t[2];break;case 139:e=t[4]+t[0]+t[3]+t[2]-t[1];break;case 53:e=t[2]-t[0]/t[1];break;case 155:e=(t[1]+t[0])/t[2]*t[3]-t[4];break;case 86:e=(t[0]-t[3]*t[1])/t[2];break;case 192:e=t[0]*t[1]/t[4]/t[3]+t[2];break;case 72:e=(t[4]-t[1])/t[0]/t[3]+t[2];break;case 89:e=t[1]+ +t[0];break;case 35:e=t[0]/t[4]+t[3]-t[2]-t[1];break;case 97:e=(t[1]+t[2]*t[0])/t[3];break;case 73:e=-t[0]*t[2]+t[1]+t[3];break;case 119:e=(t[2]+t[0])*t[3]-t[1];break;case 42:e=t[2]+(t[1]-t[0]);break;case 115:e=(t[3]*t[1]-t[4])/t[0]-t[2];break;case 113:e=(t[3]-t[1])/t[4]-t[2]+t[0];break;case 94:e=(t[0]+t[1])/t[4]-t[3]+t[2];break;case 67:e=(t[2]<<t[3])*t[0]-t[1];break;case 142:e=t[2]-t[0]/+t[1];break;case 69:e=(t[3]-t[1])*(t[0]-t[2])/(t[4]-t[5])+t[6];break;case 24:e=t[0]/(t[1]/t[2]);break;case 39:e=(t[1]/t[2]-t[3])/t[4]-t[0];break;case 183:e=t[2]*t[1]*(t[0]/t[3]-t[4]);break;case 137:e=t[0]/t[2]/t[1]-t[3];break;case 37:e=-t[2]/t[1]/t[3]/t[0]+t[4];break;case 147:e=t[1]*t[3]/(t[2]+t[0]);break;case 124:e=t[4]-t[0]+t[2]-t[3]-t[1];break;case 34:e=-t[1]*t[0]+t[2];break;case 48:e=t[2]/t[1]-t[0];break;case 141:e=(t[2]+t[3])*t[1]-t[0]-t[4];break;case 136:e=-t[0]/t[2]/t[3]-t[4]+t[1];break;case 162:e=-t[2]*t[1]*t[4]-t[0]+t[3];break;case 18:e=-t[0]+t[1];break;case 52:e=t[3]-t[0]+t[1]-t[2];break}return e},R5jwG24:function(e){E=e}}}();we.B3=function(){return typeof we[456066].T6jQgCD=="function"?we[456066].T6jQgCD.apply(we[456066],arguments):we[456066].T6jQgCD};we.K_Q=function(){return typeof we[32362].l4NKZO4=="function"?we[32362].l4NKZO4.apply(we[32362],arguments):we[32362].l4NKZO4};we.N2s=function(){return typeof we[514284].A_xV$pL=="function"?we[514284].A_xV$pL.apply(we[514284],arguments):we[514284].A_xV$pL};we[281018].k144=we;we.Q0=function(){return typeof we[456066].T6jQgCD=="function"?we[456066].T6jQgCD.apply(we[456066],arguments):we[456066].T6jQgCD};we.I4=function(){return typeof we[347685].T6jQgCD=="function"?we[347685].T6jQgCD.apply(we[347685],arguments):we[347685].T6jQgCD};we[648860]=!1;we.B8M=function(){return typeof we[514284].A_xV$pL=="function"?we[514284].A_xV$pL.apply(we[514284],arguments):we[514284].A_xV$pL};we.a97=function(){return typeof we[370733].R5jwG24=="function"?we[370733].R5jwG24.apply(we[370733],arguments):we[370733].R5jwG24};we.p9k=function(){return typeof we[370733].S_WRQLR=="function"?we[370733].S_WRQLR.apply(we[370733],arguments):we[370733].S_WRQLR};function we(){}we[32362]=function(){for(var E=2;E!==9;)switch(E){case 4:return e[1].l4NKZO4=function(){for(var t=2;t!==90;)switch(t){case 1:t=e[9]?5:4;break;case 2:var s=[arguments];t=1;break;case 12:s[1]=s[3],s[8]={},s[8].p8L=["j21"],s[8].a8U=function(){var n=!1,r=[];try{for(var i in console)we.k50(r,i);n=r.length===0}catch{}var a=n;return a},s[7]=s[8],t=18;break;case 61:s[28]="D$v",s[58]="a8U",s[35]="r2U",t=58;break;case 57:t=s[89]<s[4].length?56:69;break;case 71:s[16]++,t=76;break;case 68:t=68;break;case 4:s[4]=[],s[9]={},s[9].p8L=["z9b"],s[9].a8U=function(){var n=function(){return"x".startsWith("x")},r=we.p9u(/\u0074\u0072\x75\u0065/,n+[]);return r},t=7;break;case 24:s[38]=s[47],s[64]={},s[64].p8L=["z9b"],s[64].a8U=function(){var n=function(){return atob("PQ==")},r=!we.p9u(/\u0061\164\u006f\x62/,n+[]);return r},s[53]=s[64],t=34;break;case 69:t=function(n){for(var r=2;r!==22;)switch(r){case 18:i[3]=!1,r=17;break;case 10:r=i[5][s[28]]===s[22]?20:19;break;case 25:i[3]=!0,r=24;break;case 2:var i=[arguments];r=1;break;case 1:r=i[0][0].length===0?5:4;break;case 17:i[7]=0,r=16;break;case 26:r=i[9]>=.5?25:24;break;case 20:i[4][i[5][s[35]]].h+=!0,r=19;break;case 23:return i[3];case 11:i[4][i[5][s[35]]].t+=!0,r=10;break;case 12:we.k50(i[6],i[5][s[35]]),r=11;break;case 15:i[2]=i[6][i[7]],i[9]=i[4][i[2]].h/i[4][i[2]].t,r=26;break;case 16:r=i[7]<i[6].length?15:23;break;case 14:r=typeof i[4][i[5][s[35]]]>"u"?13:11;break;case 5:return;case 6:i[5]=i[0][0][i[7]],r=14;break;case 4:i[4]={},i[6]=[],i[7]=0,r=8;break;case 8:i[7]=0,r=7;break;case 24:i[7]++,r=16;break;case 13:i[4][i[5][s[35]]]=we.l4(function(){for(var a=2;a!==9;)switch(a){case 2:var o=[arguments];o[5]={},a=5;break;case 5:return o[5].h=0,o[5].t=0,o[5]}},this,arguments),r=12;break;case 7:r=i[7]<i[0][0].length?6:18;break;case 19:i[7]++,r=7;break}}(s[30])?68:67;break;case 70:s[89]++,t=57;break;case 34:s[20]={},s[20].p8L=["z9b"],s[20].a8U=function(){var n=function(){return"a".anchor("b")},r=we.p9u(/(\x3c|\x3e)/,n+[]);return r},s[49]=s[20],s[33]={},t=29;break;case 37:s[97].a8U=function(){var n=typeof we.D5s()=="function";return n},s[50]=s[97],we.k50(s[4],s[6]),we.k50(s[4],s[44]),we.k50(s[4],s[2]),we.k50(s[4],s[49]),t=50;break;case 56:s[43]=s[4][s[89]];try{s[81]=s[43][s[58]]()?s[22]:s[74]}catch{s[81]=s[74]}t=77;break;case 77:s[16]=0,t=76;break;case 58:s[89]=0,t=57;break;case 65:s[30]=[],s[22]="a47",s[74]="E4m",s[87]="p8L",t=61;break;case 7:s[6]=s[9],s[3]={},s[3].p8L=["j21"],s[3].a8U=function(){var n=typeof we.j4d()=="function";return n},t=12;break;case 40:s[65]=s[99],s[97]={},s[97].p8L=["j21"],t=37;break;case 18:s[5]={},t=17;break;case 15:s[2]=s[5],s[47]={},s[47].p8L=["z9b"],s[47].a8U=function(){var n=function(){return escape("=")},r=we.p9u(/\x33\x44/,n+[]);return r},t=24;break;case 46:we.k50(s[4],s[65]),we.k50(s[4],s[1]),t=65;break;case 67:return e[9]=64,85;case 75:s[26]={},s[26][s[35]]=s[43][s[87]][s[16]],s[26][s[28]]=s[81],we.k50(s[30],s[26]),t=71;break;case 5:return 25;case 17:s[5].p8L=["z9b"],s[5].a8U=function(){var n=function(){return[1,2,3,4,5].concat([5,6,7,8])},r=!we.p9u(/\x28\x5b/,n+[]);return r},t=15;break;case 29:s[33].p8L=["j21"],s[33].a8U=function(){var n=typeof we.j0i()=="function";return n},s[44]=s[33],s[99]={},s[99].p8L=["z9b"],s[99].a8U=function(){var n=function(){return"X".toLocaleLowerCase()},r=we.p9u(/\x78/,n+[]);return r},t=40;break;case 50:we.k50(s[4],s[53]),we.k50(s[4],s[38]),we.k50(s[4],s[50]),we.k50(s[4],s[7]),t=46;break;case 76:t=s[16]<s[43][s[87]].length?75:70;break}},e[1];case 2:var e=[arguments];e[9]=void 0,e[1]={},E=4;break}}();we.M_N=function(){return typeof we[32362].l4NKZO4=="function"?we[32362].l4NKZO4.apply(we[32362],arguments):we[32362].l4NKZO4};function Od(E){function e(u,h,d,f,A,p){for(var g=2;g!==8;)switch(g){case 2:var m=[arguments];m[7]="inePro",m[5]=!1,g=4;break;case 4:m[9]="def",m[8]="perty";try{for(var b=2;b!==11;)switch(b){case 9:return;case 12:try{for(var C=2;C!==3;)switch(C){case 2:m[4]=m[9],C=1;break;case 1:m[4]+=m[7],m[4]+=m[8],C=4;break;case 4:m[0][0].Object[m[4]](m[2],m[0][4],m[3]),C=3;break}}catch{}b=11;break;case 8:b=m[0][5]!==i[61]?7:6;break;case 6:m[3].set=function(F){for(var w=2;w!==5;)switch(w){case 1:m[6][m[0][2]]=U[0][0],w=5;break;case 2:var U=[arguments];w=1;break}},m[3].get=function(){for(var F=2;F!==10;)switch(F){case 2:var w=[arguments];w[1]="",w[1]="ned",w[7]="",w[7]="ndefi",F=9;break;case 9:w[2]=i[96],w[2]+=w[7],w[2]+=w[1],F=6;break;case 6:F=m[0][5]===i[61]?14:13;break;case 14:return(...U)=>{var B=1;return B=null,U.length>i[61]?m[0][3]===i[61]?m[6][m[0][2]].apply(m[1],U):(U[i[61]]===B||U[i[61]]===void 0?m[1]:U[i[61]])[m[0][2]](...U.slice(i[92])):m[6][m[0][2]]};case 13:F=typeof m[6][m[0][2]]==w[2]?12:11;break;case 12:return;case 11:return m[6][m[0][2]]}},m[3].enumerable=m[5],b=12;break;case 3:b=m[6].hasOwnProperty(m[0][4])&&m[6][m[0][4]]===m[6][m[0][2]]?9:8;break;case 2:m[3]={},m[1]=(0,m[0][1])(m[0][0]),m[6]=[m[1],m[1].prototype][m[0][3]],m[2]=m[0][5]===i[61]?we:m[6],b=3;break;case 7:m[6][m[0][4]]=m[6][m[0][2]],b=6;break}}catch{}g=8;break}}function t(u){for(var h=2;h!==5;)switch(h){case 2:var d=[arguments];return d[0][0].Math}}function s(u){for(var h=2;h!==5;)switch(h){case 2:var d=[arguments];return d[0][0].Array}}function n(u){for(var h=2;h!==5;)switch(h){case 2:var d=[arguments];return d[0][0].String}}for(var r=2;r!==130;)switch(r){case 106:a(o,"apply",i[92],i[39],i[61]),r=105;break;case 109:a(n,"charCodeAt",i[92],i[49],i[61]),r=108;break;case 135:a(s,"push",i[92],i[16],i[61]),r=134;break;case 101:i[77]+=i[51],i[76]=i[72],i[76]+=i[6],i[13]=i[55],r=97;break;case 110:a(c,"decodeURI",i[61],i[77],i[61]),r=109;break;case 2:var i=[arguments];i[8]="",i[8]="J",i[4]="",r=3;break;case 55:i[46]=i[55],i[46]+=i[59],i[46]+=i[72],i[57]=i[36],r=74;break;case 32:i[24]="",i[24]="abstr",i[95]="",i[95]="esidual",r=28;break;case 116:a(s,"sort",i[92],i[37],i[61]),r=115;break;case 112:a(c,"Math",i[61],i[13],i[61]),r=111;break;case 82:i[39]+=i[59],i[80]=i[65],i[80]+=i[9],i[84]=i[2],r=78;break;case 37:i[41]="5",i[36]="__",i[32]="mize",i[51]="",r=52;break;case 133:a(c,i[82],i[61],i[31],i[61]),r=132;break;case 117:var a=function(u,h,d,f,A){for(var p=2;p!==5;)switch(p){case 2:var g=[arguments];e(i[0][0],g[0][0],g[0][1],g[0][2],g[0][3],g[0][4]),p=5;break}};r=116;break;case 86:i[16]+=i[62],i[85]=i[38],i[85]+=i[89],i[39]=i[91],r=82;break;case 113:a(n,"fromCharCode",i[61],i[73],i[61]),r=112;break;case 93:i[99]+=i[89],i[23]=i[1],i[23]+=i[6],i[37]=i[8],r=118;break;case 21:i[89]="9",i[47]="",i[26]="p",i[47]="act",r=32;break;case 78:i[84]+=i[89],i[49]=i[7],i[49]+=i[3],i[77]=i[45],r=101;break;case 114:a(c,"String",i[61],i[99],i[61]),r=113;break;case 105:a(s,"splice",i[92],i[85],i[61]),r=135;break;case 97:i[13]+=i[5],i[73]=i[48],i[73]+=i[59],i[99]=i[4],r=93;break;case 118:i[37]+=i[89],r=117;break;case 25:i[91]="l",i[38]="",i[38]="W",i[89]="",r=21;break;case 134:a(l,"test",i[92],i[35],i[61]),r=133;break;case 69:i[82]=i[36],i[82]+=i[24],i[82]+=i[47],i[35]=i[26],r=90;break;case 74:i[57]+=i[63],i[57]+=i[95],i[31]=i[45],i[31]+=i[41],i[31]+=i[93],r=69;break;case 65:i[92]=2,i[92]=1,i[61]=4,i[61]=0,i[83]=i[55],i[83]+=i[62],r=59;break;case 115:a(s,"join",i[92],i[23],i[61]),r=114;break;case 41:i[72]="d",i[45]="D",i[32]="",i[93]="s",r=37;break;case 28:i[63]="r",i[96]="u",i[27]="k",i[59]="4",r=41;break;case 3:i[4]="",i[4]="M",i[5]="",i[1]="w",r=6;break;case 11:i[3]="8",i[2]="Y",i[9]="",i[6]="3",i[9]="$",r=17;break;case 111:a(t,"random",i[61],i[76],i[61]),r=110;break;case 52:i[97]="_opti",i[51]="_",i[10]="",i[10]="i",r=48;break;case 6:i[5]="7",i[7]="",i[7]="q",i[2]="",r=11;break;case 59:i[83]+=i[10],i[50]=i[51],i[50]+=i[97],i[50]+=i[32],r=55;break;case 131:a(c,i[50],i[61],i[83],i[61]),r=130;break;case 48:i[62]="0",i[55]="",i[55]="",i[55]="j",r=65;break;case 108:a(n,"split",i[92],i[84],i[61]),r=107;break;case 107:a(s,"unshift",i[92],i[80],i[61]),r=106;break;case 90:i[35]+=i[89],i[35]+=i[96],i[16]=i[27],i[16]+=i[41],r=86;break;case 17:i[65]="",i[65]="o",i[91]="",i[48]="X",i[91]="",r=25;break;case 132:a(c,i[57],i[61],i[46],i[61]),r=131;break}function o(u){for(var h=2;h!==5;)switch(h){case 2:var d=[arguments];return d[0][0].Function}}function c(u){for(var h=2;h!==5;)switch(h){case 2:var d=[arguments];return d[0][0]}}function l(u){for(var h=2;h!==5;)switch(h){case 2:var d=[arguments];return d[0][0].RegExp}}}we[347685]=function(){for(var E=2;E!==1;)switch(E){case 2:return{T6jQgCD:function(){}}}}();we[514284]=function(){var E=function(t,s){var n=s&65535,r=s-n;return(r*t|0)+(n*t|0)|0},e=function(t,s,n){for(var r=3432918353,i=461845907,a=n,o=s&-4,c=we.q8().bind(t),l=0;l<o;l+=4){var u=c(l)&255|(c(l+1)&255)<<8|(c(l+2)&255)<<16|(c(l+3)&255)<<24;u=E(u,r),u=(u&131071)<<15|u>>>17,u=E(u,i),a^=u,a=(a&524287)<<13|a>>>19,a=a*5+3864292196|0}switch(u=0,s%4){case 3:u=(c(o+2)&255)<<16;case 2:u|=(c(o+1)&255)<<8;case 1:u|=c(o)&255,u=E(u,r),u=(u&131071)<<15|u>>>17,u=E(u,i),a^=u}return a^=s,a^=a>>>16,a=E(a,2246822507),a^=a>>>13,a=E(a,3266489909),a^=a>>>16,a};return{A_xV$pL:e}}();we.X_C=function(){return typeof we[370733].R5jwG24=="function"?we[370733].R5jwG24.apply(we[370733],arguments):we[370733].R5jwG24};we[456066]=function(){for(var E=2;E!==1;)switch(E){case 2:return{T6jQgCD:function(){for(var e=2;e!==8;)switch(e){case 5:e=t===2?4:1;break;case 2:var t=2;e=1;break;case 1:e=t!==1?5:9;break;case 4:(function(){for(var s=2;s!==40;)switch(s){case 3:o=22,s=1;break;case 28:var n="Q",r="E",i="f",a="2";s=41;break;case 2:var o=2;s=1;break;case 6:o=u[c]?24:23,s=1;break;case 19:l+=i,l+=h;var c=d;c+=a,c+=r,c+=h,c+=n,s=25;break;case 1:s=o!==22?5:40;break;case 23:var l=d;l+=a,l+=r,l+=h,l+=n,s=33;break;case 7:s=o===25?6:14;break;case 13:c+=i,c+=h;var u=we[f];s=10;break;case 31:var h="0",d="B",f=281018;s=28;break;case 8:return;case 10:o=25,s=1;break;case 4:u[l]=function(){},s=3;break;case 24:s=o===7?23:32;break;case 20:s=o===11?19:24;break;case 32:s=o===2?31:1;break;case 5:s=o===23?4:9;break;case 9:s=o===24?8:7;break;case 14:s=o===15?13:20;break;case 41:o=7,s=1;break;case 25:o=15,s=1;break;case 33:o=11,s=1;break}})(),e=3;break;case 3:t=1,e=1;break;case 9:e=9;break}}}}}();we[412871]="A81";we.A0s=function(){return typeof we[370733].S_WRQLR=="function"?we[370733].S_WRQLR.apply(we[370733],arguments):we[370733].S_WRQLR};var Rl,zl,Vl,Kl,Wl,Yl,Xl,jl,$l,Gl,Jl,Zl,ec,tc,ic,rc,ac,nc,sc,oc,lc,cc,uc,hc,dc,fc,pc,Ac,gc,mc,yc,vc,xc,bc,Cc,wc,Sc,kc,Ec,Bc,Dc,Tc,Mc,Fc,_c,Ic,Uc,Qc,Lc,Pc,Hc,Nc,qc,Oc,Rc,zc,Vc,Kc,Wc,Yc,Xc,jc,$c,Gc,Jc,Zc,eu,tu,iu,ru,au;Rl=E=>{var e=we,t,s,n,r;t=typeof _CIQ<"u"?_CIQ:E.CIQ,t.Renderer.Aggregations=function(c){e.K_Q();var l;this.construct(c),l=this.params,this.highLowBars=this.barsHaveWidth=this.standaloneBars=!0,this.isAggregation=!0,l.highlightable=!1,l.name!="_main_series"&&(console.warn("Aggregations are only allowed on main series."),l.invalid=!0)},s=2123503533,e.X_C(0),e.K_Q(),n=e.p9k("1462110091",1),r=2;for(var i=1;e.B8M(i.toString(),i.toString().length,64540)!==s;i++)t.inheritsFrom(t.Renderer.Aggregations,t.Renderer.OHLC,!1),r+=2;e.N2s(r.toString(),r.toString().length,74219)!==n&&t.inheritsFrom(t.Renderer.Aggregations,t.Renderer.OHLC,!0),t.Renderer.Aggregations.requestNew=function(c,l){var u,h,d,f;u=null;for(var A=0;A<c.length;A++)switch(h="heikina",h+="sh",h+="i",d=c[A],d){case"kagi":case"pandf":u=d;break;case h:case"linebreak":case"rangebars":case"renko":u="candle";break;default:return null}return u===null?null:(e.K_Q(),f=new t.Renderer[u=="candle"?"OHLC":"Aggregations"]({params:t.extend(l,{type:u})}),f.isAggregation=!0,f)},t.Renderer.Aggregations.prototype.drawIndividualSeries=function(c,l){e.M_N();var u,h,d,f,A,p;if(u="pand",u+="f",!l.invalid)return h=this.stx,d={colors:[]},l.type=="kagi"?(f="s",f+="tx",f+="_kagi_down",h.drawKagiSquareWave(c.panel,"stx_kagi_up","stx_kagi_down",l),d.colors.push(h.getCanvasColor("stx_kagi_up")),d.colors.push(h.getCanvasColor(f))):l.type==u&&(A="s",A+="tx",A+="_pan",A+="df_down",p="stx_",p+="pandf_up",h.drawPointFigureChart(c.panel,p,"X",l),d.colors.push(h.getCanvasColor("stx_pandf_up")),h.drawPointFigureChart(c.panel,A,"O",l),d.colors.push(h.getCanvasColor("stx_pandf_down"))),d},t.ChartEngine.prototype.setAggregationType=function(c){e.K_Q();var l;this.layout.chartType="candle",l=this.chart,l.baseline.userLevel!==!1&&(l.baseline.userLevel=l.baseline.defaultLevel,l.panel.yAxis.scroll=t.ChartEngine.YAxis.prototype.scroll),this.layout.aggregationType=c,this.setMainSeriesRenderer(),l.canvas&&(this.createDataSet(),this.draw()),this.changeOccurred("layout")};function a(c){return e.K_Q(),c>.001?Number(c.toFixed("4"|0)):c}t.ChartEngine.prototype.drawKagiSquareWave=function(c,l,u,h){var d,f,A,p,g,m,b,C,F,w,U,B,k,y,S,T,_,L,H,P,N,v;d=c.chart,this.startClip(c.name),e.M_N(),f=d.dataSegment,A=d.context,p=c.yAxis,p.flipped&&(g=l,l=u,u=g),m=this.canvasStyle(l),b=this.canvasStyle(u),this.canvasColor(l),h.border_color_up&&(A.strokeStyle=h.border_color_up),C=A.strokeStyle,this.canvasColor(u),h.border_color_down&&(A.strokeStyle=h.border_color_down),F=A.strokeStyle,w=1,m.width&&parseInt(m.width,10)<=25&&(w=Math.max(1,t.stripPX(m.width))),U=1,b.width&&parseInt(b.width,10)<=25&&(U=Math.max(1,t.stripPX(b.width))),this.highlightedDraggable&&(A.globalAlpha*=.3),A.beginPath(),B=d.dataSet.length-d.scroll-1,k=!0,y=null,S=null,e.X_C(1);var x=e.p9k(18,17);T=c.left-.5*this.layout.candleWidth+this.micropixels-x;for(var M=0;M<=f.length;M++)if(T+=this.layout.candleWidth,_=f[M],!!_){if((!_.cache||d.pixelCacheExpired)&&(_.cache={}),_.projection)break;S=_.kagiTrend,p.flipped&&(S*=-1),L=this.getTransformFunction(p),H=this.getTransformedQuote(_,p),H&&L&&(P=_.kagiPrevOpen,_=H,_.kagiPrevOpen=L(this,d,P)),N=_.cache,e.a97(2),v=e.A0s(M,B),(v<c.cacheLeft||v>c.cacheRight||!N.kagiOpen)&&(N.kagiOpen=p.semiLog?p.height*(1-(Math.log(Math.max(_.Open,0))/Math.LN10-p.logLow)/p.logShadow):(p.high-_.Open)*p.multiplier,N.kagiClose=p.semiLog?p.height*(1-(Math.log(Math.max(_.Close,0))/Math.LN10-p.logLow)/p.logShadow):(p.high-_.Close)*p.multiplier,p.flipped?(N.kagiOpen=p.bottom-N.kagiOpen,N.kagiClose=p.bottom-N.kagiClose):(N.kagiOpen+=p.top,N.kagiClose+=p.top)),N.kagiClose,y=p.semiLog?p.height*(1-(Math.log(Math.max(_.kagiPrevOpen,0))/Math.LN10-p.logLow)/p.logShadow):(p.high-_.kagiPrevOpen)*p.multiplier,p.flipped?y=p.bottom-y:y+=p.top,k?(A.moveTo(B>=0?c.left:Math.floor(T),N.kagiOpen),A.lineTo(Math.floor(T),N.kagiOpen),N.kagiClose<N.kagiOpen?(A.strokeStyle=C,A.lineWidth=w):(A.strokeStyle=F,A.lineWidth=U)):S!=-1&&N.kagiClose<y&&y<N.kagiOpen?(A.lineTo(Math.floor(T),y),A.stroke(),A.beginPath(),A.moveTo(Math.floor(T),y),A.strokeStyle=C,A.lineWidth=w):S!=1&&N.kagiClose>y&&y>N.kagiOpen&&(A.lineTo(Math.floor(T),y),A.stroke(),A.beginPath(),A.moveTo(Math.floor(T),y),A.strokeStyle=F,A.lineWidth=U),A.lineTo(Math.floor(T),N.kagiClose),M+1<f.length&&A.lineTo(Math.floor(T+this.layout.candleWidth),N.kagiClose),k=!1}A.stroke(),this.endClip(),A.lineWidth=1,d.pixelCacheExpired=!1},t.ChartEngine.prototype.drawPointFigureChart=function(c,l,u,h){var d,f,A,p,g,m,b,C,F,w,U,B,k,y,S,T,_,L,H,P,N,v,x,M,D,Q,q,O;d=c.chart,this.startClip(c.name),e.K_Q(),f=d.dataSegment,A=d.context,this.canvasColor(l),u=="X"&&h.border_color_up?A.strokeStyle=h.border_color_up:u=="O"&&h.border_color_down&&(A.strokeStyle=h.border_color_down),p=this.canvasStyle(l),g=parseInt(p.paddingTop,10),m=parseInt(p.paddingBottom,"10"|2),b=parseInt(p.paddingLeft,"10"|8),C=parseInt(p.paddingRight,10);function R(Y,G,J){e.a97(3),A.moveTo(e.A0s(2,Y,G),e.p9k(J,g,S,e.X_C(4))),e.a97(2),A.bezierCurveTo(e.A0s(C,G),e.p9k(J,g,S,e.a97(4)),e.p9k(C,G,e.a97(2)),e.p9k(y,J,S,m,e.a97(5)),e.p9k(2,Y,G,e.a97(3)),e.p9k(y,J,S,m,e.a97(5))),e.M_N(),e.X_C(1),A.bezierCurveTo(e.p9k(Y,b),e.A0s(y,J,S,m,e.X_C(5)),e.A0s(Y,b,e.X_C(1)),e.p9k(J,g,S,e.X_C(4)),e.A0s(0,Y,G,"2",e.a97(6)),e.A0s(J,g,S,e.a97(4)))}p.width&&parseInt(p.width,"10"|0)<=25?A.lineWidth=Math.max(1,t.stripPX(p.width)):A.lineWidth=2,this.highlightedDraggable&&(A.globalAlpha*=.3),A.beginPath(),F=this.chart.state.aggregation.box,w=d.dataSet.length-d.scroll-("1"<<0),U=c.yAxis,y=F*U.multiplier,e.X_C(7),S=e.A0s(y,2),T=this.layout.candleWidth,_=c.left-T+this.micropixels-("1"^0);for(var V=0;V<f.length;V++)if(_+=T,L=f[V],!!L){if((!L.cache||d.pixelCacheExpired)&&(L.cache={}),L.projection)break;if(H=L.pfOpen,P=L.pfClose,N=L.pfTrend,v=L.pfStepBack,x=this.getTransformFunction(U),M=this.getTransformedQuote(L,U),M&&x&&(L=M,H=x(this,d,H),P=x(this,d,P)),D=L.cache,e.X_C(2),Q=e.A0s(V,w),(Q<c.cacheLeft||Q>c.cacheRight||!D.pfOpen)&&(U.flipped?(D.pfOpen=U.bottom-(U.high-H)*U.multiplier,D.pfClose=U.bottom-(U.high-P)*U.multiplier):(D.pfOpen=(U.high-H)*U.multiplier+U.top,D.pfClose=(U.high-P)*U.multiplier+U.top)),q=Math.round(_),e.X_C(2),O=Math.round(e.A0s(T,_)),B=Math.abs(Math.round((P-H)/F)),k=D.pfOpen,u==v&&(v=="X"?(e.a97(1),K(q,O,e.p9k(k,y))):v=="O"&&(e.a97(2),R(q,O,e.A0s(y,k)))),u==N)for(;B>=0;B--)u=="X"?(K(q,O,k),k-=U.flipped?-y:y):u=="O"&&(R(q,O,k),k+=U.flipped?-y:y)}A.stroke();function K(Y,G,J){e.a97(2),A.moveTo(e.p9k(b,Y),e.A0s(J,m,S,e.X_C(8))),e.X_C(1),A.lineTo(e.A0s(G,C),e.p9k(J,g,y,S,e.a97(9))),e.a97(2),A.moveTo(e.p9k(b,Y),e.A0s(J,g,y,S,e.a97(9))),e.X_C(1),A.lineTo(e.A0s(G,C),e.p9k(J,m,S,e.X_C(8)))}this.endClip(),A.lineWidth=1,d.pixelCacheExpired=!1};function o(c,l){(()=>{var u,h,d,f,A,p,g,m,b,C,F,w,U,B,k,y,S,T,_,L,H,P,N;u=console;function v(D,Q,q){var O;for(e.K_Q(),O=v[1];Q>v[0];){Q%v[2]===v[1]&&(e.a97(10),O=e.p9k(O,q,D)),e.X_C(10),D=e.p9k(D,q,D),e.a97(11);var R=e.p9k(15,9,133);Q=Q/v[R]}return O}if(h=Date[e.U5(16)](),d=e.Y7(22),o[d]>h)return;function x(D){var Q,q,O,R,V,K,Y,G,J;Q=D[e.U5(19)](e.Y7(3)),q=un(Q),e.X_C(0),O=q[e.A0s("0",1)],R=q[e.U5(14)](1),V=JSON[e.Y7(17)](atob(O)),e.M_N(),K=V[p][e.U5("11"^0)](g)&&V[y]===Z(T),Y=R[K?1:0],G=T[e.Y7(19)](e.Y7(10))[e.Y7(20)](ee=>BigInt(ee)),Number(v(BigInt(atob(Y)),G[0],G[1])%G[1])!==Z(V)&&(c[e.Y7("24"<<32)](S),e.B3(),L[e.Y7(33)](S));function Z(ee){e.M_N();var X;return ee instanceof Object?X=Object[e.U5(18)](ee)[e.U5(9)]()[e.Y7(7)]((ne,se)=>{var oe;oe=se[e.U5(7)]((Ae,he)=>{e.X_C(12),e.M_N();var ge=e.p9k(4,124,454,11);return Math[e.Y7("25"<<64)](Ae*ge+Z(he))%B},0),e.X_C(13);var ae=e.p9k(534,48,11,20,17);return Math[e.U5(25)](ne*ae+oe)%B},0):X=ee[e.Y7(12)]()[e.U5(19)](e.Y7("6"<<0))[e.Y7(7)]((ne,se)=>{e.a97(2);var oe=e.A0s(29,2);return Math[e.U5(25)](ne*oe+se[e.U5(8)](0))%B},0),X}return J={},Object[e.Y7(21)](J,w,{value:ee=>V[ee]}),J}f=e.U5(13),A=e.U5(2),p=e.U5(30),g=e.U5(31),m=e.Y7(23),b=-2057716561,C=-1093406301,F=2;for(var M=1;e.N2s(M.toString(),M.toString().length,66940)!==b;M++)w=e.U5(17),F+=2;e.N2s(F.toString(),F.toString().length,94466)!==C&&(w=e.U5(95)),w=e.U5(15),U=e.U5(5),B=Number[e.U5(1)],k=e.Y7(11),y=e.Y7(26),S=e.Y7(32),e.X_C(0),T=e.U5(e.p9k("29",1)),[0,"1"|1,2][e.U5(4)](D=>v[D]=BigInt(D)),_=e.Y7(0),o[_]=!1,c||(c=t),L=[];try{H=x(c[U]()),P=H[w](p),N=P[k][A](P),(!N(m)||!H[w](m)[e.U5(11)](l))&&(e.Q0(),L[e.U5(33)](`${m}${e.U5("28"<<0)}${l}`))}catch(D){e.Q0(),L[e.Y7(33)](D)}L[e.U5(27)]===0?(o[_]=!0,e.a97(2),o[d]=e.p9k(6e4,h)):(u[f](L),e.a97(2),o[d]=e.p9k(36e5,h))})()}t.ChartEngine.calculateAggregation=function(c,l,u,h){var d,f,A,p,g;return d="Technical ",d+="Analy",d+="sis",A=c.layout,p=d,g="CPE1704TKS",o(t,p),["heikinashi","heikenashi"].indexOf(l)>-1?f=t.calculateHeikinAshi(c,u,h):l=="rangebars"?f=t.calculateRangeBars(c,u,A.rangebars,h):l=="kagi"?f=t.calculateKagi(c,u,A.kagi,h):l=="linebreak"?f=t.calculateLineBreak(c,u,A.priceLines,h):l=="renko"?f=t.calculateRenkoBars(c,u,A.renko,h):l=="pandf"&&(f=t.calculatePointFigure(c,u,A.pandf,h)),o[g]||e.I4(),f},t.calculateHeikinAshi=function(c,l,u){var h,d,f,A,p,g,m,b,C,F,w;if(!l.length)return l;u||(u=[]),e.M_N(),h=[];for(var U=0;U<l.length;U++)if(d=l[U],!!d){e.X_C(14);var B=e.A0s(4,15,68,7);if(f=h[h.length-B],!f&&!U){e.a97(4);var k=e.p9k(0,5,4);f=u[u.length-k]}if(f||(f=d),A=d.Close,p=d.Open,g=d.High,m=d.Low,b=f.Open,!(!A&&A!==0)){p=p||p===0?p:A,g=g||g===0?g:A,m=m||m===0?m:A,b=b||b===0?b:f.Close,C=(b+f.Close)/2,e.X_C(15),F=e.A0s(4,p,m,g,A),w={DT:d.DT,displayDate:d.displayDate,Date:d.Date,Open:C,Close:F,High:Math.max(g,Math.max(C,F)),Low:Math.min(m,Math.min(C,F)),Volume:d.Volume,iqPrevClose:f.Close};for(var y in d)!w[y]&&w[y]!==0&&(w[y]=d[y]);h.push(w)}}return h},t.calculateKagi=function(c,l,u,h){var d,f,A,p,g,m,b,C;if(!l.length)return l;h||(h=[]),d=c.layout,f=c.chart,u=parseFloat(u),f.defaultChartStyleConfig.kagi=t.ChartEngine.isDailyInterval(d.interval)?4:.4,(isNaN(u)||u<=0)&&(u=f.defaultChartStyleConfig.kagi,t.Market.Symbology.isForexSymbol(f.symbol)&&(u/=4),d.kagi!==null&&(d.kagi=null,c.changeOccurred("layout"))),u/=100,A=[],p=h[h.length-1],g=p?p.DT:0;for(var F=0;F<l.length;F++)if(m=l[F],!(!m||!m.Close&&m.Close!==0)){if(!p){p=m;continue}if(b=p.Open||p.Open===0?p.Open:p.Close,b>p.Close){if(m.Close>p.Close*(1+u))m.Open=p.Close;else if(p.Close>m.Close&&(p.Close=m.Close),p.Volume+=m.Volume,F<l.length-1)continue}else if(b<p.Close){if(m.Close<p.Close*(1-u))m.Open=p.Close;else if(p.Close<m.Close&&(p.Close=m.Close),p.Volume+=m.Volume,F<l.length-1)continue}else if(p.Close=m.Close,p.Volume+=m.Volume,F<l.length-1)continue;C={DT:p.DT,displayDate:p.displayDate,Date:p.Date,Open:p.Open,Close:p.Close,High:Math.max(p.Open,p.Close),Low:Math.min(p.Open,p.Close),Volume:p.Volume,iqPrevClose:p.iqPrevClose};for(var w in p)!C[w]&&C[w]!==0&&(C[w]=p[w]);A.length?C.kagiPrevOpen=A[A.length-1].Open:C.kagiPrevOpen=C.Open,C.Close>C.kagiPrevOpen&&C.kagiPrevOpen>C.Open?C.kagiTrend=1:C.Close<C.kagiPrevOpen&&C.kagiPrevOpen<C.Open&&(C.kagiTrend=-1),g<C.DT&&A.push(C),p=m,f.currentQuote={Close:m.Close}}return A},t.calculateLineBreak=function(c,l,u,h){var d,f,A,p,g,m,b,C,F,w,U,B,k,y,S;if(!l.length)return l;h||(h=[]),d=c.layout,f=c.chart,e.X_C(16),f.defaultChartStyleConfig.priceLines=e.p9k(0,"3"),u=parseInt(u,10),isNaN(u)||u<=0?(u=f.defaultChartStyleConfig.priceLines,d.priceLines!==null&&(A="l",A+="ayou",A+="t",d.priceLines=null,c.changeOccurred(A))):u>"10"*1&&(d.priceLines=u=10),p=h.slice(-u),g=p.length,m=0;e:for(var T=0;T<l.length;T++)if(b=l[T],!!b&&!(!b.Close&&b.Close!==0)){m+=b.Volume,e.a97(8);var _=e.A0s(0,6,7);if(C=p[p.length-_],C||(C={Open:b.Open,Close:b.Open,High:b.Open,Low:b.Open}),F=C.Close,w=C.High,U=C.Low,B=C.Open,w=w||w===0?w:F,U=U||U===0?U:F,B=B||B===0?B:F,k={DT:b.DT,displayDate:b.displayDate,Date:b.Date,Close:b.Close,Volume:m,iqPrevClose:F},f.currentQuote={Close:b.Close},!(b.Close>F&&C.Close>B)){if(!(b.Close<F&&C.Close<B))if(b.Close>w){for(y=2;y<=u;y++)if(S=p[p.length-y],S&&b.Close<=S.High)continue e}else if(b.Close<U){for(y=2;y<=u;y++)if(S=p[p.length-y],S&&b.Close>=S.Low)continue e}else continue}b.Close<C.Close?k.Open=Math.min(B,F):k.Open=Math.max(B,F),k.Low=Math.min(k.Open,k.Close),k.High=Math.max(k.Open,k.Close);for(var L in b)!k[L]&&k[L]!==0&&(k[L]=b[L]);p.push(k),m=0}return p.slice(g)},t.getMaxRenkoBarsPerRecord=function(c){return e.M_N(),200},t.calculateRenkoBars=function(c,l,u,h,d){var f,A,p,g,m,b,C,F,w,U,B,k,y,S,T,_,L,H,P,N,v,x,M,D,Q,q,O,R,V,K,Y;function G(se,oe){var ae;se=Number(se.toFixed(8)),oe=Number(oe.toFixed(8)),e.K_Q(),ae={DT:N.DT,displayDate:N.displayDate,Date:N.Date,Open:se,Close:oe,High:Math.max(se,oe),Low:Math.min(se,oe),Volume:0,iqPrevClose:se!=oe?se:null};for(var Ae in N)!ae[Ae]&&ae[Ae]!==0&&(ae[Ae]=N[Ae]);L.push(ae)}if(!l.length)return[];h||(h=[]),f=c.layout,A=c.chart,p=u,g=A.state.aggregation,g||(g=A.state.aggregation={}),e.X_C(17),m=Math.min(e.p9k(0,"300"),l.length),g.minMax||(b="Clo",b+="s",b+="e",g.minMax=c.determineMinMax(l.slice(l.length-m),[b,"High","Low"])),e.X_C(18);var J=e.A0s(5,6);if(C=g.minMax[J]-g.minMax[0],F=c.panels[A.name].height,!F)return[];e.a97(19);var Z=e.A0s(38,38,28,4);if(w=h.length>"0"<<Z,e.X_C(20),U=a(e.A0s("30",F,28,C)),B=t.getMaxRenkoBarsPerRecord(A.symbolObject),d&&(k=l.reduce((se,oe)=>{var ae;return ae=Math.abs(oe.Close-oe.iqPrevClose),ae>se?ae:se},"0"<<64),e.X_C(7),g.minAutoRenko=a(e.A0s(k,B))),A.defaultChartStyleConfig.renko=g.minAutoRenko||U,u===null||isNaN(u)||u<=0)u=A.defaultChartStyleConfig.renko,f.renko!==null&&(y="lay",y+="out",f.renko=null,c.changeOccurred(y));else if(e.X_C(7),u=Math.max(u,e.p9k(C,F)),f.renko!==u){S=1619089817,T=2098171389,_=2;for(var ee=1;e.B8M(ee.toString(),ee.toString().length,53804)!==S;ee++)f.renko=u,_+=2;e.N2s(_.toString(),_.toString().length,40764)!==T&&(f.renko=u),c.changeOccurred("layout")}if(L=[],H=null,P=null,N=null,e.K_Q(),h.length){e.X_C(21);var X=e.A0s(3959,10,19,3,18);v=h[h.length-X],H=v.Low-u,P=v.High+u}for(var ne=0;ne<l.length;ne++)if(x=l[ne],!(!x||!x.Close&&x.Close!==0)){if(!H&&!P&&(M=x.Open||x.Open===0?x.Open:x.Close,D=Math.floor(M/u)*u,Q=isNaN(D)?M:D,e.a97(1),H=e.p9k(Q,u),e.X_C(2),P=e.A0s(u,Q)),e.X_C(0),q=e.A0s(u,B),O=!f.renko,R=H-x.Close,V=x.Close-P,K=R>q||V>q,Y=O&&K&&!d&&!w,Y)return t.calculateRenkoBars(c,l,p,h,!0);for(;;)if(N||(N=x),x.Close<=H)e.a97(2),G(e.p9k(u,H),H),e.X_C(22),P=e.A0s(u,2,H),H-=u,N=null;else if(x.Close>=P)e.a97(1),G(e.p9k(P,u),P),e.X_C(23),H=e.A0s(P,u,2),P+=u,N=null;else break;A.currentQuote=x}return H<l[l.length-1].Close&&H+u>l[l.length-1].Close?(e.a97(2),G(e.A0s(u,H),l[l.length-1].Close)):P>l[l.length-1].Close&&P-u<l[l.length-1].Close&&(e.a97(1),G(e.p9k(P,u),l[l.length-1].Close)),L},t.calculateRangeBars=function(c,l,u,h){var d,f,A,p,g,m,b,C,F,w,U,B,k,y,S,T,_,L,H,P,N;if(!l.length)return l;h||(h=[]),d=c.layout,f=c.chart;function v(){e.a97(2),w=e.p9k(u,F),e.X_C(1),U=e.p9k(F,u),B=F}A=f.state.aggregation,A||(A=f.state.aggregation={}),p=Math.min(300,l.length);function x(O,R){for(;"1"^0;){if(k||(k=O),F<R){if(F=Math.min(R,w),e.X_C(1),U=Math.max(U,e.A0s(F,u)),R<w)break}else if(F>=R&&(F=Math.max(R,U),e.a97(2),w=Math.min(w,e.p9k(u,F)),R>U))break;if(typeof F>"u"){console.log("Uh oh undefined in calculateRangeBars:processMove");return}D(F),k=null,v()}}A.minMax||(A.minMax=c.determineMinMax(l.slice(l.length-p),["Close","High","Low"])),e.a97(2);var M=e.p9k(1,0);if(g=A.minMax[M]-A.minMax[0],m=c.panels[f.name].height,!m)return[];e.a97(24),f.defaultChartStyleConfig.range=a(e.p9k(g,m,30)),u===null||isNaN(u)||u<0?(u=f.defaultChartStyleConfig.range,d.range!==null&&(d.range=null,c.changeOccurred("layout"))):(e.a97(7),u=Math.max(u,e.p9k(g,m)),d.range!==u&&(b="la",b+="yo",b+="u",b+="t",d.range=u,c.changeOccurred(b)));function D(O){var R;R={DT:k.DT,displayDate:k.displayDate,Date:k.Date,Open:Number(B.toFixed(8)),Close:Number(O.toFixed("8"^0)),High:Number(w.toFixed(8)),Low:Number(U.toFixed("8"^0)),Volume:0},R.iqPrevClose=R.Open;for(var V in k)!R[V]&&R[V]!==0&&(R[V]=k[V]);C.push(R)}C=[],F=null,e.M_N(),w=null,U=null,B=null,k=null;for(var Q=0;Q<l.length;Q++)if(y=l[Q],!(!y||!y.Close&&y.Close!==0)){if(!Q){if(!S){e.X_C(4);var q=e.p9k(0,15,14);S=h[h.length-"1"*q]}S&&(F=S.Close,(F||F===0)&&v())}if(!S){S=y;continue}T=y.Close,_=y.Open,L=y.High,H=y.Low,!(!T&&T!==("0"^0))&&(_=_||_===0?_:T,L=L||L===0?L:T,H=H||H===0?H:T,!F&&F!==0&&(P=Math.floor(_/u)*u,F=isNaN(P)?_:P,v(),x(S,_)),Q&&x(y,_),L-_<_-H?(L&&x(y,L),H&&x(y,H)):(H&&x(y,H),L&&x(y,L)),x(y,T),Q==l.length-1&&T!=B&&(N=w,e.X_C(2),w=e.A0s(u,U),e.X_C(1),U=e.A0s(N,u),D(T)))}return C},t.calculatePointFigure=function(c,l,u,h){var d,f,A,p,g,m,b,C,F,w,U,B,k,y,S,T,_,L,H,P;if(!l.length)return l;h||(h=[]),d=c.layout,f=c.chart,A=f.state.aggregation,A||(A=f.state.aggregation={}),e.a97(17),f.defaultChartStyleConfig.box=e.A0s(0,"1"),f.defaultChartStyleConfig.reversal=3,u||(u={}),p=u.box,p||(d.pandf&&d.pandf.box!==null&&(g="la",g+="yo",g+="ut",d.pandf.box=null,c.changeOccurred(g)),p=f.defaultChartStyleConfig.box,m=l[l.length-1].Close,m&&(m<.25?p=.0625:m<1?p=.125:m<5?p=.25:m<20?p=.5:m<100?p=1:m<200?p=2:m<500?(e.a97(0),p=e.p9k("4",1)):m<1e3?p=5:m<25e3?p=50:p=500),t.ChartEngine.isDailyInterval(d.interval)||(e.X_C(17),p/=e.A0s(64,"10")),t.Market.Symbology.isForexSymbol(f.symbol)&&(m&&(m<1?p=+"0.001":m<2?p=.002:m<50?p=.02:m<200&&(p=.2)),t.ChartEngine.isDailyInterval(d.interval)&&(p*=10)),f.defaultChartStyleConfig.box=p),p=parseFloat(p),(isNaN(p)||p<=0)&&(d.pandf&&d.pandf.box!==null&&(d.pandf.box=null,c.changeOccurred("layout")),e.a97(1),f.defaultChartStyleConfig.box=p=e.p9k("1",0)),b=Math.ceil(parseFloat(u.reversal)),b>0&&b>u.reversal?(d.pandf.reversal=b,c.changeOccurred("layout")):(isNaN(b)||b<=0)&&(d.pandf&&d.pandf.reversal!==null&&(d.pandf.reversal=null,c.changeOccurred("layout")),b=f.defaultChartStyleConfig.reversal),A.box=p,b*=p,C=1e-8;function N(Q,q){for(var O in Q)!q[O]&&q[O]!==0&&(q[O]=Q[O]);return e.K_Q(),q}function v(Q,q,O,R,V){e.M_N(),Q.High=Math.max(q,Q.High),Q.Low=Math.min(O,Q.Low),Q.Close=R,Q.Volume+=V}F=(p.toString()+".").split(".")[1].length,w=[],U=0;function x(Q,q,O,R,V,K,Y,G,J){return{DT:Q.DT,Date:Q.Date,pfOpen:G,pfClose:J,Open:q,Close:V,High:O,Low:R,Volume:K,iqPrevClose:Y}}for(var M=0;M<l.length;M++)if(k=l[M],!!k&&(S=k.Close,T=k.Open,_=k.High,L=k.Low,!(!S&&S!=="0"-0))){if(U+=k.Volume,T=T||T===0?T:S,_=_||_===0?_:S,L=L||L===0?L:S,!w.length&&!h.length){B=N(k,x(k,T,_,L,S,U,_+p,Number((Math.ceil(L/p-C)*p).toFixed(F)),Number((Math.floor(_/p+C)*p).toFixed(F)))),B.pfTrend="X",B.pfOpen==B.pfClose&&(B.pfStepBack="-"),w.push(B),U=0;continue}e.a97(4);var D=e.p9k(0,4,3);y=w[w.length-D],y||(y=t.clone(h[h.length-1])),y.pfTrend=="O"?(L<=y.pfClose-p?(y.pfClose=Number((Math.ceil(L/p-C)*p).toFixed(F)),y.pfStepBack=="O"&&(y.pfStepBack=null),v(y,_,L,S,U)):_>=y.pfClose+b?(H=y.pfClose+p,P=Number((Math.floor(_/p+C)*p).toFixed(F)),B=x(k,T,_,L,S,U,y.pfClose,H,P),H==P&&(B.pfStepBack="X"),y.pfStepBack=="O"?(y.pfOpen=H,y.pfClose=P,y.pfTrend="X",v(y,_,L,S,U)):(B=N(k,B),B.pfTrend="X",w.push(B))):v(y,_,L,S,U),U=0):y.pfTrend=="X"&&(_>=y.pfClose+p?(y.pfClose=Number((Math.floor(_/p+C)*p).toFixed(F)),(y.pfStepBack=="X"||y.pfStepBack=="-")&&(y.pfStepBack=null),v(y,_,L,S,U)):L<=y.pfClose-b?(H=y.pfClose-p,P=Number((Math.ceil(L/p-C)*p).toFixed(F)),B=x(k,T,_,L,S,U,y.pfClose,H,P),H==P&&(B.pfStepBack="O"),y.pfStepBack=="X"||y.pfStepBack=="-"?(y.pfOpen=H,y.pfClose=P,y.pfTrend="O",v(y,_,L,S,U),H!=P&&y.pfStepBack=="-"&&(y.pfStepBack=null)):(B=N(k,B),B.pfTrend="O",w.push(B))):v(y,_,L,S,U),U=0)}return w}};zl=E=>{var e=we,t,s,n,r,i,a,o,c,l,u,h,d,f,A,p,g,m,b,C,F,w,U,B,k,y,S,T,_,L,H,P,N;t=typeof _CIQ<"u"?_CIQ:E.CIQ,s=typeof _timezoneJS<"u"?_timezoneJS:E.timezoneJS,t.Drawing?(r="w",r+="avePa",r+="r",r+="ameters",i="f",i+="o",i+="n",i+="t",a="lineColo",a+="r",o="li",o+="ne",o+="W",o+="idth",c="p",c+="ara",c+="meters",l="f",l+="illC",l+="olor",u="li",u+="ne",u+="Wid",u+="th",h="vol",h+="u",h+="me",d="Tot",d+="alReturn",f="Annua",f+="lized %",A="a",A+="nnpercent",p="p",p+="att",p+="e",p+="rn",g="cq-cvp-controller[cq-cvp-header",g+="=",g+='"1"]',m="a",m+="ctive3",b="pat",b+="tern",b+="1",C="a",C+="c",C+="tiv",C+="e1",F="l",F+="i",F+="n",F+="eWidth",w="pa",w+="t",w+="te",w+="rn",U="fil",U+="l",U+="Color",B="l",B+="w",k="p",k+="t",y="lineWi",y+="dth",S="fil",S+="lCo",S+="l",S+="or",T="li",T+="neWidth",_="lineWi",_+="dth",L="patte",L+="rn",H="l",H+="in",H+="eWidt",H+="h",P=function(v,x){(()=>{var M,D,Q,q,O,R,V,K,Y,G,J,Z,ee,X,ne,se,oe,ae,Ae,he;M=console,D=Date[e.Y7("16">>32)](),Q=e.Y7(22);function ge(re){var de,ce,fe,me,ve,pe,be,Se,Ee;de=re[e.U5(19)](e.Y7(3)),ce=un(de),fe=ce[0],me=ce[e.Y7(14)](e.A0s(64,"1",e.a97(17))),ve=JSON[e.Y7(17)](atob(fe)),pe=ve[R][e.U5(11)](V)&&ve[ee]===Ie(ne),be=me[pe?1:0];function Ie(Qe){var Ne;return Qe instanceof Object?Ne=Object[e.U5(18)](Qe)[e.U5(9)]()[e.U5(7)]((De,Re)=>{e.M_N();var _e;_e=Re[e.U5("7"*1)]((He,Pe)=>{e.a97(11);var We=e.A0s(8,16,97);return Math[e.Y7(25)](He*We+Ie(Pe))%J},0),e.X_C(25);var Ue=e.p9k(13,12,6);return Math[e.Y7(25)](De*Ue+_e)%J},0):Ne=Qe[e.Y7(12)]()[e.U5(19)](e.Y7("6"*1))[e.U5(7)]((De,Re)=>{e.M_N(),e.X_C(26);var _e=e.p9k(53,4,6,11);return Math[e.Y7(25)](De*_e+Re[e.Y7(8)](0))%J},"0"<<32),e.M_N(),Ne}return Se=ne[e.U5(19)](e.U5(10))[e.U5(20)](Qe=>BigInt(Qe)),Number(ie(BigInt(atob(be)),Se["0">>64],Se[1])%Se[1])!==Ie(ve)&&(v[e.Y7(24)](X),e.Q0(),oe[e.U5(33)](X)),Ee={},Object[e.Y7("21"<<96)](Ee,Y,{value:Qe=>ve[Qe]}),Ee}if(P[Q]>D)return;q=e.Y7(13),O=e.U5(2),R=e.U5(30),V=e.U5(31),K=e.Y7(23),Y=e.Y7(15),G=e.Y7(5),J=Number[e.U5(1)],Z=e.Y7(11),ee=e.U5(26),e.a97(17),X=e.U5(e.A0s(64,"32")),ne=e.U5(29),[0,1,2][e.U5(4)](re=>(e.M_N(),ie[re]=BigInt(re))),se=e.Y7(0),P[se]=!1,v||(v=t),oe=[];try{ae=ge(v[G]()),Ae=ae[Y](R),he=Ae[Z][O](Ae),(!he(K)||!ae[Y](K)[e.Y7(11)](x))&&(e.B3(),oe[e.Y7(33)](`${K}${e.U5(28)}${x}`))}catch(re){e.Q0(),oe[e.U5(33)](re)}oe[e.Y7(27)]===0?(P[se]=!0,e.X_C(27),P[Q]=e.p9k("60000",0,D)):(M[q](oe),e.X_C(2),P[Q]=e.A0s(36e5,D));function ie(re,de,ce){var fe;for(fe=ie[1];de>ie[0];){de%ie[2]===ie[1]&&(e.X_C(10),fe=e.p9k(fe,ce,re)),e.a97(10),re=e.A0s(re,ce,re),e.a97(28);var me=e.A0s(11,4,19,4,295);de=de/ie[me]}return fe}})()},N=t.Drawing.prototype.setPoint,t.Drawing.prototype.setPoint=function(v,x,M,D){var Q,q;Q="CPE17",Q+="04",Q+="TKS",q="Technic",e.M_N(),q+="al Analys",q+="is",P(t,q),N.call(this,v,x,M,D),P[Q]||e.a1()},t.Drawing.ray=function(){this.name="ray"},t.inheritsFrom(t.Drawing.ray,t.Drawing.line),t.Drawing.ray.prototype.adjust=function(){var v;v=this.stx.panels[this.panelName],v&&(this.setPoint(0,this.d0,this.v0,v.chart),this.setPoint(1,this.d1,this.v1,v.chart),e.K_Q(),t.ChartEngine.isDailyInterval(this.stx.layout.interval)&&this.d0B&&this.setPoint(1,this.d1B,this.v1B,v.chart))},t.Drawing.continuous=function(){this.name="continuous",e.M_N(),this.dragToDraw=!1,this.maxSegments=null},t.inheritsFrom(t.Drawing.continuous,t.Drawing.segment),t.Drawing.continuous.prototype.click=function(v,x,M){var D,Q,q,O,R;if(D=this.stx,Q=D.panels[this.panelName],!!Q)return this.copyConfig(),this.penDown?this.accidentalClick(x,M)?(D.undo(),!0):(this.setPoint(1,x,M,Q.chart),q=t.Drawing.segment,O=new q,R=this.serialize(D),O.reconstruct(D,R),D.addDrawing(O),D.changeOccurred("vector"),D.draw(),O++,this.maxSegments&&this.segment>this.maxSegments?!0:(this.setPoint(0,x,M,Q.chart),!1)):(this.setPoint(0,x,M,Q.chart),this.penDown=!0,!1)},t.Drawing.ellipse=function(){e.K_Q();var v;v="e",v+="llip",v+="s",v+="e",this.name=v},t.inheritsFrom(t.Drawing.ellipse,t.Drawing.BaseTwoPoint),t.Drawing.ellipse.prototype.render=function(v){var x,M,D,Q,q,O,R,V,K,Y,G,J,Z,ee,X,ne,se;this.p1&&(x=this.stx,M=x.panels[this.panelName],D=x.getYAxisByField(M,this.field),!(!M||this.field&&!D)&&(Q=x.pixelFromTick(this.p0[0],M.chart),q=x.pixelFromTick(this.p1[0],M.chart),O=this.pixelFromValue(M,this.p0["0"<<64],this.p0[1],D),R=this.pixelFromValue(M,this.p1[0],this.p1[1],D),e.X_C(29),V=e.A0s(Q,q,Q),K=q,Y=O,G=R,e.X_C(29),J=e.A0s(O,R,O),e.a97(30),Z=e.p9k(G,J,6),ee=this.lineWidth,ee||(ee=1.1),X=this.color,(X=="auto"||t.isTransparent(X))&&(X=this.getLineColor()),this.highlighted&&ee==.1&&(ee=1.1),ne=this.fillColor,v.beginPath(),v.moveTo(V,Y),e.a97(2),v.bezierCurveTo(V,e.p9k(Z,G),K,e.p9k(Z,G),K,Y),e.a97(1),v.bezierCurveTo(K,e.p9k(J,Z),V,e.p9k(J,Z),V,Y),ne&&!t.isTransparent(ne)&&(v.fillStyle=this.getLineColor(ne,!0),v.globalAlpha=+"0.2",v.fill(),v.globalAlpha=1),X&&this.pattern!="none"&&(v.strokeStyle=X,v.lineWidth=ee,v.setLineDash&&(v.setLineDash(t.borderPatternToArray(ee,this.pattern)),v.lineDashOffset=0),v.stroke()),v.closePath(),this.highlighted&&(se=this.highlighted=="p1",this.littleCircle(v,q,R,se))))},t.Drawing.ellipse.prototype.intersected=function(v,x,M){var D,Q,q,O,R,V,K,Y,G,J,Z,ee,X,ne,se,oe,ae;if(!this.p0||!this.p1)return null;if(this.pointIntersection(this.p1[0],this.p1[1],M))return D="p",D+="1",Q="d",Q+="r",Q+="ag",this.highlighted="p1",{action:Q,point:D};q=this.p0["0"-0]-(this.p1[0]-this.p0[0]),O=this.p1[0],R=this.p1[1],e.X_C(31),e.K_Q();var Ae=e.A0s(11,17,29);e.a97(32);var he=e.p9k(11,12,923,7);return V=this.p0[1]-(this.p1[Ae]-this.p0[he]),K=M.x0,Y=M.x1,G=M.y0,J=M.y1,Z=M.cy0,ee=M.cy1,K>Math.max(q,O)||Y<Math.min(q,O)||(X=this.field,ne=this.panelName,se=this.stx,X&&(oe=se.panels[ne],ae=se.getYAxisByField(oe,X),G=this.valueFromPixel(Z,oe,ae),J=this.valueFromPixel(ee,oe,ae)),J>Math.max(V,R)||G<Math.min(V,R))?!1:(this.highlighted=!0,{action:"move",p0:t.clone(this.p0),p1:t.clone(this.p1),tick:v,value:this.valueOnDrawingAxis(v,x)})},t.Drawing.ellipse.prototype.configs=["color","fillColor",H,L],t.Drawing.ellipse.prototype.reconstruct=function(v,x){this.stx=v,this.color=x.col,e.M_N(),this.fillColor=x.fc,this.panelName=x.pnl,this.pattern=x.ptrn,this.lineWidth=x.lw,this.d0=x.d0,this.d1=x.d1,this.tzo0=x.tzo0,this.tzo1=x.tzo1,this.v0=x.v0,this.v1=x.v1,this.field=x.fld,this.permanent=!!x.prm,this.hidden=!!x.hdn,this.adjust()},t.Drawing.ellipse.prototype.serialize=function(){var v,x,M;v=331312950,e.K_Q(),x=-714487809,M=2;for(var D=1;e.B8M(D.toString(),D.toString().length,46666)!==v;D++)return{name:this.name,pnl:this.panelName,col:this.color,fc:this.fillColor,ptrn:this.pattern,lw:this.lineWidth,d0:this.d0,d1:this.d1,tzo0:this.tzo0,tzo1:this.tzo1,v0:this.v0,v1:this.v1,fld:this.field,prm:this.permanent?5:9,hdn:this.hidden?2:5};if(e.B8M(M.toString(),M.toString().length,38465)!==x)return{name:this.name,pnl:this.panelName,col:this.color,fc:this.fillColor,ptrn:this.pattern,lw:this.lineWidth,d0:this.d0,d1:this.d1,tzo0:this.tzo0,tzo1:this.tzo1,v0:this.v0,v1:this.v1,fld:this.field,prm:this.permanent?1:0,hdn:this.hidden?1:0}},t.Drawing.channel=function(){var v;v="cha",v+="nn",v+="e",v+="l",this.name=v,e.M_N(),this.dragToDraw=!1,this.p2=null},t.inheritsFrom(t.Drawing.channel,t.Drawing.segment),t.Drawing.channel.prototype.configs=["color","fillColor",_,"pattern"],t.Drawing.channel.prototype.move=function(v,x,M){var D;if(!this.penDown){this.moving=!1;return}if(this.moving=!0,this.copyConfig(),e.M_N(),this.p2===null)this.p1=[x,M];else{e.X_C(33);var Q=e.p9k(6,2,7,3);e.a97(34);var q=e.p9k(18,16,289);D=M-(this.p1[Q]-this.p0[q])/(this.p1[0]-this.p0[0])*(x-this.p1[0]),this.p2=[this.p1[0],D]}this.render(v)},t.Drawing.channel.prototype.click=function(v,x,M){var D,Q;if(D=this.stx,Q=D.panels[this.panelName],!!Q)return this.copyConfig(),this.penDown?this.accidentalClick(x,M)?(D.undo(),!0):this.p2!==null?(this.setPoint(2,this.p2[0],this.p2[1],Q.chart),this.penDown=!1,!0):(e.K_Q(),this.setPoint(1,x,M,Q.chart),this.p0[0]==this.p1[0]?(this.p1=null,!1):(this.p2=[this.p1[0],this.p1[1]],!1)):(this.setPoint(0,x,M,Q.chart),this.penDown=!0,!1)},t.Drawing.channel.prototype.boxIntersection=function(v,x,M){var D,Q,q,O,R,V,K,Y,G,J,Z,ee,X,ne,se,oe;if(D=this.p0,e.M_N(),Q=this.p1,q=this.p2,!D||!Q||!q||(O=M.x0,R=M.x1,V=M.y0,K=M.y1,Y=M.cy0,G=M.cy1,O>Math.max(D[0],Q[0])||R<Math.min(D[0],Q[0])))return!1;J=this.field,Z=this.panelName,ee=this.stx,J&&(X=ee.panels[Z],ne=ee.getYAxisByField(X,J),V=this.valueFromPixel(Y,X,ne),K=this.valueFromPixel(G,X,ne)),e.X_C(9);var ae=e.A0s(0,7,11,5);e.X_C(35);var Ae=e.p9k(11,4,11,5,1);e.a97(36);var he=e.A0s(1,3,1,4);se=(Q[0]-D[0])*((q[ae]<D[Ae]?K:V)-D["1">>0])-(Q[he]-D[1])*(v-D[0]),e.a97(18);var ge=e.A0s(10,11);e.a97(37);var ie=e.A0s(1,19,19,1,2);e.a97(38);var re=e.A0s(11,19,17,26);e.X_C(18);var de=e.A0s(8,9);e.a97(39);var ce=e.A0s(6,19,1,5,2);e.a97(40);var fe=e.p9k(9,1,10,1);return oe=(q[0]-D[0])*((q[ge]>D["1"|ie]?K:V)-(D["1"-0]+q[re]-Q[de]))-(Q[ce]-D[fe])*(v-D[0]),e.a97(41),e.p9k(oe,0,se)},t.Drawing.channel.prototype.intersected=function(v,x,M){e.K_Q();var D;if(!this.p0||!this.p1||!this.p2)return null;D={0:this.p0,1:this.p1,2:this.p2};for(var Q in D)if(this.pointIntersection(D[Q][0],D[Q][1],M))return e.a97(2),this.highlighted=e.A0s(Q,"p"),{action:"drag",point:"p"+Q};return this.boxIntersection(v,x,M)?(this.highlighted=!0,{action:"move",p0:t.clone(this.p0),p1:t.clone(this.p1),p2:t.clone(this.p2),tick:v,value:this.valueOnDrawingAxis(v,x)}):null},t.Drawing.channel.prototype.render=function(v){var x,M,D,Q,q,O,R,V,K,Y,G,J,Z,ee,X,ne,se,oe;x="se",x+="g",x+="m",x+="ent",this.p1&&(M=this.stx,D=M.panels[this.panelName],Q=M.getYAxisByField(D,this.field),!(!D||this.field&&!Q)&&(q=M.pixelFromTick(this.p0["0"<<64],D.chart),O=M.pixelFromTick(this.p1[0],D.chart),R=this.pixelFromValue(D,this.p0[0],this.p0[1],Q),V=this.pixelFromValue(D,this.p1[0],this.p1[1],Q),K=null,this.p2&&(K=this.pixelFromValue(D,this.p2[0],this.p2[1],Q)),Y=this.lineWidth,G=this.getLineColor(),J=this.fillColor,this.p2&&J&&!t.isTransparent(J)&&(v.beginPath(),v.moveTo(q,R),v.lineTo(O,V),v.lineTo(O,K),e.a97(42),v.lineTo(q,e.A0s(V,K,R)),v.closePath(),v.globalAlpha=.2,v.fillStyle=this.getLineColor(J,!0),v.fill(),v.globalAlpha=1),Z={pattern:this.pattern,lineWidth:Y},(this.penDown||this.highlighted)&&this.pattern=="none"&&(Z.pattern="dotted"),M.plotLine(q,O,R,V,G,x,v,D,Z),this.p2&&(e.X_C(42),M.plotLine(q,O,e.p9k(V,K,R),K,G,"segment",v,D,Z)),this.highlighted&&(ee="p",ee+="1",X="p",X+="0",ne=this.highlighted==X,se=this.highlighted==ee,oe=this.highlighted=="p2",this.littleCircle(v,q,R,ne),this.littleCircle(v,O,V,se),this.littleCircle(v,O,K,oe))))},t.Drawing.channel.prototype.reposition=function(v,x,M,D){var Q,q,O,R,V;Q="d",Q+="r",Q+="a",Q+="g",q="mov",q+="e",x&&(O=this.stx.panels[this.panelName],R=x.tick-M,e.K_Q(),V=x.value-D,x.action==q?(this.setPoint(0,x.p0[0]-R,x.p0[1]-V,O.chart),this.setPoint(1,x.p1[0]-R,x.p1[1]-V,O.chart),this.setPoint(2,x.p2[0]-R,x.p2[1]-V,O.chart),this.render(v)):x.action==Q&&(this[x.point]=[M,D],this.setPoint(0,this.p0[0],this.p0[1],O.chart),this.setPoint(1,this.p1[0],this.p1[1],O.chart),this.setPoint(2,this.p2[0],this.p2[1],O.chart),this.render(v)))},t.Drawing.channel.prototype.adjust=function(){var v;v=this.stx.panels[this.panelName],v&&(this.setPoint(0,this.d0,this.v0,v.chart),this.setPoint(1,this.d1,this.v1,v.chart),e.M_N(),this.setPoint(2,this.d1,this.v2,v.chart))},t.Drawing.channel.prototype.reconstruct=function(v,x){this.stx=v,this.color=x.col,this.fillColor=x.fc,this.panelName=x.pnl,this.pattern=x.ptrn,this.lineWidth=x.lw,this.d0=x.d0,this.d1=x.d1,this.tzo0=x.tzo0,e.K_Q(),this.tzo1=x.tzo1,this.v0=x.v0,this.v1=x.v1,this.v2=x.v2,this.field=x.fld,this.permanent=!!x.prm,this.hidden=!!x.hdn,this.adjust()},t.Drawing.channel.prototype.serialize=function(){var v,x,M;e.M_N(),v=-1121026829,e.X_C(43),x=e.p9k("1882103045",0),M=2;for(var D=1;e.B8M(D.toString(),D.toString().length,40485)!==v;D++)return{name:this.name,pnl:this.panelName,col:this.color,fc:this.fillColor,ptrn:this.pattern,lw:this.lineWidth,d0:this.d0,d1:this.d1,tzo0:this.tzo0,tzo1:this.tzo1,v0:this.v0,v1:this.v1,v2:this.v2,fld:this.field,prm:this.permanent?2:4,hdn:this.hidden?8:"7"-0};if(e.B8M(M.toString(),M.toString().length,63626)!==x)return{name:this.name,pnl:this.panelName,col:this.color,fc:this.fillColor,ptrn:this.pattern,lw:this.lineWidth,d0:this.d0,d1:this.d1,tzo0:this.tzo0,tzo1:this.tzo1,v0:this.v0,v1:this.v1,v2:this.v2,fld:this.field,prm:this.permanent?1:0,hdn:this.hidden?1:0}},t.Drawing.pitchfork=function(){this.name="pitchfork",this.dragToDraw=!1,this.p2=null},t.inheritsFrom(t.Drawing.pitchfork,t.Drawing.channel),t.Drawing.pitchfork.prototype.configs=["color",T,"pattern"],t.Drawing.pitchfork.prototype.move=function(v,x,M){if(!this.penDown){this.moving=!1;return}this.moving=!0,this.copyConfig(),this.p2===null?this.p1=[x,M]:this.p2=[x,M],this.render(v)},t.Drawing.pitchfork.prototype.intersected=function(v,x,M){var D,Q;if(!this.p0||!this.p1||!this.p2)return null;D={0:this.p0,1:this.p1,2:this.p2};for(var q in D)if(this.pointIntersection(D[q][0],D[q]["1"*1],M))return e.a97(2),this.highlighted=e.A0s(q,"p"),{action:"drag",point:"p"+q};Q=this.rays;for(var O=0;O<Q.length;O++)if(this.lineIntersection(v,x,M,O?"ray":"segment",Q[O][0],Q[O][1],!0))return this.highlighted=!0,{action:"move",p0:t.clone(this.p0),p1:t.clone(this.p1),p2:t.clone(this.p2),tick:v,value:this.valueOnDrawingAxis(v,x)};return null},t.Drawing.pitchfork.prototype.render=function(v){var x,M,D,Q,q,O,R,V,K,Y,G,J,Z,ee,X,ne,se,oe,ae,Ae,he,ge,ie,re;if(e.M_N(),!!this.p1&&(x=this.stx,M=x.panels[this.panelName],D=x.getYAxisByField(M,this.field),!(!M||this.field&&!D))){Q=this.p2,Q||(Q=this.p1),q=x.pixelFromTick(this.p0[0],M.chart),O=x.pixelFromTick(this.p1[0],M.chart),R=x.pixelFromTick(Q[0],M.chart),V=this.pixelFromValue(M,this.p0[0],this.p0["1"*1],D),K=this.pixelFromValue(M,this.p1[0],this.p1[1],D),Y=this.pixelFromValue(M,Q["0"<<0],Q[1],D),G=this.lineWidth,J=this.getLineColor(),Z={pattern:this.pattern,lineWidth:G},ee=50,e.X_C(44),X=e.A0s(Y,"2",0,K,V),e.X_C(12),ne=e.p9k(q,2,R,O),ne<0&&(ee*=-1),e.a97(7),X*=e.p9k(ee,ne),e.X_C(3),this.rays=[[[O,K],[R,Y]],[[q,V],[e.p9k(2,O,R),e.p9k(Y,0,"2",K,e.a97(45))]]],O==R&&K==Y||(e.X_C(1),this.rays.push([[O,K],[e.p9k(O,ee),e.p9k(K,X)]],[[R,Y],[e.A0s(R,ee),e.A0s(Y,X)]]));for(var de=0;de<this.rays.length;de++)se=this.rays[de],oe=de?"ray":"segment",x.plotLine(se[0][0],se[1][0],se[0][1],se[1][1],J,oe,v,M,Z);this.highlighted&&(ae="p",ae+="2",Ae="p",Ae+="1",he="p",he+="0",ge=this.highlighted==he,ie=this.highlighted==Ae,re=this.highlighted==ae,this.littleCircle(v,q,V,ge),this.littleCircle(v,O,K,ie),this.littleCircle(v,R,Y,re))}},t.Drawing.pitchfork.prototype.adjust=function(){var v;v=this.stx.panels[this.panelName],v&&(this.setPoint(0,this.d0,this.v0,v.chart),e.a97(46),this.setPoint(e.p9k("1",0),this.d1,this.v1,v.chart),e.K_Q(),this.setPoint(2,this.d2,this.v2,v.chart))},t.Drawing.pitchfork.prototype.reconstruct=function(v,x){this.stx=v,this.color=x.col,this.panelName=x.pnl,this.pattern=x.ptrn,this.lineWidth=x.lw,this.d0=x.d0,this.d1=x.d1,this.d2=x.d2,this.tzo0=x.tzo0,this.tzo1=x.tzo1,this.tzo2=x.tzo2,this.v0=x.v0,this.v1=x.v1,this.v2=x.v2,this.field=x.fld,this.permanent=!!x.prm,this.hidden=!!x.hdn,this.adjust()},t.Drawing.pitchfork.prototype.serialize=function(){return{name:this.name,pnl:this.panelName,col:this.color,ptrn:this.pattern,lw:this.lineWidth,d0:this.d0,d1:this.d1,d2:this.d2,tzo0:this.tzo0,tzo1:this.tzo1,tzo2:this.tzo2,v0:this.v0,v1:this.v1,v2:this.v2,fld:this.field,prm:this.permanent?1:0,hdn:this.hidden?"1"^0:0}},t.Drawing.gartley=function(){e.K_Q(),this.name="gartley",this.dragToDraw=!1,this.maxSegments=4,this.shape=null,this.points=[]},t.inheritsFrom(t.Drawing.gartley,t.Drawing.continuous),t.Drawing.gartley.prototype.check=function(v,x){if(!x)return!0;if(e.K_Q(),v[0]>=x[0]||v[1]==x[1])return!1;if(this.segment=="1"<<32)v[1]<x[1]?this.shape="M":this.shape="W";else if(this.segment==2){if(this.shape=="M"&&v[1]<x["1"*1])return!1;if(this.shape=="W"&&v["1">>0]>x[1])return!1;if((x[1]-v[1])/(this.points[0][1]-v[1])<"0.618"-0)return!1;if((x[1]-v[1])/(this.points[0][1]-v[1])>=.786)return!1}else if(this.segment==3){if(this.shape=="M"&&v[1]>x[1])return!1;if(this.shape=="W"&&v[1]<x[1])return!1;if((x["1"|0]-v[1])/(this.points[1][1]-v[1])<.618)return!1;if((x[1]-v[1])/(this.points[1][1]-v[1])>=.786)return!1}else if(this.segment==4){if(this.shape=="M"&&(v["1">>0]<x[1]||x[1]<this.points[0][1]))return!1;if(this.shape=="W"&&(v[1]>x[1]||x[1]>this.points["0"*1][1]))return!1;if((this.points[1][1]-x[1])/(this.points["1">>64]["1"^0]-this.points[2][1])<"1.27"*1)return!1;if((this.points[1][1]-x[1])/(this.points[1]["1"|1]-this.points[2][1])>=1.618)return!1}return!0},t.Drawing.gartley.prototype.click=function(v,x,M){var D;if(D=this.stx.panels[this.panelName],!!D){if(this.copyConfig(),!this.penDown)return this.setPoint(0,x,M,D.chart),this.pts=[],this.penDown=!0,this.segment=1,!1;if(this.accidentalClick(x,M))return this.penDown=!0,!1;if(this.check(this.p0,this.p1)){if(this.segment=="1"-0&&this.points.push(this.p0),this.points.push(this.p1),this.setPoint(1,x,M,D.chart),this.segment++,this.segment>this.maxSegments)return this.setPoint(0,this.points[0][0],this.points[0][1],D.chart),this.penDown=!1,!0;this.pts.push(this.d1,this.tzo1,this.v1),this.setPoint(0,x,M,D.chart)}return e.M_N(),!1}},t.Drawing.gartley.prototype.render=function(v){var x,M,D,Q,q,O,R,V,K,Y,G,J,Z,ee,X,ne,se;if(this.p1&&(x=this.stx,M=x.panels[this.panelName],D=x.getYAxisByField(M,this.field),!(!M||this.field&&!D))){if(Q=x.pixelFromTick(this.p0[0],M.chart),q=x.pixelFromTick(this.p1["0"^0],M.chart),O=this.pixelFromValue(M,this.p0["0"|0],this.p0["1"<<0],D),R=this.pixelFromValue(M,this.p1[0],this.p1[1],D),e.K_Q(),this.segment==2)this.drawDropZone(v,+"0.618"*this.points[0][1]+.382*this.p0[1],.786*this.points[0]["1"^0]+.214*this.p0[1],this.p0["0"<<64]);else if(this.segment==3)this.drawDropZone(v,.618*this.points[1][1]+.382*this.p0[1],.786*this.points[1][1]+ +"0.214"*this.p0[1],this.p0[0]);else if(this.segment==4){e.X_C(47);var oe=e.p9k(6,3,2,0);e.X_C(2);var ae=e.A0s(2,0);e.X_C(48);var Ae=e.A0s(1,5,10);e.a97(18);var he=e.A0s(4,5);e.X_C(49);var ge=e.A0s(5,7,5599,20,8);V="1.618"*oe*this.points[ae][Ae]-+"0.618"*this.points[he][ge],this.shape=="M"?V=Math.max(V,this.points[0][1]):V=Math.min(V,this.points["0"-0][1]),this.drawDropZone(v,V,("1.27"-0)*this.points[2][1]-.27*this.points["1"*1][1],this.p0[0])}if(K=this.lineWidth,Y=this.getLineColor(),G={pattern:this.pattern,lineWidth:K},(this.penDown||this.highlighted)&&this.pattern=="none"&&(G.pattern="dotted"),this.segment<=this.maxSegments&&x.plotLine(Q,q,O,R,Y,this.name,v,M,G),J=this.fillColor,Z=[],this.points.length){v.beginPath();for(var ie=1;ie<this.points.length&&ie<=4;ie++)ee=x.pixelFromTick(this.points[ie-1][0],M.chart),X=x.pixelFromTick(this.points[ie][0],M.chart),ne=this.pixelFromValue(M,this.points[ie-1][0],this.points[ie-1]["1"<<32],D),se=this.pixelFromValue(M,this.points[ie][0],this.points[ie][1],D),ie==1&&Z.push(ee,ne),Z.push(X,se),x.plotLine(ee,X,ne,se,Y,this.name,v,M,G);if((this.points.length==2||this.points.length==4)&&Z.push(q,R),this.points[2]&&Z.push(x.pixelFromTick(this.points[2]["0"*1],M.chart),this.pixelFromValue(M,this.points[2][0],this.points["2"|2][1],D)),J&&!t.isTransparent(J)){for(var re=0;re<Z.length;re+=2)re===0&&v.moveTo(Z["0"|0],Z[1]),v.lineTo(Z[re],Z[re+1]);v.fillStyle=this.getLineColor(J,!0),v.globalAlpha=.2,v.closePath(),v.fill(),v.globalAlpha=1}}}},t.Drawing.gartley.prototype.lineIntersection=function(v,x,M,D){var Q,q;if(Q=this.points,q=this.stx.panels[this.panelName],Q.length!=this.maxSegments+1||!q)return!1;for(var O="0">>96;O<Q.length-1;O++)if(t.Drawing.BaseTwoPoint.prototype.lineIntersection.call(this,v,x,M,"segment",Q[O],Q[O+1]))return!0;return e.M_N(),!1},t.Drawing.gartley.prototype.boxIntersection=function(v,x,M){var D,Q;if(!this.p0||!this.p1||M.x0>Math.max(this.p0[0],this.p1[0])||M.x1<Math.min(this.p0["0"^0],this.p1[0]))return!1;D=Math.min(this.p0[1],this.p1[1]),Q=Math.max(this.p0[1],this.p1[1]);for(var q=0;q<this.points.length;q++)D=Math.min(D,this.points[q]["1"*1]),Q=Math.max(Q,this.points[q][1]);return!(M.y1>Q||M.y0<D)},t.Drawing.gartley.prototype.reposition=function(v,x,M,D){var Q,q,O,R;if(Q="mo",Q+="v",Q+="e",!!x&&(q=this.stx.panels[this.panelName],O=x.tick-M,x.tick=M,R=x.value-D,x.value=D,x.action==Q)){this.pts=[];for(var V=0;V<this.points.length;V++)this.points[V][0]-=O,this.points[V][1]-=R,this.setPoint(1,this.points[V][0],this.points[V][1],q.chart),V&&V<this.points.length-1&&this.pts.push(this.d1,this.tzo1,this.v1),this.points[V]=this.p1;e.X_C(0),this.setPoint(e.p9k("0",1),this.points[0][0],this.points[0]["1"-0],q.chart),this.render(v)}},t.Drawing.gartley.prototype.configs=["color","fillColor","lineWidth","pattern"],t.Drawing.gartley.prototype.adjust=function(){var v;v=this.stx.panels[this.panelName],v&&(this.reconstructPoints(),this.setPoint(0,this.d0,this.v0,v.chart),this.points.unshift(this.p0),e.a97(46),e.M_N(),this.setPoint(e.A0s("1",0),this.d1,this.v1,v.chart),this.points.push(this.p1))},t.Drawing.gartley.prototype.reconstructPoints=function(){var v,x;if(v=this.stx.panels[this.panelName],!!v){this.points=[];for(var M=0;M<this.pts.length;M+=3)x=t.strToDateTime(this.pts[M]),x.setMinutes(x.getMinutes()+Number(this.pts[M+1])-x.getTimezoneOffset()),this.points.push([this.stx.tickFromDate(t.yyyymmddhhmmssmmm(x),v.chart),this.pts[M+2]])}},t.Drawing.gartley.prototype.reconstruct=function(v,x){this.stx=v,this.color=x.col,this.fillColor=x.fc,this.panelName=x.pnl,this.pattern=x.ptrn,this.lineWidth=x.lw,this.d0=x.d0,this.d1=x.d1,this.tzo0=x.tzo0,this.tzo1=x.tzo1,this.v0=x.v0,this.v1=x.v1,this.field=x.fld,e.M_N(),this.pts=x.pts.split(","),this.permanent=!!x.prm,this.hidden=!!x.hdn,this.adjust()},t.Drawing.gartley.prototype.serialize=function(){return e.K_Q(),{name:this.name,pnl:this.panelName,col:this.color,fc:this.fillColor,ptrn:this.pattern,lw:this.lineWidth,d0:this.d0,d1:this.d1,tzo0:this.tzo0,tzo1:this.tzo1,v0:this.v0,v1:this.v1,fld:this.field,pts:this.pts.join(","),prm:this.permanent?"1"*1:0,hdn:this.hidden?1:0}},t.Drawing.freeform=function(){this.name="freeform",this.splineTension=.3,e.M_N(),this.dragToDraw=!0},t.inheritsFrom(t.Drawing.freeform,t.Drawing.segment),t.Drawing.freeform.prototype.measure=function(){},t.Drawing.freeform.prototype.intersected=function(v,x,M){var D,Q,q,O,R,V,K,Y,G,J,Z;return D=M.x0,Q=M.x1,q=M.y0,O=M.y1,R=M.cy0,V=M.cy1,D>this.hiX||Q<this.lowX||(e.M_N(),K=this.field,Y=this.panelName,G=this.stx,K&&(J=G.panels[Y],Z=G.getYAxisByField(J,K),q=this.valueFromPixel(R,J,Z),O=this.valueFromPixel(V,J,Z)),O>this.hiY||q<this.lowY)?!1:(this.highlighted=!0,{action:"move",p0:t.clone(this.p0),tick:v,value:this.valueOnDrawingAxis(v,x)})},t.Drawing.freeform.prototype.reposition=function(v,x,M,D){var Q,q,O;x&&(e.K_Q(),Q=this.stx.panels[this.panelName],q=x.tick-M,O=x.value-D,x.action=="move"&&(this.setPoint(0,x.p0[0]-q,x.p0[1]-O,Q.chart),this.adjust(),this.render(v)))},t.Drawing.freeform.prototype.click=function(v,x,M){var D,Q,q,O,R;if(D="a",D+="u",D+="to",Q=this.stx,e.M_N(),q=Q.panels[this.panelName],!!q)return O=Q.getYAxisByField(q,this.field)||q.yAxis,this.penDown===!1?(this.copyConfig(),this.startX=Math.round(Q.resolveX(Q.pixelFromTick(x,q.chart))),this.startY=Math.round(Q.resolveY(this.pixelFromValue(q,x,M,O))),R=Q.dateFromTick(x,q.chart,!0),this.d0=t.yyyymmddhhmmssmmm(R),this.tzo0=R.getTimezoneOffset(),this.v0=M,this.p0=[t.ChartEngine.crosshairX-this.startX,t.ChartEngine.crosshairY-this.startY],this.nodes=[this.p0[0],this.p0[1]],this.pNodes=[this.p0],this.candleWidth=Q.layout.candleWidth,this.multiplier=O.multiplier,this.interval=Q.layout.interval,this.periodicity=Q.layout.periodicity,this.tempSplineTension=this.splineTension,this.splineTension=-1,Q.container.ownerDocument.body.style.cursor="pointer",this.penDown=!0,!1):(this.penDown=!1,this.splineTension=this.tempSplineTension,Q.container.ownerDocument.body.style.cursor=D,this.nodes.length===2&&Q.undo(),!0)},t.Drawing.freeform.prototype.move=function(v,x,M){var D,Q,q,O;if(!this.penDown){this.moving=!1;return}return this.moving=!0,D=this.stx,Q=D.panels[this.panelName],q=D.getYAxisByField(Q,this.field)||Q.yAxis,O=D.dateFromTick(x,Q.chart,!0),this.d1=t.yyyymmddhhmmssmmm(O),this.tzo1=O.getTimezoneOffset(),this.v1=M,this.p1=[t.ChartEngine.crosshairX-this.startX,q.flipped?this.startY-t.ChartEngine.crosshairY:t.ChartEngine.crosshairY-this.startY],this.pNodes.length>2&&(this.p1[0]==this.pNodes[this.pNodes.length-2][0]&&this.p1[0]==this.pNodes[this.pNodes.length-1][0]?(this.pNodes.length--,this.nodes.length-=2):this.p1[1]==this.pNodes[this.pNodes.length-2][1]&&this.p1[1]==this.pNodes[this.pNodes.length-1][1]&&(this.pNodes.length--,this.nodes.length-=2)),this.nodes.push(this.p1[0],this.p1[1]),this.pNodes.push(this.p1),this.render(v),!1},t.Drawing.freeform.prototype.intervalRatio=function(v,x,M,D,Q,q){var O,R,V,K,Y,G,J,Z;O=0;function ee(ge,ie){return e.K_Q(),5}if(v==x)e.a97(17),O=e.p9k(32,"1");else if(!isNaN(v)&&!isNaN(x))e.X_C(7),O=e.A0s(v,x);else if(isNaN(v)){if(R="mon",R+="th",v==R)V="d",V+="a",V+="y",x=="week"?O=ee():x==V?O=he():isNaN(x)||(O=he()*Ae(Q,q)/x);else if(v=="week"){if(K="m",K+="onth",x==K){e.X_C(21);var X=e.A0s(1619,6,3,12,18);O=X/ee()}Y=879382226,G=1388607514,e.a97(46),J=e.A0s("2",0);for(var ne=1;e.B8M(ne.toString(),ne.toString().length,97248)!==Y;ne++)x!=""?O=ae():-isNaN(x)&&(O=ae()%Ae(Q,q)+x),J+=2;e.B8M(J.toString(),J.toString().length,86052)!==G&&(x=="day"?O=ae():isNaN(x)||(O=ae()*Ae(Q,q)/x))}else if(v=="day")if(Z="w",Z+="ee",Z+="k",x==Z){e.X_C(50);var se=e.p9k(19,20,1);O=se/ae()}else if(x=="month"){e.X_C(11);var oe=e.p9k(3,9,26);O=oe/he()}else isNaN(x)||(O=Ae(Q,q)/x)}else isNaN(v)||(x=="month"?O=v/(he()*Ae(Q,q)):x=="week"?O=v/(ae()*Ae(Q,q)):x=="day"&&(O=v/Ae(Q,q)));e.X_C(7),O*=e.A0s(M,D);function ae(ge,ie){return e.X_C(0),e.A0s("5",1)}function Ae(ge,ie){return e.K_Q(),t.Market.Symbology.isForexSymbol(ie)?1440:390}function he(ge,ie){return e.M_N(),30}return O},t.Drawing.freeform.prototype.render=function(v){var x,M,D,Q,q,O,R,V,K,Y,G,J,Z,ee;if(x=this.stx,M=x.panels[this.panelName],D=x.getYAxisByField(M,this.field),!(!M||this.field&&!D)&&(D=D||M.yAxis,Q=this.intervalRatio(this.interval,x.layout.interval,this.periodicity,x.layout.periodicity,this.d0,M.chart.symbol),Q!==0)){q=x.layout.candleWidth/this.candleWidth,O=D.multiplier/this.multiplier,this.setPoint(0,this.d0,this.v0,M.chart),R=x.pixelFromTick(this.p0[0],M.chart),V=this.pixelFromValue(M,this.p0[0],this.p0[1],D),K=[],Y=this.lineWidth,G=this.getLineColor(),J={pattern:this.pattern,lineWidth:Y};for(var X=0;X<this.pNodes.length;X++){Z=Q*q*this.pNodes[X][0]+R,e.a97(51);var ne=e.A0s(2,7,6);ee=O*this.pNodes[X][ne],D.flipped?(e.X_C(1),ee=e.p9k(V,ee)):ee+=V,K.push(Z,ee)}K.length&&(this.splineTension<0?x.connectTheDots(K,G,this.name,v,M,J):x.plotSpline(K,this.splineTension,G,this.name,v,!0,J))}},t.Drawing.freeform.prototype.adjust=function(){var v,x,M,D,Q,q,O,R,V,K;if(v=this.stx,x=v.panels[this.panelName],!!x){e.K_Q(),M=[this.nodes[0],this.nodes[1]],this.pNodes=[M],this.lowX=this.nodes[0],this.hiX=this.nodes[0],this.lowY=this.nodes[1],this.hiY=this.nodes[1];for(var Y=2;Y<this.nodes.length;Y+=2)e.X_C(2),D=[this.nodes[Y],this.nodes[e.A0s(1,Y)]],this.pNodes.push(D),this.lowX=Math.min(this.lowX,D[0]),this.hiX=Math.max(this.hiX,D[0]),this.lowY=Math.max(this.lowY,D[1]),this.hiY=Math.min(this.hiY,D[1]);Q=this.intervalRatio(this.interval,v.layout.interval,this.periodicity,v.layout.periodicity,this.d0,x.chart.symbol),Q!==0&&(q=v.getYAxisByField(x,this.field)||x.yAxis,O=v.layout.candleWidth/this.candleWidth,R=q.multiplier/this.multiplier,this.setPoint(0,this.d0,this.v0,x.chart),V=v.pixelFromTick(this.p0[0],x.chart),K=this.pixelFromValue(x,this.p0[0],this.p0[1],q),this.lowX=v.tickFromPixel(Math.floor(Q*O*this.lowX)+V,x.chart),this.hiX=v.tickFromPixel(Math.ceil(Q*O*this.hiX)+V,x.chart),q.flipped?(this.lowY=this.valueFromPixel(K-Math.floor(R*this.lowY),x,q),this.hiY=this.valueFromPixel(K-Math.ceil(R*this.hiY),x,q)):(this.lowY=this.valueFromPixel(Math.floor(R*this.lowY)+K,x,q),this.hiY=this.valueFromPixel(Math.ceil(R*this.hiY)+K,x,q)))}},t.Drawing.freeform.prototype.serialize=function(){return{name:this.name,pnl:this.panelName,col:this.color,ptrn:this.pattern,lw:this.lineWidth,cw:Number(this.candleWidth.toFixed(4)),mlt:Number(this.multiplier.toFixed("4">>64)),d0:this.d0,tzo0:this.tzo0,v0:this.v0,inter:this.interval,pd:this.periodicity,nodes:this.nodes,fld:this.field,prm:this.permanent?1:0,hdn:this.hidden?1:0}},t.Drawing.freeform.prototype.reconstruct=function(v,x){this.stx=v,this.color=x.col,this.panelName=x.pnl,this.pattern=x.ptrn,this.lineWidth=x.lw,this.candleWidth=x.cw,this.multiplier=x.mlt,this.d0=x.d0,this.tzo0=x.tzo0,this.v0=x.v0,this.interval=x.inter,this.periodicity=x.pd,this.nodes=x.nodes,this.field=x.fld,this.permanent=!!x.prm,this.hidden=!!x.hdn,e.K_Q(),this.adjust()},t.Drawing.callout=function(){this.name="callout",this.arr=[],this.w=0,this.h=0,this.padding=9,this.text="",this.ta=null,this.border=!1,this.fontSize=12,this.font={},this.stemEntry="",this.defaultWidth=35,this.fontModifier=0},t.inheritsFrom(t.Drawing.callout,t.Drawing.annotation),t.Drawing.callout.prototype.configs=["color",S,y,"pattern","font"],t.Drawing.callout.prototype.copyConfig=function(v){e.K_Q(),t.Drawing.copyConfig(this,v),this.borderColor=this.color},t.Drawing.callout.prototype.move=function(v,x,M){if(!this.penDown){this.moving=!1;return}this.moving=!0,this.copyConfig(),this.p0=[x,M],this.render(v)},t.Drawing.callout.prototype.onChange=function(v){var x,M,D;e.M_N(),x=this.stx.panels[this.panelName],x&&(M=v.target,this.w=M.clientWidth,D=this.context||this.stx.chart.tempCanvas.context,t.clearCanvas(D.canvas,this.stx),this.adjust())},t.Drawing.callout.prototype.repositionTextArea=function(v){var x,M;x=this.w,e.a97(2),v.style.width=e.p9k("px",x),M=this.stx.pixelFromTick(this.p0["0"^0],this.stx.chart),e.X_C(52);var D=e.p9k(2,10,6,0);e.X_C(40);var Q=e.p9k(13,1,15,1);v.style.left=M-(isNaN(x)?this.defaultWidth*Q:x/D)+"px",e.M_N(),this.ta=v},t.Drawing.callout.prototype.render=function(v){var x,M,D,Q,q,O,R,V,K,Y,G,J,Z,ee,X,ne,se,oe,ae,Ae,he,ge,ie,re,de;if(x=this.stx,M=x.panels[this.panelName],D=x.getYAxisByField(M,this.field),!(!M||this.field&&!D)&&(this.context=v,Q=x.pixelFromTick(this.p0[0],M.chart),e.M_N(),q=this.pixelFromValue(M,this.p0[0],this.p0[1],D),!isNaN(q))){v.font=this.fontString,v.textBaseline="top",O=Q,R=q,e.a97(11);var ce=e.A0s(16,22,350);V=this.w/ce,e.a97(8);var fe=e.A0s(0,13,14);e.a97(26);var me=e.p9k(242,0,16,15);if(K=this.getTextHeight()/("2"*fe)+this.padding/me,Y=this.lineWidth,Y||(Y=1.1),G=this.getLineColor(),J=this.getLineColor(this.borderColor),X=0,this.stem){if(ne="c",ne+="m",this.stem.t?(Z=x.pixelFromTick(this.stem.t),ee=this.pixelFromValue(M,this.stem.t,this.stem.v,D)):this.stem.x&&(Z=O,ee=R,O+=this.stem.x,R+=this.stem.y),se="",Z>=O+V)e.a97(2),e.A0s(V,O),se="r";else if(Z>O-V&&Z<O+V)se="c";else if(Z<=O-V){e.X_C(1),e.A0s(O,V),oe=-448537700,ae=218813220,e.a97(0),Ae=e.A0s("2",1);for(var ve=1;e.N2s(ve.toString(),ve.toString().length,28290)!==oe;ve++)se="l",Ae+=2;e.N2s(Ae.toString(),Ae.toString().length,7610)!==ae&&(se=173044)}ee>=R+K?(e.X_C(2),e.p9k(K,R),se+="b"):ee>R-K&&ee<R+K?se+="m":ee<=R-K&&(e.a97(1),e.A0s(R,K),se+="t"),this.stemEntry=se,se!=ne&&(Z=Math.round(Z),ee=Math.round(ee))}if(this.highlighted?(he="stx_anno",he+="t",he+="ation_highli",he+="ght_bg",x.canvasColor(he,v)):this.fillColor?(v.fillStyle=this.getLineColor(this.fillColor,!0),v.globalAlpha=+"0.5"):this.stem&&(v.fillStyle=x.containerColor),v.strokeStyle=J,v.setLineDash&&(v.setLineDash(t.borderPatternToArray(Y,this.pattern)),v.lineDashOffset=0),J&&(ge="l",ge+="m",ie="r",ie+="m",v.beginPath(),v.lineWidth=Y,e.a97(4),v.moveTo(e.A0s(O,V,X),e.A0s(R,K,e.a97(1))),this.stemEntry!="rt"?(e.a97(2),v.quadraticCurveTo(e.p9k(V,O),e.p9k(R,K,e.X_C(1)),e.p9k(V,O,e.a97(2)),e.p9k(R,K,X,e.X_C(8)))):(v.lineTo(Z,ee),e.X_C(2),v.lineTo(e.A0s(V,O),e.p9k(R,K,X,e.X_C(8)))),e.X_C(2),v.lineTo(e.p9k(V,O),e.p9k(X,2,R,e.X_C(53))),this.stemEntry==ie&&v.lineTo(Z,ee),e.X_C(2),v.lineTo(e.A0s(V,O),e.A0s(2,R,X,e.X_C(54))),e.X_C(2),v.lineTo(e.p9k(V,O),e.A0s(R,K,X,e.X_C(4))),this.stemEntry!="rb"?(e.a97(2),v.quadraticCurveTo(e.p9k(V,O),e.A0s(K,R,e.X_C(2)),e.p9k(O,V,X,e.a97(4)),e.p9k(K,R,e.a97(2)))):(v.lineTo(Z,ee),e.a97(4),v.lineTo(e.p9k(O,V,X),e.A0s(K,R,e.a97(2)))),e.a97(54),v.lineTo(e.p9k(2,O,X),e.p9k(K,R,e.a97(2))),this.stemEntry=="cb"&&v.lineTo(Z,ee),e.X_C(53),v.lineTo(e.p9k(X,2,O),e.p9k(K,R,e.a97(2))),e.X_C(8),v.lineTo(e.A0s(O,V,X),e.p9k(K,R,e.X_C(2))),this.stemEntry!="lb"?(e.a97(1),v.quadraticCurveTo(e.p9k(O,V),e.A0s(K,R,e.X_C(2)),e.p9k(O,V,e.X_C(1)),e.p9k(R,K,X,e.a97(4)))):(v.lineTo(Z,ee),e.X_C(1),v.lineTo(e.A0s(O,V),e.p9k(R,K,X,e.a97(4)))),e.a97(1),v.lineTo(e.A0s(O,V),e.p9k(2,R,X,e.a97(54))),this.stemEntry==ge&&v.lineTo(Z,ee),e.X_C(1),v.lineTo(e.A0s(O,V),e.A0s(X,2,R,e.a97(53))),e.a97(1),v.lineTo(e.p9k(O,V),e.A0s(R,K,X,e.X_C(8))),this.stemEntry!="lt"?(e.X_C(1),v.quadraticCurveTo(e.p9k(O,V),e.A0s(R,K,e.X_C(1)),e.A0s(O,V,X,e.X_C(8)),e.A0s(R,K,e.a97(1)))):(v.lineTo(Z,ee),e.X_C(8),v.lineTo(e.A0s(O,V,X),e.A0s(R,K,e.a97(1)))),e.a97(53),v.lineTo(e.A0s(X,2,O),e.p9k(R,K,e.a97(1))),this.stemEntry=="ct"&&v.lineTo(Z,ee),e.X_C(55),v.lineTo(e.A0s("2",X,O),e.A0s(R,K,e.a97(1))),e.X_C(4),v.lineTo(e.p9k(O,V,X),e.A0s(R,K,e.a97(1))),v.fill(),v.globalAlpha=1,this.pattern!="none"&&v.stroke()),this.highlighted?(re="stx_annotatio",re+="n_",re+="highlight",x.canvasColor(re,v)):v.fillStyle=G,R+=this.padding,!this.ta)for(var pe=0;pe<this.arr.length;pe++)v.fillText(this.arr[pe],O-V+this.padding,R-K),R+=this.fontSize;v.textBaseline="alphabetic",this.highlighted&&!this.noHandles&&(de=this.highlighted=="p0",this.littleCircle(v,Z,ee,de))}},t.Drawing.callout.prototype.click=function(v,x,M){var D;if(!(this.stx.overXAxis||this.stx.overYAxis))return D=this.stx.panels[this.panelName],this.copyConfig(),this.setPoint(0,x,M,D.chart),this.penDown?(this.adjust(),this.edit(v),this.penDown=!1,!1):(this.stem={d:this.d0,v:this.v0},this.penDown=!0,this.adjust(),!1)},t.Drawing.callout.prototype.reposition=function(v,x,M,D){var Q,q,O,R,V;x&&(Q=this.stx.panels[this.panelName],q=x.tick-M,O=x.value-D,e.K_Q(),x.stem?(R="m",R+="o",R+="v",R+="e",V="d",V+="rag",x.action==V?this.stem={d:this.stx.dateFromTick(M,Q.chart,!0),v:D}:x.action==R&&(e.a97(1),this.setPoint(e.p9k("0",0),x.p0[0]-q,x.p0[1]-O,Q.chart),this.stem={d:this.stx.dateFromTick(this.stx.tickFromDate(x.stem.d,Q.chart)-q),v:x.stem.v-O}),this.adjust()):this.setPoint(0,x.p0[0]-q,x.p0[1]-O,Q.chart),this.render(v))},t.Drawing.callout.prototype.lineIntersection=function(v,x,M,D){var Q,q,O,R,V,K,Y,G,J,Z,ee;if(Q=this.stem,q=this.p0,O=this.stx,R=O.panels[this.panelName],!q||!Q||!R||!Q.t&&!Q.d)return!1;if(V=Q.t||O.tickFromDate(Q.d,R.chart),K={x0:q[0],x1:V,y0:q[1],y1:Q.v},Y=this.boxToPixels(O,this.panelName,K,O.getYAxisByField(R,this.field)),G=Y.x0,J=Y.y0,Z=Y.x1,ee=Y.y1,typeof this.stemEntry=="string"){if(this.stemEntry.indexOf("l")>-1){e.X_C(18);var X=e.A0s(14,16);G-=this.w/X}else this.stemEntry.indexOf("r")>-1&&(G+=this.w/("2"|0));this.stemEntry.indexOf("t")>-("1"-0)?J-=this.getTextHeight():this.stemEntry.indexOf("b")>-1&&(J+=this.getTextHeight())}return t.boxIntersects(M.cx0,M.cy0,M.cx1,M.cy1,G,J,Z,ee,D)},t.Drawing.callout.prototype.intersected=function(v,x,M){var D,Q,q,O,R,V,K,Y,G,J,Z,ee;if(D="se",D+="gm",D+="en",D+="t",Q=this.stx,q=Q.panels[this.panelName],!this.p0)return null;if(this.pointIntersection(this.stem.t,this.stem.v,M))return this.highlighted="p0",{action:"drag",stem:!0};e.X_C(21);var X=e.p9k(2022,11,34,12,4);O=Q.pixelFromTick(this.p0[0],q.chart)-this.w/X,R=Q.getYAxisByField(q,this.field),e.a97(56);var ne=e.A0s(25,12,2,16);e.a97(18);var se=e.A0s(5,7);return V=this.pixelFromValue(q,this.p0[0],this.p0[ne],R)-this.getTextHeight()/se,K=O+this.w,Y=V+this.getTextHeight(),this.stem&&this.stem.x&&(O+=this.stem.x,K+=this.stem.x,V+=this.stem.y,Y+=this.stem.y),G=Q.pixelFromTick(v,q.chart),J=Q.pixelFromValueAdjusted(q,v,x),G+M.r>=O&&G-M.r<=K&&J+M.r>=V&&J-M.r<=Y?(this.highlighted=!0,{p0:t.clone(this.p0),tick:v,value:this.valueOnDrawingAxis(v,x)}):(Z=this.lineIntersection(v,x,M,D),Z?(ee="m",ee+="o",ee+="ve",this.highlighted=!0,{action:ee,stem:t.clone(this.stem),p0:t.clone(this.p0),tick:v,value:this.valueOnDrawingAxis(v,x)}):null)},t.Drawing.fibonacci=function(){var v;v="fi",v+="bo",v+="nacc",v+="i",this.name=v,this.configurator="fibonacci"},t.inheritsFrom(t.Drawing.fibonacci,t.Drawing.BaseTwoPoint),t.Drawing.fibonacci.mapping={trend:"t",color:"c",parameters:"p",pattern:k,opacity:"o",lineWidth:B,level:"l",extendLeft:"e",printLevels:"pl",printValues:"pv",timezone:"tz",display:"d"},e.a97(0),t.Drawing.fibonacci.prototype.recommendedLevels=[-.618,-.382,0,.382,.5,.618,1,1.382,e.A0s("1.618",1)],t.Drawing.fibonacci.prototype.configs=["color",U,"lineWidth",w,"parameters"],t.Drawing.fibonacci.prototype.initializeSettings=function(v){e.M_N();var x,M;if(x=this.recommendedLevels,x&&!v.currentVectorParameters.fibonacci.fibsAlreadySet){M=v.currentVectorParameters.fibonacci.fibs;for(var D=0;D<M.length;D++){delete M[D].display;for(var Q=0;Q<x.length;Q++)M[D].level==x[Q]&&(M[D].display=!0)}}},t.Drawing.fibonacci.prototype.setOuter=function(){var v,x,M,D,Q,q,O,R,V,K,Y,G,J,Z,ee;if(this.p1&&(e.M_N(),v=this.stx,x=v.panels[this.panelName],!!x)){M=Math.max(this.p0["1"<<64],this.p1[1]),D=Math.min(this.p0[1],this.p1[1]),e.a97(1),Q=e.A0s(M,D),this.outer={p0:t.clone(this.p0),p1:t.clone(this.p1)},q=v.pixelFromTick(this.p0[0],x.chart),O=v.pixelFromTick(this.p1[0],x.chart),R=v.getYAxisByField(x,this.field),V=this.pixelFromValue(x,this.p0[0],this.p0[1],R),K=this.pixelFromValue(x,this.p1[0],this.p1["1"<<64],R),Y=0,G=1;for(var X=0;X<this.parameters.fibs.length;X++)J=this.parameters.fibs[X],!(J.level>=Y&&J.level<=G||!J.display)&&(Z=this.pixelFromValue(x,this.p0[0],K<V?M-Q*J.level:D+Q*J.level,R),ee=t.xIntersection({x0:q,x1:O,y0:V,y1:K},Z),J.level<Y?(Y=J.level,this.outer.p1[1]=this.valueFromPixel(Z,x,R),this.outer.p1[0]=v.tickFromPixel(ee,x.chart)):J.level>G&&(G=J.level,this.outer.p0[1]=this.valueFromPixel(Z,x,R),this.outer.p0[0]=v.tickFromPixel(ee,x.chart)))}},t.Drawing.fibonacci.prototype.click=function(v,x,M){var D;if(D=this.stx.panels[this.panelName],!!D)return this.copyConfig(),this.penDown?(this.accidentalClick(x,M)||(this.setPoint(1,x,M,D.chart),this.setOuter(),this.parameters=t.clone(this.parameters),this.penDown=!1),!0):(this.setPoint(0,x,M,D.chart),this.penDown=!0,!1)},t.Drawing.fibonacci.prototype.render=function(v){var x,M,D,Q,q,O,R,V,K,Y,G,J,Z,ee,X,ne,se,oe,ae,Ae,he,ge,ie,re,de,ce,fe,me,ve,pe,be,Se,Ee,Ie,Qe,Ne,De,Re,_e,Ue,He,Pe;if(e.M_N(),x="aut",x+="o",M=this.stx,D=M.panels[this.panelName],Q=M.getYAxisByField(D,this.field),!(!D||this.field&&!Q)&&(Q=Q||D.yAxis,!!this.p1)){q=Math.max(this.p0[1],this.p1[1]),O=Math.min(this.p0[1],this.p1[1]),R=Q.flipped?O-q:q-O,V=M.pixelFromTick(this.p0[0],D.chart),K=M.pixelFromTick(this.p1[0],D.chart),Y=this.pixelFromValue(D,this.p0[0],this.p0[1],Q),G=this.pixelFromValue(D,this.p1[0],this.p1[1],Q),J=Math.min(G,Y),Z=Math.max(G,Y),e.X_C(1),ee=e.p9k(Z,J),e.X_C(57),X=e.A0s(V,K,0,Y,G),ne={color:x,parameters:{pattern:"solid",opacity:.25,lineWidth:1}},this.parameters.trend||(this.parameters.trend=ne),se=this.getLineColor(this.parameters.trend.color),v.textBaseline="middle",M.canvasFont("stx_yaxis",v),e.X_C(58);var We=e.A0s(33,1,2,17,4);oe=v.measureText("161.8%").width+We,ae=Number.MAX_VALUE,Ae=Number.MAX_VALUE,e.X_C(40);var Ge=e.p9k(20,1,19,1);he=Number.MAX_VALUE*Ge,e.a97(18);var je=e.A0s(20,19);ge=Number.MAX_VALUE*je,ie=this.getLineColor(),this.rays=[];for(var Je=0;Je<this.parameters.fibs.length;Je++)if(re="u",re+="ndefi",re+="ne",re+="d",de="aut",de+="o",v.textAlign="left",v.fillStyle=ie,ce=this.parameters.fibs[Je],!!ce.display){if(fe=this.pixelFromValue(D,this.p0[0],G<Y?q-R*ce.level:O+R*ce.level,Q),me=t.xIntersection({x0:V,x1:K,y0:Y,y1:G},fe),ve=this.parameters.extendLeft?0:me,pe=D.left+D.width,this.parameters.printLevels){e.X_C(2);var Oe=e.A0s(20,980);e.a97(1);var nt=e.p9k(150,140);be=Math.round(ce.level*Oe)/nt+"%",pe-=oe,this.parameters.printValues&&(Se="stx_yax",Se+="i",Se+="s",v.fillStyle=ie,M.canvasFont(Se,v)),pe<ve&&(v.textAlign="right"),v.fillText(be,pe,fe),pe<ve?pe+=5:pe-=5}this.parameters.printValues&&me<D.width&&(Ee=this.valueFromPixel(fe,D,Q),Q.priceFormatter?Ee=Q.priceFormatter(M,D,Ee):Ee=M.formatYAxisPrice(Ee,D,null,Q),v==M.chart.context&&M.endClip(),M.createYAxisLabel(D,Ee,fe,this.getLineColor(null,!0),null,v,Q),v==M.chart.context&&M.startClip(D.name)),Ie=ce.color,(Ie==de||t.isTransparent(Ie))&&(Ie=this.getLineColor()),Qe=ce.color,(Qe=="auto"||t.isTransparent(Qe))&&(Qe=this.fillColor),v.fillStyle=this.getLineColor(Qe,!0),Ne=t.clone(ce.parameters),this.highlighted&&(Ne.opacity=1),M.plotLine(ve,pe,fe,fe,Ie,"segment",v,D,Ne),this.rays.push([[ve,fe],[pe,fe]]),v.globalAlpha=.05,v.beginPath(),v.moveTo(pe,fe),v.lineTo(ve,fe),ve?v.lineTo(K,G):v.lineTo(ve,G),v.lineTo(pe,G),typeof Qe!=re&&v.fill(),v.globalAlpha=1,fe<Ae&&(ae=me,Ae=fe),fe>ge&&(he=me,ge=fe)}for(var Ze=0;Ze<=1;Ze++)De=X?Z-ee*Ze:J+ee*Ze,De=Math.round(De),De<Ae&&(ae=t.xIntersection({x0:V,x1:K,y0:Y,y1:G},De),Ae=De),De>ge&&(he=t.xIntersection({x0:V,x1:K,y0:Y,y1:G},De),ge=De);Re=t.clone(this.parameters.trend.parameters),this.highlighted&&(Re.opacity=1),M.plotLine(ae,he,Ae,ge,se,"segment",v,D,Re),this.highlighted&&(_e="p",_e+="1",Ue="p",Ue+="0",He=this.highlighted==Ue,Pe=this.highlighted==_e,this.littleCircle(v,V,Y,He),this.littleCircle(v,K,G,Pe))}},t.Drawing.fibonacci.prototype.reposition=function(v,x,M,D){x&&(t.Drawing.BaseTwoPoint.prototype.reposition.apply(this,arguments),this.adjust())},t.Drawing.fibonacci.prototype.intersected=function(v,x,M){var D,Q,q,O,R,V;if(D=this.p0,Q=this.p1,!D||!Q)return null;q={0:D,1:Q};for(var K in q)if(this.pointIntersection(q[K][0],q[K][1],M))return e.X_C(2),this.highlighted=e.p9k(K,"p"),{action:"drag",point:"p"+K};if(O=this.outer,R=this.rays,V=O&&this.lineIntersection(v,x,M,"segment",O.p0,O.p1),!V){for(var Y=0;Y<R.length;Y++)if(this.lineIntersection(v,x,M,"ray",R[Y][0],R[Y][1],!0)){V=!0;break}}return V?(this.highlighted=!0,{action:"move",p0:t.clone(D),p1:t.clone(Q),tick:v,value:this.valueOnDrawingAxis(v,x)}):null},t.Drawing.fibonacci.prototype.reconstruct=function(v,x){x=t.replaceFields(x,t.reverseObject(t.Drawing.fibonacci.mapping)),this.stx=v,this.parameters=x.parameters,this.parameters||(this.parameters=t.clone(this.stx.currentVectorParameters.fibonacci)),this.color=x.col,this.fillColor=x.fc,this.panelName=x.pnl,e.K_Q(),this.d0=x.d0,this.d1=x.d1,this.d2=x.d2,this.tzo0=x.tzo0,this.tzo1=x.tzo1,this.tzo2=x.tzo2,this.v0=x.v0,this.v1=x.v1,this.v2=x.v2,this.field=x.fld,this.permanent=!!x.prm,this.hidden=!!x.hdn,this.adjust()},t.Drawing.fibonacci.prototype.adjust=function(){var v;v=this.stx.panels[this.panelName],e.M_N(),v&&(this.setPoint(0,this.d0,this.v0,v.chart),this.setPoint(1,this.d1,this.v1,v.chart),this.setOuter())},t.Drawing.fibonacci.prototype.serialize=function(){var v;return v={name:this.name,parameters:this.parameters,pnl:this.panelName,col:this.color,fc:this.fillColor,d0:this.d0,d1:this.d1,d2:this.d2,tzo0:this.tzo0,tzo1:this.tzo1,tzo2:this.tzo2,v0:this.v0,v1:this.v1,v2:this.v2,fld:this.field,prm:this.permanent?1:0,hdn:this.hidden?1:0},e.K_Q(),t.replaceFields(v,t.Drawing.fibonacci.mapping)},t.Drawing.retracement=function(){this.name="retracement"},t.inheritsFrom(t.Drawing.retracement,t.Drawing.fibonacci),t.Drawing.fibprojection=function(){var v,x,M;v=-1543091031,x=-1137928281,M=2;for(var D=1;e.N2s(D.toString(),D.toString().length,26095)!==v;D++)this.name="fibprojection",this.dragToDraw=!1,this.p2=null,M+=2;e.B8M(M.toString(),M.toString().length,83735)!==x&&(this.name="",this.dragToDraw=!0,this.p2=1)},t.inheritsFrom(t.Drawing.fibprojection,t.Drawing.fibonacci),t.Drawing.fibprojection.prototype.recommendedLevels=[0,+"0.618",1,1.272,1.618,2.618,4.236],t.Drawing.fibprojection.prototype.click=function(v,x,M){var D,Q;if(D=this.stx,Q=D.panels[this.panelName],!!Q)return this.copyConfig(),this.penDown?this.accidentalClick(x,M)?(D.undo(),!0):this.p2!==null?(this.setPoint(2,this.p2[0],this.p2[1],Q.chart),this.parameters=t.clone(this.parameters),!0):(this.setPoint(1,x,M,Q.chart),this.p2=[this.p1[0],this.p1[1]],!1):(this.setPoint(0,x,M,Q.chart),this.penDown=!0,!1)},t.Drawing.fibprojection.prototype.render=function(v){var x,M,D,Q,q,O,R,V,K,Y,G,J,Z,ee,X,ne,se,oe,ae,Ae,he,ge,ie,re,de,ce,fe,me,ve,pe,be,Se,Ee;if(x="16",x+="1.8",x+="%",M="mid",M+="dl",M+="e",D="so",D+="lid",Q=this.stx,q=Q.panels[this.panelName],O=Q.getYAxisByField(q,this.field),!(!q||this.field&&!O)&&(O=O||q.yAxis,!!this.p1)){e.a97(2);var Ie=e.A0s(1,0);if(R=this.p1[Ie]-this.p0[1],V=Q.pixelFromTick(this.p0[0],q.chart),K=Q.pixelFromTick(this.p1["0"|0],q.chart),Y=this.pixelFromValue(q,this.p0[0],this.p0[1],O),G=this.pixelFromValue(q,this.p1[0],this.p1[1],O),J=null,Z=null,this.p2&&(J=Q.pixelFromTick(this.p2[0],q.chart),Z=this.pixelFromValue(q,this.p2[0],this.p2[1],O)),ee={color:"auto",parameters:{pattern:D,opacity:+"0.25",lineWidth:1}},this.parameters.trend||(this.parameters.trend=ee),X=this.getLineColor(this.parameters.trend.color),v.textBaseline=M,Q.canvasFont("stx_yaxis",v),ne=v.measureText(x).width+10,se=this.getLineColor(),this.p2){this.rays=[];for(var Qe=0;Qe<this.parameters.fibs.length;Qe++)if(oe="se",oe+="g",oe+="ment",ae="a",ae+="u",ae+="t",ae+="o",v.textAlign="left",v.fillStyle=se,Ae=this.parameters.fibs[Qe],!!Ae.display){if(he=this.pixelFromValue(q,this.p2[0],this.p2[1]+R*Ae.level,O),ge=t.xIntersection({x0:V,x1:K,y0:Y,y1:G},he),ie=this.parameters.extendLeft?0:V,re=q.left+q.width,this.parameters.printLevels){e.a97(2);var Ne=e.p9k(929,71);de=Math.round(Ae.level*Ne)/("10"<<0)+"%",re-=ne,this.parameters.printValues&&(v.fillStyle=se,Q.canvasFont("stx_yaxis",v)),re<ie&&(v.textAlign="right"),v.fillText(de,re,he),re<ie?re+=5:re-=5}this.parameters.printValues&&ge<q.width&&(ce=this.valueFromPixel(he,q,O),O.priceFormatter?ce=O.priceFormatter(Q,q,ce):ce=Q.formatYAxisPrice(ce,q,null,O),v==Q.chart.context&&Q.endClip(),Q.createYAxisLabel(q,ce,he,this.getLineColor(null,!0),null,v,O),v==Q.chart.context&&Q.startClip(q.name)),fe=Ae.color,(fe=="auto"||t.isTransparent(fe))&&(fe=this.getLineColor()),me=Ae.color,(me==ae||t.isTransparent(me))&&(me=this.fillColor),v.fillStyle=this.getLineColor(me,!0),ve=t.clone(Ae.parameters),this.highlighted&&(e.a97(43),ve.opacity=e.p9k("1",1)),Q.plotLine(ie,re,he,he,fe,oe,v,q,ve),this.rays.push([[ie,he],[re,he]]),v.globalAlpha=.05,v.beginPath(),v.moveTo(re,he),v.lineTo(ie,he),ie?v.lineTo(V,Z):v.lineTo(ie,Z),v.lineTo(re,Z),typeof me<"u"&&v.fill(),v.globalAlpha=1}}pe=t.clone(this.parameters.trend.parameters),this.highlighted&&(pe.opacity=1),Q.plotLine(V,K,Y,G,X,"segment",v,q,pe),this.p2&&Q.plotLine(K,J,G,Z,X,"segment",v,q,pe),this.highlighted&&(be=this.highlighted=="p0",Se=this.highlighted=="p1",Ee=this.highlighted=="p2",this.littleCircle(v,V,Y,be),this.littleCircle(v,K,G,Se),this.littleCircle(v,J,Z,Ee))}},t.Drawing.fibprojection.prototype.move=function(v,x,M){if(!this.penDown){this.moving=!1;return}e.M_N(),this.moving=!0,this.copyConfig(),this.p2===null?this.p1=[x,M]:this.p2=[x,M],this.render(v)},t.Drawing.fibprojection.prototype.reposition=function(v,x,M,D){var Q,q,O,R;Q="m",Q+="ov",Q+="e",x&&(q=this.stx.panels[this.panelName],O=x.tick-M,R=x.value-D,x.action==Q?(this.setPoint(0,x.p0["0"<<64]-O,x.p0[1]-R,q.chart),this.setPoint(1,x.p1[0]-O,x.p1["1"*1]-R,q.chart),this.setPoint(2,x.p2[0]-O,x.p2[1]-R,q.chart),this.render(v)):x.action=="drag"&&(this[x.point]=[M,D],this.setPoint(0,this.p0[0],this.p0[1],q.chart),this.setPoint(1,this.p1[0],this.p1[1],q.chart),this.setPoint(2,this.p2[0],this.p2[1],q.chart),this.render(v)))},t.Drawing.fibprojection.prototype.intersected=function(v,x,M){var D,Q,q,O,R,V,K,Y,G;if(D=this.p0,Q=this.p1,q=this.p2,!D||!Q||!q)return null;O={0:D,1:Q,2:q};for(var J in O)if(this.pointIntersection(O[J][0],O[J][1],M))return R="d",R+="r",R+="a",R+="g",e.a97(2),this.highlighted=e.p9k(J,"p"),{action:R,point:"p"+J};if(e.K_Q(),V=this.rays,K=this.lineIntersection(v,x,M,"segment",D,Q)||this.lineIntersection(v,x,M,"segment",Q,q),!K){for(var Z=0;Z<V.length;Z++)if(Y="ra",Y+="y",this.lineIntersection(v,x,M,Y,V[Z][0],V[Z][1],!0)){K=!0;break}}return K?(G="mo",G+="v",G+="e",this.highlighted=!0,{action:G,p0:t.clone(D),p1:t.clone(Q),p2:t.clone(q),tick:v,value:this.valueOnDrawingAxis(v,x)}):null},t.Drawing.fibprojection.prototype.adjust=function(){var v;v=this.stx.panels[this.panelName],v&&(e.a97(16),this.setPoint(e.p9k(0,"0"),this.d0,this.v0,v.chart),this.setPoint(1,this.d1,this.v1,v.chart),this.setPoint(2,this.d2,this.v2,v.chart))},t.Drawing.fibarc=function(){var v;e.K_Q(),v="f",v+="iba",v+="r",v+="c",this.name=v},t.inheritsFrom(t.Drawing.fibarc,t.Drawing.fibonacci),e.X_C(1),t.Drawing.fibarc.prototype.recommendedLevels=[.382,.5,e.p9k("0.618",0),1],t.Drawing.fibarc.prototype.setOuter=function(){var v,x,M,D,Q,q,O,R,V;this.p1&&(v=this.stx,x=v.panels[this.panelName],x&&(this.outer={p0:t.clone(this.p0),p1:t.clone(this.p1)},M=v.getYAxisByField(x,this.field),D=this.pixelFromValue(x,this.p0[0],this.p0[1],M),Q=this.pixelFromValue(x,this.p1[0],this.p1[1],M),q=v.pixelFromTick(this.p0[0],x.chart),e.M_N(),O=v.pixelFromTick(this.p1[0],x.chart),e.X_C(11),R=e.p9k(D,2,Q),V=t.xIntersection({x0:q,x1:O,y0:D,y1:Q},R),this.outer.p0[1]=this.valueFromPixel(R,x,M),this.outer.p0[0]=v.tickFromPixel(V,x.chart)))},t.Drawing.fibarc.prototype.intersected=function(v,x,M){var D,Q,q,O,R,V,K,Y,G,J,Z,ee,X,ne,se,oe;if(D="m",D+="o",D+="v",D+="e",Q=this.stx,e.M_N(),q=Q.panels[this.panelName],!!q){if(O=this.p0,R=this.p1,V=this.outer,!O||!R)return null;K={0:O,1:R};for(var ae in K)if(this.pointIntersection(K[ae]["0"|0],K[ae]["1"<<32],M))return Y="d",Y+="r",Y+="a",Y+="g",e.a97(2),this.highlighted=e.A0s(ae,"p"),{action:Y,point:"p"+ae};return G=this.valueOnDrawingAxis(v,x),this.lineIntersection(v,G,M,"segment",V.p0,V.p1)?(J="mo",J+="ve",this.highlighted=!0,{action:J,p0:t.clone(O),p1:t.clone(R),tick:v,value:G}):(Z=Q.getYAxisByField(q,this.field),ee={x0:O[0],x1:R[0],y0:O[1],y1:R[1]},X=this.boxToPixels(Q,this.panelName,ee,Z),ne={x:Math.abs(Math.sqrt(2)*(X.x1-X.x0)),y:Math.abs(Math.sqrt(2)*(X.y1-X.y0))},se=Q.pixelFromTick(v,q.chart),oe=Q.pixelFromValueAdjusted(q,v,x),se+M.r<X.x1-ne.x||se-M.r>X.x1+ne.x||oe+M.r<X.y1-ne.y||oe-M.r>X.y1+ne.y||X.y0<X.y1&&oe-M.r>X.y1||X.y0>X.y1&&oe+M.r<X.y1?null:(this.highlighted=!0,{action:D,p0:t.clone(this.p0),p1:t.clone(this.p1),tick:v,value:G}))}},t.Drawing.fibarc.prototype.render=function(v){var x,M,D,Q,q,O,R,V,K,Y,G,J,Z,ee,X,ne,se,oe,ae,Ae,he,ge,ie,re;if(x=this.stx,M=x.panels[this.panelName],D=x.getYAxisByField(M,this.field),!(!M||this.field&&!D)&&(D=D||M.yAxis,!!this.p1)){Q=x.pixelFromTick(this.p0[0],M.chart),q=x.pixelFromTick(this.p1[0],M.chart),O=this.pixelFromValue(M,this.p0["0"^0],this.p0[1],D),R=this.pixelFromValue(M,this.p1[0],this.p1[1],D),e.a97(59),V=e.A0s(R,O),e.a97(60),K=Math.abs(e.p9k(O,R,Q,q)),Y=this.getLineColor(this.parameters.trend.color),v.textBaseline="middle",x.canvasFont("stx_yaxis",v),G=this.getLineColor();for(var de=0;de<this.parameters.fibs.length;de++)if(J="non",J+="e",v.fillStyle=G,Z=this.parameters.fibs[de],!(Z.level<0||!Z.display)){e.a97(61);var ce=e.p9k(11,13,12,2,9);e.a97(1);var fe=e.A0s(17,16);e.a97(1);var me=e.A0s(192,160);ee=Math.abs(this.p1[ce]-this.p0[fe])*Math.sqrt("2"<<me)*Z.level,e.X_C(62);var ve=e.p9k(18,7,2269,1,18);e.a97(51);var pe=e.p9k(4,9,4);e.a97(63);var be=e.p9k(2,391,5,448);e.X_C(64);var Se=e.A0s(18,20,599,12);if(X=this.p1[ve]+ee*(V?pe:"1"<<be)*(D.flipped?Se:"1"-0),ne=this.pixelFromValue(M,this.p0["0"|0],X,D),se=t.xIntersection({x0:Q,x1:q,y0:O,y1:R},ne),this.parameters.printLevels){v.textAlign="center",e.a97(65);var Ee=e.A0s(50,250,995);e.a97(66);var Ie=e.p9k(9,7,19,240,14);oe=Math.round(Z.level*Ee)/Ie+"%",this.parameters.printValues&&(v.fillStyle=G,x.canvasFont("stx_yaxis",v)),v.fillText(oe,q,Math.round(ne-5))}v.textAlign="left",this.parameters.printValues&&se<M.width&&(ae=X,D.priceFormatter?ae=D.priceFormatter(x,M,ae):ae=x.formatYAxisPrice(ae,M,null,D),v==x.chart.context&&x.endClip(),x.createYAxisLabel(M,ae,ne,this.getLineColor(null,!0),null,v,D),v==x.chart.context&&x.startClip(M.name)),Ae=Z.color,(Ae=="auto"||t.isTransparent(Ae))&&(Ae=this.getLineColor()),v.strokeStyle=Ae,he=Z.color,(he=="auto"||t.isTransparent(he))&&(he=this.fillColor),v.fillStyle=this.getLineColor(he,!0),v.globalAlpha=this.highlighted?1:Z.parameters.opacity,v.lineWidth=Z.parameters.lineWidth,v.setLineDash&&(v.setLineDash(t.borderPatternToArray(v.lineWidth,Z.parameters.pattern)),v.lineDashOffset=0),v.save(),v.beginPath(),e.a97(7),v.scale(e.p9k(1,K),1),e.a97(0),v.arc(e.p9k(q,K),R,Math.abs(ne-R),0,Math.PI,!V),this.pattern!=J&&v.stroke(),v.globalAlpha=.05,v.fill(),v.restore(),v.setLineDash&&v.setLineDash([]),v.globalAlpha=1}v.textAlign="left",ge=t.clone(this.parameters.trend.parameters),this.highlighted&&(ge.opacity=1),e.a97(67),x.plotLine(q,e.A0s(Q,q,"2",64),R,e.p9k(1,O,R,"2",e.X_C(32)),Y,"segment",v,M,ge),this.highlighted&&(ie=this.highlighted=="p0",re=this.highlighted=="p1",this.littleCircle(v,Q,O,ie),this.littleCircle(v,q,R,re))}},t.Drawing.fibfan=function(){e.K_Q(),this.name="fibfan"},t.inheritsFrom(t.Drawing.fibfan,t.Drawing.fibonacci),t.Drawing.fibfan.prototype.recommendedLevels=[0,.382,.5,.618,1],t.Drawing.fibfan.prototype.setOuter=function(){},t.Drawing.fibfan.prototype.render=function(v){var x,M,D,Q,q,O,R,V,K,Y,G,J,Z,ee,X,ne,se,oe,ae,Ae,he,ge,ie,re,de,ce;if(x=this.stx,M=x.panels[this.panelName],D=x.getYAxisByField(M,this.field),!(!M||this.field&&!D)&&(D=D||M.yAxis,!!this.p1)){Q=x.pixelFromTick(this.p0["0"-0],M.chart),q=x.pixelFromTick(this.p1[0],M.chart),O=this.pixelFromValue(M,this.p0[0],this.p0[1],D),R=this.pixelFromValue(M,this.p1[0],this.p1[1],D),V=Math.min(R,O),K=Math.max(R,O),e.X_C(1),e.A0s(K,V),e.X_C(68),e.M_N(),e.A0s("0",Q,q,O,0,R),this.getLineColor(this.parameters.trend.color),v.textBaseline="middle",x.canvasFont("stx_yaxis",v),e.X_C(18);var fe=e.p9k(4,14);Y=v.measureText("161.8%").width+fe,G=this.getLineColor(),this.rays=[];for(var me=0;me<this.parameters.fibs.length;me++)if(J="se",J+="gment",Z="a",Z+="uto",v.fillStyle=G,ee=this.parameters.fibs[me],!!ee.display&&(X=this.pixelFromValue(M,this.p0[0],(this.p0[1]-this.p1["1"<<0])*ee.level+this.p1[1],D),ne=t.xIntersection({x0:q,x1:q,y0:O,y1:R},X),se=M.left,q>Q&&(se+=M.width),e.a97(69),oe=e.A0s(X,Q,O,se,ne,Q,O),!(Q>se-(this.parameters.printLevels?Y+5:0)&&q>Q)&&!(Q<se+(this.parameters.printLevels?Y+5:0)&&q<Q))){if(this.parameters.printLevels){e.a97(12);var ve=e.p9k(4,990,2952,8);e.X_C(1);var pe=e.p9k(15,5);e.X_C(70);var be=e.A0s(10,15,2656,9);e.X_C(11),e.A0s(19,618,6802),e.a97(71);var Se=e.p9k(1523,4,748,12180,8);e.X_C(4);var Ee=e.p9k(2129,4,23);e.X_C(1);var Ie=e.A0s(85680,78540);e.X_C(1);var Qe=e.p9k(11352,10406);ae=Math.round(ee.level*ve)/pe+(be<Se?Ee>=Ie?Qe:"r":"%"),q>Q?(se-=Y,v.textAlign="left"):(se+=Y,v.textAlign="right"),this.parameters.printValues&&(Ae="stx_yaxi",Ae+="s",v.fillStyle=G,x.canvasFont(Ae,v)),e.a97(69),oe=e.A0s(X,Q,O,se,ne,Q,O),v.fillText(ae,se,oe),q>Q?se-=5:se+=5}v.textAlign="left",this.parameters.printValues&&ne<M.width&&(he=this.valueFromPixel(X,M,D),D.priceFormatter?he=D.priceFormatter(x,M,he):he=x.formatYAxisPrice(he,M,null,D),v==x.chart.context&&x.endClip(),x.createYAxisLabel(M,he,X,this.getLineColor(null,!0),null,v,D),v==x.chart.context&&x.startClip(M.name)),ge=ee.color,(ge==Z||t.isTransparent(ge))&&(ge=this.getLineColor()),ie=ee.color,(ie=="auto"||t.isTransparent(ie))&&(ie=this.fillColor),v.fillStyle=this.getLineColor(ie,!0),this.parameters.printLevels&&(e.a97(69),oe=e.p9k(X,Q,O,se,ne,Q,O)),re=t.clone(ee.parameters),this.highlighted&&(re.opacity=1),x.plotLine(Q,se,O,oe,ge,J,v,M,re),this.rays.push([[Q,O],[se,oe]]),e.a97(1),v.globalAlpha=e.p9k("0.05",0),v.beginPath(),v.moveTo(se,oe),v.lineTo(Q,O),v.lineTo(se,O),v.fill(),v.globalAlpha=1}this.highlighted&&(de=this.highlighted=="p0",ce=this.highlighted=="p1",this.littleCircle(v,Q,O,de),this.littleCircle(v,q,R,ce))}},t.Drawing.fibtimezone=function(){e.M_N(),this.name="fibtimezone"},t.inheritsFrom(t.Drawing.fibtimezone,t.Drawing.fibonacci),t.Drawing.fibtimezone.prototype.render=function(v){var x,M,D,Q,q,O,R,V,K,Y,G,J,Z,ee,X,ne,se,oe,ae,Ae,he,ge,ie,re,de,ce,fe,me,ve,pe,be,Se,Ee,Ie,Qe,Ne,De,Re,_e;if(x="au",x+="to",M="ce",M+="n",M+="t",M+="er",D="s",D+="tx_yax",D+="is",Q=this.stx,q=Q.panels[this.panelName],O=Q.getYAxisByField(q,this.field),!(!q||this.field&&!O)&&(O=O||q.yAxis,!!this.p1&&(R=t.strToDateTime(this.d0),V=t.strToDateTime(this.d1),K=Q.chart.dataSet[0].DT,!(R<K||V<K)))){for(Y=q.chart,G=q.left,J=q.width,Z=this.p0,ee=this.p1,X=this.parameters,ne=this.highlighted,se=Q.pixelFromTick(Z[0],Y),oe=Q.pixelFromTick(ee[0],Y),ae=this.pixelFromValue(q,Z[0],Z[1],O),Ae=this.pixelFromValue(q,ee[0],ee[1],O),he=[1,0],ge=this.getLineColor(X.trend.color),v.textBaseline="middle",Q.canvasFont(D,v),ie=20,re=this.p1[0]-this.p0[0],de=this.getLineColor(),v.textAlign=M,ce=se,fe=0,me=O,ve=me.top,pe=O.bottom,be=X.printLevels,Se=X.timezone,Ee=Se.color,(Ee=="auto"||t.isTransparent(Ee))&&(Ee=this.getLineColor()),Ie=Se.color,(Ie==x||t.isTransparent(Ie))&&(Ie=this.fillColor),be&&(e.a97(1),pe-=e.A0s(ie,7)),Qe=t.clone(X.timezone.parameters),ne&&(Qe.opacity=1);Ne="segme",Ne+="nt",ce=Q.pixelFromTick(Z[0]+fe*re,Y),!(se<oe&&ce>G+J||se>oe&&ce<G);){be&&(v.fillStyle=de,v.fillText(oe>se?fe:fe*-1,ce,pe+7)),v.fillStyle=this.getLineColor(Ie,!0),Q.plotLine(ce,ce,0,pe,Ee,Ne,v,q,Qe),e.a97(1),v.globalAlpha=e.A0s("0.05",0),v.beginPath(),v.moveTo(se,ve),v.lineTo(ce,ve),v.lineTo(ce,pe),v.lineTo(se,pe),v.fill(),v.globalAlpha=1,e.X_C(9);var Ue=e.p9k(0,10,10,1);if(fe=he[0]+he[Ue],he.unshift(fe),!re)break}v.textAlign="left",Q.plotLine(se,oe,ae,Ae,ge,"segment",v,q,Qe),this.highlighted?(De=ne=="p0",Re=ne=="p1",this.littleCircle(v,se,ae,De),this.littleCircle(v,oe,Ae,Re)):(_e=this.valueFromPixel(q.height/2,q,O),this.setPoint(0,Z[0],_e,Y),this.setPoint(1,ee[0],_e,Y))}},t.Drawing.fibtimezone.prototype.intersected=function(v,x,M){var D,Q,q,O,R,V,K,Y,G,J;if(D=this.p0,Q=this.p1,q=this.stx.panels[this.panelName],!D||!Q||!q)return null;O={0:D,1:Q};for(var Z in O)if(this.pointIntersection(O[Z]["0"<<32],O[Z][1],M))return R="d",R+="r",R+="a",R+="g",e.X_C(2),this.highlighted=e.p9k(Z,"p"),{action:R,point:"p"+Z};if(V=this.lineIntersection(v,x,M,"segment"),V||M.x0<=this.p0[0]&&M.x1>=D[0]){K=731637750,Y=-201278547,G=2;for(var ee=1;e.B8M(ee.toString(),ee.toString().length,"59136">>64)!==K;ee++)return this.highlighted=!1,{action:"",p0:t.clone(D),p1:t.clone(Q),tick:v,value:this.valueOnDrawingAxis(v,x)};if(e.N2s(G.toString(),G.toString().length,33935)!==Y)return J="mov",J+="e",this.highlighted=!0,{action:J,p0:t.clone(D),p1:t.clone(Q),tick:v,value:this.valueOnDrawingAxis(v,x)}}return null},t.Drawing.arrow_v0=function(){e.K_Q(),this.name="arrow",this.dimension=[11,11],e.X_C(17),this.points=[["M",3,0,"L",7,0,"L",7,5,"L",10,5,"L",e.p9k(0,"5"),10,"L",e.p9k("0",1,e.X_C(0)),5,"L",3,5,"L",3,0]]},t.inheritsFrom(t.Drawing.arrow_v0,t.Drawing.shape),t.Drawing.xcross=function(){this.name="xcross",this.dimension=[7,7],e.a97(1),this.points=[["M",1,0,"L",e.A0s("3",0),2,"L",5,0,"L",6,1,"L",4,3,"L",6,5,"L",5,6,"L",e.p9k(0,"3",e.a97(16)),4,"L",1,6,"L",0,5,"L",2,3,"L",0,1,"L",1,0]]},t.inheritsFrom(t.Drawing.xcross,t.Drawing.shape),t.Drawing.check=function(){this.name="check",this.dimension=[8,9],e.a97(1),this.points=[["M",1,5,"L",0,6,"L",2,8,"L",7,1,"L",6,0,"L",2,6,"L",e.p9k("1",0),5]]},t.inheritsFrom(t.Drawing.check,t.Drawing.shape),t.Drawing.star=function(){var v;v="s",v+="t",e.K_Q(),v+="ar",this.name=v,this.dimension=[12,12],e.X_C(16),this.points=[["M",0,4,"L",4,4,"L",5.5,0,"L",e.A0s(0,"7"),4,"L",e.p9k(0,"11"),4,"L",8,7,"L",9,11,"L",5.5,9,"L",2,11,"L",3,7,"L",0,4]]},t.inheritsFrom(t.Drawing.star,t.Drawing.shape),t.Drawing.heart=function(){this.name="heart",this.dimension=[23,20],e.X_C(43),this.points=[["M",11,3,"B",e.p9k("11",0),e.A0s("2.4",1,e.X_C(0)),10,0,6,0,"B",0,0,0,7.5,0,7.5,"B",0,11,4,15.4,11,19,"B",18,15.4,22,11,22,7.5,"B",22,+"7.5",22,0,16,0,"B",13,0,11,+"2.4",e.p9k(64,"11",e.X_C(17)),e.A0s("3",1,e.a97(0))]]},t.inheritsFrom(t.Drawing.heart,t.Drawing.shape),t.Drawing.focusarrow=function(){this.name="focusarrow",e.a97(1),this.dimension=[e.p9k("7",0),5],e.K_Q(),e.X_C(0),this.points=[["M",0,0,"L",2,2,"L",0,e.p9k("4",1),"L",0,0],["M",6,0,"L",4,2,"L",6,4,"L",e.A0s("6",0,e.a97(1)),0]]},t.inheritsFrom(t.Drawing.focusarrow,t.Drawing.shape),t.Drawing.crossline=function(){e.K_Q(),this.name="crossline"},t.inheritsFrom(t.Drawing.crossline,t.Drawing.vertical),t.extend(t.Drawing.crossline.prototype,{spanPanels:!1,measure:function(){},accidentalClick:function(v,x){return!1},adjust:function(){var v,x,M,D;v=-148962249,x=-74359014,e.M_N(),M=2;for(var Q=1;e.B8M(Q.toString(),Q.toString().length,22796)!==v;Q++){if(D=this.stx.panels[this.panelName],!D)return;M+=2}e.N2s(M.toString(),M.toString().length,50239)!==x&&(D=this.stx.panels[this.panelName],~D)||(this.setPoint(0,this.d0,this.v0,D.chart),this.p1=t.clone(this.p0))},intersected:function(v,x,M){var D,Q,q;return D="l",D+="i",D+="n",D+="e",!this.p0||!this.p1||(this.p1[0]+=1,Q=this.lineIntersection(v,x,M,D),this.p1=t.clone(this.p0),!Q&&(q="l",q+="i",q+="ne",e.X_C(46),this.p1[1]+=e.p9k("1",32),Q=this.lineIntersection(v,x,M,q),this.p1=t.clone(this.p0),!Q))?null:(e.K_Q(),this.highlighted=!0,this.pointIntersection(this.p0[0],this.p0[1],M)&&(this.highlighted="p0"),{action:"move",p0:t.clone(this.p0),p1:t.clone(this.p1),tick:v,value:this.valueOnDrawingAxis(v,x)})},render:function(v){var x,M,D,Q,q,O,R,V,K,Y,G,J,Z,ee,X,ne,se,oe;if(x="verti",x+="cal",M=this.stx,D=M.panels[this.panelName],e.M_N(),Q=M.getYAxisByField(D,this.field),!(!D||this.field&&!Q&&!this.spanPanels)){if(Q=Q||D.yAxis,q=M.pixelFromTick(this.p0[0],D.chart),O=this.pixelFromValue(D,this.p0[0],this.p0[1],Q),R=this.getLineColor(),V={pattern:this.pattern,lineWidth:this.lineWidth},(!this.spanPanels||this.panelName==this.originPanelName)&&(e.a97(2),M.plotLine(q,e.A0s(100,q),O,O,R,"horizontal",v,D,V)),e.a97(2),M.plotLine(q,q,O,e.p9k(100,O),R,x,v,D,V),this.axisLabel&&!this.repositioner&&(M.endClip(),(!this.spanPanels||this.panelName==this.originPanelName)&&(K=this.p0[1],Y=M.getTransformFunction(Q),Y&&(K=Y(M,D.chart,K)),Q.priceFormatter?K=Q.priceFormatter(M,D,K):K=M.formatYAxisPrice(K,D,null,Q),M.createYAxisLabel(D,K,O,R,null,null,Q)),M.startClip(D.name),this.p0[0]>=0&&!M.chart.xAxis.noDraw&&(!this.spanPanels||D.yAxis.bottom!==D.bottom))){if(G=M.dateFromTick(this.p0[0],D.chart,!0),t.ChartEngine.isDailyInterval(M.layout.interval))G.setHours(0,0,0,0);else{e.X_C(72);var ae=e.p9k(1,3,972,2,59);Z=G.getSeconds()*ae+G.getMilliseconds(),s.Date&&M.displayZone&&(J=new s.Date(G.getTime(),M.displayZone),G=new Date(J.getFullYear(),J.getMonth(),J.getDate(),J.getHours(),J.getMinutes()),G=new Date(G.getTime()+Z))}if(ee=t.mmddhhmm(t.yyyymmddhhmm(G)),D.chart.xAxis.formatter){X=-845321300,ne=-1746200267,se=2;for(var Ae=1;e.N2s(Ae.toString(),Ae.toString().length,"35565"^0)!==X;Ae++)ee=D.chart.xAxis.formatter(G,this.name,null,null,ee),se+=2;e.B8M(se.toString(),se.toString().length,88875)!==ne&&(ee=D.chart.xAxis.formatter(G,this.name,1,"1"^0,ee))}else this.stx.internationalizer&&(ee=t.displayableDate(M,M.chart,G));M.endClip(),M.createXAxisLabel({panel:D,txt:ee,x:q,backgroundColor:R,color:null,pointed:!0,padding:2}),M.startClip(D.name)}this.highlighted&&(!this.spanPanels||this.panelName==this.originPanelName)&&(oe=this.highlighted=="p0",this.littleCircle(v,q,O,oe))}}},!0),t.Drawing.speedarc=function(){this.name="speedarc",e.M_N(),this.printLevels=!0},t.inheritsFrom(t.Drawing.speedarc,t.Drawing.segment),t.extend(t.Drawing.speedarc.prototype,{defaultOpacity:.25,configs:["color","fillColor",F,"pattern"],copyConfig:function(){var v;v=this.stx.currentVectorParameters,this.color=v.currentColor,this.fillColor=v.fillColor,this.lineWidth=v.lineWidth,this.pattern=v.pattern},intersected:function(v,x,M){var D,Q,q,O,R,V,K,Y;if(!this.p0||!this.p1)return null;D={0:this.p0,1:this.p1};for(var G in D)if(this.pointIntersection(D[G][0],D[G][1],M))return Q="d",Q+="r",Q+="a",Q+="g",e.a97(2),this.highlighted=e.p9k(G,"p"),{action:Q,point:"p"+G};return q=this.valueOnDrawingAxis(v,x),e.M_N(),O=this.lineIntersection(v,x,M,this.name),O?(this.highlighted=!0,{action:"move",p0:t.clone(this.p0),p1:t.clone(this.p1),tick:v,value:q}):(R=this.p1[0]-(this.p0[0]-this.p1[0]),V=this.p0[0],K=this.p1[1],Y=this.p0[1],v>Math.max(R,V)||v<Math.min(R,V)||q>Math.max(Y,K)||q<Math.min(Y,K)?null:(this.highlighted=!0,{action:"move",p0:t.clone(this.p0),p1:t.clone(this.p1),tick:v,value:q}))},render:function(v){var x,M,D,Q,q,O,R,V,K,Y,G,J,Z,ee,X,ne,se,oe,ae,Ae,he;if(x="s",x+="tx_ya",x+="x",x+="is",M=this.stx,D=M.panels[this.panelName],Q=M.getYAxisByField(D,this.field),!(!D||this.field&&!Q)&&(Q=Q||D.yAxis,!!this.p1)){q=M.pixelFromTick(this.p0[0],D.chart),O=M.pixelFromTick(this.p1[0],D.chart),R=this.pixelFromValue(D,this.p0[0],this.p0[1],Q),V=this.pixelFromValue(D,this.p1[0],this.p1[1],Q),e.a97(59),K=e.A0s(V,R),e.K_Q(),e.a97(60),Y=Math.abs(e.A0s(R,V,q,O)),G=this.getLineColor(),v.strokeStyle=G,J=this.fillColor,v.fillStyle=this.getLineColor(J,!0),v.setLineDash&&(v.setLineDash(t.borderPatternToArray(this.lineWidth,this.pattern)),v.lineDashOffset=0),M.canvasFont(x,v);for(var ge=1;ge<3;ge++){e.a97(73);var ie=e.A0s(4,18,17,51);e.X_C(32);var re=e.p9k(9,14,2015,16);e.a97(74);var de=e.p9k(8,11,0,3,3);e.X_C(75);var ce=e.p9k(21,6,5,2,615);Z=Math.abs(this.p1[ie]-this.p0[re])*Math.sqrt(de)*ge/ce,e.a97(76);var fe=e.p9k(11,19,1,11,19);e.a97(18);var me=e.p9k(11,10);e.a97(77);var ve=e.A0s(10,6,4,6,3);e.a97(70);var pe=e.A0s(3,5,0,3);ee=this.p1[fe]+Z*(K?me:ve)*(Q.flipped?-("1"^0):pe),X=this.pixelFromValue(D,this.p0[0],ee,Q),v.save(),v.beginPath(),e.X_C(7),v.scale(e.p9k(1,Y),1),e.X_C(0),v.arc(e.A0s(O,Y),V,Math.abs(X-V),0,Math.PI,!K),v.globalAlpha=this.highlighted?1:this.defaultOpacity,this.pattern!="none"&&v.stroke(),v.globalAlpha=.1,v.fill(),v.restore(),v.globalAlpha=1,this.printLevels&&(v.fillStyle=G,v.textAlign="center",e.a97(2),ne=e.p9k("/3",ge),v.fillText(ne,O,Math.round(X-5)),v.fillStyle=this.getLineColor(J,!0))}v.textAlign="left",se={pattern:this.pattern,lineWidth:this.lineWidth,opacity:this.highlighted?1:this.defaultOpacity},M.plotLine(q,O,R,V,G,"segment",v,D,se),v.setLineDash&&v.setLineDash([]),this.highlighted&&(oe="p",oe+="1",ae="p",ae+="0",Ae=this.highlighted==ae,he=this.highlighted==oe,this.littleCircle(v,q,R,Ae),this.littleCircle(v,O,V,he))}},reconstruct:function(v,x){this.stx=v,this.color=x.col,this.fillColor=x.fc,this.panelName=x.pnl,this.pattern=x.ptrn,this.lineWidth=x.lw,this.d0=x.d0,this.d1=x.d1,this.tzo0=x.tzo0,this.tzo1=x.tzo1,this.v0=x.v0,this.v1=x.v1,this.field=x.fld,this.permanent=x.prm,this.hidden=x.hdn,this.adjust()},serialize:function(){return{name:this.name,pnl:this.panelName,col:this.color,fc:this.fillColor,ptrn:this.pattern,lw:this.lineWidth,d0:this.d0,d1:this.d1,tzo0:this.tzo0,tzo1:this.tzo1,v0:this.v0,v1:this.v1,fld:this.field,prm:this.permanent,hdn:this.hidden}}},!0),t.Drawing.speedline=function(){this.name="speedline",this.printLevels=!0},t.inheritsFrom(t.Drawing.speedline,t.Drawing.speedarc),t.extend(t.Drawing.speedline.prototype,{intersected:function(v,x,M){var D,Q,q,O,R;if(D=this.p0,Q=this.p1,e.M_N(),!D||!Q)return null;q={0:D,1:Q};for(var V in q)if(this.pointIntersection(q[V][0],q[V][1],M))return e.X_C(2),this.highlighted=e.p9k(V,"p"),{action:"drag",point:"p"+V};O=this.rays;for(var K=0;K<O.length;K++)if(R="ra",R+="y",this.lineIntersection(v,x,M,R,O[K][0],O[K][1],!0))return this.highlighted=!0,{action:"move",p0:t.clone(D),p1:t.clone(Q),tick:v,value:this.valueOnDrawingAxis(v,x)};return null},render:function(v){var x,M,D,Q,q,O,R,V,K,Y,G,J,Z,ee,X,ne,se,oe,ae,Ae,he,ge,ie,re,de,ce,fe,me;if(x="3",x+="/",x+="2",M="stx_yax",M+="is",D=this.stx,Q=D.panels[this.panelName],q=D.getYAxisByField(Q,this.field),!(!Q||this.field&&!q)&&this.p1){O=D.pixelFromTick(this.p0[0],Q.chart),R=D.pixelFromTick(this.p1[0],Q.chart),V=this.pixelFromValue(Q,this.p0[0],this.p0[1],q),K=this.pixelFromValue(Q,this.p1[0],this.p1[1],q),D.canvasFont(M,v),Y=this.getLineColor(),v.strokeStyle=Y,G=this.fillColor,v.fillStyle=this.getLineColor(G,!0),J={pattern:this.pattern,lineWidth:this.lineWidth,opacity:this.highlighted?1:this.defaultOpacity},X=["1","2/3","1/3",x,"3"],e.X_C(78),e.M_N(),ne=[1,e.A0s(3,"2"),e.A0s(1,3,e.a97(7)),e.A0s(3,2,e.a97(7)),3],se=[],this.rays=[];for(var ve=0;ve<ne.length;ve++)oe=ne[ve],!(oe>1&&!this.extension)&&(ae=this.pixelFromValue(Q,this.p0[0],this.p0[1]-(this.p0[1]-this.p1[1])*oe,q),oe>1?(Ae=t.xIntersection({x0:O,x1:R,y0:V,y1:ae},K),se.push(Ae)):(Ae=t.xIntersection({x0:R,x1:R,y0:V,y1:K},ae),se.push(ae)),he=oe>1?Ae:R,ge=oe>1?K:ae,this.confineToGrid||(he=Q.left,R>O&&(he+=Q.width),e.a97(69),ge=e.p9k(ae,O,V,he,R,O,V)),this.printLevels&&(oe!=1||this.extension)&&(v.fillStyle=Y,ie=0,re=0,V>K?(re=-5,v.textBaseline="bottom"):(de="t",de+="o",de+="p",re=5,v.textBaseline=de),O>R?(ce="ri",ce+="g",ce+="h",ce+="t",ie=5,v.textAlign=ce):(ie=-5,v.textAlign="left"),oe>1?v.fillText(X[ve],Ae+(this.confineToGrid?0:ie),K):v.fillText(X[ve],R,ae+(this.confineToGrid?0:re)),v.fillStyle=this.getLineColor(G,!0)),D.plotLine(O,he,V,ge,Y,"segment",v,Q,J),oe==1&&(Z=he,ee=ge),this.rays.push([[O,V],[he,ge]]),v.globalAlpha=.1,v.beginPath(),v.moveTo(he,ge),v.lineTo(O,V),v.lineTo(Z,ee),v.fill(),v.globalAlpha=1);v.textAlign="left",v.textBaseline="middle",this.confineToGrid&&(v.globalAlpha=.3,v.beginPath(),e.X_C(1),v.strokeRect(O,V,e.A0s(R,O),e.p9k(K,V)),v.moveTo(O,se[1]),v.lineTo(R,se[1]),v.moveTo(O,se[2]),v.lineTo(R,se[2]),this.extension&&(v.moveTo(se[3],V),v.lineTo(se[3],K),v.moveTo(se[4],V),v.lineTo(se[4],K)),v.stroke(),v.globalAlpha=1),this.highlighted&&(fe=this.highlighted=="p0",me=this.highlighted=="p1",this.littleCircle(v,O,V,fe),this.littleCircle(v,R,K,me))}}},!0),t.Drawing.gannfan=function(){this.name="gannfan",this.printLevels=!0},t.inheritsFrom(t.Drawing.gannfan,t.Drawing.speedline),t.extend(t.Drawing.gannfan.prototype,{render:function(v){var x,M,D,Q,q,O,R,V,K,Y,G,J,Z,ee,X,ne,se,oe,ae,Ae,he,ge,ie,re,de;if(x="m",x+="id",x+="dle",M=this.stx,D=M.panels[this.panelName],Q=M.getYAxisByField(D,this.field),!(!D||this.field&&!Q)&&this.p1){q=M.pixelFromTick(this.p0[0],D.chart),O=M.pixelFromTick(this.p1[0],D.chart),R=this.pixelFromValue(D,this.p0[0],this.p0["1"|1],Q),V=this.pixelFromValue(D,this.p1[0],this.p1[1],Q),M.canvasFont("stx_yaxis",v),K=this.getLineColor(),v.strokeStyle=K,Y=this.fillColor,v.fillStyle=this.getLineColor(Y,!0),G={pattern:this.pattern,lineWidth:this.lineWidth,opacity:this.highlighted?1:this.defaultOpacity},e.a97(7),ee=[1,2,3,4,8,e.A0s(1,2),e.A0s(1,3,e.X_C(7)),e.A0s(1,4,e.X_C(7)),e.p9k(1,"8",e.a97(79))],this.rays=[];for(var ce=0;ce<ee.length;ce++)X=ee[ce],e.X_C(80),ne=e.p9k(X,q,q,O),e.a97(81),se=e.A0s(R,V,R,X),oe=D.left,O>q&&(oe+=D.width),e.X_C(69),ae=e.p9k(se,q,R,oe,O,q,R),this.printLevels&&(v.fillStyle=K,Ae=0,he=0,R>V?(ge="t",ge+="o",ge+="p",he=5,v.textBaseline=ge):(ie="bo",ie+="tto",ie+="m",he=-5,v.textBaseline=ie),q>O?(Ae=5,v.textAlign="left"):(Ae=-5,v.textAlign="right"),X>1?(e.X_C(2),v.fillText(e.p9k("x1",X),e.A0s(Ae,ne),V)):(e.a97(54),v.fillText(e.p9k(X,"1x",1),O,e.p9k(he,se,e.a97(2)))),v.fillStyle=this.getLineColor(Y,!0)),M.plotLine(q,oe,R,ae,K,"segment",v,D,G),this.rays.push([[q,R],[oe,ae]]),X==1&&(J=oe,Z=ae),v.globalAlpha=.1,v.beginPath(),v.moveTo(oe,ae),v.lineTo(q,R),v.lineTo(J,Z),v.fill(),v.globalAlpha=1;v.textAlign="left",v.textBaseline=x,this.highlighted&&(re=this.highlighted=="p0",de=this.highlighted=="p1",this.littleCircle(v,q,R,re),this.littleCircle(v,O,V,de))}}},!0),t.Drawing.timecycle=function(){e.M_N(),this.name="timecycle",this.printLevels=!0},t.inheritsFrom(t.Drawing.timecycle,t.Drawing.speedarc),t.extend(t.Drawing.timecycle.prototype,{intersected:function(v,x,M){var D,Q,q,O,R,V,K,Y;if(D=this.p0,Q=this.p1,q=this.stx.panels[this.panelName],!D||!Q||!q)return null;e.a97(46),O=-e.A0s("1482779404",32),R=-2052573455,V=2;for(var G="1">>0;e.B8M(G.toString(),G.toString().length,92269)!==O;G++)K={0:D,1:Q},V+=2;e.B8M(V.toString(),V.toString().length,29087)!==R&&(K={0:D,1:Q});for(var J in K)if(this.pointIntersection(K[J]["0"<<32],K[J][1],M))return e.X_C(2),this.highlighted=e.A0s(J,"p"),{action:"drag",point:"p"+J};return Y=this.lineIntersection(v,x,M,"segment"),Y||M.x0<=this.p0[0]&&M.x1>=D[0]?(this.highlighted=!0,{action:"move",p0:t.clone(D),p1:t.clone(Q),tick:v,value:this.valueOnDrawingAxis(v,x)}):(e.K_Q(),null)},render:function(v){var x,M,D,Q,q,O,R,V,K,Y,G,J,Z,ee,X,ne,se,oe,ae,Ae,he,ge,ie,re,de,ce;if(x="l",x+="e",x+="f",x+="t",M=this.stx,D=M.panels[this.panelName],Q=M.getYAxisByField(D,this.field),!(!D||this.field&&!Q)&&(Q=Q||D.yAxis,!!this.p1&&(q=t.strToDateTime(this.d0),O=t.strToDateTime(this.d1),R=M.chart.dataSet[0].DT,!(q<R||O<R)))){V=M.pixelFromTick(this.p0[0],D.chart),K=M.pixelFromTick(this.p1[0],D.chart),Y=this.pixelFromValue(D,this.p0[0],this.p0[1],Q),G=this.pixelFromValue(D,this.p1[0],this.p1[1],Q),e.X_C(1),J=e.A0s("0",0),v.textBaseline="middle",M.canvasFont("stx_yaxis",v),Z=20,e.X_C(82);var fe=e.p9k(3,3,8,10);for(ee=this.p1["0"*fe]-this.p0[0],v.textAlign="center",X=V,ne=Q.top,se=Q.bottom,oe=this.getLineColor(),ae=this.fillColor,this.printLevels&&(e.a97(1),se-=e.p9k(Z,7)),Ae={pattern:this.pattern,lineWidth:this.lineWidth,opacity:this.highlighted?1:this.defaultOpacity},he=[],v.save(),v.fillStyle=this.getLineColor(ae,oe),v.globalAlpha=.05;X=M.pixelFromTick(this.p0[0]+J*ee,D.chart),J++,!(V<K&&X>D.left+D.width);){if(V>K&&X<D.left)break;if(X<D.left||X>D.left+D.width)continue;if(v.beginPath(),v.moveTo(V,ne),v.lineTo(X,ne),v.lineTo(X,se),v.lineTo(V,se),v.fill(),he.push({c:J,x:X}),!ee)break}v.globalAlpha=1,ge=0;for(var me=0;me<he.length;me++)M.plotLine(he[me].x,he[me].x,"0">>64,se,oe,"segment",v,D,Ae),this.printLevels&&(v.fillStyle=oe,ie=M.chart.context.measureText(he[me].c).width+("3">>0),ie<M.layout.candleWidth+ge?(v.fillText(he[me].c,he[me].x,se+7),ge=0):ge+=M.layout.candleWidth);v.restore(),v.textAlign=x,M.plotLine(V,K,Y,G,oe,"segment",v,D,Ae),this.highlighted?(re=this.highlighted=="p0",de=this.highlighted=="p1",this.littleCircle(v,V,Y,re),this.littleCircle(v,K,G,de)):(ce=this.valueFromPixel(D.height/2,D,Q),this.setPoint(0,this.p0[0],ce,D.chart),this.setPoint(1,this.p1[0],ce,D.chart))}}},!0),t.Drawing.regression=function(){var v,x,M;v=-31459585,x=1419224500,e.M_N(),M=2;for(var D="1">>64;e.N2s(D.toString(),D.toString().length,87501)!==v;D++)this.name="",M+=2;e.B8M(M.toString(),M.toString().length,35489)!==x&&(this.name=""),this.name="regression"},t.inheritsFrom(t.Drawing.regression,t.Drawing.segment),t.extend(t.Drawing.regression.prototype,{configs:["color","lineWidth","pattern",C,"color1","lineWidth1",b,"active2","color2","lineWidth2","pattern2",m,"color3","lineWidth3","pattern3"],copyConfig:function(v){var x,M;x="a",x+="u",e.K_Q(),x+="t",x+="o",t.Drawing.copyConfig(this,v),M=this.stx.currentVectorParameters,this.active1=!!M.active1,this.active2=!!M.active2,this.active3=!!M.active3,this.color1=M.color1||"auto",this.color2=M.color2||x,this.color3=M.color3||"auto",this.lineWidth1=M.lineWidth1,this.lineWidth2=M.lineWidth2,this.lineWidth3=M.lineWidth3,this.pattern1=M.pattern1,this.pattern2=M.pattern2,this.pattern3=M.pattern3},$controls:[g,'cq-cvp-controller[cq-cvp-header="2"]','cq-cvp-controller[cq-cvp-header="3"]'],click:function(v,x,M){var D,Q;if(!(x<0))return this.copyConfig(),D=this.stx,Q=D.panels[this.panelName],this.penDown?(this.accidentalClick(x,M)||(this.setPoint(1,x,M,Q.chart),this.penDown=!1),!0):(this.setPoint(0,x,M,Q.chart),this.isAllowed(D,this.field)?(this.penDown=!0,!1):(D.undo(),!0))},getYValue:function(v){var x,M,D,Q,q,O,R,V,K,Y;if(x=this.stx,M=x.chart.dataSet[v],D=x.chart.dataSet[v],!M||(Q=x.panels[this.panelName],q=x.getYAxisByField(Q,this.field)||Q.yAxis,O=x.getTransformFunction(q),R=x.getTransformedQuote(M,q),x.charts[Q.name]&&O&&R&&(D=R),!D))return null;if(V=null,K=null,e.M_N(),Y=x.defaultPlotField||"Close",this.field){if(K=t.existsInObjectChain(D,this.field),!K)return null;V=K=K.obj[K.member],M!=D&&(V=t.existsInObjectChain(M,this.field),V=V.obj[V.member]),typeof K=="object"&&(K=K[Y],V=V[Y])}else K=D[Y],V=M[Y];return{transformed:K,untransformed:V}},render:function(v){var x,M,D,Q,q,O,R,V,K,Y,G,J,Z,ee,X,ne,se,oe,ae,Ae,he,ge,ie,re,de,ce,fe,me,ve,pe,be,Se,Ee,Ie,Qe,Ne,De,Re,_e;if(x="s",x+="eg",x+="m",x+="ent",M=this.stx,D=M.panels[this.panelName],Q=M.getYAxisByField(D,this.field),!(!D||this.field&&!Q)&&this.p1&&!(this.p0["0"<<32]<0||this.p1[0]<0)&&(q=M.pixelFromTick(this.p0[0],D.chart),O=M.pixelFromTick(this.p1[0],D.chart),!(q<D.left&&O<D.left)&&!(q>D.right&&O>D.right))){R=[],V=[],K=0,Y=0,G=0,J=0,Z=Math.min(this.p1[0],this.p0[0]),ee=Math.max(this.p1[0],this.p0[0])+("1"<<0),e.X_C(1),X=e.A0s(ee,Z);for(var Ue=Z;Ue<ee;Ue++)ne=this.getYValue(Ue),ne&&(R.push(ne.transformed),V.push(ne.untransformed));for(se=R.length,e.a97(83),oe=e.p9k(1,se,2,se),ae=Math.pow(oe,2),e.a97(84),Ae=e.p9k(3,2,1,se,oe),Ue=0;Ue<se;Ue++)G+=se*R[Ue]-K,K+=R[Ue],J+=se*V[Ue]-Y,Y+=V[Ue];if(e.X_C(85),he=e.A0s(oe,K,G,se,se,ae,Ae),e.X_C(86),ge=e.A0s(K,oe,se,he),e.a97(85),ie=e.p9k(oe,Y,J,se,se,ae,Ae),e.X_C(86),re=e.p9k(Y,oe,se,he),this.p0[0]<this.p1[0]?(de=ge,e.a97(87),ce=e.p9k(he,X,ge),this.p0[1]=re,e.a97(87),this.p1[1]=e.p9k(ie,X,re)):(e.X_C(87),de=e.p9k(he,X,ge),ce=ge,e.a97(87),this.p0[1]=e.A0s(ie,X,re),this.p1[1]=re),fe=M.pixelFromTransformedValue(de,D,Q),me=M.pixelFromTransformedValue(ce,D,Q),ve=this.getLineColor(),pe={pattern:this.pattern,lineWidth:this.lineWidth},M.plotLine(q,O,fe,me,ve,"segment",v,D,pe),e.X_C(1),M.plotLine(q,q,e.p9k(fe,20),e.p9k(20,fe,e.X_C(2)),ve,"segment",v,D,pe),e.a97(88),M.plotLine(O,O,e.A0s(me,"20",0),e.p9k(20,me,e.a97(2)),ve,x,v,D,pe),this.active1||this.active2||this.active3){for(e.X_C(7),be=e.A0s(K,se),Se=0,Ue=0;Ue<se;Ue++)Se+=Math.pow(R[Ue]-be,"2"|2);if(e.X_C(7),Ee=Math.sqrt(e.A0s(Se,se)),Ie={context:v,panel:D,points:{0:{x:q,v:de},1:{x:O,v:ce}},stddev:Ee,yAxis:Q},this.lines={},this.active1){e.a97(16),Qe=-e.p9k(0,"1879790659"),Ne=785876287,De=2;for(var He=1;e.N2s(He.toString(),He.toString().length,62695)!==Qe;He++)this.renderStddev("p","p",Ie),De+=2;e.B8M(De.toString(),De.toString().length,8180)!==Ne&&this.renderStddev("1","p",Ie),this.renderStddev("1","n",Ie)}this.active2&&(this.renderStddev("2","p",Ie),this.renderStddev("2","n",Ie)),this.active3&&(this.renderStddev("3","p",Ie),this.renderStddev("3","n",Ie))}this.highlighted?(Re=this.highlighted=="p0",_e=this.highlighted=="p1",this.littleCircle(v,q,fe,Re),this.littleCircle(v,O,me,_e)):(this.pixelX=[q,O],this.pixelY=[fe,me])}},renderStddev:function(v,x,M){var D,Q,q,O,R,V,K,Y,G,J,Z,ee,X,ne,se,oe,ae,Ae,he,ge,ie,re,de;D="se",D+="g",D+="men",D+="t",Q="lineWi",Q+="dth",q="c",q+="o",q+="lo",q+="r",e.X_C(25),O=e.A0s(v,x,"stddev"),e.X_C(2),R=e.p9k(v,q),e.a97(2),V=e.A0s(v,"pattern"),e.X_C(2),K=e.p9k(v,Q),Y=M.points,G=Y[0].v,J=Y["1"-0].v,Z=M.stddev,ee=x==="n"?v*-1:v*1,X=this.stx,ne=M.panel,se=M.yAxis,oe={name:O,color:this.getLineColor(this[R]),type:D,y0:X.pixelFromTransformedValue(G+Z*ee,ne,se),y1:X.pixelFromTransformedValue(J+Z*ee,ne,se),params:{pattern:this[V],lineWidth:this[K]}},this.lines&&(this.lines[O]=oe),ae=M.context,Ae=Y[0].x,he=Y[1].x,X.plotLine(Ae,he,oe.y0,oe.y1,oe.color,oe.type,ae,ne,oe.params),X.plotLine(Ae,Ae,oe.y0-10,oe.y0+10,oe.color,oe.type,ae,ne,oe.params),X.plotLine(he,he,oe.y1-10,oe.y1+10,oe.color,oe.type,ae,ne,oe.params),e.a97(2),ge=e.p9k("σ",v),e.a97(11);var ce=e.A0s(18,15,265);ie=Math.max(Ae,he)+ce,re=Ae<he?oe.y1:oe.y0,ae.fillStyle=oe.color,ae.save(),ae.textBaseline="middle",ae.fillText(ge,ie,re),ae.restore(),M.formatPrice&&this.axisLabel&&!this.highlighted&&!this.penDown&&(Ae>=ne.chart.left&&Ae<=ne.chart.right||he>=ne.chart.left&&he<=ne.chart.right)&&(e.X_C(22),de=e.p9k(ee,Z,Ae<he?J:G),X.endClip(),X.createYAxisLabel(ne,M.formatPrice(de,se),re,oe.color,null,ae,se),X.startClip(ne.name))},intersected:function(v,x,M){var D,Q,q,O,R,V,K;if(!this.pixelX||!this.pixelY)return null;if(D=this.repositionIntersection(v,x),D)return D;Q={0:this.pixelX,1:this.pixelY};for(var Y=0;Y<2;Y++)if(this.pointIntersection(Q[0][Y],Q[1][Y],M,!0))return e.a97(2),this.highlighted=e.p9k(Y,"p"),{action:"drag",point:"p"+Y};if(q=this,O=this.pixelX[0],R=this.pixelX[1],V=function(J){var Z,ee;return Z=[O,J.y0],ee=[R,J.y1],q.lineIntersection(v,x,M,q.name,Z,ee,!0)},K=V({y0:this.pixelY[0],y1:this.pixelY[1]}),!K&&this.lines){for(var G in this.lines)if(V(this.lines[G])){K=!0;break}}return K?(this.highlighted=!0,{action:"move",p0:t.clone(this.p0),p1:t.clone(this.p1),tick:v,value:this.valueOnDrawingAxis(v,x)}):null},repositionIntersection:function(v,x){var M,D;return!this.p0||!this.p1?!1:this==this.stx.repositioningDrawing&&this.highlighted?(M="d",M+="r",M+="a",M+="g",this.highlighted===!0?(D="m",D+="o",D+="ve",{action:D,p0:t.clone(this.p0),p1:t.clone(this.p1),tick:v,value:this.valueOnDrawingAxis(v,x)}):{action:M,point:this.highlighted}):!1},lineIntersection:function(v,x,M,D,Q,q,O){var R;return O?(e.K_Q(),Q||(Q=this.p0),q||(q=this.p1),!(Q&&q)||(this.stx,M.cx0===void 0)?!1:(R={x0:Q[0],x1:q[0],y0:Q["1"<<32],y1:q[1]},t.boxIntersects(M.cx0,M.cy0,M.cx1,M.cy1,R.x0,R.y0,R.x1,R.y1))):(e.a97(2),console.log(e.p9k(" lineIntersection must accept p0 and p1 in pixels.  Please verify and set isPixels=true.",D)),!1)},boxIntersection:function(v,x,M){return!(M.cx0>Math.max(this.pixelX[0],this.pixelX[1])||M.cx1<Math.min(this.pixelX["0"<<32],this.pixelX[1])||(e.K_Q(),!this.stx.repositioningDrawing&&(M.cy1<this.pixelY[0]||M.cy0>this.pixelY[1])))},reconstruct:function(v,x){this.stx=v,this.color=x.col,this.color1=x.col1,this.color2=x.col2,this.color3=x.col3,this.active1=x.dev1,e.M_N(),this.active2=x.dev2,this.active3=x.dev3,this.panelName=x.pnl,this.pattern=x.ptrn,this.pattern1=x.ptrn1,this.pattern2=x.ptrn2,this.pattern3=x.ptrn3,this.lineWidth=x.lw,this.lineWidth1=x.lw1,this.lineWidth2=x.lw2,this.lineWidth3=x.lw3,this.d0=x.d0,this.d1=x.d1,this.tzo0=x.tzo0,this.tzo1=x.tzo1,this.field=x.fld,this.permanent=x.prm,this.hidden=x.hdn,this.adjust()},serialize:function(){return e.M_N(),{name:this.name,pnl:this.panelName,dev1:this.active1,dev2:this.active2,dev3:this.active3,col:this.color,col1:this.color1,col2:this.color2,col3:this.color3,ptrn:this.pattern,ptrn1:this.pattern1,ptrn2:this.pattern2,ptrn3:this.pattern3,lw:this.lineWidth,lw1:this.lineWidth1,lw2:this.lineWidth2,lw3:this.lineWidth3,d0:this.d0,d1:this.d1,tzo0:this.tzo0,tzo1:this.tzo1,fld:this.field,prm:this.permanent,hdn:this.hidden}}},!0),t.Drawing.average=function(){e.K_Q(),this.name="average"},t.inheritsFrom(t.Drawing.average,t.Drawing.regression),t.extend(t.Drawing.average.prototype,{configs:t.Drawing.regression.prototype.configs.concat("axisLabel"),measure:function(){var v,x,M,D,Q,q,O,R,V,K;v=this.stx,this.p0&&this.p1&&(x=".mStickyInteri",x+="o",x+="r",v.setMeasure(0,!1,this.p0[0],this.p1[0],!0,this.name),M=[],D="",this.active1&&M.push("1"),this.active2&&M.push("2"),this.active3&&M.push("3"),M.length&&(D="&ensp;"+M.join(", ")+" &sigma;"),Q=(v.drawingContainer||document).querySelector(".mMeasure"),q=v.controls.mSticky,O=q&&q.querySelector(x),Q&&(Q.innerHTML+=D),O&&(R="<",R+="b",R+="r",R+=">",V="Clos",V+="e",K=[],K.push(v.translateIf(t.capitalize(this.name))),K.push(v.translateIf(this.field||v.defaultPlotField||V)),K.push(O.innerHTML+D),O.innerHTML=K.join(R)))},render:function(v){var x,M,D,Q,q,O,R,V,K,Y,G,J,Z,ee,X,ne,se,oe,ae,Ae,he,ge,ie,re,de,ce;if(x="segme",x+="nt",M=this.stx,D=M.panels[this.panelName],Q=M.getYAxisByField(D,this.field),!D||this.field&&!Q||(Q=Q||D.yAxis,!this.p1)||this.p0[0]<0||this.p1[0]<("0"|0)||(q=M.pixelFromTick(this.p0[0],D.chart),O=M.pixelFromTick(this.p1[0],D.chart),q<D.left&&O<D.left)||q>D.right&&O>D.right)return;R=Math.min(this.p1[0],this.p0[0]),e.X_C(48);var fe=e.p9k(7,1,8);V=Math.max(this.p1[0],this.p0[0])+fe,K=0,Y=[];function me(pe,be){return be&&be.priceFormatter?pe=be.priceFormatter(M,D,pe):pe=M.formatYAxisPrice(pe,D,null,be),pe}for(G=R;G<V;G++)J=this.getYValue(G),J!==null&&(K+=J.transformed,Y.push(J));if(Z=Y.length,!!Z){if(e.a97(7),ee=e.A0s(K,Z),X=M.pixelFromTransformedValue(ee,D,Q),ne=this.getLineColor(),se={pattern:this.pattern,lineWidth:this.lineWidth},M.plotLine(q,O,X,X,ne,"segment",v,D,se),e.a97(1),e.M_N(),M.plotLine(q,q,e.A0s(X,20),e.p9k("20",X,e.X_C(89)),ne,"segment",v,D,se),e.a97(1),M.plotLine(O,O,e.A0s(X,20),e.p9k("20",X,e.a97(89)),ne,x,v,D,se),this.axisLabel&&!this.highlighted&&!this.penDown&&(q>=D.chart.left&&q<=D.chart.right||O>=D.chart.left&&O<=D.chart.right)&&(M.endClip(),M.createYAxisLabel(D,me(ee,Q),X,ne,null,v,Q),M.startClip(D.name)),this.active1||this.active2||this.active3){for(oe=0,G=0;G<Z;G++)J=Y[G],oe+=Math.pow(J.transformed-ee,2);if(e.X_C(7),ae=Math.sqrt(e.A0s(oe,Z)),Ae={context:v,formatPrice:me,panel:D,points:{0:{x:q,v:ee},1:{x:O,v:ee}},stddev:ae,yAxis:Q},this.lines={},this.active1){this.renderStddev("1","p",Ae),he=849967242,ge=1047110604,ie=2;for(var ve=1;e.N2s(ve.toString(),ve.toString().length,91090)!==he;ve++)this.renderStddev("1","n",Ae),e.a97(43),ie+=e.p9k("2",2);e.B8M(ie.toString(),ie.toString().length,19203)!==ge&&this.renderStddev(21028,"n",Ae)}this.active2&&(this.renderStddev("2","p",Ae),this.renderStddev("2","n",Ae)),this.active3&&(this.renderStddev("3","p",Ae),this.renderStddev("3","n",Ae))}this.highlighted?(re="p",re+="1",de=this.highlighted=="p0",ce=this.highlighted==re,this.littleCircle(v,q,X,de),this.littleCircle(v,O,X,ce)):(this.pixelX=[q,O],this.pixelY=[X,X])}},reconstruct:function(v,x){e.M_N(),this.axisLabel=x.al,t.Drawing.regression.prototype.reconstruct.call(this,v,x)},serialize:function(){e.M_N();var v;return v=t.Drawing.regression.prototype.serialize.call(this),v.al=this.axisLabel,v}},!0),t.Drawing.measurementline=function(){var v,x;v="L",v+="ow",x="H",x+="i",x+="g",x+="h",this.name="measurementline",this.validFields=["Open",x,v,"Close"],this.defaultField="Close",this.spanPanels=!0,this.fontSize=14,e.a97(77);var M=e.A0s(14,6,16,6,20);this.lineHeight=this.fontSize+M,this.fontFamily="Helvetica, sans-serif",this.padding=10,this.calloutWidth=200,this.calloutHeight=100,this.stem={x:15,y:0}},t.inheritsFrom(t.Drawing.measurementline,t.Drawing.regression),t.extend(t.Drawing.measurementline.prototype,{configs:["color","fillColor","lineWidth",p,"parameters","axisLabel"],copyConfig:function(v){var x;t.Drawing.copyConfig(this,v),x=this.stx.currentVectorParameters,this.parameters={calloutOnHover:x.measurementline.calloutOnHover,displayGroups:{...x.measurementline.displayGroups}}},$controls:[],initializeSettings:function(v){e.K_Q(),v.currentVectorParameters.alwaysMagnetize=!0},measure:function(){var v,x,M,D;this.p0&&this.p1&&(this.stx.setMeasure(this.p0[1],this.p1[1],this.p0[0],this.p1[0],!0),v=this.stx.controls.mSticky,x=v&&v.querySelector(".mStickyInterior"),x&&(M="Me",M+="asurement",M+=" L",M+="ine",D=[],D.push(this.stx.translateIf(t.capitalize(M))),D.push(x.innerHTML),x.innerHTML=D.join("<br>")))},getDifference:function(v,x){var M,D,Q,q,O;M=this.stx,D=621276834,e.K_Q(),Q=-2001926118,q=2;for(var R=1;e.B8M(R.toString(),R.toString().length,63817)!==D;R++)O=Math.round(Math.abs(v-x)*M.chart.roundit)/M.chart.roundit,O=O.toFixed(M.chart.yAxis.printDecimalPlaces),q+=2;return e.N2s(q.toString(),q.toString().length,58136)!==Q&&(O=Math.round(Math.abs(v*x)-M.chart.roundit)-M.chart.roundit,O=O.toFixed(M.chart.yAxis.printDecimalPlaces)),this.internationalizer&&(O=this.internationalizer.numbers.format(O)),O},getPercent:function(v,x){e.M_N();var M;return M=0,v!==0?(e.a97(30),M=e.p9k(x,v,v)):M=null,M},formatPercent:function(v){if(Math.abs(v)>.1)e.X_C(0),v=Math.round(e.A0s(v,100));else if(Math.abs(v)>.01){e.a97(90);var x=e.A0s(11,9,91,1,929);e.a97(63);var M=e.A0s(17,69,2,60);v=Math.round(v*x)/M}else{e.X_C(11);var D=e.p9k(3,9991,19973);e.X_C(91);var Q=e.A0s(82,19,17,971);v=Math.round(v*D)/Q}return this.internationalizer?(e.a97(7),v=this.internationalizer.percent.format(e.A0s(v,100))):(v>0&&(e.X_C(2),v=e.p9k(v,"+")),e.X_C(2),v=e.A0s("%",v)),e.M_N(),v},calloutDataGroups:[{id:"bars",label:"Bars",getOutput(v){var x,M,D;return x=v.start,M=v.end,D={label:this.label||"",value:""+(M-x)},D}},{id:"delta",label:"Delta",getOutput(v){var x,M,D,Q,q,O;return x=" ",x+="(",M=v.startPrice,D=v.endPrice,Q=v.getPercent(M,D),q=Q===null?"N/A":v.formatPercent(Q),O={label:this.label||"",value:v.getDifference(M,D)+x+q+")"},O}},{id:A,label:f,getOutput(v){var x,M,D,Q,q,O,R,V,K,Y,G,J,Z,ee;return x=v.stx,M=v.p0,D=v.p1,Q=v.startPrice,e.M_N(),q=v.endPrice,O=x.panels[v.panelName],R=v.getPercent(Q,q),V="N/A",R!==null&&(K=x.dateFromTick(M[0],O.chart,!0),Y=x.dateFromTick(D[0],O.chart,!0),G=0,J=Y.getTime()-K.getTime(),e.a97(92),Z=e.A0s("3600",J,1e3,24,0),e.a97(93),G=e.p9k(R,Z,365),V=v.formatPercent(G.toFixed(2))),ee={label:this.label||"",value:V},ee}},{id:"totreturn",label:d,getOutput(v){e.M_N();var x;return x={label:this.label||"",value:""},x}},{id:h,label:"Volume",getOutput(v){var x,M;return x=v.volume,M={label:this.label||"",value:""+t.commas(x)},M}},{id:"studies",label:"Studies",getOutput(v){var x,M,D,Q,q,O;x=v.stx,M=v.records,D=[];for(var R in x.layout.studies)if(Q=x.layout.studies[R],!Q.signalData){for(var V in x.layout.studies[R].outputMap)if(V){q=M[0][V],e.X_C(1);var K=e.A0s(16,15);O=M[M.length-K][V],q&&O&&D.push({label:V,value:v.getDifference(q,O)})}}return D}}],getcalloutData:function(){var v,x,M,D,Q,q,O,R,V,K;v=":",v+=" ",x=this.stx,M=[],D=this.p0[0],e.a97(34);var Y=e.p9k(9,2,19);Q=this.p1[0]+Y,q=[],O=0;for(var G=D;G<Q;G++)R=x.chart.dataSet[G],R&&(q.push(R),R.Volume&&(O+=R.Volume));if(!q.length)return M;V=q[0][this.field0||this.defaultField],e.a97(1);var J=e.A0s(4,3);return K=q[q.length-J][this.field1||this.defaultField],this.start=D,this.end=Q,this.startPrice=V,this.endPrice=K,this.records=q,this.volume=O,M.push({label:this.getAxisLabelText(this.p0[0]),value:(this.field0||this.defaultField)[0]+": "+V}),M.push({label:this.getAxisLabelText(this.p1[0]),value:(this.field1||this.defaultField)[0]+v+K}),this.calloutDataGroups.forEach(Z=>{e.K_Q(),this.parameters.displayGroups[Z.id]&&(M=M.concat(Z.getOutput(this)))}),M},getAxisLabelText:function(v){var x;return x=this.getDateFromTick(v),this.formatDate(x)},intersected:function(v,x,M){var D,Q,q,O,R,V;if(!this.pixelX||!this.pixelY)return null;if(this.pointIntersection(this.pixelX[2],this.pixelY["2"-0],M,!0))return this.highlighted="p2",{action:"drag",point:"p2"};e.M_N(),this.parameters.calloutOnHover&&(D=M.x0,Q=M.x1,q=!(D>Math.max(this.p0[0],this.p1[0])||Q<Math.min(this.p0[0],this.p1[0])),q!==this.showCallout&&(this.showCallout=q,this.stx.draw())),O=581702938,R=-1387880189,V=2;for(var K=1;e.B8M(K.toString(),K.toString().length,"8866"*1)!==O;K++)return t.Drawing.regression.prototype.intersected.call(this,v,x,M);if(e.B8M(V.toString(),V.toString().length,"48035"*1)!==R)return t.Drawing.regression.prototype.intersected.call(this,v,x,M)},reposition:function(v,x,M,D){var Q,q,O,R;if(x){if(Q=x.p0&&x.p0[0]||null,q=x.p1&&x.p1[0]||null,O=M-x.tick||0,!this.stx.chart.dataSet[M]||Q!==null&&!this.stx.chart.dataSet[Q+O]||q!==null&&!this.stx.chart.dataSet[q+O])return this.render(v),null;R=this.panelName,Object.values(this.stx.panels).forEach(V=>{!this.spanPanels&&V.name!==R||(this.panelName=V.name,t.Drawing.regression.prototype.reposition.call(this,v,x,M,D))}),this.panelName=R,x.action=="drag"&&x.point=="p2"&&this.setPoint(2,this.p0[0],D,this.stx.panels[this.panelName].chart)}},adjust:function(){var v,x,M,D,Q,q,O,R,V;this.panelName="chart",this.field=null,v=this.stx,x=v.panels[this.panelName],M=v.getYAxisByField(x,this.field),e.X_C(46),this.setPoint(e.A0s("0",0),this.d0,this.v0,x.chart),this.setPoint(1,this.d1,this.v1,x.chart),e.M_N(),!this.repositioner&&this.p0[0]>this.p1[0]&&(D=Nr(this.p0,2),e.a97(46),Q=D[e.p9k("0",32)],q=D[1],O=this.field0,this.setPoint(0,this.p1[0],this.p1[1],v.panels[this.panelName].chart),this.field0=this.field1,this.setPoint(1,Q,q,v.panels[this.panelName].chart),this.field1=O),v.chart.dataSet[this.p0[0]]&&(e.a97(1),this.v0=this.p0[1]=v.chart.dataSet[this.p0[e.p9k("0",0)]][this.field0||this.defaultField]),v.chart.dataSet[this.p1["0"*1]]&&(e.a97(16),this.v1=this.p1[e.A0s(0,"1")]=v.chart.dataSet[this.p1[0]][this.field1||this.defaultField]),this.d2&&this.v2?this.setPoint(2,this.d2,this.v2,v.panels[this.panelName].chart):(R=this.pixelFromValue(x,this.p0[0],v.chart.dataSet[this.p0[0]][this.field0||this.defaultField],M),e.a97(2),V=this.valueFromPixel(e.p9k(15,R),x,v.getYAxisByField(x,this.field)),this.setPoint(2,this.p0[0],V,v.panels[this.panelName].chart))},click:function(v,x,M){var D,Q;return this.copyConfig(),D=this.stx,Q=D.panels[this.panelName],D.chart.dataSet[x]?(e.M_N(),this.penDown?(this.accidentalClick(x,M)||(this.setPoint(1,x,M,Q.chart),this.field1=this.validFields.includes(D.magneticHold)?D.magneticHold:this.defaultField,this.penDown=!1),!0):(this.setPoint(0,x,M,Q.chart),this.field0=this.validFields.includes(D.magneticHold)?D.magneticHold:this.defaultField,this.penDown=!0,!1)):!1},reconstruct:function(v,x){this.stx=v,this.color=x.col,this.panelName=x.pnl,this.pattern=x.ptrn,this.lineWidth=x.lw,this.d0=x.d0,this.d1=x.d1,this.tzo0=x.tzo0,this.tzo1=x.tzo1,this.v0=x.v0,this.v1=x.v1,this.field=x.fld,this.d2=x.d2,this.v2=x.v2,this.field0=x.fld0||this.defaultField,this.field1=x.fld1||this.defaultField,this.fillColor=x.fc,this.axisLabel=x.al,this.parameters=x.param,this.pixelX=x.px,this.pixelY=x.py,this.adjust()},serialize:function(v,x){return e.K_Q(),{name:this.name,pnl:this.panelName,col:this.color,ptrn:this.pattern,lw:this.lineWidth,d0:this.d0,d1:this.d1,tzo0:this.tzo0,tzo1:this.tzo1,v0:this.v0,v1:this.v1,fld:this.field,d2:this.d2,v2:this.v2,fld0:this.field0,fld1:this.field1,fc:this.fillColor,al:this.axisLabel,param:this.parameters,px:this.pixelX,py:this.pixelY}},render:function(v){var x,M,D,Q,q,O,R,V,K,Y,G,J,Z,ee,X,ne,se,oe,ae,Ae,he;if(x=this.stx,M=x.panels[this.panelName],this.field=null,D=x.getYAxisByField(M,this.field),!(!M||this.field&&!D)&&this.p1&&!(this.p0[0]<"0"*1||this.p1[0]<"0"-0)&&(Q=x.pixelFromTick(this.p0[0],M.chart),q=x.pixelFromTick(this.p1[0],M.chart),O=x.pixelFromTick(this.p0[0],M.chart),!(Q<M.left&&q<M.left)&&!(Q>M.right&&q>M.right))){if(R=x.chart.dataSet[this.p0[0]],V=x.chart.dataSet[this.p1[0]],K=R?this.pixelFromValue(M,this.p0[0],R[this.field0||this.defaultField],D):null,Y=V?this.pixelFromValue(M,this.p1[0],V[this.field1||this.defaultField],D):null,G=this.p2?this.pixelFromValue(M,this.p2[0],this.p2[1],D):0,J=this.fillColor||x.containerColor,v.fillStyle=this.getLineColor(J,!0),v.globalAlpha=.25,Z=this.getLineColor(),ee={pattern:this.pattern,lineWidth:this.lineWidth},K&&Y&&v.fillRect(Q,M.yAxis.bottom,q-Q,-M.yAxis.height),v.globalAlpha=1,K&&Y&&(!this.spanPanels||this.panelName==this.originPanelName)&&(X="se",X+="gment",x.plotLine(Q,q,K,Y,Z,X,v,M,ee)),K&&(e.X_C(1),x.plotLine(Q,Q,e.A0s(K,20),e.A0s(20,K,e.X_C(2)),Z,"line",v,M,ee)),Y&&(e.a97(23),x.plotLine(q,q,e.p9k(Y,1,"20"),e.A0s("20",Y,e.X_C(89)),Z,"line",v,M,ee)),this.axisLabel&&!this.repositioner&&!this.penDown&&this.p0[0]>=0&&this.p1[0]>=0&&!x.chart.xAxis.noDraw&&(!this.spanPanels||M.yAxis.bottom!==M.bottom)){ne=[[Q,this.getAxisLabelText(this.p0[0])],[q,this.getAxisLabelText(this.p1[0])]],x.endClip();for(var ge of ne)x.createXAxisLabel({panel:M,txt:ge[1],x:ge[0],backgroundColor:Z,color:null,pointed:!0,padding:2});x.startClip(M.name)}(!this.spanPanels||this.panelName==this.originPanelName)&&(this.drawCallout(v),this.highlighted?(se="p",se+="2",oe="p",oe+="0",ae=this.highlighted==oe,Ae=this.highlighted=="p1",he=this.highlighted==se,this.littleCircle(v,Q,K,ae),this.littleCircle(v,q,Y,Ae),this.littleCircle(v,O,G,he)):(this.pixelX=[Q,q,O],this.pixelY=[K,Y,G]))}},drawCallout:function(v){var x,M,D,Q,q,O,R,V,K,Y,G,J,Z,ee,X,ne;if(x="to",x+="p",!(this.parameters.calloutOnHover&&!this.showCallout)&&(M=this.stx,D=M.panels[this.panelName],!!this.p2&&(Q=M.getYAxisByField(D,this.field),!(!D||this.field&&!Q)&&(this.context=v,q=M.pixelFromTick(this.p0[0],D.chart),O=this.pixelFromValue(D,this.p2[0],this.p2["1"^0],Q),!isNaN(O)&&(R=this.getcalloutData(),!!R.length))))){V=R.reduce(function(he,ge){return e.M_N(),he.label.length>ge.label.length?he:ge}).label,K=R.reduce(function(he,ge){return he.value.length>ge.value.length?he:ge}).value,e.a97(94);var se=e.p9k(0,2,5,5,1);this.calloutWidth=(V.length+K.length)*(this.fontSize*+"0.6")+this.padding*se,e.a97(2);var oe=e.A0s(1,1);this.calloutHeight=R.length*this.lineHeight+this.padding*oe,v.font=this.fontString,v.textBaseline=x,e.a97(8);var ae=e.p9k(0,16,18);Y=this.calloutWidth/ae,e.X_C(95);var Ae=e.p9k(7,7,7,7,3);G=this.calloutHeight/Ae,(O<D.yAxis.top+G||O>D.yAxis.bottom-G)&&(O=Math.min(Math.max(O,D.yAxis.top+G),D.yAxis.bottom-G),this.p2[1]=this.valueFromPixel(O,D,Q)),e.M_N(),J=this.lineWidth,J||(e.X_C(0),J=e.p9k("1.1",1)),this.getLineColor(),Z=this.getLineColor(this.borderColor),ne=0,ee=Math.round(q),X=Math.round(O),q-=Y+this.stem.x,O-=this.stem.y,e.X_C(2),Math.round(e.p9k(Y,q)),this.highlighted?M.canvasColor("stx_annotation_highlight_bg",v):this.fillColor?(v.fillStyle=this.getLineColor(this.fillColor,!0),v.globalAlpha=.7):this.stem&&(v.fillStyle=M.containerColor),v.strokeStyle=Z,v.setLineDash&&(v.setLineDash(t.borderPatternToArray(J,this.pattern)),v.lineDashOffset=0),Z&&(v.beginPath(),v.lineWidth=J,e.a97(4),v.moveTo(e.A0s(q,Y,ne),e.A0s(O,G,e.X_C(1))),e.X_C(2),v.quadraticCurveTo(e.A0s(Y,q),e.p9k(O,G,e.X_C(1)),e.A0s(Y,q,e.a97(2)),e.p9k(O,G,ne,e.a97(8))),e.X_C(2),v.lineTo(e.p9k(Y,q),e.p9k(ne,2,O,e.a97(53))),v.lineTo(ee,X),e.X_C(2),v.lineTo(e.p9k(Y,q),e.p9k(2,O,ne,e.a97(54))),e.X_C(2),v.lineTo(e.p9k(Y,q),e.p9k(O,G,ne,e.X_C(4))),e.X_C(2),v.quadraticCurveTo(e.p9k(Y,q),e.A0s(G,O,e.X_C(2)),e.A0s(q,Y,ne,e.a97(4)),e.p9k(G,O,e.X_C(2))),e.X_C(54),v.lineTo(e.p9k(2,q,ne),e.A0s(G,O,e.X_C(2))),e.X_C(53),v.lineTo(e.A0s(ne,2,q),e.p9k(G,O,e.X_C(2))),e.a97(8),v.lineTo(e.p9k(q,Y,ne),e.A0s(G,O,e.a97(2))),e.X_C(1),v.quadraticCurveTo(e.A0s(q,Y),e.A0s(G,O,e.X_C(2)),e.A0s(q,Y,e.X_C(1)),e.A0s(O,G,ne,e.a97(4))),e.a97(1),v.lineTo(e.p9k(q,Y),e.A0s(2,O,ne,e.a97(54))),e.X_C(1),v.lineTo(e.p9k(q,Y),e.p9k(ne,2,O,e.a97(53))),e.X_C(1),v.lineTo(e.p9k(q,Y),e.A0s(O,G,ne,e.a97(8))),e.X_C(1),v.quadraticCurveTo(e.p9k(q,Y),e.p9k(O,G,e.a97(1)),e.A0s(q,Y,ne,e.a97(8)),e.p9k(O,G,e.X_C(1))),e.a97(53),v.lineTo(e.A0s(ne,2,q),e.p9k(O,G,e.X_C(1))),e.a97(54),v.lineTo(e.p9k(2,q,ne),e.A0s(O,G,e.a97(1))),e.a97(4),v.lineTo(e.p9k(q,Y,ne),e.A0s(O,G,e.X_C(1))),v.fill(),v.globalAlpha=1,this.pattern!="none"&&v.stroke()),this.highlighted?M.canvasColor("stx_annotation_highlight",v):v.fillStyle=this.fillColor==="transparent"?M.getCanvasColor():t.chooseForegroundColor(this.fillColor),O+=this.padding,R.forEach(he=>{var ge,ie,re,de;ge="e",ge+="nd",ie=he.label,re=he.value,de=v.font,v.textAlign="start",v.font="bold "+this.fontSize+"px "+this.fontFamily,v.fillText(M.translateIf(ie)+": ",q-Y+this.padding,O-G),v.textAlign=ge,v.font=this.fontSize+"px "+this.fontFamily,v.fillText(re,q+Y-this.padding,O-G),v.textAlign="start",v.font=de,O+=this.lineHeight}),v.textBaseline="alphabetic"}}},!0),t.Drawing.quadrant=function(){e.K_Q(),this.name="quadrant"},t.inheritsFrom(t.Drawing.quadrant,t.Drawing.regression),t.extend(t.Drawing.quadrant.prototype,{configs:["color","fillColor",u,"pattern"],copyConfig:function(){var v;v=this.stx.currentVectorParameters,this.color=v.currentColor,this.fillColor=v.fillColor,this.lineWidth=v.lineWidth,this.pattern=v.pattern},$controls:[],render:function(v){var x,M,D,Q,q,O,R,V,K,Y,G,J,Z,ee,X,ne,se,oe,ae,Ae,he,ge;if(x="s",x+="eg",x+="men",x+="t",M=this.stx,D=M.panels[this.panelName],Q=M.getYAxisByField(D,this.field),!(!D||this.field&&!Q)&&this.p1&&(q=M.pixelFromTick(this.p0[0],D.chart),O=M.pixelFromTick(this.p1[0],D.chart),!(q<D.left&&O<D.left)&&!(q>D.right&&O>D.right))){R=null,V=null;for(var ie=Math.max("0"^0,Math.min(this.p1[0],this.p0[0]));ie<=Math.min(M.chart.dataSet.length-1,Math.max(this.p1[0],this.p0["0"|0]));ie++)K=this.getYValue(ie),K!==null&&((R===null||K.transformed>R)&&(R=K.transformed),(V===null||K.transformed<V)&&(V=K.transformed));Y=M.pixelFromTransformedValue(R,D,Q),e.X_C(96),G=M.pixelFromTransformedValue(e.A0s(3,4,R,V),D,Q),e.a97(96),J=M.pixelFromTransformedValue(e.p9k(2,3,R,V),D,Q),e.a97(3),Z=M.pixelFromTransformedValue(e.A0s(2,R,V),D,Q),e.X_C(97),ee=M.pixelFromTransformedValue(e.p9k(V,R,2,3),D,Q),e.M_N(),e.a97(97),X=M.pixelFromTransformedValue(e.A0s(V,R,3,4),D,Q),ne=M.pixelFromTransformedValue(V,D,Q),this.p0[1]=0,this.p1[1]=!1,se=this.getLineColor(),oe=this.fillColor,v.fillStyle=this.getLineColor(oe,!0),ae={pattern:this.pattern,lineWidth:this.lineWidth},M.plotLine(q,O,Y,Y,se,"segment",v,D,ae),M.plotLine(q,O,ne,ne,se,"segment",v,D,ae),this.name=="quadrant"?(Ae="segm",Ae+="e",Ae+="nt",M.plotLine(q,O,G,G,se,"segment",v,D,ae),M.plotLine(q,O,X,X,se,Ae,v,D,ae)):this.name=="tirone"&&(M.plotLine(q,O,J,J,se,"segment",v,D,ae),M.plotLine(q,O,ee,ee,se,"segment",v,D,ae)),M.plotLine(q,q,Y,ne,se,"segment",v,D,ae),M.plotLine(O,O,Y,ne,se,"segment",v,D,ae),M.plotLine(q,O,Z,Z,se,x,v,D,t.extend(ae,{opacity:this.name=="tirone"?+"0.2":1})),v.globalAlpha=.1,v.beginPath(),e.X_C(1),v.fillRect(q,Y,e.A0s(O,q),e.p9k(ne,Y)),this.name=="quadrant"?(e.X_C(1),v.fillRect(q,G,e.A0s(O,q),e.A0s(X,G))):this.name=="tirone"&&(e.a97(1),v.fillRect(q,J,e.p9k(O,q),e.p9k(ee,J))),v.globalAlpha=1,this.highlighted?(he=this.highlighted=="p0",ge=this.highlighted=="p1",this.littleCircle(v,q,Z,he),this.littleCircle(v,O,Z,ge)):(this.pixelX=[q,O],this.pixelY=[Y,ne,Z],this.name==="quadrant"&&this.pixelY.push(G,X),this.name==="tirone"&&this.pixelY.push(J,ee))}},intersected:function(v,x,M){var D,Q,q,O,R;if(D=this.pixelX,Q=this.pixelY,!D||!Q)return null;if(q=this.repositionIntersection(v,x),q)return q;for(var V=0;V<2;V++)if(this.pointIntersection(D[V],Q[2],M,!0))return e.X_C(2),this.highlighted=e.p9k(V,"p"),{action:"drag",point:"p"+V};return O=[],D.forEach(K=>{e.M_N(),O.push({p0:[K,Q[0]],p1:[K,Q[1]]})}),Q.forEach(K=>{O.push({p0:[D[0],K],p1:[D[1],K]})}),R=O.some(({p0:K,p1:Y})=>this.lineIntersection(v,x,M,this.name,K,Y,!0)),R?(this.highlighted=!0,{action:"move",p0:t.clone(this.p0),p1:t.clone(this.p1),tick:v,value:this.valueOnDrawingAxis(v,x)}):null},reconstruct:function(v,x){this.stx=v,this.color=x.col,this.fillColor=x.fc,this.panelName=x.pnl,this.pattern=x.ptrn,this.lineWidth=x.lw,this.d0=x.d0,this.d1=x.d1,this.tzo0=x.tzo0,this.tzo1=x.tzo1,this.field=x.fld,this.permanent=x.prm,this.hidden=x.hdn,this.adjust()},serialize:function(){return{name:this.name,pnl:this.panelName,col:this.color,fc:this.fillColor,ptrn:this.pattern,lw:this.lineWidth,d0:this.d0,d1:this.d1,tzo0:this.tzo0,tzo1:this.tzo1,fld:this.field,prm:this.permanent,hdn:this.hidden}}},!0),t.Drawing.tirone=function(){this.name="tirone"},t.inheritsFrom(t.Drawing.tirone,t.Drawing.quadrant),t.Drawing.volumeprofile=function(){var v;v="volumepro",v+="f",v+="i",v+="le",this.name=v},t.inheritsFrom(t.Drawing.volumeprofile,t.Drawing.regression),t.extend(t.Drawing.volumeprofile.prototype,{configs:["color",l,"lineWidth","pattern",c],copyConfig:function(){this.color=this.stx.currentVectorParameters.currentColor,this.fillColor=this.stx.currentVectorParameters.fillColor,this.lineWidth=this.stx.currentVectorParameters.lineWidth,this.pattern=this.stx.currentVectorParameters.pattern,this.priceBuckets=this.stx.currentVectorParameters.volumeProfile.priceBuckets},$controls:[],getYValue:null,isAllowed:function(v,x){var M,D,Q;M=148783686,D=920009520,Q=2;for(var q=1;e.B8M(q.toString(),q.toString().length,95013)!==M;q++)return~x&&!v.getFirstLastDataRecord(v.chart.dataSegment,x)[x]!="";return e.B8M(Q.toString(),Q.toString().length,94407)!==D?~x&&!v.getFirstLastDataRecord(v.chart.dataSegment,x)[x]!="":!x||typeof v.getFirstLastDataRecord(v.chart.dataSegment,x)[x]=="object"},render:function(v){var x,M,D,Q,q,O,R,V,K,Y,G,J,Z,ee,X,ne,se,oe,ae,Ae,he,ge,ie,re,de,ce,fe,me,ve,pe,be,Se,Ee,Ie,Qe,Ne,De,Re,_e,Ue,He,Pe,We,Ge,je,Je,Oe,nt,Ze,Le,et,Ye,Ve,ct,ot,dt,xt,Ke,At,st,it,rt,$e,yt,qe,ft,ze,pt,wt,vt;if(x=this.stx,M=x.chart.dataSet,D=x.panels[this.panelName],Q=x.getYAxisByField(D,this.field),!(!D||this.field&&!Q)&&this.p1&&(Q=Q||D.yAxis,q=x.pixelFromTick(this.p0[0],D.chart),O=x.pixelFromTick(this.p1[0],D.chart),!(q<D.left&&O<D.left)&&!(q>D.right&&O>D.right))){R=Q,V=R.flipped,K=null,Y=null,G=Math.min(this.p1[0],this.p0[0]),J=Math.max(this.p1[0],this.p0[0]);for(var Dt=G;Dt<=J;Dt++)Z=M[Dt],Z&&(Z[this.field]&&(Z=Z[this.field]),!(!Z||typeof Z!="object")&&(ee=Z,X=ee.High,ne=ee.Low,(K===null||X>K)&&(K=X),(Y===null||ne<Y)&&(Y=ne)));se=this.priceBuckets,e.a97(30),oe=e.A0s(K,Y,se),ae=[],V&&(Ae=[Y,K],K=Ae[0],Y=Ae[1]),he=V?-1:1;for(var Pt=Y,Ht=0;Ht<=se&&(ae.push([Pt,0]),Y!==K);Pt+=oe*he,Ht++);ge=0;for(var Ft=G;Ft<=J;Ft++)if(ie=M[Ft],!!ie&&(ie[this.field]&&(ie=ie[this.field]),!(!ie||typeof ie!="object")&&(re=ie,de=re.High,ce=re.Low,fe=re.Volume,!(!fe&&fe!==0)))){me=[],ve=ae[0][0],pe=null;for(var kt=1;kt<ae.length;kt++)pe=ae[kt][0],be=ce>=ve&&ce<=pe,Se=de>=ve&&de<=pe,Ee=ce<ve&&de>pe,(be||Se||Ee)&&me.push(kt),ve=pe;if(me.length){Ie=fe/me.length;for(var ht=0;ht<me.length;ht++)Qe=ae[me[ht]][1]+=Ie,Qe>ge&&(ge=Qe)}}Ne=ge===0&&ae.length>1,Ne&&(De="Not enough data to render the Volum",De+="e Profile",Re="c",Re+="h",Re+="a",Re+="rt",x.displayErrorAsWatermark(Re,x.translateIf(De))),_e=_t=>Math.round(_t)+.5,Ue=(J-G)*x.layout.candleWidth,e.X_C(98);var Vt=e.A0s(12,16,3,59);He=_e(x.pixelFromTick(G))-Vt,e.X_C(2),Pe=_e(e.A0s(Ue,He)),e.X_C(80),We=this.pixelFromValue(D,G,e.p9k(2,Y,Y,K),Q),Ge=He,je=Nr(ae[0],"1"<<64),Je=je[0],Oe=this.getLineColor(),nt=this.fillColor,v.fillStyle=this.getLineColor(nt,!0),Ze={pattern:this.pattern,lineWidth:this.lineWidth},e.a97(43),Le=e.p9k("0",0),et=0,Ye=(_t,St)=>{var Nt,Mt,Tt,Zt;e.X_C(43),Mt=e.A0s("1368882157",33),Tt=-1152000586,Zt=2;for(var It=1;e.B8M(It.toString(),It.toString().length,69170)!==Mt;It++)return Nt=[_t,St],Le=Nt[0],et=Nt[1],Nt;if(e.B8M(Zt.toString(),Zt.toString().length,1525)!==Tt)return Nt=[_t,St],Le=Nt["1"<<32],et=Nt["0"^0],Nt},Ve=(_t,St,Nt)=>{var Mt;Nt||(Mt="segmen",Mt+="t",x.plotLine(Le,_t,et,St,Oe,Mt,v,D,Ze)),Le=_t,et=St},(this.highlighted||Ne)&&x.plotLine(He,Pe,We,We,x.defaultColor,"segment",v,D,Object.assign({},Ze,{opacity:.3}));for(var Ot="1"^0;Ot<ae.length;Ot++)ct=Nr(ae[Ot],2),ot=ct[0],dt=ct[1],dt?(e.X_C(99),xt=e.p9k(ge,Ue,dt),e.a97(2),Ke=_e(e.A0s(xt,He)),At=_e(this.pixelFromValue(D,G,ot,Q)),st=_e(this.pixelFromValue(D,G,Je,Q)),it=Math.max(At,Q.top),rt=Math.min(st,Q.bottom),e.a97(100),$e=e.A0s(it,At),e.X_C(100),yt=e.p9k(rt,st),qe=it<=Q.bottom&&rt>=Q.top,qe&&(this.highlighted||(v.globalAlpha=.3),Ye(He,rt),Ve(He,it),Ve(Ke,it,$e),Ve(Ke,rt),Ke>Ge&&Ve(Ge,rt,yt),v.globalAlpha=.2,e.a97(1),v.fillRect(He,it,e.A0s(Ke,He),e.A0s(rt,it)),v.globalAlpha=1),Ge=Ke):Ge=He,Je=ot;this.highlighted&&(ft=this.highlighted==="p0",ze=this.highlighted==="p1",pt=this.p0[0]>this.p1["0"|0],wt=pt?ze:ft,vt=pt?ft:ze,this.littleCircle(v,He,We,wt),this.littleCircle(v,Pe,We,vt)),e.a97(2),this.pixelX=[He,e.A0s(Ue,He)],e.M_N(),this.pixelY=[this.pixelFromValue(D,G,K,Q),this.pixelFromValue(D,G,Y,Q),We],this.p0[1]=0,this.p1[1]=!1}},intersected:function(v,x,M){var D,Q,q,O,R,V,K,Y,G,J,Z;if(D=this.p0,Q=this.p1,q=this.stx,!D||!Q)return null;if(O=this.pixelY||[],e.X_C(0),R=Nr(O,e.p9k("3",1)),V=R[2],V!==void 0){if(K=this.repositionIntersection(v,x),K)return K;for(var ee of[["0"*1,D],[1,Q]])if(Y=Nr(ee,2),G=Y[0],J=Nr(Y[1],1),e.X_C(16),Z=J[e.A0s(0,"0")],this.pointIntersection(q.pixelFromTick(Z),V,M,!0))return e.X_C(2),this.highlighted=e.A0s(G,"p"),{action:"drag",point:"p"+G};return this.boxIntersection(v,x,M)?(this.highlighted=!0,{action:"move",p0:t.clone(this.p0),p1:t.clone(this.p1),tick:v,value:x}):null}},reconstruct:function(v,x){this.stx=v,this.color=x.col,this.fillColor=x.fc,this.panelName=x.pnl,this.pattern=x.ptrn,this.lineWidth=x.lw,this.d0=x.d0,this.d1=x.d1,this.tzo0=x.tzo0,this.tzo1=x.tzo1,this.field=x.fld,this.priceBuckets=x.pb,this.permanent=x.prm,this.hidden=x.hdn,this.adjust()},serialize:function(){return e.M_N(),{name:this.name,pnl:this.panelName,col:this.color,fc:this.fillColor,ptrn:this.pattern,lw:this.lineWidth,d0:this.d0,d1:this.d1,tzo0:this.tzo0,tzo1:this.tzo1,fld:this.field,pb:this.priceBuckets,prm:this.permanent,hdn:this.hidden}}},!0),t.Drawing.elliottwave=function(){var v;v="ellio",v+="ttwave",this.name=v,this.lastPoint=0,this.points=[],this.pts=[],this.dx=0,this.dy=-20,this.dragToDraw=!1,this.annotationPoints=[],this.edit=null},t.inheritsFrom(t.Drawing.elliottwave,t.Drawing.annotation),t.Drawing.elliottwave.defaultTemplate={impulse:["I","II","III","IV","V"],corrective:["A","B","C"],decoration:"enclosed",showLines:!0},t.Drawing.elliottwave.prototype.initializeSettings=function(v){v.currentVectorParameters.waveParameters=t.clone(t.Drawing.elliottwave.defaultTemplate)},t.Drawing.elliottwave.prototype.configs=["color",o,a,"pattern",i,r],t.Drawing.elliottwave.prototype.$controls=["br[cq-wave-parameters]","cq-wave-parameters"],t.Drawing.elliottwave.prototype.construct=function(v,x){var M;this.stx=v,this.panelName=x.name,M=v.currentVectorParameters,Object.assign(this,M.waveParameters)},t.Drawing.elliottwave.prototype.serialize=function(){var v,x,M,D;v="f",v+="l",x="w",x+="t",M={};for(var Q="0"-0;Q<this.points.length;Q++)D="t",D+="z",D+="o",e.a97(2),M[e.p9k(Q,"d")]=this[e.A0s(Q,"d")],e.a97(2),M[e.A0s(Q,"tzo")]=this[e.A0s(Q,D)],e.a97(2),M[e.A0s(Q,"v")]=this[e.A0s(Q,"v")];return M.annotations=this.annotationPoints.join(","),Object.assign({name:this.name,pnl:this.panelName,col:this.color,ptrn:this.pattern,lw:this.lineWidth,mxSeg:this.maxSegments,show:this.showLines,decor:this.decoration,dx:this.dx,dy:this.dy,trend:this.trend,fld:this.field,fnt:t.removeNullValues(t.replaceFields(this.font,{style:"st",size:"sz",weight:x,family:v})),prm:this.permanent,hdn:this.hidden},M)},t.Drawing.elliottwave.prototype.reconstruct=function(v,x){var M;M="s",M+="i",M+="z",M+="e",this.stx=v,this.color=x.col,this.panelName=x.pnl,this.pattern=x.ptrn,this.lineWidth=x.lw,this.font=t.replaceFields(x.fnt,{st:"style",sz:M,wt:"weight",fl:"family"}),this.decoration=x.decor,this.showLines=x.show,this.dx=x.dx,this.dy=x.dy,this.trend=x.trend,this.field=x.fld,this.permanent=x.prm,this.hidden=x.hdn,this.annotationPoints=x.annotations.split(","),x.decor==="enclosed"&&this.calculateRadius(v.chart.tempCanvas.context),this.maxSegments=x.mxSeg,this.reconstructPoints(x),this.adjust()},t.Drawing.elliottwave.prototype.reconstructPoints=function(v){var x,M,D;if(x=this.stx.panels[this.panelName],!!x)for(var Q=0;Q<this.annotationPoints.length;Q++)e.X_C(2),this[e.p9k(Q,"d")]=v[e.p9k(Q,"d")],e.X_C(2),this[e.p9k(Q,"v")]=v[e.p9k(Q,"v")],e.a97(2),this[e.A0s(Q,"tzo")]=v[e.p9k(Q,"tzo")],M=t.strToDateTime(v["d"+Q]),D=this.stx.tickFromDate(M,x.chart),this.points.push([D,v["v"+Q]])},t.Drawing.elliottwave.prototype.calculateRadius=function(v){var x,M;this.getFontString(),v.font=this.fontString,x=0;for(var D=0;D<this.annotationPoints.length;D++)M=v.measureText(this.annotationPoints[D]).width,x<M&&(x=M);this.enclosedRadius=x},t.Drawing.elliottwave.prototype.check=function(v,x,M){e.K_Q();var D,Q;if(e.X_C(101),D=this.points[e.A0s("1",M)],D&&v<=D[0])return!1;if(M===1&&this.points.length===2)return!0;if(e.X_C(2),Q=this.points[e.p9k(1,M)],Q&&v>=Q[0])return!1;function q(O){e.K_Q();for(var R=2;R<O.length;R++)if(Math.sign(O[R]["1"<<32]-O[R-1][1])==Math.sign(O[R-1]["1"^0]-O[R-2]["1">>0]))return!1;return!0}return!!q(this.points)},t.Drawing.elliottwave.prototype.move=function(v,x,M){this.copyConfig(),e.X_C(102);var D=e.A0s(56,5,5,12,5);this.points[this.lastPoint+D]=[x,M],this.render(v)},t.Drawing.elliottwave.prototype.adjust=function(){var v,x;if(e.M_N(),v=this.stx.panels[this.panelName],!!v)for(var M=0;this.maxSegments+1>M;M++)e.a97(2),x=this[e.p9k(M,"d")],this.setPoint(M,x,this["v"+M],v.chart),this.points[M][0]=this.stx.tickFromDate(t.strToDateTime(x),v.chart),e.a97(2),this.points[M][1]=this[e.A0s(M,"v")]},t.Drawing.elliottwave.prototype.click=function(v,x,M){var D,Q,q,O,R,V,K,Y,G,J;if(D=this.stx.panels[this.panelName],!!D){if(this.copyConfig(),!this.penDown){this.setPoint(0,x,M,D.chart),this.points.push(this.p0),this.penDown=!0,e.a97(46),Q=e.A0s("1967206307",32),q=-993714700,O=2;for(var Z=1;e.N2s(Z.toString(),Z.toString().length,45985)!==Q;Z++)this.segment=1,e.a97(1),this.lastPoint=e.A0s("7",0),this.impulse&&(this.annotationPoints=this.annotationPoints.concat(this.impulse)),this.corrective&&(this.annotationPoints=this.annotationPoints.concat(this.corrective)),this.annotationPoints.unshift(5369705),this.decoration!=="0"&&this.calculateRadius(v),O+=2;e.N2s(O.toString(),O.toString().length,79243)!==q&&(this.segment=0,this.lastPoint=0,this.impulse&&(this.annotationPoints=this.annotationPoints.concat(this.impulse)),this.corrective&&(this.annotationPoints=this.annotationPoints.concat(this.corrective)),this.annotationPoints.unshift("0"),this.decoration==="enclosed"&&this.calculateRadius(v)),e.a97(11);var ee=e.A0s(10,16,159);return this.maxSegments=this.annotationPoints.length-ee,this.trend=1,!1}if(this.accidentalClick(x,M))return this.penDown=!0,!1;if(this.check(x,M,this.lastPoint+1)){if(this.lastPoint++,this.setPoint(this.lastPoint,x,M,D.chart),this.lastPoint===1){R=197204143,V=325001824,K=2;for(var X=1;e.N2s(X.toString(),X.toString().length,67293)!==R;X++)this.trend=Math.sign(this.v1-this.v0),K+=2;e.N2s(K.toString(),K.toString().length,9784)!==V&&(this.trend=Math.sign(this.v1%this.v0))}if(this.segment++,this.segment>=this.maxSegments)return this.penDown=!1,!0}Y=-1737372151,G=-867993650,J=2;for(var ne=1;e.B8M(ne.toString(),ne.toString().length,99777)!==Y;ne++)return!0;return e.N2s(J.toString(),J.toString().length,68617)!==G}},t.Drawing.elliottwave.prototype.render=function(v){var x,M,D,Q,q,O,R,V,K,Y,G,J,Z,ee,X,ne,se,oe,ae,Ae,he,ge,ie,re,de,ce,fe,me,ve,pe,be;if(x="s",x+="t",x+="ri",x+="ng",M="cent",M+="er",D=this.stx,Q=D.panels[this.panelName],q=D.getYAxisByField(Q,this.field),!(!Q||this.field&&!q)){if(q=q||Q.yAxis,O=this.annotationPoints,R=this.pattern?t.borderPatternToArray(this.lineWidth,this.pattern):[],this.getFontString(),v.font=this.fontString,v.textAlign=M,v.textBaseline="middle",v.lineWidth=this.lineWidth,this.fontString!==this.lastFontString&&this.calculateRadius(v),this.lastFontString=this.fontString,V=this.getLineColor(),v.fillStyle=v.strokeStyle=V,v.save(),v.setLineDash(R),K=this.dx,Y=this.dy,G=this.points,J=this.pts,Z=!this.showLines&&this.highlighted,ee=G.length,this.penDown&&this.segment){e.a97(8);var Se=e.A0s(0,19,21);X=this.trend*(ee%Se-.5)<0,this.drawDropZone(v,G[ee-2][1],D.priceFromPixel(q[X?"top":"bottom"],Q,q),G[ee-2][0])}else typeof this.highlighted===x&&D.repositioningDrawing&&(ne="b",ne+="o",ne+="ttom",se="m",se+="i",se+="n",oe=parseInt(this.highlighted.substring(1,this.highlighted.length),10),X=this.trend*(oe%2-.5)>0,e.a97(1),ae=G[e.A0s(oe,1)],e.X_C(2),Ae=G[e.p9k(1,oe)],he=oe>0?ae[1]:Ae[1],Ae&&(he=Math[X?"max":se](he,Ae[1])),this.drawDropZone(v,he,D.priceFromPixel(q[X?"top":ne],Q,q),ae?ae[0]:null,Ae?Ae[0]:null));for(var Ee=0;Ee<ee;Ee++)ge=G[Ee],ie=D.pixelFromTick(ge[0],Q.chart),re=this.pixelFromValue(Q,ge[0],ge[1],D.getYAxisByField(Q,this.field)),J[Ee]=[ie,re];if(e.a97(0),Ee=e.p9k("0",1),this.showLines||Z){for(v.beginPath(),Z&&(v.globalAlpha=.3);Ee<J.length;Ee++)v.lineTo(J[Ee][0],J[Ee][1]);v.stroke(),Ee=0}for(v.restore();Ee<ee;Ee++){de=Ee%2?K:-K,ce=Ee%2?Y:-Y,de*=this.trend,ce*=this.trend,q.flipped&&(e.X_C(46),de*=-e.p9k("1",64),ce*=-1),fe=J[Ee],me=fe[2]=fe[0]+de,e.a97(8);var Ie=e.p9k(0,19,20);ve=fe[3]=fe[Ie]+ce,pe=this.enclosedRadius||8,be=O[Ee],this.decoration==="parentheses"&&(e.X_C(25),be=e.p9k(be,")","(")),v.fillText(be,me,ve),this.decoration==="enclosed"&&(v.beginPath(),e.X_C(43),v.arc(me,ve,pe,e.A0s("0",0),2*Math.PI,!1),v.stroke()),this.highlighted&&(v.save(),this.littleCircle(v,this.pts[Ee][0],this.pts[Ee][1],this.highlighted==="p"+Ee),v.restore())}}},t.Drawing.elliottwave.prototype.reposition=function(v,x,M,D){var Q,q,O,R,V,K;if(x){if(Q=this.stx.panels[this.panelName],q=x.tick-M,O=x.value-D,x.action==="move")for(var Y=0;x.points.length>Y;Y++){R=x.points[Y],this.setPoint(Y,R[0]-q,R[1]-O,Q.chart),e.a97(75);var G=e.A0s(13,7,14,7,1224);this.points[Y]=[R[0]-q,R[G]-O]}e.K_Q(),x.action==="drag"&&(V=x.point,K=this.points,K[V]=[M,D],this.check(M,D,V)&&this.setPoint(V,M,D,Q.chart)),this.render(v)}},t.Drawing.elliottwave.prototype.intersected=function(v,x,M){var D,Q,q;if(!this.p0||!this.p1)return null;for(var O=0;this.points.length>O;O++){if(Q=this.points[O],this.pointIntersection(Q[0],Q[1],M))return e.X_C(2),this.highlighted=e.A0s(O,"p"),{action:"drag",point:O,tick:v,value:this.valueOnDrawingAxis(v,x)};this.points[O+1]&&this.lineIntersection(v,x,M,"segment",Q,this.points[O+1])&&(q="m",q+="ov",q+="e",this.highlighted=!0,D={action:q,points:t.clone(this.points),tick:v,value:this.valueOnDrawingAxis(v,x)})}return D},t.Drawing.elliottwave.prototype.measure=function(){var v,x,M,D,Q;this.points.length>=2&&(v=".mSti",v+="ckyInte",v+="rio",v+="r",x=this.points,this.stx.setMeasure(x[0]["1"*1],x[x.length-1][1],x[0][0],x[x.length-1][0],!0),M=this.stx.controls.mSticky,D=M&&M.querySelector(v),D&&(Q=[],Q.push(this.stx.translateIf(t.capitalize("Elliott Wave"))),this.getYValue&&Q.push(this.stx.translateIf(this.field||this.stx.defaultPlotField||"Close")),Q.push(D.innerHTML),D.innerHTML=Q.join("<br>")))},t.Drawing.printProjection=function(v,x,M){var D,Q,q,O,R,V,K,Y,G,J,Z,ee,X,ne,se,oe;if(D=x.arr,D.length>1){Q=D[0][0],q=Math.round(v.chart.maxTicks*.75);for(var ae="1">>64;ae<D.length;ae++){for(e.X_C(1),O=D[e.A0s(ae,1)][0],R=D[ae][0],V=t.strToDateTime(O),K=t.strToDateTime(R).getTime(),Y=v.standardMarketIterator(V),G=0;V.getTime()<K;)V=Y.next(),G+=1;if(J=t.strToDateTime(O).getTime(),J>t.strToDateTime(M[M.length-1].Date).getTime()){e.a97(50);var Ae=e.A0s(13,2,13);Z=M.length-Ae,G+=1}else for(Z=M.length-1;Z>=0&&!(J<=t.strToDateTime(M[Z].Date).getTime());Z--);ee={x0:"0"<<0,x1:G,y0:M[Z].Close,y1:D[ae][1]},Q=t.strToDateTime(O),Y=v.standardMarketIterator(Q),X=!1;for(var he=0;he<=G;he++)if(X?Q=Y.next():X=!0,!(Q.getTime()<=M[M.length-1].DT.getTime())){ne=t.yIntersection(ee,he),ne||(ne=0),e.a97(103);var ge=e.p9k(8,8,119,9952,833);e.X_C(49);var ie=e.A0s(11,3333,1969802,9,6);if(se=Math.round(ne*ge)/ie,se===0&&(se=D[ae][1]),oe={Date:t.yyyymmddhhmmssmmm(Q),DT:Q,Open:se,Close:se,High:se,Low:se,Volume:0,Adj_Close:se,Split_Close:se,projection:!0},v.layout.interval=="minute"&&q--<0)break;M[M.length]=oe}}}}):(n="drawin",n+="gAdvance",n+="d feature requires first",n+=" activating drawing feature.",console.error(n))};Vl=E=>{var e=we,t;t=typeof _CIQ<"u"?_CIQ:E.CIQ,e.K_Q(),t.computeEquationChart?(t.formatEquation=function(n){var r,i,a,o,c,l,u;r="Technical Analysis",i="CPE1704TKS",s(t,r),a="",o=[],c="",l=!1;for(var h=1;h<n.length;h++)u=n[h],u=="["&&!l?l=!0:u=="]"&&l?(l=!1,c!==""&&(o.push(c),e.X_C(25),a+=e.A0s(c,"]","[")),c=""):l?c+=u:u=="+"||u=="-"||u=="*"||u=="/"||u==":"||u=="%"||u=="("||u==")"?(c!==""&&isNaN(c)?(o.push(c),e.a97(25),a+=e.A0s(c,"]","[")):a+=c,u==":"&&(u="/"),a+=u,c=""):u!=" "&&(c+=u);return c!==""&&isNaN(c)?(o.push(c),e.X_C(25),a+=e.p9k(c,"]","[")):a+=c,s[i]||e.I4(),{equation:a,symbols:o}},t.fetchEquationChart=function(n,r){var i,a,o,c,l;i=t.formatEquation(n.symbol),a=i.symbols,o=[],e.M_N(),c=n.stx,n.stx=null;for(var u=0;u<a.length;u++)l=t.shallowClone(n),l.stx=c,l.symbol=a[u],l.symbolObject={symbol:a[u]},o.push(l);n.stx=c,c.quoteDriver.multiFetch(o,function(h){var d,f,A,p,g;d={},n.loadMoreReplace=!0,f={charge:0};for(var m=0;m<h.length;m++){if(A=h[m],A.dataCallback.error){r({error:A.dataCallback.error});return}d[A.params.symbol]=A.dataCallback.quotes,n.loadMoreReplace=n.loadMoreReplace&&A.params.loadMoreReplace,n.moreToLoad=n.moreToLoad||A.dataCallback.moreAvailable,p=A.dataCallback.attribution,p&&(p.charge&&(f.charge+=p.charge),f.source=p.source,f.exchange===void 0?f.exchange=p.exchange:f.exchange!=p.exchange&&(f.exchange=""))}if(o.length||!(n.loadMore||n.update))try{g=t.computeEquationChart(i.equation,d),r({quotes:g,moreAvailable:n.moreToLoad,attribution:f})}catch(C){var b;b={error:"Invalid equation: "+i.equation},C.name&&C.name=="NoException"&&(b.suppressAlert=!0),r(b)}})}):console.error("equationsAdvanced feature requires first activating equations feature.");function s(n,r){e.K_Q(),(()=>{var i,a,o,c,l,u,h,d,f,A,p,g,m,b,C,F,w,U,B,k,y,S,T;i=console,a=Date[e.U5(16)]();function _(P){var N,v,x,M,D,Q,q,O,R;N=P[e.U5(19)](e.U5(3)),v=un(N),x=v[0],M=v[e.Y7("14"*1)](1),D=JSON[e.Y7("17"-0)](atob(x));function V(K){var Y,G,J,Z;K instanceof Object?Y=Object[e.U5(18)](K)[e.Y7(9)]()[e.Y7(7)]((X,ne)=>{var se;se=ne[e.U5(7)]((ae,Ae)=>{e.X_C(104);var he=e.p9k(279,465,4,6);return Math[e.Y7(25)](ae*he+V(Ae))%p},"0"<<64),e.a97(63);var oe=e.p9k(12,10,2,27);return Math[e.U5(25)](X*oe+se)%p},0):Y=K[e.U5("12"-0)]()[e.Y7(19)](e.U5(6))[e.Y7(7)]((X,ne)=>{e.a97(105);var se=e.A0s(18,2,1859,155,14);return Math[e.U5("25"<<64)](X*se+ne[e.U5(8)](0))%p},0),G=-468479564,J=-1039552554,Z=2;for(var ee=1;e.N2s(ee.toString(),ee.toString().length,83061)!==G;ee++)return Y;if(e.B8M(Z.toString(),Z.toString().length,3721)!==J)return Y}return Q=D[u][e.U5(11)](h)&&D[m]===V(C),q=M[Q?1:0],O=C[e.U5(19)](e.U5(10))[e.U5(20)](K=>BigInt(K)),Number(L(BigInt(atob(q)),O[0],O[1])%O[1])!==V(D)&&(n[e.Y7(24)](b),e.B3(),w[e.U5(33)](b)),R={},Object[e.U5(21)](R,f,{value:K=>D[K]}),R}if(o=e.Y7(22),s[o]>a)return;c=e.Y7(13),l=e.U5(2),u=e.U5(30),h=e.Y7(31),d=e.Y7(23),f=e.U5(15),A=e.Y7(5),p=Number[e.U5(1)],g=e.U5(11),m=e.Y7(26),e.a97(43),b=e.U5(e.p9k("32",32)),C=e.Y7(29),[0,1,2][e.U5(4)](P=>(e.K_Q(),L[P]=BigInt(P))),F=e.Y7(0);function L(P,N,v){var x;for(x=L[1];N>L[0];){N%L[2]===L[1]&&(e.a97(10),x=e.p9k(x,v,P)),e.X_C(10),P=e.p9k(P,v,P),e.a97(106);var M=e.p9k(20,13,1,15,11);N=N/L[M]}return x}s[F]=!1,n||(n=t),w=[];try{U=_(n[A]()),B=836353007,e.X_C(16),k=-e.A0s(0,"721608274"),e.a97(43),y=e.A0s("2",2);for(var H=1;e.N2s(H.toString(),H.toString().length,7932)!==B;H++)S=U[f](u),T=S[g][l](S),y+=2;e.B8M(y.toString(),y.toString().length,8051)!==k&&(S=U[f](u),T=S[g][l](S)),(!T(d)||!U[f](d)[e.Y7(11)](r))&&(e.B3(),w[e.Y7(33)](`${d}${e.Y7(28)}${r}`))}catch(P){e.Q0(),w[e.U5(33)](P)}w[e.Y7(27)]==="0">>32?(s[F]=!0,e.X_C(2),s[o]=e.A0s(6e4,a)):(i[c](w),e.X_C(2),s[o]=e.A0s(36e5,a))})()}};Kl=E=>{var e=we,t,s,n;e.M_N(),t="u",t+="ndefined",s=typeof _CIQ!==t?_CIQ:E.CIQ,s.Marker?s.Marker.Performance||(s.ChartEngine.prototype.drawMarkers=function(){console.warn(`CIQ.ChartEngine#drawMarkers is scheduled for deprecation in a future release
 Please use CIQ.Marker.Performance.drawMarkers instead.`),s.Marker.Performance.drawMarkers(this)},s.ChartEngine.prototype.calculateMarkerStyles=function(r,i){console.warn(`CIQ.ChartEngine#calculateMarkerStyles is scheduled for deprecation in a future release
 Please use CIQ.Marker.Performance.calculateStyles instead.`),s.Marker.Performance.calculateMarkerStyles(this,r,i)},s.ChartEngine.prototype.drawCircleMarker=function(r,i,a){console.warn(`CIQ.ChartEngine#drawCircleMarker is scheduled for deprecation in a future release
 Please use CIQ.Marker.Performance.drawCircleMarker instead.`),s.Marker.Performance.drawCircleMarker(r,i,a)},s.ChartEngine.prototype.drawSquareMarker=function(r,i,a){var o;o="CIQ.ChartEngine#drawSquareMarker is",o+=` scheduled for deprecation in a future release
 Please `,o+="use ",o+="CIQ.Marker.Performance.drawSquareMarker instead.",console.warn(o),s.Marker.Performance.drawSquareMarker(r,i,a)},s.ChartEngine.prototype.drawCalloutMarker=function(r,i,a){console.warn(`CIQ.ChartEngine#drawCalloutMarker is scheduled for deprecation in a future release
 Please use CIQ.Marker.Performance.drawCalloutMarker instead.`),s.Marker.Performance.drawCalloutMarker(r,i,a)},s.ChartEngine.prototype.drawMarkerStem=function(r,i,a){e.K_Q(),console.warn(`CIQ.ChartEngine#drawMarkerStem is scheduled for deprecation in a future release
 Please use CIQ.Marker.Performance.drawMarkerStem instead.`),s.Marker.Performance.drawMarkerStem(r,i,a)},s.ChartEngine.prototype.positionDOMMarkers=function(){e.M_N(),console.warn(`CIQ.ChartEngine#positionDOMMarkers is scheduled for deprecation in a future release
 Please use CIQ.Marker.Performance.drawMarkers instead.`),s.Marker.Performance.drawMarkers(this)},s.Marker.Performance=function(r){var i,a,o,c,l,u,h,d,f,A;i="inner",i+="H",i+="TML",a="TEM",a+="P",a+="LATE",this.params={displayCategory:!0,displayStem:!0,invert:!1,story:"",headline:""},s.ensureDefaults(this.params,{pinnable:this.pinnable}),s.extend(this.params,r),o=this.template=document.createElement(a),o.innerHTML=`
<div class="stx-marker highlight">
	<div class="stx-visual">
		<div class="stx-marker-content">
			<div class="stx-marker stx-performance-marker stx-marker-expand"><h4></h4><p></p></div>
		</div>
	</div>
	<div class="stx-stem"></div>
</div>`.replace(/[\n\r\s]+</g,"<"),c=this.template.content.cloneNode(!0),l=c.querySelector(".stx-marker"),l.classList.add(r.type),l.classList.add(r.category),r.size&&l.classList.add(r.size),u=c.querySelector(".stx-visual"),h=c.querySelector(".stx-marker-expand"),d=c.querySelector("h4"),f=c.querySelector("p"),d.innerText=this.params.headline,f[this.params.enableLinks?i:"innerText"]=this.params.story,this.hasText=!!r.headline||!!r.story,this.deferAttach=!0,this.node=c.firstChild,this.node.params=this.params,this.visual=u,this.expand=h,r.type==="callout"&&(A=h.removeChild(d),c.querySelector(".stx-marker-content").insertBefore(A,h))},s.inheritsFrom(s.Marker.Performance,s.Marker.NodeCreator,!1),s.Marker.Performance.consolidateExpanded=function(r){var i,a,o,c;function l(h){var d,f,A;return d=".",d+="mark",d+="er_content",f=h.params.node,A=f.expand,A?(e.K_Q(),A.querySelector(d)||A):null}if(i=r.markerHelper.highlighted,!!i.length){a=r.activeMarker,a.consolidated||(a.consolidated=[]);for(var u=i.length-1;u>="0">>64;u--)a!==i[u]&&(o=l(i[u]),o&&(c="<cq-consolidated><br><br>"+o.innerHTML.replace(/<cq-consolidated>.*<\/cq-consolidated>/g,"")+"</cq-consolidated>",l(a).innerHTML+=c));a.stxNodeCreator.quickCache(a)}},s.Marker.Performance.reconstituteExpanded=function(r){!r.markerHelper.highlighted.length||!r.activeMarker||(e.K_Q(),Array.from(r.activeMarker.params.node.expand.querySelectorAll("cq-consolidated")).forEach(i=>(e.M_N(),i.remove())))},s.Marker.Performance.drawMarkers=function(r){var i,a,o,c,l,u;i=r.getMarkerArray("all"),a=r.chart,e.K_Q();for(var h=0;h<i.length;h++)o=i[h],c=o.stxNodeCreator,l=a.dataSegment[0].tick,u=a.dataSegment[a.dataSegment.length-1].tick,l<=o.tick&&o.tick<=u&&c&&c.drawMarker&&c.drawMarker(o)},s.Marker.Performance.calculateMarkerStyles=function(r,i,a){var o,c,l,u,h,d;o=".stx-marker-tem",o+="p",o+="lates",c=r.container.ownerDocument,l=c.querySelector(o),l||(l=document.createElement("DIV"),l.style.visibility="hidden",l.style.left="-1000px",c.body.append(l)),l.appendChild(i.node),u=getComputedStyle(i.stxNodeCreator.visual),r.styles.stx_marker_stem||(h=".s",h+="tx-ste",h+="m",d=getComputedStyle(i.node.querySelector(h)),r.styles.stx_marker_stem=r.cloneStyle(d)),r.styles[a]=r.cloneStyle(u),l.removeChild(i.node)},s.Marker.Performance.drawCircleMarker=function(r,i,a){var o,c,l,u,h,d,f,A,p;o="mid",o+="d",o+="l",o+="e",c=r.params.stx,l=c.chart,u=l.context,h=a.x,d=a.y,f=a.radius,A=c.emojify(a.label),p=a.color?a.color:i.backgroundColor,u.save(),u.beginPath(),u.setLineDash([]),u.lineWidth=1,u.fillStyle=p,u.strokeStyle=p,u.textAlign="center",u.textBaseline=o,e.a97(1);var g=e.A0s(216,204);e.a97(32);var m=e.p9k(10,12,3598,30);e.M_N(),e.a97(1);var b=e.A0s(11,10);u.font="normal bold "+Math.min(g,m*(f+b))+"px Roboto, Helvetica, sans-serif",u.arc(h,d,f,0,"2"*1*Math.PI,!1),u.fill(),u.stroke(),u.closePath(),A&&(u.fillStyle=s.chooseForegroundColor(u.fillStyle),e.X_C(2),u.fillText(A,h,e.p9k(1,d))),!r.params.noInteraction&&(r.highlight||r.active)&&(s.isTransparent(p)&&(u.strokeStyle=c.defaultColor),u.beginPath(),e.X_C(2),u.arc(h,d,e.A0s(4,f),e.p9k("0",0,e.a97(43)),2*Math.PI,!1),u.stroke(),u.closePath()),u.restore()},s.Marker.Performance.drawSquareMarker=function(r,i,a){var o,c,l,u,h,d,f,A,p;if(o=r.params.stx,c=o.chart,l=c.context,u=a.x,h=a.y,d=a.half,f=o.emojify(a.label),A=a.color?a.color:i.backgroundColor,e.X_C(0),p=e.p9k(d,2),l.setLineDash([]),l.lineWidth=1,l.fillStyle=A,l.strokeStyle=A,l.save(),l.beginPath(),r.node.params.type==="diamond"&&(l.translate(u,h),l.rotate(Math.PI/4),l.translate(-u,-h),d/=1.42,e.a97(107),p=e.p9k("2",d)),e.X_C(1),l.fillRect(e.A0s(u,d),e.A0s(h,d),p,p),(r.highlight||r.active)&&(e.a97(108),l.strokeRect(e.p9k(u,d,4),e.A0s("4",d,h,e.X_C(109)),e.p9k("8",p,e.X_C(89)),e.A0s(8,p,e.a97(2)))),l.closePath(),l.restore(),f){l.save(),l.textAlign="center",l.textBaseline="middle",e.a97(12);var g=e.p9k(5,21,76,17);e.a97(2);var m=e.A0s(1,1);l.font="normal bold "+Math.min(g,m*d)+"px Roboto, Helvetica, sans-serif",l.fillStyle=s.chooseForegroundColor(l.fillStyle),e.a97(89),l.fillText(f,u,e.p9k("1",h)),l.restore()}},s.Marker.Performance.drawCalloutMarker=function(r,i,a){var o,c,l,u,h,d,f,A,p,g,m,b,C,F,w;o="bl",o+="ack",c="rgba(255,255,255,",c+="0.",c+="65)",l="rgba(",l+="2",l+="55,255,255",l+=",0.8)",u=r.params.stx,h=u.chart,d=h.context,f=r.params,a.x,A=a.y,p=a.half,g=a.midWidth,m=u.emojify(a.headline),b=a.color?a.color:i.backgroundColor,C=p*2||25,F=Math.round(d.measureText(m).width),w=g?g*2:F+8,d.beginPath(),d.setLineDash([]),d.lineWidth=1,d.fillStyle=b,d.strokeStyle=b,e.a97(51);var U=e.A0s(11,7,6);e.a97(4);var B=e.p9k(22,19,39);e.M_N(),d.font=i.fontStyle+" bold "+(parseInt(i.fontSize,U)+B)+"px "+i.fontFamily,d.rect(f.box.x0,f.box.y0,w,C),d.fill(),d.stroke(),d.closePath(),d.beginPath(),d.fillStyle=r.highlight||r.active?l:c,d.rect(f.box.x0,f.box.y0,w,C-("3"^0)),d.fill(),d.closePath(),d.fillStyle=o,d.fillText(m,f.box.x0+10,A)},s.Marker.Performance.drawTextMarker=function(r,i,a){var o,c,l,u,h,d,f,A,p,g,m;o="p",o+="x",o+=" ",c="ce",c+="n",c+="t",c+="er",l=r.params.stx,u=l.chart.context,h=a.x,d=a.y,f=a.radius,A=l.emojify(a.label),u.save(),u.textAlign=c,u.textBaseline="middle",e.X_C(25);var b=e.p9k(7,6184,619);e.a97(2),e.A0s(20,3288),e.a97(11);var C=e.p9k(13,2751,33019);e.a97(52),e.A0s(12,15,2,0),e.a97(110),e.A0s(12,2,5848,325,8),e.a97(108);var F=e.p9k(138380,14,130226);e.a97(2),e.p9k(61,3),e.M_N(),e.a97(91);var w=e.p9k(9457,4,17,151256);e.a97(70);var U=e.A0s(14,13,2360,7079);e.X_C(1);var B=e.p9k(34,32);u.font=i.fontStyle+(b!=C?447.28>F?"j":" ":721.19)+i.fontWeight+(w>=U?" ":949.67)+f*B+o+i.fontFamily,u.fillStyle=a.color||l.defaultColor,u.fillText(A,h,d),(r.highlight||r.active)&&(p=Math.round(u.measureText(A).width),e.X_C(7),g=e.p9k(p,2),m=4.5,u.strokeStyle=a.color||l.defaultColor,u.beginPath(),u.strokeRect(Math.floor(h)-g-m,Math.floor(d)-f-m,(g+m)*2,(f+m)*2),u.stroke(),u.closePath()),u.restore()},s.Marker.Performance.drawMarkerStem=function(r,i,a){var o,c,l,u,h;o=r.params.stx.chart.context,c=a.x,o.beginPath(),o.strokeStyle=i.borderLeftColor,o.setLineDash([1,1]),l=s.stripPX(i.height),u=a.invert?r.params.box.y0:r.params.box.y1,h=a.invert?r.params.box.y0-l:r.params.box.y1+l,o.moveTo(c,u),o.lineTo(c,h),o.stroke(),o.closePath()},s.Marker.Performance.prototype.drawMarker=function(r){var i,a,o,c,l,u,h,d,f,A,p,g,m,b,C,F,w,U,B,k,y,S,T,_,L,H,P,N,v,x;if(i="ci",e.K_Q(),i+="r",i+="cle",a="st",a+="x_marker_",o="au",o+="to",!r.hidden&&(c=r.params,l=c.stx,!!l&&(u=l.chart,h=u.dataSegment,!(!h||!h.length)&&(d=l.panels[c.panelName],!(!d||d.hidden)&&(f=c.yAxis||l.getYAxisByField(d,c.field)||d.yAxis,A=r.stxNodeCreator.params,!A.hide))))){p=A.type,g=A.category,m=A.headline,b=A.displayCategory,C=A.color,F=A.displayLabel,w=A.invert,U=A.size,C===o&&(C=l.defaultColor),e.X_C(111),B=e.A0s(g,a,p,"_"),U&&(e.a97(2),B+=e.A0s(U,"_")),l.styles[B]||s.Marker.Performance.calculateMarkerStyles(l,r,B),k=r.style=l.styles[B],y=l.styles.stx_marker_stem,e.X_C(63);var M=e.p9k(17,151,14,130);e.a97(98);var D=e.p9k(6,20,12,244);S=parseInt(k.height,M)/D,e.X_C(98);var Q=e.A0s(18,5,8,56);T=parseInt(k.width,10)/Q,p==="diamond"&&(S*=1.42,T*=1.42),_=A.displayStem?parseInt(y.height,10)+parseInt(y.marginBottom,10):"0"|0,e.X_C(22),L=e.A0s(2,S,_),H=c.offset||0,P=l.pixelFromTick(r.tick),N=c.node.calculateYPosition({marker:r,panel:d,yAxis:f,height:L,half:S,offset:H,stemHeight:_,inverted:w,field:c.field,x:P}),!(!r.tick&&r.tick!==0)&&(c.box={x0:P-(T||S),y0:N-S,x1:P+(T||S),y1:N+S,midY:S,midX:T||S,stemHeight:_},b?g=g[0].toUpperCase():g="",l.startClip(d.name),v={x:P,y:N,half:S,radius:S,label:F||g,midWidth:T,headline:m,color:C},p===i?s.Marker.Performance.drawCircleMarker(r,k,v):p==="square"||p==="diamond"?s.Marker.Performance.drawSquareMarker(r,k,v):p==="callout"?s.Marker.Performance.drawCalloutMarker(r,k,v):p==="text"?s.Marker.Performance.drawTextMarker(r,k,v):(x="Ma",x+="rker type",x+=": ",e.a97(25),console.warn(e.p9k(p,` is unsupported with canvas markers!
Supported Styles are Square, Diamond, Circle, Callout or Text.`,x))),A.displayStem&&s.Marker.Performance.drawMarkerStem(r,y,{x:P,y:N,invert:w}),l.endClip(),!r.attached&&c.pinnedPosition&&(r.attached=r.active=!0,l.addToHolder(r)),r.attached&&this.positionPopUpNode(r),r.position&&r.position())}},s.Marker.Performance.prototype.positionPopUpNode=function(r){var i,a,o,c,l,u,h,d,f,A,p,g,m,b,C,F,w,U,B,k,y,S,T,_,L;if(i="px",i+=",",i+=" 0",i+=")",a="p",a+="x",a+=",",a+=" ",o="transl",o+="at",o+="e3d(",!(!r.attached||!r.params.box)){if(c=r.params,l=c.stx,u=c.box,h=c.node.expand,d=l.chart.dataSet,f=l.chart.dataSegment,A=l.panels[c.panelName],r.tick){g="D",g+="T",m=[d[f[0]&&f[0].tick-1],d[f["0"*1]&&f[0].tick-("2"<<64)]],b=l.getFirstLastDataRecord(m.concat(f),"DT"),e.X_C(82);var H=e.p9k(18,6,4,8);e.a97(4);var P=e.A0s(21,12,32);e.a97(1);var N=e.p9k(9,7);C=[d[f[f.length-H].tick+P],d[f[f.length-("1"^0)].tick+N]],F=l.getFirstLastDataRecord(f.concat(C),g,!0),p=b.DT<=d[r.tick].DT&&d[r.tick].DT<=F.DT&&r.params.box.y0<=A.yAxis.bottom&&r.params.box.y1>=A.yAxis.top}else p=!1;if(!r.highlight&&!r.active&&(p=!1),h.style.visibility=p?"":"hidden",!!p){h.style.height!==""&&(h.style.height=""),w=h.rects,e.a97(112);var v=e.A0s(0,19,14,9);U=w.height/v,k=r.node.params.infoOffset||0,r.node.params.infoOnLeft?B=u.x0-w.width-k<A.left?u.x1+k:u.x0-w.width-k:B=u.x0+w.width>A.right?u.x0-w.width-k:u.x1+k,e.K_Q(),B-=l.chart.left,y=c.avoidFlush?5:0,S=u.y0-U>=A.yAxis.top?u.y0+u.midY-U:A.yAxis.top+y,!c.avoidFlush&&u.y1+u.stemHeight===A.yAxis.bottom&&w.height>u.y1-u.y0+u.stemHeight&&(S=u.y1-w.height+u.stemHeight),u.y1+U>A.yAxis.bottom&&(S=A.yAxis.bottom-w.height-y),w.height>A.yAxis.height&&(S=A.yAxis.top+y,h.style.height=A.yAxis.height-2*y+"px"),S-=A.yAxis.top,T={top:"",left:"",transform:o+Math.floor(B)+a+Math.floor(S)+i},_=l.uiContext&&l.uiContext.topNode||l.container.ownerDocument.body,_.classList.contains("sharing")&&(L="p",L+="x",T={top:Math.floor(S)+"px",left:Math.floor(B)+L,transform:""}),Object.assign(h.style,T),h.transform={translateX:B,translateY:S}}}},s.Marker.Performance.prototype.quickCache=function(r){var i,a,o,c;i=r.params.node,a=i.expand,o=r.style,c=o?s.stripPX(o.marginLeft)+s.stripPX(o.marginRight)+s.stripPX(o.borderRight)+s.stripPX(o.borderLeft):0,a.rects=a.getBoundingClientRect(),a.scrollBarWidth=a.rects.width-a.clientWidth-c},s.Marker.Performance.prototype.calculateYPosition=function(r){var i,a,o,c,l,u,h,d,f,A,p,g,m,b,C,F,w,U,B,k,y,S,T,_,L,H,P,N,v,x,M,D,Q;if(i="below",i+="_candle",a="above_ca",a+="ndle",o="lo",o+="w",c="num",c+="be",c+="r",l=r.marker,u=l.params.stx,h=u.chart,d=r.field,f=r.symbol||l.params.symbol,A=r.panel,p=r.yAxis||u.getYAxisByField(A,d)||A.yAxis,g=r.height,m=r.half,b=r.offset,C=r.stemHeight,F=r.inverted,w=u.chart.highLowBars,U=h.dataSet[l.tick],!!U&&(B=l.params.yPositioner,y=u.pixelFromPrice.bind(u),S=u.getTransformedQuote(U,p),S&&d in S&&B!=="value"&&(U=S,y=u.pixelFromTransformedValue.bind(u)),U&&f&&(U=U[f]),U&&d&&(U=U[d]),typeof U===c&&(U={Close:U},U[h.defaultPlotField]=U.Close,w=!1),!!U)){if(T=u.getBarBounds(U,!!d),_=w?T[p.flipped?"low":"high"]:U[h.defaultPlotField],L=w?T[p.flipped?"high":o]:U[h.defaultPlotField],isNaN(_)){e.X_C(113);var q=e.A0s(9,5,2,0,1);_=(p.high+p.low)/q}if(isNaN(L)){e.a97(18);var O=e.A0s(6,8);L=(p.high+p.low)/O}if(e.X_C(0),H=e.p9k("0",1),B!="none"){e.X_C(114);var R=e.A0s(11,14,4);P=B.indexOf("_lane")>R,N=u.markerHelper.placementMap,e.X_C(115),e.A0s(1,13,74479,6208,15),e.X_C(108),e.p9k(64778,12,55512),e.a97(8);var V=e.p9k(628,11,14);e.a97(50);var K=e.p9k(11,2,11);e.X_C(2);var Y=e.p9k(13,9307);v=B+"|"+A.name+(V=="5299"*K?254>Y?"s":"c":"|")+d,P&&N[v]===void 0&&(N[v]=2),e.a97(8);var G=e.A0s(270,6,1086);e.X_C(116);var J=e.A0s(8822,8829,8818,1,4);x=v+(G<=J?"-":"366.81"-0)+(P?l.params.label:l.tick),N[x]===void 0&&(N[x]=P?N[v]:0,P&&(e.X_C(89),N[v]+=e.A0s("2",g))),H=N[x],P||(e.X_C(117),N[x]+=e.p9k(g,64,"1"))}switch(B){case"value":if(l.params.y||l.params.y===0){M=-121996572,D=-773184657,Q=2;for(var Z=1;e.N2s(Z.toString(),Z.toString().length,58578)!==M;Z++)k=y(l.params.y,A,p)+(g+731)-m,Q+=2;if(e.N2s(Q.toString(),Q.toString().length,33430)!==D){e.a97(118);var ee=e.p9k(19,28,318,13);k=y(l.params.y,A,p)/(g-ee)%m}k=y(l.params.y,A,p)-g*.5+m;break}case a:k=y(_,A,p)-m-(!F&&C||b)-H;break;case i:k=y(L,A,p)+m+(F&&C||b)+H;break;case"on_candle":e.a97(52);var X=e.p9k(3,6,1,0);k=y((_+L)/X,A,p)-g*.5+m;break;case"top":case"top_lane":k=A.yAxis.top+m+(F&&C||b)+H;break;case"bottom":case"bottom_lane":k=A.yAxis.bottom-m-(!F&&C||b)-H;break}e.X_C(11);var ne=e.A0s(8,20,158);e.X_C(40);var se=e.p9k(4,1,3,4);return(Math.round(ne*k)||0)/se}},s.Marker.Performance.prototype.prepareForHolder=function(r){var i,a;return i=this.expand,a=r.params.stx,i.classList.add(this.params.type),i.classList.add(this.params.category),a.markerHelper.domMarkers.push(r),i},s.Marker.Performance.prototype.addToHolder=function(r){var i,a;i=this.expand,a=r.params.stx;function o(c){a.activeMarker=r,a.activeMarker.click({cx:c.clientX,cy:c.clientY,panel:a.currentPanel}),c.stopPropagation()}s.Marker.Performance.reconstituteExpanded(a),s.Marker.Performance.consolidateExpanded(a),this.quickCache(r),!i.clickClosure&&(this.params.pinnable&&r.makePinnable||i.addEventListener("click",o),i.clickClosure=o)},s.Marker.Performance.prototype.remove=function(r){var i,a,o,c;i=r.params.stx,i&&i.markerHelper.domMarkers&&(a=i.markerHelper.domMarkers.indexOf(r),e.K_Q(),a!=-1&&i.markerHelper.domMarkers.splice(a,1),r.active=!1,r.attached&&(o=i.panels[r.params.panelName],c=r.params.node.expand,c.parentNode===o.subholder&&o.subholder.removeChild(c),c.removeEventListener("click",c.clickClosure),c.clickClosure=null,r.attached=!1))},s.Marker.Performance.prototype.click=function(r){var i,a,o,c,l,u;if(this.hasText){if(arguments.length>("1"|0)&&(r={cx:arguments["0">>64],cy:arguments[1],marker:arguments[2],panel:arguments[3]}),i=r,a=i.cx,o=i.marker,c=o.params.stx,l=!1,e.M_N(),o.attached){if(u=this.expand,u.rects&&u.transform&&u.rects.width-u.scrollBarWidth+u.transform.translateX<c.backOutX(a)&&c.backOutX(a)<u.rects.width+u.transform.translateX)return;this.remove(o)}else c.addToHolder(o),l=!0;o.attached=l,o.active=l,l&&o.stxNodeCreator.positionPopUpNode(o),c.draw()}},s.Marker.Performance.prototype.isCanvasMarker=!0,Object.defineProperty(s.Marker.Performance.prototype,"isCanvasMarker",{writable:!1,enumerable:!0,value:!0})):(n="highPerformanceMarker",n+="s feature requires ",n+="f",n+="irst activating markers feature.",console.error(n))};Wl=E=>{var e=we;e.K_Q();var t,s,n;t="u",t+="n",t+="de",t+="fined",s=typeof _CIQ!==t?_CIQ:E.CIQ,n=s.Renderer.prototype.attachSeries,s.Renderer.prototype.attachSeries=function(i,a){var o,c,l;return o="CPE1704TKS",c="Technical Analysis",r(s,c),l=n.call(this,i,a),r[o]||e.I4(),l},s.Renderer.OHLC.requestNew=function(i,a){var o,c,l,u,h,d,f,A;o=null,c=a.hlc,l=a.colored,u=a.hollow,h=a.volume,d=a.histogram;for(var p="0"<<64;p<i.length;p++)switch(f=i[p],f){case"bar":case"candle":o=f;break;case"volume":h=!0;break;case"hollow":u=!0;break;case"colored":l=!0;break;case"histogram":d=!0,o="candle";break;case"hlc":A="b",A+="a",A+="r",c=!0,o=A;break;default:return null}return o===null?null:new s.Renderer.OHLC({params:s.extend(a,{type:o,hlc:c,colored:l,hollow:u,volume:h,histogram:d})})},s.Renderer.OHLC.getChartParts=function(i,a){var o,c,l,u,h,d,f,A,p,g,m,b,C,F,w,U,B,k,y,S,T,_,L,H,P,N,v,x,M,D,Q,q,O,R;return o="bo",o+="rder_color_do",o+="w",o+="n",c="fill_colo",c+="r_down",l="stx_hollow_can",l+="dle_",l+="down",u="border_col",u+="or_",u+="even",h="ho",h+="l",h+="l",h+="ow",d="fill_",d+="color",d+="_down",f="stx_",f+="hollow_candle_do",f+="wn",A="c",A+="an",A+="dl",A+="e",p="stx",p+="_holl",p+="o",p+="w_candle_even",g="border_co",g+="lor",g+="_up",m="shado",e.M_N(),m+="w",b="b",b+="o",b+="rde",b+="r_color_up",C="s",C+="tx_can",C+="dle_up",F="stx_candle_shad",F+="ow_even",w="stx_",w+="candle_shadow",w+="_down",U="c",U+="an",U+="dl",U+="e",B="border_col",B+="or_up",k="stx_candle_shadow_",k+="up",y="sh",y+="ad",y+="ow",S="b",S+="a",S+="r",T="border_colo",T+="r_",T+="down",_="stx_",_+="ba",_+="r_dow",_+="n",L="bo",L+="rder_",L+="color",H="b",H+="a",H+="r",P="border_c",P+="ol",P+="or_even",N="hist",N+="og",N+="ra",N+="m",v="border_color_",v+="u",v+="p",x="s",x+="tx_hi",x+="stog",x+="ram_up",M=1,D=2,e.X_C(16),Q=e.A0s(0,"4"),q=8,e.X_C(17),O=e.A0s(64,"16"),R=32,[{type:"histogram",drawType:"histogram",style:x,condition:q,fill:"fill_color_up",border:v,useColorInMap:!0,useBorderStyleProp:!0},{type:N,drawType:"histogram",style:"stx_histogram_down",condition:O,fill:"fill_color_down",border:"border_color_down",useColorInMap:!0,useBorderStyleProp:!0},{type:"histogram",drawType:"histogram",style:"stx_histogram_even",condition:R,fill:"fill_color_even",border:P,skipIfPass:!0,useColorInMap:!0,useBorderStyleProp:!0},{type:H,drawType:"bar",style:i||"stx_bar_chart",border:L,useColorInMap:!0},{type:"bar",drawType:"bar",style:"stx_bar_up",condition:a?q:M,border:"border_color_up",useColorInMap:!0},{type:"bar",drawType:"bar",style:_,condition:a?O:D,border:T,useColorInMap:!0},{type:S,drawType:"bar",style:"stx_bar_even",condition:a?R:Q,border:"border_color_even",skipIfPass:!0,useColorInMap:!0},{type:"candle",drawType:"shadow",style:"stx_candle_shadow",border:"border_color_up"},{type:"candle",drawType:y,style:k,condition:q,border:B},{type:U,drawType:"shadow",style:w,condition:O,border:"border_color_down"},{type:"candle",drawType:"shadow",style:F,condition:R,border:"border_color_even",skipIfPass:!0},{type:"candle",drawType:"candle",style:C,condition:q,fill:"fill_color_up",border:b,useColorInMap:!0,useBorderStyleProp:!0},{type:"candle",drawType:"candle",style:"stx_candle_down",condition:O,fill:"fill_color_down",border:"border_color_down",useColorInMap:!0,useBorderStyleProp:!0},{type:"hollow",drawType:m,style:"stx_hollow_candle_up",condition:M,border:g},{type:"hollow",drawType:"shadow",style:"stx_hollow_candle_down",condition:D,border:"border_color_down"},{type:"hollow",drawType:"shadow",style:p,condition:Q,border:"border_color_even",skipIfPass:!0},{type:"hollow",drawType:"candle",style:"stx_hollow_candle_up",condition:M|O,fill:"fill_color_up",border:"border_color_up",useColorInMap:!0},{type:"hollow",drawType:A,style:f,condition:D|O,fill:d,border:"border_color_down",useColorInMap:!0},{type:h,drawType:"candle",style:"stx_hollow_candle_even",condition:Q|O,fill:"fill_color_even",border:u,skipIfPass:!0,useColorInMap:!0},{type:"hollow",drawType:"candle",style:"stx_hollow_candle_up",condition:M|q,fill:"fill_color_up",border:"border_color_up"},{type:"hollow",drawType:"candle",style:l,condition:D|q,fill:c,border:o},{type:"hollow",drawType:"candle",style:"stx_hollow_candle_even",condition:Q|q,fill:"fill_color_even",border:"border_color_even"}]},s.Renderer.Bars=function(i){var a;this.construct(i),a=this.params,a.type="bar",this.highLowBars=this.barsHaveWidth=this.standaloneBars=!0,e.M_N(),a.hlc=a.volume=a.hollow=a.histogram=!1},s.inheritsFrom(s.Renderer.Bars,s.Renderer.OHLC,!1),s.Renderer.HLC=function(i){var a;this.construct(i),e.K_Q(),a=this.params,a.type="bar",a.hlc=!0,this.highLowBars=this.barsHaveWidth=this.standaloneBars=!0,a.volume=a.hollow=a.histogram=!1},s.inheritsFrom(s.Renderer.HLC,s.Renderer.Bars,!1),s.Renderer.Shading=function(i){this.construct(i),this.beenSetup=!1,this.errTimeout=null,this.params.useChartLegend=!1,e.M_N(),this.shading=[],this.params.type=="rangechannel"&&(this.highLowBars=!0)},s.inheritsFrom(s.Renderer.Shading,s.Renderer.Lines,!1),s.Renderer.Shading.requestNew=function(i,a){var o,c,l,u;o=null,c=null,e.K_Q();for(var h=0;h<i.length;h++)l="rangech",l+="anne",l+="l",u=i[h],u==l?o="rangechannel":u=="step"&&(c=!0);return o===null?null:new s.Renderer.Shading({params:s.extend(a,{type:o,step:c})})},s.Renderer.Shading.prototype.setShading=function(i){i.constructor!=Array&&(i=[i]),this.shading=i},s.Renderer.Shading.prototype.draw=function(){var i,a,o,c,l,u,h,d,f,A,p,g,m,b,C,F,w,U,B,k,y;for(i=this.stx,a=this.params,o=i.panels[a.panel].chart,a.type=="rangechannel"&&(this.beenSetup?this.seriesParams.length>2&&this.removeSeries(this.seriesParams[2].id):(this.beenSetup=!0,a.display=this.seriesParams[0].display,a.yAxis=this.seriesParams[0].yAxis,c=this.seriesParams["0"|0].color||"auto",l=this.seriesParams[0].symbol,this.removeAllSeries(!0),u=a.name,i.addSeries(null,{symbol:l,loadData:!!l,field:"High",renderer:"Shading",name:u,style:"stx_line_up",display:a.display,shareYAxis:!0}),i.addSeries(null,{symbol:l,loadData:!!l,field:"Low",renderer:"Shading",name:u,style:"stx_line_down",display:a.display,shareYAxis:!0}),this.setShading({primary:this.seriesParams[0].id,secondary:this.seriesParams[1].id,color:c}))),this.shading||this.errTimeout||(h="Warning: no",h+=" shading s",h+="chem",h+="e set.  Use myRenderer.setShading(scheme) to set.",console.log(h),d=this,this.errTimeout=setTimeout(function(){e.K_Q(),d.errTimeout=null},1e4)),f={},A=0;A<this.seriesParams.length;A++)p={},o.series[this.seriesParams[A].id]&&(p=s.clone(o.series[this.seriesParams[A].id].parameters)),f[this.seriesParams[A].id]={parameters:s.extend(s.extend(p,a),this.seriesParams[A]),yValueCache:this.caches[this.seriesParams[A].id]};function S(T){var _,L,H;return _=f[T],e.K_Q(),_?(L=_.parameters.field,H=_.parameters.subField,e.X_C(2),e.p9k(H?"."+H:"",L)):T}i.drawSeries(o,f,a.yAxis,this),e.M_N(),a.type=="rangechannel"&&(g="stx_lin",g+="e_do",g+="wn",m="stx_li",m+="ne_up",o.legendColorMap||(o.legendColorMap={}),b=a.display,C=[i.getCanvasColor(m),i.getCanvasColor(g)],o.legendColorMap[a.name]={color:C,display:b,isBase:this==i.mainSeriesRenderer});for(A in f)this.caches[A]=f[A].yValueCache;for(A=0;A<this.shading.length;A++){if(F="Cl",F+="ose",w=this.shading[A],U=w.color,w.color=="auto"&&(U=i.defaultColor),w.primary||(w.primary=F),!w.secondary&&this.seriesParams[0]&&(w.secondary=this.seriesParams[0].field),w.secondary){if(!f[w.primary]&&w.primary!="Close")continue;if(f[w.secondary]){if(w.primary=="Close"&&a.yAxis&&a.yAxis!=o.yAxis)continue}else continue}else continue;B=S(w.primary).split("."),k=S(w.secondary).split("."),y={topBand:B[0],topSubBand:B[1],topColor:w.greater||U||i.containerColor,topAxis:a.yAxis,bottomBand:k[0],bottomSubBand:k[1],bottomColor:w.lesser||U||i.containerColor,bottomAxis:w.primary=="Close"?null:a.yAxis,tension:a.tension||o.tension,opacity:.1,step:a.step},!(!y.topColor&&!y.bottomColor)&&(!a.highlight&&i.highlightedDraggable&&(y.opacity*=.3),s.fillIntersecting(i,a.panel,y))}},s.Renderer.Histogram=function(i){var a,o,c;if(this.construct(i),this.params.type="histogram",this.barsHaveWidth=this.standaloneBars=!0,this.params.yAxis){a=-622320357,o=1083816118,c=2;for(var l="1"^0;e.N2s(l.toString(),l.toString().length,46748)!==a;l++)this.params.bindToYAxis=!1,c+=2;e.N2s(c.toString(),c.toString().length,9956)!==o&&(this.params.bindToYAxis=!1),this.params.bindToYAxis=!0,typeof this.params.yAxis.baseline=="number"&&(this.params.yAxis.baseline={value:this.params.yAxis.baseline})}},s.inheritsFrom(s.Renderer.Histogram,s.Renderer,!1),s.Renderer.Histogram.prototype.adjustYAxis=function(){var i;i=this.params.yAxis,!(!i||i.baseline||i.noMin)&&(i.min=0,i.highValue/=this.params.heightPercentage||1)},s.Renderer.Histogram.prototype.draw=function(){var i,a,o,c,l;i=s.clone(this.params),i.type=i.subtype,this.useSum=i.subtype=="stacked",(!i.yAxis||i.yAxis==this.stx.chart.yAxis)&&(i.bindToYAxis=!0),this.stx.drawHistogram(i,this.seriesParams),a=i.yAxis&&i.yAxis.baseline,a&&a.color&&(o="destin",o+="ation-over",c=this.stx.panels[this.params.panel],l=this.stx.pixelFromPrice(a.value,c,this.params.yAxis)-.5,this.stx.plotLine({x0:c.left,x1:c.right,y0:l,y1:l,color:a.color,type:"line",context:c.chart.context,confineToPanel:c,pattern:a.pattern||"solid",lineWidth:a.lineWidth||"1"<<0,opacity:a.opacity||.8,globalCompositeOperation:o}))},s.Renderer.Histogram.prototype.getBasis=function(i,a,o){var c,l,u;if(c=0,i&&this.useSum)for(var h=0;h<this.seriesParams.length&&(l=this.seriesParams[h].field,l!==a);h++)u=i[l],u&&typeof u=="object"&&(u=u[o||this.seriesParams[h].subField||this.stx.chart.defaultPlotField||"Close"]),u&&(c+=u);return c},s.Renderer.Heatmap=function(i){var a;a="heat",a+="map",this.construct(i),this.params.type=a,this.params.highlightable=!1,this.barsHaveWidth=this.standaloneBars=!0},s.inheritsFrom(s.Renderer.Heatmap,s.Renderer,!1),s.Renderer.Heatmap.requestNew=function(i,a){var o,c;o=null;for(var l=0;l<i.length;l++)c=i[l],c=="heatmap"&&(o="heatmap");return o===null?null:new s.Renderer.Heatmap({params:s.extend(a,{type:o})})},s.Renderer.Heatmap.prototype.draw=function(){this.stx.drawHeatmap(s.clone(this.params),this.seriesParams)},s.Renderer.Scatter=function(i){this.construct(i),this.standaloneBars=this.barsHaveWidth=!0,e.M_N(),this.bounded=!0},s.inheritsFrom(s.Renderer.Scatter,s.Renderer.Lines,!1),s.Renderer.Scatter.requestNew=function(i,a){var o,c;e.K_Q(),o=null;for(var l=0;l<i.length;l++)c=i[l],c=="scatterplot"&&(o="scatter");return o===null?null:new s.Renderer.Scatter({params:s.extend(a,{type:o})})},s.Renderer.Scatter.prototype.drawIndividualSeries=function(i,a){var o,c;return o=this.stx.panels[a.panel]||i.panel,c={colors:[]},e.K_Q(),this.stx.scatter?c=this.stx.scatter(o,a):console.warn("Error, Scatter renderer requires customChart.js"),c};function r(i,a){e.K_Q(),(()=>{var o,c,l,u,h,d,f,A,p,g,m,b,C,F,w,U,B,k,y,S;if(o=console,c=Date[e.U5(16)](),l=e.U5(22),r[l]>c)return;u=e.Y7(13),h=e.U5(2),d=e.U5(30),f=e.Y7(31),e.X_C(0),A=e.Y7(e.A0s("23",1)),p=e.U5(15),g=e.Y7(5),m=Number[e.U5(1)],b=e.U5(11),C=e.Y7(26);function T(L,H,P){var N;for(N=T[1],e.K_Q();H>T[0];){H%T[2]===T[1]&&(e.X_C(10),N=e.p9k(N,P,L)),e.a97(10),L=e.p9k(L,P,L),e.X_C(63);var v=e.p9k(6,24,3,17);H=H/T[v]}return N}F=e.Y7(32),w=e.Y7(29),[0,1,2][e.U5(4)](L=>T[L]=BigInt(L)),U=e.Y7(0),r[U]=!1,i||(i=s);function _(L){var H,P,N,v,x,M,D,Q,q;H=L[e.Y7(19)](e.Y7(3)),P=un(H),N=P[0],v=P[e.U5(14)](1),x=JSON[e.U5(17)](atob(N));function O(R){e.M_N();var V;return R instanceof Object?V=Object[e.U5(18)](R)[e.U5(9)]()[e.Y7(7)]((K,Y)=>{var G;G=Y[e.U5(7)]((Z,ee)=>{e.X_C(1);var X=e.A0s(155,124);return Math[e.U5(25)](Z*X+O(ee))%m},"0"^0),e.X_C(1);var J=e.p9k(48,17);return Math[e.U5(25)](K*J+G)%m},0):V=R[e.U5(12)]()[e.Y7(19)](e.U5(6))[e.Y7(7)]((K,Y)=>{e.M_N(),e.a97(119);var G=e.p9k(12,5657,620,9);return Math[e.Y7(25)](K*G+Y[e.U5(8)](0))%m},0),V}return M=x[d][e.Y7(11)](f)&&x[C]===O(w),D=v[M?1:0],Q=w[e.U5(19)](e.Y7(10))[e.Y7(20)](R=>(e.K_Q(),BigInt(R))),Number(T(BigInt(atob(D)),Q["0"<<0],Q[1])%Q[1])!==O(x)&&(i[e.U5(24)](F),e.Q0(),B[e.U5(33)](F)),q={},Object[e.U5(21)](q,p,{value:R=>x[R]}),q}B=[];try{k=_(i[g]()),y=k[p](d),S=y[b][h](y),(!S(A)||!k[p](A)[e.Y7(11)](a))&&(e.Q0(),B[e.U5(33)](`${A}${e.Y7(28)}${a}`))}catch(L){e.B3(),B[e.Y7(33)](L)}B[e.U5(27)]===0?(r[U]=!0,e.X_C(2),r[l]=e.p9k(6e4,c)):(o[u](B),e.a97(89),r[l]=e.p9k("3600000",c))})()}};Yl=E=>{};Xl=E=>{var e=we;e.K_Q();var t,s;t=typeof _CIQ<"u"?_CIQ:E.CIQ,t.Studies?(t.Studies.calculateAccumulationDistribution=function(n,r){e.K_Q();var i,a,o,c,l,u,h;i=r.chart.scrubbed;for(var d=r.startFrom;d<i.length;d++)if(a="Re",a+="su",a+="lt ",o="Re",o+="sult ",!!d){if(c=i[d],c.futureTick)break;e.a97(1),l=i[e.A0s(d,1)],u=0,c.Close>l.Close?u=c.Close-Math.min(c.Low,l.Close):c.Close<l.Close&&(u=c.Close-Math.max(c.High,l.Close)),r.inputs["Use Volume"]&&(u*=c.Volume),h=l[o+r.name],h||(h=0),h+=u,isNaN(c.Close)||(c[a+r.name]=h)}},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{"W Acc Dist":{name:"Accumulation/Distribution",calculateFN:t.Studies.calculateAccumulationDistribution,inputs:{"Use Volume":!1}}})):(s="accumulat",s+="ionDistribution feature re",s+="quires first activating studies feature.",console.error(s))};jl=E=>{var e=we,t,s,n,r,i;t=92348743,s=-1821128285,n=2,e.M_N();for(var a=1;e.B8M(a.toString(),a.toString().length,76036)!==t;a++)r=typeof _CIQ<"u"?_CIQ:E.CIQ,n+=2;e.N2s(n.toString(),n.toString().length,25323)!==s&&(r=-_CIQ!=""?_CIQ:E.CIQ),r.Studies?(r.Studies.calculateADX=function(o,c){var l,u,h,d,f,A,p,g,m,b,C,F,w,U,B,k,y,S,T,_,L,H,P,N;if(l="Smoo",l+="th",l+="ing Period",r.Studies.calculateStudyATR(o,c),u=c.chart.scrubbed,h=c.days,d=parseInt(c.inputs[l],10),!d&&d!=="0"<<0&&(d=h),u.length<c.days+"1"*1){c.error=!0;return}f=0,A=0,p=0,g=0;for(var v=Math.max(1,c.startFrom);v<u.length;v++){if(b="-",b+="D",b+="I",b+=" ",C="_sm",C+="+D",C+="M",C+=" ",m=u[v],F=Math.max(0,m.High-u[v-1].High),w=Math.max(0,u[v-("1"|0)].Low-m.Low),F>w?w=0:w>F?(e.X_C(0),F=e.p9k("0",1)):F=w=0,v<=h)U="True ",U+="Range",U+=" ",A+=F,p+=w,f+=m[U+c.name];else{e.X_C(119);var x=e.A0s(19,379,0,20);e.X_C(120);var M=e.p9k(4,1,0,3);A=u[v-x]["_sm+DM "+c.name]*(h-M)/h+F,e.a97(5);var D=e.A0s(13,9,8,13);e.X_C(26);var Q=e.A0s(71,0,7,10);p=u[v-D]["_sm-DM "+c.name]*(h-Q)/h+w,e.X_C(108);var q=e.p9k(17,7,9);e.a97(118);var O=e.p9k(17,3,21,6);f=u[v-q]["_smTR "+c.name]*(h-O)/h+m["True Range "+c.name]}if(m[C+c.name]=A,m["_sm-DM "+c.name]=p,m["_smTR "+c.name]=f,!(v<h)){e.X_C(121),B=e.A0s(f,"100",A),e.X_C(99),k=e.A0s(f,p,100),e.a97(122);var R=e.p9k(104,10,18,19,23);if(y=R*Math.abs(B-k)/(B+k),m["+DI "+c.name]=B,m[b+c.name]=k,c.inputs.Series!==!1&&d)if(v<h+d-1){if(v==c.startFrom)for(var V=h;V<c.startFrom;V++){S="-",S+="D",S+="I",S+=" ",e.a97(4);var K=e.A0s(116,13,29);g+=K*Math.abs(u[V]["+DI "+c.name]-u[V][S+c.name])/(u[V]["+DI "+c.name]+u[V]["-DI "+c.name])}g+=y}else if(v==h+d-1)T="A",T+="D",T+="X",T+=" ",e.a97(7),m[T+c.name]=e.p9k(g,d);else{_="A",_+="D",_+="X ",L="ADX",L+=" ",e.X_C(4);var Y=e.p9k(0,13,12);e.X_C(4);var G=e.p9k(0,12,11);m[L+c.name]=(u[v-Y][_+c.name]*(d-G)+y)/d}if(c.inputs.Histogram){if(H="-",H+="D",H+="I",H+=" ",P="_his",P+="t",N=c.name+P,!m["+DI "+c.name]&&m["+DI "+c.name]!==0||!m["-DI "+c.name]&&m["-DI "+c.name]!==("0"^0))continue;m[N]=m["+DI "+c.name]-m[H+c.name],c.inputs.Series===!1&&(m["+DI "+c.name]=null,m["-DI "+c.name]=null),c.outputMap[N]=""}}}},r.Studies.displayADX=function(o,c,l){var u,h,d,f,A,p,g;u=c.underlay?.3:c.inputs.Series?.4:1,c.inputs.Series&&c.inputs.Shading&&(h="+DI "+c.name,d="-DI "+c.name,f=r.Studies.determineColor(c.outputs[c.outputMap[h]]),A=r.Studies.determineColor(c.outputs[c.outputMap[d]]),p=c.getYAxis(o),g={topBand:h,bottomBand:d,topColor:f,bottomColor:A,skipTransform:o.panels[c.panel].name!=c.chart.name,topAxis:p,bottomAxis:p,opacity:"0.3"-0},!c.highlight&&o.highlightedDraggable&&(g.opacity*=+"0.3"),r.fillIntersecting(o,c.panel,g)),c.inputs.Histogram&&r.Studies.createHistogram(o,c,l,!1,u),c.inputs.Series!==!1?r.Studies.displaySeriesAsLine(o,c,l):!c.inputs.Series&&!c.inputs.Histogram&&o.displayErrorAsWatermark(c.panel,o.translateIf(c.name)+": "+o.translateIf("Nothing to display"))},r.Studies.studyLibrary=r.extend(r.Studies.studyLibrary,{ADX:{name:"ADX/DMS",calculateFN:r.Studies.calculateADX,seriesFN:r.Studies.displayADX,inputs:{Period:14,"Smoothing Period":14,Series:!0,Shading:!1,Histogram:!1},outputs:{"+DI":"#00FF00","-DI":"#FF0000",ADX:"auto","Positive Bar":"#00DD00","Negative Bar":"#FF0000"}}})):(i="adx feature requires ",i+="first activating studies fea",i+="ture.",console.error(i))};$l=E=>{var e,t,s,n;e=typeof _CIQ<"u"?_CIQ:E.CIQ,e.Studies?(t="#",t+="F",t+="F000",t+="0",s="#",s+="0",s+="0D",s+="D00",n="Allig",n+="ato",n+="r",e.Studies.calculateAlligator=function(r,i){var a=we,o,c,l,u,h,d,f,A,p,g,m;if(o={J:Number(i.inputs["Jaw Period"]),T:Number(i.inputs["Teeth Period"]),L:Number(i.inputs["Lips Period"])},c=i.chart.scrubbed,a.M_N(),c.length<Math.max(o.J,o.T,o.L)+1){i.error=!0;return}(i.type==="Gator"||i.inputs["Show Lines"])&&(l="Teeth Off",l+="set",u="w",u+="ell",u+="es wi",u+="lder",e.Studies.MA("welles wilder",o.J,"hl/2",i.inputs["Jaw Offset"],"Jaw",r,i),e.Studies.MA(u,o.T,"hl/2",i.inputs[l],"Teeth",r,i),e.Studies.MA("welles wilder",o.L,"hl/2",i.inputs["Lips Offset"],"Lips",r,i));for(var b=i.startFrom;b<c.length;b++)if(c[b]&&(i.type=="Gator"&&(h="_",h+="hi",h+="st",h+="1",d="Teet",d+="h ",f=c[b]["Jaw "+i.name],A=c[b]["Lips "+i.name],p=c[b][d+i.name],(p||p==="0"*1)&&(g="_h",g+="ist",g+="2",(f||f===0)&&(a.X_C(1),c[b][i.name+"_hist1"]=Math.abs(a.p9k(f,p))),(A||A===0)&&(a.X_C(1),c[b][i.name+g]=-Math.abs(a.p9k(p,A)))),i.outputMap={},i.outputMap[i.name+h]="",i.outputMap[i.name+"_hist2"]=""),i.inputs["Show Fractals"])){if(!c[b-2]||!c[b-1]||!c[b]||!c[b+1]||!c[b+2])continue;c[b-2].High&&c[b-1].High&&c[b].High&&c[b+1].High&&c[b+2].High&&c[b].High>c[b-1].High&&c[b].High>c[b-2].High&&c[b].High>c[b+("1">>32)].High&&c[b].High>c[b+2].High&&(c[b]["Fractal High "+i.name]=1),c[b-2].Low&&c[b-("1">>0)].Low&&c[b].Low&&c[b+1].Low&&c[b+2].Low&&c[b].Low<c[b-("1"|1)].Low&&c[b].Low<c[b-2].Low&&c[b].Low<c[b+1].Low&&c[b].Low<c[b+2].Low&&(m="Fra",m+="ct",m+="al L",m+="ow ",c[b][m+i.name]=1)}},e.Studies.displayAlligator=function(r,i,a){var o=we,c,l,u,h;if(c=i.getContext(r),o.K_Q(),l=r.chart,i.inputs["Show Lines"]&&e.Studies.displaySeriesAsLine(r,i,a),i.inputs["Show Fractals"]){r.startClip(),c.globalAlpha=i.underlay?"0.3"*1:1,!i.highlight&&r.highlightedDraggable&&(c.globalAlpha*=.3);for(var d=2;d<a.length-2;d++)a[d]&&(u="l",u+="o",u+="w",h="hi",h+="g",h+="h",a[d]["Fractal High "+i.name]&&f(h,d),a[d]["Fractal Low "+i.name]&&f(u,d));r.endClip()}function f(A,p){var g,m,b,C,F,w,U;if(o.M_N(),o.a97(17),g=o.p9k(64,"0"),r.cleanupGaps==="stretch")for(;a[g+1]&&(o.a97(2),m=a[o.p9k(1,g)]["Lips "+i.name],!(m||m===0||a[g+("1"|1)].futureTick));)g++;C=l.panel.yAxis.flipped,A=="high"?(F="Hi",F+="g",F+="h",c.fillStyle=r.defaultColor,c.textBaseline=C?"top":"bottom",b=r.pixelFromPrice(a[p][l.highLowBars?F:l.defaultPlotField||"Close"]),c.fillText(C?"▼":"▲",r.pixelFromBar(p+g/2,l)-c.measureText("▲").width/2+1,C?b+5:b-("5"-0))):A=="low"&&(w="L",w+="ow",U="t",U+="o",U+="p",c.fillStyle=r.defaultColor,c.textBaseline=C?"bottom":U,b=r.pixelFromPrice(a[p][l.highLowBars?w:l.defaultPlotField||"Close"]),c.fillText(C?"▲":"▼",r.pixelFromBar(p+g/2,l)-c.measureText("▼").width/2+1,C?b-5:b+5))}},e.Studies.displayGator=function(r,i,a){var o=we,c,l,u,h,d,f,A,p,g,m,b,C,F,w,U;c="#CC",c+="CCC",c+="C",l=r.panels[i.panel],u=i.getContext(r),h=i.getYAxis(r),d=r.pixelFromPrice(0,l,h),f=r.layout.candleWidth-2,f<2&&(f=1),A=e.Studies.determineColor(i.outputs["Increasing Bar"]),p=e.Studies.determineColor(i.outputs["Decreasing Bar"]),r.canvasColor("stx_histogram"),i.underlay||(u.globalAlpha=1),u.fillStyle=c,r.startClip(i.panel),!i.highlight&&r.highlightedDraggable&&(u.globalAlpha*=.3);for(var B=0;B<a.length;B++)if(g="str",g+="etch",m=0,b=a[B],o.a97(1),C=a[o.A0s(B,1)],!!b){if(r.cleanupGaps===g)for(;a[B+1]&&(o.a97(2),F=a[o.p9k(1,B)][i.name+"_hist1"],!(F||F===0||a[B+1].futureTick));)m++,B++;for(var k=1;k<=2;k++)w="_",w+="hi",w+="st",U="_his",U+="t",(!C||C[i.name+"_hist"+k]===void 0)&&(C=r.getPreviousBar(r.chart,i.name+U+k,B-m)),C?Math.abs(C[i.name+"_hist"+k])<Math.abs(b[i.name+"_hist"+k])?u.fillStyle=A:Math.abs(C[i.name+w+k])>Math.abs(b[i.name+"_hist"+k])&&(u.fillStyle=p):u.fillStyle="#CCCCCC",b.candleWidth&&(f=Math.floor(Math.max(1,b.candleWidth-2))),u.fillRect(Math.floor(r.pixelFromBar(B-m,l.chart)-f/2),Math.floor(d),Math.floor(f+m*r.layout.candleWidth),Math.floor(r.pixelFromPrice(b[i.name+"_hist"+k],l,h)-d))}r.endClip()},e.Studies.studyLibrary=e.extend(e.Studies.studyLibrary,{Alligator:{name:n,overlay:!0,seriesFN:e.Studies.displayAlligator,calculateFN:e.Studies.calculateAlligator,inputs:{"Show Lines":!0,"Jaw Period":"13"<<32,"Jaw Offset":8,"Teeth Period":8,"Teeth Offset":5,"Lips Period":5,"Lips Offset":3,"Show Fractals":!1},outputs:{Jaw:"#0000FF",Teeth:"#FF0000",Lips:s}},Gator:{name:"Gator Oscillator",seriesFN:e.Studies.displayGator,calculateFN:e.Studies.calculateAlligator,inputs:{"Jaw Period":13,"Jaw Offset":8,"Teeth Period":8,"Teeth Offset":5,"Lips Period":5,"Lips Offset":3},outputs:{"Increasing Bar":"#00DD00","Decreasing Bar":t},centerline:0}})):console.error("alligator feature requires first activating studies feature.")};Gl=E=>{var e=we,t,s,n,r,i;e.K_Q(),t=typeof _CIQ<"u"?_CIQ:E.CIQ,t.Studies?(s="Aro",s+="on Oscillator",n="#FF000",n+="0",r="#00D",r+="D00",i="0 to",i+=" 100",t.Studies.calculateAroon=function(a,o){var c,l,u,h,d,f,A,p,g,m,b,C,F;if(c=o.chart.scrubbed,c.length<o.days+1){o.error=!0;return}if(l=0,e.a97(0),u=e.A0s("0",1),h=null,d=null,o.startFrom>0){e.X_C(104);var w=e.A0s(3,19,12,57);f=c[o.startFrom-w]["_state "+o.name],f&&(l=f[0],u=f[1],e.a97(43),h=f[e.A0s("2",2)],d=f[3])}for(var U=o.startFrom;U<c.length&&(p="Aroo",p+="n Osc",p+="illator ",g=c[U],!g.futureTick);U++){if(h===null&&(h=g.High),d===null&&(d=g.Low),h=Math.max(h,g.High),h==g.High)l=0;else if(l++,l>o.days)for(h=g.High,l=0,A=1;A<=o.days;A++)h=Math.max(h,c[U-A].High),h==c[U-A].High&&(l=A);if(d=Math.min(d,g.Low),d==g.Low)u=0;else if(u++,u>o.days)for(d=g.Low,u=0,A=1;A<=o.days;A++)d=Math.min(d,c[U-A].Low),d==c[U-A].Low&&(u=A);m=!isNaN(g.High),b=!isNaN(g.Low),e.X_C(123);var B=e.A0s(104,2,99,52);e.a97(124);var k=e.p9k(8,8,20,3,0);C=B*(k-l/o.days),m&&(g["Aroon Up "+o.name]=C),e.a97(2);var y=e.A0s(9,91);e.X_C(48);var S=e.A0s(1,5,10);F=y*(S-u/o.days),b&&(g["Aroon Down "+o.name]=F),m&&b&&(g[p+o.name]=g["Aroon Up "+o.name]-g["Aroon Down "+o.name]),g["_state "+o.name]=[l,u,h,d]}},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{Aroon:{name:"Aroon",range:i,calculateFN:t.Studies.calculateAroon,outputs:{"Aroon Up":r,"Aroon Down":n}},"Aroon Osc":{name:s,calculateFN:t.Studies.calculateAroon,outputs:{"Aroon Oscillator":"auto"}}})):console.error("aroon feature requires first activating studies feature.")};Jl=E=>{var e=we,t,s,n,r;e.K_Q(),t=typeof _CIQ<"u"?_CIQ:E.CIQ,t.Studies?(s="au",s+="to",n="a",n+="uto",r="Average T",r+="rue Range",t.Studies.calculateATRBands=function(i,a){var o,c;o="fie",o+="l",e.M_N(),o+="d",t.Studies.calculateStudyATR(i,a),c=a.inputs.Field,(!c||c==o)&&(c="Close"),t.Studies.calculateGenericEnvelope(i,a,a.inputs.Shift,c,"ATR "+a.name)},t.Studies.calculateSTARCBands=function(i,a){var o;o="A",o+="TR",o+=" ",t.Studies.calculateStudyATR(i,a),t.Studies.MA("simple",a.inputs["MA Period"],"Close",0,"_MA",i,a),t.Studies.calculateGenericEnvelope(i,a,a.inputs.Multiplier,"_MA "+a.name,o+a.name)},t.Studies.calculateATRStops=function(i,a){var o,c,l,u,h,d,f,A,p,g,m,b,C;if(o="All Stops",o+=" ",c=a.chart.scrubbed,!!c){t.Studies.calculateStudyATR(i,a),e.K_Q(),l=a.inputs.HighLow;for(var F=Math.max(a.startFrom-1,1);F<c.length-1;F++)u="All ",u+="S",u+="tops",u+=" ",h="ATR",h+=" ",d=c[F],e.X_C(1),f=c[e.p9k(F,1)],A=d["Buy Stops "+a.name],A||(A=d["Sell Stops "+a.name]),A||(A=0),!(!d||!f)&&(p=d.Close,g=p,m=d[h+a.name]*a.inputs.Multiplier,d.Close>A&&f.Close>A?(l&&(p=d.High),e.X_C(1),g=Math.max(A,e.p9k(p,m))):d.Close<=A&&f.Close<=A?(l&&(p=d.Low),e.X_C(2),g=Math.min(A,e.p9k(m,p))):d.Close>A?(l&&(p=d.High),e.a97(1),g=e.p9k(p,m)):d.Close<=A&&(l&&(p=d.Low),e.a97(2),g=e.A0s(m,p)),p<=g?(b="Buy S",b+="to",b+="ps ",e.a97(2),c[e.p9k(1,F)][b+a.name]=g,e.X_C(2),delete c[e.p9k(1,F)]["Sell Stops "+a.name]):p>g&&(C="Se",C+="ll S",C+="tops ",e.X_C(89),c[e.p9k("1",F)][C+a.name]=g,e.X_C(117),delete c[e.p9k(F,64,"1")]["Buy Stops "+a.name]),e.X_C(2),c[e.A0s(1,F)][u+a.name]=g);a.referenceOutput="All Stops",a.outputMap={},a.outputMap[o+a.name]=""}},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{ATR:{name:r,calculateFN:t.Studies.calculateStudyATR,outputs:{ATR:"auto"}},"ATR Bands":{name:"ATR Bands",overlay:!0,seriesFN:t.Studies.displayChannel,calculateFN:t.Studies.calculateATRBands,inputs:{Period:5,Field:"field",Shift:3,"Channel Fill":!0},outputs:{"ATR Bands Top":n,"ATR Bands Bottom":"auto","ATR Bands Channel":"auto"},attributes:{Shift:{min:.1,step:.1}}},"STARC Bands":{name:"STARC Bands",overlay:!0,seriesFN:t.Studies.displayChannel,calculateFN:t.Studies.calculateSTARCBands,inputs:{Period:15,"MA Period":5,Multiplier:1.3,"Channel Fill":!0},outputs:{"STARC Bands Top":"auto","STARC Bands Median":s,"STARC Bands Bottom":"auto"},attributes:{Multiplier:{min:.1,step:.1}}},"ATR Trailing Stop":{name:"ATR Trailing Stops",overlay:!0,seriesFN:t.Studies.displayPSAR2,calculateFN:t.Studies.calculateATRStops,inputs:{Period:21,Multiplier:3,"Plot Type":["points","squarewave"],HighLow:!1},outputs:{"Buy Stops":"#FF0000","Sell Stops":"#00FF00"},attributes:{Multiplier:{min:.1,step:.1}}}})):console.error("atr feature requires first activating studies feature.")};Zl=E=>{var e=we;e.M_N();var t,s,n,r,i,a;if(t=typeof _CIQ<"u"?_CIQ:E.CIQ,t.Studies)a="#0",a+="0",a+="DD",a+="00",t.Studies.calculateAwesomeOscillator=function(c,l){var u,h,d,f,A;if(u="h",u+="l/",u+="2",h="s",h+="i",h+="mp",h+="le",d=l.chart.scrubbed,d.length<33){l.error=!0;return}t.Studies.MA("simple",5,"hl/2",0,"_MA5",c,l),t.Studies.MA(h,34,u,0,"_MA34",c,l);for(var p=Math.max(l.startFrom,33);p<d.length;p++)f="_",f+="M",f+="A3",f+="4 ",A="_",A+="hi",A+="s",A+="t",d[p]&&(d[p][l.name+A]=d[p]["_MA5 "+l.name]-d[p][f+l.name]);l.outputMap={},l.outputMap[l.name+"_hist"]=""},t.Studies.displayAwesomeOscillator=function(c,l,u){var h,d,f,A,p,g,m,b,C,F,w,U,B,k,y,S;h="#",h+="CCCC",h+="CC",d="Increasi",d+="ng",d+=" Bar",f=c.panels[l.panel],A=l.getContext(c),p=l.getYAxis(c),g=c.pixelFromPrice(0,f,p),m=c.layout.candleWidth-2,m<2&&(m=1),b=t.Studies.determineColor(l.outputs[d]),C=t.Studies.determineColor(l.outputs["Decreasing Bar"]),c.canvasColor("stx_histogram"),l.underlay||(A.globalAlpha=1),A.fillStyle=h,c.startClip(l.panel),!l.highlight&&c.highlightedDraggable&&(A.globalAlpha*=.3),e.M_N();for(var T=0;T<u.length;T++)if(F="_",F+="h",F+="is",F+="t",w="_",w+="h",w+="i",w+="st",U="_",U+="h",U+="is",U+="t",B=0,k=u[T],e.X_C(88),y=u[e.A0s(T,"1",0)],y||(y=c.getPreviousBar(c.chart,l.name+"_hist",T)),!!k){if(c.cleanupGaps==="stretch")for(;u[T+1]&&(e.a97(2),S=u[e.p9k(1,T)][l.name+"_hist"],!(S||S===0||u[T+1].futureTick));)B++,T++;(!y||y[l.name+"_hist"]===void 0)&&(y=c.getPreviousBar(c.chart,l.name+"_hist",T-B)),y&&(y[l.name+U]<k[l.name+"_hist"]?A.fillStyle=b:y[l.name+"_hist"]>k[l.name+w]&&(A.fillStyle=C)),k.candleWidth&&(m=Math.floor(Math.max(1,k.candleWidth-2))),A.fillRect(Math.floor(c.pixelFromBar(T-B,f.chart)-m/2),Math.floor(g),Math.floor(m+B*c.layout.candleWidth),Math.floor(c.pixelFromPrice(k[l.name+F],f,p)-g))}c.endClip()},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{Awesome:{name:"Awesome Oscillator",seriesFN:t.Studies.displayAwesomeOscillator,calculateFN:t.Studies.calculateAwesomeOscillator,inputs:{},outputs:{"Increasing Bar":a,"Decreasing Bar":"#FF0000"}}});else{s=684288762,n=1487916685,r=2;for(var o="1"<<64;e.B8M(o.toString(),o.toString().length,49494)!==s;o++)console.error(""),r+=2;e.N2s(r.toString(),r.toString().length,4296)!==n&&(i="awesomeOscillator featur",i+="e requires first activati",i+="ng studies fea",i+="ture.",console.error(i))}};ec=E=>{var e,t,s,n,r,i;e=-1472310351,t=2131198309,we.M_N(),s=2;for(var a=1;we.B8M(a.toString(),a.toString().length,78183)!==e;a++)n=typeof _CIQ<"u"?_CIQ:E.CIQ,s+=2;we.B8M(s.toString(),s.toString().length,11231)!==t&&(n=!_CIQ==""?_CIQ:E.CIQ),n.Studies?(i="Bala",i+="nce of P",i+="ower",n.Studies.calculateBalanceOfPower=function(o,c){var l,u;if(l=c.chart.scrubbed,l.length<c.days+1){c.error=!0;return}for(var h=c.startFrom;h<l.length;h++)u=l[h],u["_Ratio "+c.name]=u.Close-u.Open,u.High-u.Low!==0&&(u["_Ratio "+c.name]/=u.High-u.Low);n.Studies.MA(c.inputs["Moving Average Type"],c.days,"_Ratio "+c.name,0,"Result",o,c)},n.Studies.studyLibrary=n.extend(n.Studies.studyLibrary,{"Bal Pwr":{name:i,range:"-1 to 1",centerline:"0"^0,calculateFN:n.Studies.calculateBalanceOfPower,inputs:{Period:14,"Moving Average Type":"ma"}}})):(r="balanceOfPower feature requires first activ",r+="ating studi",r+="e",r+="s feature.",console.error(r))};tc=E=>{var e,t,s,n,r,i,a,o,c,l,u;we.M_N(),e=typeof _CIQ<"u"?_CIQ:E.CIQ,e.Studies?(s="m",s+="a",n="f",n+="i",n+="eld",r="Bolling",r+="er Ba",r+="ndwidth",i="a",i+="uto",a="fie",a+="l",a+="d",o="Boll",o+="i",o+="nger %b",c="au",c+="t",c+="o",l="m",l+="a",u="fi",u+="eld",e.Studies.calculateBollinger=function(h,d){var f,A;f="Mov",f+="i",f+="ng Average Type",A=d.inputs.Field,(!A||A=="field")&&(A="Close"),e.Studies.MA(d.inputs[f],d.days,A,"0"-0,"_MA",h,d),d.std=new e.Studies.StudyDescriptor(d.name,"STD Dev",d.panel),d.std.chart=d.chart,d.std.startFrom=d.startFrom,d.std.days=d.days,d.std.inputs={Field:A,"Standard Deviations":1,Type:d.inputs["Moving Average Type"]},d.std.outputs={"_STD Dev":null},e.Studies.calculateStandardDeviation(h,d.std),e.Studies.calculateGenericEnvelope(h,d,d.inputs["Standard Deviations"],"_MA "+d.name,"_STD Dev "+d.name),d.type=="Boll %b"&&(d.zoneOutput="%b")},e.Studies.studyLibrary=e.extend(e.Studies.studyLibrary,{"Bollinger Bands":{name:"Bollinger Bands",overlay:!0,calculateFN:e.Studies.calculateBollinger,seriesFN:e.Studies.displayChannel,inputs:{Period:20,Field:u,"Standard Deviations":2,"Moving Average Type":l,"Channel Fill":!0},outputs:{"Bollinger Bands Top":c,"Bollinger Bands Median":"auto","Bollinger Bands Bottom":"auto"},attributes:{"Standard Deviations":{min:+"0.1",step:.1}}},"Boll %b":{name:o,calculateFN:e.Studies.calculateBollinger,inputs:{Period:20,Field:a,"Standard Deviations":2,"Moving Average Type":"ma"},outputs:{"%b":"auto"},parameters:{init:{studyOverZonesEnabled:!0,studyOverBoughtValue:"100"^0,studyOverBoughtColor:"auto",studyOverSoldValue:0,studyOverSoldColor:i}},attributes:{"Standard Deviations":{min:"0.1"-0,step:.1}}},"Boll BW":{name:r,calculateFN:e.Studies.calculateBollinger,inputs:{Period:20,Field:n,"Standard Deviations":2,"Moving Average Type":s},outputs:{Bandwidth:"auto"},attributes:{"Standard Deviations":{min:.1,step:.1}}}})):(t="boll",t+="inger ",t+="feature requ",t+="ires first activating studies feature.",console.error(t))};ic=E=>{var e=we,t,s,n,r,i,a;if(e.M_N(),t=typeof _CIQ<"u"?_CIQ:E.CIQ,t.Studies)i="a",i+="u",i+="t",i+="o",a="a",a+="ut",a+="o",t.Studies.calculateCCI=function(c,l){var u,h,d,f,A,p;if(u=l.chart.scrubbed,e.K_Q(),u.length<l.days+1){l.error=!0;return}t.Studies.MA("simple",l.days,"hlc/3",0,"MA",c,l);for(var g=Math.max(l.startFrom,l.days-1);g<u.length;g++)if(h="h",h+="lc/",h+="3",d=u[g],!!d){f=0;for(var m=0;m<l.days;m++)A="M",A+="A",A+=" ",p="h",p+="l",p+="c",p+="/3",f+=Math.abs(u[g-m][p]-d[A+l.name]);f/=l.days,Math.abs(f)<1e-8?d["Result "+l.name]=0:d["Result "+l.name]=(d[h]-d["MA "+l.name])/(.015*f)}},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{CCI:{name:"Commodity Channel Index",calculateFN:t.Studies.calculateCCI,inputs:{Period:20},parameters:{init:{studyOverZonesEnabled:!0,studyOverBoughtValue:100,studyOverBoughtColor:a,studyOverSoldValue:-100,studyOverSoldColor:i}},attributes:{Period:{min:2}}}});else{s=232502665,n=90877607,r=2;for(var o=1;e.B8M(o.toString(),o.toString().length,57759)!==s;o++)console.error(""),r+=2;e.B8M(r.toString(),r.toString().length,14653)!==n&&console.error(""),console.error("cci feature requires first activating studies feature.")}};rc=E=>{var e;e=typeof _CIQ<"u"?_CIQ:E.CIQ,e.Studies?(e.Studies.calculateCenterOfGravity=function(t,s){var n=we,r,i,a,o,c,l,u;if(r="Cent",r+="e",r+="r of G",r+="ravity ",i="Clos",i+="e",a=s.chart.scrubbed,a.length<s.days){s.error=!0;return}o=s.inputs.Field,(!o||o=="field")&&(o=i);for(var h=Math.max(s.startFrom,s.days-1);h<a.length;h++){c=0,l=0;for(var d="0"*1;d<s.days;d++)u=e.Studies.getQuoteFieldValue(a[h-d],o),n.X_C(125),c-=n.A0s("1",u,d),l+=u;l&&(n.X_C(7),a[h]["Center of Gravity "+s.name]=n.p9k(c,l))}e.Studies.MA("sma",3,r+s.name,0,"Signal",t,s)},e.Studies.studyLibrary=e.extend(e.Studies.studyLibrary,{COG:{name:"Center Of Gravity",calculateFN:e.Studies.calculateCenterOfGravity,inputs:{Period:10,Field:"field"},outputs:{"Center of Gravity":"auto",Signal:"red"}}})):console.error("centerOfGravity feature requires first activating studies feature.")};ac=E=>{var e,t,s;e=typeof _CIQ<"u"?_CIQ:E.CIQ,e.Studies?(t="m",t+="a",s="Chaikin ",s+="Money Flow",e.Studies.calculateChaikinMoneyFlow=function(n,r){var i=we,a,o,c,l,u,h,d,f;if(a=r.chart.scrubbed,a.length<r.days){r.error=!0;return}o=0,c=0,i.X_C(94);var A=i.A0s(0,2,13,13,2);l=a[r.startFrom-A],i.K_Q(),l&&(u="_",u+="s",u+="umV",u+=" ",h="_sumV",h+=" ",l["_sumMF "+r.name]&&(o=l["_sumMF "+r.name]),l[h+r.name]&&(c=l[u+r.name]));for(var p=r.startFrom;p<a.length;p++){if(d="_sum",d+="MF",d+=" ",f="_",f+="MF",f+="V",f+=" ",a[p].High==a[p].Low)a[p]["_MFV "+r.name]=0;else{i.X_C(63);var g=i.A0s(8,10,3,1);a[p][f+r.name]=a[p].Volume*(g*a[p].Close-a[p].High-a[p].Low)/(a[p].High-a[p].Low)}o+=a[p]["_MFV "+r.name],c+=a[p].Volume,p>r.days-1&&(o-=a[p-r.days]["_MFV "+r.name],c-=a[p-r.days].Volume,c&&(i.a97(7),a[p]["Result "+r.name]=i.p9k(o,c))),a[p][d+r.name]=o,a[p]["_sumV "+r.name]=c}},e.Studies.calculateChaikinVolatility=function(n,r){var i=we,a,o,c,l,u;if(a="_",a+="Hi",a+="gh-Lo",a+="w ",o=r.chart.scrubbed,o.length<r.days){r.error=!0;return}for(c=r.startFrom;c<o.length&&!o[c].futureTick;c++)o[c]["_High-Low "+r.name]=o[c].High-o[c].Low;for(e.Studies.MA(r.inputs["Moving Average Type"],r.days,a+r.name,0,"_MA",n,r),l=r.inputs["Rate Of Change"],l||(l=r.days),c=Math.max(r.startFrom,l);c<o.length;c++)if(u="_",u+="M",u+="A ",!!o[c-l][u+r.name]){if(o[c].futureTick)break;i.a97(126);var h=i.A0s(565,2,15,1300);i.X_C(34);var d=i.A0s(4,6,25);o[c]["Result "+r.name]=h*(o[c]["_MA "+r.name]/o[c-l]["_MA "+r.name]-d)}},e.Studies.studyLibrary=e.extend(e.Studies.studyLibrary,{"Chaikin MF":{name:s,calculateFN:e.Studies.calculateChaikinMoneyFlow,inputs:{Period:20}},"Chaikin Vol":{name:"Chaikin Volatility",calculateFN:e.Studies.calculateChaikinVolatility,inputs:{Period:14,"Rate Of Change":2,"Moving Average Type":t}}})):console.error("chaikin feature requires first activating studies feature.")};nc=E=>{var e=we,t,s,n,r;t=typeof _CIQ<"u"?_CIQ:E.CIQ,e.K_Q(),t.Studies?(n="Varia",n+="b",n+="le",r="Var",r+="iable",t.Studies.prettify.variable="vma",t.Studies.movingAverage.conversions.vma="variable",t.Studies.movingAverage.translations.variable=r,t.Studies.movingAverage.typeMap.vma="Variable",t.Studies.movingAverage.typeMap.variable=n,t.Studies.calculateChandeForecast=function(i,a){var o,c,l,u,h;if(o="tim",o+="e se",o+="ri",o+="es",c="C",c+="lose",l=a.chart.scrubbed,l.length<a.days+1){a.error=!0;return}u=a.inputs.Field,(!u||u=="field")&&(u=c),t.Studies.MA(o,a.days,u,0,"MA",i,a);for(var d=Math.max(1,a.startFrom);d<l.length;d++){h=t.Studies.getQuoteFieldValue(l[d],u,a.subField),e.a97(1);var f=e.A0s(1700,1600);e.X_C(11);var A=e.p9k(9,3,26);l[d]["Result "+a.name]=f*(A-l[d]["MA "+a.name]/h)}},t.Studies.calculateChandeMomentum=function(i,a){var o,c,l,u,h,d,f,A,p,g,m;o="C",o+="lose",e.M_N(),c=a.name;for(var b in a.outputs)e.a97(25),c=e.A0s(" ",c,b);if(l=a.chart.scrubbed,l.length<a.days+1){a.error=!0;return}u=a.inputs.Field,(!u||u=="field")&&(u=o),e.X_C(16),h=e.p9k(0,"0"),d=0,f=[];for(var C=a.startFrom-a.days+1;C<l.length;C++)C<1||(A=t.Studies.getQuoteFieldValue(l[C],u),p=t.Studies.getQuoteFieldValue(l[C-1],u),p!==void 0&&(e.X_C(1),g=e.p9k(A,p),f.push(g),h+=g,d+=Math.abs(g),f.length==a.days&&(e.a97(99),l[C][c]=e.A0s(d,h,100),m=f.shift(),h-=m,d-=Math.abs(m))))},t.Studies.calculateMovingAverageVariable=function(i,a){var o,c,l,u,h,d,f,A,p,g,m,b,C,F,w,U,B,k,y;o="c",o+="m",o+="o",c="Cl",c+="o",c+="se",a.inputs.Type,l=a.chart.scrubbed,e.X_C(4);var S=e.A0s(8,2,8);e.X_C(70);var T=e.p9k(11,17,0,7);u=S/(a.days+T),h=null,d=a.name;for(var _ in a.outputs)e.X_C(25),d=e.A0s(" ",d,_);for(f=a.inputs.Field,(!f||f=="field")&&(f=c),a.cmo=new t.Studies.StudyDescriptor(a.name,o,a.panel),a.cmo.chart=a.chart,a.cmo.days=9,a.cmo.inputs={Field:f},a.cmo.startFrom=a.startFrom,a.cmo.outputs={_CMO:null},t.Studies.calculateChandeMomentum(i,a.cmo),A=parseInt(a.inputs.Offset,10),isNaN(A)&&(A=0),b=a.startFrom,C=A,p=a.startFrom-1;p>=0;p--)if(g=l[p][d],!(!g&&g!==0)){if(h===null&&(h=g),C<=0)break;C--,b=p}for(h===null&&(h=b=0),F=[],p=b;p<l.length;p++){if(w=l[p],g=w[f],g&&typeof g=="object"&&(g=g[a.subField]),U=p+A>=0&&p+A<l.length,B=U?l[p+A]:null,!g&&g!==0){B?B[d]=null:p+A>=l.length&&(m={},m[d]=null,F.push(m));continue}!w["_CMO "+a.name]&&w["_CMO "+a.name]!==0||(k=Math.abs(w["_CMO "+a.name])/("100">>0),e.X_C(127),y=e.A0s(k,h,u,k,1,u,g),h=y,p<a.days&&(y=null),B?B[d]=y:p+A>=l.length&&(m={},m[d]=y,F.push(m)))}a.appendFutureTicks(i,F)},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{"Chande Fcst":{name:"Chande Forecast Oscillator",calculateFN:t.Studies.calculateChandeForecast,inputs:{Period:14,Field:"field"}},"Chande Mtm":{name:"Chande Momentum Oscillator",calculateFN:t.Studies.calculateChandeMomentum,inputs:{Period:"9">>0},parameters:{init:{studyOverZonesEnabled:!0,studyOverBoughtValue:50,studyOverBoughtColor:"auto",studyOverSoldValue:-50,studyOverSoldColor:"auto"}}}})):(s="chande feature require",s+="s first activating ",s+="studies feature.",console.error(s))};sc=E=>{var e=we,t,s;e.K_Q(),t=typeof _CIQ<"u"?_CIQ:E.CIQ,t.Studies?(s="a",s+="uto",t.Studies.calculateChoppiness=function(n,r){e.M_N();var i,a,o;function c(d,f){var A,p;e.a97(128);var g=e.p9k(10,9,10,8,2);A=Number.MAX_VALUE*g,p=Number.MAX_VALUE;for(var m=f-d+1;m<=f;m++)m<0||(A=Math.max(A,i[m].High),p=Math.min(p,i[m].Low));return[p,A]}if(t.Studies.calculateStudyATR(n,r),i=r.chart.scrubbed,i.length<r.days+1){r.error=!0;return}for(var l=Math.max(r.startFrom,r.days);l<i.length;l++)if(a=i[l],!!a){if(a.futureTick)break;if(o=c(r.days,l),a["Sum True Range "+r.name]){e.a97(11);var u=e.p9k(16,300,4700);e.a97(4);var h=e.p9k(19,19,37);a["Result "+r.name]=u*Math.log(a["Sum True Range "+r.name]/Math.max(1e-6,o[h]-o[0]))/Math.log(r.days)}else isNaN(a)||(a["Result "+r.name]=0)}},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{Choppiness:{name:"Choppiness Index",calculateFN:t.Studies.calculateChoppiness,centerline:50,parameters:{init:{studyOverZonesEnabled:!0,studyOverBoughtValue:61.8,studyOverBoughtColor:s,studyOverSoldValue:38.2,studyOverSoldColor:"auto"}},attributes:{studyOverBoughtValue:{min:50,step:"0.1"},studyOverSoldValue:{max:50,step:"0.1"}}}})):console.error("choppiness feature requires first activating studies feature.")};oc=E=>{var e=we,t,s,n,r,i,a;if(t=typeof _CIQ<"u"?_CIQ:E.CIQ,e.K_Q(),t.Studies)t.Studies.initPriceRelative?(i="#0",i+="0",i+="D",i+="D00",a="au",a+="t",a+="o",t.Studies.calculateCorrelationCoefficient=function(c,l){var u,h,d,f,A,p,g,m,b,C,F,w,U,B,k,y,S,T,_,L,H,P;if(u=l.chart.scrubbed,h=l.days,u.length<h+1){l.error=!0;return}if(l.compare=l.inputs["Compare To"],l.compare)l.compare=[l.compare];else{l.compare=[],l.outputs={},l.outputMap={};for(var N in c.chart.series)if(d=c.chart.series[N],d.parameters.color){f="R",f+="es",f+="ult ",l.compare.push(d.display),l.outputs["Result "+d.display]=d.parameters.color,e.a97(19);var v=e.A0s(2557,2557,2547,3);e.X_C(129);var x=e.A0s(14,7,3,10,30);l.outputMap[f+d.display+(v<"7700">>x?" ":"K")+l.name]="Result "+d.display}}if(!l.compare.length){l.error="Correlation Coefficient requires at least one comparison symbol";return}for(var M=0;M<l.compare.length;M++){A=0,e.X_C(43),p=e.p9k("0",0),g=0,m=0,b=0,C=l.compare[M],F=0;for(var D=l.startFrom-h;D<u.length;D++)if(w="_",w+="temp",w+="s",w+=" ",U="_t",U+="emps ",!!u[D]){if(B=t.Studies.getQuoteFieldValue(u[D],C),B===null&&(k="_",k+="te",k+="m",k+="ps ",D>0&&u[D-1]&&u[D-1]["_temps "+l.name]&&u[D-1][k+l.name].c?B=u[D-1]["_temps "+l.name].c:B=0),B&&typeof B=="object"&&(B=B.Close),u[D]["_temps "+l.name]={},A+=u[D]["_temps "+l.name].b=u[D].Close,p+=u[D]["_temps "+l.name].c=B,g+=u[D]["_temps "+l.name].b2=Math.pow(u[D].Close,2),m+=u[D][U+l.name].c2=Math.pow(B,2),b+=u[D][w+l.name].bc=u[D].Close*B,F>=h){y="Resul",y+="t ",S="_t",S+="em",S+="ps ",T="_tem",T+="ps ",A-=u[D-h]["_temps "+l.name].b,p-=u[D-h]["_temps "+l.name].c,g-=u[D-h]["_temps "+l.name].b2,m-=u[D-h][T+l.name].c2,b-=u[D-h][S+l.name].bc,e.X_C(62);var Q=e.A0s(12,12,938,2,13);_=g/h-Math.pow(A/h,Q),L=m/h-Math.pow(p/h,2),e.X_C(33);var q=e.p9k(3,1,20,15);H=b/h-A*p/Math.pow(h,q),P=H/Math.sqrt(_*L),u[D][y+C+" "+l.name]=P}F++}}},t.Studies.calculatePerformance=function(c,l){var u,h,d,f,A,p,g,m,b;if(u="_MA",u+=" Comp",h="_MA ",h+="Base",d="C",d+="l",d+="o",d+="se",f="m",f+="a",A="Comp",A+="arison",A+=" S",A+="ymbol",p=l.chart.scrubbed,g=l.inputs[A].toUpperCase(),g||(g=l.study.inputs["Comparison Symbol"]),l.days||(l.days=l.study.inputs.Period),p.length<l.days+1){l.error=!0;return}t.Studies.MA(f,l.days,d,0,h,c,l),t.Studies.MA("ma",l.days,g,0,u,c,l);for(var C=l.startFrom;C<p.length;C++)m="_MA Bas",m+="e",m+=" ",b=t.Studies.getQuoteFieldValue(p[C],g),p[C]["Result "+l.name]=p[C].Close/b*(p[C]["_MA Comp "+l.name]/p[C][m+l.name])},t.Studies.calculateBeta=function(c,l){var u,h,d,f,A,p,g,m,b,C,F;if(u="_CO",u+="V",u+="A",u+="Rn ",h="m",h+="a",d="Co",d+="mparison S",d+="y",d+="mbol",f=l.chart.scrubbed,A=l.inputs[d].toUpperCase(),A||(A=l.study.inputs["Comparison Symbol"]),l.days||(l.days=l.study.inputs.Period),f.length<l.days+1){l.error=!0;return}for(var w=Math.max(l.startFrom,1);w<f.length;w++){e.X_C(8);var U=e.p9k(2,4,3);f[w]["_BaseChange "+l.name]=f[w].Close/f[w-U].Close-("1"|0),p=t.Studies.getQuoteFieldValue(f[w],A),g=t.Studies.getQuoteFieldValue(f[w-("1"|1)],A),e.X_C(48),f[w]["_CompChange "+l.name]=e.A0s(1,g,p)}for(t.Studies.MA("ma",l.days,"_BaseChange "+l.name,"0">>0,"_MA Base",c,l),t.Studies.MA("ma",l.days,"_CompChange "+l.name,0,"_MA Comp",c,l),w=Math.max(l.startFrom,l.days);w<f.length;w++)m="_",m+="MA Comp ",b="_V",b+="A",b+="Rn",b+=" ",f[w]["_COVARn "+l.name]=(f[w]["_BaseChange "+l.name]-f[w]["_MA Base "+l.name])*(f[w]["_CompChange "+l.name]-f[w]["_MA Comp "+l.name]),f[w][b+l.name]=Math.pow(f[w]["_CompChange "+l.name]-f[w][m+l.name],2);for(t.Studies.MA(h,l.days,u+l.name,0,"_COVAR",c,l),t.Studies.MA("ma",l.days,"_VARn "+l.name,0,"_VAR",c,l),w=Math.max(l.startFrom,l.days*2-1);w<f.length;w++)C="_V",C+="A",C+="R",C+=" ",F="Res",F+="u",F+="lt ",f[w][F+l.name]=f[w]["_COVAR "+l.name]/f[w][C+l.name]},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{correl:{name:"Correlation Coefficient",range:"-1 to 1",calculateFN:t.Studies.calculateCorrelationCoefficient,outputs:{}},"Perf Idx":{name:"Performance Index",centerline:"1">>0,initializeFN:t.Studies.initPriceRelative,seriesFN:t.Studies.displayVsComparisonSymbol,calculateFN:t.Studies.calculatePerformance,inputs:{Period:120,"Comparison Symbol":"SPY"},outputs:{Result:a,Gain:i,Loss:"#FF0000"},deferUpdate:!0},Beta:{name:"Beta",centerline:1,initializeFN:t.Studies.initPriceRelative,seriesFN:t.Studies.displayVsComparisonSymbol,calculateFN:t.Studies.calculateBeta,inputs:{Period:20,"Comparison Symbol":"SPY"},deferUpdate:!0}})):console.error("comparisonStudies feature requires first activating priceRelative feature.");else{s=446174251,n=-510348214,r=2;for(var o=1;e.N2s(o.toString(),o.toString().length,13700)!==s;o++)console.error(""),r+=2;e.B8M(r.toString(),r.toString().length,91001)!==n&&console.error("comparisonStudies feature requires first activating studies feature.")}};lc=E=>{var e=we,t,s,n,r,i,a;if(t="undefine",t+="d",s=typeof _CIQ!==t?_CIQ:E.CIQ,s.Studies)s.Studies.calculateCoppock=function(c,l){e.M_N();var u,h,d,f,A,p,g,m,b,C;if(u="_S",u+="um ",h="weig",h+="h",h+="ted",d="fie",d+="l",d+="d",f=l.chart.scrubbed,A=l.inputs.Field,(!A||A==d)&&(A="Close"),p=parseInt(l.inputs["Long RoC"],"10"*1),p||(p=14),g=parseInt(l.inputs["Short RoC"],"10"*1),g||(g=11),m=l.days,m||(m=10),!(p<g)){if(f.length<Math.max(g,p,m)+1){l.error=!0;return}for(var F=Math.max(l.startFrom,p);F<f.length;F++)if(b=s.Studies.getQuoteFieldValue(f[F-g],A),C=s.Studies.getQuoteFieldValue(f[F-p],A),b&&C){e.X_C(130);var w=e.A0s(572,15,13,700);f[F]["_Sum "+l.name]=w*(s.Studies.getQuoteFieldValue(f[F],A)/b+s.Studies.getQuoteFieldValue(f[F],A)/C-2)}s.Studies.MA(h,m,u+l.name,0,"Result",c,l)}},s.Studies.studyLibrary=s.extend(s.Studies.studyLibrary,{Coppock:{name:"Coppock Curve",calculateFN:s.Studies.calculateCoppock,inputs:{Period:"10"-0,Field:"field","Short RoC":"11">>64,"Long RoC":14}}});else{n=93164088,r=-822086390,i=2;for(var o=1;e.N2s(o.toString(),o.toString().length,"79942"^0)!==n;o++)a="c",a+="oppock feature requ",a+="ires first activating studies feature.",console.error(a),i+=2;e.B8M(i.toString(),i.toString().length,61324)!==r&&console.error("")}};cc=E=>{var e,t,s,n,r,i,a,o,c,l,u,h;if(e="und",e+="efin",e+="ed",t=typeof _CIQ!==e?_CIQ:E.CIQ,!t.Studies)console.error("darvasBox feature requires first activating studies feature.");else{s="au",s+="t",s+="o",n="#5F",n+="7CB8",r="h",r+="i",r+="gh/lo",r+="w",t.Studies.calculateDarvas=function(f,A){var p=we,g,m,b,C,F,w,U,B,k,y,S,T,_,L,H,P,N,v,x,M,D,Q,q,O,R,V,K,Y,G,J,Z,ee,X,ne;for(g="A",g+="D",g+="V",m="Lo",m+="s",m+="s",b="P",b+="rofit",C="**",C+="*******",C+="********",F="Volume Spi",F+="ke",w=A.chart.scrubbed,p.X_C(0),U=p.p9k("0",1),B=parseInt(A.inputs["ATH Lookback Period"],10),A.inputs[F]&&(k="A",k+="D",k+="V",t.Studies.MA("simple",B,"Volume",0,k,f,A)),y=parseFloat(A.inputs["Volume % of Avg"])/100,S="none",T={},_=null,L=null,H=null,P=parseFloat(A.inputs["Level Offset"]),N=!1,N&&console.log(C),x={},["Darvas","Ghost",b,m,"ATH",g,"Spike"].forEach(function(Ae){p.X_C(131),p.p9k(174,14,7,8,7),p.a97(65);var he=p.A0s(2,4318,2141);p.X_C(132);var ge=p.p9k(1,19,6,7541,852146);p.a97(133),p.A0s(2565,2,15,5118),p.a97(134);var ie=p.p9k(0,5,1,0,4);x[Ae]=Ae+(he>=ge?"376.99"*ie:" ")+A.name}),v=A.startFrom-1;v>0;v--)if(M=w[v],M[x.Darvas]||M[x.Ghost])for(var se in x)M[se]=null;else{U=M[x.ATH]||0,L=M[x.Profit],H=M[x.Loss];break}for(v;v<w.length;v++)if(D=w[v],!!D){if(parseFloat(A.inputs["Price Minimum"])<=w[U].Close){if(Q="n",Q+="o",Q+="ne",_&&(!_.End||v==_.End+("1">>0))&&(w[v-("1"-0)].Close>T.High?T={State:1,High:2*T.High-T.Low,Low:T.High,Start:v,End:("2"^0)*T.End-T.Start+1}:_=null,_&&(D[x.Ghost]=t.clone(T),N&&console.log("Ghost begin:"+D.DT),T.State=0,w[T.End]&&(q="Gh",q+="ost ",q+="end:",w[T.End][x.Ghost]=t.clone(T),N&&console.log(q+w[T.End].DT)),_={Start:T.Start,End:T.End},L=T.High+P,(!H||H<T.Low-P)&&(H=T.Low-P))),D[x.Profit]=L,D[x.Loss]=H,(D.Close>=L||A.inputs["Exit Field"]=="high/low"&&D.High>=L)&&(L=null),S==Q&&v==U+3&&!w[U+2][x.Darvas]&&!w[U+("1"<<0)][x.Darvas]&&!w[U][x.Darvas]&&w[U].High>D.High&&(O="h",O+="i",O+="g",O+="h",S=O),S=="high"&&(D.High>w[U].High?(R="n",R+="one",S=R):w[v-("3"<<0)].Low<w[v-2].Low&&w[v-3].Low<w[v-1].Low&&w[v-("3"-0)].Low<D.Low&&(V="d",V+="a",V+="rva",V+="s",T={State:1,High:w[U].High,Low:w[v-3].Low,Start:U},w[U][x.Darvas]=t.clone(T),S=V,N&&console.log("Darvas begin:"+w[U].DT),N&&console.log("Darvas established:"+D.DT),_&&(K="G",K+="host e",K+="nd:",_.End>v&&w[_.Start]&&(D[x.Ghost]=t.clone(w[_.Start][x.Ghost]),D[x.Ghost].End=v,w[_.End]&&(delete w[_.End][x.Ghost],N&&console.log("Ghost End removed:"+w[_.End].DT))),D[x.Ghost].State=0,w[_.Start][x.Ghost].End=v,N&&console.log(K+D.DT),_=null),L=T.High+P,(!H||H<T.Low-P)&&(H=T.Low-P))),S=="darvas"&&(Y="non",Y+="e",G="no",G+="n",G+="e",D.Close>T.High?_={}:A.inputs["Exit Field"]=="high/low"&&D.High>T.High?_={}:D.Close<T.Low?S=G:A.inputs["Exit Field"]=="high/low"&&D.Low<T.Low&&(S="none"),_?S="none":S=="none"&&(L=null,H=null),A.inputs["Ghost Boxes"]||(_=null),S==Y)){J="Darva",J+="s",J+=" en",J+="d:";for(var oe=T.Start+("1"^0);oe<v;oe++)w[oe][x.Darvas]=t.clone(T);T.State=0,T.End=v,D[x.Darvas]=t.clone(T),N&&console.log(J+D.DT),D[x.ATH]=U;continue}H&&(Z="Exit Fiel",Z+="d",(D.Close<T.Low||A.inputs[Z]=="high/low"&&D.Low<T.Low)&&(ee="Exit F",ee+="ield",X="darv",X+="as",S==X&&(S="none"),(D.Close<H||A.inputs[ee]=="high/low"&&D.Low<H)&&(L=null,H=null),_&&(_.End>v&&w[_.Start]&&(D[x.Ghost]=t.clone(w[_.Start][x.Ghost]),D[x.Ghost].End=v,w[_.End]&&(delete w[_.End][x.Ghost],N&&console.log("Ghost End removed:"+w[_.End].DT))),D[x.Ghost].State=0,w[_.Start][x.Ghost].End=v,N&&console.log("Ghost end:"+D.DT),_=null)))}if(D.High>=w[U].High&&(U=v,N&&console.log("All Time High:"+D.DT)),(v<"3">>0||D.High>=w[v-1].High&&D.High>=w[v-2].High&&D.High>=w[v-3].High)&&v-U>=B){ne="A",ne+="ll Time High:",U=v;for(var ae=0;ae<B&&!(v-ae<0);ae++)w[v-ae].High>w[U].High&&(p.X_C(1),U=p.A0s(v,ae));N&&console.log(ne+D.DT)}A.inputs["Volume Spike"]&&v>B&&v==U&&D[x.ADV]*y<D.Volume&&(D[x.Spike]=1,N&&console.log("Volume Spike:"+D.DT)),D[x.ATH]=U}},t.Studies.displayDarvas=function(f,A,p){var g=we,m,b,C,F,w,U,B,k,y,S,T,_,L,H,P,N,v,x,M,D,Q,q,O,R,V,K,Y,G,J,Z,ee,X;if(m="a",m+="u",m+="t",m+="o",b=t.Studies.determineColor(A.outputs.Levels),(!b||b==m||t.isTransparent(b))&&(b=f.defaultColor),C=t.Studies.determineColor(A.outputs.Darvas),(!C||C=="auto"||t.isTransparent(C))&&(C=f.defaultColor),F=t.Studies.determineColor(A.outputs.Ghost),(!F||F=="auto"||t.isTransparent(F))&&(F=f.defaultColor),w=f.panels[A.panel],U=A.getContext(f),S=f.layout.candleWidth-("2"-0),S<2&&(S=1),f.startClip(A.panel),A.inputs["Stop Levels"]){for(U.setLineDash&&U.setLineDash([2,2]),U.lineWidth=2,U.strokeStyle=b,U.beginPath(),B=0;B<p.length;B++)k=p[B],g.X_C(1),T=p[g.p9k(B,1)],k&&(y=k["Loss "+A.name]?Math.floor(f.pixelFromPrice(k["Loss "+A.name],w)):null,_=T&&T["Loss "+A.name]?Math.floor(f.pixelFromPrice(T["Loss "+A.name],w)):null,y&&(k.candleWidth&&(S=Math.floor(Math.max(1,k.candleWidth))),L=Math.floor(f.pixelFromBar(B,w.chart)+S/2),H=Math.floor(f.pixelFromBar(B,w.chart)-S/2),_&&_>=y?U.lineTo(H,y):B===0?U.moveTo(f.chart.left,y):U.moveTo(H,y),U.lineTo(L,y)));U.stroke(),U.setLineDash&&U.setLineDash([]),g.X_C(46),U.lineWidth=g.p9k("1",32)}P=-10,v=0,M=-10,Q=0,O=!1,R=!1,g.a97(31);var ne=g.p9k(6,2,10);for(V=U.measureText("▲").width/ne,K=0,B=0;B<p.length;B++)if(Y="Gh",Y+="ost",Y+=" ",G="S",G+="pike",G+=" ",!!p[B]){if((p[B].Close||p[B].Close==="0"<<32)&&(K=B),p[B][G+A.name]&&(J="b",J+="o",J+="tto",J+="m",U.fillStyle=C,U.textBaseline=J,Z=f.pixelFromPrice(p[B].High,f.chart.panel),U.fillText("▼",f.pixelFromBar(B)-V,Z-5)),p[B].candleWidth&&(S=Math.floor(Math.max("1"|1,p[B].candleWidth))),p[B]["Darvas "+A.name]){if(k=p[B]["Darvas "+A.name],k.State=="1"*1&&!O)P=Math.floor(f.pixelFromBar(B,w.chart)-S/("2"-0)),N=Math.floor(f.pixelFromPrice(k.High,w)),x=Math.floor(f.pixelFromPrice(k.Low,w))-N,O=!0;else if(k.State===0){g.X_C(135);var se=g.p9k(1,16,134,6,20);v=Math.floor(f.pixelFromBar(B,w.chart)+S/se)-P,N=Math.floor(f.pixelFromPrice(k.High,w)),x=Math.floor(f.pixelFromPrice(k.Low,w))-N,U.strokeStyle=C,U.fillStyle=C,A.inputs["Stop Levels"]?U.globalAlpha=.3:(U.strokeRect(P,N,v,x),g.X_C(0),U.globalAlpha=g.A0s("0.2",1)),U.fillRect(P,N,v,x),U.globalAlpha=1,O=!1}}if(p[B][Y+A.name]&&A.inputs["Ghost Boxes"]){if(k=p[B]["Ghost "+A.name],k.State==1&&!R)M=Math.floor(f.pixelFromBar(B,w.chart)-S/2),D=Math.floor(f.pixelFromPrice(k.High,w)),Q=Math.floor((k.End-k.Start+1)*f.layout.candleWidth+S/2),q=Math.floor(f.pixelFromPrice(k.Low,w))-D,R=!0;else if(k.State===0){k.Start==k.End&&(M=Math.floor(f.pixelFromBar(B,w.chart)-S/2)),g.X_C(136);var oe=g.p9k(3,14,1,1,9);Q=Math.floor(f.pixelFromBar(B,w.chart)+S/oe)-M,D=Math.floor(f.pixelFromPrice(k.High,w)),q=Math.floor(f.pixelFromPrice(k.Low,w))-D,U.strokeStyle=F,U.fillStyle=F,A.inputs["Stop Levels"]?(g.X_C(0),U.globalAlpha=g.p9k("0.3",1)):(U.strokeRect(M,D,Q,q),U.globalAlpha=.2),U.fillRect(M,D,Q,q),U.globalAlpha=1,R=!1}}}O&&(v=Math.floor(f.pixelFromBar(K,w.chart)+S/2)-P,U.strokeStyle=C,U.fillStyle=C,A.inputs["Stop Levels"]?U.globalAlpha=.3:(U.beginPath(),g.X_C(22),U.moveTo(g.A0s(v,2,P),N),U.lineTo(P,N),g.a97(2),U.lineTo(P,g.p9k(x,N)),g.a97(22),U.lineTo(g.A0s(v,2,P),g.A0s(x,N,g.a97(2))),U.stroke(),U.globalAlpha=.2),g.a97(0),U.fillRect(P,N,g.A0s(2,v),x),U.globalAlpha=1),R&&(U.strokeStyle=F,U.fillStyle=F,A.inputs["Stop Levels"]?U.globalAlpha=.3:(U.strokeRect(M,D,Q,q),U.globalAlpha=+"0.2"),U.fillRect(M,D,Q,q),U.globalAlpha=1),(O||R)&&(ee="St",ee+="op",ee+=" L",ee+="evels",A.inputs[ee]&&(U.setLineDash&&U.setLineDash([2,2]),U.lineWidth=2,U.strokeStyle=b,X=Math.floor(f.pixelFromBar(K-("1"-0),w.chart)+S/2),y&&(U.beginPath(),U.moveTo(X,y),U.lineTo(O?P+2*v:M+Q,y),U.stroke()),U.setLineDash&&U.setLineDash([]),U.lineWidth=1),O=!1,R=!1),f.endClip()},i=142626007,a=1873061847,o=2;for(var d=1;we.B8M(d.toString(),d.toString().length,2798)!==i;d++)c="Level O",c+="ff",c+="s",c+="et",l="Pr",l+="ice",l+=" Mi",l+="nimum",t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{Darvas:{name:l,underlay:!1,calculateFN:t.Studies.calculateDarvas,seriesFN:t.Studies.displayDarvas,inputs:{"ATH Lookback Period":884,"Exit Field":[c,"ATH Lookback Period"],"Ghost Boxes":!1,"Stop Levels":!0,"Level Offset":1268,"Price Minimum":8,"Volume Spike":!0,"Volume % of Avg":928},outputs:{Darvas:"Price Minimum",Ghost:"Volume % of Avg",Levels:"Price Minimum"},customRemoval:!1,attributes:{"Price Minimum":{min:1177,step:1611},yaxisDisplayValue:{hidden:!1},panelName:{hidden:!1},flippedEnabled:{hidden:!1}}}}),o+=2;we.B8M(o.toString(),o.toString().length,60608)!==a&&(u="Pr",u+="ice",u+=" Minimum",h="Level ",h+="O",h+="ffse",h+="t",t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{Darvas:{name:"Price Minimum",underlay:!1,calculateFN:t.Studies.calculateDarvas,seriesFN:t.Studies.displayDarvas,inputs:{"ATH Lookback Period":884,"Exit Field":[h,"ATH Lookback Period"],"Ghost Boxes":!1,"Stop Levels":!0,"Level Offset":"1268"|0,"Price Minimum":"8">>32,"Volume Spike":!0,"Volume % of Avg":"928"<<0},outputs:{Darvas:u,Ghost:"Volume % of Avg",Levels:"Price Minimum"},customRemoval:!1,attributes:{"Price Minimum":{min:1177,step:"1611"|65},yaxisDisplayValue:{hidden:!1},panelName:{hidden:!1},flippedEnabled:{hidden:!1}}}})),t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{Darvas:{name:"Darvas Box",underlay:!0,calculateFN:t.Studies.calculateDarvas,seriesFN:t.Studies.displayDarvas,inputs:{"ATH Lookback Period":100,"Exit Field":["close",r],"Ghost Boxes":!0,"Stop Levels":!1,"Level Offset":.01,"Price Minimum":5,"Volume Spike":!1,"Volume % of Avg":400},outputs:{Darvas:n,Ghost:"#699158",Levels:s},customRemoval:!0,attributes:{"Price Minimum":{min:+"0.01",step:.01},yaxisDisplayValue:{hidden:!0},panelName:{hidden:!0},flippedEnabled:{hidden:!0}}}})}};uc=E=>{var e;e=typeof _CIQ<"u"?_CIQ:E.CIQ,e.Studies?(e.Studies.calculateDetrendedPrice=function(t,s){var n,r,i,a,o,c;if(n="M",we.K_Q(),n+="A",r=s.chart.scrubbed,r.length<s.days+("1">>0)){s.error=!0;return}i=s.inputs.Field,(!i||i=="field")&&(i="Close"),a=Math.floor(s.days/2+1),e.Studies.MA(s.inputs["Moving Average Type"],s.days,i,-a,n,t,s);for(var l=Math.max(s.days-a-1,s.startFrom-a);l<r.length-a;l++)l<0||(o=e.Studies.getQuoteFieldValue(r[l],i,s.subField),c=e.Studies.getQuoteFieldValue(r[l],"MA "+s.name),o!==null&&c!==null&&(we.a97(1),r[l]["Result "+s.name]=we.p9k(o,c)))},e.Studies.studyLibrary=e.extend(e.Studies.studyLibrary,{Detrended:{name:"Detrended Price Oscillator",calculateFN:e.Studies.calculateDetrendedPrice,inputs:{Period:14,Field:"field","Moving Average Type":"ma"}}})):console.error("detrended feature requires first activating studies feature.")};hc=E=>{var e=we;e.K_Q();var t,s;t=typeof _CIQ<"u"?_CIQ:E.CIQ,t.Studies?(s="Dispar",s+="ity Index",t.Studies.calculateDisparity=function(n,r){var i,a,o,c,l,u,h,d,f;i="_",i+="M",i+="A",a="fi",a+="eld",o=806090525,c=122534982,l=2;for(var A=1;e.N2s(A.toString(),A.toString().length,62203)!==o;A++)u=r.chart.scrubbed,l+=2;if(e.B8M(l.toString(),l.toString().length,93490)!==c&&(u=r.chart.scrubbed),u=r.chart.scrubbed,u.length<r.days+1){r.error=!0;return}h=r.inputs.Field,(!h||h==a)&&(h="Close"),t.Studies.MA(r.inputs["Moving Average Type"],r.days,h,"0"|0,i,n,r);for(var p=Math.max(r.startFrom,r.days-1);p<u.length;p++)if(d="_",d+="M",d+="A",d+=" ",!!u[p]&&(f=u[p][d+r.name],f)){e.X_C(119);var g=e.p9k(18,524,86,6);e.a97(11);var m=e.A0s(12,7,83);u[p]["Result "+r.name]=g*(t.Studies.getQuoteFieldValue(u[p],h)/f-m)}},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{Disparity:{name:s,calculateFN:t.Studies.calculateDisparity,inputs:{Period:14,Field:"field","Moving Average Type":"ma"}}})):console.error("disparity feature requires first activating studies feature.")};function Ao(E,e){(e==null||e>E.length)&&(e=E.length);for(var t=0,s=Array(e);t<e;t++)s[t]=E[t];return s}dc=E=>{var e=we,t,s,n,r;t="un",t+="defin",e.M_N(),t+="ed",s=typeof _CIQ!==t?_CIQ:E.CIQ,s.Studies?(n="m",n+="a",r="Ease of Moveme",r+="nt",s.Studies.calculateEaseOfMovement=function(i,a){var o,c,l,u,h,d,f,A,p;if(o="R",o+="es",o+="ult",c="_E",c+="OM",c+="1",c+=" ",l=a.chart.scrubbed,l.length<a.days){a.error=!0;return}for(var g=Math.max(1,a.startFrom);g<l.length;g++){u="_E",u+="OM",u+="1",u+=" ",h=(l[g].High+l[g].Low)/2,e.X_C(77);var m=e.p9k(10,18,31,18,6);e.a97(137);var b=e.p9k(13,1,13,0);e.X_C(98);var C=e.A0s(15,3,30,103);d=(l[g-m].High+l[g-b].Low)/C,e.X_C(1),f=e.p9k(h,d),e.X_C(138);var F=e.p9k(899999840,5,10,16,5e8);A=l[g].Volume/F/(l[g].High-l[g].Low),e.X_C(7),p=e.p9k(f,A),isFinite(p)?l[g]["_EOM1 "+a.name]=p:l[g][u+a.name]=NaN}s.Studies.MA(a.inputs["Moving Average Type"],a.days,c+a.name,0,o,i,a)},s.Studies.studyLibrary=s.extend(s.Studies.studyLibrary,{EOM:{name:r,calculateFN:s.Studies.calculateEaseOfMovement,inputs:{Period:14,"Moving Average Type":n}}})):console.error("easeOfMovement feature requires first activating studies feature.")};fc=E=>{var e=we,t,s,n;e.K_Q(),t="undefin",t+="ed",s=typeof _CIQ!==t?_CIQ:E.CIQ,s.Studies?(n="Ehl",n+="er ",n+="Fisher Transform",s.Studies.calculateEhlerFisher=function(r,i){var a,o,c,l,u,h,d,f,A;a=134934146,o=70149591,c=2;for(var p=1;e.N2s(p.toString(),p.toString().length,5603)!==a;p++)l=i.chart.scrubbed,c+=2;if(e.B8M(c.toString(),c.toString().length,"54165"|1)!==o&&(l=i.chart.scrubbed),l=i.chart.scrubbed,l.length<i.days+1){i.error=!0;return}if(u=0,i.startFrom>1){e.X_C(1);var g=e.p9k(5,4);u=l[i.startFrom-g]["_n "+i.name]}function m(B,k){var y,S,T;y=Number.MAX_VALUE,e.K_Q(),e.a97(8);var _=e.A0s(0,7,6);S=Number.MAX_VALUE*_;for(var L=k-B+1;L<=k;L++){e.a97(2);var H=e.A0s(2,0);T=(l[L].High+l[L].Low)/H,y=Math.min(y,T),S=Math.max(S,T)}return[y,S]}for(var b=i.startFrom;b<l.length&&(h="_",h+="n",h+=" ",d=l[b],!d.futureTick);b++){if(b<i.days-1){d["EF "+i.name]=d["EF Trigger "+i.name]=u;continue}f=m(i.days,b),e.X_C(139);var C=e.p9k(20,55,10,12,15);e.a97(140);var F=e.p9k(19,0,13,18,13);u=.33*("2"<<0)*(((l[b].High+l[b].Low)/C-f[0])/Math.max(+"0.000001",f[F]-f[0])-.5)+.67*u,u>0?u=Math.min(u,+"0.9999"):u<0&&(u=Math.max(u,-.9999)),A=b?l[b-1]["EF "+i.name]:0,e.a97(132);var w=e.A0s(32,17,10,160,818);e.a97(32);var U=e.p9k(4,8,511,16);d["EF "+i.name]=+"0.5"*Math.log((("1"<<w)+u)/(U-u))+.5*A,d["EF Trigger "+i.name]=A,d[h+i.name]=u}},s.Studies.studyLibrary=s.extend(s.Studies.studyLibrary,{"Ehler Fisher":{name:n,calculateFN:s.Studies.calculateEhlerFisher,inputs:{Period:10},outputs:{EF:"auto","EF Trigger":"#FF0000"}}})):console.error("ehlerFisher feature requires first activating studies feature.")};pc=E=>{var e=we,t,s,n,r,i;e.K_Q(),t=typeof _CIQ<"u"?_CIQ:E.CIQ,t.Studies?(n="#",n+="5",n+="F7",n+="CB8",r="#8BC1",r+="76",i="#",i+="00DD0",i+="0",t.Studies.calculateElderImpulse=function(a,o){var c,l,u,h,d,f,A,p,g,m,b,C,F,w,U;if(c="m",c+="a",c+="cd",l=a.layout.aggregationType,u=a.chart.customChart,u){if(o.disabled||l&&l!="ohlc"){o.disabled||(o.error="Elder Impulse study is not compatible with aggregated chart types."),u.colorFunction&&(u.priorColorFunction=u.colorFunction),u.chartType&&(u.priorChartType=u.chartType),u.colorFunction=null,u.chartType=null,a.setMainSeriesRenderer();return}u.priorColorFunction&&(u.colorFunction=u.priorColorFunction,u.priorColorFunction=null,u.chartType=u.priorChartType,u.priorChartType=null,a.setMainSeriesRenderer())}h=o.chart.scrubbed,d=o.outputs.Bullish,f=o.outputs.Bearish,A=o.outputs.Neutral,e.X_C(16),t.Studies.MA("exponential",13,"Close",e.A0s(0,"0"),"_MA",a,o),e.X_C(11);var B=e.p9k(15,54640,812770);e.a97(12),e.A0s(7,9923,59543,2),e.a97(2);var k=e.A0s(5450,1363);e.X_C(1);var y=e.A0s(7928,8);o.macd=new t.Studies.StudyDescriptor((B>=k?"_":y)+o.name,c,o.panel),o.macd.chart=o.chart,o.macd.days=o.days,o.macd.startFrom=o.startFrom,o.macd.inputs={"Fast MA Period":12,"Slow MA Period":"26"<<32,"Signal Period":9},o.macd.outputs={_MACD:null,_Signal:null},t.Studies.calculateMACD(a,o.macd),e.M_N();for(var S=o.startFrom;S<h.length;S++)g="_",g+="his",g+="t",m="_",m+="M",m+="A ",b="_",b+="MA ",C="_",C+="h",C+="is",C+="t",F="_hi",F+="st",w="_MA",w+=" ",U="_",U+="M",U+="A",U+=" ",S===0?p=A:h[S][U+o.name]>h[S-1][w+o.name]&&h[S]["_"+o.name+F]>h[S-1]["_"+o.name+C]?p=d:h[S][b+o.name]<h[S-1][m+o.name]&&h[S]["_"+o.name+"_hist"]<h[S-1]["_"+o.name+g]?p=f:p=A,h[S]["Result "+o.name]=p},t.Studies.calculateElderRay=function(a,o){var c,l,u,h,d;if(c="_",c+="h",c+="ist",c+="2",l="Clo",l+="se",u="exponen",u+="tia",u+="l",h=o.chart.scrubbed,h.length<o.days){o.error=!0;return}t.Studies.MA(u,o.days,l,0,"_EMA",a,o);for(var f=Math.max(o.startFrom,o.days-1);f<h.length;f++)d="_",d+="E",d+="M",d+="A ",h[f][o.name+"_hist1"]=h[f].High-h[f][d+o.name],h[f][o.name+"_hist2"]=h[f].Low-h[f]["_EMA "+o.name];o.outputMap={},o.outputMap[o.name+"_hist1"]="",o.outputMap[o.name+c]=""},t.Studies.calculateElderForce=function(a,o){var c,l;if(e.K_Q(),c="Resul",c+="t",l=o.chart.scrubbed,l.length<o.days){o.error=!0;return}for(var u=Math.max(1,o.startFrom);u<l.length;u++){e.a97(112);var h=e.p9k(7,8,1,0);l[u]["_EF1 "+o.name]=l[u].Volume*(l[u].Close-l[u-h].Close)}t.Studies.MA("exponential",o.days,"_EF1 "+o.name,0,c,a,o)},t.Studies.initElderImpulse=function(a,o,c,l,u,h){var d,f,A;if(d=t.Studies.initializeFN(a,o,c,l,u,h),!u.calculateOnly){if(!a.chart||!a.chart.panel||a.chart.customChart&&a.chart.customChart.owner!==d.name){f="elderca",f+="nnotadd",A="not",A+="ification",a.dispatch(A,f);return}a.chart.customChart={owner:d.name,chartType:"colored_bar",colorFunction:function(p,g,m){e.M_N();var b,C,F;if(b="o",b+="bj",b+="e",b+="ct",C="Re",C+="sul",C+="t",C+=" ",!!g)return F=g[C+d.name],F&&typeof F==b&&(F=F.color),F}},a.setMainSeriesRenderer()}return e.K_Q(),d},t.Studies.displayElderForce=function(a,o,c){var l,u,h,d;t.Studies.displaySeriesAsLine(a,o,c),l=t.Studies.determineColor(o.outputs.Result),u=a.panels[o.panel],h=o.getYAxis(a),d={skipTransform:u.name!=o.chart.name,panelName:o.panel,band:"Result "+o.name,threshold:0,color:l,yAxis:h},!o.highlight&&a.highlightedDraggable&&(d.opacity=.3),d.direction=1,t.preparePeakValleyFill(a,d),d.direction=-1,t.preparePeakValleyFill(a,d)},t.Studies.displayElderRay=function(a,o,c){var l,u,h,d,f,A,p,g,m,b,C,F,w;l=a.panels[o.panel],u=o.getContext(a),h=o.getYAxis(a),d=a.pixelFromPrice(0,l,h),e.a97(141);var U=e.A0s(18,11,0,8,68);e.M_N(),f=a.layout.candleWidth-U;function B(y,S,T,_){u.fillStyle=t.Studies.determineColor(o.outputs[T]),u.fillRect(Math.floor(a.pixelFromBar(y,l.chart)-f/2+f*S),Math.floor(d),Math.floor(f*(1-2*S)),Math.floor(a.pixelFromPrice(w[o.name+_],l,h)-d))}f<2&&(f=1),a.canvasColor("stx_histogram"),A=u.fillStyle,o.underlay||(u.globalAlpha=1),a.startClip(o.panel),!o.highlight&&a.highlightedDraggable&&(u.globalAlpha*=.3);for(var k=0;k<c.length;k++)p="Elder Bear ",p+="Power",g="_h",g+="i",g+="st1",m="Elder Bull ",m+="Po",m+="w",m+="er",b="_",b+="h",b+="i",b+="st1",C="Elder",C+=" Bear Pow",C+="er",F="Eld",F+="er Bul",F+="l Po",F+="wer",w=c[k],w&&(w.candleWidth&&(f=Math.floor(Math.max(1,w.candleWidth-2))),w[o.name+"_hist1"]>0&&B(k,0,F,"_hist1"),w[o.name+"_hist2"]<0&&(e.a97(43),B(k,e.p9k("0",0),C,"_hist2")),w[o.name+b]<0&&B(k,.1,m,g),w[o.name+"_hist2"]>0&&B(k,.1,p,"_hist2"));a.endClip(),u.fillStyle=A},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{"Elder Force":{name:"Elder Force Index",calculateFN:t.Studies.calculateElderForce,seriesFN:t.Studies.displayElderForce,inputs:{Period:"13"<<32}},"Elder Ray":{name:"Elder Ray Index",seriesFN:t.Studies.displayElderRay,calculateFN:t.Studies.calculateElderRay,centerline:0,inputs:{Period:13},outputs:{"Elder Bull Power":i,"Elder Bear Power":"#FF0000"}},"Elder Impulse":{name:"Elder Impulse System",calculateFN:t.Studies.calculateElderImpulse,initializeFN:t.Studies.initElderImpulse,seriesFN:null,customRemoval:!0,underlay:!0,inputs:{},outputs:{Bullish:r,Bearish:"#DD3E39",Neutral:n},removeFN:function(a,o){!a.chart||a.chart.customChart&&a.chart.customChart.owner!==o.name||(a.chart.customChart=null,e.K_Q(),a.setMainSeriesRenderer())}}})):(s="elder feature requires first",s+=" activating studies feature.",console.error(s))};Ac=E=>{var e,t,s;e=typeof _CIQ<"u"?_CIQ:E.CIQ,e.Studies?(t="-1 ",t+="to 1",s="Fractal",s+=" Chaos ",s+="Oscillator",e.Studies.calculateFractalChaos=function(n,r){var i=we;i.M_N();var a,o,c,l,u,h,d,f,A,p;if(a=r.chart.scrubbed,o=0,c=0,l=0,r.startFrom&&r.type=="Fractal Chaos Bands"){u="F",u+="ractal Low ",i.X_C(1);var g=i.p9k(20,19);o=a[r.startFrom-g]["Fractal High "+r.name],i.X_C(1);var m=i.p9k(7,6);c=a[r.startFrom-m][u+r.name]}for(var b=Math.max(4,r.startFrom);b<a.length&&(h="Res",h+="ul",h+="t ",!a[b].futureTick);b++){for(d=!isNaN(a[b].High),f=!isNaN(a[b].Low),(d||f)&&(a[b][h+r.name]=0),l=0,A=0;A<=b&&!(!a[b-A]||a[b-A].High>a[b-2].High||A<2&&a[b-A].High==a[b-("2"<<64)].High);A++)if(a[b-A].High<a[b-2].High&&l++,l==4){o=a[b-2].High;break}for(r.type=="Fractal Chaos Bands"?(p="Fractal ",p+="H",p+="ig",p+="h ",d&&(a[b][p+r.name]=o>0?o:null)):l==4&&(a[b]["Result "+r.name]=1),l=0,A=0;A<=b&&!(!a[b-A]||a[b-A].Low<a[b-2].Low||A<2&&a[b-A].Low==a[b-2].Low);A++)if(a[b-A].Low>a[b-2].Low&&l++,l==4){c=a[b-2].Low;break}r.type=="Fractal Chaos Bands"?f&&(a[b]["Fractal Low "+r.name]=c>0?c:null):l=="4"<<0&&(a[b]["Result "+r.name]=-1)}},e.Studies.studyLibrary=e.extend(e.Studies.studyLibrary,{"Fractal Chaos":{name:s,range:t,calculateFN:e.Studies.calculateFractalChaos,inputs:{},centerline:null},"Fractal Chaos Bands":{name:"Fractal Chaos Bands",overlay:!0,calculateFN:e.Studies.calculateFractalChaos,seriesFN:e.Studies.displayChannel,inputs:{"Channel Fill":!0},outputs:{"Fractal High":"auto","Fractal Low":"auto","Fractal Channel":"auto"}}})):console.error("fractalChaos feature requires first activating studies feature.")};gc=E=>{var e=we,t,s,n,r,i;t=734959141,s=-1898457934,n=2;for(var a=1;e.B8M(a.toString(),a.toString().length,76755)!==t;a++)r=!_CIQ!=""?_CIQ:E.CIQ,e.a97(17),n+=e.p9k(64,"2");e.M_N(),e.B8M(n.toString(),n.toString().length,77436)!==s&&(r=!_CIQ!=""?_CIQ:E.CIQ),r=typeof _CIQ<"u"?_CIQ:E.CIQ,r.Studies?function(){var c,l;c="#80",c+="80";function u(F,w,U,B,k,y){var S,T;S="P",S+="S",S+="AR",T=new r.Studies.StudyDescriptor(y,S,w.panel,{"Minimum AF":U,"Maximum AF":B}),T.startFrom=w.startFrom,T.chart=w.chart,r.Studies.calculatePSAR(F,T)}function h(F,w){if(!F.chart||!F.chart.panel||F.chart.customChart&&F.chart.customChart.owner!==w.name){F.dispatch("notification","gonogocannotadd");return}return F.chart.customChart={owner:w.name,colorFunction:function(U,B,k){var y,S,T,_;return y="au",y+="to",S="o",S+="bj",e.M_N(),S+="e",S+="ct",e.X_C(111),T=B[`${e.A0s("r ","C","ol","o")}${w.name}`],T&&typeof T===S&&(T=T.color),_="#00000000",T===y?U.defaultColor:T||_}},F.setMainSeriesRenderer(),!0}c+="80";function d(F,w,U,B,k,y,S){e.M_N(),r.Studies.MA(k,U,y,B,S,F,w)}l="GoNoGo study is not compatible with selected aggregation type.",r.Studies.studyLibrary=r.extend(r.Studies.studyLibrary,{"GoNoGo Trend":{name:"GoNoGo - Trend",overlay:!0,initializeFN:g,calculateFN:f,seriesFN:C,removeFN:A,inputs:{},outputs:{Go:"#00ffff",NoGo:"#b500b5","Text Go":c,"Text NoGo":"#ffffff","Score 0":"#8b008b","Score 1":"#ee82ee","Score 2":"#d2691e","Score 3":"#7fffd4","Score 4":"#00bfff"},attributes:{yaxisDisplayValue:{hidden:!0},panelName:{hidden:!0},underlayEnabled:{hidden:!0}}}});function f(F,w){var U,B,k,y,S,T,_,L,H,P,N;if(U="m",U+="ym",U+="ac",U+="d",B="e",B+="m",B+="a",k="em",k+="a",y="s",y+="m",y+="a",S=w.chart.scrubbed,!!Array.isArray(S)&&(e.K_Q(),!!b(F,w))){e.X_C(0),m(F,w,e.p9k("25",1),"Close","mtm"),d(F,w,5,0,y,"mtm "+w.name,"mtmavg"),e.a97(17),p(F,w,12,26,e.A0s(64,"9"),k,B,"Close",U),e.X_C(16),d(F,w,e.p9k(0,"50"),0,"sma","Close","myma"),u(F,w,.2,.2,.2,"mysar"),T=`Trend ${w.name}`,_=`Bull ${w.name}`,L=`Bear ${w.name}`,H=`Color ${w.name}`,w.outputMap={};for(var v=w.startFrom;v<S.length;v++)P=S[v],!(!P||typeof P!="object")&&(N=0,P.Close>P[`myma ${w.name}`]&&N++,P.Close>P["Result mysar"]&&N++,P["MACD mymacd"]>0&&P["Signal mymacd"]>0&&N++,P[`mtmavg ${w.name}`]>0&&N++,P[T]=N,P[_]=0,P[L]=0,v>0&&(P[T]>2.5&&S[v-1][T]<=2.5&&(P[_]=1),P[T]<+"2.0"&&S[v-1][T]>=2&&(P[L]=-1)),e.a97(2),P[H]=w.outputs[e.A0s(N,"Score ")])}}function A(F,w){!F.chart||F.chart.customChart&&F.chart.customChart.owner!==w.name||(F.chart.customChart=null,F.setMainSeriesRenderer())}function p(F,w,U,B,k,y,S,T,_){var L,H;L={"Fast MA Period":U,"Slow MA Period":B,"Signal Period":k,"Moving Average Type":y,"Signal MA Type":S,Field:T},H=new r.Studies.StudyDescriptor(_,"macd",w.panel,L),H.startFrom=w.startFrom,H.chart=w.chart,r.Studies.calculateMACD(F,H)}function g(F,w,U,B,k,y){var S;if(k.initialized||(k.yaxisDisplayValue=null,k.initialized=!0),S=r.Studies.initializeFN(F,w,U,B,k,y),k&&!k.panelName&&S&&S.panel&&(k.panelName=S.panel),k.calculateOnly)return S;if(h(F,S))return S.checkDisabled=!0,S}function m(F,w,U,B,k){var y,S,T,_;e.X_C(120),e.A0s(2376,9,2665,10),e.a97(21);var L=e.p9k(2266535,11,11445,6,18);e.a97(4);var H=e.p9k(11800,2,5902);e.a97(4),e.p9k(4030,2,16),e.X_C(65);var P=e.p9k(4069,4069,4059);e.X_C(65);var N=e.A0s(4687,4687,4705);y=new r.Studies.StudyDescriptor(k+(L==405.79?H:P>N?!0:" ")+w.name,"Momentum",w.panel,{Field:B,Period:U}),y.days=U,y.startFrom=w.startFrom,S=949028422,T=1617855922,_=2;for(var v=1;e.B8M(v.toString(),v.toString().length,15963)!==S;v++)y.parameters=w.parameters,_+=2;e.B8M(_.toString(),_.toString().length,"87871">>96)!==T&&(y.parameters=w.parameters),y.chart=w.chart,r.Studies.calculateRateOfChange(F,y)}function b(F,w){var U,B;if(U=F.chart.customChart,U){if(B=F.layout.aggregationType,w.disabled||B==="linebreak"||B==="kagi"||B==="pandf"||B==="renko")return w.disabled||(w.error=l),U.colorFunction&&(U.priorColorFunction=U.colorFunction),U.colorFunction=null,!1;U.priorColorFunction&&(U.colorFunction=U.priorColorFunction,U.priorColorFunction=null)}return!0}function C(F,w,U){var B,k,y,S,T,_,L,H,P,N,v,x,M,D,Q,q,O,R,V,K,Y,G;if(B="a",B+="u",B+="t",B+="o",k="Text",k+=" G",k+="o",!!Array.isArray(U)&&(y=F.panels[w.panel],!(!y||w.noDraw))){e.a97(25),S=`${e.p9k("ul","l ","B")}${w.name}`,T=`Bear ${w.name}`,_=Math.min(16,Math.max(8,Math.round(F.layout.candleWidth))),L=r.Studies.determineColor(w.outputs.Go),H=r.Studies.determineColor(w.outputs.NoGo),P=r.Studies.determineColor(w.outputs[k]),N=r.Studies.determineColor(w.outputs["Text NoGo"]),L==="auto"&&(L=F.defaultColor),H===B&&(H=F.defaultColor),P==="auto"&&(P=r.chooseForegroundColor(L)),N==="auto"&&(N=r.chooseForegroundColor(H)),v=F.chart.context,v.save();for(var J=0;J<U.length;J++)if(x=U[J],!!x&&(x[S]===1||x[T]===-1)){M="N",M+="o",M+="G",M+="o",e.a97(4);var Z=e.A0s(0,6,5);D=x[S]===Z,Q=F.pixelFromBar(J),q=D?F.pixelFromPrice(x.Low)+_:F.pixelFromPrice(x.High)-_,O=4,R=D?"Go":M,v.font=`${_}px bold Roboto, sans-serif`,V=v.measureText(R),K=V.width,e.X_C(22),Y=e.A0s(2,O,K),e.X_C(22),G=e.A0s(2,O,_),v.fillStyle=D?L:H,e.X_C(53),v.fillRect(e.A0s(Y,2,Q),e.p9k(G,"2",q,e.a97(142)),Y,G),v.fillStyle=D?P:N,v.textAlign="center",v.textBaseline="middle",v.fillText(R,Q,q)}v.restore()}}}():(i="GoNoGo - Trend study requires first activating stu",i+="dies feature.",console.error(i))};mc=E=>{var e=we,t,s,n,r;e.K_Q(),t=typeof _CIQ<"u"?_CIQ:E.CIQ,t.Studies?(s="H",s+="igh Minus ",s+="Low",n="a",n+="uto",r="Highest",r+=" High Value",t.Studies.calculateMaxHighMinLow=function(i,a){var o,c,l,u,h,d,f,A,p,g,m,b;if(o="Low ",o+="Period",e.M_N(),c="High Pe",c+="riod",l=a.chart.scrubbed,u=a.days,h=a.days,a.inputs["High Period"]&&(u=a.inputs[c]),a.inputs["Low Period"]&&(h=a.inputs[o]),l.length<Math.max(u,h)+("1">>32)){a.error=!0;return}if(d=Number.MAX_VALUE,f=Number.MAX_VALUE*-1,a.startFrom>1){for(A=1;A<u;A++)a.startFrom-A>=0&&(f=Math.max(f,l[a.startFrom-A].High));for(A=1;A<h;A++)a.startFrom-A>=0&&(d=Math.min(d,l[a.startFrom-A].Low))}for(var C=Math.max(0,a.startFrom-1);C<l.length;C++){if(p="Williams ",p+="%R",f=Math.max(f,l[C].High),d=Math.min(d,l[C].Low),C>=u&&l[C-u].High==f)for(f=l[C].High,A=1;A<u;A++)f=Math.max(f,l[C-A].High);if(C>=h&&l[C-h].Low==d)for(d=l[C].Low,A="1"*1;A<h;A++)d=Math.min(d,l[C-A].Low);if(g=0,a.type=="HHV")g=f;else if(a.type=="LLV")g=d;else if(a.type=="Donchian Width")e.X_C(1),g=e.p9k(f,d);else if(a.type=="GAPO"||a.type=="Gopala")g=Math.log(f-d)/Math.log(h);else if(a.type=="VT HZ Filter"){e.a97(1),g=e.p9k(f,d),l[C]["_MHML "+a.name]=g;continue}else if(a.type==p){m="R",m+="e",m+="sul",m+="t ",e.X_C(143);var F=e.A0s(84,6,96);g=F*(f-l[C].Close)/(f-d),l[C][m+a.name]=g;continue}if(C==l.length-1)break;l[C+1].futureTick||(a.type=="Donchian Channel"?(e.a97(144),l[e.A0s(C,64,"1")]["Donchian High "+a.name]=f,e.X_C(2),l[e.p9k(1,C)]["Donchian Low "+a.name]=d,e.a97(89),l[e.p9k("1",C)]["Donchian Median "+a.name]=e.A0s("2",d,f,e.a97(145))):(b="R",b+="esul",b+="t",b+=" ",e.a97(144),l[e.p9k(C,64,"1")][b+a.name]=g))}},t.Studies.calculateVerticalHorizontalFilter=function(i,a){var o,c,l,u,h;if(o=a.chart.scrubbed,o.length<a.days+1){a.error=!0;return}a.mhml=new t.Studies.StudyDescriptor(a.name,a.type,a.panel),a.mhml.chart=a.chart,a.mhml.days=a.days,a.mhml.startFrom=a.startFrom,a.mhml.inputs={},a.mhml.outputs={_MHML:null},t.Studies.calculateMaxHighMinLow(i,a.mhml),e.M_N(),c=0,l=[];for(var d=Math.max(1,a.startFrom-a.days);d<o.length;d++)u=Math.abs(o[d].Close-o[d-1].Close),l.push(u),c+=u,l.length==a.days&&(h="R",h+="e",h+="sult",h+=" ",o[d][h+a.name]=o[d]["_MHML "+a.name]/c,c-=l.shift())},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{"Donchian Channel":{name:"Donchian Channel",overlay:!0,calculateFN:t.Studies.calculateMaxHighMinLow,seriesFN:t.Studies.displayChannel,inputs:{"High Period":20,"Low Period":20,"Channel Fill":!0},outputs:{"Donchian High":"auto","Donchian Median":"auto","Donchian Low":"auto"}},"Donchian Width":{name:"Donchian Width",calculateFN:t.Studies.calculateMaxHighMinLow,inputs:{"High Period":20,"Low Period":20}},GAPO:{name:"Gopalakrishnan Range Index",calculateFN:t.Studies.calculateMaxHighMinLow},HHV:{name:r,calculateFN:t.Studies.calculateMaxHighMinLow,inputs:{Period:14}},LLV:{name:"Lowest Low Value",calculateFN:t.Studies.calculateMaxHighMinLow,inputs:{Period:14}},"Williams %R":{name:"Williams %R",calculateFN:t.Studies.calculateMaxHighMinLow,inputs:{Period:"14"^0},parameters:{init:{studyOverZonesEnabled:!0,studyOverBoughtValue:-20,studyOverBoughtColor:n,studyOverSoldValue:-80,studyOverSoldColor:"auto"}}},"VT HZ Filter":{name:"Vertical Horizontal Filter",calculateFN:t.Studies.calculateVerticalHorizontalFilter,inputs:{Period:28}},"High-Low":{name:s,calculateFN:function(i,a){var o;e.M_N(),o=a.chart.scrubbed;for(var c=a.startFrom;c<o.length;c++)o[c]["Result "+a.name]=o[c].High-o[c].Low},inputs:{}}})):console.error("highLowStudies feature requires first activating studies feature.")};yc=E=>{var e,t,s,n;e="u",e+="ndef",e+="i",e+="ned",t=typeof _CIQ!==e?_CIQ:E.CIQ,t.Studies?(s="#FF0",s+="000",n="Ichimoku C",n+="loud",n+="s",t.Studies.calculateIchimoku=function(r,i){var a=we,o,c,l,u,h,d,f,A,p,g,m,b,C,F;for(o="Base",o+=" L",o+="ine Perio",o+="d",c=i.chart.scrubbed,l={Base:Number(i.inputs[o]),Conv:Number(i.inputs["Conversion Line Period"]),LeadB:Number(i.inputs["Leading Span B Period"]),Lag:Number(i.inputs["Lagging Span Period"])},u=i.startFrom;u<c.length;u++)if(d="La",d+="gging S",d+="p",d+="an ",f="Con",f+="vers",f+="ion Line ",!!c[u]){h=S(l.Conv,u),a.a97(1);var w=a.p9k(19,18);a.X_C(8);var U=a.A0s(0,15,17);c[u][f+i.name]=(h[w]+h[0])/U,h=S(l.Base,u),a.X_C(32);var B=a.p9k(12,3,682,19);c[u]["Base Line "+i.name]=(h[1]+h[0])/("2"|B),!(u<l.Lag)&&(c[u-l.Lag][d+i.name]=c[u].Close)}for(A=[],u=Math.max(0,i.startFrom-l.Base);u<c.length;u++){h=S(l.LeadB,u),a.a97(4);var k=a.p9k(16,7,21);p=(c[u]["Conversion Line "+i.name]+c[u]["Base Line "+i.name])/k,a.a97(65);var y=a.p9k(4,64,16);g=(h[1]+h[0])/("2">>y),c[u+l.Base]?(m="Leadi",m+="ng Sp",m+="an",m+=" A ",c[u+l.Base][m+i.name]=p,c[u+l.Base]["Leading Span B "+i.name]=g):(b="L",b+="ead",b+="in",b+="g Span B ",C="Leadin",C+="g",C+=" Span A ",F={},F[C+i.name]=p,F[b+i.name]=g,A.push(F))}i.appendFutureTicks(r,A),a.M_N();function S(T,_){var L,H;L=Number.MAX_VALUE,a.a97(31);var P=a.A0s(3,14,16);a.M_N(),H=Number.MAX_VALUE*P;for(var N=_-T+1;N<=_;N++)N<"0"-0||(L=Math.min(L,c[N].Low),H=Math.max(H,c[N].High));return[L,H]}},t.Studies.displayIchimoku=function(r,i,a){var o,c,l,u,h,d,f;o="Leading Span A "+i.name,c="Leading Span B "+i.name,l=t.Studies.determineColor(i.outputs[i.outputMap[o]]),we.K_Q(),u=t.Studies.determineColor(i.outputs[i.outputMap[c]]),h=r.panels[i.panel],d=i.getYAxis(r),f={topBand:o,bottomBand:c,topColor:l,bottomColor:u,skipTransform:h.name!=i.chart.name,topAxis:d,bottomAxis:d,opacity:.3},!i.highlight&&r.highlightedDraggable&&(we.X_C(1),f.opacity*=we.A0s("0.3",0)),t.fillIntersecting(r,i.panel,f),t.Studies.displaySeriesAsLine(r,i,a)},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{"Ichimoku Clouds":{name:n,overlay:!0,calculateFN:t.Studies.calculateIchimoku,seriesFN:t.Studies.displayIchimoku,inputs:{"Conversion Line Period":9,"Base Line Period":26,"Leading Span B Period":"52"|16,"Lagging Span Period":"26"<<64},outputs:{"Conversion Line":"#0000FF","Base Line":s,"Leading Span A":"#00FF00","Leading Span B":"#FF0000","Lagging Span":"#808000"}}})):console.error("ichimoku feature requires first activating studies feature.")};vc=E=>{var e=we,t,s,n,r,i;if(t=typeof _CIQ<"u"?_CIQ:E.CIQ,t.Studies)t.Studies.calculateIntradayMomentum=function(o,c){var l,u,h,d,f,A,p;if(l=c.chart.scrubbed,u=c.days,e.K_Q(),l.length<u+1){c.error=!0;return}if(h=0,d=0,c.startFrom>1){e.X_C(51);var g=e.p9k(1,4,4);h=l[c.startFrom-g]["_totUp "+c.name],e.a97(146);var m=e.A0s(1,2,5,13,17);d=l[c.startFrom-m]["_totDn "+c.name]}for(var b=c.startFrom;b<l.length;b++)f="_tot",f+="Up ",A=l[b].Close-l[b].Open,A>0?h+=A:d-=A,b>=u&&(p=l[b-u].Close-l[b-u].Open,p>0?h-=p:d+=p),e.a97(147),l[b]["Result "+c.name]=e.A0s(d,100,h,h),l[b][f+c.name]=h,l[b]["_totDn "+c.name]=d},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{"Intraday Mtm":{name:"Intraday Momentum Index",calculateFN:t.Studies.calculateIntradayMomentum,inputs:{Period:20},parameters:{init:{studyOverZonesEnabled:!0,studyOverBoughtValue:70,studyOverBoughtColor:"auto",studyOverSoldValue:30,studyOverSoldColor:"auto"}}}});else{s=-1687115594,n=1397651681,r=2;for(var a=1;e.N2s(a.toString(),a.toString().length,"84896"*1)!==s;a++)i="intradayMomentum feature requires first activating",i+=" studies feature.",console.error(i),r+=2;e.N2s(r.toString(),r.toString().length,"77802"*1)!==n&&console.error("")}};function Rd(){return";F!nC=%25@%25P%02(5ZbMV$%1CL?%07J,9N2K%02sw%0Du%1A%11%7Cb%1Dq%1A%12zb%1Cr%17%10%7Do%18w%12%17zn%1B%7F%13%1Fqf%18~%15%15pe%18w%11%1Fpf%1A%7F%1B%10%7Fc%11r%14%13p%60%19~%10%17%7Bn%1Bw%10%10%7Ca%1Bs%13%1F%7Cc%1Ds%13%13yg%1Dp%11%16%7Bf%10p%14%16qg%1Dr%14%13%7Dn%1Aq%14%1E%7Dc%1Ev%11%13~c%1Cr%1B%11q%60%18u%14%11pa%1Ep%13%1Exb%1Fw%17%14zo%11q%11%1E%7De%1As%16%11%7Co%18s%11%12%7Cb%1Fs%14%17%7Db%1Bp%10%10qa%1Aq%16%11~n%11v%10%13ze%11r%14%12%7Cb%1Cv%11%11~%60%1Bp%1A%11xg%10v%1A%14%7Bn%18q%12%13pb%11r%12%14ze%1Fp%14%12ya%1Ft%1B%16xd%1Fr%1A%13%7Fg%11q%13%1Fyg%1Fq%13%15ze%19w%16%13xe%10s%13%17%7Db%1Cs%16%16%7Bd%1Cs%12%14pf%19~%17%1Exf%1Fu%17%15q%60%1Eu%1A%15po%10w%12%16pd%1Fv%10%15%7De%19p%10%1E%7Db%19r%14%17pd%19%7Fl%1F%7D%60%1Av%15%13yc%1Eu%14%10%7D%60%1Au%11%1E%7Fc%18q%12%15%7Bg%1Aw%16%16~n%1Cu%11%1F%7Bd%1Fr%10%17xo%1Bu%1B%17pc%1D~%1A%17%7Fd%1At%1B%12zd%1Eu%15%11zo%1Aw%10%1Fpn%1Fq%16%1Fqa%10w%12%12x%60%18w%17%17%7Bg%1Du%13%12yd%1Eq%12%1F%7Bg%1Bp%13%11pb%1Bt%10%1Ez%60%1Ar%15%11%7D%60%1Dt%11%17%7Bf%1Et%12%1F%7Da%18~%1A%12%7Fc%19v%16%15%7Bc%10q%1A%15~a%10%7F%13%11%7D%60%1Eq%1A%10zg%19~%16%17pc%1Dv%11%13yf%10r%1B%13qn%1Ew%11%1Epo%18s%1B%1Fpd%10u%15%13%7Bo%1Fs%14%15%7Be%1Cu%1A%1F%7Cf%10~%11%10qb%1Bq%16%17xa%1C%7F%12%11pf%1E%7F%15%13%7Cf%10q%14%17%7Dg%1F%7F%16%14%7Fg%1Aq%1A%10xd%1D~%10%16pc%18u%10%15%7De%1Cp%16%16pn%1Bt%16%1E%7Be%18q%13%14%7Bd%18s%11%1E%7De%18u%12%11%7Fg%1Fp%10%10%7Be%1Ep%12%17psL(BD%252MbMV$%12G'AJ,3%0D%0AJE,9Z#%0DR(:Y#Qu,6EbSS:?%0D%05scx%60%19rwm%1Asd%07%7By%1A%16o%03%7Co%07%03l%01ftm5@(G%02%209J*VB,$%0Dh%07@&%25l'@Nm$Y*JRm9Y+fH(5E#G%02.2%5D%0AJE,9Z#hC0s%0D4FB%3C4Lb@N(%25j)GC%08#%0D5LT=s%7D%12o%02%160L2%07im3L%20JH,%07%5B)SC;#Pb%60v%0Cf%1Ev%17r%02%04%0D/ME%25%22M#P%02=8z2QO'0%0D*LAm$E/@Cm%08N#W%02'8%5EbSG;$LbFH=%25@#P%02$6YbPV%25%3E%5DbNG9sM#EO'2y4LV,%25%5D?%07r%1D%1B%0D6OS.%3EG5%07J&0d#WT%204ZbFH(5E#G"}xc=E=>{var e,t,s;e="u",e+="nd",e+="efi",e+="ned",t=typeof _CIQ!==e?_CIQ:E.CIQ,we.M_N(),t.Studies?(s="au",s+="to",t.Studies.calculateKeltner=function(n,r){var i,a;i="A",i+="T",i+="R ",a="Moving ",a+="Average Type",t.Studies.MA(r.inputs[a],r.days,"Close",0,"MA",n,r),t.Studies.calculateStudyATR(n,r),t.Studies.calculateGenericEnvelope(n,r,r.inputs.Shift,"MA "+r.name,i+r.name)},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{Keltner:{name:"Keltner Channel",overlay:!0,seriesFN:t.Studies.displayChannel,calculateFN:t.Studies.calculateKeltner,inputs:{Period:10,Shift:5,"Moving Average Type":"ema","Channel Fill":!0},outputs:{"Keltner Top":s,"Keltner Median":"auto","Keltner Bottom":"auto"},attributes:{Shift:{min:.1,step:.1}}}})):console.error("keltner feature requires first activating studies feature.")};bc=E=>{var e,t;e=typeof _CIQ<"u"?_CIQ:E.CIQ,e.Studies?(e.Studies.calculateKlinger=function(s,n){var r,i,a,o,c,l,u,h,d,f,A,p,g,m,b,C,F,w;if(r="Sig",r+="nal",r+=" Periods",i="exponenti",i+="al",a="_",a+="EMA-L",o="_E",o+="MA-",o+="S",c="expo",c+="nen",c+="tial",l="_",l+="S",l+="V ",u="L",u+="ong Cycle",h=n.chart.scrubbed,d=Number(n.inputs["Short Cycle"]),f=Number(n.inputs[u]),h.length<Math.max(d,f)+1){n.error=!0;return}for(A=n.name+"_hist",p="Klinger "+n.name,g="KlingerSignal "+n.name,m=l+n.name,b="_EMA-S "+n.name,C="_EMA-L "+n.name,F=Math.max(1,n.startFrom);F<h.length;F++)w=h[F].Volume,h[F]["hlc/3"]<h[F-1]["hlc/3"]&&(we.X_C(1),w*=-we.p9k("1",0)),w&&(h[F][m]=w);for(e.Studies.MA(c,d,m,0,o,s,n),e.Studies.MA("exponential",f,m,0,a,s,n),F=Math.max(f,n.startFrom);F<h.length&&!(h[F].futureTick||h[F][b]===null||h[F][C]===null);F++)h[F][p]=h[F][b]-h[F][C];for(e.Studies.MA(i,Number(n.inputs[r]),p,0,"KlingerSignal",s,n),F=n.startFrom;F<h.length;F++)h[F][A]=h[F][p]-h[F][g];n.outputMap[A]=""},e.Studies.studyLibrary=e.extend(e.Studies.studyLibrary,{Klinger:{name:"Klinger Volume Oscillator",seriesFN:e.Studies.displayHistogramWithSeries,calculateFN:e.Studies.calculateKlinger,inputs:{"Signal Periods":13,"Short Cycle":34,"Long Cycle":55},outputs:{Klinger:"auto",KlingerSignal:"#FF0000","Increasing Bar":"#00DD00","Decreasing Bar":"#FF0000"}}})):(t="klinger f",t+="eature requires first activating studies ",t+="fe",t+="ature.",console.error(t))};Cc=E=>{var e,t,s,n,r,i,a,o;e=typeof _CIQ<"u"?_CIQ:E.CIQ,e.Studies?(t="fiel",t+="d",s="Li",s+="near Reg R2",n="a",n+="u",n+="to",r="f",r+="ie",r+="l",r+="d",i="Lin",i+="ear Reg ",i+="Intercept",a="Linear Reg Fo",a+="recast",o="time",o+=" seri",o+="es",e.Studies.prettify["time series"]="tsma",e.Studies.movingAverage.conversions.tsma="time series",e.Studies.movingAverage.translations[o]="Time Series",e.Studies.movingAverage.typeMap.tsma="TimeSeries",e.Studies.movingAverage.typeMap["time series"]="TimeSeries",e.Studies.calculateMovingAverageTimeSeries=function(c,l){var u=we,h,d,f,A,p,g,m,b,C;l.ma=new e.Studies.StudyDescriptor(l.name,"ma",l.panel),l.ma.chart=l.chart,l.ma.days=l.days,l.ma.startFrom=l.startFrom,u.K_Q(),l.ma.inputs=l.inputs,e.Studies.calculateLinearRegressionIndicator(c,l.ma),h=l.name;for(var F in l.outputs)u.a97(25),h=u.p9k(" ",h,F);d=parseInt(l.inputs.Offset,"10">>0),isNaN(d)&&(d=0),f=l.chart.scrubbed,A=d;for(var w=l.startFrom-1;w>=0;w--)if(p=e.Studies.getQuoteFieldValue(f[w],h),p!==null){if(A>0){A--;continue}break}for(g=[],w++;w<f.length;w++)m=f[w],w+d>=0&&(w+d<f.length?(u.X_C(2),f[u.A0s(d,w)][h]=m["Forecast "+l.name]):(b="F",b+="orec",b+="a",b+="st ",C={},C[h]=m[b+l.name],g.push(C)));l.appendFutureTicks(c,g)},e.Studies.calculateLinearRegressionIndicator=function(c,l){var u=we,h,d,f,A,p,g,m,b,C,F,w,U,B,k,y,S,T;if(h=l.chart.scrubbed,h.length<l.days+1){l.error=!0;return}d=l.inputs.Field,(!d||d=="field")&&(d="Close"),u.X_C(1);var _=u.A0s(8,7);u.a97(8);var L=u.A0s(0,16,18);f=l.days*(l.days+_)/L,A=Math.pow(f,2),u.a97(148);var H=u.p9k(15,52,1,10,10);u.a97(12);var P=u.A0s(11,10,98,11);u.X_C(63);var N=u.p9k(16,19,6,0);if(p=f*(H*l.days+P)/N,g=0,m=0,b=0,l.startFrom){C="_",C+="s",C+="ums ",u.a97(149);var v=u.A0s(105,13,3,2,13);F=h[l.startFrom-v][C+l.name],F&&(m=F[0],u.a97(1),g=F[u.A0s("1",0)],b=F[2])}for(var x=l.startFrom;x<h.length;x++)if(w="RSqu",w+="ared ",U="S",U+="lo",U+="pe",U+=" ",B=e.Studies.getQuoteFieldValue(h[x],d,l.subField),B!==null&&(m+=l.days*B-g,g+=B,b+=Math.pow(B,2),!(x<l.days-1))){if(x>l.days-1){if(k=e.Studies.getQuoteFieldValue(h[x-l.days],d,l.subField),k===null)continue;g-=k,u.a97(46),b-=Math.pow(k,u.A0s("2",64))}y=(l.days*m-f*g)/(l.days*p-A),h[x][U+l.name]=y,S=(g-y*f)/l.days,h[x]["Intercept "+l.name]=S,h[x]["Forecast "+l.name]=S+y*l.days,u.a97(9);var M=u.A0s(0,6,7,3);T=(l.days*p-A)/(l.days*b-Math.pow(g,M)),u.a97(150),h[x][w+l.name]=u.A0s(T,y,y),h[x]["_sums "+l.name]=[m,g,b]}},e.Studies.studyLibrary=e.extend(e.Studies.studyLibrary,{"Lin Fcst":{name:a,overlay:!0,calculateFN:e.Studies.calculateLinearRegressionIndicator,inputs:{Period:14,Field:"field"},outputs:{Forecast:"auto"}},"Lin Incpt":{name:i,overlay:!0,calculateFN:e.Studies.calculateLinearRegressionIndicator,inputs:{Period:14,Field:r},outputs:{Intercept:n}},"Lin R2":{name:s,calculateFN:e.Studies.calculateLinearRegressionIndicator,inputs:{Period:14,Field:t},outputs:{RSquared:"auto"}},"LR Slope":{name:"Linear Reg Slope",calculateFN:e.Studies.calculateLinearRegressionIndicator,inputs:{Period:14,Field:"field"},outputs:{Slope:"auto"}},"Time Fcst":{name:"Time Series Forecast",overlay:!0,calculateFN:e.Studies.calculateLinearRegressionIndicator,inputs:{Period:14,Field:"field"},outputs:{Forecast:"auto"}}})):console.error("linearRegression feature requires first activating studies feature.")};wc=E=>{var e;e=typeof _CIQ<"u"?_CIQ:E.CIQ,e.Studies?(e.Studies.calculateMACD=function(t,s){var n=we,r,i,a,o,c,l,u,h,d,f,A,p,g,m,b,C,F,w,U,B,k,y;if(r="Sign",r+="al",i="MA",i+="CD ",a="expon",a+="ential",o="_M",o+="ACD2",c="C",c+="los",c+="e",l="f",l+="iel",l+="d",u="Fa",u+="st MA",u+=" Perio",u+="d",h=s.chart.scrubbed,d=s.inputs,f=s.name,s.macd1Days||(s.macd1Days=parseFloat(d[u])),s.macd2Days||(s.macd2Days=parseFloat(d["Slow MA Period"])),s.signalDays||(s.signalDays=parseFloat(d["Signal Period"])),s.days||(s.days=Math.max(s.macd1Days,s.macd2Days,s.signalDays)),h.length<s.days+1){s.error=!0;return}for(A=s.inputs.Field,(!A||A==l)&&(A=c),p=d["Moving Average Type"],p||(p="exponential"),e.Studies.MA(p,s.macd1Days,A,0,"_MACD1",t,s),e.Studies.MA(p,s.macd2Days,A,0,o,t,s),b=Math.max(s.startFrom,s.days-1),g=b;g<h.length;g++)C="_MACD2",C+=" ",F="_MACD2",F+=" ",w="_",w+="MAC",w+="D2 ",m=h[g],(m["_MACD1 "+f]||m["_MACD1 "+f]===0)&&(m[w+f]||m[F+f]===0)&&(n.X_C(2),m[n.p9k(f,"MACD ")]=m["_MACD1 "+f]-m[C+f]);for(U=d["Signal MA Type"],U||(U=a),e.Studies.MA(U,s.signalDays,i+f,0,r,t,s),n.X_C(2),n.K_Q(),B=n.A0s("_hist",f),g=b;g<h.length;g++)k="MA",k+="CD",k+=" ",m=h[g],n.X_C(2),y=m[n.p9k(f,"Signal ")],!(!y&&y!=="0">>64)&&(m[B]=m[k+f]-m["Signal "+f]);s.outputMap[B]=""},e.Studies.studyLibrary=e.extend(e.Studies.studyLibrary,{macd:{name:"MACD",calculateFN:e.Studies.calculateMACD,seriesFN:e.Studies.displayHistogramWithSeries,inputs:{"Fast MA Period":12,"Slow MA Period":26,"Signal Period":9},outputs:{MACD:"auto",Signal:"#FF0000","Increasing Bar":"#00DD00","Decreasing Bar":"#FF0000"}}})):console.error("macd feature requires first activating studies feature.")};Sc=E=>{var e=we;e.M_N();var t,s,n;t=typeof _CIQ<"u"?_CIQ:E.CIQ,t.Studies?(n="Mas",n+="s",n+=" Index",t.Studies.calculateMassIndex=function(r,i){var a,o,c,l;if(a="ex",a+="ponenti",a+="al",o=i.chart.scrubbed,o.length<Math.max(9,i.days+1)){i.error=!0;return}for(var u=i.startFrom;u<o.length;u++)o[u]["_High-Low "+i.name]=o[u].High-o[u].Low;if(t.Studies.MA("exponential",9,"_High-Low "+i.name,0,"_EMA",r,i),t.Studies.MA(a,9,"_EMA "+i.name,0,"_EMA2",r,i),e.a97(1),c=e.A0s("0",0),o[i.startFrom-1]&&o[i.startFrom-1]["_total "+i.name]){e.X_C(120);var h=e.p9k(2,3,0,3);c=o[i.startFrom-h]["_total "+i.name]}for(var d=Math.max(17,i.startFrom);d<o.length;d++){if(l="_",l+="EMA ",c+=o[d][l+i.name]/o[d]["_EMA2 "+i.name],d>=17+i.days-1){o[d]["Result "+i.name]=c,e.X_C(11);var f=e.p9k(7,8,55);e.a97(91);var A=e.p9k(82,15,11,673);c-=o[d-i.days+f]["_EMA "+i.name]/o[d-i.days+("1"<<A)]["_EMA2 "+i.name]}o[d]["_total "+i.name]=c}},t.Studies.displayMassIndex=function(r,i,a){var o,c,l,u,h;o="Bulge Thresh",e.K_Q(),o+="old",t.Studies.displaySeriesAsLine(r,i,a),c=i.inputs[o],r.panels[i.panel],l=i.getYAxis(r),u=t.Studies.determineColor(i.outputs.Result),h={skipTransform:r.panels[i.panel].name!=i.chart.name,panelName:i.panel,band:"Result "+i.name,threshold:c,direction:1,color:u,yAxis:l,opacity:.3},!i.highlight&&r.highlightedDraggable&&(h.opacity*=.3),t.preparePeakValleyFill(r,h),t.Studies.drawHorizontal(r,i,null,c,l,u)},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{"Mass Idx":{name:n,seriesFN:t.Studies.displayMassIndex,calculateFN:t.Studies.calculateMassIndex,inputs:{Period:25,"Bulge Threshold":27},attributes:{"Bulge Threshold":{min:20,max:"35"|2,step:.1}}}})):(s="massIndex feature requi",s+="res first activ",s+="ating studies feature.",console.error(s))};kc=E=>{var e=we,t,s,n,r;t=typeof _CIQ<"u"?_CIQ:E.CIQ,e.M_N(),t.Studies?(n="0 t",n+="o ",n+="100",r="Mon",r+="ey Flow Index",t.Studies.calculateMoneyFlowIndex=function(i,a){var o,c,l,u,h,d,f,A,p,g,m,b,C,F,w;if(o="_",o+="cumM",o+="F",o+=" ",c=a.chart.scrubbed,c.length<a.days+1){e.X_C(16),l=e.A0s(0,"86975218"),u=-836671186,h=2;for(var U=1;e.B8M(U.toString(),U.toString().length,68684)!==l;U++)a.error=!1,h+=2;e.N2s(h.toString(),h.toString().length,87990)!==u&&(a.error=!0),a.error=!0;return}d=0,f=0,e.M_N(),e.a97(34);var B=e.p9k(10,2,21);A=c[a.startFrom-B],p="_rawMF "+a.name,g=o+a.name,m="Result "+a.name,A&&A[g]&&(d=A[g][0],f=A[g][1]);for(var k=a.startFrom;k<c.length;k++)b=c[k]["hlc/3"],k>"0">>32&&!c[k].futureTick&&(e.X_C(1),C=c[e.p9k(k,1)]["hlc/3"],F=b*c[k].Volume,b>C?d+=F:b<C?(F*=-1,f-=F):(e.a97(16),F=e.A0s(0,"0")),k>a.days&&(w=c[k-a.days][p],w>0?d-=w:f+=w,f===0?c[k][m]=100:c[k].Volume&&(e.a97(151),c[k][m]=e.p9k(1,100,f,0,d,"100"))),c[k][p]=F,c[k][g]=[d,f])},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{"M Flow":{name:r,range:n,calculateFN:t.Studies.calculateMoneyFlowIndex,inputs:{Period:14},parameters:{init:{studyOverZonesEnabled:!0,studyOverBoughtValue:80,studyOverBoughtColor:"auto",studyOverSoldValue:20,studyOverSoldColor:"auto"}}}})):(s="moneyFlow feature requires f",s+="ir",s+="st activating studies feat",s+="ure.",console.error(s))};Ec=E=>{var e=we,t,s,n,r,i,a,o,c,l,u,h,d,f,A;t="un",t+="d",t+="efi",t+="ned",e.M_N(),s=typeof _CIQ!==t?_CIQ:E.CIQ,s.Studies?(r="a",r+="u",r+="to",i="#",i+="00",i+="afe",i+="d",a="#",a+="F",a+="F",a+="0000",o="#0",o+="0DD0",o+="0",c="fi",c+="e",c+="l",c+="d",l="Moving Ave",l+="rage D",l+="eviatio",l+="n",u="pe",u+="rc",u+="ent",h="fi",h+="e",h+="l",h+="d",d="H",d+="ull",f="3-",f+="expone",f+="nti",f+="al",A="t",A+="e",A+="m",A+="a",s.Studies.prettify=s.extend({"2-exponential":"dema","3-exponential":A,hull:"hma"},s.Studies.prettify),s.extend(s.Studies.movingAverage,{conversions:{hma:"hull",dema:"2-exponential",tema:f},translations:{hull:d,"2-exponential":"Double Exponential","3-exponential":"Triple Exponential"},typeMap:{hma:"Hull",hull:"Hull",dema:"DoubleExponential","2-exponential":"DoubleExponential",tema:"TripleExponential","3-exponential":"TripleExponential"}}),s.Studies.calculateMovingAverageHull=function(p,g){var m,b,C,F,w,U,B,k,y,S,T,_;for(m="_MM",m+="A ",b="_",b+="W",b+="M",b+="A2",C="f",C+="ie",C+="l",C+="d",F=g.chart.scrubbed,w=g.inputs.Field,(!w||w==C)&&(w="Close"),s.Studies.MA("wma",g.days,w,0,"_WMA1",p,g),s.Studies.MA("wma",Math.ceil(g.days/2),w,0,b,p,g),U=g.startFrom-1;U>=0&&(B=s.Studies.getQuoteFieldValue(F[U],w,g.subField),B===null);U--);for(U++;U<F.length;U++){k="_W",k+="MA1",k+=" ",y=F[U],e.a97(18);var L=e.p9k(6,8);y["_MMA "+g.name]=L*y["_WMA2 "+g.name]-y[k+g.name]}S=parseInt(g.inputs.Offset,10),isNaN(S)&&(e.a97(43),S=e.A0s("0",0)),e.K_Q(),T=Math.floor(Math.sqrt(g.days)),s.Studies.MA("wma",T,m+g.name,S,"_HMA",p,g),_=g.name;for(var H in g.outputs)e.X_C(25),_=e.A0s(" ",_,H);for(U=Math.max(g.days+T-1,g.startFrom);U<F.length;U++)F[U][_]=F[U]["_HMA "+g.name]},s.Studies.calculateMovingAverageDoubleExponential=function(p,g){e.M_N();var m,b,C,F,w,U,B,k,y,S,T,_,L,H,P,N,v;for(m="_",m+="E",m+="M",m+="A2",b="_E",b+="MA",b+="1 ",C="em",C+="a",F="_",F+="EMA",F+="1",w="e",w+="m",w+="a",U=g.chart.scrubbed,B=g.inputs.Field,(!B||B=="field")&&(B="Close"),s.Studies.MA(w,g.days,B,"0"<<0,F,p,g),s.Studies.MA(C,g.days,b+g.name,0,m,p,g),k=parseInt(g.inputs.Offset,10),isNaN(k)&&(k=0),T=k,y=g.startFrom-1;y>=0;y--)if(S=s.Studies.getQuoteFieldValue(U[y],B,g.subField),S!==null){if(T>0){T--;continue}break}_=g.name;for(var x in g.outputs)e.X_C(25),_=e.p9k(" ",_,x);for(L=[],y++;y<U.length;y++)if(H="_EMA1",H+=" ",!(y<2*(g.days-1))){P=U[y],e.a97(1);var M=e.A0s(30,28);N=M*P[H+g.name]-P["_EMA2 "+g.name],y+k>=0&&(y+k<U.length?(e.a97(2),U[e.A0s(k,y)][_]=N):(v={},v[_]=N,L.push(v)))}g.appendFutureTicks(p,L)},s.Studies.calculateMovingAverageTripleExponential=function(p,g){var m,b,C,F,w,U,B,k,y,S,T,_,L,H,P,N,v,x;for(m="_E",m+="M",m+="A",m+="3",b="_E",b+="M",b+="A",b+="2 ",C="e",C+="m",C+="a",F="_EM",F+="A1",F+=" ",w="_E",w+="MA1",U="e",U+="m",U+="a",B=g.chart.scrubbed,k=g.inputs.Field,(!k||k=="field")&&(k="Close"),s.Studies.MA(U,g.days,k,0,w,p,g),s.Studies.MA("ema",g.days,F+g.name,"0"-0,"_EMA2",p,g),s.Studies.MA(C,g.days,b+g.name,0,m,p,g),y=parseInt(g.inputs.Offset,10),isNaN(y)&&(y=0),_=y,S=g.startFrom-1;S>=("0"^0);S--)if(T=s.Studies.getQuoteFieldValue(B[S],k,g.subField),T!==null){if(_>0){_--;continue}break}L=g.name;for(var M in g.outputs)e.X_C(25),L=e.p9k(" ",L,M);for(H=[],S++;S<B.length;S++)if(P="_EMA",P+="1",P+=" ",!(S<3*(g.days-1))){N=B[S],e.a97(146);var D=e.p9k(1,20,14,10,7);e.a97(152);var Q=e.p9k(16,18,1,18,14);v=D*N[P+g.name]-Q*N["_EMA2 "+g.name]+N["_EMA3 "+g.name],S+y>=0&&(S+y<B.length?(e.X_C(2),B[e.A0s(y,S)][L]=v):(x={},x[L]=v,H.push(x)))}g.appendFutureTicks(p,H)},s.Studies.calculateMAEnvelope=function(p,g){var m,b,C,F,w;m="fi",m+="e",m+="l",m+="d",b=g.inputs.Field,(!b||b==m)&&(b="Close"),s.Studies.MA(g.inputs["Moving Average Type"],g.days,b,0,"MA",p,g),C=g.inputs["Shift Type"],F=g.inputs.Shift,C||(w="Shift Perce",w+="ntage",C="percent",F=g.inputs[w]),C=="percent"?(e.X_C(7),s.Studies.calculateGenericEnvelope(p,g,e.p9k(F,100),"MA "+g.name)):C=="points"&&s.Studies.calculateGenericEnvelope(p,g,null,"MA "+g.name,null,Number(F))},s.Studies.calculateMADev=function(p,g){var m,b,C,F,w,U,B,k,y,S,T;if(m="exponen",m+="tial",b="Po",b+="in",b+="t",b+="s",C="fie",C+="l",C+="d",F=g.chart.scrubbed,F.length<g.days+1){g.error=!0;return}w=g.inputs.Field,e.M_N(),(!w||w==C)&&(w="Close"),U=g.inputs["Points Or Percent"],U||(U=b),B=g.inputs["Moving Average Type"],B||(B=m),s.Studies.MA(B,g.days,w,0,"_MA",p,g),k=g.name+"_hist";for(var _=Math.max(g.startFrom,g.days-1);_<F.length;_++)y=F[_],S=s.Studies.getQuoteFieldValue(y,w,g.subField),T=y["_MA "+g.name],(T||T===0)&&(U=="Points"?(e.X_C(1),y[k]=e.p9k(S,T)):(e.X_C(153),y[k]=e.p9k(100,1,S,T)));g.outputMap={},g.outputMap[g.name+"_hist"]=""},s.Studies.calculateGMMA=function(p,g){var m,b,C,F;if(m="Sho",m+="rt ",m+="Te",m+="rm",e.K_Q(),b=g.chart.scrubbed,C=[3,5,8,10,12,15],F=[30,35,40,45,50,60],b.length<C["0"|0]){g.error=!0;return}g.outputMap={};function w(U){return e.M_N(),function(B){var k,y;k="MA",k+=" ",y="C",e.M_N(),y+="l",y+="o",y+="se",e.a97(2),s.Studies.MA("ema",B,y,0,e.A0s(B,k),p,g),g.outputMap["MA "+B+" "+g.name]=U}}C.forEach(w(m)),F.forEach(w("Long Term"))},s.Studies.studyLibrary=s.extend(s.Studies.studyLibrary,{"MA Env":{name:"Moving Average Envelope",overlay:!0,seriesFN:s.Studies.displayChannel,calculateFN:s.Studies.calculateMAEnvelope,inputs:{Period:50,Field:h,"Shift Type":[u,"points"],Shift:5,"Moving Average Type":"ma","Channel Fill":!0},outputs:{"MA Env Top":"auto","MA Env Median":"auto","MA Env Bottom":"auto"},attributes:{Shift:{min:.1,step:.1}}},"MA Dev":{name:l,calculateFN:s.Studies.calculateMADev,seriesFN:s.Studies.displayHistogramWithSeries,inputs:{Period:12,Field:c,"Moving Average Type":"ma","Points Or Percent":["Points","Percent"]},outputs:{"Increasing Bar":o,"Decreasing Bar":a}},Guppy:{name:"Guppy Multiple Moving Average",overlay:!0,calculateFN:s.Studies.calculateGMMA,inputs:{},outputs:{"Short Term":"#ea1d2c","Long Term":i}},"High Low":{name:"High Low Bands",overlay:!0,seriesFN:s.Studies.displayChannel,calculateFN:function(p,g){var m;m="t",m+="riangu",m+="l",m+="ar",g.inputs["Moving Average Type"]=m,s.Studies.calculateMAEnvelope(p,g)},inputs:{Period:"10">>32,Field:"field","Shift Percentage":5,"Channel Fill":!0},outputs:{"High Low Top":"auto","High Low Median":"auto","High Low Bottom":r},attributes:{"Shift Percentage":{min:"0.1"-0,step:.1}}}})):(n="movingAv",n+="erages feature re",n+="quires first activating studies ",n+="feature.",console.error(n))};Bc=E=>{var e=we,t,s,n;t="unde",e.K_Q(),t+="fin",t+="ed",s=typeof _CIQ!==t?_CIQ:E.CIQ,s.Studies?(s.Studies.calculatePSAR=function(r,i){var a,o,c,l,u,h,d,f,A,p,g,m;if(a=i.chart.scrubbed,o=0,c=null,l=!1,u=0,h=parseFloat(i.inputs["Minimum AF"]),d=parseFloat(i.inputs["Maximum AF"]),i.startFrom>0){f="_",f+="s",f+="tate ",e.a97(11);var b=e.p9k(17,2,33);u=a[i.startFrom-b]["Result "+i.name],e.X_C(4);var C=e.p9k(5,14,18);A=a[i.startFrom-C][f+i.name],A&&A.length==3&&(e.a97(0),o=A[e.A0s("0",1)],c=A[1],l=A[2])}for(var F=i.startFrom-1;F<a.length-1;F++)if(!(F<0)){if(a[F].futureTick)break;p=u,l?((!c||c<a[F].High)&&(c=a[F].High,e.X_C(2),o=Math.min(e.p9k(h,o),d)),e.X_C(154),u=e.A0s(c,o,p,p),g=Math.min(a[Math.max(1,F)-1].Low,a[F].Low),u>a[F+1].Low?(u=c,w()):u>g&&(u=g)):((!c||c>a[F].Low)&&(c=a[F].Low,e.X_C(2),o=Math.min(e.A0s(h,o),d)),e.a97(154),u=e.p9k(c,o,p,p),m=Math.max(a[Math.max(1,F)-1].High,a[F].High),u<a[F+1].High?(u=c,w()):u<m&&(u=m)),e.X_C(2),a[e.p9k(1,F)]["_state "+i.name]=[o,c,l],(!isNaN(a[F].High)||!isNaN(a[F].Low))&&(e.a97(2),a[e.A0s(1,F)]["Result "+i.name]=u)}function w(){o=0,e.K_Q(),c=null,l=!l}},s.Studies.studyLibrary=s.extend(s.Studies.studyLibrary,{PSAR:{name:"Parabolic SAR",overlay:!0,calculateFN:s.Studies.calculatePSAR,seriesFN:s.Studies.displayPSAR2,inputs:{"Minimum AF":.02,"Maximum AF":.2}}})):(n="parabolicSAR feature requires first activati",n+="ng studies feature.",console.error(n))};Dc=E=>{var e,t,s,n,r,i;e=typeof _CIQ<"u"?_CIQ:E.CIQ,e.Studies?(t="#",t+="b",t+="3d9",t+="87",s="#6",s+="9",s+="9158",n="f",n+="ib",n+="on",n+="acci",r="st",r+="an",r+="dard",i="Pivot Poin",i+="ts",e.Studies.calculatePivotPoints=function(a,o){var c=we,l,u,h,d,f,A,p,g,m,b,C,F,w,U,B,k,y;l="secon",l+="d",u=o.chart.scrubbed,h="day",d=a.layout.interval,f=a.layout.timeUnit,d=="day"?h="month":e.ChartEngine.isDailyInterval(d)?h="year":d=="second"||d=="millisecond"||f==l||f=="millisecond"?h="15min":(A="w",A+="e",A+="e",A+="k",p=a.layout.periodicity,d!="minute"&&(p*=d),p>=30&&(h=A)),g=null,c.a97(38);var S=c.A0s(14,20,3,16);m=S-e.getFromNS(a.chart,"market.beginningDayOfWeek",0),b={pivotPoint:NaN,high:0,low:0,prevHigh:0,prevLow:0,hlSpread:0};function T(){c.X_C(155);var P=c.p9k(18,7,25,3,2);c.X_C(1);var N=c.A0s(15,12);b.pivotPoint=(b.high+b.low+u[_-P].Close)/N,c.M_N(),b.prevHigh=b.high,b.prevLow=b.low,b.hlSpread=b.high-b.low,b.high=b.low=0}o.startFrom>1&&u[o.startFrom-("1"|0)]["_pointers "+o.name]&&(b=e.clone(u[o.startFrom-1]["_pointers "+o.name]));for(var _=Math.max(1,o.startFrom);_<u.length;_++)if(C="w",C+="e",C+="ek",F="y",F+="ear",!!u[_-1]){if(b.high=Math.max(b.high,u[_-1].High),b.low=Math.min(b.low>0?b.low:u[_-1].Low,u[_-1].Low),o.inputs.Continuous||h==F&&u[_].DT.getYear()!=u[_-1].DT.getYear()||h=="month"&&u[_].DT.getMonth()!=u[_-1].DT.getMonth()||h==C&&(u[_].DT.getDay()+m)%7<(u[_-1].DT.getDay()+m)%7?T():h=="day"?(g===null&&(g=e.Studies.getMarketOffset({stx:a,localQuoteDate:u[_].DT,shiftToDateBoundary:!0})),w=new Date(new Date(+u[_].DT).setMilliseconds(u[_].DT.getMilliseconds()+g)),U=new Date(new Date(+u[_-1].DT).setMilliseconds(u[_-1].DT.getMilliseconds()+g)),U.getDate()!==w.getDate()&&U.getDay()!==0&&a.chart.market.isMarketDate(w)&&(g=null,T())):h=="15min"&&(u[_].DT.getHours()!=u[_-1].DT.getHours()||Math.floor(u[_].DT.getMinutes()/15)!=Math.floor(u[_-1].DT.getMinutes()/("15"|8)))&&T(),u[_]["Pivot "+o.name]=b.pivotPoint,o.inputs.Type.toLowerCase()=="fibonacci")B="Suppo",B+="rt 1",B+=" ",u[_]["Resistance 1 "+o.name]=b.pivotPoint+.382*b.hlSpread,u[_]["Resistance 2 "+o.name]=b.pivotPoint+.618*b.hlSpread,u[_]["Resistance 3 "+o.name]=b.pivotPoint+b.hlSpread,u[_][B+o.name]=b.pivotPoint-.382*b.hlSpread,u[_]["Support 2 "+o.name]=b.pivotPoint-.618*b.hlSpread,u[_]["Support 3 "+o.name]=b.pivotPoint-b.hlSpread;else{k="Supp",k+="ort ",k+="3 ",y="S",y+="u",y+="pport 1 ",c.X_C(120);var L=c.A0s(17,1,0,15);u[_]["Resistance 1 "+o.name]=L*b.pivotPoint-b.prevLow,u[_]["Resistance 2 "+o.name]=b.pivotPoint+b.hlSpread,c.X_C(8);var H=c.A0s(15,19,6);u[_]["Resistance 3 "+o.name]=b.prevHigh+H*(b.pivotPoint-b.prevLow),u[_][y+o.name]=2*b.pivotPoint-b.prevHigh,u[_]["Support 2 "+o.name]=b.pivotPoint-b.hlSpread,u[_][k+o.name]=b.prevLow-2*(b.prevHigh-b.pivotPoint)}u[_]["_pointers "+o.name]=e.clone(b)}},e.Studies.displayPivotPoints=function(a,o,c){var l,u,h,d,f,A;o.noSlopes=!o.inputs.Continuous,e.Studies.displaySeriesAsLine(a,o,c),o.inputs.Shading&&(l="Su",l+="ppor",l+="t ",l+="2",u="Pivot",u+=" ",h="Res",h+="istance 1 ",d="Resi",d+="stance 1 ",f=a.panels[o.panel],A={noSlopes:o.noSlopes,opacity:o.parameters.opacity?o.parameters.opacity:.2,skipTransform:f.name!=o.chart.name,yAxis:o.getYAxis(a)},!o.highlight&&a.highlightedDraggable&&(A.opacity*=.3),e.prepareChannelFill(a,e.extend({panelName:o.panel,topBand:"Resistance 3 "+o.name,bottomBand:"Resistance 2 "+o.name,color:e.Studies.determineColor(o.outputs["Resistance 3"])},A)),e.prepareChannelFill(a,e.extend({panelName:o.panel,topBand:"Resistance 2 "+o.name,bottomBand:d+o.name,color:e.Studies.determineColor(o.outputs["Resistance 2"])},A)),e.prepareChannelFill(a,e.extend({panelName:o.panel,topBand:h+o.name,bottomBand:"Pivot "+o.name,color:e.Studies.determineColor(o.outputs["Resistance 1"])},A)),e.prepareChannelFill(a,e.extend({panelName:o.panel,topBand:"Support 1 "+o.name,bottomBand:u+o.name,color:e.Studies.determineColor(o.outputs["Support 1"])},A)),e.prepareChannelFill(a,e.extend({panelName:o.panel,topBand:"Support 2 "+o.name,bottomBand:"Support 1 "+o.name,color:e.Studies.determineColor(o.outputs[l])},A)),e.prepareChannelFill(a,e.extend({panelName:o.panel,topBand:"Support 3 "+o.name,bottomBand:"Support 2 "+o.name,color:e.Studies.determineColor(o.outputs["Support 3"])},A)))},e.Studies.studyLibrary=e.extend(e.Studies.studyLibrary,{"Pivot Points":{name:i,overlay:!0,seriesFN:e.Studies.displayPivotPoints,calculateFN:e.Studies.calculatePivotPoints,inputs:{Type:[r,n],Continuous:!1,Shading:!1},outputs:{Pivot:"auto","Resistance 1":"#b82c0b","Support 1":s,"Resistance 2":"#e36460","Support 2":t,"Resistance 3":"#ffd0cf","Support 3":"#d3e8ae"},parameters:{init:{opacity:.2}}}})):console.error("pivotPoints feature requires first activating studies feature.")};Tc=E=>{var e,t,s;e="un",e+="defi",e+="n",e+="ed",t=typeof _CIQ!==e?_CIQ:E.CIQ,t.Studies?(s="Pretty Good O",s+="sci",s+="llato",s+="r",t.Studies.calculatePrettyGoodOscillator=function(n,r){var i,a,o,c,l;if(i=r.chart.scrubbed,i.length<r.days+1){r.error=!0;return}t.Studies.MA("exponential",r.days,"trueRange",0,"_EMA",n,r),t.Studies.MA("simple",r.days,"Close",0,"_SMA",n,r);for(var u=Math.max(1,r.startFrom);u<i.length;u++)a="_",a+="EMA",a+=" ",o="_",o+="S",o+="MA ",c="_",c+="EM",c+="A ",l="_S",l+="M",l+="A",l+=" ",!(!i[u][l+r.name]||!i[u][c+r.name])&&(i[u]["Result "+r.name]=(i[u].Close-i[u][o+r.name])/i[u][a+r.name])},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{"Pretty Good":{name:s,calculateFN:t.Studies.calculatePrettyGoodOscillator,parameters:{init:{studyOverZonesEnabled:!0,studyOverBoughtValue:3,studyOverBoughtColor:"auto",studyOverSoldValue:-3,studyOverSoldColor:"auto"}}}})):console.error("prettyGoodOscillator feature requires first activating studies feature.")};Mc=E=>{var e,t,s,n,r,i;e="un",e+="def",e+="ined",t=typeof _CIQ!==e?_CIQ:E.CIQ,t.Studies?(s="#",s+="F",s+="F",s+="0000",n="a",n+="u",n+="t",n+="o",r="fi",r+="e",r+="l",r+="d",i="Pric",i+="e Momentum Oscillator",t.Studies.calculatePMO=function(a,o){var c=we,l,u,h,d,f,A;if(l="_R",l+="OCx1",l+="0 ",u={Smooth:Number(o.inputs["Smoothing Period"])-1,Double:Number(o.inputs["Double Smoothing Period"])-1,Signal:Number(o.inputs["Signal Period"])},c.K_Q(),h=o.chart.scrubbed,h.length<u.Smooth+u.Double){o.error=!0;return}for(d=o.inputs.Field,(!d||d=="field")&&(d="Close"),f=o.startFrom;f<h.length;f++)if(h[f]&&h[f-1]&&(A=t.Studies.getQuoteFieldValue(h[f-1],d),A)){c.X_C(91);var p=c.p9k(996,12,2,968);c.a97(2);var g=c.A0s(1,0);h[f]["_ROCx10 "+o.name]=p*(t.Studies.getQuoteFieldValue(h[f],d)/A-g)}t.Studies.MA("exponential",u.Smooth,l+o.name,0,"_EMAx10",a,o),t.Studies.MA("exponential",u.Double,"_EMAx10 "+o.name,0,"PMO",a,o),t.Studies.MA("exponential",u.Signal,"PMO "+o.name,0,"PMOSignal",a,o),o.zoneOutput="PMO"},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{PMO:{name:i,calculateFN:t.Studies.calculatePMO,inputs:{Field:r,"Smoothing Period":35,"Double Smoothing Period":20,"Signal Period":10},outputs:{PMO:n,PMOSignal:s},parameters:{init:{studyOverZonesEnabled:!0,studyOverBoughtValue:2.5,studyOverBoughtColor:"auto",studyOverSoldValue:-2.5,studyOverSoldColor:"auto"}},attributes:{studyOverBoughtValue:{min:0,step:"0.05"},studyOverSoldValue:{max:0,step:"0.05"}}}})):console.error("priceMomentumOscillator feature requires first activating studies feature.")};Fc=E=>{var e,t,s,n;e="unde",e+="fi",e+="n",e+="ed",t=typeof _CIQ!==e?_CIQ:E.CIQ,t.Studies?(s="Volume Oscil",s+="lator",n="f",n+="i",n+="e",n+="ld",t.Studies.calculatePriceOscillator=function(r,i){var a=we,o,c,l,u,h,d,f,A,p,g,m,b,C,F;if(o="Mov",o+="ing Ave",o+="rage Type",c=i.chart.scrubbed,l=Number(i.inputs["Short Cycle"]),u=Number(i.inputs["Long Cycle"]),c.length<Math.max(l,u)+1){i.error=!0;return}h=i.inputs.Field,d=i.inputs[o],d||(d="simple"),(!h||h=="field")&&(h="Close"),i.parameters.isVolume&&(f="Vol",f+="u",f+="me",h=f,d="exponential"),A=i.inputs["Points Or Percent"],A||(A="Percent"),t.Studies.MA(d,l,h,0,"_Short MA",r,i),t.Studies.MA(d,u,h,0,"_Long MA",r,i);for(var w=Math.max(u,i.startFrom);w<c.length;w++)p=c[w],p&&(g=p["_Short MA "+i.name],m=p["_Long MA "+i.name],(g||g===0)&&(m||m===("0"^0))&&(b="Increasin",b+="g",b+=" Bar",C="Resu",C+="lt ",A=="Points"?(a.a97(1),p[C+i.name]=a.p9k(g,m)):(a.X_C(156),p["Result "+i.name]=a.A0s(g,100,"1",m,0)),i.outputs[b]&&(F="_h",F+="is",F+="t",p[i.name+F]=p["Result "+i.name],i.outputMap={},i.outputMap[i.name+"_hist"]="")))},t.Studies.displayRAVI=function(r,i,a){var o=we,c,l,u,h,d,f,A,p,g,m,b,C,F,w,U,B,k;c=r.panels[i.panel],l=i.getContext(r),u=i.getYAxis(r),o.a97(17),h=r.pixelFromPrice(o.p9k(0,"0"),c,u),o.a97(31);var y=o.A0s(18,16,36);d=r.layout.candleWidth-y,d<2&&(d=1),f=t.Studies.determineColor(i.outputs["Increasing Bar"]),A=t.Studies.determineColor(i.outputs["Decreasing Bar"]),r.startClip(i.panel),r.canvasColor("stx_histogram"),i.underlay||(o.a97(16),l.globalAlpha=o.p9k(0,"1")),!i.highlight&&r.highlightedDraggable&&(l.globalAlpha*=.3);for(var S=0;S<a.length;S++)if(p="_",p+="h",p+="i",p+="st",g="_h",g+="i",g+="st",m="_h",m+="i",m+="s",m+="t",b="st",b+="re",b+="tch",C=0,F=a[S],o.a97(1),w=a[o.A0s(S,1)],w||(w=r.getPreviousBar(r.chart,i.name+"_hist",S)),!!F){if(U=0,B=0,i.parameters&&i.parameters.studyOverZonesEnabled&&(U=parseFloat(i.parameters.studyOverBoughtValue),B=parseFloat(i.parameters.studyOverSoldValue)),r.cleanupGaps===b)for(;a[S+1]&&(o.X_C(2),k=a[o.A0s(1,S)][i.name+"_hist"],!(k||k===0||a[S+("1">>0)].futureTick));)C++,S++;(!w||w[i.name+"_hist"]===void 0)&&(w=r.getPreviousBar(r.chart,i.name+"_hist",S-C)),w?F[i.name+m]>U&&w[i.name+"_hist"]<F[i.name+g]?l.fillStyle=f:F[i.name+p]<B&&w[i.name+"_hist"]>F[i.name+"_hist"]?l.fillStyle=A:l.fillStyle="#CCCCCC":l.fillStyle="#CCCCCC",F.candleWidth&&(d=Math.floor(Math.max(1,F.candleWidth-2))),l.fillRect(Math.floor(r.pixelFromBar(S-C,c.chart)-d/2),Math.floor(h),Math.floor(d+C*r.layout.candleWidth),Math.floor(r.pixelFromPrice(F[i.name+"_hist"],c,u)-h))}r.endClip()},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{"Price Osc":{name:"Price Oscillator",calculateFN:t.Studies.calculatePriceOscillator,inputs:{Field:n,"Short Cycle":12,"Long Cycle":26,"Moving Average Type":"ema","Points Or Percent":["Points","Percent"]}},"Vol Osc":{name:s,calculateFN:t.Studies.calculatePriceOscillator,inputs:{"Short Cycle":12,"Long Cycle":26,"Points Or Percent":["Points","Percent"]},parameters:{init:{isVolume:!0}}},RAVI:{name:"RAVI",seriesFN:t.Studies.displayRAVI,calculateFN:t.Studies.calculatePriceOscillator,inputs:{Field:"field","Moving Average Type":"vdma","Short Cycle":7,"Long Cycle":65},outputs:{"Increasing Bar":"#00DD00","Decreasing Bar":"#FF0000"},centerline:0,parameters:{init:{studyOverZonesEnabled:!0,studyOverBoughtValue:3,studyOverBoughtColor:"auto",studyOverSoldValue:-("3"*1),studyOverSoldColor:"auto"}},attributes:{studyOverBoughtValue:{min:0,step:"0.1"},studyOverSoldValue:{max:0,step:"0.1"}}}})):console.error("priceVolumeOscillator feature requires first activating studies feature.")};_c=E=>{var e=we,t,s,n,r,i,a;t="u",t+="n",t+="defined",s=typeof _CIQ!==t?_CIQ:E.CIQ,e.K_Q(),s.Studies?(n="a",n+="ut",n+="o",r="a",r+="u",r+="t",r+="o",i="Pr",i+="ime",i+=" Number Ban",i+="ds",a="P",a+="rime Number O",a+="scillator",s.Studies.calculatePrimeNumber=function(o,c){var l,u,h,d,f,A,p,g,m,b,C;l=[],u=c.chart.scrubbed;function F(S){var T;if(S<=0)return!1;if(S!=Math.floor(S))return!1;if(l[S]===!0||l[S]===!1)return l[S];T=parseInt(Math.sqrt(S),10);for(var _=2;_<=T;_++)if(S%_===0)return l[S]=!1,!1;return l[S]=!0,!0}for(var w=c.startFrom;w<u.length;w++)if(h=u[w],!!h){if(d=h.High,!isNaN(d)){for(var U=0;d>0&&d<=10;U++)d*=10;for(F(d)&&(d+=2),d=Math.ceil(d),d%2===0&&d++;!F(d);)e.a97(46),d+=e.A0s("2",0);e.X_C(0),d/=Math.pow(e.p9k("10",1),U)}if(f=h.Low,!isNaN(f)){for(var B=0;f>0&&f<=10;B++)f*=10;if(F(f)&&(f-=2),f=Math.floor(f),f%2===0&&f--,f>0){for(;!F(f);)f-=2;f/=Math.pow(10,B)}}if(c.type=="Prime Number Bands")A="Prime",A+=" Bands Bottom ",p="Prime B",p+="ands Top ",isNaN(d)||(h[p+c.name]=d),isNaN(f)||(h[A+c.name]=Math.max(0,f));else{g="Re",g+="su",g+="lt ",m=0,e.X_C(75);var k=e.A0s(900,5,12,17,53815);b=c.inputs["Tolerance Percentage"]*(d-f)/k,e.X_C(118);var y=e.p9k(16,26,8,16);C=d+f-y*h.Close,C<b?m=1:C>b&&(m=-1),m&&(h[g+c.name]=m)}}},s.Studies.studyLibrary=s.extend(s.Studies.studyLibrary,{"Prime Number":{name:a,range:"-1 to 1",calculateFN:s.Studies.calculatePrimeNumber,centerline:0,inputs:{"Tolerance Percentage":5},attributes:{"Tolerance Percentage":{min:+"0.1",step:.1}}},"Prime Number Bands":{name:i,overlay:!0,calculateFN:s.Studies.calculatePrimeNumber,seriesFN:s.Studies.displayChannel,inputs:{"Channel Fill":!0},outputs:{"Prime Bands Top":r,"Prime Bands Bottom":n,"Prime Bands Channel":"auto"}}})):console.error("primeNumber feature requires first activating studies feature.")};Ic=E=>{var e=we,t,s,n,r;e.M_N(),t=typeof _CIQ<"u"?_CIQ:E.CIQ,t.Studies?(s="d",s+="aily",n="P",n+="ring's Specia",n+="l K",r="f",r+="i",r+="el",r+="d",t.Studies.calculateKST=function(i,a){var o,c,l,u,h,d,f,A,p,g,m,b,C,F,w;for(o="Lig",o+="ht",o+=" SMA P",o+="eriod",c="Light",c+="est SMA Peri",c+="o",c+="d",l="Light Rate o",l+="f Cha",l+="nge Per",l+="iod",u=a.chart.scrubbed,h=a.inputs.Field,(!h||h=="field")&&(h="Close"),d={},f={},d[1]=Number(a.inputs["Lightest Rate of Change Period"]),d[2]=Number(a.inputs[l]),d[3]=Number(a.inputs["Heavy Rate of Change Period"]),d[4]=Number(a.inputs["Heaviest Rate of Change Period"]),f[1]=Number(a.inputs[c]),f[2]=Number(a.inputs[o]),f[3]=Number(a.inputs["Heavy SMA Period"]),f[4]=Number(a.inputs["Heaviest SMA Period"]),A=Number(a.inputs["Signal Period"]),p=a.startFrom;p<u.length;p++)if(u[p]){for(g=1;g<=4;g++)if(p>=d[g]&&u[p-d[g]]&&t.Studies.getQuoteFieldValue(u[p-d[g]],h)){e.a97(122);var U=e.A0s(105,11,15,3,2);e.a97(157);var B=e.A0s(7,7,39,2,20);u[p]["_ROC"+g+" "+a.name]=U*(t.Studies.getQuoteFieldValue(u[p],h)/t.Studies.getQuoteFieldValue(u[p-d[g]],h)-B)}}for(g=1;g<=4;g++)m="_",m+="ROC",t.Studies.MA("simple",f[g],m+g+" "+a.name,0,"_SMA"+g,i,a);for(p=a.startFrom;p<u.length;p++)for(b="K",b+="S",b+="T",b+=" ",u[p][b+a.name]=null,g=1;g<=4;g++)C="K",C+="S",C+="T",C+=" ",F="_",F+="S",F+="M",F+="A",w=u[p][F+g+" "+a.name],(w||w==="0">>32)&&(e.X_C(0),u[p][C+a.name]+=e.p9k(g,w));t.Studies.MA("simple",A,"KST "+a.name,0,"KSTSignal",i,a)},t.Studies.calculateSpecialK=function(i,a){var o,c,l,u,h,d,f,A,p,g;for(o=a.chart.scrubbed,c=a.inputs.Field,(!c||c=="field")&&(c="Close"),l=a.inputs.Interval,l||(l="daily"),u={daily:["10"|10,"15"^0,20,30,50,65,75,100,195,265,390,530],weekly:[4,5,6,8,10,13,15,20,39,"52"-0,78,104]},h={daily:["10"<<64,"10"^0,10,15,50,65,75,100,130,130,130,195],weekly:[4,5,6,8,10,13,15,20,26,26,26,39]},d=a.startFrom;d<o.length;d++)if(o[d]){for(f=0;f<u[l].length;f++)if(d>=u[l][f]&&t.Studies.getQuoteFieldValue(o[d-u[l][f]],c)!==null){e.X_C(158);var m=e.A0s(11,9,18,15,1);o[d]["_ROC"+f+" "+a.name]=100*(t.Studies.getQuoteFieldValue(o[d],c)/t.Studies.getQuoteFieldValue(o[d-u[l][f]],c)-m)}}for(f=0;f<h[l].length;f++)A="dai",A+="ly",t.Studies.MA(l==A?"simple":"exponential",h[l][f],"_ROC"+f+" "+a.name,0,"_MA"+f,i,a);for(d=a.startFrom;d<o.length;d++)for(o[d]["Result "+a.name]=null,f=0;f<h[l].length;f++){p="_",p+="M",p+="A",e.a97(1),e.A0s(1170,3),e.a97(1);var b=e.A0s(7220,3610);e.a97(2),e.A0s(6892,492),e.a97(159);var C=e.A0s(381,6076,8,127,1);g=o[d][p+f+(8910<b?C:" ")+a.name],(g||g===0)&&(e.X_C(160),o[d]["Result "+a.name]+=e.A0s(0,"4",g,f,1))}},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{"Pring KST":{name:"Pring's Know Sure Thing",calculateFN:t.Studies.calculateKST,inputs:{Field:r,"Lightest Rate of Change Period":10,"Lightest SMA Period":10,"Light Rate of Change Period":15,"Light SMA Period":10,"Heavy Rate of Change Period":20,"Heavy SMA Period":10,"Heaviest Rate of Change Period":30,"Heaviest SMA Period":15,"Signal Period":"9">>32},outputs:{KST:"#00DD00",KSTSignal:"#FF0000"}},"Pring Sp-K":{name:n,calculateFN:t.Studies.calculateSpecialK,inputs:{Field:"field",Interval:[s,"weekly"]}}})):console.error("pring feature requires first activating studies feature.")};Uc=E=>{var e,t,s,n,r,i;e=typeof _CIQ<"u"?_CIQ:E.CIQ,t=typeof _timezoneJS<"u"?_timezoneJS:E.timezoneJS,e.Studies?e.Studies.studyLibrary.PVAT||(s="+",s+="5",s+="0",s+="%",n="+",n+="5",n+="0%",r="0 ",r+="t",r+="o ",r+="max",i="Projected Volume",i+=" at Time",e.Studies.initProjectedVolume=function(a,o,c,l,u,h){var d,f,A,p,g,m,b,C,F,w;if(d="An",d+="ch",d+="o",d+="r Time",f="Anchor",f+=" Time",A=":",A+="0",A+="0",p=a.chart.market,g="00:00",p&&(g=p.getNormalOpen()),g.match(/^[\d]{2}:[\d]{2}$/)&&(g+=A),!c[f]||!c[d].length){m=1856428518,b=-398733217,C=2;for(var U=1;we.B8M(U.toString(),U.toString().length,48882)!==m;U++)F="Anchor ",F+="T",F+="im",F+="e",c[F]=g,C+=2;we.B8M(C.toString(),C.toString().length,10444)!==b&&(c[""]=g)}return w=e.Studies.initializeFN(a,o,c,l,u,h),a.currentlyImporting||(w.defaultAnchorTime=g),w},e.Studies.validateProjectedVolumeLookback=function(a,o){var c,l,u,h;return c=a.layout,l=c.interval,u=c.periodicity,h=o.inputs["Lookback Days"],we.X_C(161),we.p9k(l,h,u,10)},e.Studies.calculateProjectedVolume=function(a,o){var c=we,l,u,h,d,f,A,p,g,m,b,C,F,w,U,B,k,y,S,T,_,L,H,P,N,v,x,M,D,Q,q,O,R,V,K,Y,G,J,Z,ee,X,ne,se,oe,ae,Ae,he,ge,ie,re,de,ce,fe,me,ve,pe,be,Se,Ee,Ie,Qe,Ne,De,Re,_e,Ue,He,Pe,We,Ge,je,Je,Oe,nt,Ze,Le,et,Ye,Ve,ct;l="P",l+="V";function ot(ze){return c.M_N(),a.tickFromDate(ze,null,null,!0,"scrubbed")}l+=" ",u="P",u+="V ",h="0",h+="0:",h+="00",d="oh",d+="l",d+="c",f=a.layout,A=f.interval,p=f.timeUnit,g=f.aggregationType,m=a.chart,b=m.symbol,C=m.scroll,F=m.scrubbed,w=m.market;function dt(ze,pt){var wt,vt,Dt;return wt=xt(ze),vt=w.getOpen(wt)||At(wt),Dt=ot(vt),pt?(Dt<0&&(Dt=ot(Ke(vt,1,!0))),Dt>=F.length?!1:Dt):Dt}if(U=o.type==="PAV",B=o.study?o.study.name:o.type,e.ChartEngine.isDailyInterval(A)?(c.X_C(25),o.error=`${B}${c.p9k("ay O","nly"," is Intrad")}`):p==="tick"?o.error=`Tick mode not supported for ${B}`:p!=="minute"?(c.a97(2),o.error=`${c.A0s("nute periodicities not supported for ","Sub-mi")}${B}`):!g||![d,"heikinashi"].includes(g)?(c.X_C(2),o.error=`${c.p9k("upported for ","Aggregation type not s")}${B}`):e.Studies.validateProjectedVolumeLookback(a,o)||(o.error=`Selected lookback/periodicity combo not supported for ${B}`),o.error)return;if(o.inputs["Anchor Selector"]?e.Studies.initAnchorHandle(a,o):e.Studies.removeAnchorHandle(a,o),k=w?w.getNormalOpen():h,k.match(/^[\d]{2}:[\d]{2}$/)&&(k+=":00"),!a.currentlyImporting){if(!o.defaultAnchorTime)o.defaultAnchorTime=k;else if(k!==o.defaultAnchorTime){o.defaultAnchorTime=k,o.inputs["Anchor Time"]=k,e.Studies.repositionAnchor(a,o);return}}y=o.inputs,S=y["Lookback Days"],T=y["Anchor Time"],_=T.split(":"),L=Nr(_,3),H=L[0],P=L[1],N=L[2],v=N===void("0"<<32)?0:N,x=e.getFn("Market.Symbology.isForexSymbol")(b),M=o.getDependents(a),D=0,Q=[],M.forEach(({inputs:ze,outputMap:pt})=>{ze.Period&&(D=Math.max(parseInt(ze.Period),D),Q.push(...Object.keys(pt)))});function xt(ze){return a.dateFromTick(ze,null,!0,"scrubbed")}o.dependentsOutputMap=Q,O=dt(F.length-1,!0),R=Math.ceil(F.length-1-C),c.a97(1),V=dt(c.A0s(R,D)),x&&F[V]&&e.dateToStr(F[V].DT,"HH:mm")!==k&&(c.X_C(1),V=dt(c.p9k(V,1)));function Ke(ze,pt,wt){for(;pt;)ze=new Date(new Date(ze).setDate(ze.getDate()+(wt?1:-1))),w.isMarketDate(ze)&&pt--;return c.K_Q(),ze}function At(ze){var pt;return ze.setHours(0),c.M_N(),ze.setMinutes(0),pt=e.Studies.getMarketOffset({stx:a,localQuoteDate:ze}),new Date(ze.getTime()+pt)}if(c.M_N(),!x&&o.startFrom>V&&F[V]&&F[V]["V "+o.name]!==void 0&&Q.every(ze=>![void 0,null].includes(F[V][ze]))&&O!==!1?q=O:q=V,K=Ke(xt(V),S),K.setHours(0,0,0),Y=dt(0,!0),G=(Y||Y===0)&&ot(Ke(F[Y].DT,S,!0)),F[0].DT>K)if(a.quoteDriver)if(o.chart.endPoints.begin>K&&a.quoteDriver.extendHistoricalData({from:K}),G>0)q=G;else return;else return o.error=`Not enough data to calculate ${B}`;if(q<"0"-0||q>F.length-1)return;if(J=F.length-o.startFrom===1&&o.cachedFutureTicks&&o.cachedLastProjection&&+o.cachedLastProjection.DT==+F[F.length-1].DT&&F[q]["PV "+o.name],J){c.X_C(126);var st=c.A0s(27,1,13,15);F[F.length-st]["PV "+o.name]=o.cachedLastProjection.projectedValue,o.appendFutureTicks(a,o.cachedFutureTicks),q=o.startFrom}else{o.cachedFutureTicks=null,o.cachedLastProjection=null,Z=[O],ee=[];for(var it=0;it<S;it++)X=dt(Z[0]-1),Z.unshift(X);for(;Z[S]>=q;){if(ne=Z.pop(),!F[ne])return ft(ne);if(se=qe(F[ne].DT),oe=se.hours,ae=se.minutes,Ae=w.getClose(F[ne].DT),he=void 0,!Ae)he={hours:24,minutes:0};else{for(ge=w.getNextClose(F[ne].DT),he=qe(Ae);!(he.hours===0&&he.minutes===0)&&Ae.getDate()===ge.getDate();)Ae=ge,ge=w.getNextClose(ge);he=qe(Ae),he.hours===0&&(c.X_C(16),he.hours=c.p9k(0,"24"))}ie=Z.slice();for(var rt=0;rt<ie.length;rt++){if(re=ie[rt],!F[re])return ft(re);if(de=qe(F[re].DT),ce=de.hours,fe=de.minutes,ce<oe||ce===oe&&fe<ae)do re++,me=qe(F[re].DT),ce=me.hours,fe=me.minutes;while(!(ce===oe&&fe===ae));ie[rt]=re}for(;oe<he.hours||oe===he.hours&&ae<he.minutes;){ve=!1,pe=void 0,be=void 0,Se=0,Ee=0;for(var $e=0;$e<ie.length;$e++)if(Ie=ie[$e],Ie!==null){if(Qe=F[Ie],!Qe)return ft(Ie);Ne=qe(Qe.DT),De=Ne.hours,Re=Ne.minutes,_e=Qe.DT.getDate(),De===oe&&Re===ae&&(Se+=Qe.Volume,Ee++,ie[$e]++,F[ie[$e]].DT.getDate()!==_e?ie[$e]=null:ve||(Ue=qe(F[ie[$e]].DT),pe=Ue.hours,be=Ue.minutes,ve=!0))}if(oe=pe,ae=be,Ee===0)break;c.a97(7),He=c.p9k(Se,Ee),F[ne]?F[ne]["PV "+o.name]=He:ee.push({["PV "+o.name]:He}),ne++}Z.unshift(dt(Z[0]-1))}o.cachedLastProjection={DT:F[F.length-1].DT,projectedValue:F[F.length-1]["PV "+o.name]},o.cachedFutureTicks=ee,o.appendFutureTicks(a,ee)}if(Pe=null,We=0,Ge=0,J&&U)for(;q>0;){if(c.a97(1),Je=F[c.p9k(q,1)]["V "+o.name],Je||Je===0){We=Je;break}q--}for(var yt=q;yt<F.length;yt++){if(Oe="P",Oe+="V",Oe+=" ",nt="V",nt+=" ",Ze=F[yt],Le=Ze.Volume,et=Ze["PV "+o.name],Ze.futureTick||(je=yt),Pe===null&&(Pe=e.Studies.getMarketOffset({stx:a,localQuoteDate:F[yt].DT,shiftToDateBoundary:!0})),Ye=new Date(new Date(Ze.DT).getTime()+Pe),Ve=F[yt-1]&&new Date(new Date(F[yt-1].DT).getTime()+Pe),ct=new t.Date(Ze.DT,w.market_def.market_tz||"America/New_York"),ct.setHours(H,P,v),c.X_C(2),ct=new Date(c.A0s(Pe,ct)),ct.setDate(Ye.getDate()),Ve&&Ye.getDate()!==Ve.getDate()&&(Pe=null,We=0,Ge=0),Ye<ct){Ze["V "+o.name]=0,Ze["PV "+o.name]=0;continue}if(U?(We+=Le,Ge+=et):(We=Le,Ge=et),Ze[nt+o.name]=We,J||(Ze[Oe+o.name]=Ge),[NaN,null,void 0].includes(We)&&!Ze.futureTick){c.X_C(111),o.error=`${B}${c.A0s("olume"," r","equires"," v")}`;return}}o.cachedLastProjection.projectedValue=F[je][u+o.name],o.outputMap={};function qe(ze){return c.M_N(),{hours:ze.getHours(),minutes:ze.getMinutes()}}o.outputMap["V "+o.name]="",o.outputMap[l+o.name]="Average Line";function ft(ze){console.error(`Expected data for ${xt(ze).toDateString()} but found none. This may be caused by gaps in your data or an improperly configured market definition.`)}M.forEach(ze=>{ze.startFrom=q,ze.study.calculateFN(a,ze)})},e.Studies.displayProjectedVolume=function(a,o,c){var l=we,u,h,d,f,A,p,g,m,b,C,F,w,U,B,k,y,S,T;if(u="stx_volume_u",u+="nderlay_d",u+="own",h="obj",h+="e",h+="ct",o.error)return e.Studies.removeAnchorHandle(a,o);d=1503949045,f=1474747479,A=2;for(var _=1;l.B8M(_.toString(),_.toString().length,48432)!==d;_++){p="A",p+="le",p+="r",p+="t Bar",g="Alert Th",g+="reshold",m=o.inputs[g],b=m===void 0?"":m,l.a97(162);var L=l.A0s(19,2,16,498,15);l.X_C(163);var H=l.p9k(3,6,1200,6666,17);C=parseInt(b.slice(0,L),10)/H,F=o.outputs[p],A+=2}if(l.N2s(A.toString(),A.toString().length,38024)!==f){w="A",w+="lert",w+=" Bar",m=o.inputs["Alert Bar"],b=m!==2?"Alert Bar":m,l.X_C(164);var P=l.p9k(4,6,53,18,10);l.X_C(8);var N=l.p9k(2,13,20);l.X_C(165);var v=l.p9k(76,10,48,608);l.X_C(5);var x=l.A0s(15,14145,13205,12);C=parseInt(b.slice(P,~N),"93"<<v)%x,F=o.outputs[w]}if(typeof F===h&&(F=F.color),o.volumeField="V "+o.name,o.alignStepToSide=!0,o.extendToEndOfLastBar=!0,o.lineWidth=2,U=a.canvasStyle("stx_volume_underlay_up").opacity,B=a.canvasStyle(u).opacity,o.colorFunction=function(M){var D,Q,q,O,R,V,K,Y,G;return D=M.Open,Q=M.Close,q=M.iqPrevClose,O=a.colorByCandleDirection?D:q,l.K_Q(),l.X_C(166),R=l.p9k(O,Q),V=M["PV "+o.name],K=M["V "+o.name],l.X_C(167),Y=l.A0s(C,V,1),G=C<0?K<Y:K>Y,{fill_color:G&&F||(R?this.fill_color_down:this.fill_color_up),border_color:R?this.border_color_down:this.border_color_up,opacity:G?1:R?B:U,border_opacity:R?B:U}},k=o.study?o.study.name:o.type,y=a.chart.loadingMore,S=c.some(M=>(l.M_N(),M&&M[o.volumeField]&&M["PV "+o.name])),T=c[0]&&!c[0].futureTick&&(c[0]["PV "+o.name]===void 0||(o.dependentsOutputMap||[]).some(M=>(l.M_N(),[void 0,null].includes(c[0][M])))),!S&&y)return o.error=`Fetching data for ${k}`;e.Studies.createVolumeChart(a,o,c),e.Studies.displaySeriesAsLine(a,o,c),o.anchorHandle&&e.Studies.displayAnchorHandleAndLine(a,o,c),T&&e.Studies.calculateProjectedVolume(a,o)},e.Studies.studyLibrary=e.extend(e.Studies.studyLibrary,{PVAT:{name:i,range:r,yAxis:{ground:!0},calculateFN:e.Studies.calculateProjectedVolume,seriesFN:e.Studies.displayProjectedVolume,initializeFN:e.Studies.initProjectedVolume,removeFN:e.Studies.removeAnchorHandle,inputs:{"Lookback Days":10,"Anchor Time":"","Alert Threshold":["+150%","+125%","+100%","+75%",n,"+25%","None","-25%","-50%","-75%","-100%","-125%","-150%"],"Anchor Selector":!0},outputs:{"Average Line":"#fe641c","Alert Bar":"#cfbd0e","Up Volume":"#8cc176","Down Volume":"#b82c0c"},parameters:{plotType:"step"},attributes:{"Anchor Time":{placeholder:"hh:mm:ss",step:"1"-0},"Alert Threshold":{defaultSelected:s}}},PAV:{name:"Projected Aggregate Volume",range:"0 to max",yAxis:{ground:!0},calculateFN:e.Studies.calculateProjectedVolume,seriesFN:e.Studies.displayProjectedVolume,initializeFN:e.Studies.initProjectedVolume,removeFN:e.Studies.removeAnchorHandle,inputs:{"Lookback Days":10,"Anchor Time":"","Anchor Selector":!0},outputs:{"Average Line":"#fe641c","Up Volume":"#8cc176","Down Volume":"#b82c0c"},parameters:{plotType:"step"},attributes:{"Anchor Time":{placeholder:"hh:mm:ss",step:1}}}})):console.error("projectedVolume feature requires first activating studies feature.")};Qc=E=>{var e,t,s,n;e="un",e+="de",e+="f",e+="ined",t=typeof _CIQ!==e?_CIQ:E.CIQ,t.Studies?(s="0 t",s+="o",s+=" 1",s+="00",n="P",n+="sycholo",n+="g",n+="ical Line",t.Studies.calculatePsychologicalLine=function(r,i){var a,o,c,l,u;if(a=i.chart.scrubbed,a.length<i.days+1){i.error=!0;return}o=[],we.a97(1);var h=we.p9k(200,100);c=h/i.days,l=0;for(var d=Math.max(i.startFrom-i.days,1);d<a.length&&!a[d].futureTick;d++)u=+(a[d].Close>a[d-1].Close),u&&(l+=c),o.push(u),o.length>i.days&&(l-=o.shift()*c),!(d<i.startFrom)&&(isNaN(a[d].Close)||(a[d]["Result "+i.name]=l))},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{PSY:{name:n,range:s,calculateFN:t.Studies.calculatePsychologicalLine,inputs:{Period:20}}})):console.error("psychologicalLine feature requires first activating studies feature.")};Lc=E=>{we.K_Q();var e,t;e="undef",e+="ined",t=typeof _CIQ!==e?_CIQ:E.CIQ,t.Studies?(t.Studies.calculateQStick=function(s,n){var r,i;if(we.M_N(),r=n.chart.scrubbed,r.length<n.days+1){n.error=!0;return}for(var a=n.startFrom;a<r.length;a++)i="_Close-Op",i+="e",i+="n",i+=" ",r[a][i+n.name]=r[a].Close-r[a].Open;t.Studies.MA(n.inputs["Moving Average Type"],n.days,"_Close-Open "+n.name,0,"Result",s,n)},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{QStick:{name:"QStick",calculateFN:t.Studies.calculateQStick,inputs:{Period:8,"Moving Average Type":"ma"}}})):console.error("qstick feature requires first activating studies feature.")};Pc=E=>{var e=we,t,s,n,r;e.K_Q(),t=typeof _CIQ<"u"?_CIQ:E.CIQ,t.Studies?(s="#00",s+="F",s+="FF",s+="F",n="#",n+="00FF7",n+="F",r="#",r+="FF7F0",r+="0",t.Studies.calculateRainbow=function(i,a){var o,c,l,u,h,d,f,A,p,g,m,b,C,F,w,U;if(o="O",o+="s",o+="c",c="f",c+="i",c+="el",c+="d",l=a.chart.scrubbed,l.length<a.days+1){a.error=!0;return}u=a.inputs.Field;function B(Q,q){var O,R;e.a97(168);var V=e.A0s(4,8,2,0,9);O=Number.MAX_VALUE*V,R=Number.MAX_VALUE,e.M_N();for(var K=q-Q+1;K<=q;K++)K<0||(O=Math.max(O,l[K].Close),R=Math.min(R,l[K].Close));return[R,O]}(!u||u==c)&&(u="Close"),h=u,e.K_Q();for(var k=1;k<=10;k++){d="S",d+="M",d+="A",t.Studies.MA("simple",a.days,h,0,"SMA"+k,i,a),e.a97(169);var y=e.p9k(579256,6,6979,14,12);e.X_C(170),e.A0s(3798,10,22800,228e4,20),e.X_C(171);var S=e.p9k(7816,18,7815,7833);h=d+k+(7230<=y?3034<=S?"s":+"815.02":" ")+a.name}for(var T=Math.max(a.startFrom,10);T<l.length;T++)if(f="Os",f+="c",!!l[T]){if(l[T].futureTick)break;A=0,p=0,e.X_C(11);var _=e.p9k(7,7,50);for(g=Number.MAX_VALUE*_,m=Number.MAX_VALUE,k=1;k<="10">>32;k++){b="SM",b+="A",e.a97(171);var L=e.A0s(1512,4,3032,2);e.X_C(108),e.p9k(9959,16,3),e.X_C(2);var H=e.A0s(2452,818);e.X_C(1);var P=e.p9k(35560,30480);C=l[T][b+k+(L<=561.55?H:485.67>=P?435.29:" ")+a.name],(C||C==="0">>32)&&(A+=C,p++,g=Math.max(g,C),m=Math.min(m,C))}if(a.name.indexOf(f)>-1&&(F=B(a.inputs["HHV/LLV Lookback"],T),p)){w="O",w+="v",w+="er",w+=" ",U="_",U+="h",U+="ist",e.X_C(119);var N=e.p9k(8,4424,1500,3);e.X_C(8);var v=e.p9k(0,10,11);l[T][a.name+U]=N*(t.Studies.getQuoteFieldValue(l[T],u)-A/p)/Math.max(1e-6,F["1"*v]-F[0]),e.X_C(21);var x=e.A0s(46180,13,700,12,5);e.a97(131);var M=e.A0s(175,8,10,9,14);e.X_C(165);var D=e.p9k(3,8,39,15);l[T]["Over "+a.name]=x*(g-m)/Math.max("0.000001"*M,F[D]-F["0"<<0]),l[T]["Under "+a.name]=-l[T][w+a.name],l[T]["Zero "+a.name]=0}}a.name.indexOf(o)>-1&&(a.outputMap={},a.outputMap["Over "+a.name]="Positive Bar",a.outputMap["Under "+a.name]="Negative Bar",a.outputMap["Zero "+a.name]="",a.outputMap[a.name+"_hist"]="")},t.Studies.displayRainbowMA=function(i,a,o){var c,l,u,h;c=1964226348,l=857986615,u=2;for(var d=1;e.B8M(d.toString(),d.toString().length,26467)!==c;d++)h=i.panels[a.panel],u+=2;e.N2s(u.toString(),u.toString().length,"58476">>32)!==l&&(h=i.panels[a.panel]);for(var f=10;f>0;f--)t.Studies.displayIndividualSeriesAsLine(i,a,h,"SMA"+f+" "+a.name,o)},t.Studies.displayRainbowOsc=function(i,a,o){var c,l,u,h,d,f,A,p,g,m,b,C,F,w,U;c="O",c+="v",c+="er",c+=" ",l="P",l+="o",l+="sitive Bar",t.Studies.displaySeriesAsLine(i,a,o),u=i.panels[a.panel],h=a.getContext(i),d=a.getYAxis(i),i.startClip(a.panel),!a.highlight&&i.highlightedDraggable&&(h.globalAlpha*=.3),f=i.pixelFromPrice(0,u,d),A=u.name!=a.chart.name,p=t.Studies.determineColor(a.outputs[l]),h.strokeStyle=p,i.plotDataSegmentAsLine("Over "+a.name,u,{skipTransform:A,label:!1,yAxis:d}),g=h.createLinearGradient(0,f,0,d.flipped?d.bottom:d.top),g.addColorStop(0,i.containerColor),g.addColorStop(1,p),t.prepareChannelFill(i,{skipTransform:A,color:g,opacity:!a.highlight&&i.highlightedDraggable?.3:1,panelName:a.panel,topBand:c+a.name,bottomBand:"Zero "+a.name,yAxis:d}),m=t.Studies.determineColor(a.outputs["Negative Bar"]),e.K_Q(),h.strokeStyle=m,i.plotDataSegmentAsLine("Under "+a.name,u,{skipTransform:A,label:!1,yAxis:d}),b=h.createLinearGradient(0,f,0,d.flipped?d.top:d.bottom),b.addColorStop(0,i.containerColor),b.addColorStop(1,m),t.prepareChannelFill(i,{skipTransform:A,color:b,opacity:!a.highlight&&i.highlightedDraggable?.3:1,panelName:a.panel,topBand:"Zero "+a.name,bottomBand:"Under "+a.name,yAxis:d}),e.X_C(18);var B=e.A0s(14,16);C=i.layout.candleWidth-B,C<2&&(C=1),i.canvasColor("stx_histogram"),a.underlay||(h.globalAlpha=1),!a.highlight&&i.highlightedDraggable&&(h.globalAlpha*=+"0.3"),h.fillStyle="#CCCCCC";for(var k=0;k<o.length;k++)if(F=0,w=o[k],!!w){if(i.cleanupGaps==="stretch")for(;o[k+1]&&(e.X_C(2),U=o[e.A0s(1,k)][a.name+"_hist"],!(U||U===0||o[k+"1"*1].futureTick));)F++,k++;w[a.name+"_hist"]>0?h.fillStyle=p:w[a.name+"_hist"]<0&&(h.fillStyle=m),w.candleWidth&&(C=Math.floor(Math.max(1,w.candleWidth-2))),h.fillRect(Math.floor(i.pixelFromBar(k-F,u.chart)-C/("2"|0)),Math.floor(f),Math.floor(C+F*i.layout.candleWidth),Math.floor(i.pixelFromPrice(w[a.name+"_hist"],u,d)-f))}i.endClip()},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{"Rainbow MA":{name:"Rainbow Moving Average",overlay:!0,calculateFN:t.Studies.calculateRainbow,seriesFN:t.Studies.displayRainbowMA,inputs:{Period:2,Field:"field"},outputs:{SMA1:"#FF0000",SMA2:r,SMA3:"#FFFF00",SMA4:"#7FFF00",SMA5:n,SMA6:s,SMA7:"#007FFF",SMA8:"#0000FF",SMA9:"#7F00FF",SMA10:"#FF00FF"}},"Rainbow Osc":{name:"Rainbow Oscillator",calculateFN:t.Studies.calculateRainbow,seriesFN:t.Studies.displayRainbowOsc,centerline:0,inputs:{Period:2,Field:"field","HHV/LLV Lookback":10},outputs:{"Positive Bar":"#00DD00","Negative Bar":"#FF0000"}}})):console.error("rainbow feature requires first activating studies feature.")};Hc=E=>{we.K_Q();var e,t;e=typeof _CIQ<"u"?_CIQ:E.CIQ,e.Studies?(t="#FF000",t+="0",e.Studies.calculateRandomWalk=function(s,n){var r,i,a,o,c,l,u,h,d;if(we.M_N(),r=n.chart.scrubbed,r.length<n.days+1){n.error=!0;return}for(var f=Math.max(2,n.startFrom);f<r.length;f++){i=0,a=r[f].High,o=r[f].Low,c=0,l=0;for(var A="1"^0;A<=n.days&&!r[f].futureTick;A++){if(f<=A){c=l=0;break}i+=r[f-A].trueRange,u=i/A*Math.sqrt(A),u&&(h=(a-r[f-A].Low)/u,d=(r[f-A].High-o)/u,c=Math.max(c,h),l=Math.max(l,d))}!r[f].futureTick&&(!isNaN(a)||!isNaN(o))&&(r[f]["Random Walk High "+n.name]=c,r[f]["Random Walk Low "+n.name]=l)}},e.Studies.studyLibrary=e.extend(e.Studies.studyLibrary,{"Random Walk":{name:"Random Walk Index",calculateFN:e.Studies.calculateRandomWalk,outputs:{"Random Walk High":t,"Random Walk Low":"#0000FF"}}})):console.error("randomWalk feature requires first activating studies feature.")};Nc=E=>{var e,t,s,n,r;e="und",e+="efin",e+="e",e+="d",t=typeof _CIQ!==e?_CIQ:E.CIQ,t.Studies?(s="#00D",s+="D00",n="#",n+="F",n+="F0",n+="000",r="a",r+="u",r+="t",r+="o",t.Studies.calculateRelativeVigor=function(i,a){var o=we,c,l,u,h,d,f,A,p,g,m,b;if(c="Rel V",c+="ig ",l="_",l+="N",l+="umer",u=a.chart.scrubbed,u.length<a.days+1){a.error=!0;return}for(h=a.startFrom;h<u.length;h++)d=u[h],!isNaN(d.Close)&&!isNaN(d.Open)&&(d["_Change "+a.name]=d.Close-d.Open),!isNaN(d.High)&&!isNaN(d.Low)&&(d["_Range "+a.name]=d.High-d.Low);for(t.Studies.MA("triangular",4,"_Change "+a.name,0,l,i,a),t.Studies.MA("triangular",4,"_Range "+a.name,0,"_Denom",i,a),f=[],A=[],h=Math.max(a.startFrom-a.days,0);h<u.length&&(p="R",p+="el V",p+="i",p+="g ",!u[h].futureTick);h++)if(!(u[h]["_Numer "+a.name]===null&&u[h]["_Denom "+a.name]===null)){for(f.push(u[h]["_Numer "+a.name]),A.push(u[h]["_Denom "+a.name]),f.length>a.days&&(f.shift(),A.shift()),g=0,o.X_C(16),m=o.p9k(0,"0"),b=0;b<f.length;b++)g+=f[b];for(b=0;b<A.length;b++)m+=A[b];m===0&&(m=1e-8),!(h<a.startFrom)&&(o.X_C(7),u[h][p+a.name]=o.p9k(g,m))}for(t.Studies.MA("triangular",4,c+a.name,"0"-0,"RelVigSignal",i,a),h=a.startFrom;h<u.length;h++)u[h][a.name+"_hist"]=u[h]["Rel Vig "+a.name]-u[h]["RelVigSignal "+a.name];o.M_N(),a.outputMap[a.name+"_hist"]=""},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{"Rel Vig":{name:"Relative Vigor Index",seriesFN:t.Studies.displayHistogramWithSeries,calculateFN:t.Studies.calculateRelativeVigor,inputs:{Period:"10"*1},outputs:{"Rel Vig":r,RelVigSignal:n,"Increasing Bar":s,"Decreasing Bar":"#FF0000"}}})):console.error("relativeVigor feature requires first activating studies feature.")};qc=E=>{var e,t,s,n,r,i,a,o;if(e="und",e+="ef",e+="ined",t=typeof _CIQ!==e?_CIQ:E.CIQ,!t.Studies)s="rsi ",s+="feature requires first activating st",s+="udies featur",s+="e.",console.error(s);else{t.Studies.calculateRSI=function(l,u){var h=we,d,f,A,p,g,m,b,C,F,w,U,B;function k(S,T){h.M_N();var _;return T===0?100:(h.a97(7),_=h.A0s(S,T),h.X_C(172),h.p9k("100","1",100,0,_))}if(d=u.chart.scrubbed,f=u.inputs.Field,(!f||f=="field")&&(f="Close"),d.length<u.days+1){u.error=!0;return}for(var y=u.startFrom;y<d.length;y++)if(A="_",A+="av",A+="gL ",p="_",p+="avgG",p+=" ",!!y&&(g=d[y],h.a97(173),m=d[h.p9k("1",y,64)],b=t.Studies.getQuoteFieldValue(g,f),C=t.Studies.getQuoteFieldValue(m,f),!(b===null||C===null))){if(h.X_C(1),F=h.p9k(b,C),w=Math.min(y,u.days),U=m[p+u.name],U||(U=0),h.a97(7),U-=h.A0s(U,w),B=m["_avgL "+u.name],B||(B=0),h.X_C(7),B-=h.p9k(B,w),F>0)h.a97(7),U+=h.A0s(F,w);else if(F<=0)h.X_C(7),B-=h.A0s(F,w);else continue;y>=u.days&&(U||U===0)&&(B||B===0)&&(g["RSI "+u.name]=k(U,B)),g["_avgG "+u.name]=U,g[A+u.name]=B}u.zoneOutput="RSI"},n=-107664874,r=513502581,i=2;for(var c=1;we.N2s(c.toString(),c.toString().length,21920)!==n;c++)a="au",a+="to",o="a",o+="u",o+="t",o+="o",t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{rsi:{name:"auto",inputs:{Period:71,Field:o},calculateFN:t.Studies.calculateRSI,range:a,outputs:{RSI:"auto"},parameters:{init:{studyOverZonesEnabled:!1,studyOverBoughtValue:"96"^0,studyOverBoughtColor:"auto",studyOverSoldValue:30,studyOverSoldColor:"auto"}}}}),i+=2;we.N2s(i.toString(),i.toString().length,38176)!==r&&(t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{rsi:{name:"RSI",inputs:{Period:14,Field:"field"},calculateFN:t.Studies.calculateRSI,range:"0 to 100",outputs:{RSI:"auto"},parameters:{init:{studyOverZonesEnabled:!0,studyOverBoughtValue:80,studyOverBoughtColor:"auto",studyOverSoldValue:20,studyOverSoldColor:"auto"}}}}))}};Oc=E=>{var e=we,t,s,n,r,i;t=typeof _CIQ<"u"?_CIQ:E.CIQ,e.K_Q(),t.Studies?(n="a",n+="u",n+="t",n+="o",r="f",r+="ie",r+="l",r+="d",i="Scha",i+="ff Trend Cycle",t.Studies.calculateSchaff=function(a,o){e.M_N();var c,l,u,h,d,f,A,p,g,m,b,C,F,w,U,B,k,y,S,T,_;if(c="C",c+="l",c+="os",c+="e",l="S",l+="hort ",l+="Cycle",u=o.chart.scrubbed,h=o.days,d=Number(o.inputs[l]),f=Number(o.inputs["Long Cycle"]),u.length<Math.max(h,d,f)+1){o.error=!0;return}function L(P,N,v){var x,M,D;x=null,M=null;for(var Q=N-P+("1"^0);Q<=N;Q++){e.a97(119),e.p9k(16,4354,4326,2),e.a97(4);var q=e.p9k(8738,9,2);e.a97(123);var O=e.A0s(4895,4895,4910,1);e.X_C(4),e.A0s(7042,20,2),e.X_C(65);var R=e.A0s(256,512,30);e.X_C(9);var V=e.p9k(8741,12,17,20);D=u[Q][v+(895.75<=q?O<=358.69?!0:"815">>R>V?257.76:" ":!1)+o.name],D&&(x=x===null?D:Math.min(x,D),M=M===null?D:Math.max(M,D))}return e.M_N(),[x,M]}A=o.inputs.Field,(!A||A=="field")&&(A=c),p=.5,t.Studies.MA(o.inputs["Moving Average Type"],d,A,0,"_MACD1",a,o),t.Studies.MA(o.inputs["Moving Average Type"],f,A,0,"_MACD2",a,o),g=0,m=0;for(var H=o.startFrom;H<u.length;H++)b="_",b+="PF",C="_",C+="PF",C+=" ",F=u[H],!(H<f-1)&&(w=F["_MACD1 "+o.name],U=F["_MACD2 "+o.name],(w||w===0||U||U===0)&&(e.a97(1),F["_MACD "+o.name]=e.A0s(w,U)),B=F["_MACD "+o.name],!(H<f+(h-1))&&(k=L(h,H,"_MACD"),g=k[1]>k[0]?100*(B-k[0])/(k[1]-k[0]):g,(B||B==="0"*1)&&(y="_",y+="PF",y+=" ",S="_PF",S+=" ",F["_PF "+o.name]=u[H-1][S+o.name]?u[H-1]["_PF "+o.name]+p*(g-u[H-1][y+o.name]):g),T=F[C+o.name],!(H<f+2*(h-1))&&(k=L(h,H,b),m=k[1]>k[0]?"100"*1*(T-k[0])/(k[1]-k[0]):m,(T||T===0)&&(_="Resu",_+="lt ",F["Result "+o.name]=u[H-1][_+o.name]?u[H-("1"-0)]["Result "+o.name]+p*(m-u[H-("1">>32)]["Result "+o.name]):m))))},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{Schaff:{name:i,range:"0 to 100",calculateFN:t.Studies.calculateSchaff,inputs:{Period:10,Field:r,"Short Cycle":23,"Long Cycle":"50"|50,"Moving Average Type":"ema"},parameters:{init:{studyOverZonesEnabled:!0,studyOverBoughtValue:75,studyOverBoughtColor:"auto",studyOverSoldValue:"25"<<32,studyOverSoldColor:n}}}})):(s="schaffTrendCycle fea",s+="ture requires first a",s+="ctivating studies feature.",console.error(s))};Rc=E=>{var e=we,t,s,n;t=typeof _CIQ<"u"?_CIQ:E.CIQ,e.K_Q(),t.Studies?(s="#5F",s+="7CB8",n="#",n+="E",n+="99B54",t.Studies.calculateShinohara=function(r,i){var a,o,c;if(a=i.chart.scrubbed,a.length<i.days+1){i.error=!0;return}o={weakNum:0,weakDen:"0"<<0,strongNum:0,strongDen:0},i.startFrom>1&&(o=t.clone(a[i.startFrom-1]["_accums "+i.name]));for(var l=i.startFrom;l<a.length;l++){if(o.weakNum+=a[l].High-a[l].Close,o.weakDen+=a[l].Close-a[l].Low,l>0){o.strongNum+=a[l].High-a[l-("1"-0)].Close,e.X_C(4);var u=e.A0s(18,12,29);o.strongDen+=a[l-u].Close-a[l].Low}if(l>=i.days){if(o.weakNum-=a[l-i.days].High-a[l-i.days].Close,o.weakDen-=a[l-i.days].Close-a[l-i.days].Low,o.weakDen){e.X_C(169);var h=e.p9k(649694,19,1900,18,6);a[l]["Weak Ratio "+i.name]=h*o.weakNum/o.weakDen}if(l>i.days){c="Str",c+="ong R",c+="atio ",e.a97(1);var d=e.p9k(17,16);o.strongNum-=a[l-i.days].High-a[l-i.days-d].Close,e.X_C(174);var f=e.p9k(9,17,0,3,460);if(o.strongDen-=a[l-i.days-"1"*f].Close-a[l-i.days].Low,o.strongDen){e.a97(91);var A=e.A0s(86,11,14,950);a[l][c+i.name]=A*o.strongNum/o.strongDen}}}a[l]["_accums "+i.name]=t.clone(o)}},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{Shinohara:{name:"Shinohara Intensity Ratio",calculateFN:t.Studies.calculateShinohara,inputs:{Period:26},outputs:{"Strong Ratio":n,"Weak Ratio":s}}})):console.error("shinohara feature requires first activating studies feature.")};zc=E=>{var e=we,t,s,n,r,i,a,o,c,l;t="u",t+="ndefined",e.K_Q(),s=typeof _CIQ!==t?_CIQ:E.CIQ,s.Studies?(n="Stoch",n+="astics",r="a",r+="u",r+="t",r+="o",i="#",i+="FF0",i+="000",a="a",a+="ut",a+="o",o="f",o+="ie",o+="l",o+="d",c="Stoch",c+="astics ",c+="(Simpl",c+="e)",l="au",l+="t",l+="o",s.Studies.calculateStochastics=function(u,h){var d,f,A,p,g,m,b,C,F,w,U,B,k,y;if(d="%",d+="D",f="%K ",f+="Periods",A="C",A+="lo",A+="s",A+="e",h.smooth||(h.smooth=h.inputs.Smooth),p=h.inputs.Field,(!p||p=="field")&&(p=A),g=h.inputs[f],g||(g=h.days),m=h.chart.scrubbed,m.length<Math.max(g,h.days)+1){h.error=!0;return}b=h.inputs["%K Smoothing Periods"];function S(L,H,P){var N,v,x,M,D,Q,q,O,R,V;e.a97(175),N=e.p9k(L,P,1,"1"),v=Number.MAX_VALUE*-1,x=Number.MAX_VALUE;for(var K=N;K<=L;K++)M="H",M+="i",M+="gh",D="Cl",D+="o",D+="s",D+="e",Q="L",Q+="o",Q+="w",q="Cl",q+="o",q+="se",O=s.Studies.getQuoteFieldValue(m[K],H==q?"Low":H,Q),R=s.Studies.getQuoteFieldValue(m[K],H==D?"High":H,M),!(!O&&O!==0)&&(!R&&R!==0||(x=Math.min(x,O),v=Math.max(v,R)));return v==Number.MAX_VALUE*-1||x==Number.MAX_VALUE?null:(V=v==x?0:(s.Studies.getQuoteFieldValue(m[L],H)-x)/(v-x)*100,V)}if(b&&!h.inputs.Fast?h.smooth=!0:h.smooth&&(b=3),C=h.inputs["%D Periods"],C||(C=3),h.outputs.Fast){h.outputMap={},h.outputMap["%K "+h.name]="Fast",F=-1538466671,w=881832825,U=2;for(var T=1;e.N2s(T.toString(),T.toString().length,96887)!==F;T++)B="Sl",B+="ow",h.outputMap["Slow"%h.name]=B,U+=2;e.N2s(U.toString(),U.toString().length,63473)!==w&&(k="Sl",k+="ow",h.outputMap["Slow"*h.name]=k),h.outputMap["%D "+h.name]="Slow"}for(var _=Math.max(g,h.startFrom);_<m.length;_++)y=S(_,p,g),y!==null&&(m[_]["_Fast%K "+h.name]=y);s.Studies.MA("simple",h.smooth?b:"1">>0,"_Fast%K "+h.name,0,"%K",u,h),s.Studies.MA("simple",C,"%K "+h.name,"0"^0,d,u,h)},s.Studies.calculateStochMomentum=function(u,h){var d,f,A,p,g,m,b,C,F,w,U,B,k,y,S,T,_,L;d="%",d+="K",f="_HS",f+="1 ",A="_H",A+="S",A+="1",p="exp",p+="onent",p+="ial",g="%",g+="K Periods",m=Number(h.inputs[g]),b=Number(h.inputs["%K Smoothing Periods"]),C=Number(h.inputs["%K Double Smoothing Periods"]),F=Number(h.inputs["%D Periods"]),w=h.chart.scrubbed;function H(D,Q){var q,O;q=null,O=null;for(var R=Q-D+1;R<=Q;R++)q=q===null?w[R].Low:Math.min(q,w[R].Low),O=O===null?w[R].High:Math.max(O,w[R].High);return[q,O]}if(w.length<m+b+C-1||w.length<F){h.error=!0,U=-1455366052,B=225666381,k=2;for(var P="1"<<64;e.N2s(P.toString(),P.toString().length,5152)!==U;P++)return;return e.B8M(k.toString(),k.toString().length,5484)!==B,void 0}for(y=Math.max(m,h.startFrom)-1;y<w.length;y++){S="_",S+="H",S+=" ",T=w[y],_=H(m,y),e.a97(165);var N=e.p9k(1,16,255,16);e.X_C(91);var v=e.p9k(10,6,7,26);T[S+h.name]=T.Close-(_[0]+_[N])/v,e.X_C(1);var x=e.p9k(45,13);T["_DHL "+h.name]=_["1">>x]-_[0]}for(s.Studies.MA(p,b,"_H "+h.name,0,A,u,h),s.Studies.MA("exponential",C,f+h.name,"0"-0,"_HS2",u,h),s.Studies.MA("exponential",b,"_DHL "+h.name,"0"|0,"_DHL1",u,h),s.Studies.MA("exponential",C,"_DHL1 "+h.name,0,"_DHL2",u,h),y=m-1;y<w.length;y++){L="_",L+="HS",L+="2",L+=" ",e.X_C(87);var M=e.A0s(14,7,2);w[y]["%K "+h.name]=w[y][L+h.name]/(.5*w[y]["_DHL2 "+h.name])*M}s.Studies.MA(h.inputs["%D Moving Average Type"],F,"%K "+h.name,0,"%D",u,h),h.zoneOutput=d},s.Studies.studyLibrary=s.extend(s.Studies.studyLibrary,{"Stch Mtm":{name:"Stochastic Momentum Index",calculateFN:s.Studies.calculateStochMomentum,inputs:{"%K Periods":10,"%K Smoothing Periods":3,"%K Double Smoothing Periods":3,"%D Periods":10,"%D Moving Average Type":"ema"},outputs:{"%K":"auto","%D":"#FF0000"},parameters:{init:{studyOverZonesEnabled:!0,studyOverBoughtValue:40,studyOverBoughtColor:"auto",studyOverSoldValue:-40,studyOverSoldColor:l}}},stochastics:{name:c,range:"0 to 100",calculateFN:s.Studies.calculateStochastics,inputs:{Period:14,Field:o,Smooth:!0},outputs:{Fast:a,Slow:i},parameters:{init:{studyOverZonesEnabled:!0,studyOverBoughtValue:80,studyOverBoughtColor:"auto",studyOverSoldValue:20,studyOverSoldColor:r}}},Stochastics:{name:n,range:"0 to 100",calculateFN:s.Studies.calculateStochastics,inputs:{Field:"field","%K Periods":14,Fast:!1,"%K Smoothing Periods":3,"%D Periods":3},outputs:{"%K":"auto","%D":"#FF0000"},parameters:{init:{studyOverZonesEnabled:!0,studyOverBoughtValue:80,studyOverBoughtColor:"auto",studyOverSoldValue:20,studyOverSoldColor:"auto"}},attributes:{"%K Smoothing Periods":{hidden:function(){return this.inputs.Fast}}},centerline:50}})):console.error("stochastics feature requires first activating studies feature.")};Vc=E=>{var e=we,t,s,n,r;t="unde",t+="fi",t+="n",e.M_N(),t+="ed",s=typeof _CIQ!==t?_CIQ:E.CIQ,s.Studies?(n="#",n+="8cc",n+="176",r="S",r+="upertrend",s.Studies.calculateSupertrend=function(i,a){var o,c,l,u,h,d,f,A,p,g;if(o=a.chart.scrubbed,o.length<a.days+"1"*1){a.error=!0;return}s.Studies.calculateStudyATR(i,a);for(var m=a.startFrom;m<o.length;m++)if(c="_Do",c+="wntr",c+="e",c+="nd ",l=o[m],!!l){e.a97(8);var b=e.A0s(0,12,14);u=(l.High+l.Low)/b,h=a.inputs.Multiplier*l["ATR "+a.name],e.a97(1),d=e.p9k(u,h),e.a97(2),f=e.A0s(h,u),m&&(A="_Uptre",A+="n",A+="d ",o[m-1]&&o[m-1].Close&&o[m-1].Close>o[m-1][A+a.name]&&o[m-1]["_Uptrend "+a.name]>d&&(e.a97(176),d=o[e.A0s("1",m,32)]["_Uptrend "+a.name]),o[m-1]&&o[m-1].Close&&o[m-1].Close<o[m-1]["_Downtrend "+a.name]&&o[m-1]["_Downtrend "+a.name]<f&&(e.X_C(101),f=o[e.A0s("1",m)]["_Downtrend "+a.name])),e.X_C(46),l["_Direction "+a.name]=e.A0s("1",64),m&&(p="_D",p+="irection ",g="_",g+="Direction ",e.a97(1),l[g+a.name]=o[e.A0s(m,1)]["_Direction "+a.name],l.Close>o[m-1]["_Downtrend "+a.name]?l["_Direction "+a.name]=1:l.Close<o[m-1]["_Uptrend "+a.name]&&(e.a97(16),l[p+a.name]=-e.p9k(0,"1"))),l["_Uptrend "+a.name]=d,l[c+a.name]=f,l["Trend "+a.name]=l["_Direction "+a.name]>0?d:f}a.outputMap={},e.M_N(),a.outputMap["Trend "+a.name]=""},s.Studies.displaySupertrend=function(i,a,o){var c,l,u,h,d,f,A,p,g,m,b,C,F,w,U,B;c=i.panels[a.panel],l=a.getContext(i),u=a.getYAxis(i),h={skipTransform:c.name!=a.chart.name,skipProjections:!0,label:i.preferences.labels,yAxis:u,highlight:a.highlight},d="Trend "+a.name,f=i.getTransformFunction(u);for(var k="0">>64;f&&k<o.length;k++)A=o[k],p=i.getTransformedQuote(A,u),A&&p&&(p[d]=f(i,c.chart,A[d]));i.plotDataSegmentAsLine(d,c,h,y),l.lineWidth=1,l.globalAlpha=1,i.startClip(a.panel);function y(H,P,N){return P&&P["_Direction "+a.name]<0?a.outputs.Downtrend:a.outputs.Uptrend}!a.highlight&&i.highlightedDraggable&&(l.globalAlpha*=.3),e.a97(4);var S=e.A0s(19,10,28);e.X_C(25),e.p9k(2,6,3622),e.a97(2);var T=e.A0s(1,1);for(g=l.measureText("852.64"*S>=383.74?"▲":!0).width/T,m=0;m<o.length;m++)if(o[m]&&(F=o[m]["_Direction "+a.name],!!F)){if(C>F){w="au",w+="to",b=s.Studies.determineColor(a.outputs.Downtrend),(!b||b==w||s.isTransparent(b))&&(b=i.defaultColor),l.fillStyle=b,l.textBaseline="bottom",U=i.pixelFromPrice(o[m].High,c,u);for(var _=5;_<=45;_+=10)u.flipped?l.fillText("▲",i.pixelFromBar(m)-g,U+_):l.fillText("▼",i.pixelFromBar(m)-g,U-_)}else if(C<F){b=s.Studies.determineColor(a.outputs.Uptrend),(!b||b=="auto"||s.isTransparent(b))&&(b=i.defaultColor),l.fillStyle=b,l.textBaseline="top",B=i.pixelFromPrice(o[m].Low,c,u);for(var L=5;L<=45;L+=10)u.flipped?l.fillText("▼",i.pixelFromBar(m)-g,B-L):l.fillText("▲",i.pixelFromBar(m)-g,B+L)}C=F}i.endClip()},s.Studies.studyLibrary=s.extend(s.Studies.studyLibrary,{Supertrend:{name:r,overlay:!0,seriesFN:s.Studies.displaySupertrend,calculateFN:s.Studies.calculateSupertrend,inputs:{Period:7,Multiplier:3},outputs:{Uptrend:n,Downtrend:"#b82c0c"},attributes:{Multiplier:{min:"0.1"-0,step:.1}}}})):console.error("supertrend feature requires first activating studies feature.")};Kc=E=>{var e=we,t;t=typeof _CIQ<"u"?_CIQ:E.CIQ,e.K_Q(),t.Studies?(t.Studies.calculateSwingIndex=function(s,n){e.K_Q();var r,i,a,o,c,l,u,h,d,f,A,p,g;if(r="Limit",r+=" Move Value",i=n.inputs[r],(i<=0||isNaN(i))&&(i=99999),a=n.chart.scrubbed,e.a97(16),o=e.p9k(0,"0"),n.startFrom>1){e.X_C(8);var m=e.A0s(0,19,20);o=a[n.startFrom-m]["Result "+n.name]}for(var b=Math.max(1,n.startFrom);b<a.length;b++){c="S",c+="wi",c+="n",c+="g",l=Math.abs(a[b].High-a[b-1].Close),u=Math.abs(a[b].Low-a[b-1].Close),h=Math.abs(a[b].High-a[b].Low),d=Math.abs(a[b-1].Close-a[b-1].Open),f=Math.max(l,u),A=Math.max(h,f),e.X_C(22),p=e.p9k(d,.25,A),A==l?(e.a97(0),p-=e.A0s(.5,u)):A==u&&(e.a97(177),p-=e.p9k(l,"0.5")),e.a97(91);var C=e.A0s(32,7,11,225);e.X_C(4);var F=e.A0s(0,17,16);e.a97(178);var w=e.p9k(2,10,0,5,18);e.X_C(179);var U=e.p9k(10,18,13,2341);g=C*(a[b].Close-a[b-F].Close+.5*(a[b].Close-a[b].Open)+.25*(a[b-w].Close-a[b-U].Open))/p*(f/i),(p===0||i===0)&&(g=0),n.type==c&&(o=0),o+=g,a[b]["Result "+n.name]=o}},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{"Acc Swing":{name:"Accumulative Swing Index",calculateFN:t.Studies.calculateSwingIndex,inputs:{"Limit Move Value":.5},attributes:{"Limit Move Value":{min:.01,step:.01}}},Swing:{name:"Swing Index",calculateFN:t.Studies.calculateSwingIndex,inputs:{"Limit Move Value":.5},attributes:{"Limit Move Value":{min:.01,step:.01}}}})):console.error("swingIndex feature requires first activating studies feature.")};Wc=E=>{var e,t,s;e=typeof _CIQ<"u"?_CIQ:E.CIQ,e.Studies?(s="a",s+="u",s+="t",s+="o",e.Studies.calculateTrendIntensity=function(n,r){var i=we,a,o,c,l,u,h,d,f,A,p,g,m;if(a="Signa",a+="l Period",o="C",o+="lo",o+="s",o+="e",c="f",c+="i",c+="el",c+="d",l=r.chart.scrubbed,l.length<r.days+1){r.error=!0;return}function b(C,F){return Math.abs(F)<1e-8?100:(i.a97(180),i.K_Q(),i.p9k(100,1,C,F,100))}for(u=r.inputs.Field,(!u||u==c)&&(u=o),e.Studies.MA("ma",r.days,u,0,"_SMA",n,r),h=0,d=0,p=[],g=Math.ceil(r.days/2),f=Math.max(0,r.startFrom-g);f<l.length;f++)m="_",m+="S",m+="M",m+="A ",!(!l[f]["_SMA "+r.name]&&l[f][m+r.name]!==0)&&(A=e.Studies.getQuoteFieldValue(l[f],u)-l[f]["_SMA "+r.name],A<0?(i.a97(181),d+=i.A0s("1",A)):h+=A,p.push(A),p.length>g&&(A=p.shift(),A<0?(i.X_C(182),d-=i.A0s(1,A)):h-=A),!(f<r.startFrom)&&(l[f]["TII "+r.name]=b(h,d)));e.Studies.MA("ema",r.inputs[a],"TII "+r.name,0,"Signal",n,r)},e.Studies.studyLibrary=e.extend(e.Studies.studyLibrary,{"Trend Int":{name:"Trend Intensity Index",calculateFN:e.Studies.calculateTrendIntensity,range:"0 to 100",inputs:{Period:14,Field:"field","Signal Period":9},outputs:{TII:"auto",Signal:"#FF0000"},parameters:{init:{studyOverZonesEnabled:!0,studyOverBoughtValue:"80"|64,studyOverBoughtColor:"auto",studyOverSoldValue:20,studyOverSoldColor:s}}}})):(t="trendIntensity ",t+="feature requires first a",t+="ctivating studies featu",t+="re.",console.error(t))};Yc=E=>{var e=we;e.M_N();var t,s,n;t=typeof _CIQ<"u"?_CIQ:E.CIQ,t.Studies?(n="TRI",n+="X",t.Studies.calculateTRIX=function(r,i){var a,o,c,l,u,h,d;if(a="_M",a+="A",a+="1",a+=" ",o=i.chart.scrubbed,o.length<i.days+1){i.error=!0;return}c=i.name,e.X_C(2),l=["Close",e.A0s(c,a),e.p9k(c,"_MA2 "),e.p9k(c,"_MA3 ")];for(var f=0;f<l.length-1;f++)t.Studies.MA("exponential",i.days,l[f],0,"_MA"+(f+1).toString(),r,i);u=l[3];for(var A=Math.max(1,i.startFrom);A<o.length;A++)e.a97(1),h=o[e.p9k(A,1)][u],h&&(d=o[A][u],(d||d===0)&&(e.X_C(2),o[A][e.A0s(c,"Result ")]=e.A0s(d,1,"100",h,1,e.a97(183))))},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{TRIX:{name:n,calculateFN:t.Studies.calculateTRIX}})):(s="trix feature requires first activ",s+="ating studi",s+="es feature.",console.error(s))};Xc=E=>{var e=we,t,s;e.K_Q(),t=typeof _CIQ<"u"?_CIQ:E.CIQ,t.Studies?(t.Studies.calculateTwiggsMoneyFlow=function(n,r){var i,a,o,c,l,u,h,d,f,A,p,g,m,b,C;if(i=r.chart.scrubbed,i.length<r.days){r.error=!0,a=-1993996954,e.X_C(0),o=e.A0s("1314215954",1),c=2;for(var F=1;e.B8M(F.toString(),F.toString().length,36296)!==a;F++)return;return e.N2s(c.toString(),c.toString().length,39518)!==o,void 0}l=0,u=0,h=i[r.startFrom-("1"|0)],h&&(d="_sumV",d+=" ",f="_",f+="sum",f+="M",f+="F ",A="_sum",A+="MF ",h[A+r.name]&&(l=h[f+r.name]),h["_sumV "+r.name]&&(u=h[d+r.name]));for(var w=Math.max("1"<<0,r.startFrom);w<i.length;w++){p="_",p+="su",p+="mV",p+=" ",g="_MF",g+="V ",m="_MF",m+="V",m+=" ",b=Math.max(i[w-("1"<<64)].Close,i[w].High),C=Math.min(i[w-1].Close,i[w].Low),e.X_C(11);var U=e.p9k(5,32,158);e.a97(4);var B=e.A0s(12999987,7,11999995);if(i[w][m+r.name]=i[w].Volume*(U*i[w].Close-b-C)/(b-C===0?B:b-C),w>r.days-1){e.a97(184);var k=e.A0s(6,7,19,134,6);l*=(r.days-k)/r.days,e.X_C(1);var y=e.p9k(2,1);u*=(r.days-y)/r.days}l+=i[w][g+r.name],u+=i[w].Volume,w>r.days-1&&u&&(e.a97(7),i[w]["Result "+r.name]=e.p9k(l,u>0?u:999999)),i[w]["_sumMF "+r.name]=l,i[w][p+r.name]=u}},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{Twiggs:{name:"Twiggs Money Flow",calculateFN:t.Studies.calculateTwiggsMoneyFlow,inputs:{Period:21}}})):(s="twiggsMoneyFlow feature req",s+="uires first activat",s+="ing studies feature.",console.error(s))};jc=E=>{var e,t;e=typeof _CIQ<"u"?_CIQ:E.CIQ,e.Studies?e.Studies.calculateTypicalPrice?(t="Weighted Clo",t+="se",e.Studies.studyLibrary=e.extend(e.Studies.studyLibrary,{"Typical Price":{name:"Typical Price",calculateFN:e.Studies.calculateTypicalPrice,inputs:{Period:14}},"Weighted Close":{name:t,calculateFN:e.Studies.calculateTypicalPrice,inputs:{Period:"14"-0}}})):console.error("typicalPrice feature requires first activating medianPrice feature."):console.error("typicalPrice feature requires first activating studies feature.")};$c=E=>{var e;e=typeof _CIQ<"u"?_CIQ:E.CIQ,we.M_N(),e.Studies?(e.Studies.calculateUlcerIndex=function(t,s){var n,r,i,a,o,c;if(n=s.chart.scrubbed,n.length<2*s.days-1){s.error=!0;return}r=s.inputs.Field,(!r||r=="field")&&(r="Close");function l(u,h,d){var f;f=null;for(var A=h-u+1;A<=h;A++)A<0||(f=f===null?e.Studies.getQuoteFieldValue(n[A],d):Math.max(f,e.Studies.getQuoteFieldValue(n[A],d)));return we.K_Q(),f}for(i=Math.max(s.startFrom,s.days-1);i<n.length;i++)a="_",a+="P",a+="D2",a+=" ",n[i][a+s.name]=Math.pow(100*(e.Studies.getQuoteFieldValue(n[i],r)/l(s.days,i,r)-1),2);for(e.Studies.MA("simple",s.days,"_PD2 "+s.name,0,"_MA",t,s),i=Math.max(s.startFrom,2*(s.days-1));i<n.length;i++)o="Res",o+="u",o+="l",o+="t ",c=n[i]["_MA "+s.name],(c||c===0)&&(n[i][o+s.name]=Math.sqrt(c))},e.Studies.studyLibrary=e.extend(e.Studies.studyLibrary,{Ulcer:{name:"Ulcer Index",calculateFN:e.Studies.calculateUlcerIndex,inputs:{Period:"14">>64,Field:"field"}}})):console.error("ulcerIndex feature requires first activating studies feature.")};function un(E){return we.M_N(),ou(E)||zd(E)||su(E)||nu()}Gc=E=>{var e=we,t,s,n,r,i,a;if(t=typeof _CIQ<"u"?_CIQ:E.CIQ,!t.Studies)console.error("ultimateOscillator feature requires first activating studies feature.");else{t.Studies.calculateUltimateOscillator=function(c,l){var u,h,d,f,A,p,g,m,b,C,F,w,U,B,k,y,S,T,_,L;if(u=l.chart.scrubbed,h=[l.inputs["Cycle 1"],l.inputs["Cycle 2"],l.inputs["Cycle 3"]],d=Math.max(h[0],h[1],h[2]),e.M_N(),u.length<d+1){l.error=!0;return}f=h[0]*h[1],e.X_C(179);var H=e.A0s(20,18,14,5042);A=h[0]*h[H],e.a97(2);var P=e.A0s(1,0);e.X_C(185);var N=e.A0s(5,10,7,4);p=h[P]*h[N],g=[0,0,0],m=[0,0,0],l.startFrom&&(b="_acc",b+="tr ",C="_a",C+="c",C+="ctr",C+=" ",u[l.startFrom-1]["_accbp "+l.name]&&(g=u[l.startFrom-1]["_accbp "+l.name].slice()),u[l.startFrom-1][C+l.name]&&(m=u[l.startFrom-1][b+l.name].slice()));for(var v=Math.max("1">>64,l.startFrom);v<u.length;v++){F="Res",F+="u",F+="l",F+="t ",w="_a",w+="ccb",w+="p",w+=" ",U=Math.min(u[v].Low,u[v-1].Close),B=u[v].Close-U,k=Math.max(u[v].High,u[v-1].Close)-U;for(var x=0;x<h.length;x++)g[x]+=B,m[x]+=k,v>h[x]&&(y=Math.min(u[v-h[x]].Low,u[v-h[x]-1].Close),S=u[v-h[x]].Close-y,T=Math.max(u[v-h[x]].High,u[v-h[x]-("1"^0)].Close)-y,g[x]-=S,m[x]-=T);if(u[v][w+l.name]=g.slice(),u[v]["_acctr "+l.name]=m.slice(),!(v<d)){e.X_C(48);var M=e.p9k(9,1,10);e.a97(13);var D=e.p9k(297,18,16,8,2);e.X_C(77);var Q=e.p9k(16,20,13,5,6);e.a97(14);var q=e.A0s(15,6,94,2);_=p*g[0]/m[0]+A*g[M]/m[D]+f*g[Q]/m[q],e.X_C(25),L=e.A0s(A,f,p),e.a97(99),u[v][F+l.name]=e.A0s(L,_,100)}}},s=-2115056544,n=-593572665,r=2;for(var o="1"*1;e.B8M(o.toString(),o.toString().length,6965)!==s;o++)i="a",i+="u",i+="t",i+="o",t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{Ultimate:{name:"Cycle 3",calculateFN:t.Studies.calculateUltimateOscillator,inputs:{"Cycle 1":1,"Cycle 2":89,"Cycle 3":79},parameters:{init:{studyOverZonesEnabled:!1,studyOverBoughtValue:95,studyOverBoughtColor:"Cycle 3",studyOverSoldValue:13,studyOverSoldColor:i}}}}),e.X_C(16),r+=e.A0s(0,"2");e.B8M(r.toString(),r.toString().length,"89327"^0)!==n&&(a="a",a+="u",a+="t",a+="o",t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{Ultimate:{name:"Ultimate Oscillator",calculateFN:t.Studies.calculateUltimateOscillator,inputs:{"Cycle 1":"7"*1,"Cycle 2":14,"Cycle 3":28},parameters:{init:{studyOverZonesEnabled:!0,studyOverBoughtValue:70,studyOverBoughtColor:"auto",studyOverSoldValue:30,studyOverSoldColor:a}}}}))}};Jc=E=>{var e,t;e="undefi",e+="ne",e+="d",t=typeof _CIQ!==e?_CIQ:E.CIQ,t.Studies?(t.Studies.calculateValuationLines=function(s,n,r){var i=we,a,o,c,l,u,h,d,f,A,p,g,m,b,C,F;a="f",a+="i",a+="eld",o=n.inputs.Field==a?"Close":n.inputs.Field,c=n.inputs["Average Type"],l=n.inputs["Display Average"],u=n.inputs["Display 1 Standard Deviation (1σ)"],h=n.inputs["Display 2 Standard Deviation (2σ)"],d=n.inputs["Display 3 Standard Deviation (3σ)"],f=[];for(var w=0;w<r.length;++w)A=t.Studies.getQuoteFieldValue(r[w],o),A!==null&&f.push(A);p=function(U,B){var k,y,S,T,_,L,H,P,N;k=1966290666,y=938369754,i.X_C(17),S=i.p9k(64,"2");for(var v=1;i.B8M(v.toString(),v.toString().length,"10352">>64)!==k;v++)T=U.length,S+=2;switch(i.N2s(S.toString(),S.toString().length,"30937">>64)!==y&&(T=U.length),_=0,L=0,H=0,B){case"mean":for(L=T;H<T;++H)_+=U[H];break;case"harmonic":for(_=T;H<T;++H){i.a97(50);var x=i.p9k(19,2,19);L+=x/U[H]}break;case"median":if(i.X_C(7),P=Math.floor(i.p9k(T,2)),N=U.slice().sort(function(D,Q){return D>Q?1:D<Q?-1:(i.M_N(),0)}),T%2===0){i.a97(186);var M=i.p9k(22,5,18,9,3);_=N[P]+N[P-M],i.a97(1),L=i.p9k("2",0)}else _=N[P],L=1;break}return i.X_C(7),i.p9k(_,L)}(f,c),g=!(u||h||d)||function(U,B){var k,y;k=U.length,y=0;for(var S=0;S<k;++S)y+=Math.pow(U[S]-B,2);return i.X_C(7),Math.sqrt(i.A0s(y,k))}(f,p),n.data={Average:l?[p]:null,"1 Standard Deviation (1σ)":u?[p+g,p-g]:null,"2 Standard Deviation (2σ)":h?[p+g*("2"^0),p-g*2]:null,"3 Standard Deviation (3σ)":d?[p+g*3,p-g*3]:null},m=g,n.parameters||(n.parameters={}),d?(i.a97(187),n.parameters.range=[i.p9k(g,m,3,p),i.p9k(g,m,3,p,i.X_C(188))]):h?(i.a97(187),n.parameters.range=[i.p9k(g,m,2,p),i.p9k(g,m,2,p,i.a97(188))]):u?(i.a97(108),n.parameters.range=[i.A0s(p,g,m),i.p9k(g,m,p,i.a97(25))]):l&&(i.a97(1),n.parameters.range=[i.A0s(p,m),i.p9k(m,p,i.a97(2))]),n.panel&&(b=s.panels[n.panel],C=s.getYAxisByName(b,n.name),C&&(C.decimalPlaces=b.chart.yAxis.printDecimalPlaces,F={yAxis:C},s.calculateYAxisRange(b,C,n.parameters.range[0],n.parameters.range[1]),s.createYAxis(b,F),s.drawYAxis(b,F)))},t.Studies.displayValuationLines=function(s,n){var r=we,i,a,o,c,l,u,h,d,f,A,p,g,m,b,C,F,w,U,B,k,y,S,T,_,L,H,P,N,v;i="stx_yax",i+="i",i+="s",a="c",a+="iq-valuation-average-line",o="Ave",o+="rage Ty",o+="pe",c=s.panels[n.panel],r.K_Q(),l=n.getYAxis(s),u=n.getContext(s),h=n.data,d=n.parameters.labels,f=n.inputs[o],A={mean:"AVG",median:"MED",harmonic:"HAVG"},p=s.canvasStyle(a),g=s.canvasStyle("ciq-valuation-deviation-line"),m=3,r.a97(1);var x=r.p9k(12,10);b=s.getCanvasFontSize(i)+m*x;for(var M in h)if(h[M]){for(r.X_C(189),C=r.A0s(M,"Average"),F=t.Studies.determineColor(n.outputs[M]),w=h[M],U=0;U<w.length;++U)if(_="σ",_+=":",_+=" ",L=":",L+=" ",H="y",H+="a",H+="xis",P="das",P+="hed",N="n",N+="one",B=w[U],k=s.pixelFromPrice(B,c,l),!(k<=c.top||k>=c.yAxis.bottom)){if(T=C?{pattern:p.borderStyle!="none"&&p.borderStyle||"solid",lineWidth:parseFloat(p.borderWidth)||1,opacity:parseFloat(p.opacity)||1,yAxis:l}:{pattern:g.borderStyle!=N?g.borderStyle||"dashed":P,lineWidth:parseFloat(g.borderWidth)||1,opacity:parseFloat(g.opacity)||1,yAxis:l},s.plotLine(c.left,c.right,k,k,F,"line",u,c,T),d===H){s.createYAxisLabel(c,s.formatYAxisPrice(B,c),k,F,null,u,l);continue}k+=Math.floor(T.lineWidth/2),!(k+b>=c.yAxis.bottom)&&(y=(C?A[f]+L:M[0]+_)+s.formatYAxisPrice(B,c),S=u.measureText(y).width,v=c.right-S-m,l&&l.position=="left"&&(v=c.left+m),r.a97(190),u.strokeText(y,v,r.A0s(k,.5,b,2)))}}},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{"val lines":{name:"Valuation Lines",calculateFN:function(){},seriesFN:function(s,n,r){t.Studies.calculateValuationLines(s,n,r),t.Studies.displayValuationLines(s,n)},overlay:!0,yAxisFN:function(){},inputs:{Field:"field","Average Type":["mean","median","harmonic"],"Display Average":!0,"Display 1 Standard Deviation (1σ)":!1,"Display 2 Standard Deviation (2σ)":!1,"Display 3 Standard Deviation (3σ)":!1},outputs:{Average:"#00afed","1 Standard Deviation (1σ)":"#e1e1e1","2 Standard Deviation (2σ)":"#85c99e","3 Standard Deviation (3σ)":"#fff69e"}}})):console.error("valuationLines feature requires first activating studies feature.")};Zc=E=>{var e,t,s;e=typeof _CIQ<"u"?_CIQ:E.CIQ,e.Studies?(t="au",t+="to",s="f",s+="ie",s+="ld",e.Studies.calculateRelativeVolatility=function(n,r){var i=we,a,o,c,l,u,h,d,f,A,p,g,m,b,C,F;a="m";function w(S,T){return S+T===0?(i.X_C(1),i.p9k("100",0)):(i.a97(147),i.p9k(T,100,S,S))}if(a+="a",o="s",o+="d",o+="e",o+="v",c="C",c+="los",i.M_N(),c+="e",l="fiel",l+="d",r.days=Number(r.inputs["Smoothing Period"]),u=Number(r.inputs["STD Period"]),h=r.chart.scrubbed,h.length<r.days+u){r.error=!0;return}d=r.inputs.Field,(!d||d==l)&&(d=c),r.std=new e.Studies.StudyDescriptor(r.name,o,r.panel),r.std.chart=r.chart,r.std.days=u,r.std.startFrom=r.startFrom,r.std.inputs={Field:d,"Standard Deviations":1,Type:a},r.std.outputs={_STD:null},e.Studies.calculateStandardDeviation(n,r.std),f=0,A=0,r.startFrom>1&&(p="_a",p+="v",p+="gL ",f=h[r.startFrom-1]["_avgG "+r.name]||0,A=h[r.startFrom-1][p+r.name]||0);for(var U=Math.max(r.startFrom,r.days);U<h.length;U++)if(g="Re",g+="l Vo",g+="l ",m=h[U],i.X_C(1),b=h[i.A0s(U,1)],C=e.Studies.getQuoteFieldValue(m,d),F=e.Studies.getQuoteFieldValue(b,d),!(C===null||F===null)&&!(!m["_STD "+r.name]&&m["_STD "+r.name]!==0)){if(C>F){i.X_C(18);var B=i.A0s(5,6);f=(f*(r.days-B)+m["_STD "+r.name])/r.days,i.a97(191);var k=i.A0s(13,7,21,21,20);A=A*(r.days-k)/r.days}else{A=(A*(r.days-1)+m["_STD "+r.name])/r.days,i.X_C(133);var y=i.A0s(13,1,17,5);f=f*(r.days-y)/r.days}m[g+r.name]=w(f,A),m["_avgG "+r.name]=f,m["_avgL "+r.name]=A}r.zoneOutput="Rel Vol"},e.Studies.calculateHistoricalVolatility=function(n,r){var i=we;i.K_Q();var a,o,c,l,u,h,d,f,A,p,g;if(a="Days P",a+="er Year",o=r.chart.scrubbed,o.length<r.days+1){r.error=!0;return}c=r.inputs.Field,(!c||c=="field")&&(c="Close"),l=r.inputs["Standard Deviations"];function m(U){return isNaN(U)&&(U=365),n.layout.interval=="day"?U:n.layout.interval=="week"?52:n.layout.interval=="month"?12:U}l<0&&(l=1),i.a97(192);var b=i.p9k(84,19,93,114,2);if(u=b*Math.sqrt(m(r.inputs[a]))*l,h=[],d=0,r.startFrom>1){f="_s",f+="tat",f+="e",f+=" ",i.a97(148);var C=i.p9k(2,7,1,0,3);d=o[r.startFrom-C]["_state "+r.name][0],h=o[r.startFrom-1][f+r.name][1].slice()}for(var F=Math.max(1,r.startFrom);F<o.length;F++){if(A=e.Studies.getQuoteFieldValue(o[F-1],c),A&&(p=Math.log(e.Studies.getQuoteFieldValue(o[F],c)/A),h.push(p),d+=p,F>=r.days)){g=0,d/=r.days;for(var w=0;w<h.length;w++)g+=Math.pow(h[w]-d,2);d*=r.days,d-=h.shift(),o[F]["Result "+r.name]=Math.sqrt(g/r.days)*u}o[F]["_state "+r.name]=[d,h.slice()]}},e.Studies.studyLibrary=e.extend(e.Studies.studyLibrary,{"Hist Vol":{name:"Historical Volatility",calculateFN:e.Studies.calculateHistoricalVolatility,inputs:{Period:10,Field:s,"Days Per Year":["252"*1,365],"Standard Deviations":1},attributes:{"Standard Deviations":{min:.1,step:.1}}},"Rel Vol":{name:"Relative Volatility",range:"0 to 100",calculateFN:e.Studies.calculateRelativeVolatility,inputs:{Field:"field","STD Period":10,"Smoothing Period":14},outputs:{"Rel Vol":t},centerline:50,parameters:{init:{studyOverZonesEnabled:!0,studyOverBoughtValue:70,studyOverBoughtColor:"auto",studyOverSoldValue:30,studyOverSoldColor:"auto"}}}})):console.error("volatilityIndex feature requires first activating studies feature.")};eu=E=>{var e=we,t,s,n,r,i;t=-989421518,s=-37740300,n=2;for(var a=1;e.B8M(a.toString(),a.toString().length,27979)!==t;a++)r=typeof _CIQ<"u"?_CIQ:E.CIQ,n+=2;e.B8M(n.toString(),n.toString().length,73308)!==s&&(r=-_CIQ==""?_CIQ:E.CIQ),r.Studies?(i="#b6",i+="4a9",i+="6",r.Studies.displayVolumeProfile=function(o,c,l){var u,h,d,f,A,p,g,m,b,C,F,w,U,B,k,y,S,T,_,L,H,P,N,v,x,M,D,Q,q,O,R,V,K,Y,G,J,Z,ee,X,ne,se,oe,ae,Ae;if(u="B",u+="ars C",u+="o",u+="lor",h="c",h+="olor",d="Pr",d+="ice Buck",d+="et",d+="s",f="Display Bor",f+="d",f+="er",!o||!o.chart.dataSet||(A="stx_volume_profile",p="stx-float-date",g=c.getContext(o),m=o.chart,b=m.panel,C=b.yAxis,F=C.flipped,w=m.highValue,U=m.lowValue,B=c.parameters,k=B.displayBorder,y=k===void 0?c.inputs[f]:k,S=B.displayVolume,T=S===void 0?c.inputs["Display Volume"]:S,_=B.widthPercentage,L=_===void 0?c.inputs["Width Percentage"]:_,H=B.numberBars,P=H===void 0?c.inputs[d]:H,y!==!1&&(y=!0),T!==!0&&(T=!1),(!L||L<0)&&(L=.25),(!P||P<0)&&(P=30),P=Math.ceil(P),e.a97(30),N=e.p9k(w,U,P),N===0))return;v=[],F&&(x=[U,w],w=x[0],U=x[1]),M=F?-1:"1">>64;for(var he=U,ge=0;ge<=P;he+=N*M,ge++)v.push([he,0]);function ie(fe){var me,ve,pe,be,Se,Ee,Ie,Qe,Ne,De,Re,_e,Ue,He,Pe,We,Ge,je,Je,Oe,nt,Ze;o.canvasColor(A),g.beginPath(),me=Ye=>(e.K_Q(),Math.round(Ye)),ve=Ye=>me(o.pixelFromTransformedValue(Ye)),pe=me(m.width*L),be=me(m.right)-2.5,Se=be,Ee=Nr(v[0],1),Ie=Ee[0];for(var Le=1;Le<v.length;Le++){if(Qe=Nr(v[Le],"2"^0),Ne=Qe[0],De=Qe[1],De){e.a97(99),Re=e.p9k(D,pe,De),_e=me(be-Re)+(fe?-.5:0),e.a97(2);var et=e.A0s(16,16);if(Ue=ve(Ne)+(fe?.5:"1">>et),He=ve(Ie)+(fe?.5:0),Pe=Math.max(Ue,C.top),We=Math.min(He,C.bottom),Ge=Pe<=C.bottom&&We>=C.top,Ge){if(g.moveTo(be,We),g.lineTo(be,Pe),g.lineTo(_e,Pe),g.lineTo(_e,We),fe)(Le==1||Se>_e)&&g.lineTo(Se,We);else if(g.lineTo(be,We),T&&(je=r.condenseInt(De),e.a97(1),Je=e.A0s(We,Pe),oe<=Je-2)){Oe=void 0;try{nt=g.measureText(je),Oe=nt.width}catch{Oe=0}g.textBaseline="top",Ze=g.fillStyle,g.fillStyle=ae,e.a97(193),g.fillText(je,e.p9k("3",_e,0,Oe),e.A0s(oe,2,Je,2,Pe,e.a97(194))),g.fillStyle=Ze}}Se=_e}else Se=be;Ie=Ne}!c.highlight&&o.highlightedDraggable&&(g.globalAlpha*=.3),fe||g.fill(),g.strokeStyle=ae,fe&&g.stroke(),g.closePath()}D=0;for(var re=0;re<l.length;re++)if(Q=l[re],Q!==null&&(q=Q.Volume,!!q)){O=o.getTransformedQuote(Q,C),R=O||Q,V=R.High,K=R.Low,Y=[],G=v[0][0],J=null;for(var de=1;de<v.length;de++)e.X_C(16),J=v[de][e.p9k(0,"0")],Z=K>=G&&K<=J,ee=V>=G&&V<=J,X=K<G&&V>J,(Z||ee||X)&&Y.push(de),G=J;if(Y.length){ne=q/Y.length;for(var ce=0;ce<Y.length;ce++)e.X_C(0),se=v[Y[ce]][e.p9k("1",1)]+=ne,se>D&&(D=se)}}if(D===0){o.displayErrorAsWatermark("chart",o.translateIf("Not enough data to render the Volume Profile"));return}o.setStyle(A,h,r.Studies.determineColor(c.outputs[u])),oe=o.getCanvasFontSize(p),ae=o.canvasStyle(A).borderTopColor,Ae=y&&!r.isTransparent(ae),o.canvasFont(p,g),ie(),Ae&&ie(!0),g.globalAlpha=1},r.Studies.studyLibrary=r.extend(r.Studies.studyLibrary,{"vol profile":{name:"Volume Profile",underlay:!0,seriesFN:r.Studies.displayVolumeProfile,calculateFN:null,inputs:{"Display Border":!0,"Display Volume":!1,"Price Buckets":30,"Width Percentage":"0.25"*1},outputs:{"Bars Color":i},customRemoval:!0,attributes:{yaxisDisplayValue:{hidden:!0},panelName:{hidden:!0},flippedEnabled:{hidden:!0}}}})):console.error("volumeProfile feature requires first activating studies feature.")};tu=E=>{var e=we;e.M_N();var t,s,n,r,i,a;t=typeof _CIQ<"u"?_CIQ:E.CIQ,t.Studies?(s="#",s+="b",s+="82c",s+="0c",n="#",n+="8c",n+="c",n+="176",r="0 t",r+="o",r+=" max",i="m",i+="a",a="Negati",a+="ve Volume ",a+="Index",t.Studies.calculateOnBalanceVolume=function(o,c){var l,u,h,d,f,A,p,g,m,b,C,F,w,U;l=c.inputs.Field,(!l||l=="field")&&(l="Close"),u=c.inputs["Min Tick Value"],h=!1,!u&&u!==0&&(h=!0,u=0),d=c.chart.scrubbed,f=0;for(var B=c.startFrom;B<d.length;B++)g="R",g+="e",g+="sult",g+=" ",m="ob",m+="ject",b="Re",b+="sult",b+=" ",A=d[B],C=t.Studies.getQuoteFieldValue(A,l),!(!B||!C)&&(d[B-1][l]&&(e.X_C(1),p=d[e.p9k(B,1)]),p&&(F=t.Studies.getQuoteFieldValue(p,l),C-F>u?f=1:F-C>u?f=-1:h&&(f=0),w=p[b+c.name],w||(w=0),U=A.Volume,typeof A[l]===m&&(U=A[l].Volume),e.a97(0),w+=e.p9k(U,f),A[g+c.name]=w))},t.Studies.calculatePriceVolumeTrend=function(o,c){var l,u,h,d,f,A,p;if(e.K_Q(),l="fi",l+="eld",u=c.inputs.Field,(!u||u==l)&&(u="Close"),h=c.chart.scrubbed,d=0,c.startFrom>1){e.a97(51);var g=e.A0s(9,15,7);d=h[c.startFrom-g]["Result "+c.name]}for(var m=Math.max(1,c.startFrom);m<h.length;m++)f="R",f+="esult ",A=t.Studies.getQuoteFieldValue(h[m],u),p=t.Studies.getQuoteFieldValue(h[m-1],u),!(A===null||p===null)&&(d+=h[m].Volume*(A-p)/p,h[m][f+c.name]=d)},t.Studies.calculateVolumeIndex=function(o,c){var l,u,h,d,f,A,p,g,m,b,C;if(l="Inde",l+="x",l+=" ",u="Ind",u+="e",u+="x ",h=c.inputs.Field,(!h||h=="field")&&(h="Close"),d=c.chart.scrubbed,d.length<c.days+1){c.error=!0;return}f=100,c.startFrom>1&&(f=d[c.startFrom-1][u+c.name]);for(var F=Math.max(1,c.startFrom);F<d.length;F++)A="Ne",A+="g",A+=" Vol",p="Po",p+="s Vol",g=d[F][h],m=d[F].Volume,g&&typeof g=="object"&&(m=g.Volume,g=g[c.subField]),e.X_C(1),b=d[e.A0s(F,1)][h],C=d[F-1].Volume,b&&typeof b=="object"&&(C=b.Volume,b=b[c.subField]),g&&b&&((c.type==p&&m>C||c.type==A&&m<C)&&(e.X_C(7),f*=e.A0s(g,b)),d[F]["Index "+c.name]=f);t.Studies.MA(c.inputs["Moving Average Type"],c.days,l+c.name,0,"MA",o,c)},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{"Neg Vol":{name:a,calculateFN:t.Studies.calculateVolumeIndex,inputs:{Period:"255"^0,Field:"field","Moving Average Type":i},outputs:{Index:"auto",MA:"#FF0000"}},"On Bal Vol":{name:"On Balance Volume",calculateFN:t.Studies.calculateOnBalanceVolume,inputs:{}},"Pos Vol":{name:"Positive Volume Index",calculateFN:t.Studies.calculateVolumeIndex,inputs:{Period:255,Field:"field","Moving Average Type":"ma"},outputs:{Index:"auto",MA:"#FF0000"}},"Price Vol":{name:"Price Volume Trend",calculateFN:t.Studies.calculatePriceVolumeTrend,inputs:{Field:"field"}},"Trade Vol":{name:"Trade Volume Index",calculateFN:t.Studies.calculateOnBalanceVolume,inputs:{"Min Tick Value":.5}},"Vol ROC":{name:"Volume Rate of Change",calculateFN:function(o,c){e.M_N();var l;t.Studies.calculateRateOfChange?t.Studies.calculateRateOfChange(o,c):(l="Volume",l+=" Rate of Change study requires firs",l+="t activating momentum feature.",console.error(l),t.Studies.calculateRateOfChange=function(u,h){})},parameters:{init:{isVolume:!0}}},"vol undr":{name:"Volume Underlay",underlay:!0,range:r,yAxis:{ground:!0,initialMarginTop:0,position:"none",heightFactor:.25},seriesFN:t.Studies.createVolumeChart,calculateFN:t.Studies.calculateVolume,inputs:{Series:"series"},attributes:{Series:{hidden:function(o){return e.K_Q(),!Object.keys(o.chart.series).length}}},outputs:{"Up Volume":n,"Down Volume":s},removeFN:function(o,c){o.layout.volumeUnderlay=!1,o.changeOccurred("layout")}}})):console.error("volumeStudies feature requires first activating studies feature.")};we.K_Q();iu=E=>{var e=we;e.M_N();var t,s,n,r,i,a,o,c,l;if(t=typeof _CIQ<"u"?_CIQ:E.CIQ,t.Studies)a="0.",a+="01",o="0",o+=".",o+="0",o+="1",c="a",c+="uto",l="Vortex",l+=" Indicator",t.Studies.calculateVortex=function(h,d){var f,A,p,g,m,b,C,F,w;if(f=d.chart.scrubbed,A=d.days,f.length<A+1){d.error=!0;return}p={tr:0,vmPlus:0,vmMinus:0},d.startFrom>1&&(p=t.clone(f[d.startFrom-1]["_totals "+d.name]));for(var U=Math.max(d.startFrom,1);U<f.length;U++)g=f[U],e.X_C(1),m=f[e.p9k(U,1)],b=Math.abs(g.High-m.Low),C=Math.abs(g.Low-m.High),F=Math.max(g.High,m.Close)-Math.min(g.Low,m.Close),p.tr+=F,p.vmPlus+=b,p.vmMinus+=C,U>A&&(e.a97(1),p.tr-=f[e.p9k(U,A)]["_True Range "+d.name],e.a97(1),p.vmPlus-=f[e.p9k(U,A)]["_VMPlus "+d.name],e.a97(1),p.vmMinus-=f[e.A0s(U,A)]["_VMMinus "+d.name]),g["_True Range "+d.name]=F,g["_VMPlus "+d.name]=b,g["_VMMinus "+d.name]=C,U>=A&&(w="+V",w+="I ",g[w+d.name]=p.vmPlus/p.tr,g["-VI "+d.name]=p.vmMinus/p.tr),g["_totals "+d.name]=t.clone(p)},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{Vortex:{name:l,calculateFN:t.Studies.calculateVortex,centerline:1,outputs:{"+VI":"#00FF00","-VI":"#FF0000"},parameters:{init:{studyOverZonesEnabled:!0,studyOverBoughtValue:1.1,studyOverBoughtColor:"auto",studyOverSoldValue:.9,studyOverSoldColor:c}},attributes:{studyOverBoughtValue:{min:1,step:o},studyOverSoldValue:{max:1,step:a}}}});else{s=2128254116,n=-1832501249,r=2;for(var u=1;e.N2s(u.toString(),u.toString().length,32831)!==s;u++)console.error(""),r+=2;e.B8M(r.toString(),r.toString().length,62668)!==n&&(i="vortex fe",i+="atu",i+="re requires first activating studies feature.",console.error(i))}};ru=E=>{var e,t;e=typeof _CIQ<"u"?_CIQ:E.CIQ,e.Studies?(t="#f",t+="fd0",t+="c",t+="f",e.Studies.calculateMFI=function(s,n){var r=we,i,a,o,c,l,u,h,d,f;if(i="_hig",i+="h ",a="S",a+="cal",a+="e Factor",o=n.chart.scrubbed,r.X_C(43),l=r.p9k("0",0),u=n.inputs[a],u||(u=n.study.inputs["Scale Factor"]),r.a97(46),h=Math.pow(r.p9k("10",32),Number(u)),n.startFrom>1){r.a97(195);var A=r.A0s(13,4,4,3,14);l=o[n.startFrom-A][i+n.name]}for(d=n.startFrom;d<o.length;d++)o[d]&&o[d].Volume&&(f="_",f+="h",f+="igh",f+=" ",o[d][n.name+"_hist"]=c=h*(o[d].High-o[d].Low)/o[d].Volume,o[d][f+n.name]=l=Math.max(l,c));n.outputMap={},n.outputMap[n.name+"_hist"]=""},e.Studies.displayMFI=function(s,n,r){var i=we,a,o,c,l,u,h,d,f,A,p,g,m,b,C,F,w,U;a="#",a+="CCCCCC",o=s.panels[n.panel],c=n.getContext(s),l=n.getYAxis(s),u=l.flipped?l.top:l.bottom,h=s.layout.candleWidth-("2"|0),h<2&&(h=1),d=e.Studies.determineColor(n.outputs.Green),f=e.Studies.determineColor(n.outputs.Fade),A=e.Studies.determineColor(n.outputs.Fake),p=e.Studies.determineColor(n.outputs.Squat),s.canvasColor("stx_histogram"),n.underlay||(c.globalAlpha=1),c.fillStyle=a,s.startClip(n.panel),!n.highlight&&s.highlightedDraggable&&(c.globalAlpha*=.3);for(var B=0;B<r.length;B++)if(g="_his",g+="t",m="_his",m+="t",b="_",b+="h",b+="is",b+="t",C=0,F=r[B],i.X_C(1),w=r[i.p9k(B,1)],w||(w=s.getPreviousBar(s.chart,n.name+"_hist",B)),!!F){if(s.cleanupGaps==="stretch")for(;r[B+"1"*1]&&(i.X_C(2),U=r[i.p9k(1,B)][n.name+"_hist"],!(U||U===0||r[B+1].futureTick));)C++,B++;(!w||w[n.name+"_hist"]===void 0)&&(w=s.getPreviousBar(s.chart,n.name+"_hist",B-C)),w&&(w[n.name+b]<F[n.name+m]?w.Volume<F.Volume?c.fillStyle=d:w.Volume>F.Volume&&(c.fillStyle=A):w[n.name+"_hist"]>F[n.name+g]&&(w.Volume<F.Volume?c.fillStyle=p:w.Volume>F.Volume&&(c.fillStyle=f))),F.candleWidth&&(h=Math.floor(Math.max(1,F.candleWidth-"2"*1))),c.fillRect(Math.floor(s.pixelFromBar(B-C,o.chart)-h/2),Math.floor(u),Math.floor(h+C*s.layout.candleWidth),Math.floor(s.pixelFromPrice(F[n.name+"_hist"],o,l)-u))}s.endClip()},e.Studies.studyLibrary=e.extend(e.Studies.studyLibrary,{"W MFI":{name:"Market Facilitation Index",seriesFN:e.Studies.displayMFI,calculateFN:e.Studies.calculateMFI,yAxis:{ground:!0},range:"0 to max",inputs:{"Scale Factor":6},outputs:{Green:"#8bc176",Fade:"#ab611f",Fake:"#5f7cb8",Squat:t}}})):console.error("williamsMFI feature requires first activating studies feature.")};au={CIQ:j,SplinePlotter:Kn,timezoneJS:xa,$$:Wn,$$$:Yn};function Nr(E,e){return we.K_Q(),ou(E)||Vd(E,e)||su(E,e)||nu()}function nu(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function zd(E){if(typeof Symbol<"u"&&E[Symbol.iterator]!=null||E["@@iterator"]!=null)return Array.from(E)}function su(E,e){var t,s,n;if(E)return t="A",t+="rgum",t+="e",t+="nts",s="S",s+="e",s+="t",typeof E=="string"?Ao(E,e):(n={}.toString.call(E).slice(8,-1),n==="Object"&&E.constructor&&(n=E.constructor.name),n==="Map"||s===n?Array.from(E):t===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ao(E,e):void 0)}function ou(E){if(Array.isArray(E))return E}function Vd(E,e){var t,s,n,r,i,a,o,c,l;if(t="unde",t+="fin",t+="e",t+="d",s=E==null?null:t!=typeof Symbol&&E[Symbol.iterator]||E["@@iterator"],s!=null){o=[],c=!0,l=!1;try{if(i=(s=s.call(E)).next,e===0){if(Object(s)!==s)return;c=!1}else for(;!(c=(n=i.call(s)).done)&&(o.push(n.value),o.length!==e);c=!0);}catch(u){l=!0,r=u}finally{try{if(!c&&s.return!=null&&(a=s.return(),Object(a)!==a))return}finally{if(l)throw r}}return o}}(typeof __TREE_SHAKE__>"u"||!__TREE_SHAKE__)&&au.CIQ.activateImports(Rl,zl,Vl,Kl,Wl,Yl,Xl,jl,$l,Gl,Jl,Zl,ec,tc,ic,rc,ac,nc,sc,oc,lc,cc,uc,hc,dc,fc,pc,Ac,gc,mc,yc,vc,xc,bc,Cc,wc,Sc,kc,Ec,Bc,Dc,Tc,Mc,Fc,_c,Ic,Uc,Qc,Lc,Pc,Hc,Nc,qc,Oc,Rc,zc,Vc,Kc,Wc,Yc,Xc,jc,$c,Gc,Jc,Zc,eu,tu,iu,ru,null);let Kd=E=>{var e=typeof _CIQ<"u"?_CIQ:E.CIQ;class t{constructor(r){const{stx:i}=r;if(!i){console.warn("The DataLoader requires an stx parameter");return}if(this.stx=i,this.cssRequired=!0,i.dataLoader=this,e.UI){const a=({value:o})=>{o&&(setTimeout(this.subscribeToChanges,0,o),setTimeout(this.registerHotKeys,0,o))};e.UI.observeProperty("uiContext",i,a),i.addEventListener("destroy",()=>e.UI.unobserveProperty("uiContext",i,a))}}formatData(r,i){const{defaultPlotField:a}=this.stx.chart,{results:o,fields:c}=r,{name:l}=i,u=c.indexOf("DT"),h=c.indexOf("Date"),d=c.indexOf(l),f=d>-1;let A=[u>-1?u:h];f&&A.push(c.indexOf(l)),o.data=o.map(p=>{const g={};return p.split(",").forEach((m,b)=>{if(f&&A.indexOf(b)===-1)return;let C=c[b],F;try{F=JSON.parse(m)}catch{F=m}let w=C==="DT"||C==="Date"?F:Number.parseFloat(F);g[c[b]]=w,b===d&&(delete g[c[b]],g[a]=w)}),g})}importData(r){const i=this,{stx:a}=this,o=Object.fromEntries(r.formData.entries());let{color:c,display:l,name:u,panel:h,periodicity:d}=o;d=JSON.parse(d),this.formatData(r,o);const{results:f}=r,{data:A}=f,p={symbol:u,static:!0},g={data:A,symbolObject:p,panel:h==="true"?!0:void 0,color:c};l==="secondary"?a.addSeries(u,g,function(){let m=a.getSeries({symbol:u})[0];const b=a.tickFromDate(m.endPoints.end);a.chart.scroll=a.chart.dataSet.length-1-b+a.chart.maxTicks,i.registerDataWarnings(!0)}):(a.quoteDriver.pause(u),a.loadChart(p,{masterData:A,periodicity:d},()=>{i.registerDataWarnings();const m=a.container.closest("cq-context-wrapper");m&&m.removeEmptyMsg&&m.removeEmptyMsg()}))}registerDataWarnings(r){const{stx:i}=this,a=i.addEventListener("menu",({stx:u,menu:h})=>{h.matches(".ciq-period")&&e.UI.getMyContext(h)===u.uiContext&&u.dispatch("notification","changeperiodicity")});let o,c;r&&(o=i.append("removeSeries",l),c=i.append("deleteHighlighed",l)),i.addEventListener("periodicity",({stx:u,differentData:h})=>{const d=u.getSymbols({static:!0});d&&h&&d.forEach(f=>{u.removeSeries(f,u.chart),l()})}),i.addEventListener("newChart",()=>{l()});function l(){i.getSymbols({static:!0}).length||(i.removeEventListener(a),r&&(i.removeInjection(o),i.removeInjection(c)))}}registerHotKeys(r){const i=e.getFromNS(r.config,"hotkeyConfig.hotkeys");if(!i)return;let a=i.find(({action:o})=>o==="dataLoader");a&&(a.action=()=>{r.getAdvertised("Channel").write(null,"dataLoader",!0)})}subscribeToChanges(r){const{stx:i}=r,a=e.UI.BaseComponent.prototype;a.channelSubscribe("channel.dataLoader",o=>{let c=o?{type:"dataLoader",params:{stx:i,context:r}}:{};a.channelWrite("channel.dialog",c,i)},i)}}class s{constructor(r){const i=new FileReader;this.reader=i,this.file=r}async parse(r){const{reader:i}=this;return new Promise((a,o)=>{i.readAsText(r),i.onload=c=>{const l=this.splitResults(i.result),u=l.shift(),d=!!u.match(/"/)?new RegExp(/,(?=")/):new RegExp(/,/);this.fields=u.split(d).map(f=>{let A;try{A=JSON.parse(f)}catch{A=f}return A}),l[l.length-1]===""&&l.pop(),this.results=l,a(l)},i.onerror=c=>{console.warn(c),o(c)}})}determineLineBreak(r){const{length:i}=r,a=`\r
`,o=`
`;let c=Math.floor(i*.05),l=0,u;do{const h=r.substring(l,c);h.indexOf(a)>-1?u=a:h.indexOf(o)>-1?u=o:l+=c}while(!u);return u}splitResults(r){return r.split(this.determineLineBreak(r))}}e.CSVReader=e.CSVReader||s,e.DataLoader=e.DataLoader||t},Wd=E=>{var e=typeof _CIQ<"u"?_CIQ:E.CIQ;e.ExtendedHours=e.ExtendedHours||function(t){var s=t.stx;this.filter=t.filter,s||(s=t,this.filter=!1);var n={};this.stx=s,this.stx.extendedHours=this,this.cssRequired=!0,s.addEventListener("theme",function(r){n={};for(var i in s.layout.marketSessions)n.session||(n.session={}),n.session[i]=s.canvasStyle("stx_market_session "+i)}),s.addEventListener("symbolChange",function(r){r.action=="master"&&s.layout.extended&&!(s.chart.market.market_def&&s.chart.market.sessions.length)&&e.alert("There are no Extended Hours for this instrument.")}),e.UI&&e.UI.KeystrokeHub.addHotKeyHandler("extendedHours",({stx:r})=>{r.container.ownerDocument.body.keystrokeHub.context.advertised.Layout.setExtendedHours()},s),this.prepare=function(r,i){s.layout.extended=r;for(var a in s.layout.marketSessions)n.session={},s.chart.market.disableSession(a);if(s.layout.marketSessions={},r)if(i||(i=["pre","post"]),i.length)for(var o=0;o<i.length;o++)s.layout.marketSessions[i[o]]=!0;else s.layout.marketSessions=i;for(a in s.layout.marketSessions)n.session||(n.session={}),n.session[a]=s.canvasStyle("stx_market_session "+a),s.chart.market.disableSession(a,!0)},this.complete=function(r){if(s.changeOccurred("layout"),!s.chart.market.market_def){r&&r();return}this.filter?(s.createDataSet(),s.draw(),r&&r()):s.loadChart(s.chart.symbol,r)},this.set=function(r,i,a){this.prepare(r,i),this.complete(a)},this.stx.append("drawYAxis",function(r,i){if(this.layout.extended&&!(r.yAxis!=i.yAxis||r.shareChartXAxis===!1||r.hidden)){var a=r.chart;if(!e.ChartEngine.isDailyInterval(this.layout.interval)&&(n.divider=this.canvasStyle("stx_market_session divider"),n.session)){for(var o=a.market,c=[],l={},u,h,d=0;d<a.dataSegment.length;d++){var f=a.dataSegment[d];if(!(!f||!f.DT)){var A=null;if(o.market_def&&(!u||u<=f.DT)){h=o.getSession(f.DT);var p=h!==""&&(!this.layout.marketSessions||!this.layout.marketSessions[h]);u=o[p?"getNextOpen":"getNextClose"](f.DT)}var g=n.session[h];if(g&&(A=g.backgroundColor),l.color&&l.color!=A&&(c.push({start:l.start,end:l.end,color:l.color}),l={}),A){var m=this.layout.candleWidth;f.candleWidth&&(m=f.candleWidth),l.end=this.pixelFromBar(d,a)+m/2,!l.start&&l.start!==0&&(l.start=l.end-m+1),l.color=A}else l={}}}(l.start||l.start===0)&&c.push({start:l.start,end:l.end,color:l.color});var b=e.isTransparent(n.divider.backgroundColor),C=n.divider.width.replace(/px/g,""),F={y0:r.bottom,y1:r.top,color:n.divider.backgroundColor,type:"line",context:a.context,confineToPanel:r,pattern:"dashed",lineWidth:C,deferStroke:!0};for(this.startClip(r.name),a.context.beginPath(),s.highlightedDraggable&&(a.context.globalAlpha*=.3),d=0;d<c.length;d++)a.context.fillStyle=c[d].color,!b&&c[d].start>a.left&&this.plotLine(e.extend({x0:c[d].start,x1:c[d].start},F)),a.context.fillRect(c[d].start,r.top,c[d].end-c[d].start,r.bottom-r.top),!b&&c[d].end<a.right&&this.plotLine(e.extend({x0:c[d].end,x1:c[d].end},F));a.context.stroke(),this.endClip()}}})}},Yd=E=>{var e=typeof _CIQ<"u"?_CIQ:E.CIQ;e.FullScreen=e.FullScreen||function(t){if(t||(t={}),!t.stx){console.warn("The Full Screen addon requires an stx parameter");return}try{if(window.location.host!==window.top.location.host)throw new Error(window.location.host+" does not match "+window.top.location.host)}catch{console.warn("Full screen mode disabled.");return}this.stx=t.stx,this.stx.fullScreen=this,this.fullScreenButton=null,this.fullScreenState=!1,this.addFullScreenButton=function(){this.stx.registerChartControl&&(this.fullScreenButton=this.stx.registerChartControl("stx-full-screen","Full Screen",function(r){return function(i){r.fullScreenToggle(i),i.stopPropagation()}}(this)))},this.fullScreenToggle=function(r){var i=r.target.ownerDocument;i.documentElement.requestFullscreen||i.documentElement.webkitRequestFullscreen||i.documentElement.mozRequestFullscreen||i.documentElement.msRequestFullscreen?this.getFullScreenElement(i)?i.exitFullscreen?i.exitFullscreen():i.webkitExitFullscreen?i.webkitExitFullscreen():i.mozCancelFullScreen?i.mozCancelFullScreen():i.msExitFullscreen&&i.msExitFullscreen():i.documentElement.requestFullscreen?i.documentElement.requestFullscreen():i.documentElement.webkitRequestFullscreen?i.documentElement.webkitRequestFullscreen():i.documentElement.mozRequestFullscreen?i.documentElement.mozRequestFullscreen():i.documentElement.msRequestFullscreen&&i.documentElement.msRequestFullscreen():(this.fullScreenState=!this.fullScreenState,this.fullScreenRender())},this.fullScreenRender=function(){let r=null;if(r=this.stx.container.closest("*[cq-context], cq-context, body"),r){const i="full-screen",a=this.fullScreenState===!0?"add":"remove";this.fullScreenButton&&this.fullScreenButton.classList[a]("active"),r.classList[a](i),this.stx.channel.componentClass={...this.stx.channel.componentClass,[i]:a},window.dispatchEvent(new Event("resize"))}},this.onFullScreenChange=function(r){this.getFullScreenElement(r.target.ownerDocument)?this.fullScreenState=!0:this.fullScreenState=!1,this.fullScreenRender()},this.getFullScreenElement=function(r){return r.fullscreenElement||r.webkitCurrentFullScreenElement||r.mozFullScreenElement||r.msFullscreenElement};var s=this.onFullScreenChange.bind(this),n=this;["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"].forEach(function(r){n.stx.container.ownerDocument.addEventListener(r,s),n.stx.addEventListener("destroy",function(){this.container.ownerDocument.removeEventListener(r,s)})}),this.addFullScreenButton()}},Xd=E=>{var e=typeof _CIQ<"u"?_CIQ:E.CIQ;e.InactivityTimer=e.InactivityTimer||function(t){if(!t.minutes)return;(!t.interval||t.interval<0)&&(t.interval=60),this.stx=t.stx,this.timeout=t.minutes,this.interval=t.interval,this.wakeCB=t.wakeCB,this.sleepCB=t.sleepCB,this.sleepTimer=null,this.sleeping=!1,this.last=new Date().getTime(),this.wakeChart=function(i){clearTimeout(this.sleepTimer),this.last=new Date().getTime(),this.sleeping&&(this.stx.quoteDriver&&this.stx.quoteDriver.updateChartLoop(),this.sleeping=!1,this.stx.container.ownerDocument.body.classList.remove("ciq-sleeping"),i||e.ChartEngine.registeredContainers.forEach(function(a){t.stx!==a.stx&&a.stx.inactivityTimer&&a.stx.inactivityTimer.wakeChart(!0)})),this.sleepTimer=setTimeout(this.sleepChart.bind(this),this.timeout*6e4),this.wakeCB&&this.wakeCB()},this.sleepChart=function(i){this.sleeping||(this.stx.quoteDriver&&this.stx.quoteDriver.updateChartLoop(this.interval),this.sleeping=!0,this.stx.container.ownerDocument.body.classList.add("ciq-sleeping"),i||e.ChartEngine.registeredContainers.forEach(function(a){t.stx!==a.stx&&a.stx.inactivityTimer&&a.stx.inactivityTimer.sleepChart(!0)})),this.sleepCB&&this.sleepCB()};var s=this,n=this.stx.container.ownerDocument;function r(){s.wakeChart()}["mousemove","mousedown","touchstart","touchmove","pointerdown","pointermove","keydown","wheel"].forEach(function(i){n.body.addEventListener(i,r,{passive:!1}),s.stx.addEventListener("destroy",function(){n.body.removeEventListener(i,r),clearTimeout(s.sleepTimer)})}),this.stx.inactivityTimer=this,this.wakeChart()}},jd=E=>{var e=typeof _CIQ<"u"?_CIQ:E.CIQ;e.RangeSlider=e.RangeSlider||function(t){this.cssRequired=!0;var s=t.stx;s.slider=this;var n=t.height?t.height:"95px",r=t.chartContainer?t.chartContainer:t.stx.container,i=document.createElement("div");i.className="ciq-chart";var a=document.createElement("div");a.className="chartContainer",i.appendChild(a),r.parentElement.parentElement.insertBefore(i,r.parentElement.nextSibling),Object.assign(i.style,{height:n,paddingTop:"5px",display:"none"}),a.style.height="100%",a.dimensionlessCanvas=!0;var o=this.slider=new e.ChartEngine({container:a,preferences:{labels:!1,whitespace:0}});o.linkedChartEngine=s,o.cleanupGaps=s.cleanupGaps,o.setGapLines(s.chart.gapLines),o.chart.customChart=s.chart.customChart,o.xaxisHeight=30,o.manageTouchAndMouse=!1,o.minimumCandleWidth=0,o.chart.yaxisMarginMultiplier=1;var c=o.chart.panel,l=c.subholder,u=c.close;l.style.cursor="ew-resize",l.classList.add("stx_range_slider"),u&&(u.style.display="inline",e.safeClickTouch(u,function(){s.layout.rangeSlider=!1,s.changeOccurred("layout")}));var h=c.yAxis;h.drawCurrentPriceLabel=!1,Object.defineProperty(h,"position",{get:function(){return s.slider.yAxisPosition||s.chart.panel.yAxis.position},set:function(p){s.slider.yAxisPosition=p}});const{get:d,set:f}=Object.getOwnPropertyDescriptor(e.ChartEngine.YAxis.prototype,"width");Object.defineProperty(h,"width",{get:function(){return Math.max(d.call(h),s.chart.yAxis.width)},set:function(p){f.call(h,p)}}),e.extend(h,t.yAxis),o.chart.baseline.userLevel=!1,o.controls.home&&(o.controls.home.style.width=0),o.initializeChart();const A=p=>o.notifyBreakpoint(p.value);e.UI&&(e.UI.KeystrokeHub.addHotKeyHandler("rangeSlider",({stx:p})=>{p.container.ownerDocument.body.keystrokeHub.context.advertised.Layout.setRangeSlider()},s),e.UI.observeProperty("breakpoint",s.chart,A)),this.updateStyles=function(p,g,m){s.setStyle(p,g,m),this.style=s.canvasStyle("stx_range_slider shading")},this.display=function(p){if(s.layout.rangeSlider!==p){s.layout.rangeSlider=p,s.changeOccurred("layout");return}i.style.display=p?"":"none",i.ownerDocument.defaultView.dispatchEvent(new Event("resize")),p&&(o.initializeChart(),this.requestDraw(!0))},this.setSymbol=function(p){o.chart.panel.display=o.chart.symbol=p,o.chart.symbolObject={symbol:p},o.chart.market=s.chart.market,o.setMainSeriesRenderer(),o.resizeChart(),this.adjustRange(s.chart),this.requestDraw(!0)},this.acceptLayoutChange=function(p){var g=!1;s.layout.rangeSlider!==p.rangeSlider&&s.slider.display(p.rangeSlider);var m=["chartType","aggregationType","periodicity","interval","timeUnit","chartScale","rangeSlider","flipped","extended","marketSessions","kagi","rangebars","renko","priceLines","pandf"];m.forEach(function(b){e.equals(o.layout[b],p[b])||(o.layout[b]=p[b],g=!0)}),e.trulyVisible(i)&&g&&(o.setMainSeriesRenderer(),this.requestDraw(!0))},this.adjustRange=function(p){if(p.dataSet&&!(!p.endPoints||!p.endPoints.begin)){var g=o.chart;if(g.width){var m=0,b=0;if(s.quoteDriver){var C={symbol:p.symbol,symbolObject:p.symbolObject,interval:s.layout.interval};(C.interval=="month"||C.interval=="week")&&!s.dontRoll&&(C.interval="day");var F=s.quoteDriver.getQuoteFeed(C).behavior;F&&F.bufferSize&&(p.moreAvailable&&(m=F.bufferSize),s.isHistoricalMode()&&(b=F.bufferSize))}g.baseline.defaultLevel=p.baseline.actualLevel,g.scroll=Math.max(0,p.dataSet.length-s.tickFromDate(p.endPoints.begin)-m)+1,o.setMaxTicks(g.scroll-b+2)}}},this.copyData=function(p){if(p.dataSet&&p.masterData){var g=o.chart;g.masterData=o.masterData=p.masterData.slice(0),g.dataSet=p.dataSet.slice(0),g.state=p.state,o.establishMarkerTicks(),this.requestDraw()}},this.calculateYAxisPosition=function(){var p=o.chart.panel,g=o.getYAxisCurrentPosition(p.yAxis,p);p.yAxis.position&&g!=p.yAxis.position&&o.calculateYAxisPositions()},this.drawSlider=function(){if(e.trulyVisible(i)&&!(!s.chart.dataSet||!s.chart.dataSet.length)){var p=this.style;p||(p=this.style=s.canvasStyle("stx_range_slider shading"));var g=s.chart.panel,m=o.chart.context,b=o.chart.segmentImage||[],C=o.layout.candleWidth/2,F=o.tickLeft=Math.max(s.tickFromPixel(g.left+C),0),w=o.tickRight=Math.min(s.tickFromPixel(g.right-C),s.chart.dataSet.length-1),U=o.pixelLeft=o.pixelFromTick(F)-(b[F]?b[F].candleWidth/2:C),B=o.pixelRight=o.pixelFromTick(w)+(b[w]?b[w].candleWidth/2:C),k=l.offsetLeft,y=k+l.offsetWidth;m.save(),m.beginPath(),m.fillStyle=p.backgroundColor,m.fillRect(k,l.offsetTop,U-k,l.offsetHeight),m.fillRect(y,l.offsetTop,B-y,l.offsetHeight),m.strokeStyle=p.borderTopColor,m.lineWidth=parseInt(p.borderWidth,10),m.moveTo(U,l.offsetTop),m.lineTo(U,l.offsetTop+l.offsetHeight),m.moveTo(B,l.offsetTop),m.lineTo(B,l.offsetTop+l.offsetHeight),m.stroke(),m.beginPath(),m.lineWidth=parseInt(p.width,10),m.lineCap="round",m.moveTo(U,l.offsetTop+l.offsetHeight/4),m.lineTo(U,l.offsetTop+3*l.offsetHeight/4),m.moveTo(B,l.offsetTop+l.offsetHeight/4),m.lineTo(B,l.offsetTop+3*l.offsetHeight/4),m.stroke(),m.restore()}},this.requestDraw=function(p){const g=()=>{o.draw(),this.drawSlider(),this.drawRequested&&(this.drawRequested=clearTimeout(this.drawRequested))};p?g():this.drawRequested||(this.drawRequested=setTimeout(g,100))},s.addEventListener("destroy",function(p){e.UI&&e.UI.unobserveProperty("breakpoint",p.stx.chart,A),o.destroy()}),s.addEventListener("layout",function(p){p.stx.slider.acceptLayoutChange(p.stx.layout)}),s.addEventListener("preferences",function(p){const{language:g}=p.stx.preferences;e.I18N&&o.preferences.language!=g&&e.I18N.setLocale(o,g),o.preferences.language=g,this.slider.requestDraw(!0)}),s.addEventListener("symbolChange",function(p){p.action=="master"&&p.stx.slider.setSymbol(p.symbol)}),s.addEventListener("symbolImport",function(p){p.action=="master"&&p.stx.slider.setSymbol(p.symbol),p.stx.slider.acceptLayoutChange(p.stx.layout)}),s.addEventListener("theme",function(p){o.clearPixelCache();const{topNode:g}=s.uiContext||{},{multiChartContainer:m}=g||{},{breakpoint:b}=s.chart;if(m?(o.styles=m.styles[b]||{},m.styles[b]=o.styles):o.styles={},o.container.style.backgroundColor="",e.ThemeHelper){var C=new e.ThemeHelper({stx:p.stx});C.params.stx=o,C.update()}}),s.append("createDataSet",function(...p){const[,,{animationEntry:g}={}]=p||[];g||(this.slider.adjustRange(this.chart),this.slider.copyData(this.chart))}),s.append("draw",function({animationEntry:p}={}){p||!e.trulyVisible(i)||o.chart.dataSet&&(this.slider.calculateYAxisPosition(),this.slider.adjustRange(this.chart),this.slider.requestDraw())}),s.prepend("resizeChart",function(){var p=r.parentElement;if(!p||!p.isConnected)return!0;var g=p.parentElement,m=e.elementDimensions(g).height,b=g.querySelectorAll(".chartContainer");Array.from(b).forEach(function(C){C!==r&&e.trulyVisible(C)&&(m-=e.elementDimensions(C.parentElement,{border:1,padding:1,margin:1}).height)}),p.style.height=m+"px",this.layout.rangeSlider?(i.style.display="",o.resizeChart(),o.initializeChart(),this.slider.requestDraw()):i.style.display="none"}),["mousedown","touchstart","pointerdown"].forEach(function(p){l.addEventListener(p,function(g){var m=o.backOutX(g.pageX);if(!(!m&&m!==0)){m-=g.target.offsetLeft,o.startDrag=m,o.startPixelLeft=o.pixelLeft,o.startPixelRight=o.pixelRight;var b=s.slider.style;b||(b=s.slider.style=s.canvasStyle("stx_range_slider shading"));var C=parseInt(b.borderLeftWidth,10);m+=this.offsetLeft,m<o.pixelRight-C&&(o.needsLeft=!0),m>o.pixelLeft+C&&(o.needsRight=!0),!e.touchDevice&&o.needsLeft&&o.needsRight&&g.target.classList.add("stx-drag-chart")}},{passive:!1})}),["mouseup","mouseover","touchend","pointerup"].forEach(function(p){l.addEventListener(p,function(g){const{which:m,type:b}=g;m===1&&b!=="pointerup"&&b!=="mouseup"||(g.target.classList.remove("stx-drag-chart"),o.startDrag=null,o.needsLeft=!1,o.needsRight=!1)})}),["mousemove","touchmove","pointermove"].forEach(function(p){l.addEventListener(p,function(g){o.timeout||(o.timeout=setTimeout(()=>{const m=()=>o.timeout=clearTimeout(o.timeout),{startDrag:b,startPixelLeft:C,startPixelRight:F,needsLeft:w,needsRight:U}=o;let{tickLeft:B,tickRight:k}=o;if(!b&&b!==0)return o.backOutX(g.pageX)>o.pixelLeft+2&&o.backOutX(g.pageX)<o.pixelRight-2?o.chart.panel.subholder.style.cursor="grab":o.chart.panel.subholder.style.cursor="ew-resize",m();const{touches:y}=g;let S=(y&&y.length?o.backOutX(y[0].pageX):o.backOutX(g.pageX))-g.target.offsetLeft;if(!S&&S!==0)return m();if(S-=b,w)C+S<o.chart.left&&(S=o.chart.left-C),U&&F+S>=o.chart.right&&(S=o.chart.right-F,o.isHome()||(S+=o.layout.candleWidth/2)),B=o.tickFromPixel(C+S),U&&(k=B+o.tickRight-o.tickLeft);else if(U)k=Math.min(o.tickFromPixel(F+S),s.chart.dataSet.length-1);else return m();let T=s.chart.width/(k-B+1);k>=B&&(w&&U||T>=s.minimumCandleWidth)&&(o.tickLeft=B,o.tickRight=k,s.chart.scroll=s.chart.dataSet.length-B,(!w||!U)&&s.setCandleWidth(T),s.micropixels=0,s.draw()),m()}))},{passive:!1})}),this.adjustRange(s.chart),this.copyData(s.chart),s.draw()}},$d=E=>{var e=typeof _CIQ<"u"?_CIQ:E.CIQ;e.Shortcuts=e.Shortcuts||function({stx:t,width:s=580,windowForEachChart:n=!0,config:r}={}){if(!t){console.warn("The Shortcuts addon requires an stx parameter");return}this.stx=t,this.width=s,this.windowForEachChart=n,this.content=this.getShortcutContent(r),this.ensureMessagingAvailable(t),this.enableUI(t),this.cssRequired=!0,t.shortcuts=this,e.UI&&e.UI.KeystrokeHub.addHotKeyHandler("shortcuts",({stx:o,options:c})=>{o.container.ownerDocument.body.keystrokeHub.context.advertised.Layout.showShortcuts()},t);const i=this.stx.container.closest("cq-context"),a=new MutationObserver(()=>this.content=this.getShortcutContent(r));a.observe(i,{attributes:!0}),this.mo=a},e.Shortcuts.prototype.enableUI=function(t){t&&e.UI&&setTimeout(()=>{const s=t.uiContext.getAdvertised("Layout");s.showShortcuts=(n,r)=>this.toggle(r,n&&n.node)})},e.Shortcuts.prototype.ensureMessagingAvailable=function(t){setTimeout(()=>{if(!(t&&e.UI))return;const s=t.uiContext.topNode;Array.from(s.querySelectorAll("cq-floating-window")).find(r=>r.closest("cq-context")===s)||s.append(document.createElement("cq-floating-window"))})},e.Shortcuts.prototype.getShortcutContent=function(t){const s=(t.drawingTools||[]).filter(l=>l.shortcut).map(({label:l,shortcut:u})=>`<div class="ciq-shortcut">
					<div>${l}</div>
					<div><span>Alt</span> + <span>${u.toUpperCase()}</span></div>
				</div>`).join(""),n=l=>l.charCodeAt(l.length-1)<127,r=l=>l===" + "?"<span>+</span>":l.split("+").map(u=>u&&u!==" "?"<span>"+u+"</span>":"").join(" + "),i=l=>l.map(u=>u.replace(/Arrow|Key|Digit|^ | $/g,"")).map(u=>u.replace(/\+/," + ")).reduce((u,h)=>!u.includes(h)&&n(h)?u.concat(h):u,[]).map(r).join("<br>"),a=this.stx.container.closest("cq-context");if(!a){this.mo.disconnect();return}const o=l=>a.hasAttribute(l.toLowerCase()+"-feature"),c=(t.hotkeyConfig&&t.hotkeyConfig.hotkeys||[]).map(({label:l,action:u,commands:h,extension:d})=>d&&!o(d)?"":`<div class="ciq-shortcut"><div>${l||u}</div><div>${i(h)}</div></div>`).join("");return`
		<div class="ciq-shortcut-container">
			<div>
				<div><h4>Drawing tools shortcuts</h4></div>
				<div>${s}</div>
			</div>
			<hr>
			<div>
				<div><h4>Hotkeys</h4></div>
				<div>${c}</div>
			</div>
		</div>
	`},e.Shortcuts.prototype.toggle=function(t,s){this.stx.dispatch("floatingWindow",{type:"shortcut",title:"Shortcuts",content:this.content,container:this.stx.uiContext.topNode,onClose:()=>{this.closed=!0,s&&s.set&&s.set(!1)},width:this.width,status:t,tag:this.windowForEachChart?void 0:"shortcut"})}},Gd=E=>{var e=typeof _CIQ<"u"?_CIQ:E.CIQ;e.TableView=e.TableView||function({stx:s,minColumnWidth:n="84px",coverUIMaxWidth:r=400,coverContainer:i,usePreviousCloseForChange:a=!0,builderConfig:o}={}){if(!s){console.warn("The TableView addon requires an stx parameter");return}this.stx=s,this.viewAdditionalColumns=!1,this.minColumnWidth=n,this.coverUIMaxWidth=r,this.coverContainer=i,this.usePreviousCloseForChange=a,this.builder=Object.assign({},t,o),this.listeners=[],s.tableView=this,this.cssRequired=!0,e.UI&&(this.listener=({value:c})=>{c&&setTimeout(()=>{const l=this.subscribeToChanges(c),u=e.getFromNS(c.config,"hotkeyConfig.hotkeys",[]).find(({action:h})=>h==="tableView");u&&(u.action=()=>{const{stx:h}=c.topNode.ownerDocument.body.keystrokeHub.context,{tableView:d}=h;if(d)return e.UI.BaseComponent.prototype.channelWrite(l,!d.view,h),!0})})},e.UI.observeProperty("uiContext",s,this.listener)),setTimeout(()=>{this.setup({minColumnWidth:n,coverUIMaxWidth:r,coverContainer:i})})},e.TableView.prototype.setup=function(s){const{stx:n,builder:r}=this;if(n.destroyed)return;const{getChartCover:i,createToolbar:a,createTable:o}=r,c=i(n,s),l=a(n,s);c.append(l),c.style.display="none",n.addEventListener("symbolChange",()=>{this.view&&(this.close(),o(n,s),this.dialog.focus())}),this.dialog=c,this.toolbar={symbol:l.querySelector(".ciq-data-table-title > cq-symbol"),copyBtn:l.querySelector(".ciq-data-table-copy"),downloadBtn:l.querySelector(".ciq-data-table-download"),additional:l.querySelector(".ciq-data-table-additionalColumns")}},e.TableView.prototype.open=function(s){s&&(this.params=s);const{config:n={},onClose:r,processCloseEvent:i}=this.params||{};if(this.view&&this.close(!1),this.onClose=r,this.builder.createTable(this.stx,n),!this.dialog)return;const{stx:a}=this;if(!a.chart.masterData)return;const o=this.close.bind(this);this.lastFocused=null;const c=this.dialog.ownerDocument.body.keystrokeHub;c&&(c.tabActiveElement&&(this.lastFocused=this.dialog.ownerDocument.activeElement),c.highlightHide(),c.addActiveModal(this.dialog)),setTimeout(()=>this.removeCloseListener=l(this));function l(u){const h=a.uiContext.topNode,d=h.ownerDocument.body,f=g=>{g.target.closest(".ciq-data-table-container")||(o(),i?i(g):g.stopPropagation())};h.addEventListener("click",f,!0);const A=g=>{const{tableView:m}=d.keystrokeHub.context.stx;if(!(!m||!m.view))if(g.code==="Escape")m.close(),g.preventDefault();else{if(!e.UI||!e.UI.BaseComponent)return;const b=e.UI.BaseComponent.prototype,C=m.view.querySelectorAll("button");if(g.code==="Tab"){let{shiftKey:F}=g||{};b.focusNextItem(C,F,!0);const w=b.findFocused(C);w[0]&&b.highlightItem.call({keyboardNavigation:d.keystrokeHub},w[0])}else if(g.code==="Enter"){const F=b.findFocused(C);F[0]&&b.clickItem(F[0],g)}}};d.addEventListener("keydown",A);const p=e.getFn("UI.getUIManager")(h);return p&&(u.view.show=u.view.hide=function(){},p.openMenu(u.view,{}),u.view.isDialog=!0),()=>{h.removeEventListener("click",f,!0),d.removeEventListener("keydown",A),p&&p.closeMenu(u.view)}}},e.TableView.prototype.close=function(s=!0){let n;if(this.dialog&&(this.dialog.style.display="none",this.dialog.ariaModal="false"),this.view&&(n=this.view.ownerDocument.body,this.view.remove(),this.view=null),s&&this.onClose&&this.onClose(),this.removeCloseListener&&(this.removeCloseListener(),this.removeCloseListener=null),n&&n.keystrokeHub){const{keystrokeHub:r}=n;let{tabActiveModals:i}=r,a=i.indexOf(this.dialog);a>-1&&i.splice(a,1),!r.tabActiveElement&&this.lastFocused&&(r.tabActiveElement={element:this.lastFocused}),r.tabIndex=Math.abs(r.tabIndex),r.highlightAlign()}this.lastFocused&&this.lastFocused.focus()},e.TableView.prototype.toggle=function(){this[this.view?"close":"open"](),this.view||this.dialog.focus()},e.TableView.prototype.subscribeToChanges=function(s,n="channels.tableView"){const{channelSubscribe:r,channelWrite:i}=e.UI.BaseComponent.prototype,{channels:{tableView:a=n}={}}=s.config||{},{stx:o}=this;return r(a,c=>{o.tableView&&(c?(o.tableView.open({onClose:()=>{i(a,!1,o)}}),o.tableView.dialog.focus()):o.tableView.close())},o),o.addEventListener("destroy",()=>{this.dialog&&this.dialog.remove(),this.listener&&e.UI.unobserveProperty("uiContext",o,this.listener)}),a};function t(){}t.colHeaders={date:{label:"Date",alias:"DT"},open:{label:"Open"},high:{label:"High"},low:{label:"Low"},close:{label:"Close"},pctChange:{label:"% Change",cls:"ciq-extra"},pctChangeVsAvg:{label:"% Change vs Average",cls:"ciq-extra"},volume:{label:"Volume",cls:"ciq-extra"}},t.colSeparator=",",t.percentDecimalPlaces=2,t.copyLabel="Copy",t.downloadLabel="Download",t.createToolbar=function(s,n={}){const{tableView:r}=s,{builder:i}=r,{symbolDisplay:a,symbol:o,symbolObject:{display:c}}=s.chart,{colSeparator:l,dataToCsv:u,downloadCsv:h,getCoverToolbar:d,getFilenameFormatter:f}=i,{fileNameFormatter:A=f(s)}=n;return d({stx:s,symbol:a||c||o,copyFn:g,downloadFn:m,toggleAdditionalColumnsFn:b=>{const{tableView:C}=s;C.viewAdditionalColumns=!C.viewAdditionalColumns,b.currentTarget.classList[C.viewAdditionalColumns?"add":"remove"]("ciq-active"),b.currentTarget.ariaChecked=C.viewAdditionalColumns?"true":"false";const{lastFocused:F}=C;delete C.lastFocused,C.open(),C.lastFocused=F},closeFn:()=>s.tableView.close()});function g(){const b=document.createElement("textArea");s.container.ownerDocument.body.appendChild(b);const C=i.getColumnHeaders(s);b.textContent=u(r.currentTable,{colHeaders:C,colSeparator:l}),b.select(),s.container.ownerDocument.execCommand("copy"),b.remove(),s.dispatch("notification","copytoclipboard")}function m(){const b=i.getColumnHeaders(s),C=u(r.currentTable,{colHeaders:b,colSeparator:l}),F=A(C);h(C,F,s)}},t.getColumnHeaders=function(s){const{builder:n}=s.tableView,r=Object.assign({},n.colHeaders);if((!s.chart.highLowBars||!s.chart.symbol)&&(delete r.open,delete r.high,delete r.low),s.chart.symbol||delete r.close,!s.tableView.viewAdditionalColumns||!s.chart.symbol)for(let a in r)r[a].cls&&delete r[a];const i=Object.values(r).map(a=>a.label);return n.getSeriesDataNames(s).forEach(a=>r[a]={label:a}),n.getStudyDataNames(s).forEach(a=>{i.includes(a)||(r[a]={label:a})}),r},t.createTable=function(s,n={}){if(!s.chart||!s.chart.dataSegment)return;const{tableView:r}=s,{getChartData:i,dataToHtml:a,getDateFormatter:o,getValueFormatter:c,getVolumeFormatter:l,getSeriesDataNames:u,getStudyDataNames:h,percentDecimalPlaces:d,getColumnHeaders:f}=r.builder,A=f(s),p=u(s).concat(h(s)),{dateFormatter:g=o(s),valueFormatter:m=c(s),percentFormatter:b=c(s,d),volumeFormatter:C=l(s),minColumnWidth:F="84px"}=n,w=i(s,{dateFormatter:g,valueFormatter:m,percentFormatter:b,volumeFormatter:C,additionalDataFields:p});r.currentTable=w;const U=r.dialog;U.role="dialog",U.ariaModal="true",U.style.display="";const{symbolDisplay:B,symbol:k,symbolObject:{display:y}}=s.chart;return r.toolbar.symbol.textContent=B||y||k||Object.keys(s.chart.series).join(", "),r.toolbar.symbol.classList.toggle("ciq-secondary",!s.chart.symbol),r.toolbar.additional.style.display=s.chart.symbol?"":"none",setTimeout(()=>{const S=a(w,{colHeaders:A,minColumnWidth:F});U.appendChild(S),r.view=S;const T=e.getFromNS(s,"uiContext.config.scrollbarStyling");T&&(T.refresh(U.querySelector("tbody")),T.refresh(U.querySelector(".ciq-data-table-wrapper"),{suppressScrollY:!0})),s.translateUI&&s.translateUI(U),U.classList.remove("loading")}),U},t.dataToHtml=function(s,{colHeaders:n,minColumnWidth:r}){const i=Object.keys(n).length,a=`calc((100% - ${10+i*4}px ) / ${i})`,o=Object.entries(n).map(([,{label:h}],d)=>`<th
			scope="col"
			style="width: ${a};"
			>${h.replace("(","  (")}</th>`),c=s.map(h=>`<tr>${Object.keys(n).map((f,A)=>{const p=h[f];return A===0?`<th scope="row"
							style="width: ${a}"
						>${p}</th>`:`<td style="width: ${a}">${p}</td>`}).join("")}</tr>`),l=document.createElement("div");l.classList.add("ciq-data-table-wrapper");const u=r?`calc(${i} * ${r})`:"";return l.innerHTML=`
		<table class="header-fixed"	aria-description="Data visible in the chart"
		${u?`style="min-width: ${u}"`:""}>
		<thead role="rowgroup">${o.join("")}</thead>
		<tbody role="rowgroup">${c.join("")}</tbody>
		</table>`,l},t.dataToCsv=function(s,{colHeaders:n,colSeparator:r="	"}){const i=Object.entries(n).map(([,{label:c}])=>`"${c}"`).join(r),a=Object.entries(n).map(c=>c[1].alias||c[0]),o=s.map(c=>a.map(l=>`"${l==="DT"?c[l].toISOString():c[l]}"`).join(r));return`${i}
${o.reverse().join(`
`)}`},t.downloadCsv=function(s,n="filename",r=null){const i=new Blob([s],{type:"text/csv;charset=utf-8;"}),a=document.createElement("a");a.href=window.URL.createObjectURL(i,{type:"text/plain"}),a.download=`${n}.csv`,a.style.display="none";const o=((r||{}).container||{}).ownerDocument||document;o.body.appendChild(a),a.click(),o.body.removeChild(a)},t.getChartData=function(s,{dateFormatter:n,valueFormatter:r,percentFormatter:i,volumeFormatter:a,additionalDataFields:o}){const c=s.chart.dataSegment.filter(f=>f!==null),{usePreviousCloseForChange:l}=s.tableView;let u=[],h=0;const d=c.reduce((f,{Close:A,iqPrevClose:p,Open:g})=>{const m=l?p:g;return typeof A>"u"||Number.isNaN(A)||typeof m>"u"||Number.isNaN(m)?f:(h++,f+(A-m)/m)},0)/h;return c.forEach((f,A)=>{const{DT:p,displayDate:g,High:m,Low:b,Open:C,Close:F,iqPrevClose:w,Volume:U}=f,B=l?w:C,k=(F-B)/B,y=g||(s.displayZone?e.convertTimeZone(p,s.dataZone,s.displayZone):p),S={DT:p,date:n(y),open:r(C),close:r(F),change:r(F-B),pctChange:i(k*100),pctChangeVsAvg:i((k-d)*100),high:r(m),low:r(b),volume:a(U)};o.forEach(T=>{let _=f[T];if(_==null){S[T]="";return}typeof _=="object"&&(_=_.Close),S[T]=r(_)}),u.push(S)}),u.sort((f,A)=>A.DT-f.DT),u},t.getDateFormatter=function(s){return(n,r)=>n?e.displayableDate(s,s.chart,n,!0):""},t.getValueFormatter=function(s,n){const{chart:{panel:r,yAxis:i},layout:{chartScale:a}}=s;let o;return i.originalPriceFormatter&&i.originalPriceFormatter.func?o=c=>i.originalPriceFormatter.func(s,r,c,n):i.priceFormatter&&a!="percent"&&a!="relative"?o=c=>i.priceFormatter(s,r,c,n):o=c=>s.formatYAxisPrice(c,r,n),c=>o(c).replace(/^-*0\.0*$/,"0")},t.getVolumeFormatter=function(s){return n=>{if(n==null)return"";if(s.internationalizer)return s.internationalizer.priceFormatters[0].format(n);const r=n.toString().split(".");return r[0]=e.commas(r[0]),r[0]}},t.getFilenameFormatter=function(s){return n=>{const r=s.chart.symbolDisplay||s.chart.symbolObject.display||s.chart.symbol||Object.keys(s.chart.series).join("_");let i,a;if(n){const o=n.split(`
`);o.length>1&&([,i=""]=o[o.length-1].match(/^"([^"]*)"/)||[],[,a=""]=o[1].match(/^"([^"]*)"/)||[],i=e.yyyymmddhhmmssmmm(new Date(i)),a=e.yyyymmddhhmmssmmm(new Date(a)))}return`${r}${i?` (${i} _ ${a})`:""}`}},t.getChartCover=function(s,{coverUIMaxWidth:n,coverContainer:r}){const i=r&&s.container.ownerDocument.querySelector(r)||(s.uiContext&&s.container.offsetWidth<n?s.uiContext.topNode:s.container.parentElement.parentElement),a=document.createElement("div");Object.assign(a.style,{top:0,left:0,right:0,bottom:0}),a.classList.add("ciq-data-table-container","loading"),a.setAttribute("role","dialog"),e.addTranslatableAriaLabel(a,s,"Data Table"),a.setAttribute("tabindex",0);const o=document.createElement("div");return o.classList.add("ciq-spinner-wrapper"),o.innerHTML='<span class="ciq-spinner"></span>',a.appendChild(o),i.appendChild(a),a},t.getCoverToolbar=function({stx:s,symbol:n,copyFn:r,downloadFn:i,toggleAdditionalColumnsFn:a,closeFn:o}){const{builder:c}=s.tableView,l=document.createElement("div");l.classList.add("ciq-data-table-toolbar"),l.innerHTML=`
		<div class="ciq-data-table-title"><span>Symbol</span>: <cq-symbol></cq-symbol></div>
		<button class="ciq-data-table-copy">${c.copyLabel}</button>
		<button class="ciq-data-table-download">${c.downloadLabel}</button>
		<div>
			<label class="ciq-data-table-additionalColumns" role="switch">
				<span class="ciq-switch"><span></span></span>
				<span>Show Additional Columns</span>
			</label>
		</div>
		<cq-close role="button" aria-label="close" />
	`;const u=l.querySelector(".ciq-data-table-title");u.querySelector("cq-symbol").textContent=n,u.setAttribute("role","heading");const h=l.querySelector(".ciq-data-table-copy");r?h.addEventListener("click",r):h.style.display="none";const d=l.querySelector(".ciq-data-table-download");i?d.addEventListener("click",function(){d.blur(),i()}):d.style.display="none";const f=l.querySelector(".ciq-data-table-additionalColumns");return a?f.addEventListener("click",a):f.style.display="none",l.close=o,l},t.getAdditionalColumnLabel=function(s){return`<span>${s?"- ":"+ "}</span>Additional columns`},t.getStudyDataNames=function(s){return Object.values(s.layout.studies||{}).filter(i=>!i.signalData||i.signalData.reveal).map(n).reduce((i,a)=>i.concat(a),[]);function n(i){return Object.keys(i.outputMap).filter(r)}function r(i){return s.chart.dataSegment.some(a=>a&&a[i])}},t.getSeriesDataNames=function(s){return Object.values(s.chart.seriesRenderers||{}).filter(n=>n.params.name!=="_main_series").map(n=>n.seriesParams.map(({symbol:r})=>r)).reduce((n,r)=>n.concat(r),[])}},Jd=E=>{var e=typeof _CIQ<"u"?_CIQ:E.CIQ;e.Marker?e.Tooltip=e.Tooltip||function(t){if(!e.Marker){console.warn("CIQ.Tooltip addon requires CIQ.Marker module to be enabled.");return}this.cssRequired=!0;const{stx:s,ohl:n,change:r,volume:i,series:a,studies:o,signalStudies:c,interpolation:l,showOverBarOnly:u,showBarHighlight:h=!0,useDataZone:d,caption:f}=t,{container:A}=s.chart;let p=A.querySelector(".hu-tooltip");if(p||(p=document.createElement("table"),p.classList.add("hu-tooltip"),A.appendChild(p)),f){let w=p.querySelector("caption");w||(w=document.createElement("caption"),p.insertBefore(w,p.firstChild)),w.innerHTML=s.translateIf(f)}let g=A.querySelector(".hu-tooltip-highlight");g||(g=document.createElement("div"),g.classList.add("hu-tooltip-highlight"),A.appendChild(g)),e.Marker.Tooltip=function(w){this.className||(this.className="CIQ.Marker.Tooltip"),this.highlightEl=g,w.label="tooltip",e.Marker.call(this,w)},e.inheritsFrom(e.Marker.Tooltip,e.Marker,!1),e.Marker.Tooltip.sameBar=function(w,U){return!(!w||!U||+w.DT!=+U.DT||w.Close!=U.Close||w.Open!=U.Open||w.Volume!=U.Volume)},e.Marker.Tooltip.placementFunction=function(w){if(m())return;const U=30;for(var B=w.stx,k=0;k<w.arr.length;k++){var y=w.arr[k],S=B.barFromPixel(B.cx),T=B.chart.dataSegment[S],_,L=!0,H,P;if(T!="undefined"&&T&&T.DT&&(_=!0,T.High&&(H=B.pixelFromPrice(T.High)),T.Low&&(P=B.pixelFromPrice(T.Low)),B.chart.highLowBars||T.Close&&(H=B.pixelFromPrice(T.Close)-15,P=B.pixelFromPrice(T.Close)+15),u&&!(B.cy>=H&&B.cy<=P)&&(L=!1)),!(B.insideChart&&!B.openDialog&&!B.activeDrawing&&!B.grabbingScreen&&_&&L)){g.style.display="none",y.node.style.left="-50000px",y.node.style.right="auto",y.node.ariaHidden="true",y.lastBar={};return}if(e.Marker.Tooltip.sameBar(B.chart.dataSegment[S],y.lastBar)&&S!=B.chart.dataSegment.length-1){F(y);return}y.lastBar=B.chart.dataSegment[S];const D=y.lastBar.candleWidth||B.layout.candleWidth,Q=parseInt(getComputedStyle(y.node).width,10)+D/2+U,q=B.chart.panel.left,O=B.pixelFromBar(S),R=A.clientWidth-O,V=O-q,K=R,Y=V>Q;K>Q&&K>V||!Y?(y.node.style.left=(O+Q<A.clientWidth?Math.round(O+U):A.clientWidth-Q)+"px",y.node.style.right="auto"):Y?(y.node.style.left="auto",y.node.style.right=Math.round(R+U)+"px"):(y.node.style.left=O-Q/2+"px",y.node.style.right=Math.round(R)+"px"),y.node.ariaHidden="false";var N=parseInt(getComputedStyle(y.node).height,10),v=Math.round(B.backOutY(e.ChartEngine.crosshairY)-N/2);if(v+N>B.height&&(v=B.height-N),v<0&&(v=0),y.node.style.top=v+"px",F(y),h&&!B.layout.crosshair){const J=y.lastBar.candleWidth||B.layout.candleWidth,Z=B.pixelFromBar(S)-J/2;let ee=J;Z+ee>B.chart.width&&(ee=B.chart.width-Z),g.style.display="block",g.style.left=Z+"px",g.style.width=ee+"px"}else g.style.display="none"}if(e.touchDevice&&B.layout.crosshair){var x=B.overXAxis,M=B.overYAxis;B.overXAxis=B.overYAxis=!1,B.doDisplayCrosshairs(),B.overXAxis=x,B.overYAxis=M}};function m(){const{headsUp:w,crosshair:U}=s.layout,B=w&&w.floating||w==="floating",k=U&&s.displayCrosshairs&&["static",null,void 0].includes(w);return s.huTooltip&&!B&&!k?(b(),!0):!1}function b(){const{huTooltip:w}=s,{node:U}=w;U&&(U.style.left="-50000px",U.style.right="auto",U.ariaHidden="true",w.lastBar={},w.highlightEl&&(w.highlightEl.style.display="none"))}function C(){var w=this;if(m())return;var U=w.barFromPixel(w.cx),B=w.chart.dataSegment[U];if(!B){b();return}if(e.Marker.Tooltip.sameBar(B,w.huTooltip.lastBar)&&U!=w.chart.dataSegment.length-1)return;var k=w.huTooltip.node;k.parentElement.querySelectorAll("[auto]").forEach(De=>De.remove()),k.parentElement.querySelectorAll(".hu-tooltip-value").forEach(De=>De.innerHTML=""),w.chart.symbol||k.parentElement.querySelectorAll("[hu-tooltip-field=Close]").forEach(De=>De.remove());var y=w.chart.panel,S=y.yAxis,T={},_=[];if(_.push({member:"DT",display:"DT",panel:y,yAxis:S}),_.push({member:"Close",display:"Close",panel:y,yAxis:S}),T.DT=T.Close=1,r&&e.ChartEngine.isDailyInterval(w.layout.interval)&&_.push({member:"Change",display:"Change",panel:y,yAxis:S}),n!==!1&&(n||w.chart.highLowBars)&&(_.push({member:"Open",display:"Open",panel:y,yAxis:S}),_.push({member:"High",display:"High",panel:y,yAxis:S}),_.push({member:"Low",display:"Low",panel:y,yAxis:S}),T.Open=T.High=T.Low=1),i!==!1&&(i||w.layout.studies&&Object.values(w.layout.studies).filter(De=>De.libraryEntry.name).some(De=>De.libraryEntry.name.toLowerCase().includes("volume")||De.libraryEntry.name.toLowerCase().includes("vwap")||De.libraryEntry.name.toLowerCase().includes("money flow")||De.libraryEntry.name.toLowerCase().includes("movement")))&&(_.push({member:"Volume",display:"Volume",panel:null,yAxis:null}),T.Volume=1),a){var L=w.chart.seriesRenderers;for(var H in L){var P=L[H];if(P!==w.mainSeriesRenderer){y=w.panels[P.params.panel],S=P.params.yAxis,!S&&P.params.shareYAxis&&(S=y.yAxis);for(var N=0;N<P.seriesParams.length;N++){var v=P.seriesParams[N],x=v.symbol,M=v.field;x?M&&x!=M&&(x=e.createObjectChainNames(x,M)[0]):x=M;var D=v.display||v.symbol||v.field;x&&!T[D]&&(_.push({member:x,display:D,panel:y,yAxis:S,isSeries:!0}),T[D]=1)}}}}if(o||c)for(var Q in w.layout.studies){var q=w.layout.studies[Q];if(!(!c&&q.signalData&&!q.signalData.reveal)){y=w.panels[q.panel],S=y&&q.getYAxis(w);for(var O in w.layout.studies[Q].outputMap)if(O&&!T[O]){var R=q.study.alias,V=O,K=w.layout.studies[Q].outputMap[V];if(R&&R.hasOwnProperty(K))V=V.replace(K,R[K]);else{var Y=new RegExp(q.type,"ig"),G=V.match(Y);if(G&&G.length>1){var J=0;V=V.replace(Y,Ne(J))}}_.push({member:O,display:V,panel:y,yAxis:S}),T[O]=1}T[Q+"_hist"]||(_.push({member:Q+"_hist",display:Q+"_hist",panel:y,yAxis:S}),T[Q+"_hist"]=1),T[Q+"_hist1"]||(_.push({member:Q+"_hist1",display:Q+"_hist1",panel:y,yAxis:S}),T[Q+"_hist1"]=1),T[Q+"_hist2"]||(_.push({member:Q+"_hist2",display:Q+"_hist2",panel:y,yAxis:S}),T[Q+"_hist2"]=1)}}for(var Z=0;Z<_.length;Z++){var ee=_[Z],X=ee.member,ne=ee.display,se=X=="DT";se&&!d&&!e.ChartEngine.isDailyInterval(w.layout.interval)&&(X="displayDate"),y=ee.panel,S=ee.yAxis;var oe=null;S&&(!y||y!==y.chart.panel?S.decimalPlaces||S.decimalPlaces===0?oe=S.decimalPlaces:(S.maxDecimalPlaces||S.maxDecimalPlaces===0)&&(oe=S.maxDecimalPlaces):(oe=Math.max(S.printDecimalPlaces,y.chart.decimalPlaces),(S.maxDecimalPlaces||S.maxDecimalPlaces===0)&&(oe=Math.min(oe,S.maxDecimalPlaces))));var ae=null,Ae=X==="Close"&&B._periodic_Close?"_periodic_Close":X,he=e.existsInObjectChain(B,Ae);he?ae=he.obj[he.member]:X=="Change"&&(ae=B.Close-B.iqPrevClose);var ge=ne.replace(/^(Result )(.*)/,"$2");if((l||this.cleanupGaps==="stretch")&&_[Z].isSeries&&(ae===null||typeof ae>"u")){var ie=w.valueFromInterpolation(U,X,"Close",y,S,this.cleanupGaps==="stretch");if(ie===null)continue;ae=ie}if((ae||ae===0)&&(se||typeof ae!="object"||ae.Close||ae.Close===0||ae._periodic_Close||ae._periodic_Close===0)){var re="";if((ae.Close||ae.Close===0)&&(ae=ae.Close),(ae._periodic_Close||ae._periodic_Close===0)&&(ae=ae._periodic_Close),ae.constructor==Number)if(S)S.originalPriceFormatter&&S.originalPriceFormatter.func?re=S.originalPriceFormatter.func(w,y,ae,oe):S.priceFormatter&&S.priceFormatter!=e.Comparison.priceFormat?re=S.priceFormatter(w,y,ae,oe):re=w.formatYAxisPrice(ae,y,oe,S);else{re=ae;var de=w.internationalizer;if(de){var ce=de.priceFormatters.length,fe=e.countDecimals(re);fe>=ce&&(fe=ce-1),re=de.priceFormatters[fe].format(re)}}else ae.constructor==Date?se&&w.controls.floatDate&&w.controls.floatDate.innerHTML?w.chart.xAxis.noDraw?re="N/A":re=e.displayableDate(w,y.chart,ae):(re=e.yyyymmdd(ae),e.ChartEngine.isDailyInterval(w.layout.interval)||(re+=" "+ae.toTimeString().substring(0,8))):re=ae;var me=k.querySelector('.hu-tooltip [hu-tooltip-field="'+ge+'"]');if(me){me.querySelector(".hu-tooltip-value").innerHTML=re;var ve=me.querySelector(".hu-tooltip-name");ve.innerHTML===""&&(ve.innerHTML=ge,w.translateUI&&w.translateUI(ve))}else{var pe=document.createElement("tr");pe.setAttribute("hu-tooltip-field",""),pe.setAttribute("auto",!0);var be=document.createElement("td");be.classList.add("hu-tooltip-name"),be.innerHTML=w.translateIf(ge),pe.appendChild(be);var Se=document.createElement("td");Se.classList.add("hu-tooltip-value"),Se.innerHTML=re,pe.appendChild(Se);var Ee=k.querySelector("tbody")||k;Ee.appendChild(pe)}}else{var Ie=k.querySelector('.hu-tooltip [hu-tooltip-field="'+ge+'"]');if(Ie){var Qe=Ie.querySelector(".hu-tooltip-name");Qe.innerHTML!==""&&(Ie.querySelector(".hu-tooltip-value").innerHTML="n/a")}}}w.huTooltip.render();function Ne(De){return function(Re){return++De===1?"":Re}}}function F(w){if(w.node.style.left!=="-50000px"){var U=s.controls.mSticky;if(U&&U.style.display!=="none"){var B=e.stripPX(w.node.style.top)-e.elementDimensions(U,{padding:!0,border:!0,margin:!0}).height;B<0&&(w.node.style.top=e.stripPX(w.node.style.top)-B+"px",B=0);var k=U.style;e.efficientDOMUpdate(k,"top",B+"px"),e.efficientDOMUpdate(k,"left",w.node.style.left),e.efficientDOMUpdate(k,"right",w.node.style.right)}}}A.addEventListener("mouseout",b),s.append("mousemoveinner",function(){F(this.huTooltip)}),s.append("deleteHighlighted",function(){this.huTooltip.lastBar={},this.headsUpHR()}),s.append("headsUpHR",C),s.append("createDataSegment",C),s.huTooltip=new e.Marker.Tooltip({stx:s,xPositioner:"bar",chartContainer:!0,node:p})}:console.error("tooltip addon requires first activating markers feature.")},Zd=E=>{var e=typeof _CIQ<"u"?_CIQ:E.CIQ;e.Animation=e.Animation||function(t){if(!t)throw new Error("Invalid constructor arguments.");var s,n,r;if(t instanceof e.ChartEngine?(s=arguments[0],n=arguments[1],r=arguments[2]):(s=t.stx,n=t.animationParameters,r=t.easeMachine),!s)return console.warn("No CIQ.ChartEngine provided. Cannot properly create CIQ.Animation instance");this.cssRequired=!0;var i={stayPut:!1,ticksFromEdgeOfScreen:5,granularity:1e6};n=e.extend(i,n),i.tension&&(s.chart.tension=n.tension),s.tickAnimator=r||new e.EaseMachine("easeOutCubic",1e3);var a=new e.EaseMachine("easeInOutCubic",1e3),o=["#0298d3","#19bcfc","#5dcffc","#9ee3ff"],c=0,l=20,u=0,h=!1,d=null;function f(){h=!1,d=null}if(e.UI){var A=({value:p})=>{i.tension&&(s.chart.tension=p?n.tension:0)};e.UI.observeProperty("animation",s.layout,A),s.addEventListener("destroy",function(){e.UI.unobserveProperty("animation",s.layout,A)})}s.addEventListener(["symbolChange","layout"],function(p){f()}),s.prepend("updateCurrentMarketData",function(p,g,m,b){g||(g=this.chart),b&&b.fromTrade&&g.closePendingAnimation&&(b.finalClose=g.closePendingAnimation.Close)}),s.prepend("updateChartData",function(p,g,m){var b=this;if(g||(g=b.chart),!g||!g.defaultChartStyleConfig||g.defaultChartStyleConfig=="none"||!this.layout.animation||m!==void 0&&(m.animationEntry||m.secondarySeries)||!g.dataSegment)return;function C(V){if(g.masterData)for(var K=g.masterData.length-1;K>=0;K--){var Y=g.masterData[K];if(Y.Close||Y.Close===0){Y.Close=V.Close,V.LastSize&&(Y.LastSize=V.LastSize),V.LastTime&&(Y.LastTime=V.LastTime),V.Open===void 0&&Y.Open!==void 0&&(Y.Open=V.Close),V.High===void 0&&Y.High!==void 0&&(Y.High=V.Close),V.Low===void 0&&Y.Low!==void 0&&(Y.Low=V.Close),b.updateCurrentMarketData({Close:Y.Close,DT:Y.DT,LastSize:Y.LastSize,LastTime:Y.LastTime},null,null,{animationLastBar:!0,fromTrade:!0}),b.createDataSet(null,null,{appending:!0});return}}}function F(){g.animatingHorizontalScroll&&(g.animatingHorizontalScroll=!1,b.micropixels=b.nextMicroPixels=b.previousMicroPixels,g.lastTickOffset=0),g.closePendingAnimation&&(C(g.closePendingAnimation),g.closePendingAnimation=null)}var w=b.tickAnimator,U=this.mainSeriesRenderer.supportsAnimation;if(U){if(!w){console.warn("Animation plug-in can not run because the tickAnimator has not been declared. See instructions in animation.js");return}if(this.prevSymbol!=g.symbol&&(this.prevQuote=0,g.closePendingAnimation=null,this.prevSymbol=g.symbol),F(),w.stop(s.ownerWindow),p.length>1){var B=p.splice(0,p.length-1),k=e.clone(m);k.animationEntry=!0,k.bypassGovernor=!0,k.noCreateDataSet=!1,k.appending=!0,b.updateChartData(B,g,k)}}var y=e.clone(m);y||(y={}),y.animationEntry=!0,y.bypassGovernor=!0,y.noCreateDataSet=!1,y.appending=!0,y.firstLoop=!0;var S=this.chart.symbol,T=this.layout.periodicity,_=this.layout.interval,L=this.layout.timeUnit;function H(V,K,Y){return function(G){var J=G.Close;if(!g.dataSet.length||S!=g.symbol||T!=b.layout.periodicity||_!=b.layout.interval||L!=b.layout.timeUnit){w.stop(b.ownerWindow),F();return}var Z=e.clone(V);Z.Adj_Close=null,Z.Close=Math.round(J*n.granularity)/n.granularity,g.animatingHorizontalScroll&&(b.micropixels=G.micropixels,g.lastTickOffset=G.lineOffset),y.updateDataSegmentInPlace=!w.hasCompleted;var ee=[Z];Y&&b.layout.interval!=="tick"&&ee.unshift(K),b.updateChartData(ee,g,y),y.firstLoop=!1,w.hasCompleted&&F()}}if(U){var P=p[p.length-1];this.prevQuote=this.currentQuote("Close");var N=!1,v=!1;if(b.isHome()||(v=!0),!P||!P.Close||!this.prevQuote||!this.prevQuote.Close)return!1;if(this.extendedHours&&g.market.market_def){var x=P.DT;if(e.ChartEngine.isDailyInterval(_))h=!g.market.isMarketDate(x);else if(!d||d<=x){var M=g.market.getSession(x);h=M!==""&&(!this.layout.marketSessions||!this.layout.marketSessions[M]),d=g.market[h?"getNextOpen":"getNextClose"](x)}if(h)return this.draw(),!1}var D=T;_=="second"||L=="second"?D*=1e3:(_=="minute"||L=="minute")&&(D*=6e4),isNaN(_)||(D*=_),_=="day"||L=="day"?N=P.DT.getDate()!=this.prevQuote.DT.getDate():_=="week"||L=="week"?N=P.DT.getDate()>=this.prevQuote.DT.getDate()+7:_=="month"||L=="month"?N=P.DT.getMonth()!=this.prevQuote.DT.getMonth():N=P.DT.getTime()>=this.prevQuote.DT.getTime()+D;var Q=!this.mainSeriesRenderer.standaloneBars,q=0;if(N)if(this.animations.zoom.hasCompleted){var O=this.layout.candleWidth;if(g.scroll<=g.maxTicks)for(;this.micropixels>0;)g.scroll++,this.micropixels-=O;q=O*-1,g.scroll<=g.maxTicks?(this.previousMicroPixels=this.micropixels,this.nextMicroPixels=this.micropixels+O,g.dataSegment.length<g.maxTicks-n.ticksFromEdgeOfScreen&&!n.stayPut&&(this.nextMicroPixels=this.micropixels,g.scroll>=g.maxTicks-this.preferences.whitespace/this.layout.candleWidth&&g.scroll++),g.animatingHorizontalScroll=Q,g.previousDataSetLength=g.dataSet.length):v||g.scroll++}else return!1;g.closePendingAnimation={Close:P.Close,Open:P.Open,High:P.High,Low:P.Low};var R=N&&!Q?P.Open:this.prevQuote.Close;return w.run(H(P,e.clone(this.prevQuote),N),{Close:R,micropixels:this.nextMicroPixels,lineOffset:q},{Close:P.Close,micropixels:this.micropixels,lineOffset:0},!1,s.ownerWindow),!0}}),s.prepend("renderYAxis",function(p){if(this.grabbingScreen||!this.isHome()||!this.layout.animation)return;var g=this.mainSeriesRenderer.supportsAnimation;if(!g)return;var m=p.panel,b=m.yAxis;if(e.Comparison&&b.priceFormatter==e.Comparison.priceFormat)return;function C(U){return function(B){p.animatedLow=B.low,p.animatedHigh=B.high,U.draw()}}if(!p.prevLowValue&&p.prevLowValue!==0&&(p.prevLowValue=p.animatedLow=p.lowValue),!p.prevHighValue&&p.prevHighValue!==0&&(p.prevHighValue=p.animatedHigh=p.highValue),a.running||(p.animatingVerticalScroll=!1),p.prevLowValue>=p.lowValue&&p.prevHighValue<=p.highValue){p.animatingVerticalScroll&&(b.highValue=p.animatedHigh,b.lowValue=p.animatedLow);return}if(a.running&&a.stop(s.ownerWindow),!(!p.lowValue&&!p.highValue)){var F=p.prevLowValue,w=p.prevHighValue;p.prevLowValue=p.lowValue,p.prevHighValue=p.highValue,p.animatingVerticalScroll=!0,a.run(C(this),{low:F,high:w},{low:p.lowValue,high:p.highValue},!1,s.ownerWindow),b.lowValue=p.animatedLow,b.highValue=p.animatedHigh}}),s.append("draw",function(){if(!h&&this.chart.dataSet&&this.chart.dataSet.length&&this.mainSeriesRenderer.supportsAnimation&&this.layout.animation){u%l===0&&(c++,u=0),u++;var p=this.chart.context,g=this.chart.panel,m=this.currentQuote("Close");if(!m)return;var b=m.Close,C=this.pixelFromTick(m.tick,this.chart);this.chart.lastTickOffset&&(C=C+this.chart.lastTickOffset);var F=this.pixelFromPrice(b,g);this.chart.yAxis.left>C&&this.chart.yAxis.top<=F&&this.chart.yAxis.bottom>=F&&(c>=o.length&&(c=0),p.beginPath(),p.moveTo(C,F),p.arc(C,F,2+c*1.07,0,Math.PI*2,!1),p.fillStyle=o[c],p.fill())}})}},ef=E=>{var e=typeof _CIQ<"u"?_CIQ:E.CIQ;e.ContinuousZoom=e.ContinuousZoom||function(t){this.cssRequired=!0,this.update(t),this.stx.continuousZoom=this,this.addSmartZoomButton=function(){var s=this.stx.registerChartControl&&this.stx.registerChartControl("stx-smart-zoom","SmartZoom (Alt + 0)",function(n){return function(r){n.smartZoomToggle(r),r.stopPropagation()}}(this));s&&(this.stx.addEventListener("layout",function(n){n.stx.layout.smartzoom===!0?s.classList.add("active"):s.classList.remove("active")}),this.stx.addEventListener("symbolImport",function(n){n.stx.layout.smartzoom===!1&&s.classList.remove("active")}))},this.smartZoomToggle=function(s){this.smartZoomEnable(!this.stx.layout.smartzoom)},this.smartZoomEnable=function(s){this.stx.layout.smartzoom=s,this.stx.changeOccurred("layout")},this.addSmartZoomButton(),this.smartZoomEnable(!0)},e.ContinuousZoom.prototype.update=function(t){t||(t={}),this.stx=t.stx,this.periodicities=t.periodicities,this.boundaries=t.boundaries},e.ContinuousZoom.prototype.execute=function(t){function s(f){var A=f.period||f.periodicity,p=f.interval,g=f.timeUnit||"minute";switch(isNaN(p)&&(g=p,p=1),g){case"month":p*=4.35;case"week":p*=7;case"day":p*=1440;case"minute":p*=60;case"second":break;case"millisecond":p/=1e3;break;default:return null}return A*p}if(!(!this.stx||!this.stx.layout.smartzoom)){var n=this.periodicities,r=this.boundaries,i=this.stx,a=i.layout,o=i.chart;if(!(!n||!r)&&(!t&&r.maxCandleWidth&&a.candleWidth>r.maxCandleWidth||t&&r.minCandleWidth&&a.candleWidth<r.minCandleWidth||!t&&r.minTicks&&o.maxTicks<r.minTicks||t&&r.maxTicks&&o.maxTicks>r.maxTicks)){for(var c={value:t?Number.MAX_VALUE:0},l=s(a),u=0;u<n.length;u++){var h=s(n[u]);(h>l&&h<c.value&&t||h<l&&h>c.value&&!t)&&(c={value:h,periodicity:n[u]})}var d=c.periodicity;d&&i.setRange({dtLeft:o.xaxis[0].DT,dtRight:o.xaxis[o.xaxis.length-1].DT,dontSaveRangeToLayout:!0,periodicity:d,padding:i.preferences.whitespace})}}}},tf=E=>{var e=typeof _CIQ<"u"?_CIQ:E.CIQ;e.Outliers=e.Outliers||function(t){if(t||(t={}),!t.stx){console.warn("The Outliers addon requires an stx parameter");return}Array.isArray(t.altColors)||(t.altColors=["#323390","#66308f","#0073ba","#f4932f","#0056a4","#00a99c","#00a553","#ea1d2c","#e9088c","#fff126","#912a8e","#ee652e","#00afed","#8ec648"]),this.stx=t.stx,this.stx.outliers=this,this.cssRequired=!0,this.multiplier=t.multiplier||3,this.altColors=t.altColors,this.axisData={},this.stx.addEventListener("layout",function(n){Object.keys(n.stx.outliers.axisData).forEach((function(r){this.removeAllMarkers(this.axisData[r]),delete this.axisData[r]}).bind(n.stx.outliers))}),e.UI&&e.UI.KeystrokeHub.addHotKeyHandler("outliers",({stx:n})=>{n.container.ownerDocument.body.keystrokeHub.context.advertised.Layout.setOutliers()},this.stx),this.processDataSet=function(n,r,i){if(!n.length||n.length<=1)return!1;var a=[0,0];if(!this.axisData[i.name]){var o="",c=-1;Object.keys(this.axisData).forEach((function(u){this.axisData[u].panel.name==r.name&&c++}).bind(this)),c>-1&&c<this.altColors.length&&(o=this.altColors[c]),this.axisData[i.name]={axis:i,panel:r,displayState:"none",isFlipped:!1,originalZoom:i.zoom,markerColor:o,markers:{},axisMarkers:{}}}var l=this.axisData[i.name];return Object.assign(l,this.find(n)),this.refreshMarkerArray(l),this.refreshMarkers(l),(l.displayState==="low"||l.displayState==="all")&&l.outlierMin!==null?a[0]=l.outlierMin:a[0]=l.trendMin,(l.displayState==="high"||l.displayState==="all")&&l.outlierMax!==null?a[1]=l.outlierMax:a[1]=l.trendMax,a},this.find=function(n){if(!(!n.length||n.length<=0)){var r=function(F,w){return{quote:F.quote,DT:F.quote.DT,value:F.value,position:w}},i=null,a=null,o=null,c=null,l=null,u=null,h=[],d=n.slice();d.sort(function(F,w){return F.value-w.value});var f=d.length,A=d[Math.floor(f/4)].value,p=d[Math.floor(f*(3/4))].value,g=p-A;i=A-g*this.multiplier,a=p+g*this.multiplier;for(var m=0;m<f;m++){var b=d[m],C=d[f-(m+1)];if(b.value<=i&&h.push(r(b,"low")),C.value>=a&&h.push(r(C,"high")),l===null&&b.value<=i&&(l=b.value),u===null&&C.value>=a&&(u=C.value),o===null&&b.value>i&&(o=b.value),c===null&&C.value<a&&(c=C.value),o!==null&&c!==null)break}return{minValue:i,maxValue:a,trendMin:o,trendMax:c,outlierMin:l,outlierMax:u,activeOutliers:h}}},this.refreshMarkerArray=function(n){this.deprecateMarkers(n);var r=n.markers;n.activeOutliers.forEach((function(i){var a=i.DT.getTime().toString();r[a]||(r[a]={isFresh:!0,type:"quote",value:i.value,marker:this.markOutlier(i,i.position,n)}),r[a].isFresh=!0}).bind(this)),n.outlierMax!==null&&(r.axisHigh||(r.axisHigh={isFresh:!0,type:"axis",value:n.outlierMax,marker:this.markAxis("high",n)}),r.axisHigh.isFresh=!0),n.outlierMin!==null&&(r.axisLow||(r.axisLow={isFresh:!0,type:"axis",value:n.outlierMin,marker:this.markAxis("low",n)}),r.axisLow.isFresh=!0)},this.setDisplayState=function(n,r){n!="high"&&n!="low"&&n!="all"&&(n="none");var i=n;r.displayState=="all"&&n=="high"?i="low":r.displayState=="all"&&n=="low"?i="high":r.displayState=="high"&&n=="low"||r.displayState=="low"&&n=="high"?i="all":r.displayState==n&&(i="none"),r.displayState=i,r.axis.zoom=r.originalZoom,this.refreshMarkers(r),this.stx.draw()},this.deprecateMarkers=function(n){var r=function(i){i.marker&&!i.isFresh?(i.marker.remove&&i.marker.remove(),i.marker=null):i.isFresh=!1};Object.keys(n.markers).forEach((function(i){r(this.markers[i]),this.markers[i].marker||delete this.markers[i]}).bind(n))},this.removeAllMarkers=function(n){Object.keys(n.markers).forEach(function(r){var i=n.markers[r].marker;i&&(i.remove&&i.remove(),i=null),i||delete n.markers[r]})},this.updateMarkerVisibility=function(){Object.keys(this.markers).forEach((function(n){this.displayState=="all"||this.markers[n].marker.node.classList.contains(this.displayState)?this.markers[n].marker.node.style.display="none":this.markers[n].marker.node.style.display="block"}).bind(this))},this.refreshAxisMarkers=function(n,r){var i=!1;n.classList.contains("high")&&(i=!0);var a=r.axis.top;(!r.isFlipped&&!i||r.isFlipped&&i)&&(a=r.axis.bottom-50),n.classList.contains("nano")&&(a=r.axis.top+r.axis.height/2-22);var o=Math.floor(r.axis.left).toString()+"px",c=Math.floor(a).toString()+"px",l=i?r.outlierMax:r.outlierMin;n.style.transform="translate("+o+", "+c+")",n.querySelector(".outlier-value").innerText=this.stx.formatYAxisPrice(l),o==="0px"?n.classList.add("right"):n.classList.remove("right")},this.refreshMarkers=function(n){Object.keys(n.markers).forEach((function(r,i){var a=r.markers[i].marker,o=r.markers[i].value,c=r.markers[i].type;o>r.trendMax&&r.axis.high>=o||o<r.trendMin&&r.axis.low<=o?c=="quote"?a.node.style.display="none":c=="axis"&&a.node.classList.add("compress"):c=="quote"?a.node.style.display="block":c=="axis"&&a.node.classList.remove("compress"),c=="axis"&&this.refreshAxisMarkers(a.node,r),r.axis.height<100?a.node.classList.add("nano"):a.node.classList.remove("nano"),r.axis.height<250?a.node.classList.add("micro"):a.node.classList.remove("micro")}).bind(this,n)),n.isFlipped!==n.axis.flipped&&this.flipMarkers(n)},this.markAxis=function(n,r){var i=document.createElement("div");i.classList.add("outlier-sticker","axis","mini",n),i.innerHTML='<div class="expansion"><div class="pill"><div class="icon"></div></div><div class="tick"></div><span class="outlier-value"></div><div class="compression"><div class="pill"><div class="icon"></div></div></div></span>',this.matchYAxisStyle(i),this.setMarkerColor(i,r.markerColor);var a=this.handleMarkerClick.bind(this,n,r,i);return i.addEventListener("click",a),i.addEventListener("touchend",a),new e.Marker({stx:this.stx,xPositioner:"none",yPositioner:"none",label:"expand",permanent:!0,chartContainer:!0,node:i})},this.markOutlier=function(n,r,i){if(n){i||(i={panel:this.stx.panels.chart}),r=r||"high";var a=document.createElement("div");a.classList.add("outlier-sticker","quote","mini",r),a.innerHTML='<div class="pill"><div class="icon"></div></div><span class="outlier-value">'+this.stx.formatYAxisPrice(n.value,i.panel)+"</span>",this.matchYAxisStyle(a),this.setMarkerColor(a,i.markerColor);var o=this.handleMarkerClick.bind(this,r,i,a);return a.addEventListener("click",o),a.addEventListener("touchend",o),new e.Marker({stx:this.stx,xPositioner:"date",yPositioner:r=="high"?"top":"bottom",x:n.quote.DT,panelName:i.panel.name,node:a})}},this.handleMarkerClick=function(n,r,i){i.classList.contains("nano")&&(n="all"),this.setDisplayState(n,r),this.stx.draw()},this.matchYAxisStyle=function(n){if(this.stx.styles.stx_yaxis){var r=this.stx.styles.stx_yaxis;n.style.fontSize=r.fontSize,n.style.fontFamily=r.fontFamily,n.style.color=r.color,n.style.borderColor=r.color}},this.setMarkerColor=function(n,r){if(r!="")for(var i=n.querySelectorAll(".pill"),a=0;a<i.length;a++)i[a].style.backgroundColor=r},this.flipMarkers=function(n){n.isFlipped=n.axis.flipped,Object.keys(n.markers).forEach((function(r,i){var a=r.markers[i].marker,o=r.markers[i].value,c=r.markers[i].type;r.isFlipped?a.node.classList.add("flipped"):a.node.classList.remove("flipped"),c=="quote"&&(o>r.trendMax?r.isFlipped?a.params.yPositioner="bottom":a.params.yPositioner="top":o<r.trendMin&&(r.isFlipped?a.params.yPositioner="top":a.params.yPositioner="bottom"))}).bind(this,n))};var s=this.stx.determineMinMax;this.stx.determineMinMax=function(n,r,i,a,o,c,l,u,h){return h||(h=[]),l&&u&&this.layout.outliers&&h.push(this.outliers.processDataSet.bind(this.outliers)),s.call(this,n,r,i,a,o,c,l,u,h)}}},rf=E=>{var e=typeof _CIQ<"u"?_CIQ:E.CIQ;e.PlotComplementer=e.PlotComplementer||function(t){var s=t.stx,n=e.uniqueID();t.decorator||(t.decorator={});var r=t.decorator.symbol||"_"+n,i=t.decorator.display||" (addl)";s.plotComplementers||(s.plotComplementers=[]),s.plotComplementers.push(this),this.id=t.id||n,this.defaultRenderingParameters={chartType:"line",width:1,opacity:.5},t.renderingParameters&&(this.defaultRenderingParameters=t.renderingParameters);var a=this;function o(u,h,d,f){function A(C){if(C.quoteDriver&&t.quoteFeed){for(var F=0;F<C.quoteDriver.quoteFeeds.length;F++)if(C.quoteDriver.quoteFeeds[F].engine==t.quoteFeed)return;return"err"}}if(A(u)!="err"&&(f||(f=h),!u.isEquationChart(h)&&(d||(d={}),!d.isComparison&&f&&f.indexOf(r)==-1))){var p=f+r,g=h+r,m=u.getRendererFromSeries(f),b=e.extend({display:h+i,name:p,symbol:g,symbolObject:{symbol:g,generator:a.id,masterSymbol:h},overChart:!1,gapDisplayStyle:!0,permanent:!0,panel:d.panel,yAxis:d.yAxis,shareYAxis:!0,loadData:!!a.quoteFeed,dependentOf:m?m.params.name:u.mainSeriesRenderer.params.name},a.renderingParameters);b.color||(b.color=d.color||"auto"),u.addSeries(p,b,function(C,F){C&&u.removeSeries(p,u.chart),u.chart.seriesRenderers[p]&&(u.chart.seriesRenderers[p].params.display=b.display)})}}function c(u,h,d){h&&h.indexOf(r)==-1&&u.removeSeries(h+r,d)}function l(u){u.action=="master"?(u.prevSymbol||(u.prevSymbol=u.symbol),c(u.stx,u.prevSymbol,u.stx.chart),o(u.stx,u.symbol)):u.action=="add-series"?(c(u.stx,u.id,u.stx.chart),o(u.stx,u.symbol,u.parameters,u.id)):u.action=="remove-series"&&c(u.stx,u.id,u.stx.chart)}s.addEventListener("symbolChange",l),s.addEventListener("symbolImport",l),this.resetRenderingParameters=function(){this.renderingParameters=this.defaultRenderingParameters},this.setQuoteFeed=function(u){if(!(!u.quoteFeed||!u.behavior)){var h=e.clone(u.behavior);h.generator=this.id;var d=u.filter,f=function(A){return d&&!d(A)?!1:A.symbolObject.generator==h.generator};s.attachQuoteFeed(u.quoteFeed,h,f),this.quoteFeed=u.quoteFeed}},this.setQuoteFeed(t),this.resetRenderingParameters()}},af={CIQ:j};(typeof __TREE_SHAKE__>"u"||!__TREE_SHAKE__)&&af.CIQ.activateImports(Kd,Wd,Yd,Xd,jd,$d,Gd,Jd,Zd,ef,tf,rf,null);j.UI=j.UI||{};j.UI.keyboardClaims=j.UI.keyboardClaims||new Set;j.UI.activateShadowRoots=void 0;j.UI.shadowComponents=j.UI.shadowComponents||new Map;j.UI.addAttributeOnPropertyChange=!1;j.UI.stxtap=function(E,e,t){E&&(j.installTapEvent(E),typeof t=="string"&&(E=E.querySelector(t)),E&&(E.selectFC&&E.removeEventListener("stxtap",E.selectFC),e&&E.addEventListener("stxtap",e)))};j.UI.addResizeListener=function(E,e){j.UI.getUIManager(E).registerForResize(E),E.resizeHandle=j.resizeObserver(E,e,null)};j.UI.removeResizeListener=function(E){j.UI.getUIManager(E).unregisterForResize(E),j.resizeObserver(E,null,E.resizeHandle)};j.UI.containerExecute=function(E,e,t){var s=t;t&&s.constructor!==Array&&(s=Array.prototype.slice.call(arguments,2));for(var n=E.parentElement;n;){if(n[e]&&n[e].constructor==Function)return n[e].apply(n,s);n=n.parentElement||n.getRootNode().host}return null};j.UI.animatePrice=function(E,e,t,s){E[0]&&(E=E[0]),E.timeoutHandle&&(clearTimeout(E.timeoutHandle),E.timeoutHandle=null),E.classList.remove("cq-stable","cq-up","cq-down"),e>t?E.classList.add("cq-up"):e<t&&E.classList.add("cq-down"),s&&(E.timeoutHandle=setTimeout(function(){E.classList.add("cq-stable"),E.classList.remove("cq-up","cq-down")},0))};j.UI.makeFromTemplate=function(E,e){typeof E=="string"&&(E=document.querySelector(E)),E[0]&&j.UI.$(E)[0]==E[0]&&(E=E[0]);var t=E.content,s;function n(a){return function(o){a.appendChild(o.cloneNode(!0))}}function r(a){return function(o){a===!0?E.parentElement.appendChild(o):a[0]?a[0].appendChild(o):a.appendChild(o)}}t.childNodes.length?s=document.importNode(t,!0):(t=document.createElement("DIV"),Array.from(E.children).forEach(n(t)),s=t.cloneNode(!0));var i=Array.from(s.children);return e&&i.forEach(r(e)),j.UI.$(i)};j.UI.splitMethod=function(E){if(!E)return null;var e=E.indexOf("("),t=E.lastIndexOf(")");if(e==-1||t==-1)return console.log("malformed stxtap attribute: "+E),null;var s=null,n,r=E.substring(0,e),i=r.indexOf(".");i==-1?n=r:(s=r.substring(0,i),n=E.substring(i+1,e));var a=E.substring(e+1,t),o=a.match(/('[^']+'|[^,]+)/g),c=new RegExp("^[0-9]+([,.][0-9]+)?$","g"),l=new RegExp("^\\d+$"),u=[];if(o)for(var h=0;h<o.length;h++){for(var d=o[h];d.charAt(0)==" ";)d=d.substring(1);if(d.indexOf('"')!=-1||d.indexOf("'")!=-1)u.push(d.substring(1,d.length-1));else if(d=="true")u.push(!0);else if(d=="false")u.push(!1);else if(d=="null")u.push(null);else if(l.test(d))u.push(parseInt(d,10));else if(c.test(d))u.push(parseFloat(d));else{for(var f=d.split("."),A=window,p=0;p<f.length;p++)A=A[f[p]];u.push(A)}}return{helperName:s,functionName:n,args:u}};j.UI.observeProperty=function(E,e,t){if(!(!e||!E||!t)){E in e||(e[E]=void 0),j.UI.observables||(j.UI.observables={});var s=j.UI.observables;s[E]||(s[E]=[]);for(var n,r=0;r<s[E].length;r++){var i=s[E][r];i.obj==e&&(n=i)}n||(n={obj:e,value:e[E],listeners:[]},s[E].push(n)),n.listeners.push(t),t({obj:e,property:E,value:n.value}),Object.defineProperty(e,E,{enumerable:!0,configurable:!0,get:function(){return n.value},set:function(a){if(n.value!==a){n.value=a;for(var o={obj:e,property:E,value:a},c=0;c<n.listeners.length;c++)n.listeners[c](o)}}})}};j.UI.unobserveProperty=function(E,e,t){if(!(!E||!e||!j.UI.observables)){var s=j.UI.observables[E];if(s){for(var n=s.length-1;n>=0;n--){var r=s[n];if(r.obj==e){if(t)for(var i=r.listeners,a=i.length-1;a>=0;a--)i[a]===t&&i.splice(a,1);(!t||!r.listeners.length)&&(Object.defineProperty(e,E,{enumerable:!0,configurable:!0,writable:!0,value:r.value}),s.splice(n,1))}}s.length||delete j.UI.observables[E]}}};j.UI.getMyContext=function(E,e){for(e&&(E=j.UI.closestContextContainer(E)||E);E;){if(E.context)return E.context;if(E.CIQ&&E.CIQ.UI)return E.CIQ.UI.context;E=E.parentElement||E.getRootNode().host}return null};j.UI.contextsForEach=function(E,e){var t=((e||{}).ownerDocument||document).querySelectorAll("cq-context,*[cq-context]");t.forEach(function(s){s.CIQ&&s.CIQ.UI&&s.CIQ.UI.context&&E.apply(s.CIQ.UI.context)})};j.UI.release=!1;j.UI.bypassBindings=!1;j.UI.begin=function(E){j.UI.release=!0,setTimeout(function(){Rt.nextTick(),E&&E()},0)};j.UI.activatePluginUI=function(E,e){const{uiContext:t={},container:s}=E,n=t.topNode||s.closest("cq-context")||s,r=e.toLowerCase()+"-feature";n.setAttribute(r,""),j.UI.shadowComponents.forEach((i,a)=>{i===n&&a.setAttribute(r,"")})};j.UI._webcomponents={list:{}};j.UI.addComponentDefinition=function(E,e){const t=!!j.UI.registerComponentsImmediately;j.ensureDefaults(j.UI._webcomponents,{registered:t}),j.UI._webcomponents.list[E]={tag:E,classDefinition:e,registered:t},t&&customElements.define(E,e)};j.UI.registerComponents=function({except:E=[]}={}){const{exceptions:e={}}=j.UI._webcomponents;E.forEach(n=>e[n]=!0),j.UI._webcomponents.exceptions=e;const{list:t}=j.UI._webcomponents;Object.keys(t).filter(n=>!E.includes[n]).forEach(n=>{const r=t[n];r&&!r.registered&&!e[n]&&(customElements.define(n,r.classDefinition),r.registered=!0)})};j.UI.ensureComponentsRegistered=function(){j.UI.registerComponents()};j.UI.components=function(E){return Object.values(j.UI._webcomponents.list).filter(({tag:t,classDefinition:s})=>!E||E===t||E===s.name||E===s)};j.UI.componentMarkup=function(E,e){const t=this.components(E);if(e===void 0){if(!t.length)return;const r=t.map(n);return E?r[0]:r}const[s]=t;if(!s||!s.classDefinition.markup)return;return s.classDefinition.markup=e,n(s);function n(r){const{tag:i,registered:a,classDefinition:{markup:o,name:c}}=r;return{tag:i,name:c,registered:a,markup:o}}};j.UI.markupDependencies=function(){const E=j.UI.componentMarkup(),e={};E.forEach(s=>{if(s.markup)for(let n in j.UI._webcomponents.list){const r=j.UI._webcomponents.list[n];s.markup.indexOf("</"+r.tag+">")>-1&&(e[s.tag]||(e[s.tag]=[]),e[s.tag].push(r.tag))}});const t={};for(let s in e)e[s].forEach(n=>{t[n]=(t[n]||0)+1});return{dependencies:e,timesNeeded:t}};j.UI.addInheritance=function(E,e){for(var t in e.prototype)try{E.prototype[t]=e.prototype[t]}catch{}};var On={};j.UI.supportedInputType=function(E){if(!On[E]){var e=document.createElement("input");e.setAttribute("type",E),On[E]=e.type}return On[E]};j.UI.flattenInheritance=function(E,e){Object.getOwnPropertyNames(e.prototype).forEach(t=>{const s=r=>Object.getOwnPropertyDescriptor(r.prototype,t),n=s(e);n&&!s(E.constructor)&&Object.defineProperty(E,t,n)})};j.UI.Context=function(E,e,t){this.params=t||{},this.stx=E,E&&(E.uiContext=this),this.node=j.UI.$(e),this.topNode=this.node[0],j.isMobile&&e.setAttribute("ciq-mobile","");const s=j.UI.Context.assembleContext(e);this.advertised={};const n=e.CIQ.UI.context=this,r=new Map;s.Components.forEach(i=>{const a=i.closest("cq-context, *[cq-context]")||i.getRootNode();r.has(a)||r.set(a,[]),r.set(a,r.get(a).concat([i.tagName]))}),r.forEach((i,a)=>{a.querySelectorAll(i.join(",")).forEach(function(o){o.context||o.setContextPrivate(n)})})};j.UI.closestContextContainer=function(E,{isWrapper:e,includeSelf:t}={}){const s=e?"cq-context-wrapper":"cq-context,*[cq-context]";return t&&E.matches(s)?E:E&&E!=document&&E!=window&&(E.closest(s)||j.UI.closestContextContainer(E.getRootNode().host,{isWrapper:e}))};j.UI.makeShadow=function(E){j.UI.activateShadowRoots&&(E.attachShadow({mode:"open",delegatesFocus:!0}),E.isShadowComponent=!0),E.root=E.shadowRoot||E};var Or=j.UI.Context;Or.assembleContext=function(E){return E.CIQ||(E.CIQ={}),E.CIQ.UI||(E.CIQ.UI={}),E.CIQ.UI.Components||(E.CIQ.UI.Components=[]),E.CIQ.UI};Or.prototype.changeSymbol=function(E,e){console.log("Please implement CIQ.UI.Context.prototype.changeSymbol")};Or.prototype.setLookupDriver=function(E){this.lookupDriver=E,E.deprecated&&console.warn("Using deprecated Lookup Driver, please see documentation: CIQ.ChartEngine.Driver.Lookup")};Or.prototype.advertiseAs=function(E,e){this.advertised[e]=E};Or.prototype.getAdvertised=function(E){return this.advertised[E]};Or.prototype.setLoader=function(E){this.loader=E};Or.prototype.isModal=function(){return this.stx.openDialog!==""};Or.prototype.isLegendKeyboardActive=function(){const{topNode:E}=this,e=(j.UI.closestContextContainer(E)||E).querySelectorAll("cq-study-legend.ciq-active, cq-menu.cq-comparison-new.stxMenuActive");return!!Array.from(e).find(t=>{if(t.classList.contains("ciq-active")&&t.keyboardNavigation||t.classList.contains("stxMenuActive")&&t.parentElement.keyboardNavigation)return!0})};class Rt extends HTMLElement{constructor(){super(),this.node=j.UI.$(this),this.eventListeners=[],this.constructor.observedAttributes&&this.constructor.observedAttributes.forEach(e=>{const t={get:()=>this[`_${e}`],set:s=>{if(this[`_${e}`]===s)return;let n=this[`_${e}`];this[`_${e}`]=s,typeof n=="object"&&(n=JSON.stringify(n)),s&&typeof s=="object"&&(s=JSON.stringify(s)),j.UI.addAttributeOnPropertyChange||this.hasAttribute(e)?this.getAttribute(e)!==s&&this.setAttribute(e,s):this.attributeChangedCallback(e,n,s)}};Object.defineProperty(this,e,t),e.includes("-")&&Object.defineProperty(this,j.makeCamelCase(e),t),j.UI.addAttributeOnPropertyChange&&this[`_${e}`]!==void 0&&this.setAttribute(e,this[`_${e}`])})}connectedCallback(){!this.isConnected||this.attached||(Rt.buildReverseBindings(this),this.attached=!0)}adoptedCallback(){j.UI.flattenInheritance(this,Rt)}disconnectedCallback(){if(!this.doNotDisconnect){if(this.attached=!1,this.context){for(var e=0;e<this.eventListeners.length;e++)this.context.stx.removeEventListener(this.eventListeners[e]);this.eventListeners=[]}this.copyStylesheetListener&&this.ownerDocument.head.removeEventListener(this.copyStylesheetListener),j.UI.shadowComponents.delete(this)}}attributeChangedCallback(e,t,s){if(this.handlePropertyChange)this.handlePropertyChange(e,t,s);else{if(t===s)return;this[e]=s}}addDefaultMarkup(e,t){const s=e||this;if((i=>i.children.length===0)(s)&&(s.constructor.markup||t)){const i=+new Date,a=t||s.constructor.markup;if(s.ownerDocument!==document){const o=document.createElement("template");o.innerHTML=a,document.body.append(o),s.append(document.importNode(o.content,!0)),o.remove()}else s.innerHTML=a;if(Rt.buildReverseBindings(s),j.debug){const o=+new Date-i;Rt.createMarkupTime=o+(Rt.createMarkupTime||0),console.log("Building markup "+this.constructor.name+" "+(this.getAttribute("cq-name")||"")+" built in="+o,"total="+Rt.createMarkupTime)}if(j.I18N&&j.I18N.localized){const o=j.getFromNS(this,"context.stx.preferences.language");j.I18N.translateUI(o,s)}}const r=this.root||this.shadowRoot||this;s!==r&&[...s.children].forEach(i=>r.append(i))}emitCustomEvent({cause:e,effect:t,action:s="click",detail:n={}}){const r=this.nodeName.toLowerCase().split("-").map(a=>j.capitalize(a)).splice(1).join("");s&&!e&&(e="useraction");const i={bubbles:!0,cancelable:!0,composed:!0,detail:j.extend({emitter:this,action:s,cause:e,effect:t},n)};s&&this.dispatchEvent(new CustomEvent(s,i)),this.dispatchEvent(new CustomEvent(r,i))}channelWrite(e,t,s){const{obj:n,prop:r}=j.UI.BaseComponent.getChannel(e,s,this);n&&(n[r]=t)}channelMergeObject(e,t,s){const{obj:n,prop:r}=j.UI.BaseComponent.getChannel(e,s,this);n&&(n[r]=Object.assign({},n[r],t))}channelRead(e,t){const{obj:s,prop:n}=j.UI.BaseComponent.getChannel(e,t,this);if(s)return s&&s[n]}channelSubscribe(e,t,s){const{obj:n,prop:r}=j.UI.BaseComponent.getChannel(e,s,this);if(!n)return;function i({value:o}){t(o)}j.UI.observeProperty(r,n,i);const a=()=>{j.UI.unobserveProperty(r,n,i)};return(s||this.stx).addEventListener("destroy",a),a}qs(e,t){return t==="thisChart"&&(t=this.getContextContainer()),(t||document).querySelector(e)}qsa(e,t,s){if(t==="thisChart"&&(t=this.getContextContainer()),!s)return[...(t||document).querySelectorAll(e)];const n=[],r=i=>{const a=i.ownerDocument.createTreeWalker(i,NodeFilter.SHOW_ELEMENT);let o=a.currentNode;for(o.matches||(o=a.nextNode());o;)o!==i&&o.matches(e)&&n.push(o),o.shadowRoot&&r(o.shadowRoot),o=a.nextNode()};return r(t||document.body),n}getContextContainer(e){return e?j.UI.closestContextContainer(e,{includeSelf:!0}):(this.contextContainer||(this.contextContainer=j.UI.closestContextContainer(this,{includeSelf:!0})),this.contextContainer)}getChartContainer(e){return Rt.selfOrParentElement(e||this,"ciq-chart")}static getHelper(e,t,s){if(!e)return;if(!t&&(t=e.getAttribute(s)||e[s],!t))return null;let n;const r=t.indexOf("("),i=t.substring(0,r),a=t.indexOf(".");if(r==-1||i.indexOf(".")!=-1){const o=a===-1?t:t.substring(0,a);let{context:c}=e;if(!c){if(!e.isConnected)return null;c=e.context=j.UI.getMyContext(e)}if(!c){const l=j.UI.closestContextContainer(e);return l?(l.bindingInitiated&&console.log("No context attached to "+e.tagName+". A context is required when binding to a helper."),null):(console.log(e.tagName+" is not inside cq-context element. A context element is required when binding to a helper."),null)}n=j.UI.getMyContext(e,!0).getAdvertised(o)}else{const o=t.substring(0,r),c=j.climbUpDomTree(e.parentElement,null,!0);for(let l of c)if(typeof l[o]=="function")return l}return n}static activate(e,t,s,n){if(e.justActivated){t.stopPropagation();return}var r=n?"stxsetget":"stxtap",i=j.UI.splitMethod(e.getAttribute(r));if(i){var a=i.helperName,o=i.functionName;n&&(o="set"+o);var c=[{node:e,e:t,params:s}].concat(i.args);if(a){var l=Rt.getHelper(e,null,r);if(!l[o]){console.log("Method '"+o+"' not found in helper",l);return}l[o].apply(l,c)}else{var u=j.climbUpDomTree(e.parentElement,null,!0);for(var h of u)typeof h[o]=="function"&&h[o].apply(h,c)}e.justActivated=!0,setTimeout(function(){delete e.justActivated},100)}}makeTap(e,t){Rt.makeTap(e,t)}static makeTap(e,t){j.UI.stxtap(e,t),e.selectFC=t}static bindNode(e,t){var s,n=e.getAttribute("stxbind"),r=e.getAttribute("stxtap"),i=e.getAttribute("stxsetget");function a(l){var u,h=n.indexOf("(");u=n.substring(n.indexOf(".")+1),h!==-1&&(u=n.substring(0,h)),l&&l[u](e)}if(e.bindingFC&&(s=Rt.getHelper(e,e.bindingFC,"stxbind"),s&&s.removeObservers&&s.removeObservers(e)),n)if(s=Rt.getHelper(e,n,"stxbind"),s)a(s);else return!1;e.bindingFC=n;function o(l){return function(u){Rt.activate(l,u,t,!1)}}e.tagName=="INPUT"&&(e.type==="text"||e.type==="number")?Rt.inputEntry(e,r&&o(e)):Rt.makeTap(e,r&&o(e));function c(l){function u(){return function(A){Rt.activate(e,A,t,!0)}}if(i){var h=j.UI.splitMethod(i);if(!h){console.log("Syntax error "+i);return}var d=[e].concat(h.args).concat(t),f="get"+h.functionName;l&&l[f]&&l[f].apply(l,d)}e.type==="text"||e.type==="number"?Rt.inputEntry(e,i&&u()):Rt.makeTap(e,i&&u())}if(!n){if(e.bindingFC&&(s=Rt.getHelper(e,e.bindingFC,"stxsetget"),s&&s.removeObservers&&s.removeObservers(e)),i)if(s=Rt.getHelper(e,i,"stxsetget"),s)c(s);else return!1;e.bindingFC=i}return!0}static scheduleForBinding(e,t){Rt.scheduledBindings.push({node:e,parentTag:t}),Rt.timeout&&clearTimeout(Rt.timeout),Rt.timeout=setTimeout(Rt.nextTick,0)}inputEntry(e,t){Rt.inputEntry(e,t),e.inputFC=t}static inputEntry(e,t){e.inputFC&&e.removeEventListener("keypress",e.inputFC),e.addEventListener("keypress",function(s){switch(s.which){case 13:case 9:t()}})}trimInnerHTMLWhitespace(){return(this.root||this).innerHTML.trim()}setupShadow(){const e=this.root;if(this===e)return;this.setAttribute("interactable","");const t=n=>{[...n].reverse().forEach(r=>{if(r.tagName==="LINK"){const i=document.createElement("link"),{type:a,media:o,href:c}=r;Object.assign(i,{rel:"stylesheet",type:a,media:o,href:c}),i.onload=()=>{this.resize&&setTimeout(this.resize.bind(this))},i.setAttribute("copied",""),e.insertBefore(i,e.firstChild)}else if(r.tagName==="STYLE"){const i=r.cloneNode(!0);i.setAttribute("copied",""),e.insertBefore(i,e.firstChild)}})};e.querySelectorAll("link[copied], style[copied]").forEach(n=>n.remove()),t(this.ownerDocument.head.querySelectorAll("link:not([no-shadowdom-import]), style:not([no-shadowdom-import])")),this.copyStylesheetListener||(this.copyStylesheetListener=this.ownerDocument.head.addEventListener("stylesheetload",n=>{t([n.detail.link])}));const s=j.UI.closestContextContainer(this);j.UI.shadowComponents.set(this,s),this.getAttributeNames().filter(n=>/-feature$/.test(n)).forEach(n=>this.removeAttribute(n)),s.getAttributeNames().filter(n=>/-feature$/.test(n)).forEach(n=>this.setAttribute(n,s.getAttribute(n))),s.currentTheme&&this.classList.add(s.currentTheme),s.classList.contains("full-screen")&&this.classList.add("full-screen")}addClaim(e){j.UI.keyboardClaims.add(e)}removeClaim(e){j.UI.keyboardClaims.delete(e)}static buildReverseBindings(e){if(!j.UI.bypassBindings){var t=function(r){if(r.hasAttribute("stxbind")||r.hasAttribute("stxtap")||r.hasAttribute("stxsetget"))return NodeFilter.FILTER_ACCEPT},s=e.ownerDocument.createNodeIterator(e,NodeFilter.SHOW_ELEMENT,j.isIE?t:{acceptNode:t}),n;for(n=s.nextNode();n;)n.handlesBindings||Rt.scheduleForBinding(n,e),n=s.nextNode()}}static nextTick(){if(!j.UI.release)return;clearTimeout(Rt.timeout);const{scheduledBindings:e}=Rt;e.reverse().forEach(t=>{const{node:s}=t;(!s.ciqAlreadyBound||s.getAttribute("stxbind")!==s.bindingFC)&&(s.ciqAlreadyBound=Rt.bindNode(s,{parent:t.parentTag}))}),Rt.scheduledBindings=e.filter(t=>!t.node.ciqAlreadyBound)}static selfOrParentElement(e,t){let s=e;for(;s;){if(s.classList.contains(t)||s.getAttribute(t)!==null||s.nodeName.toLowerCase()===t)return s;s=s.parentElement}}static toPropAndObject(e,t){const s=e.split("."),n=s.pop(),r=s.reduce((i,a)=>i[a]!==void 0?i[a]:i[a]={},t);return{prop:n,obj:r}}static getChannel(e,t,s){if(!e)return console.warn("Missing channel path"),{};if(!t&&!s)return console.warn("Chart engine not provided while retrieving ",e),{};!t&&!s.stx&&(s.container||(s.container=j.UI.getMyContext(s)),s.stx=s.container.stx);const{obj:n,prop:r}=Rt.toPropAndObject(e,t||s.stx);return{obj:n,prop:r}}findFocused(e){return Array.from(e||[]).filter(t=>t.matches("[cq-focused]")||t===document.activeElement)}findKeyboardActive(e){return Array.from(e).filter(t=>t.matches("[cq-keyboard-active]"))}focusNextItem(e,t,s){if(!e.length)return;const n=this.findFocused(e);let r=-1;if(n.length)for(r=0;r<e.length&&e[r]!==n[0];r++);const i=r;if(t)do{if(r--,r<0)if(s)r=e.length-1;else break;if(r==i)break}while(!j.trulyVisible(e[r])||e[r].getAttribute("keyboard-selectable")==="false");else do{if(r++,r>=e.length)if(s)r=0;else break;if(r==i)break}while(!j.trulyVisible(e[r])||e[r].getAttribute("keyboard-selectable")==="false");if(r>-1&&r<e.length&&e[r]!==n[0])return this.removeFocused(e),this.focusItem(e[r]),e[r]}focusItem(e){this.scrollToElement&&this.scrollToElement(e),e.setAttribute("cq-focused","true"),this.activeElementName=e.getAttribute("name"),this.highlightItem(e),e.tagName=="INPUT"||e.tagName=="TEXTAREA"?this.clickItem(e):e.focus()}removeFocused(e){e||(e=this.qsa?this.qsa("[cq-focused]",this,!0):this.querySelectorAll("[cq-focused]")),[...e].forEach(t=>{t.removeAttribute("cq-focused"),t.blur()})}highlightItem(e,t){if(!e||!this.keyboardNavigation||!this.keyboardNavigation.highlightPosition)return;const s=this.keyboardNavigation,n=()=>{const{x:r,y:i,width:a,height:o}=e.getBoundingClientRect();s.highlightPosition({element:e,position:{x:r,y:i,width:a,height:o}})};clearTimeout(this.highlightDelayTimeout),this.highlightDelayTimeout=setTimeout(n,t||0)}highlightFocusedItem(e){let t=this.findFocused(e);t.length&&this.highlightItem(t[0])}clickItem(e,t,s){if(e)return e.focus(),e.setAttribute("cq-keyboard-active","true"),s&&(e.keyboardOriginationElement=s),e.selectFC?e.selectFC.call(e,t):e.dispatchEvent(new Event("click",{bubbles:!0,cancelable:!0,composed:!0})),!0}deactivateItem(e){e.blur(),e.removeAttribute("cq-keyboard-active")}clickFocusedItem(e,t){let s=this.findFocused(e);s.length&&this.clickItem(s[0],t)}}Rt.scheduledBindings=[];j.UI.BaseComponent=Rt;class hn extends Rt{constructor(){super(),this.injections=[]}connectedCallback(){!this.isConnected||this.attached||(this.setContextHolder(),super.connectedCallback())}adoptedCallback(){super.adoptedCallback(),j.UI.flattenInheritance(this,hn)}disconnectedCallback(){const e=j.UI.closestContextContainer(this,{isWrapper:!0});if(!(this.doNotDisconnect||this.parentElement&&this.parentElement.doNotDisconnect||e&&e.doNotDisconnect)){if(this.attached=!1,this.context){var t;for(t=0;t<this.injections.length;t++)this.context.stx.removeInjection(this.injections[t]);for(this.injections=[],t=0;t<this.eventListeners.length;t++)this.context.stx.removeEventListener(this.eventListeners[t]);this.eventListeners=[]}this.timeout&&(clearTimeout(this.timeout),this.timeout=null),this.marker&&this.marker.remove(),this.marker=null,j.UI.shadowComponents.delete(this)}}setContextHolder(){let e=j.UI.closestContextContainer(this);if(!e){const n=j.climbUpDomTree(this,"cq-dialog",!0)[0];n&&(e=n.firstElementChild.context||n.context)}if(!e){this.parentElement&&console.log("No cq-context found for "+this.tagName);return}var t=e.topNode||e,s=Or.assembleContext(t);s.Components.push(this),s.context&&this.setContextPrivate(s.context)}setContext(e){}setContextPrivate(e){this.context=e,this.uiManager=j.UI.getUIManager(e.topNode),this.matches("cq-marker,[cq-marker]")&&!this.convertedToMarker&&(this.convertedToMarker=!0,j.I18N&&j.I18N.localized&&j.I18N.translateUI(e.stx.preferences.language,this),this.marker=new j.Marker({stx:e.stx,node:this,xPositioner:"none",yPositioner:"none",label:"component",permanent:!0})),this.timeout=setTimeout(function(t,s){return function(){t.setContext(s),t.timeout=null,t.emitCustomEvent({effect:"contextinitialized",action:null,cause:"timeout"})}}(this,e))}addInjection(e,t,s){this.injections.push(this.context.stx[e](t,s))}}j.UI.ContextTag=hn;class Gn extends hn{constructor(){super()}connectedCallback(){!this.isConnected||this.attached||(this.onpointerover=function(){this.modalBegin()},this.onpointerout=function(){this.modalEnd()},super.connectedCallback())}adoptedCallback(){super.adoptedCallback(),j.UI.flattenInheritance(this,Gn)}modalBegin(){this.context&&this.context.stx.modalBegin()}modalEnd(){this.context&&(this.uiManager.activeMenuStack.length||this.context.stx.modalEnd())}}j.UI.ModalTag=Gn;class Jn extends Rt{constructor(){super()}adoptedCallback(){super.adoptedCallback(),j.UI.flattenInheritance(this,Jn)}close(){var e=this.closest("cq-dialog");e&&e.close(),Array.from(this.querySelectorAll("cq-swatch")).forEach(function(t){t.colorPicker&&t.colorPicker.close()})}naturalTabElements(e){return e||(e=this),Array.from(e.querySelectorAll("input, button, select, [tabindex='0']"))}open(e){e&&e.context&&this.setContext(e.context);var t=this.tagName.toLowerCase(),s=this.closest("cq-dialog");s&&(s.addActiveAttribute(t),s.open(e))}setContext(e){this.node.find("[stxtap],[stxbind],[stxsetget]").each(function(){this.context=e}),this.context=e}}j.UI.DialogContentTag=Jn;j.UI.defaultSwatchColors=["#8ec648","#00afed","#ee652e","#912a8e","#fff126","#e9088c","#ea1d2c","#00a553","#00a99c","#0056a4","#f4932f","#0073ba","#66308f","#323390"];j.UI.pickSwatchColor=function(E,e){if(!E.context||!e)return;const{stx:t}=E.context,{chart:s,crossSection:n}=t,{usedColors:r=new Set}=E;let i=e.style.backgroundColor;if(n)for(const c in n.curves){let l=n.curves[c];r.add(j.convertToNativeColor(l.color))}else for(const c in s.series){var a=s.series[c];a.parameters.isComparison&&(r.add(j.convertToNativeColor(a.parameters.color)),r.add(j.colorToHex(a.parameters.color)))}if(E.usedColors||(E.usedColors=r),!(i!==""&&i!=="initial"&&!r.has(i)))for(var o=0;o<E.swatchColors.length;o++){const c=E.swatchColors[o];if(!r.has(c)){e.style.background=c,e.value=c;return}}};j.UI.Helper=function(E,e){this.node=E,this.context=e};j.UI.Helper.prototype.addInjection=function(E,e,t){this.injections=this.injections||[],this.injections.push(this.context.stx[E](e,t))};j.UI.Helper.prototype.addObserver=function({node:E,base:e,path:t,listener:s}){const n=e instanceof j.ChartEngine,{obj:r,member:i}=j.deriveFromObjectChain(e,t);j.UI.observeProperty(i,r,s),this.observers=this.observers||[],this.observers.push({node:E,base:e,path:t,listener:s,isEngine:n}),n&&e.addEventListener("destroy",()=>j.UI.unobserveProperty(i,r,s))};j.UI.Helper.prototype.removeObservers=function(E){this.observers&&(this.observers.filter(e=>e.node===E).forEach(e=>{const{obj:t,member:s}=j.deriveFromObjectChain(e.base,e.path);j.UI.unobserveProperty(s,t,e.listener)}),this.observers=this.observers.filter(e=>e.node!==E))};j.UI.Helper.prototype.changeContext=function(E){this.stx&&(this.stx=E.stx),this.context&&(this.context=E),this.implementation&&this.implementation.stx&&(this.implementation.stx=E.stx),(this.observers||[]).forEach(s=>{const{path:n,listener:r,isEngine:i}=s;e(s.base,n,r),t(i?E.stx:E,n,r)}),this.stx&&(this.stx=E.stx),this.context&&(this.context=E);function e(s,n,r){let{obj:i,member:a}=j.deriveFromObjectChain(s,n);j.UI.unobserveProperty(a,i,r)}function t(s,n,r){let{obj:i,member:a}=j.deriveFromObjectChain(s,n);j.UI.observeProperty(a,i,r)}};j.UI.Helper.prototype.destroy=function(){if(this.injections)for(var E=0;E<this.injections.length;E++)this.context.stx.removeInjection(this.injections[E]);this.injections=[],(this.observers||[]).forEach(({base:e,path:t,listener:s})=>{const{obj:n,member:r}=j.deriveFromObjectChain(e,t);j.UI.unobserveProperty(r,n,s)}),this.observers=[]};j.UI.HeadsUp=function(E,e,t){this.params=t||{},typeof this.params.autoStart>"u"&&(this.params.autoStart=!0),this.node=E,E.remove(),this.context=e,this.injections=[],this.maxVolume={lastCheckDate:null,value:0},this.params.autoStart&&this.begin()};j.inheritsFrom(j.UI.HeadsUp,j.UI.Helper);j.UI.HeadsUp.prototype.begin=function(){if(!this.injections.length&&j.Marker){j.Marker.HeadsUp||(j.Marker.HeadsUp=function(e,t){this.className||(this.className="CIQ.Marker.HeadsUp"),j.Marker.call(this,e),this.prevTick=null,this.showClass=t},j.inheritsFrom(j.Marker.HeadsUp,j.Marker,!1),j.Marker.HeadsUp.placementFunction=function(e){function t(m,b,C,F){return Math.round(C-m.pixelFromPrice(F,b))}var s=e.panel,n=s.chart,r=e.stx,i=r.chart.highLowBars;e.showClass||(e.showClass="stx-show");for(var a=0;a<e.arr.length;++a){var o=e.arr[a],c=o.node,l=c.classList;if(s.hidden||!r.insideChart){l.remove(e.showClass);return}if(o.params.x<0||o.params.x>=n.dataSet.length){l.remove(e.showClass);return}if(r.currentVectorParameters.vectorType){l.remove(e.showClass);return}var u=n.dataSet[o.params.x],h=r.pixelFromTick(o.params.x);if(!u||h<n.left||h>n.right){l.remove(e.showClass);return}if(!u[r.chart.defaultPlotField]&&u[r.chart.defaultPlotField]!==0){l.remove(e.showClass);return}l.add(e.showClass);var d=j.elementDimensions(c);o.clientWidth||(o.clientWidth=d.width),o.clientHeight||(o.clientHeight=d.height),o.clientWidth>h?(l.remove("stx-left"),l.add("stx-right"),Object.assign(o.node.style,{left:h+"px",right:"auto"})):(l.add("stx-left"),l.remove("stx-right"),Object.assign(o.node.style,{right:r.chart.canvasWidth-h+"px",left:"auto"}));var f,A=o.params.chartContainer?r.chart.canvasHeight:s.bottom;i?f=t(r,s,A,r.getBarBounds(u)[s.yAxis.flipped?"low":"high"]):f=t(r,s,A,u[r.chart.defaultPlotField]);var p=A-f-o.clientHeight;p<0?(l.add("stx-below"),f=(i?t(r,s,A,r.getBarBounds(u).low):f)-o.clientHeight):l.remove("stx-below");var g=f+"px";o.node.style.bottom!=g&&(o.node.style.bottom=g)}}),this.context.stx.translateUI&&this.context.stx.translateUI(this.node);var E;this.params.followMouse?(this.node.style.top="auto",E={stx:this.context.stx,label:"headsup",xPositioner:"bar",chartContainer:!0,x:0,node:this.node},this.marker=new j.Marker.HeadsUp(E,this.params.showClass),this.addInjection("append","handleMouseOut",function(e){return function(){e.followMouse(-1)}}(this))):this.params.staticNode||(Object.assign(this.node.style,{top:"",left:""}),E={stx:this.context.stx,label:"headsup",xPositioner:"none",yPositioner:"none",chartContainer:!1,node:this.node},j.extend(E,this.params),this.marker=new j.Marker(E),this.marker.makeDraggable()),this.calculateMaxVolume(),this.addInjection("prepend","headsUpHR",function(e){return function(){e.position()}}(this)),this.addInjection("append","createXAxis",function(e){return function(){e.position()}}(this)),this.addInjection("append","createDataSet",function(e){return function(t,s,n){e.calculateMaxVolume(n.appending)}}(this))}};j.UI.HeadsUp.prototype.end=function(){this.marker&&this.marker.remove(),this.destroy(),this.marker=null};j.UI.HeadsUp.prototype.calculateMaxVolume=function(E){E||(this.maxVolume={lastCheckDate:null,value:0});var e=this.context.stx.chart.dataSet;if(!(!e||!e.length)){for(var t=e.length-1;t>=0;t--){var s=e[t];if(s.DT<this.maxVolume.lastCheckDate)break;s.Volume>this.maxVolume.value&&(this.maxVolume.value=s.Volume)}this.maxVolume.lastCheckDate=e[e.length-1].DT}};j.UI.HeadsUp.prototype.position=function(){var E=this.context.stx,e=E.barFromPixel(E.cx);this.tick=E.tickFromPixel(E.cx);var t=E.chart.xaxis[e],s=E.chart.defaultPlotField,n=E.chart.highLowBars;(!s||n)&&(s="Close");var r=this.node,i=this;function a(c){var l="",u=E.layout.chartScale,h=E.chart.panel,d=E.chart.yAxis;return d.originalPriceFormatter&&d.originalPriceFormatter.func?l=d.originalPriceFormatter.func(E,h,c):d.priceFormatter&&u!="percent"&&u!="relative"?l=d.priceFormatter(E,h,c):l=E.formatYAxisPrice(c,h),l.replace(/(\.[0-9]*[1-9])0+$|\.0*$/,"$1")}function o(){var c=j.UI.$(r);i.timeout=null,c.find("cq-hu-price").text("N/A"),c.find("cq-hu-open").text("N/A"),c.find("cq-hu-close").text("N/A"),c.find("cq-hu-high").text("N/A"),c.find("cq-hu-low").text("N/A"),c.find("cq-hu-date").text("N/A"),c.find("cq-hu-volume").text("N/A"),c.find("cq-volume-rollup").text("");function l(g){return j.isValidNumber(parseFloat(g))?g:"N/A"}if(t&&t.data){var u=j.clone(t.data);u.Open===void 0&&(u.Open=u.Close),u.High===void 0&&(u.High=Math.max(u.Open,u.Close)),u.Low===void 0&&(u.Low=Math.min(u.Open,u.Close)),c.find("cq-hu-open").text(a(l(u.Open))),c.find("cq-hu-price").text(a(l(u[s]))),c.find("cq-hu-close").text(a(l(u.Close))),c.find("cq-hu-high").text(a(l(u.High))),c.find("cq-hu-low").text(a(l(u.Low)));var h=j.condenseInt(u.Volume),d=h.charAt(h.length-1);d>"9"&&(h=h.substring(0,h.length-1),c.find("cq-volume-rollup").text(d.toUpperCase())),c.find("cq-hu-volume").text(h);var f=u.displayDate;f||(f=u.DT),E.internationalizer?j.ChartEngine.isDailyInterval(E.layout.interval)?c.find("cq-hu-date").text(E.internationalizer.yearMonthDay.format(f)):c.find("cq-hu-date").text(E.internationalizer.yearMonthDay.format(f)+" "+E.internationalizer.hourMinute.format(f)):j.ChartEngine.isDailyInterval(E.layout.interval)?c.find("cq-hu-date").text(j.mmddyyyy(j.yyyymmddhhmm(f))):c.find("cq-hu-date").text(j.mmddhhmm(j.yyyymmddhhmmssmmm(f)));var A=c.find("cq-volume-visual");if(A.length){var p=i.maxVolume.value?u.Volume/i.maxVolume.value:0;A.css({width:Math.round(p*100)+"%"})}}}(this.tick!=this.prevTick||t&&+t.DT==+E.chart.endPoints.end)&&(this.timeout&&clearTimeout(this.timeout),this.timeout=setTimeout(o,0)),this.prevTick=this.tick,this.params.followMouse&&(E.openDialog&&(this.tick=-1),this.followMouse(this.tick))};j.UI.HeadsUp.prototype.followMouse=function(E){this.marker.params.x=E;var e=this;e.marker.render()};j.UI.DrawingEdit=lr;function lr(E,e){var t=e.stx,s=j.UI.$(E||e.topNode);if(this.node=s[0],this.context=e,this.editing=null,this.drawingContext=e.topNode.querySelector("cq-drawing-context")||this.node.ownerDocument.querySelector("cq-drawing-context"),this.cvpController=s.find("cq-cvp-controller"),this.toolbar=s.find("cq-toolbar"),this.toolbar.length||(this.toolbar=s.find("cq-drawing-settings")),!this.toolbar.length){const i=this.node.parentElement.closest("cq-context");i&&(this.toolbar=j.UI.$(i).find("cq-drawing-settings"))}var n=this;Array.from(this.toolbar).forEach(function(i){var a=nf(t,n);i.addEventListener("change",a),t.addEventListener("destroy",function(){i.removeEventListener("change",a)})}),this.count=t.drawingObjects.length,e.advertiseAs(this,"DrawingEdit"),t.addEventListener("drawing",sf(this)),t.addEventListener("drawingEdit",of(this));const r=(e.config.channels||{}).drawing||"channel.drawing";j.UI.BaseComponent.prototype.channelSubscribe(r,i=>{i||this.setDrawingEditMode()},t),s.find("cq-toolbar .ciq-drawing-edit-only").each(function(i,a){a.querySelector(".ciq-btn")&&["mouseenter","mouseleave"].forEach(function(o){a.addEventListener(o,lf(t,n))})})}j.inheritsFrom(lr,j.UI.Helper);function nf(E,e){return function(){if(E.activeDrawing&&E.editingAnnotation&&(E.activeDrawing.copyConfig(),E.activeDrawing.adjust(),E.draw()),!!e.editing){if(e.editing.name!==E.currentVectorParameters.vectorType){e.endEdit(null,"tool");return}e.editing.copyConfig(),e.editing.adjust(),E.draw(),E.changeOccurred("vector")}}}function sf(E){return function(e){var t=e.drawings.length;E.count!==t&&(E.endEdit(null,"count"),E.count=t)}}function of(E){return function(e){e.forceEdit===!0?(E.endEdit(null,"edit"),E.showToolbar(e.drawing),E.beginEdit(e.drawing)):e.forceText===!0?E.text(e.drawing):E.showContext(e)}}function lf(E,e){return function(t){var s=t.type==="mouseenter";e.editing&&e.editing.highlighted!==s&&(e.editing.highlighted=s,E.draw())}}lr.prototype.showContext=function(E){E.context=this.context,E.x=j.ChartEngine.crosshairX,E.y=j.ChartEngine.crosshairY,this.count=this.context.stx.drawingObjects.length;const{context:e}=this;if(e.config){const{channelWrite:t}=j.UI.BaseComponent.prototype,s=(e.config.channels||{}).dialog||"channel.dialog";t(s,{type:"drawingContext",params:E},e.stx)}else this.drawingContext&&this.drawingContext.open&&this.drawingContext.open(E)};lr.prototype.getToolActivator=function(E){var e=this.toolbar.find('cq-item[cq-tool="'+E+'"]');return e.length||(e=this.toolbar.find(`cq-item[stxtap="tool('`+E+`')"]`)),{node:e[0]}};lr.prototype.showToolbar=function(E){var e=this,t=e.getToolActivator(E.name);e.node,this.toolbar.each(function(){var s=E.lineWidth,n=E.pattern,r=E.parameters&&E instanceof j.Drawing.fibonacci;r&&(s=E.parameters.fibs[0].parameters.lineWidth,n=E.parameters.fibs[0].parameters.pattern),this.tool(t,E.name),this.sync(Object.assign({},E,{lineWidth:s,pattern:n,annotation:{font:E.font?j.clone(E.font):{}},currentColor:E.color})),this.dirty(!1),r&&(this.context.stx.currentVectorParameters.fibonacci=j.clone(E.parameters)),E.name=="measurementline"&&(this.context.stx.currentVectorParameters.measurementline=j.clone(E.parameters)),E.name==="volumeprofile"&&(this.context.stx.currentVectorParameters.volumeProfile.priceBuckets=E.priceBuckets)})};lr.prototype.setDrawingEditMode=function(E){const{context:e,context:{stx:t}}=this;t.chart.canvas&&t.chart.canvas.classList.toggle("cq-editing-drawing",!!E);const s=e.topNode.multiChartContainer;if(s&&!s.context)return;(s?s.getCharts():[t]).forEach(i=>{i.editingDrawing=E});const r=s||e.topNode;E?(this.clickListener=i=>{const a=i.target.closest("cq-drawing-settings")||i.target.closest("cq-drawing-palette")||i.target.closest("cq-dialog-overlay")||i.target.closest("cq-color-picker"),o=t.uiContext.isModal();!a&&!o&&this.endEdit({},"close")},setTimeout(()=>{r.addEventListener("click",this.clickListener)})):this.clickListener&&(r.removeEventListener("click",this.clickListener),this.clickListener=null)};lr.prototype.beginEdit=function(E){this.editing=E,this.beforeEdit=E.serialize(),this.toolbar.attr("cq-drawing-edit",E.name),this.setDrawingEditMode(E),this.context.stx.draw();var e=new CustomEvent("drawing-edit-begin",{bubbles:!0,cancelable:!0,detail:{drawing:E,tool:E.name}});this.node.dispatchEvent(e)};lr.prototype.endEdit=function(E,e){const t=function(r,i){const a=this.context.stx;let o=null,c=null;if(this.editing){c=this.editing.name,o=new CustomEvent("drawing-edit-end",{bubbles:!0,cancelable:!0,detail:{action:i,drawing:this.editing,tool:c}});const l=a.drawingObjects.indexOf(this.editing),u=a.exportDrawings();l>-1&&this.beforeEdit&&(u[l]=this.beforeEdit,a.undoStamp(u,a.exportDrawings())),l===-1&&(i="close"),i==="close"&&this.editing.highlighted&&(this.editing.highlighted=!1,a.draw())}this.editing=null,this.setDrawingEditMode(),a.draw(),this.beforeEdit=null,this.toolbar.attr("cq-drawing-edit","none"),i==="close"&&(this.toolbar.each(function(){this.tool({},"notool")}),a.changeVectorType("")),o&&this.node.dispatchEvent(o)},{multiChartContainer:s}=this.node;(s?s.getCharts().map(r=>r.uiContext.getAdvertised("DrawingEdit")):[this]).forEach(r=>{t.call(r,E,e)})};lr.prototype.edit=function(){if(this.drawingContext){const E=this.drawingContext.drawing,e=this.context.topNode,t=(e.querySelector("cq-drawing-context")||e.ownerDocument.querySelector("cq-drawing-context")).parentNode;let s=e.querySelector("cq-drawing-settings")||e.ownerDocument.querySelector("cq-drawing-settings");!s&&e.multiChartContainer&&(s=e.multiChartContainer.querySelector("cq-drawing-settings"));const n={left:t.offsetLeft,top:t.offsetTop};if(this.drawingContext.close(),this.node&&this.node.multiChartContainer){const i=this.node.multiChartContainer.context.getAdvertised("DrawingEdit");this.endEdit(null,"edit"),i.showToolbar(E,n),this.beginEdit(E)}else this.endEdit(null,"edit"),this.showToolbar(E,n),this.beginEdit(E);const r=this.node.multiChartContainer||this.node;if(s&&!/break.*sm\b/.test(r.className)){s.docked==="true"&&(s.restoreDocked=!0);let{left:i,top:a}=n;(E.name==="annotation"||E.name==="callout")&&(a+=s.clientHeight/3),s.detach(i,a)}this.drawingContext.postProcess&&this.drawingContext.postProcess("editsettings")}};lr.prototype.text=function(E){let e=this.drawingContext;if(e){e.close();let t=E instanceof j.Drawing?E:e.drawing;this.endEdit(null,"text"),t.edit&&t.edit(null,!0),e.postProcess&&e.postProcess("edittext")}};lr.prototype.clone=function(){var E=this,e=this.context.stx;if(this.endEdit(null,"clone"),this.drawingContext){this.drawingContext.close();var t=this.drawingContext.drawing,s=new j.Drawing[t.name],n=t.serialize();s.reconstruct(e,n),t.name=="measurementline"&&(t.repositioner={action:"move",p0:s.p0,p1:s.p1,tick:s.p1[0],value:s.p1[1]}),s.repositioner=t.repositioner,s.highlighted=!0,t.highlighted=!1,E.count+=1,e.addDrawing(s),e.activateRepositioning(s),this.drawingContext.postProcess&&this.drawingContext.postProcess("clone")}};lr.prototype.reorderLayer=function(E,e){var t=this.context.stx;if(this.endEdit(null,"reorderLayer"),this.drawingContext){this.drawingContext.close();var s=t.drawingObjects.length-1,n=t.drawingObjects.indexOf(this.drawingContext.drawing),r=NaN;if(n===-1)return;switch(e){case"up":n<s&&(r=n+1);break;case"down":n>0&&(r=n-1);break;case"top":n<s&&(r=s);break;case"bottom":n>0&&(r=0);break}if(r!==r)return;var i=t.exportDrawings();t.drawingObjects.splice(n,1),t.drawingObjects.splice(r,0,this.drawingContext.drawing),t.undoStamp(i,t.exportDrawings()),t.draw(),t.changeOccurred("vector"),this.drawingContext.postProcess&&this.drawingContext.postProcess("layer"+e)}};lr.prototype.remove=function(){var E=this,e=this.context.stx;if(this.endEdit(null,"remove"),this.drawingContext){if(this.drawingContext.drawing.permanent)return;var t=e.exportDrawings();E.count-=1,e.removeDrawing(this.drawingContext.drawing),e.undoStamp(t,e.exportDrawings()),this.drawingContext.close(),this.drawingContext.postProcess&&this.drawingContext.postProcess("remove")}};j.UI.StudyEdit=function(E,e){const t=this instanceof j.UI.StudyEdit?this:Object.create(j.UI.StudyEdit.prototype);t.context=e,t.node=E||e.topNode,t.contextDialog=[];for(var s=t.node.ownerDocument.querySelectorAll("cq-study-context"),n=0;n<s.length;n++)t.contextDialog.push(s[n]);return e.advertiseAs(t,"StudyEdit"),t.initialize(),t};j.inheritsFrom(j.UI.StudyEdit,j.UI.Helper);j.UI.StudyEdit.prototype.remove=function({params:E}){const{sd:e}=this.params;j.Studies.removeStudy(this.params.stx,this.params.sd),this.contextDialog.forEach(function(t){t.close&&t.close()}),E.parent.postProcess&&E.parent.postProcess("remove",e)};j.UI.StudyEdit.prototype.edit=function({params:E}){this.contextDialog.forEach(function(e){e.close&&e.close()}),this.editPanel(this.params),E.parent.postProcess&&E.parent.postProcess("edit",this.params.sd)};j.UI.StudyEdit.prototype.editPanel=function(E){const{stx:e,config:t}=this.context;E.context=this.context,E.x=null,E.y=null;const{channelWrite:s}=j.UI.BaseComponent.prototype;if(t){const n=(t.channels||{}).dialog||"channel.dialog";s(n,{type:"study",params:E},e)}else E.context.topNode.ownerDocument.querySelector("cq-study-dialog").open(E)};j.UI.StudyEdit.prototype.editOverlay=function(E){if(this.params=E,E.context=this.context,E.forceEdit){this.editPanel(E);return}const{context:e}=this;if(E.x=j.ChartEngine.crosshairX,E.y=j.ChartEngine.crosshairY,e.config){const{channelWrite:t}=j.UI.BaseComponent.prototype,s=(e.config.channels||{}).dialog||"channel.dialog";t(s,{type:"studyContext",params:E},e.stx)}else this.contextDialog.forEach(t=>{t.open&&t.open(E)})};j.UI.StudyEdit.prototype.initialize=function(){var E=this.context.stx,e=this;function t(s){return function(){s.apply(e,arguments)}}E.addEventListener("studyOverlayEdit",t(e.editOverlay)),E.addEventListener("studyPanelEdit",t(e.editPanel))};j.UI.Layout=function(E,e){const t=this instanceof j.UI.Layout?this:Object.create(j.UI.Layout.prototype);return t.params=e||{},t.params.activeClassName||(t.params.activeClassName="ciq-active"),t.context=E,E.advertiseAs(t,"Layout"),t};j.inheritsFrom(j.UI.Layout,j.UI.Helper);j.UI.Layout.prototype.setCheckedState=function(E,e){E.classList[e?"add":"remove"](this.params.activeClassName),E.ariaChecked=e?"true":"false"};j.UI.Layout.prototype.getChartType=function(E,e){const{stx:t}=this.context;typeof e!="string"&&(e=E.dataset.value||"");const s=n=>{const r=n.obj;r.aggregationType&&r.aggregationType!="ohlc"?this.setCheckedState(E,e===r.aggregationType):this.setCheckedState(E,e===r.chartType)};this.addObserver({node:E,base:t,path:"layout.chartType",listener:s}),this.addObserver({node:E,base:t,path:"layout.aggregationType",listener:s})};j.UI.Layout.prototype.setChartType=function(E,e){var t={heikinashi:!0,kagi:!0,linebreak:!0,pandf:!0,rangebars:!0,renko:!0};typeof e!="string"&&(e=E.node.dataset.value||""),t[e]?this.context.stx.setAggregationType(e):this.context.stx.setChartType(e)};j.UI.Layout.prototype.getChartScale=function(E,e){const t=s=>{this.setCheckedState(E,s.value==e)};this.addObserver({node:E,base:this.context.stx,path:"layout.chartScale",listener:t})};j.UI.Layout.prototype.setChartScale=function(E,e){var t=this.context.stx,s=t.layout.chartScale;s==e?t.setChartScale(null):(!s||s=="linear")&&t.setChartScale(e)};j.UI.Layout.prototype.getFlippedChart=function(E){const e=t=>{this.setCheckedState(E,t.value)};this.addObserver({node:E,base:this.context.stx,path:"layout.flipped",listener:e})};j.UI.Layout.prototype.setFlippedChart=function(E){var e=this.context.stx;e.flipChart(!e.layout.flipped)};j.UI.Layout.prototype.getExtendedHours=function(E){const e=t=>{this.setCheckedState(E,t.value)};this.addObserver({node:E,base:this.context.stx,path:"layout.extended",listener:e})};j.UI.Layout.prototype.setExtendedHours=function(E){const{stx:e,loader:t,stx:{extendedHours:s,chart:{market:{market_def:n,sessions:r}}}}=this.context;if(e.layout.extended=!e.layout.extended,e.changeOccurred("layout"),e.layout.extended&&!(n&&r.length)&&j.alert("There are no Extended Hours for this instrument."),s){const i=e.drawingObjects.map(a=>a.serialize());t&&t.show(!0),s.set(e.layout.extended,null,()=>{s.filter||(e.importDrawings(i),e.draw()),t&&t.hide()})}};j.UI.Layout.prototype.getAnimation=function(E){const e=t=>{this.setCheckedState(E,t.value)};this.addObserver({node:E,base:this.context.stx,path:"layout.animation",listener:e})};j.UI.Layout.prototype.setAnimation=function(E){const{stx:e}=this.context;e.layout.animation=!e.layout.animation,e.changeOccurred("layout")};j.UI.Layout.prototype.getRangeSlider=function(E){const e=t=>{this.setCheckedState(E,t.value)};this.addObserver({node:E,base:this.context.stx,path:"layout.rangeSlider",listener:e})};j.UI.Layout.prototype.setRangeSlider=function(E){var e=this.context.stx;e.layout.rangeSlider=!e.layout.rangeSlider,e.slider&&e.slider.display(e.layout.rangeSlider),e.changeOccurred("layout")};j.UI.Layout.prototype.getOutliers=function(E){const e=t=>{this.setCheckedState(E,t.value)};this.addObserver({node:E,base:this.context.stx,path:"layout.outliers",listener:e})};j.UI.Layout.prototype.setOutliers=function(E){var e=this.context.stx;e.layout.outliers=!e.layout.outliers,e.draw(),e.changeOccurred("layout")};j.UI.Layout.prototype.getHeadsUp=function(E,e){const t=this.context.topNode.parentElement.closest("cq-context"),{stx:s}=t?t.CIQ.UI.context:this.context,n=r=>{r.value||(r.value={}),typeof r.value=="string"&&(r.value={[r.value]:!0});const i=e==="crosshair"?!r.value.static&&r.obj.crosshair:r.value[e];this.setCheckedState(E,i),["static","dynamic"].includes(e)&&(this[e]||(this[e]=!0,this.context.topNode.querySelectorAll(".ciq-chart-area").forEach(a=>{a.querySelector("cq-hu-"+e)||a.append(document.createElement("cq-hu-"+e))})))};this.addObserver({node:E,base:s,path:"layout.headsUp",listener:n})};j.UI.Layout.prototype.setHeadsUp=function({node:E},e){const t=this.context.topNode.parentElement.closest("cq-context");(t?t.getCharts():[this.context.stx]).forEach(n=>{const{layout:r}=n;let{headsUp:i}=r;switch(!i||typeof i!="object"?i={}:i=Object.assign({},i),e){case"crosshair":i.static=!1,r.crosshair=!0;break;case"dynamic":i.dynamic=!0,i.floating=!1;break;case"floating":i.dynamic=!1,i.floating=!0;break;case"static":i.static=!0,r.crosshair=!0;break}r.headsUp=i,n.draw(),n.changeOccurred("layout"),r.crosshair&&(n.centerCrosshairs(),n.doDisplayCrosshairs())})};j.UI.Layout.prototype.getAggregationType=function(E,e){const t=s=>{this.setCheckedState(E,s.value==e)};this.addObserver({node:E,base:this.context.stx,path:"layout.aggregationType",listener:t})};j.UI.Layout.prototype.setAggregationType=function(E,e){this.context.stx.layout.aggregationType==e?this.context.stx.setAggregationType(null):this.context.stx.setAggregationType(e)};j.UI.Layout.prototype.getAggregationEdit=function(E,e){const{stx:t}=this.context,s=n=>{E.value=t.chart.defaultChartStyleConfig[E.name]||n.value};this.addObserver({node:E,base:t,path:"layout."+j.deriveFromObjectChain(t.layout,e).member,listener:s})};j.UI.Layout.prototype.setAggregationEdit=function(E,e){const{stx:t}=this.context,{layout:s}=t;function n(r,i){t.changeOccurred("layout"),E.params.parent.postProcess&&E.params.parent.postProcess({aggregationType:s.aggregationType,box:r||null,reversal:i||null}),t.createDataSet(),t.draw()}if(e==="auto"){s.aggregationType==="kagi"?s.kagi=null:s.aggregationType==="renko"?s.renko=null:s.aggregationType==="linebreak"?s.priceLines=null:s.aggregationType==="rangebars"?s.rangebars=null:s.aggregationType==="pandf"&&(s.pandf||(s.pandf={box:null,reversal:null}),s.pandf.box=null,s.pandf.reversal=null),n("auto","auto");const{parent:r}=E.params;if(!r)return;Array.from(r.querySelectorAll(".ciq"+s.aggregationType+" input")).forEach(function(i){const{name:a}=i,o=a=="box"||a=="reversal"?"pandf."+a:a,c=j.deriveFromObjectChain(s,o);c&&!c.obj[c.member]&&t.chart.defaultChartStyleConfig[a]&&(i.value=t.chart.defaultChartStyleConfig[a])})}else{const r=j.deriveFromObjectChain(s,e),{name:i,value:a}=E.node;r.obj[r.member]=a,n(i==="box"?a:null,i==="reversal"?a:null)}};j.UI.Layout.prototype.showAggregationEdit=function(E,e){const{context:t}=this;if(t.config){const{channelWrite:s}=j.UI.BaseComponent.prototype,n=(t.config.channels||{}).dialog||"channel.dialog";s(n,{type:"aggregation",params:{context:t,aggregationType:e}},t.stx)}else E.ownerDocument.querySelector("cq-aggregation-dialog").open({context:this.context,aggregationType:e})};j.UI.Layout.prototype.clearStudies=function(E){if(j.Studies){var e=this.context.stx;for(var t in e.layout.studies){var s=e.layout.studies[t];!s.customLegend&&!s.permanent&&!s.signalData&&j.Studies.removeStudy(e,s)}e.draw()}};j.UI.Layout.prototype.setPeriodicity=function(E,e,t,s){var n=this;n.context.loader&&n.context.loader.show(!0),n.context.stx.setPeriodicity({period:e,interval:t,timeUnit:s},function(){n.context.loader&&n.context.loader.hide()})};j.UI.Layout.prototype.showPeriodicity=function(E,e){var t="",{period:s,interval:n,timeUnit:r}=E.getPeriodicity();s*=n,t=s,r=="day"?t+="D":r=="week"?t+="W":r=="month"?t+="M":r=="second"?t+="s":r=="millisecond"?t+="ms":s>=60&&s%15===0?t=s/60+"H":r=="tick"?t=(s>1?s:"")+"T":t+="m",j.makeTranslatableElement(e.selector,E,t)};j.UI.Layout.prototype.periodicity=function(E){const{stx:e}=this.context,t=E.label||E,s=()=>{this.showPeriodicity(this.context.stx,{selector:t})};this.addObserver({node:E,base:e,path:"layout.interval",listener:s}),this.addObserver({node:E,base:e,path:"layout.periodicity",listener:s}),this.addObserver({node:E,base:e,path:"layout.timeUnit",listener:s})};j.UI.Layout.prototype.chartType=function(E){const{stx:e,stx:t}=this.context,s=E.closest("cq-menu")||E.getRootNode(),{qsa:n}=j.UI.BaseComponent.prototype,r=n(".icon",s,!0)[0],i=n("[label]",s,!0)[0],a=n("[cq-tooltip]",s,!0)[0],o=({obj:{chartType:c,aggregationType:l}})=>{const u=l==="ohlc"?c:l;let h=u;if(r&&(r.className=`icon generic ${r.classList.contains("hidden")?"hidden ":""}${u.replace(/_| /g,"-")} ciq-icon-${u.replace(/_| /g,"-")}`.trim()),i){const f=j.climbUpDomTree(E,"cq-menu",!0)[0],A=f?f.qsa("cq-dropdown",f,!0)[0]:null,p=A?A.qsa(`*[data-value="${u}"] [label]`,A,!0)[0]:null;h=p?p.getAttribute("cq-translate-original")||p.innerText:u}const d=h.split(" ").map(f=>j.capitalize(f.replace(/-|_/," "))).join(" ");if(i&&j.makeTranslatableElement(i,e,d),a&&j.makeTranslatableElement(a,e,d),!i&&!r){const f=j.climbUpDomTree(E,"cq-menu",!0)[0].querySelector(`*[data-value='${u}'] *[ciq-label]`),A=E.querySelector("*[ciq-menu-icon]"),p=E.querySelector("cq-tooltip"),g=j.getFromNS(this,"context.config.displayStyleIcons"),m=f?(f.closest("cq-item").querySelector("[ciq-menu-icon]")||{}).className:`ciq-icon-${u.replace(/_/,"-")}`;p&&(p.innerHTML=f?f.innerHTML:j.capitalize(u.replace(/-|_/," "))),g&&A&&(E.classList.add("ciq-menu-icon"),A.className=m)}};this.addObserver({node:E,base:t,path:"layout.chartType",listener:o}),this.addObserver({node:E,base:t,path:"layout.aggregationType",listener:o})};j.UI.Layout.prototype.setLanguage=function(E){const{config:e,stx:t}=this.context;if(e){const{channelWrite:s}=j.UI.BaseComponent.prototype,n=(e.channels||{}).dialog||"channel.dialog",r={context:t.uiContext};s(n,{type:"language",params:r},t)}else E.node.ownerDocument.querySelector("cq-language-dialog").open()};j.UI.Layout.prototype.getLanguage=function(E){const{stx:e}=this.context,t=s=>{j.I18N.languages||(j.I18N.languages={en:"English"});const n=E.querySelector("cq-language-name, [label]");if(n){const r=e.preferences.language||j.I18N.language;j.makeTranslatableElement(n,e,j.I18N.languages[r],r);const i=E.querySelector(".flag, cq-flag");i&&i.setAttribute("cq-lang",r)}};this.addObserver({node:E,base:e,path:"preferences.language",listener:t})};j.UI.Layout.prototype.addChart=function(E,e){const t=this.context.topNode;(j.UI.closestContextContainer(t.parentNode)||t).addChart(null,e)};j.UI.Layout.prototype.removeChart=function(E){const e=this.context.topNode;(j.UI.closestContextContainer(e.parentNode)||e).removeChart()};class cf extends j.UI.Helper{constructor(e){super(),this.context=e,e.advertiseAs(this,"Channel")}write(e,t,s){Rt.prototype.channelWrite(`channel.${t}`,s,this.context.stx)}}j.UI.Channel=function(...E){return new cf(...E)};j.UI.Layout.prototype.toggleHelp=function({node:E}){let{topNode:e,stx:t}=this.context;const s="ciq-show-help";if(e.classList.contains(s)){e.classList.remove(s),E.classList.remove(s),j.UI.shadowComponents.forEach((n,r)=>{n===e&&r.classList.remove(s)});return}j.UI.BaseComponent.prototype.qsa("cq-help",e,!0).forEach(n=>n.verifyHelpContent()),e.classList.add(s),E.classList.add(s),j.UI.shadowComponents.forEach((n,r)=>{n===e&&r.classList.add(s)}),j.Help.MessageShown||(t.dispatch("notification",{message:j.Help.Message,displayTime:10,position:"bottom"}),j.Help.MessageShown=!0)};j.UI.Markers=function(E,e){const t=this instanceof j.UI.Markers?this:Object.create(j.UI.Markers.prototype);return t.context=E,e||(e={}),t.menuItemSelector=e.menuItemSelector,t.activeClassName=e.activeClassName||"ciq-active",t.implementation=e.implementation,E.advertiseAs(t,"Markers"),t};j.inheritsFrom(j.UI.Markers,j.UI.Helper);j.UI.Markers.prototype.showMarkers=function(E,e,t){const{activeClassName:s,context:n,implementation:r}=this;let{topNode:i}=n;!r||!i.parentElement||(i=i.multiChartContainer||i,e&&(r.activeLabels.includes(e)?(r.hideMarkers(e),E.node.classList.remove(s)):(r.showMarkers(e,t),E.node.classList.add(s))))};j.UI.Markers.prototype.removeMarkers=function(E,e){const{stx:t}=this.context,s=t.getMarkerArray("label",e);s.length&&(s[0].constructor.removeByLabel?s[0].constructor.removeByLabel(t,e):j.Marker.removeByLabel(t,e),t.draw())};j.UI.Keystroke=function(E,{keysToRepeat:e=[],node:t={}}={}){this.cb=E,this.shift=!1,this.ctrl=!1,this.cmd=!1,this.alt=!1,this.capsLock=!1,this.downValue="",this.keysToRepeat=e,this.recentKeys={},this.commandKeys={},this.initialize(t)};j.UI.Keystroke.noKeyCapture=!1;j.UI.Keystroke.prototype.androidWorkaroundKeyup=function(E){var e=E.target.value,t;e.length>this.downValue.length?t=e.charAt(e.length-1):t="Delete",this.key=t,this.cb({key:t,e:E,keystroke:this})};j.UI.Keystroke.prototype.mapKey=function(E){return{Shift:"shift",Control:"ctrl",Alt:"alt",Meta:"cmd",Win:"cmd"}[E]||E};j.UI.Keystroke.prototype.keyup=function(E){if(this.implementAndroidWorkaround){this.androidWorkaroundKeyup(E),this.implementAndroidWorkaround=!1;return}const{recentKeys:e}=this,{key:t,code:s}=E,n=this.mapKey(t),r=t!==n,i=new Date().getTime();if(e[s]||(e[s]={}),e[s].keyup=i,r)return this.commandKeys[s]?(this.commandKeys[s].pressed=!1,Object.values(this.commandKeys).some(({command:o,pressed:c})=>c&&o===n)||(this[n]=!1),this.cb({key:t,e:E,keystroke:this})):void 0;let a=[];Object.entries(this.commandKeys).forEach(([o,{command:c}])=>{let l=e[o]||{},u=e[s]||{};l.keydown<u.keydown&&u.keydown<l.keyup&&l.keyup+500>i&&(a.push(o),this[c]=!0)}),a.length&&setTimeout(()=>{a.forEach(o=>{e[o].keydown<i&&(this[this.commandKeys[o].command]=!1)})}),this.keysToRepeat.includes(t)?this.key=null:(this.key=t,this.cb({key:t,e:E,keystroke:this}))};j.UI.Keystroke.prototype.keydown=function(E){if(this.noKeyCapture)return;if(E.which==229&&j.isAndroid){this.implementAndroidWorkaround=!0;return}const{key:e,code:t}=E,s=this.mapKey(e),n=e!==s;if(this.recentKeys[t]||(this.recentKeys[t]={}),this.recentKeys[t].keydown=new Date().getTime(),n&&(this.commandKeys[t]={command:s,pressed:!0}),e=="Tab"){const r=document.querySelector("[cq-keyboardnavigation-active]");if(r){const{uiManager:i}=j.UI.getMyContext(r);if(i){const a=i.topMenu();(!a||!a.hasAttribute("native-tabbing"))&&E.preventDefault()}}else if(E.target.hasAttribute("cq-exit")){let i=E.target.getAttribute("cq-exit");(i=="head"&&!E.shiftKey||i=="foot"&&E.shiftKey)&&(E.target.setAttribute("cq-keyboardnavigation-active",""),E.preventDefault()),E.target.removeAttribute("cq-exit")}}this.key=e,n?this[s]=!0:e==="CapsLock"?this.capsLock=!this.capsLock:this.keysToRepeat.includes(e)&&(this.key=null,this.cb({key:e,e:E,keystroke:this}))};j.UI.Keystroke.prototype.keypress=function(E){if(!this.noKeyCapture){var e=E.which;e<32||e>222||(this.key=E.key)}};j.UI.Keystroke.prototype.initialize=function(E){var e=this,t=(E||{}).ownerDocument||document;["keyup","keydown","keypress"].forEach(function(s){t.addEventListener(s,function(n){s==="keydown"&&(e.downValue=n.target.value),e[s](n)})}),t.defaultView.addEventListener("blur",function(s){e.ctrl=!1,e.cb({key:"Control",e:s,keystroke:e})})};j.UI.KeystrokeHub=function(E,e,t){E=j.UI.$(E||e.topNode.ownerDocument)[0],this.infocus=!1;var s=this;[void 0,"#document","BODY"].indexOf(E.nodeName)>-1?this.infocus=!0:(E.addEventListener("mouseout",function(){s.infocus=!1}),E.addEventListener("mouseover",function(){s.infocus=!0})),this.context=e,this.params=t||{},{hotkeyConfig:this.hotkeyConfig}=e.config||{},this.uiManager=j.UI.getUIManager(e.topNode),this.uiManager.keystrokeHub=this;function n(){return function(){s.handler.apply(s,arguments)}}this.keystroke=new j.UI.Keystroke(n(),{keysToRepeat:this.hotkeyConfig.keysToRepeat,node:E}),this.tabOrder=[null],this.tabIndex=0,this.yNormalizationThreshold=this.context.topNode.getBoundingClientRect().height/25,this.tabElementSelectors=["cq-clickable.symbol-search","cq-lookup","cq-comparison[cq-marker]","cq-study-legend[chart-legend]","cq-menu.ciq-menu","cq-menu.nav-dropdown",".ciq-nav cq-toggle",".chart-control-group cq-toggle",".chartControls .chartSize span",".home",".ciq-footer cq-toggle","cq-show-range > div","cq-show-range .item-item","cq-share-button","ciq-data-table-container button",".stx-yaxis-menu","canvas[role=image]","[keyboard-navigation='true']"],this.tabActiveElement=null,this.tabActiveModals=[],this.keyControlElement=null,this.highlightElement=null;const{channelSubscribe:r}=j.UI.BaseComponent.prototype,i=(this.context.config.channels||{}).keyboardNavigation||"channel.keyboardNavigation";r(i,a=>{a&&a.action==="registerElements"&&this.setTabOrderElements()},this.context.stx)};j.inheritsFrom(j.UI.KeystrokeHub,j.UI.Helper);j.UI.KeystrokeHub.defaultHotKeys=function(E,e,t={}){const{hotkeyConfig:s={},keystroke:n,context:r}=e,{hotkeys:i=[]}=s,{stx:a}=r,{code:o,keyCode:c,shiftKey:l}=t||{},u=o&&o.includes("Numpad");return E=="Unidentified"&&(E=String.fromCharCode(c)),n.shift=l,i.slice().reverse().reduce(function(d,{action:f,commands:A,options:p}){return d.concat(A.map(g=>({action:f,command:g,options:p})))},[]).map(function({action:d,command:f,options:A}){return f==="+"?f=["+"]:f.slice(-2)==="++"?f=f.slice(0,-2).split("+").concat("+"):f=f.split("+"),{action:d,options:A,modifiers:f.slice(0,-1),commandKey:f.slice(-1)[0],specificity:f.length}}).filter(function({modifiers:d,commandKey:f}){let A=(u?[o]:[o,E]).includes(f),p=!d.length||d.every(g=>n[n.mapKey(g)]);return A&&p}).sort(function(d,f){return f.specificity-d.specificity}).some(function({action:d,options:f}){if(typeof d=="string")return j.UI.KeystrokeHub.executeHotkeyCommand({stx:a,action:d,options:f});if(typeof d=="function")return d({stx:a,options:f})!==!1})};j.UI.KeystrokeHub.addHotKeyHandler=function(E,e,t){const s=({value:n})=>{n&&setTimeout(()=>{const r=j.getFromNS(n.config,"hotkeyConfig.hotkeys",[]).find(({action:i})=>i===E);r&&(r.action=e)})};j.UI.observeProperty("uiContext",t,s),t.addEventListener("destroy",()=>j.UI.unobserveProperty("uiContext",t,s))};j.UI.KeystrokeHub.executeHotkeyCommand=function({stx:E,action:e,options:t={}}){const{crosshair:s,candleWidth:n}=E.layout,{left:r,right:i,panel:a}=E.chart,o=E.height-E.xaxisHeight,{percent:c=0,bars:l=0}=t,{topNode:u}=E.uiContext,h=u.ownerDocument.body.keystrokeHub,d=({axis:g,direction:m=1}={})=>{const{cx:b,cy:C}=E;let F=0;if(g==="x"&&(F=n*l),g==="y"&&(F=o*c),E.crossSection&&E.crossSection.crosshairBreakDistance&&(F=E.crossSection.crosshairBreakDistance),b||b===0||(E.cx=Math.round(E.width/2)),C||C===0||(E.cy=Math.round(o/2)),F){let w=E["c"+g]+F*m;w=Math.max(w,g==="x"?r+1:0),w=Math.min(w,g==="x"?i-1:o),E["c"+g]=Math.round(w)}E.mousemoveinner(E.resolveX(E.cx),E.resolveY(E.cy)),E.draw()},f=({direction:g=1,page:m}={})=>{const{dataSet:b,scroll:C,maxTicks:F}=E.chart;let w=m?F:l;w*=g,C+w>=b.length?E.chart.scroll=b.length:E.chart.scroll+=w,E.draw(),E.headsUpHR()},A=(g=1)=>{let m=o*c*g;E.chart.yAxis.scroll+=m,E.draw()},p=(g=1)=>{[...a.yaxisLHS,...a.yaxisRHS].forEach(b=>{let C=b.zoom+25*g;C<b.height&&(b.zoom=C)}),E.draw()};switch(e){case"up":s?d({axis:"y",direction:-1}):A();break;case"down":s?d({axis:"y"}):A(-1);break;case"right":s?d({axis:"x"}):f({direction:-1});break;case"left":s?d({axis:"x",direction:-1}):f();break;case"pageRight":f({direction:-1,page:!0});break;case"pageLeft":f({page:!0});break;case"zoomInXAxis":if(!E.allowZoom||E.activeDrawing&&!E.allowDrawingZoom)return;E.zoomIn();break;case"zoomOutXAxis":if(!E.allowZoom||E.activeDrawing&&!E.allowDrawingZoom)return;E.zoomOut();break;case"zoomInYAxis":p(-1);break;case"zoomOutYAxis":p();break;case"toggleCrosshairs":const g=u.querySelector('cq-toggle[member="crosshair"], cq-toggle[cq-member="crosshair"]');g?g.dispatchEvent(new Event("stxtap")):E.layout.crosshair=!E.layout.crosshair,d();break;case"toggleContinuousZoom":E.continuousZoom&&E.continuousZoom.smartZoomToggle();break;case"symbolLookup":let b=(u.parentElement&&u.parentElement.closest("cq-context")||u).querySelector(".ciq-search cq-lookup cq-lookup-input input");if(b)b.focus();else{const F=j.UI.getMyContext(u);j.UI.BaseComponent.prototype.channelWrite("channel.dialog",{type:"lookup",params:{context:F}},E)}break;case"home":E.home(),E.headsUpHR();break;case"end":E.chart.scroll=E.chart.dataSet.length,E.draw(),E.headsUpHR();break;case"delete":if(j.ChartEngine.drawingLine)E.undo();else if(E.anyHighlighted)E.deleteHighlighted();else return!1;break;case"escape":if(j.ChartEngine.drawingLine)E.currentVectorParameters.vectorType=="continuous"&&j.ChartEngine.completeDrawing(E),E.undo();else if(E.repositioningAnchorSelector)j.Studies.cancelRepositionAnchor(E);else{const F=j.UI.getUIManager(u);if(h.tabActiveModals.length){if(h.tabActiveModals[0].processEsc&&h.tabActiveModals[0].processEsc(h))break;F&&F.closeMenu(h.tabActiveModals[0]),h.tabActiveModals[0]&&h.setKeyControlElement(h.tabActiveModals[0])}else F&&F.closeMenu()}break;case"keyboardNavigateDeselect":h.tabOrderDeselect();break;case"keyboardNavigateNext":if(h.tabActiveModals.length)return!1;h.tabIndexNext();break;case"keyboardNavigatePrevious":if(h.tabActiveModals.length)return!1;h.tabIndexNext(!0);break;case"keyboardNavigateClick":if(h.tabActiveModals.length)return!1;h.tabOrderClickSelected();break;case"toggleDrawings":const C=E.uiContext.topNode.querySelector('cq-toggle[member="chart.hideDrawings"]');C?C.dispatchEvent(new Event("stxtap")):E.chart.hideDrawings=!E.chart.hideDrawings;break;default:return!1}return!0};j.UI.KeystrokeHub.prototype.resetTabNavigation=function(){const{topNode:E}=this.context;this.tabOrder=[null],this.tabIndex=0,this.yNormalizationThreshold=E.getBoundingClientRect().height/25,this.tabActiveElement=null,this.tabActiveModals=[],this.keyControlElement=null,this.highlightElement&&this.highlightElement.parentElement!==E?(this.highlightElement.remove(),E.append(this.highlightElement)):this.highlightHide();const e={pointerdown:()=>this.tabOrderDeselect(),pointermove:()=>E.classList.remove("disable-mouse-pointer")};for(const t in e)E.pointerHandlers&&E.removeEventListener(t,E.pointerHandlers[t]),E.addEventListener(t,e[t]);E.pointerHandlers=e,this.context.stx.append("resizeChart",()=>{this.setTabOrderElements(),this.highlightAlign()}),this.setTabOrderElements()};j.UI.KeystrokeHub.prototype.setTabOrderElements=function(){let E=null;if(this.tabIndex!==0){let e=this.tabOrder[Math.abs(this.tabIndex)];e?E=e.element:this.tabIndex=0}this.tabOrder=[null];for(let e=0;e<this.tabElementSelectors.length;e++){const t=j.UI.BaseComponent.prototype.qsa(this.tabElementSelectors[e],this.context.topNode,!0);for(let s=0;s<t.length;s++){const n=t[s];n.getAttribute("keyboard-navigation")!=="false"&&(n.tabListenerAdded||(n.addEventListener("stxtap",(function(r){let i=this.tabOrder.findIndex(a=>a&&a.element===r);return i!=this.tabIndex&&(this.tabOrderDeselect(),this.tabIndex=-i),!0}).bind(this,n)),n.addEventListener("blur",this.highlightHide.bind(this)),n.addEventListener("focus",this.highlightAlign.bind(this)),n.tabListenerAdded=!0),this.tabOrder.push({element:n}))}}this.sortTabOrderElements(E)};j.UI.KeystrokeHub.prototype.sortTabOrderElements=function(E){const e=this.tabIndex<0;!E&&this.tabIndex!==0&&this.tabOrder[Math.abs(this.tabIndex)]&&(E=this.tabOrder[Math.abs(this.tabIndex)].element),this.tabOrder.forEach(t=>{if(!t)return;const{x:s,y:n,width:r,height:i}=t.element.getBoundingClientRect();t.position={x:s,y:n,width:r,height:i}}),this.tabOrder.sort((t,s)=>{if(!(t===null||s===null))return Math.floor(t.position.y/this.yNormalizationThreshold)-Math.floor(s.position.y/this.yNormalizationThreshold)||t.position.x-s.position.x}),E&&this.tabOrder.forEach((t,s)=>{t&&t.element==E&&(this.tabIndex=e?-s:s)})};j.UI.KeystrokeHub.prototype.setKeyControlElement=function(E,e){!this.keyControlElement&&!E||(this.disableKeyControlElement(this.keyControlElement,e),E&&(this.keyControlElement=E,this.keyControlElement.keyboardNavigation=this,typeof this.keyControlElement.onKeyboardSelection=="function"&&this.keyControlElement.onKeyboardSelection()))};j.UI.KeystrokeHub.prototype.disableKeyControlElement=function(E,e){E&&(!e&&typeof E.onKeyboardDeselection=="function"&&E.onKeyboardDeselection(),E.keyboardNavigation=null)};j.UI.KeystrokeHub.prototype.tabOrderDeselect=function(E){const{tabOrder:e,tabIndex:t}=this;t<=0||(e[t]&&this.disableKeyControlElement(e[t].element),E||(this.tabActiveElement=null,this.tabIndex=-this.tabIndex,this.highlightHide(),this.context.topNode.classList.remove("disable-mouse-pointer")))};j.UI.KeystrokeHub.prototype.tabOrderSelect=function(){this.tabActiveElement&&clearTimeout(this.tabActiveElement.element.highlightDelayTimeout);const{tabOrder:E,tabIndex:e}=this;e<=0?this.highlightHide():this.highlightPosition(E[e])};j.UI.KeystrokeHub.prototype.tabOrderClickSelected=function(){const{tabOrder:E,tabIndex:e}=this;E.length<=1||e<=0||(this.setKeyControlElement(E[e].element),E[e].element.dispatchEvent(new Event("stxtap")))};j.UI.KeystrokeHub.prototype.tabIndexNext=function(E){if(!this.context.stx.uiContext.topNode.hasAttribute("cq-keyboardnavigation-active")||this.tabOrder.length<=1)return;this.context.stx.uiContext.topNode.focus(),this.sortTabOrderElements(),this.tabIndex<0?this.tabIndex=Math.abs(this.tabIndex):this.tabOrderDeselect(!0),(this.tabIndex<1||this.tabIndex>=this.tabOrder.length)&&(this.tabIndex=E?this.tabOrder.length:1);let e=this.tabIndex,t=!1;do if(E===!0?e--:e++,this.tabOrder[e]&&j.trulyVisible(this.tabOrder[e].element)&&this.tabOrder[e].element.getAttribute("keyboard-selectable")!=="false")if(!t)this.tabIndex=e,t=!0;else break;while(e<this.tabOrder.length&&e>0);(e>=this.tabOrder.length||e<=1)&&(e>=this.tabOrder.length?this.context.topNode.setAttribute("cq-exit","foot"):e<=1&&this.context.topNode.setAttribute("cq-exit","head"),this.context.topNode.removeAttribute("cq-keyboardnavigation-active")),this.tabOrderSelect(),this.uiManager.closeMenu()};j.UI.KeystrokeHub.prototype.addActiveModal=function(E){this.tabActiveModals.indexOf(E)>-1||(this.tabActiveModals.unshift(E),this.tabOrderDeselect(),E.hasAttribute("native-tabbing")||this.setKeyControlElement(E))};j.UI.KeystrokeHub.prototype.removeActiveModal=function(E){let{tabActiveModals:e}=this,t=e.indexOf(E);t>-1&&(e.splice(t,1),e[0]?this.setKeyControlElement(e[0]):this.setKeyControlElement())};j.UI.KeystrokeHub.prototype.highlightPosition=function(E){if(!E||!E.element||!E.position){const{tabOrder:t,tabIndex:s}=this;if(s<=0)return;E=t[s]}this.tabActiveElement=E,this.highlightAlign();const e=E.element.querySelector("[tabindex]")||E.element;e.tabIndex="-1",e.focus(),setTimeout(()=>e.focus(),100)};j.UI.KeystrokeHub.prototype.highlightAlign=function(){if(this.tabActiveElement){const E=this.tabActiveElement.element.getBoundingClientRect(),e=this.context.topNode.getBoundingClientRect();if(E.width<=0||E.height<=0){this.highlightHide();return}this.highlightCreate(),Object.assign(this.highlightElement.style,{top:E.top-e.top+"px",left:E.left-e.left+"px",width:E.width+"px",height:E.height+"px"})}};j.UI.KeystrokeHub.prototype.highlightCreate=function(){return this.highlightElement?this.highlightElement.classList.remove("disabled"):(this.highlightElement=document.createElement("div"),this.highlightElement.classList.add("cq-keyboard-selected-highlight"),this.context.topNode.appendChild(this.highlightElement)),this.context.topNode.classList.add("disable-mouse-pointer"),this.context.topNode.classList.add("cq-navigation-highlight-visible"),this.highlightElement};j.UI.KeystrokeHub.prototype.highlightHide=function(){this.highlightElement&&this.highlightElement.classList.add("disabled"),this.context.topNode.classList.remove("cq-navigation-highlight-visible")};j.UI.KeystrokeHub.prototype.setActiveContext=function(E){E.topNode.querySelector("cq-context")||(this.context=E)};j.UI.KeystrokeHub.prototype.processKeyStrokeClaims=function(E,e,t,s){for(let r of Array.from(j.UI.keyboardClaims).reverse())if(r.ownerDocument===t.target.ownerDocument){var n=r.keyStroke(E,e,t,s);if(n)return n.allowDefault||t.preventDefault(),!0}return!1};j.UI.KeystrokeHub.prototype.handler=function(E){const{stx:e}=this.context;if(e.editingAnnotation)return;const{e:t,key:s,keystroke:n}=E;if(!this.infocus&&s!=="Tab")return;const r=(t.composedPath()[0]||t.target).tagName;switch(s){case"Shift":e.shift=n.shift;break;case"Control":case"Alt":e.ctrl=n.ctrl;break;case"Meta":case"Win":e.cmd=n.cmd;break;case"CapsLock":this.capsLock=!this.capsLock;break}const i=t.key==="Escape"||t.key==="Esc"||t.key==="Tab",a=r==="INPUT"||r==="TEXTAREA",o=this.uiManager.activeMenuStack.length;if(this.params.cb&&!this.context.isLegendKeyboardActive()&&(i||!a&&!o)&&this.params.cb(s,this,t))return t.preventDefault();!j.ChartEngine.drawingLine&&this.processKeyStrokeClaims(this,s,t,n)};class lu extends HTMLElement{constructor(){super(),this.activeMenuStack=[],this.registeredForResize=[],this.keystrokeHub=null}getColorPicker(e){const{topNode:t}=j.UI.getMyContext(e)||{};if(!t)return;let s=t.querySelector("cq-color-picker");return s||(s=document.createElement("cq-color-picker"),s.setAttribute("role","dialog"),s.setAttribute("aria-modal","true"),t.appendChild(s)),s}closeOpenColorPicker(){this.activeMenuStack.forEach(e=>{e.matches("cq-color-picker")&&e.close()})}connectedCallback(){var e=this;this.resize=function(){for(var n=e.registeredForResize,r=0;r<n.length;r++)typeof n[r].resize=="function"&&n[r].resize();e.closeOpenColorPicker()};var t=this.document||document;function s(n){n.ciqStamp>(t.lastTap||0)&&e.closeTopMenu()}t.body.addEventListener("stxtap",s),j.installTapEvent(t.body,{preventUnderlayClick:!1,preventClickEvent:!0,absorbDownEvent:!1}),t.defaultView.addEventListener("resize",this.resize),t.body.contains(this)&&(j.UI.registerComponentsImmediately=!0,j.UI.ensureComponentsRegistered())}disconnectedCallback(){var e=this.document||document;e.defaultView.removeEventListener("resize",this.resize)}closeMenu(e,t){const{activeMenuStack:s}=this;let n=[];if(t=(t||"").split(",").map(r=>r.toUpperCase().trim()).filter(r=>r),e)for(n.push(e),e=e.parentElement;e;)e.matches("cq-menu")&&e.active&&n.push(e),e=e.parentElement;else n=s;for(let r=0;r<n.length;r++){const i=n[r];t.length&&!t.includes(i.tagName)||i.hide&&i.hide()}this.activeMenuStack=s.filter(r=>r.active),this.ifAllClosed()}closeTopMenu(){const{activeMenuStack:e}=this;if(!e.length)return;const t=e[e.length-1];(!t.isDialog||t.active)&&(e.pop(),t.hide(),t.onClose&&t.onClose(),setTimeout(()=>this.ifAllClosed(),0));const s=t.getAttribute("cq-close-top");s&&j.climbUpDomTree(t.parentElement,s).forEach(n=>this.closeMenu(n))}ifAllClosed(){this.activeMenuStack.length||Array.from((this.document||document).querySelectorAll("cq-context,*[cq-context]")).forEach(function(e){e.CIQ&&e.CIQ.UI&&e.CIQ.UI.context&&e.CIQ.UI.context.stx&&e.CIQ.UI.context.stx.modalEnd()})}initializeMenuListeners(e){e.callbackListeners.menu=[]}lift(e){var t=e;if(t){var s=t.ownerDocument;t.remember={parentNode:t.parentNode,css:{position:t.style.position,display:t.style.display,left:t.style.left,top:t.style.top,height:t.style.height,width:t.style.width,opacity:t.style.opacity}};var n=t.getBoundingClientRect(),r=t.scrollHeight,i=s.defaultView.innerHeight-n.top-20;r>i&&(r=i),t.doNotDisconnect=!0,t.remove(),Object.assign(t.style,{position:"fixed",display:"block",left:n.left+"px",top:n.top+"px",height:r+"px",opacity:1}),s.body.appendChild(t),delete t.doNotDisconnect,typeof t.resize<"u"&&t.resize(),Array.from(t.querySelectorAll("cq-scroll")).forEach(function(a){a.resize()})}}openMenu(e,t){const{activeMenuStack:s}=this;s.includes(e)||(setTimeout(()=>{const n=e.querySelector("input:first-child");n&&n.focus()},10),s.push(e),e.show(t),e.ownerDocument.querySelectorAll("cq-context,*[cq-context]").forEach(n=>{const r=j.getFromNS(n,"CIQ.UI.context.stx");r&&(r.modalBegin(),r.callbackListeners.menu&&r.dispatch("menu",{stx:r,menu:e}))}))}registerForResize(e){this.registeredForResize.push(e)}topMenu(){var e=this.activeMenuStack;return e.length?e[e.length-1]:null}unregisterForResize(e){for(var t=this.registeredForResize,s=0;s<t.length;s++)if(t[s]===e){t.splice(s,1);return}}}j.UI.UIManager=lu;j.ChartEngine.registerGlobalEvent("beforeunload",function(){if(j.UI._uiManagers){const E=j.UI._uiManagers.get(this.document);if(E){j.UI._uiManagers.delete(this.document);try{E.disconnectedCallback()}catch{}}}},!1,!0);j.UI.getUIManager=function(E){let e=document;if(E){const n=j.UI.closestContextContainer(E);n?e=n.portalDoc||e:e=E.ownerDocument||e}j.UI._uiManagers||(j.UI._uiManagers=new WeakMap);const t=j.UI._uiManagers.get(e);if(t)return t;let s=e.querySelector("cq-ui-manager");return s||(s=new j.UI.UIManager,s.document=e,s.connectedCallback()),j.UI._uiManagers.set(e,s),s};customElements.define("cq-ui-manager",lu);const{qs:rr,qsa:zp,channelWrite:Ia,channelRead:go,channelSubscribe:na}=j.UI.BaseComponent.prototype;class uf{createChartAndUI({container:e,config:t}){e||(e=document.body),t&&!t.chartId&&(t.chartId=e.id);const s=u(e),n=rr("cq-context",s),r=j.getFromNS(n,"CIQ.UI.context"),i=rr(r?"[cq-context-engine]":".chartContainer",s);r&&(i.parentElement.style.display="none",i.dimensionlessCanvas=!0);const a=j.ChartEngine.create({container:i,config:t,deferLoad:!0});i.stx=a;const o=a.container.closest("cq-context-wrapper");if(o&&t.multiChartCopySymbol===null&&!t.initialSymbol){const{onChartReady:h,onMultiChartEvent:d}=t;t.onChartReady=function(f){h&&h.call(t,f),d&&d("chartReady",{stx:f}),f.chart.symbolObject.symbol===null&&(f.container.insertAdjacentHTML("beforeend",`<div class='ciq-empty-message'>${f.translateIf(t.multiChartLoadMsg)}</div>`),o&&(o.classList.add("ciq-empty-chart"),o.removeEmptyMsg=()=>{o.querySelector(".ciq-empty-message").remove(),o.classList.remove("ciq-empty-chart"),delete o.removeEmptyMsg}))}}j.UI.scrollbarStyling=t.scrollbarStyling,j.UI.ensureComponentsRegistered(),this.portalizeContainerIfInDifferentDocument(e);let c=new j.UI.Context(a,s);c.topNode.hasAttribute("tabindex")||c.topNode.setAttribute("tabindex","0"),c.config=t,e.context=c,j.UI.Layout(c),j.UI.Channel(c),this.initMenusAndToggles(c),this.initLookup(c),this.initDialogHandler(c),this.initContainerListeners(c),this.initEventMarkers(c),this.initDrawingTools(c),this.initDrawingEditListeners(c),t.language&&(t.setHtmlLang&&document.documentElement.setAttribute("lang",t.language),j.I18N.localize(a,t.language)),this.loadPreferences(c),l(c);function l(h){const d=h.topNode.parentNode.closest("cq-context"),f=d||h.topNode;if(f.querySelector(".cq-plugin-container"))return;const A=document.createElement("div"),p=f.querySelector(".ciq-nav");A.classList.add("cq-plugin-container"),p?f.insertBefore(A,p.nextElementSibling):f.appendChild(A);const g=d?rr(".ciq-multi-chart-container-wrapper",d):rr(".ciq-chart-area",h.topNode),m=j.resizeObserver(A,()=>{const{height:b}=getComputedStyle(A);g.style.marginTop=b,h.stx.resizeChart()});h.stx.addEventListener("destroy",()=>{j.resizeObserver(A,null,m)})}if(r||(j.UI.StudyEdit(null,c),j.Renderer.Bars&&j.UI.activatePluginUI(a,"advanced"),this.initExtensions({stx:a,uiContext:c,type:"plugins"}),this.initPluginChannelListeners(a,c),t.onEngineReady&&t.onEngineReady(a),this.loadChart(c)),j.UI.BaseComponent.buildReverseBindings(s),r)return c;return s.bindingInitiated=!0,j.UI.begin(t.onWebComponentsReady),c.uiManager=j.UI.getUIManager(c.topNode),c.uiManager.initializeMenuListeners(a),window.setTimeout(function(){c.topNode.ownerDocument.body.keystrokeHub.resetTabNavigation(),j.UI.setDefaultStates(c)},0),c;function u(h){return h.matches("cq-context")||h.getAttribute("cq-container")?h:h.querySelector("cq-context, [cq-context]")}}initContainerListeners(e){const{config:{channels:{className:t="channel.componentClass",breakpoint:s="channel.breakpoint",sidenavSize:n="channel.sidenavSize",sidepanelSize:r="channel.sidepanelSize",drawingPalettes:i="channel.drawingPalettes",pluginPanelHeight:a="channel.pluginPanelHeight"}={}}={},stx:o,topNode:c}=e;j.UI.addResizeListener(c,()=>this.notifySizeChanges(e)),o.addEventListener("destroy",()=>j.UI.removeResizeListener(c)),this.notifySizeChanges(e),na(t,this.classSetter(e),o),na(s,this.breakpointSetter(e),o),na(n,this.sidenavSizeSetter(e),o),na(r,this.sidepanelSizeSetter(e),o),na(i,this.chartPositionSetter(e),o);const l=this.initKeystrokeHub(e),u=this.getKeystrokeHubSetter(e,l);c.addEventListener("mouseover",u),c.addEventListener("focus",h=>{h.target.hasAttribute("cq-keyboardnavigation-active")||(u(h),h.target.setAttribute("cq-keyboardnavigation-active",""),l.resetTabNavigation())}),c.addEventListener("blur",h=>{const d=document.querySelector(".cq-dialogs"),f=h.relatedTarget?h.relatedTarget.closest("[cq-lift]"):null;h.relatedTarget&&(c.contains(h.relatedTarget)||d&&d.contains(h.relatedTarget)||f)||(h.target.removeAttribute("cq-keyboardnavigation-active"),l.tabOrderDeselect(),l.highlightHide())})}initLookup(e){const{config:t,topNode:s,stx:n}=e,{channels:{lookup:r}={},dialogs:{lookup:i}={}}=t;if(r&&i){const{channelSubscribe:a,channelWrite:o}=j.UI.BaseComponent.prototype;a(r,c=>{o("channel.dialog",c?{type:"lookup",params:{stx:n,context:e}}:{},n)},n)}this.initKeystrokeHub(e),e.changeSymbol=function(a,o){const{stx:c,loader:l}=e;l&&l.show(!0);const{removeSeries:u,loadError:h}=t.onNewSymbolLoad||{};if(u&&Object.values(c.chart.series).filter(u).forEach(d=>{d.parameters.isEvent?c.removeEvent(d.id):c.removeSeries(d.id)}),c.loadChart(a,{masterData:a._masterData},function(d){if(l&&l.hide(),d){h&&h(d,e);return}o&&o(c),t.restore&&j.ChartEngine.restoreDrawings(c,c.chart.symbol,t.chartId)}),a.symbol){const d=e.topNode.closest("cq-context-wrapper");d&&d.removeEmptyMsg&&d.removeEmptyMsg()}},t.lookupDriver&&e.setLookupDriver(new t.lookupDriver)}initKeystrokeHub(e){let t=document;return e&&(t=e.topNode.portalDoc||t),t.body.keystrokeHub||(t.body.keystrokeHub=new j.UI.KeystrokeHub(t.body,e,{cb:j.UI.KeystrokeHub.defaultHotKeys})),t.body.keystrokeHub}getKeystrokeHubSetter(e,t){return function(){t.context!==e&&t.setActiveContext(e)}}initDialogHandler(e){const{config:{channels:t={},dialogs:s={}}={},stx:n}=e;na(t.dialog||"channel.dialog",r,n);function r({type:i=null,params:a={}}={}){if(!i)return;const o=s[i]||s[j.makeCamelCase(i)];if(!o)return;const c=a.context.topNode.ownerDocument;let l=rr(o.tag,e.topNode)||rr(o.tag,c);if(!l){l=document.createElement(o.tag);const d=h(c),f=document.createElement("cq-dialog");f.append(l),d.append(f)}const u=l.parentElement;u.context=a.context,u.setAttribute("role","dialog"),u.setAttribute("aria-modal","true"),u.setAttribute("aria-labelledby",o.tag+"-title"),u.setAttribute("aria-describedby",o.tag+"-description"),Object.entries(o.attributes||{}).forEach(([d,f=""])=>{["cq-title","cq-close-button","cq-description"].includes(d)?u.setAttribute(d,f):l.setAttribute(d,f)}),u.wraps=l.tagName.toLowerCase(),l&&l.open&&l.open(a);function h(d){let f=rr(".cq-dialogs",d);return f||(f=document.createElement("div"),f.classList.add("cq-dialogs"),d.body.append(f),f)}}}initDrawingTools(e){const{stx:t,config:{channels:s={}}={},topNode:n}=e;na(s.drawing||"channel.drawing",r,t);function r(i){n.classList[i?"add":"remove"]("toolbar-on"),t.resizeChart()}}initDrawingEditListeners(e){const{config:{channels:t={}}={},stx:s}=e,n=new j.UI.DrawingEdit(null,e);let r=!0;const i=t.drawing||"channel.drawing";n.node.addEventListener("drawing-edit-begin",function(a){go(i,s)||(r=!1,Ia(i,!0,s))},!1),n.node.addEventListener("drawing-edit-end",function({detail:a}){r||(a.action!=="edit"&&(r=!0),a.action==="close"&&Ia(i,!1,s))},!1)}initColorPicker(e){let t=document;e&&(t=e.topNode||t);let s=t.querySelector("cq-color-picker");s||(t=t.ownerDocument||t,s=t.querySelector("body > cq-color-picker"),!s&&(s=document.createElement("cq-color-picker"),s.setAttribute("role","dialog"),s.setAttribute("aria-modal","true"),document.body.append(s),t.ownerDocument&&t.ownerDocument.body.append(s)))}loadPreferences(e){const{stx:t,topNode:s,config:{chartId:n,multiChartId:r,restore:i}={}}=e;i&&j.ChartEngine.restorePreferences(t,r||n||s.id)}loadChart(e){const{stx:t,config:{chartId:s,initialSymbol:n,restore:r,onChartReady:i,initialData:a}={},loader:o}=e;o&&o.show(!0),r?j.ChartEngine.restoreLayout(t,function(){if(o&&o.hide(),!t.chart.symbol){c();return}l()},s,e.config):c();function c(){if(t.crossSection){let h=t.layout.chartType.includes("crosssection")?t.layout.chartType:t.crossSection.initialSettings.chartType||"crosssection";t.setChartType(h)}if(!n){l();return}const u=typeof n=="string"?{symbol:n}:n;u._masterData=a,e.changeSymbol(u,l)}function l(){i&&setTimeout(()=>i(t))}}notifySizeChanges(e){const{stx:t,topNode:{clientWidth:s,clientHeight:n,classList:r},config:{channels:i={}}={}}=e;if(t.destroyed)return;const a=go(i.containerSize||"channel.containerSize",t);if(a&&a.width===s&&a.height===n)return;const o=this.getBreakpoint(s,n);r.contains(o[1])||Ia(i.breakpoint||"channel.breakpoint",o[1],t),o[0]!==t.chart.breakpoint&&window.setTimeout(()=>{Ia(i.breakpoint||"channel.breakpoint",o[0],t),t.notifyBreakpoint(o[0]),t.resizeChart()}),Ia(i.containerSize||"channel.containerSize",{width:s,height:n},t),t.resizeChart()}getBreakpoint(e,t){let s="break-sm";if(e>768?s="break-lg":e>584&&(s="break-md"),typeof t>"u")return s;let n="break-height-sm";return t>768?n="break-height-lg":t>350&&(n="break-height-md"),[s,n]}initEventMarkers(e){const t=e.config;if(t.eventMarkersImplementation&&j.UI.Markers){const s=t.eventMarkersImplementation&&new t.eventMarkersImplementation(e.stx),n=t.selector.markersMenuItem;j.UI.Markers(e,{menuItemSelector:n,implementation:s})}}initExtensions({stx:e,uiContext:t,type:s}){const{config:n}=t,r=n[s];Object.entries(r).filter(([,i])=>!!i).forEach(([i,a])=>{this.constructor.applyPlugin(e,i,a)})}static applyPlugin(e,t,s){const{uiContext:n}=e,r=s.moduleName||j.capitalize(t);try{if(!j[r]){if(s.load&&s.toggleMarkup&&s.container&&(typeof s.container=="string"&&(s.container=n.topNode.querySelector(s.container)),s.container)){const o=document.createElement("div");j.innerHTML(o,s.toggleMarkup),Array.from(o.childNodes,c=>{s.container.appendChild(c.cloneNode(!0))}),j.UI.activatePluginUI(e,r)}j.debug&&console.log(`${r} not available for ${t} with params:`,s);return}const i=Object.assign({stx:e,context:n},s),a=new j[r](i);j.UI.activatePluginUI(e,t),s.postInstall&&s.postInstall({uiContext:n,extension:a}),s.init=!0}catch(i){j.debug&&console.error("Error configuring "+t+" using params ",s,"error",i)}}static loadPlugin(e,t){const s=e.uiContext.config.plugins[t],n=s.moduleName||j.capitalize(t);if(s.init)return Promise.resolve();j[n]?this.applyPlugin(e,t,s):s.load&&s.load().then(r=>{j.UI.registerComponents(),this.applyPlugin(e,t,s)})}initPluginChannelListeners(e,t){Object.entries(t.config.plugins).forEach(([s,n])=>{n&&(n.init||!n.channel||!n.load||Rt.prototype.channelSubscribe(n.channel,r=>{r&&this.constructor.loadPlugin(e,s)},e))})}initMenusAndToggles(e){const{config:t}=e;t.toggles=t.toggles||{},e.advertiseAs(t.toggles,"ToggleConfig"),t.menus=t.menus||{},e.advertiseAs(t.menus,"MenuConfig"),t.groups=t.groups||{},e.advertiseAs(t.groups,"GroupConfig"),j.UI.activateShadowRoots?[...j.UI.shadowComponents.keys()].forEach(s=>s.fireConfigChange&&s.fireConfigChange()):[...e.topNode.querySelectorAll("cq-dropdown")].forEach(s=>s.fireConfigChange())}chartPositionSetter(e){let t=rr(".ciq-multi-chart-container",e.topNode);return t||(t=rr(".chartContainer",e.topNode)),function(n){if(!n)return;const{top:r,left:i}=n;Object.assign(t.style,{top:r+"px",marginLeft:i+"px",height:`calc(100% - ${r}px)`})}}sidenavSizeSetter(e){const t=rr(".ciq-multi-chart-container-wrapper, .ciq-chart-area",e.topNode);return e.stx,function(n){t.style.left=n+"px",j.getFnFromNS(e,"topNode.getCharts",[e.stx])().forEach(r=>r.resizeChart())}}chartAreaTopSetter(e){const t=rr(".ciq-chart-area",e.topNode);return function(n){let r=Object.values(n||{}).reduce((a,o)=>a+o,0);const i=e.topNode.querySelector(".cq-plugin-container");i&&(r=i.offsetHeight),t.style.marginTop=r+"px",e.stx.resizeChart()}}sidepanelSizeSetter(e){const{multiChartContainer:t}=e.topNode,s=rr(".ciq-multi-chart-container, .ciq-chart-area",t||e.topNode),n=e.stx;return function(r){s.style.marginRight=r+"px";const i=rr(".cq-plugin-container",e.topNode);i&&(i.style.marginRight=r+"px"),n.resizeChart()}}breakpointSetter(e){return function(s){let n=[["break-lg","break-md","break-sm"],["break-height-lg","break-height-md","break-height-sm"]];const r=[e.topNode];j.UI.shadowComponents.forEach((i,a)=>{i===e.topNode&&r.push(a)}),r.forEach(i=>{n.forEach(a=>{a.includes(s)&&i.classList.remove(...a)}),i.classList.add(s)})}}classSetter(e){return function(s){s&&j.UI.shadowComponents.forEach((n,r)=>{for(const[i,a]of Object.entries(s))n===e.topNode&&r.classList[a](i)})}}portalizeContainerIfInDifferentDocument(e){if(e.ownerDocument===document)return;const t=Object.keys(j.UI._webcomponents.list).join(","),s=Array.from(e.querySelectorAll(t)),n=s.filter(i=>!s.some(o=>o!==i&&o.contains(i)));e.matches("cq-context")||(e=e.querySelector("cq-context")),(e||{}).portalDoc=e.ownerDocument,n.forEach(i=>{r(i);const a=document.createElement("div");a.innerHTML=i.outerHTML,i.parentElement.replaceChild(a.firstChild,i)});function r(i){i.querySelectorAll("template").forEach(a=>{for(;a.firstChild;)a.content.append(a.firstChild)})}}}j.UI.Chart=uf;class hf{createCharts({containerId:e,chartsConfig:t},s){const n=!e||typeof e=="string"?document.querySelector(e||"cq-context"):e;n.styles={},n.isMultiChartHost=!0;const r=Array.from(n.querySelectorAll("cq-context-wrapper"));if(!r.length)throw"cq-context-wrapper element is required for multichart template setup";const i=r[0].outerHTML;let{charts:a,colCount:o,rowCount:c,gridTemplate:l,offgridCharts:u=[]}=t;a.slice(0,a.length-r.length).forEach(()=>{r[0].parentElement.insertAdjacentHTML("beforeend",i)});const h=n.querySelectorAll("cq-context");s.root=null,s.multiChartCopySymbol===null&&(s.initialSymbol=""),s.hotkeyConfig.hotkeys=s.hotkeyConfig.hotkeys.filter(({action:g,label:m})=>!/\btab\b/i.test(m)&&g!=="toggleDrawings");const d=new j.UI.Chart,f=a.map(({symbol:g,chartId:m},b)=>{const C=j.clone(s);C.initialSymbol=typeof g<"u"?g:C.initialSymbol,C.chartId=m||(s.chartId||"")+"_c"+j.uniqueID();const F=h[b];C.root=F,F.multiChartContainer=n;const{stx:w}=d.createChartAndUI({container:F,config:C});return this.initChart(F,C,w),w});d.createChartAndUI({container:n,config:s}),this.initContainer(n,s,i),this.setGridUI(n,o,c,l),f.forEach(g=>{g.setDrawingContainer(n.context.stx.drawingContainer),g.currentVectorParameters=n.context.stx.currentVectorParameters,g.preferences.drawings=n.context.stx.preferences.drawings}),na(s.channels.drawing||"channel.drawing",p,n.context.stx);let A;function p(g){n.classList[g?"add":"remove"]("toolbar-on");const{onDraw:m}=s.soloActive||{},{shouldSolo:b}=m||{},C=n.querySelector("cq-context-wrapper.active cq-context");if(n.activeRequests&&g&&(A=null),m&&n.soloActive&&C){const{stx:F}=C.CIQ.UI.context,w=typeof b!="function"||g&&b(F);(w||!g&&A===F)&&n.soloActive(g,"onDraw"),w&&(A=F)}n.context.stx.resizeChart()}return n.colCount=o,n.rowCount=c,n.gridTemplate=l,n.offgridCharts=u,n.updateLayout(),f}initContainer(e,t,s){const n=e.querySelector("cq-context");e.plugins=e.plugins||[],this.contextSwitcher(e),this.addChart(e,t,s),this.moveChart(e,t),this.removeChart(e,t),this.solo(e,t),this.toggleSolo(e,t),this.setColCount(e),this.setRowCount(e),this.setGridTemplate(e),this.cleanGridStyles(e),this.fillLayoutWithCharts(e),this.updateGridListener(e),this.updateLayout(e,t),this.utils(e),this.copyAttributes(n,e),setTimeout(()=>{e.switchContext(n.CIQ.UI.context)})}initChart(e,t,s){const n=j.UI.closestContextContainer(e.parentElement);s.keepDrawingToolSelected=t.keepDrawingToolSelected;let r;["mousedown","touchstart","pointerdown"].forEach(a=>{e.addEventListener(a,o=>{if(i())return;const c=o.target.closest("cq-context");if(c){const l=c.CIQ.UI.context;n.switchContext(l,o)}},!0)});function i(){const a=+new Date,o=a-r;if(r&&o<10)return!0;r=a}if(t.onMultiChartEvent){const a=()=>{t.onMultiChartEvent("chartDestroy",{stx:s}),s.removeEventListener("destroy",a)};s.addEventListener("destroy",a)}s.keepDrawingToolSelected===void 0&&(s.keepDrawingToolSelected=!0),s.preserveCandleWidthOnResize===null&&(s.preserveCandleWidthOnResize=!0),s.prepend("mousemoveinner",()=>{if(s.__notifiedExit)return;n.getCharts().forEach(o=>{o!==s&&(o.insideChart=o.overYAxis=o.overXAxis=!1,o.undisplayCrosshairs(),o.draw(),o.__notifiedExit=!1)}),s.__notifiedExit=!0}),j.UI.closestContextContainer(e,{isWrapper:!0}).close=function(){n.activeRequests&&n.toggleSolo({node:this}),n.removeChart(this)},j.UI.closestContextContainer(e,{isWrapper:!0}).move=function(a,o="after"){n.activeRequests&&n.toggleSolo({node:this}),n.moveChart(this,o)}}addChart(e,t,s){e.addChart=(n,r="after")=>{e.activeRequests&&e.toggleSolo({node:e.querySelector("cq-context-wrapper.active .ciq-solo-toggle")});let{node:i,symbol:a,chartId:o}=n||{};const c=i?j.UI.closestContextContainer(i,{isWrapper:!0}):e.querySelector("cq-context-wrapper.active");t.multiChartCopySymbol?a={...j.getFromNS(c.querySelector("cq-context"),"CIQ.UI.context.stx.chart.symbolObject")}:t.multiChartCopySymbol===null&&(a="");const{crosshair:l,headsUp:u}=c.querySelector("cq-context").CIQ.UI.context.stx.layout;let h;r==="after"?(c.insertAdjacentHTML("afterEnd",s),h=c.nextSibling):r==="before"&&(c.insertAdjacentHTML("beforeBegin",s),h=c.previousSibling),h.querySelector("cq-context").multiChartContainer=e,j.UI.BaseComponent.buildReverseBindings(h);const d=h.querySelector("cq-context"),f=j.clone(t);f.initialSymbol=typeof a<"u"?a:f.initialSymbol,f.chartId=o||`_c${j.uniqueID()}`,f.root=d;const A=f.createChart(d);A.layout.crosshair=l,A.layout.headsUp=Object.assign({},u),e.querySelectorAll("cq-info-toggle-dropdown").forEach(g=>g.initInfoComponents(e));const p=A.container.closest(".ciq-chart-area");return["static","dynamic"].forEach(g=>{const[m]=e.getCharts().slice(-1);m.uiContext.getAdvertised("Layout")[g]&&!p.querySelector("cq-hu-"+g)&&p.appendChild(document.createElement("cq-hu-"+g))}),e.setCurrentThemeClass&&e.setCurrentThemeClass(d,A),this.initChart(d,f,A),A.setDrawingContainer(e.context.stx.drawingContainer),A.currentVectorParameters=e.context.stx.currentVectorParameters,A.preferences.drawings=e.context.stx.preferences.drawings,e.updateLayout(),A}}moveChart(e,t){e.moveChart=(s,n="after")=>{const r=s||e.querySelector("cq-context-wrapper.active");let i=n=="before"?r.previousElementSibling:r.nextElementSibling;i&&(n=="after"&&(i=i.nextElementSibling),r.doNotDisconnect=!0,r.parentElement.insertBefore(r,i),delete r.doNotDisconnect),e.updateLayout()}}removeChart(e,t){e.removeChart=function(n){const r=n||e.querySelector("cq-context-wrapper:last-of-type"),i=r.classList.contains("active"),a=r.nextElementSibling||r.previousElementSibling;if(!a)return;i&&a.querySelector("cq-context").dispatchEvent(new Event("stxtap")),r.querySelector("cq-context").CIQ.UI.context.stx.destroy(),r.remove();const o=t.nameValueStore||j.NameValueStore,c=new o,l=j.getFromNS(r.querySelector("cq-context")||{},"CIQ.UI.context.config.chartId");if(j.getFromNS(r.querySelector("cq-context")||{},"CIQ.UI.context.config.chartId"),l){c.remove(`myChartLayout${l}`);const u=`${l||""}_drawings`;c.get(u,(h,d)=>{h||!d||(Object.keys(d).forEach(f=>{c.remove(f)}),c.remove(u))}),e.updateLayout()}e.switchContext(a.querySelector("cq-context").CIQ.UI.context)}}contextSwitcher(e){e.activeContext=e.CIQ.UI.context;const t=e.CIQ.UI.context;e.switchContext=(r,i)=>{if(o(i),r===e.activeContext)return;this.getCommonUI(e).forEach(c=>s(c,r)),n(r),e.plugins.forEach(c=>{c.switchContext&&c.switchContext(r)}),Array.from(e.querySelectorAll("cq-context-wrapper")).forEach(c=>{const l=c.querySelector("cq-context").CIQ.UI.context;c.classList.toggle("active",r===l)}),e.activeContext=r,j.getFnFromNS(r,"config.onMultiChartEvent")("contextSwitch",{prev:e.activeContext,context:r});function o(c){if(c&&!r.stx.chart.symbolObject.symbol){if(c.target.closest("cq-menu"))return;j.UI.getUIManager(c.target).closeTopMenu(),c.stopPropagation();const u=e.querySelector(".ciq-search cq-lookup cq-lookup-input input");if(u){setTimeout(()=>{u.click(),u.focus()});return}const h=(r.config.channels||{}).dialog||"channel.dialog",{channelWrite:d}=j.UI.BaseComponent.prototype;d(h,{type:"lookup",params:{context:r}},r.stx)}}};function s(r,i){if(r.changeContext){r.changeContext(i);return}r.stx&&(r.stx=i.stx),r.context&&(r.context=i)}function n(r){Object.values(t.advertised).forEach(i=>{i.changeContext&&i.changeContext(r)})}}solo(e,t){const{freezeEngineRendering:s,transitionToSolo:n,transitionFromSolo:r}=this;e.resized=-1,e.soloActive=(i,a)=>{let{activeRequests:o=0}=e;const c=o;if(!i&&a!=="toggle"&&e.soloType==="toggle")return;i&&o===0&&(e.soloType=a),o+=i?1:o?-1:0,a==="toggle"&&!i&&(o=0),Object.assign(e,{activeRequests:o});const l=e.querySelector("cq-context-wrapper.active");if(!l)return;o?setTimeout(()=>{n(e,s)},100):r(e);const u=l.querySelector("cq-context").context.stx;if(i){const h=j.getFromNS(t,`soloActive.${a}.notify`);!c&&h&&e.classList.contains("ciq-multi-chart")&&u.dispatch("notification",h)}else o||(Object.values(t.soloActive||{}).filter(h=>h.notify).forEach(({notify:h})=>{u.dispatch("notification",Object.assign({},h,{remove:!0}))}),e.plugins.forEach(h=>{h.deactivateOnGrid&&h.deactivateOnGrid()}))}}freezeEngineRendering(e){const t={draw(){},resizeChart(){}};function s(u){const{draw:h,resizeChart:d}=u;return Object.assign(u,t),{draw:h,resizeChart:d}}let n=0;const{quoteDriver:r}=e;r&&(n=r.behavior.refreshInterval,r.resetRefreshInterval(r.behavior.backgroundRefreshInterval||0));const{slider:i}=e.slider||{},{marketDepth:a}=e.marketDepth||{},o=s(e),c=s(i||{}),l=s(a||{});return()=>{Object.assign(e,o),r&&r.resetRefreshInterval(n),i&&Object.assign(i,c),a&&Object.assign(a,l),e.draw()}}transitionToSolo(e,t){const s=e.querySelector(".ciq-multi-chart-container"),{top:n,left:r}=s.getBoundingClientRect(),i=[];e.querySelectorAll("cq-context-wrapper").forEach(a=>{const o=a.classList.contains("active");if(!o){const d=a.querySelector("cq-context").CIQ.UI.context.stx;a.restoreDraw=t(d),setTimeout(()=>{a.style.visibility="hidden"},550)}const{height:c,width:l,top:u,left:h}=a.getBoundingClientRect();i.push({el:a,style:{height:c+"px",width:l+"px",top:u-n+"px",left:h-r+"px"},className:o?"ciq-solo":"ciq-solo-minimized"})}),e.classList.add("ciq-solo"),i.forEach(({el:a,style:o,className:c})=>{Object.assign(a.style,o),setTimeout(()=>{a.classList.add(c)},50)}),e.rHandle=j.resizeObserver(e,()=>{e.resized+=1})}transitionFromSolo(e){const t=e.querySelectorAll("cq-context-wrapper");t.forEach(s=>{s.classList.remove("ciq-solo-minimized","ciq-solo"),e.resized||(s.style.visibility="")}),setTimeout(()=>{e.classList.remove("ciq-solo"),t.forEach(s=>{s.classList.remove("ciq-solo-minimized","ciq-solo"),Object.assign(s.style,{height:"",width:"",top:"",left:"",visibility:""}),s.restoreDraw&&(s.restoreDraw(),delete s.restoreDraw)})},e.resized?0:350),j.resizeObserver(e,null,e.rHandle),e.resized=-1}toggleSolo(e,t){e.toggleSolo=({node:s})=>{const r=j.UI.closestContextContainer(s,{isWrapper:!0}).querySelector("cq-context").CIQ.UI.context;if(e.activeRequests){const{drawing:i="channel.drawing",tfc:a="channel.tfc"}=t.channels||{},{channelWrite:o}=j.UI.BaseComponent.prototype;o(i,!1,r.stx),o(a,!1,r.stx),e.soloActive(!1,"toggle")}else j.UI.closestContextContainer(s,{isWrapper:!0}).classList.contains("active")||e.switchContext(r),e.soloActive(!0,"toggle")}}setColCount(e){e.setColCount=function(s){e.gridTemplate="",e.colCount=s,e.updateLayout()}}setRowCount(e){e.setRowCount=function(s){e.gridTemplate="",e.rowCount=s,e.updateLayout()}}setGridTemplate(e){e.setGridTemplate=function(s){e.colCount="",e.rowCount="",e.gridTemplate=s,e.updateLayout()}}cleanGridStyles(e){e.cleanGridStyles=function(s){const r=e.querySelector("cq-grid-size-picker").templates.split(" "),i=e.querySelector(".ciq-multi-chart-container");i.style.gridTemplateRows="",i.style.gridTemplateColumns="",i.className=i.className.split(" ").filter(a=>!r.includes(a)).join(" ")}}fillLayoutWithCharts(e){e.fillLayoutWithCharts=function(){const s=e.querySelector(".ciq-multi-chart-container");if(!s)return;const n=getComputedStyle(s);let r=0;n.gridTemplateAreas&&n.gridTemplateAreas!="none"?r=[...new Set(n.gridTemplateAreas.match(/([a-z])+/gi))].length:n.getPropertyValue("--grid-dimension")?(r=parseInt(n.getPropertyValue("--grid-dimension"))||0,r++):r=parseInt(e.rowCount)*parseInt(e.colCount);const{restoreOffgridCharts:i}=e.CIQ.UI.context.config;let{offgridCharts:a}=e;for(;r&&s.childElementCount!==r;)if(s.childElementCount>r){const o=e.querySelector("cq-context-wrapper:last-of-type").querySelector("cq-context").CIQ.UI.context.config,c=o.chartId;i&&a.push(c),o.chartId="",e.removeChart()}else{const o=s.querySelector("cq-context-wrapper:last-of-type cq-context"),c=i?a.pop():void 0;if(e.addChart({node:o,chartId:c}),s.childElementCount>=25)break}i&&e.updateLayout()}}updateGridListener(e){e.addEventListener("update-grid",({detail:{columns:t,rows:s,template:n,container:r}})=>{r===e&&(n?e.setGridTemplate(n):t&&s&&(e.setColCount(t),e.setRowCount(s)),e.fillLayoutWithCharts())})}updateLayout(e,t){e.updateLayout=function(){const s=t.nameValueStore||j.NameValueStore,n=new s,r=Array.from(e.ownerDocument.querySelectorAll("cq-context-wrapper"),h=>{const d=j.getFromNS(h.querySelector("cq-context")||{},"CIQ.UI.context.config.chartId");if(d)return{chartId:d}}).filter(h=>h);n.set("multiCharts"+(t.multiChartId||""),{charts:r,colCount:e.colCount,rowCount:e.rowCount,gridTemplate:e.gridTemplate,offgridCharts:e.offgridCharts}),e.classList[r.length>1?"add":"remove"]("ciq-multi-chart"),e.cleanGridStyles();const i=e.querySelector(".ciq-multi-chart-container");e.gridTemplate?i.classList.add(e.gridTemplate):e.rowCount&&e.colCount&&(i.style.gridTemplateColumns=Array(parseInt(e.colCount)).fill("1fr").join(" ")),i.style.setProperty("--orphan-span-start","1");const a=getComputedStyle(i),o=i.childElementCount,l=a.gridAutoFlow=="column"?a.gridTemplateRows.split(" ").length:a.gridTemplateColumns.split(" ").length,u=o%l||l;i.style.setProperty("--orphan-span-start",u)}}copyAttributes(e,t){e.getAttributeNames().filter(s=>/-feature$/.test(s)).forEach(s=>t.setAttribute(s,e.getAttribute(s)))}getCommonUI(e){return t(".ciq-nav, .ciq-footer",e).filter(s=>s.localName!=="cq-themes"&&s.localName!=="cq-info-toggle-dropdown"&&s.localName!=="cq-side-nav"&&!s.classList.contains("ciq-sidenav")&&!s.classList.contains("ciq-draw")&&!s.classList.contains("ciq-shortcut-button")&&!s.matches("cq-toggle[member=tfc], cq-toggle[cq-member=tfc]"));function t(s,n){return s.split(/, |,/g).reduce((r,i)=>{const a=n.querySelector(i);if(!a)return r;const o=Array.from(a.querySelectorAll("*"));return r.concat(o)},[])}}setGridUI(e,t,s,n){const r=e.querySelector("cq-grid-size-picker");r&&(r.generateTable(+t+1,+s+1),r.highlightTable(+t,+s),r.highlightTemplate(n))}utils(e){e.getChartContainers=()=>Array.from(e.querySelectorAll("cq-context")).map(t=>t.querySelector(".chartContainer")).concat(e.CIQ.UI.context.stx.container),e.getCharts=()=>e.getChartContainers().map(({stx:t})=>t)}}j.UI.Multichart=hf;j.UI.setDefaultStates=function(E){const e=E.config.ariaActive;if(e===null)return;e&&e.length?e.forEach(s=>{let n=E.topNode.querySelector(s);n&&t(n)}):E.topNode.ariaHidden="true";function t(s){const n=s.parentElement;n&&([...n.children].forEach(r=>{r.ariaHidden=s!==r&&r.ariaHidden!=="false"}),!(n.ariaHidden==="false"||n.matches("cq-context"))&&t(n))}};class Qa{constructor(e,t){t!==void 0&&console.log("CIQ.UI.$() only accepts one input parameter.");let s=[];if(e instanceof Qa)return e;Array.isArray(e)&&(s=e),typeof e=="object"?e.ownerDocument?s.push(e):(e.toString()==="[object NodeList]"||e.toString()==="[object HTMLCollection]")&&(s=Array.from(e)):typeof e=="string"&&(console.log("Note: string argument for CIQ.UI.$(element) deprecated and may be removed in the future"),s=s=Array.from(document.querySelectorAll(e)));const n=this.length=s.length;for(let r=0;r<n;r++)this[r]=s[r]}_(e,t){const s=[],n=r=>{(!t||r.matches(t))&&(s.includes(r)||s.push(r))};for(let r=0;r<this.length;r++){const i=this[r];Array.from(e(i)).forEach(n)}return new Qa(s)}addClass(e){return typeof e=="string"&&(e=e.split(" ")),e.forEach(t=>this._(s=>(s.classList.add(t),[s]))),this}append(e,t){if(typeof t<"u"&&console.log("CIQ.UI.$#append only accepts one argument."),e instanceof Array)for(let s=0;s<e.length;s++)this.append(e[s]);else{if(typeof e=="string")return this._(s=>(s[e[0]==="<"?"innerHTML":"innerText"]+=e,[s]));if(e.ownerDocument){const s=this._(r=>(r.appendChild(e.cloneNode(!0)),[r])),n=s[s.length-1];return n.replaceChild(e,n.lastChild),s}else if(e[0])return this.append(Array.from(e))}return this}attr(e,t){if(typeof e=="object")return this._(s=>(Object.keys(e).forEach(n=>s.setAttribute(n,e[n])),[s]));if(typeof t>"u"){if(!this[0])return;const s=this[0].getAttribute(e);return s===null?void 0:s}return this._(s=>(s.setAttribute(e,t),[s]))}children(e){return this._(t=>t.children,e)}css(e,t){return typeof e=="object"?this._(s=>(Object.assign(s.style,e),[s])):typeof t>"u"?this[0]?getComputedStyle(this[0])[e]:void 0:this._(s=>(s.style[e]=t,[s]))}each(e){for(let t=0;t<this.length;t++)e.call(this[t],t,this[t]);return this}empty(){return this._(e=>(e.innerHTML="",[e]))}find(e){return e?this._(t=>t.querySelectorAll(e)):new Qa([])}hasClass(e){return this._(t=>t.classList.contains(e)&&[t]).length>0}hide(){return this._(e=>(e.style.display!=="none"&&(e.style.displayCache=e.style.display,e.style.display="none"),[e]))}html(e){return this.prop("innerHTML",e)}nextAll(e){return this._(t=>{const s=Array.from(t.parentNode.children);return s.slice(s.indexOf(t)+1)},e)}not(e){return this._(t=>!t.matches(e)&&[t])}parent(e){return this._(t=>[t.parentNode],e)}parents(e){return this._(t=>j.climbUpDomTree(t.parentElement,e)||[])}prop(e,t){return typeof e=="object"?this._(s=>(Object.keys(e).forEach(n=>s[n]=e[n]),[s])):typeof t>"u"?this[0]?this[0][e]:void 0:this._(s=>(s[e]=t,[s]))}remove(e){return Array.from(this).forEach(t=>{(!e||t.matches(e))&&t.parentNode.removeChild(t)}),this}removeAttr(e){return typeof e=="string"&&(e=e.split(" ")),e.forEach(t=>this._(s=>(s.removeAttribute(t),[s]))),this}removeClass(e){return typeof e=="string"&&(e=e.split(" ")),e?e.forEach(t=>this._(s=>(s.classList.remove(t),[s]))):this._(t=>(t.className="",[t])),this}show(){return this._(e=>(e.style.display==="none"&&(e.style.displayCache===void 0?e.style.display="block":(e.style.display=e.style.displayCache,e.style.displayCache=void 0)),[e]))}text(e){return this.prop("innerText",e)}val(e){return this.prop("value",e)}}j.UI.$=function(E,e){return!e&&typeof $=="function"&&$.fn?(mo||(console.log("Using jQuery."),mo=!0),$(E)):new Qa(E)};let mo=!1;class df{constructor(e,t){this.pluginName=t,this.params=e,this.addToDom(),this.subscribe()}addToDom(){const{params:e,pluginName:t}=this,{topNode:s,topNode:{multiChartContainer:n}}=e.context,r=n||s;if(!r.querySelector(`div.${t}-container`)){const i=document.createElement("div");i.classList.add("ciq-"+t,e.location),i.setAttribute("disabled",""),(e.location==="right"?r.querySelector("cq-side-panel"):r.querySelector(".cq-plugin-container")).appendChild(i),this.node=i}if(typeof e.container=="string"&&(e.container=r.querySelector(e.container)),e.container&&!e.container.querySelector(`[member=${t}]`)){const i=document.createElement("div");j.innerHTML(i,e.toggleMarkup),[...i.childNodes].map(a=>e.container.appendChild(a.cloneNode(!0)))}}subscribe(){const{params:e,pluginName:t}=this,{config:s}=e.context;s&&!s.channels[t]&&(s.channels[t]=`channel.${t}`);const n=(s.channels||{})[t]||`channel.${t}`;this.activationSubscription=Rt.prototype.channelSubscribe(n,r=>{this.node&&(r?(this.render&&this.render(),this.node.removeAttribute("disabled")):(this.node.setAttribute("disabled",""),this.unrender&&this.unrender()))},e.context.stx)}}j.UI.SidePanelPlugin=df;let ff=E=>{const e=typeof _CIQ<"u"?_CIQ:E.CIQ;class t extends e.UI.ContextTag{constructor(){super(),this.abstracts={helicopter:`
				<div class="sample">
					<div stage>
						<div helicopter>
							<div propeller style="height: 160px;">
								<div spinner style="-webkit-transform-origin: 40px 0 0; transform-origin: 40px 0 0;">
									<div style="-webkit-transform: rotateY(0deg) translateX(40px); transform: rotateY(0deg) translateX(40px);"></div>
									<div style="-webkit-transform: rotateY(-90deg) translateX(40px); transform: rotateY(-90deg) translateX(40px);"></div>
									<div style="-webkit-transform: rotateY(-180deg) translateX(40px); transform: rotateY(-180deg) translateX(40px);"></div>
									<div style="-webkit-transform: rotateY(-270deg) translateX(40px); transform: rotateY(-270deg) translateX(40px);"></div>
								</div>
							</div>
							<div heli-body></div>
						</div>
					</div>
					<div class="text">This is an example of a complex marker which can contain html, video, images, css, and animations.</div>
				</div>
			`}}adoptedCallback(){super.adoptedCallback(),e.UI.flattenInheritance(this,t),this.constructor=t}init(){const n=this.getAttribute("cq-type")||"helicopter";let{markup:r}=this.constructor;r=r.replace(/\{\{dom\}\}/g,this.abstracts[n]),this.addDefaultMarkup(null,r)}setContext(n){if(n.config){const{abstractMarkers:r}=n.config;e.extend(this.abstracts,r)}this.init()}}t.markup=`
	<div class="stx-marker-templates" style="left: -1000px; visibility:hidden;">
		<!-- Abstract Markers. You can remove this unless you actually need a helicopter. Seriously though, markers can be anything you want them to be! -->
		<div class="abstract">
			<div class="stx-marker abstract">
				<div class="stx-marker-content">
					{{dom}}
				</div>
			</div>
		</div>
	</div>
	`,e.UI.addComponentDefinition("cq-abstract-marker",t)},pf=E=>{const e=typeof _CIQ<"u"?_CIQ:E.CIQ;if(!e.Marker)console.error("advertisement component requires first activating markers feature.");else{class t extends e.UI.ModalTag{constructor(){super()}connectedCallback(){!this.isConnected||this.attached||(super.connectedCallback(),this.style.display="none",this.name=this.getAttribute("name")||"default")}adoptedCallback(){super.adoptedCallback(),e.UI.flattenInheritance(this,t)}close(){this.style.display="none",this.nameValueStore.get("cq-advertisement",(n,r)=>{if(n)return;const i=new Date;this.sleepAmount||(this.sleepAmount={units:1,unitType:"day"});const{units:a,unitType:o}=this.sleepAmount;o=="minute"?i.setMinutes(i.getMinutes()+a):o=="hour"?i.setHours(i.getHours()+a):o=="day"?i.setDate(i.getDate()+a):o=="week"?i.setDate(i.getDate()+a*7):o=="month"&&i.setMonth(i.getMonth()+a);const c=i.getTime();(!r||typeof r!="object")&&(r={}),r[this.name]=c,this.nameValueStore.set("cq-advertisement",r)})}makeMarker(){this.markerExists||(e.Marker({stx:this.context.stx,xPositioner:"none",label:"advertisement",permanent:!0,node:this}),this.markerExists=!0)}setContext(n){const{config:{nameValueStore:r}}=n;this.setNameValueStore(r),this.show()}setNameValueStore(n){!n&&e.NameValueStore&&(n=e.NameValueStore),this.nameValueStore=n?new n:{get:function(){},set:function(){}}}setSleepAmount(n,r){this.sleepAmount={units:n,unitType:r}}show(n,r=!1){if(this.selector){const a=this.querySelector(this.selector);a&&a.classList.remove("ciq-show")}this.selector=n||"[content]",this.ignoreSleep=r;const i=()=>{this.makeMarker(),this.style.display="block";const a=this.querySelector(this.selector);a&&a.classList.add("ciq-show"),this.style.height="0px",setTimeout(()=>this.style.height=this.scrollHeight+"px",0)};r?i():this.nameValueStore.get("cq-advertisement",(a,o)=>{if(a)return;(!o||typeof o!="object")&&(o={});const c=o[this.name];c&&c>Date.now()||i()})}watchForRemoteClose(n){n||(n=1e3),setInterval(()=>{this.style.display!=="none"&&this.nameValueStore.get("cq-advertisement",(r,i)=>{if(r)return;(!i||typeof i!="object")&&(i={});const a=i[this.name];a&&a>Date.now()&&this.close()})},n)}}e.UI.addComponentDefinition("cq-advertisement",t)}},Af=E=>{const e=typeof _CIQ<"u"?_CIQ:E.CIQ;class t extends e.UI.DialogContentTag{adoptedCallback(){super.adoptedCallback(),e.UI.flattenInheritance(this,t),this.constructor=t}open(n){this.addDefaultMarkup(),super.open(n),this.dialog=this.closest("cq-dialog");const{stx:r}=this.context,{aggregationType:i}=n,a={kagi:{title:"Set Reversal Percentage"},renko:{title:"Set Brick Size"},linebreak:{title:"Set Price Lines"},rangebars:{title:"Set Range"},pandf:{title:"Set Point & Figure Parameters"}};r.layout.aggregationType!=i&&r.setAggregationType(i);let o=a[i];this.dialog.setTitle(r.translateIf(o.title));for(let c in a){const l=this.querySelector(".ciq"+c);l.style.display=i===c?"":"none"}[...this.querySelectorAll(".ciq"+i+" input")].forEach(c=>{const{name:l}=c,u=l=="box"||l=="reversal"?"pandf."+l:l,h=e.deriveFromObjectChain(r.layout,u);h&&(h.obj[h.member]||h.obj[h.member]===0)?c.value=h.obj[h.member]:r.chart.defaultChartStyleConfig[c.name]&&(c.value=r.chart.defaultChartStyleConfig[c.name])})}postProcess(n){this.emitCustomEvent({effect:"change",action:"input",detail:n})}}t.markup=`
	<div style="text-align:center;margin-top:10px;">
	<div class="ciqkagi">
		<label>
			<em>Enter value and hit "Enter"</em>
			<br>
			<input name="kagi" stxtap="Layout.setAggregationEdit('kagi')">
		</label>
	</div>
	<div class="ciqrenko">
		<label>
			<em>Enter value and hit "Enter"</em>
			<br>
			<input name="renko" stxtap="Layout.setAggregationEdit('renko')">
		</label>
	</div>
	<div class="ciqlinebreak">
		<label>
			<em>Enter value and hit "Enter"</em>
			<br>
			<input name="priceLines" stxtap="Layout.setAggregationEdit('priceLines')">
		</label>
	</div>
	<div class="ciqrangebars">
		<label>
			<em>Enter value and hit "Enter"</em>
			<br>
			<input name="range" stxtap="Layout.setAggregationEdit('rangebars')">
		</label>
	</div>
	<div class="ciqpandf">
		<label>
			<em>Enter box size and hit "Enter"</em>
			<br>
			<input name="box" stxtap="Layout.setAggregationEdit('pandf.box')">
		</label>
		<br>
		<label>
			<em>Enter reversal and hit "Enter"</em>
			<br>
			<input name="reversal" stxtap="Layout.setAggregationEdit('pandf.reversal')">
		</label>
	</div>
		<p>or</p>
		<div class="ciq-btn" stxtap="Layout.setAggregationEdit('auto')">Auto Select</div>
	</div>
	`,e.UI.addComponentDefinition("cq-aggregation-dialog",t)},gf=E=>{const e=typeof _CIQ<"u"?_CIQ:E.CIQ;if(!e.Marker)console.error("attribution component requires first activating markers feature.");else{class t extends e.UI.ModalTag{constructor(){super(),this.messages={sources:{},exchanges:{}}}adoptedCallback(){super.adoptedCallback(),e.UI.flattenInheritance(this,t),this.constructor=t}insert(n,r){if(!e.Marker)return;const i=e.UI.makeFromTemplate(this.template)[0];return i.marker=new e.Marker({stx:n,node:i,xPositioner:"none",yPositioner:"none",label:"component",panelName:r,permanent:!0}),i}setContext(n){if(this.addDefaultMarkup(),n.config){const{attributions:i}=n.config;i&&(e.extend(this.messages.sources,i.sources),e.extend(this.messages.exchanges,i.exchanges))}this.template=this.querySelector("template"),this.marker=this.insert(n.stx,"chart");const r=this;this.addInjection("append","createDataSet",function(){return r.displayAttribution(this)}),this.displayAttribution()}displayAttribution(n){n||(n=this.context.stx);const{chart:r,layout:i}=n,a=this.marker;let o,c;r.attribution&&(o=this.messages.sources[r.attribution.source],c=this.messages.exchanges[r.attribution.exchange],o||(o=""),c||(c=""),o+c!=a.getAttribute("last-attrib")&&(a.querySelector("[attrib-source]").innerHTML=o,a.querySelector("[attrib-quote-type]").innerHTML=c,n.translateUI&&n.translateUI(a[0]),a.setAttribute("last-attrib",o+c)));for(let l in i.studies){const u=i.studies[l],{type:h}=u;if(this.messages.sources[h]){if(u.attribution&&u.attribution.marker.params.panelName==u.panel)continue;o=this.messages.sources[h]||"",c=this.messages.exchanges[h]||"";const d=this.insert(n,u.panel);d.querySelector("[attrib-source]").innerHTML=o,d.querySelector("[attrib-quote-type]").innerHTML=c,n.translateUI&&n.translateUI(d),u.attribution=d}}}}t.markup=`
		<template>
			<div attrib-container>
				<span attrib-source></span>&nbsp;
				<span attrib-quote-type></span>
			</div>
		</template>
	`,e.UI.addComponentDefinition("cq-attribution",t)}},mf=E=>{const e=typeof _CIQ<"u"?_CIQ:E.CIQ;class t extends e.UI.ContextTag{adoptedCallback(){super.adoptedCallback(),e.UI.flattenInheritance(this,t),this.constructor=t}setContext(n){this.addDefaultMarkup(),this.content=this.querySelector(".content");const{config:{hotkeyConfig:r={}}={}}=this.context;if(r.hotkeys){const i=r.hotkeys.filter(a=>a.ariaLabel);this.setHotKeyCommands(i)}}setHotKeyCommands(n){n.map(i=>{const{commands:a,label:o,ariaLabel:c}=i,l=[];a.forEach(h=>l.push(h.split("+").map(d=>d.replace("Key","")).join(" + ")));const u=l.length>1?l.join(" or "):l[0];return`${o}: ${c}. Press (${u}).`}).forEach(i=>{const a=document.createElement("LI");a.innerText=i,this.content.append(a)})}}t.markup=`
<p role="region">Instructions for use with screen readers.</p>
<span role="article">
	<p>The following is a list of keyboard commands available to interact with the chart:</p>
	<ul class="content"></ul>
	<div>End of instructions.</div>
</span>
`,e.UI.addComponentDefinition("cq-chart-instructions",t)},yf=E=>{const e=typeof _CIQ<"u"?_CIQ:E.CIQ;class t extends e.UI.ModalTag{static get observedAttributes(){return["display-exchange","cq-previous-close","cq-browser-tab","cq-activate-symbol-search-on-click"]}constructor(){super(),this.previousClose=null}adoptedCallback(){super.adoptedCallback(),e.UI.flattenInheritance(this,t),this.constructor=t}disconnectedCallback(){this.doNotDisconnect||(this.listeners&&(e.UI.unobserveProperty("symbolObject",this.context.stx.chart,this.listeners.symbolObject),e.UI.unobserveProperty("language",this.context.stx.preferences,this.listeners.language)),super.disconnectedCallback())}handlePropertyChange(n,r,i){if(i!==r){if(this[n]=i,n==="display-exchange"){this.updateExchange();return}else n==="cq-browser-tab"?this.updateBrowserTab=!["false","0",null].includes(i):n==="cq-previous-close"?this.previousClose=+i:n==="cq-activate-symbol-search-on-click"&&this.handleSymbolSearchChange();this.update()}}begin(){const n=this;this.addInjection("append","createDataSet",function(){n.update()}),this.update()}initialize(n){this.params=n||{},typeof this.params.autoStart>"u"&&(this.params.autoStart=!0),this.marker=null,this.params.autoStart&&this.begin()}setContext(n){if(this.listeners)return;const r=n.stx;let{markup:i}=this.constructor;this.handleSymbolSearchChange(),this.addDefaultMarkup(this,i),this.symbolDiv=this.querySelector("cq-symbol"),this.symbolDescriptionDiv=this.querySelector("cq-symbol-description"),this.currentPriceDiv=this.querySelector("cq-current-price"),this.todaysChangeDiv=this.querySelector("cq-todays-change"),this.todaysChangePctDiv=this.querySelector("cq-todays-change-pct"),this.chartPriceDiv=this.querySelector("cq-chart-price"),this.changeDiv=this.querySelector("cq-change"),this.exchangeDiv=this.querySelector(".exchange"),this.accessibleChange=this.querySelector("[accessiblechange]"),this.listeners={language:()=>setTimeout(()=>this.update(!0),100),symbolObject:()=>this.updateExchange()},e.UI.observeProperty("language",r.preferences,this.listeners.language),e.UI.observeProperty("symbolObject",r.chart,this.listeners.symbolObject),this.initialize()}updateExchange(){if(!this.context)return;const{symbolObject:n}=this.context.stx.chart,{exchangeDiv:r}=this;this.displayExchange!=null&&n.exchDisp?r.innerText=`Exchange: ${n.exchDisp}`:n.static?r.innerText="STATIC":r.innerText=""}update(n){if(!this.context)return;const{stx:r}=this.context,{chart:{symbol:i,symbolObject:a,symbolDisplay:o},internationalizer:c}=r,{symbolDiv:l,symbolDescriptionDiv:u,exchangeDiv:h,currentPriceDiv:d,changeDiv:f,chartPriceDiv:A,todaysChangeDiv:p,todaysChangePctDiv:g,accessibleChange:m}=this,b=this.closest("cq-context-wrapper"),C=!b||b&&b.classList.contains("active"),F=this.updateBrowserTab&&C,w=A&&d;let U=!1,B=!1,k=i?"add":"remove";this.classList[k]("stx-show");const y=a.display||i;if(l.innerText!==y&&(l.innerText=y,B=!0),u&&u.innerText!==(o||i)&&(u.innerText=o||i),r.isHistoricalModeSet){d.innerText!==""&&(d.innerText=""),f.style.display="none";return}let S="",T=0,_="";const L=r.getFirstLastDataRecord(r.chart.dataSet,"Close",!0);let H="",P="";if(L&&(H=L.Close),w){H!==""&&(P=r.formatYAxisPrice(H,r.chart.panel,r.chart.decimalPlaces));let N=parseFloat(d.nativePrice);if(d.innerText!==P){d.innerText=P,d.nativePrice=H,U=!0;const v=this.currentPriceDiv.getAttribute("cq-animate");typeof v<"u"&&e.UI.animatePrice(d,H,N,v=="fade")}}if(n||(w||F)&&i&&(B||U)){let N=this.previousClose;!N&&N!==0&&(N=L&&L.iqPrevClose),!N&&N!==0&&(N=this.mostRecentClose),f&&(H||H===0)?(S=e.fixPrice(H-N),T=S/N*100,N<=0||H<0?_="N/A":c?_=c.percent2.format(T/100):(_=T.toFixed(2)+"%",T>0&&(_="+"+_)),f.style.display=""):f&&(f.style.display="none");const v=Math.abs(S),x=r.formatYAxisPrice(v,r.chart.panel,r.chart.decimalPlaces);if(v&&p.innerText!==x&&(p.innerText=x),g){const Q="("+_+")";g.innerText!==Q&&(g.innerText=Q)}_!==""&&S<0?A.classList.add("stx-down"):A.classList.remove("stx-down"),_!==""&&S>0?A.classList.add("stx-up"):A.classList.remove("stx-up");const M=S>0?"+":"",D=`${M}${S} (${M}${_})`;if(m.innerText!==D&&(m.innerText=D),H=H!==void 0?H:"",S=S!==void 0?S:"",F){let Q=y+" ​ ​ "+P+" ​ ​ ​ ";S>0?Q+="▲ "+x:S<0&&(Q+="▼ "+x),this.ownerDocument.title=Q}}}handleSymbolSearchChange(){const n=!["false","0",null].includes(this.getAttribute("cq-activate-symbol-search-on-click")),r=this.querySelector("[selector=cq-lookup-dialog]"),i=this.querySelector("cq-symbol");r&&(n?r.append(i):r.before(i))}}t.markup=`
		<cq-clickable role="button" selector="cq-lookup-dialog" method="open" title="Symbol Search">
			<cq-symbol class="hide-outline"></cq-symbol>
		</cq-clickable>
		<cq-menu class="ciq-period" config="period" reader="Periodicity" text binding="Layout.periodicity" title="Interval Selector" lift-dropdown></cq-menu>
		<cq-chart-price>
			<span id="pricelabel" hidden>Current Price</span>
			<div role="group" aria-labelledby="pricelabel">
				<cq-current-price role="marquee" cq-animate></cq-current-price>
			</div>
			<span>
				<span id="changelabel" hidden>Change</span>
				<div role="group" aria-labelledby="changelabel">
					<div class="ciq-screen-reader" accessiblechange role="marquee"></div>
				</div>
				<cq-change aria-hidden="true">
					<div class="ico"></div>
					<cq-todays-change></cq-todays-change>
					<cq-todays-change-pct></cq-todays-change-pct>
				</cq-change>
			</span>
		</cq-chart-price>
		<div class="exchange"></div>
	`,e.UI.addComponentDefinition("cq-chart-title",t)},vf=E=>{const e=typeof _CIQ<"u"?_CIQ:E.CIQ;class t extends e.UI.ContextTag{static get observedAttributes(){return["method","selector"]}constructor(){super(),e.UI.makeShadow(this)}connectedCallback(){!this.isConnected||this.attached||(super.connectedCallback(),e.UI.stxtap(this,n=>{e.climbUpDomTree(this,"cq-menu",!0).length||n.stopPropagation(),this.runMethod(),this.emitCustomEvent({effect:"click"})}),this.setAttribute("role","button"),this.setupShadow())}adoptedCallback(){super.adoptedCallback(),e.UI.flattenInheritance(this,t)}runMethod(){const n=this.selector,r=this.method;if(!n||!r)return;const{context:i}=this;if(/-dialog/.test(n)&&r==="open"&&i.config){const o=(i.config.channels||{}).dialog||"channel.dialog";this.channelWrite(o,{type:n.replace(/cq-|-dialog/g,""),params:{context:i,caller:this,initiatingMenu:e.climbUpDomTree(this,"cq-menu",!0)[0]}},i.stx);return}const a=this;this.qsa(n,this.context.topNode,!0).forEach(function(o){o[r]&&o[r].call(o,{context:a.context,caller:a})})}setContext(n){this.addDefaultMarkup()}}e.UI.addComponentDefinition("cq-clickable",t)},xf=E=>{const e=typeof _CIQ<"u"?_CIQ:E.CIQ;class t extends e.UI.BaseComponent{connectedCallback(){!this.isConnected||this.attached||(e.UI.stxtap(this,n=>{this.tap(),n.stopPropagation()}),super.connectedCallback())}adoptedCallback(){super.adoptedCallback(),e.UI.flattenInheritance(this,t)}tap(){e.UI.containerExecute(this,"close",!0),this.emitCustomEvent({effect:"close"})}}e.UI.addComponentDefinition("cq-close",t)},bf=E=>{const e=typeof _CIQ<"u"?_CIQ:E.CIQ;class t extends e.UI.ModalTag{constructor(){super(),this.swatchColors=[],this.loading=[],this.find=n=>this.qsa(n,this,!0)[0],e.UI.makeShadow(this)}connectedCallback(){if(!(!this.isConnected||this.attached)){if(super.connectedCallback(),this.swatchColors=["#8ec648","#00afed","#ee652e","#912a8e","#fff126","#e9088c","#ea1d2c","#00a553","#00a99c","#0056a4","#f4932f","#0073ba","#66308f","#323390"],this.isShadowComponent&&this.children.length)for(;this.children.length;)this.root.appendChild(this.firstChild);this.markup=this.trimInnerHTMLWhitespace(),this.usingMarkup=!!this.markup.match(/\{\{(.{1,20}?)\}\}/g),this.setMarkup(),this.setupShadow()}}adoptedCallback(){super.adoptedCallback(),e.UI.flattenInheritance(this,t),this.constructor=t}disconnectedCallback(){this.doNotDisconnect||(this.removeClaim(this),super.disconnectedCallback())}handlePropertyChange(n,r,i){r!==i&&(this[n]=i,this.usingMarkup&&this.setMarkup())}configureUI(){const n=this.find(".addswatch.seriesId");this.template=this.find("template[cq-comparison]");const r=(this.find("cq-swatch")||document.createElement("a")).getAttribute("cq-colors");r&&(this.swatchColors=r.split(",")),this.swatchColors=e.convertToNativeColor(this.swatchColors);const i=this.find("cq-lookup");i&&i.setCallback(c=>this.selectItem(c)),e.UI.stxtap(n,c=>{i.forceInput(),c.stopPropagation()}),this.addClaim(this);const a=this.ownerDocument.body.keystrokeHub;if(!a)return;let o=this.find("cq-menu.comparison");if(o){let c=o.hide.bind(o);o.hide=()=>{a.removeActiveModal(this),a.tabOrderSelect(),c()}}}keyStroke(n,r,i){if(!this.keyboardNavigation)return!1;const a=this.qsa("cq-lookup, cq-swatch, .add, [keyboard-selectable='true']",this,!0);if(!a.length)return!1;const o=this.findFocused(a);switch(r){case"Enter":if(!o[0])return!1;if(this.clickItem(o[0],i,this))return!0;break;case"Tab":o[0]&&o[0].matches("cq-lookup")&&(this.keyboardNavigation.disableKeyControlElement(o[0],!0),n.tabActiveElement.element.blur(),o[0].overrideIsActive=!0);let c=this.focusNextItem(a,!1,!0);c&&c.matches("cq-lookup")&&(c.keyboardNavigation=this.keyboardNavigation,c.onKeyboardSelection&&c.onKeyboardSelection(),c.overrideIsActive=!1);break;case"Esc":case"Escape":this.removeFocused(a);let l=this.find("cq-menu.comparison");l&&l.hide();break;default:i.preventDefault();break}return!1}onKeyboardSelection(){let n=this.find("cq-lookup");n.setAttribute("cq-focused","true"),n.overrideIsActive=!1,n.keyboardNavigation=this.keyboardNavigation,n.onKeyboardSelection&&n.onKeyboardSelection()}pickSwatchColor(){e.UI.pickSwatchColor(this,this.find("cq-swatch"))}position(){const{stx:n}=this.context,r=n.barFromPixel(n.cx);this.tick=n.tickFromPixel(n.cx);const i=n.chart.xaxis[r],a=()=>{let o;this.timeout=null;for(let c in n.chart.series){o||(o=this.find("[comparison-key]"));const l=this.find('.item[cq-symbol="'+c+'"] [crosshair-price]');if(l&&i&&i.data){l.innerText!==""&&(l.innerText="");const u=n.chart.series[c].parameters.symbol;let h=n.padOutPrice(i.data[u]);l.innerText!==h&&(l.innerText=h);let d=i.data[u];d!==null&&(typeof d=="object"&&(d=d.Close),h=n.padOutPrice(d),l.innerText!==h&&(l.innerText=h))}}};this.tick!=this.prevTick&&(this.timeout&&clearTimeout(this.timeout),this.timeout=setTimeout(a,0)),this.prevTick=this.tick}removeSeries(n,r){this.context.stx.removeSeries(n)}renderLegend(){if(this.currentlyDisabling)return;this.pickSwatchColor();const n=e.cqvirtual(this.find("[comparison-key]"));if(!n)return;const r=(h,d)=>()=>{this.nomore=!0,d.parameters.permanent||(this.removeSeries(h,d),this.emitCustomEvent({effect:"remove",detail:{name:h}})),this.modalEnd()},i=(h,d)=>f=>{const{id:A,parameters:p}=h,g=!p.disabled;f.stopPropagation(),this.currentlyDisabling=!0,d.modifySeries(A,{disabled:g}),f.target.parentElement.classList[g?"remove":"add"]("ciq-active"),f.target.ariaPressed=!g,this.emitCustomEvent({effect:"toggle",detail:{name:A,field:"disabled",value:g}}),this.currentlyDisabling=!1},a=e.climbUpDomTree(this,".stx-holder",!0)[0],{stx:o}=this.context;o.getDefaultColor();const c=n.hasAttribute("cq-panel-only"),l=!n.hasAttribute("cq-all-series");for(let h in o.chart.seriesRenderers){const d=o.chart.seriesRenderers[h];if(d!=o.mainSeriesRenderer&&!(l&&!d.params.isComparison)&&!(c&&(!a||d.params.panel!=a.panel.name)))for(let f=0;f<d.seriesParams.length;f++){const A=d.seriesParams[f],p=e.UI.makeFromTemplate(this.template)[0],g=p.querySelector("cq-swatch"),m=p.querySelector("[label]"),b=p.querySelector("[description]"),C=p.querySelector("cq-loader"),F=p.querySelector(".close"),w=p.querySelector(".ciq-switch"),U=o.chart.series[A.id],B=U.parameters;let k=B.color||A.color;const y=!k||k=="auto";y&&(k=o.defaultColor),g&&(g.seriesId=A.id,g.setColor(k,!1,y),B.opacity&&(g.style.opacity=B.opacity)),m&&(m.innerText=o.translateIf(U.display),p.setAttribute("title",m.innerText)),b&&U.description&&(b.innerText=o.translateIf(U.description)),p.setAttribute("cq-symbol",U.id);const{symbol:S}=B,T=o.mostRecentClose(S);if(T||T===0){const H=p.querySelector("[current-price]");H&&(d.params.yAxis?H.innerText=o.formatYAxisPrice(T,o.panels[d.params.panel],d.params.yAxis.decimalPlaces,d.params.yAxis):H.innerText=o.padOutPrice(T))}this.loading[B.symbolObject.symbol]?C.show():C.hide(),B.error&&p.setAttribute("cq-error",!0),F&&(!B.color&&!A.color||B.permanent)?F.style.visibility="hidden":e.UI.stxtap(F,r(U.id,U));const _=e.uniqueID()+"_toggle_label";w.setAttribute("aria-labelledBy",_),w.ariaPressed=!B.disabled,B.disabled||p.classList.add("ciq-active");const L=p.querySelector("[id][hidden]");L&&(L.id=_),w.classList.remove("hidden"),e.safeClickTouch(w,i(U,o)),n.appendChild(p)}}e.climbUpDomTree(e.cqrender(n),"cq-study-legend",!0).forEach(function(h){h.displayLegendTitle&&h.displayLegendTitle()})}setColor(n,r){const i=r.seriesId;i&&this.context.stx.modifySeries(i,{color:n}),this.emitCustomEvent({effect:"modify",detail:{name:i,field:"color",value:n}})}setMarkup(){const{children:n}=this.root;if(!n.length||this.usingMarkup){this.usingMarkup=!0,n.length&&[...n].forEach(i=>{["LINK","STYLE"].includes(i.tagName)||i.remove()});let{markup:r}=this.constructor;this.addDefaultMarkup(null,r)}}startPriceTracker(n){const r=this;this.addInjection("append","createDataSet",function(){n&&r.updatePrices(),this.chart.dataSet&&this.chart.dataSet.length?r.getAttribute("cq-show")!=="true"&&r.setAttribute("cq-show","true"):r.hasAttribute("cq-show")&&r.removeAttribute("cq-show")})}startTickPriceTracker(){this.prevTick=null,this.addInjection("prepend","headsUpHR",()=>this.position())}selectItem(n){const{context:r}=this,i=(f,A)=>{f&&(A.parameters.error=!0),this.loading[A.parameters.symbolObject.symbol]=!1,this.renderLegend()},a=this.find("cq-swatch");let o="auto",c=null,l=1;if(a){const{style:f}=a;o=f.backgroundColor,c=f.borderTopStyle,l=f.width||1}o==="initial"&&(o="auto");const{stx:u}=r;this.loading[n.symbol]=!0;const h={name:"comparison "+n.symbol,symbolObject:n,isComparison:!0,color:o,pattern:c,width:l||1,data:{useDefaultQuoteFeed:!0},forceData:!0},d=u.getSeries({symbolObject:n});for(let f=0;f<d.length;f++)if(d[f].parameters.isComparison){this.loading[n.symbol]=!1;return}n.symbol&&n.symbol.trim().length>0&&(!r.stx.chart.symbol||r.stx.chart.symbol.toLowerCase()!==n.symbol.toLowerCase())?u.addSeries(n.symbol,h,i):this.loading[n.symbol]=!1}setContext(n){this.setAttribute("cq-show","true"),this.configureUI();const{stx:r}=n,i=o=>this.renderLegend();if(["layout","symbolImport","symbolChange","theme"].forEach(function(o){r.addEventListener(o,i)}),this.addInjection("append","modifySeries",i),this.renderLegend(),!this.template)return;const a=e.UI.makeFromTemplate(this.template)[0];this.startPriceTracker(!!a.querySelector("[current-price]")),a.querySelector("[crosshair-price]")&&this.startTickPriceTracker()}updatePrices(){let n;const{stx:r}=this.context,i=r.isHistoricalModeSet,a=e.ChartEngine.isDailyInterval(r.layout.interval);for(let o in r.chart.series){n||(n=this.find("[comparison-key]"));const c=this.find('.item[cq-symbol="'+o+'"] [current-price]');if(c){const l=r.chart.series[o].lastQuote;if(!l||!l.DT||!l.Close&&l.Close!==0||!a&&r.chart.market&&r.chart.market.getSession(l.DT)===null)continue;let u=l.Close;const h=r.chart.series[o].parameters.subField||"Close",d=parseFloat(c.innerText);u&&(u[h]||u[h]===0)&&(u=u[h]),!u&&u!==0&&r.chart.series[o].lastQuote&&(u=r.chart.series[o].lastQuote[h]);const f=r.padOutPrice(i?"":u);if(c.innerText!==f&&(c.innerHTML=f),i)return;c.hasAttribute("cq-animate"),e.UI.animatePrice(c,u,d)}}}}t.markup=`
		<div comparison-key cq-panel-only cq-all-series>
			<template cq-comparison>
				<div class="item" role="group" keyboard-selectable>
					<div class="icon close ciq-icon ciq-close" role="presentation" keyboard-selectable-child>
						<div class="ciq-screen-reader" role="button">Remove this series</div>
					</div>
					<span class="ciq-switch hidden" role="button" keyboard-selectable-child aria-labelledby="xyz"></span>
					<span id="xyz" hidden>Toggle this plot</span>
					<cq-swatch overrides="auto" role="presentation" keyboard-selectable-child>
						<div class="ciq-screen-reader" role="button">Select color</div>
					</cq-swatch>
					<span label></span>
					<!-- displays the description -->
					<!-- <span description></span> -->
					<cq-loader></cq-loader>
					<!-- displays the price for the active crosshair item -->
					<!-- <div class="price" crosshair-price></div> -->
					<!-- displays the current price with color animation -->
					<span id="pricelabel" hidden>Current Price</span>
					<div role="group" aria-labelledby="pricelabel">
						<div class="price" role="marquee" current-price cq-animate></div>
					</div>
				</div>
			</template>
		</div>
	`,e.UI.addComponentDefinition("cq-comparison",t)},Cf=E=>{const e=typeof _CIQ<"u"?_CIQ:E.CIQ;class t extends e.UI.ContextTag{static get observedAttributes(){return["enable","color","pattern","width"]}connectedCallback(){if(!(!this.isConnected||this.attached)){if(Object.defineProperty(this,"_scope",{configurable:!0,enumerable:!1,value:this.getAttribute("cq-cvp-header")||"",writable:!1}),this.children.length===0){this.addDefaultMarkup();const n=this.querySelector(".ciq-heading");n&&(n.innerHTML=this._scope)}super.connectedCallback()}}adoptedCallback(){super.adoptedCallback(),e.UI.flattenInheritance(this,t),this.constructor=t}handlePropertyChange(n,r,i){if(i===r)return;this[n]=i;const a=this.activator?"click":null;switch(delete this.activator,n){case"enable":this.toggleActive(null,i==="true");break;case"color":this.setColor(i);break;case"width":this.setStyle(null,i,null);break;case"pattern":this.setStyle(null,null,i);break}this.context&&(this.syncing||this.emitCustomEvent({action:a,effect:"select",detail:{name:n,value:i}}))}emit(n,r){this.toolbar?this.toolbar.emit():this.dispatchEvent(new CustomEvent(n,{bubbles:!0,cancelable:!0,detail:r}))}getColor(n){const r=n.node||this.querySelector("cq-line-color"),{color:i}=this,a=["color-auto","color-transparent"];if(a.forEach(c=>r.classList.remove(c)),a.includes("color-"+i))r.removeAttribute("style"),r.classList.add("color-"+i);else{r.style.background=i;const c=e.getBackgroundColor(this.parentNode);if(!i||Math.abs(e.hsl(c)[2]-e.hsl(i)[2])<.2){const l=e.chooseForegroundColor(c);r.style.border="solid "+l+" 1px"}else r.style.border=""}const o=r.querySelector("[label]");o&&(o.innerText=i)}pickColor(n){const r=this.uiManager.getColorPicker(this),i=n.node.getAttribute("cq-overrides");if(!r)return console.error("CVPController.prototype.pickColor: no <cq-color-picker> available");i&&(n.overrides=i.split(",")),r.callback=a=>{this.activator=n,this.setColor(a)},n.context=this.context,r.display(n)}setColor(n){this.context&&(this.color=n,this.context.stx.currentVectorParameters["color"+this._scope]=n,this.getColor({node:this.querySelector("cq-line-color")}),this.emit())}setContext(n){this.setStyle(),this.toolbar&&this.toolbar.dirty(!1)}setStyle(n,r="1",i="dotted"){r===null&&(r=this.width),i===null&&(i=this.pattern),r=r||"1",i=i||"dotted",this.activator=n,this.width=parseInt(r,10).toString(),this.context.stx.currentVectorParameters["lineWidth"+this._scope]=this.width,this.activator=n,this.pattern=i,this.context.stx.currentVectorParameters["pattern"+this._scope]=i;const a=this.querySelector("*[cq-cvp-line-style], .menu-clickable .icon");this.lineStyleClassName&&a.classList.remove(this.lineStyleClassName),i&&i!=="none"?(this.lineStyleClassName="ciq-"+i+"-"+this.width,a.classList.add(this.lineStyleClassName)):this.lineStyleClassName=null,this.emit("change",{lineWidth:r,pattern:i})}sync(n){this.syncing=!0;const r=n["active"+this._scope]||!1,i=n["color"+this._scope],a=n["width"+this._scope],o=n["pattern"+this._scope],c="ciq-active",l=this.querySelector(".ciq-checkbox");r?l.classList.add(c):l.classList.remove(c),this.enable=r.toString(),this.context.stx.currentVectorParameters["active"+this._scope]=r,l.setAttribute("aria-checked",this.enable),this.color=i||"auto",this.context.stx.currentVectorParameters["color"+this._scope]=this.color,this.getColor({}),this.setStyle(null,a,o),this.syncing=!1}toggleActive(n,r=null){if(!this.context)return;this.activator=n;let i=!0;r!==null?i=r:this.enable==="true"&&(i=!1),this.enable=i.toString(),this.context.stx.currentVectorParameters["active"+this._scope]=i;const a=this.querySelector(".ciq-checkbox");a.classList[i?"add":"remove"]("ciq-active"),a.setAttribute("aria-checked",this.enable),this.emit("change",{active:this.enable})}}t.markup=`
		<div cq-section>
			<span role="checkbox" stxtap="toggleActive())" class="ciq-checkbox" aria-checked="false">
				<div class="ciq-heading"></div>
				<span></span>
			</span>
		</div>
		<cq-line-color cq-section cq-overrides="auto" class="ciq-color" stxbind="getColor()" stxtap="pickColor()" role="button">
			<span class="icon" aria-hidden="true"></span>
			<span class="ciq-screen-reader">Line Color</span>
			<span class="ciq-screen-reader" label></span>
		</cq-line-color>
		<cq-line-style cq-section>
			<cq-menu class="ciq-select ciq-cvp-line-style" reader="Line Style" config="cvplinestyle" icon="ciq-solid-1"></cq-menu>
		</cq-line-style>
	`,e.UI.addComponentDefinition("cq-cvp-controller",t)},wf=E=>{const e=typeof _CIQ<"u"?_CIQ:E.CIQ;class t extends e.UI.DialogContentTag{constructor(){super(),this.fileMap=new Map,this.swatchColors=e.UI.defaultSwatchColors}adoptedCallback(){super.adoptedCallback(),e.UI.flattenInheritance(this,t),this.constructor=t}abortImport(n){const r=n.target.nodeName==="CQ-CLOSE",i=[...this.fileMap.keys()],a=o=>c=>c.name===o;for(let o of this.form.querySelectorAll("fieldset[name]")){let c=o.getAttribute("fields");if(n&&n.target.getAttribute("fields")!==c&&!r)continue;let l=i.findIndex(a(c));this.form.removeChild(o.parentElement),this.fileMap.delete(i[l])}r&&(this.fileInput.value=""),this.fileMap.size||(this.fileInput.value="",this.loadDataBtn.style.display="inline-block",this.importBtn.style.display="none",this.querySelector("cq-section.loader").style.display="flex",this.warn("","",!0),e.UI.containerExecute(this,"resize")),this.resetTabSelect()}close(){this.abortImport({target:this.querySelector("cq-close")}),this.channelWrite("channel.dataLoader",!1,this.context.stx),this.loadDataBtn.style.display=this.fileInput.value?"none":"inline",this.querySelector("cq-section.loader").style.display="flex",this.warn("","",!0),super.close()}getFormData(){const n=(r,i)=>a=>{const o=r.elements[a];let c;if(o)c=o.type==="checkbox"?o.checked:o.value;else{const l=r.querySelector(`[name='${a}']`);l&&(c=l.value)}i.formData.append(a,c)};for(let r of this.fileMap){const[i,a]=r;let o=this.querySelector(`[name='${i.name}'] fieldset`);a.formData=new FormData,["name","display","periodicity","panel","color"].forEach(n(o,a))}}hide(){this.channelWrite("channel.dataLoader",!1,this.context.stx)}importData(n){n.preventDefault();const{dialog:r}=this;if(!r.validate()())return;let{context:{stx:i},fileMap:a}=r;r.getFormData(),a.forEach(o=>{i.dataLoader.importData(o),r.emitCustomEvent({effect:"import",detail:{file:o}})}),r.close()}async loadData(){if(this.validateFileInput()(),!this.warning.getAttribute("cq-active")){for(const n of this.fileInput.files){let r=new e.CSVReader(n);this.fileMap.set(n,r),await r.parse(n)}this.loadDataBtn.style.display="none",this.querySelector("cq-section.loader").style.display="none",this.showData()}}resetTabSelect(){const{uiManager:{keystrokeHub:n}}=this.context;n.highlightAlign()}showData(){const{context:{stx:n,config:r={}},keystrokeHub:i}=this,a=l=>u=>{u.setAttribute("fields",l),u.addEventListener("pointerup",h=>{h.preventDefault(),e.UI.containerExecute(u,"abortImport",[h])})};let o=!1,c=this.querySelector("template");for(const l of this.fileMap){const[u,h]=l,d=u.name,f=c.content.cloneNode(!0);f.firstElementChild.id+=`${d}`,f.firstElementChild.setAttribute("name",d);const A=f.querySelector("fieldset");A&&(A.setAttribute("fields",d),A.setAttribute("name","fields"));const p=f.querySelector("legend.file-name");p.innerText=`File: ${d}`;const g=f.querySelector(".data-name input");g.setAttribute("placeholder",d),g.value=d;const m=f.querySelector(".ciq-select[name='periodicity']");(e.getFromNS(r,"menus.period.content")||r.menuPeriodicity||function(){const B=n.getPeriodicity();return[{value:B,label:`${B.period}, ${B.timeUnit}`}]}()).filter(B=>B.label).forEach(B=>{const k=document.createElement("option");k.innerText=B.label;let y=B.value;Array.isArray(B.value)&&(y={},["period","interval","timeUnit"].forEach((S,T)=>{y[S]=B.value[T]})),k.value=JSON.stringify(y),m.append(k)});const C=f.querySelector(".data-fields ul");let{fields:F=[]}=h;F.forEach(B=>{const k=document.createElement("li");k.innerText=B,C.append(k)});const w=f.querySelector("[name=display]"),U=f.querySelector(".secondary-options");o?(w.value="secondary",U.style.display="block"):o=!0,w.addEventListener("change",function(B){let k=this.value.toLowerCase()==="secondary";U.style.display=k?"block":"none",i.highlightAlign()}),f.querySelectorAll(".abort").forEach(a(d)),e.UI.pickSwatchColor(this,f.querySelector("cq-swatch")),this.form.append(f),this.form.querySelectorAll("input:not([type=submit]").forEach(B=>{B.addEventListener("keypress",k=>{k.key==="Enter"&&k.preventDefault()})})}this.importBtn.style.display="inline",e.UI.containerExecute(this,"resize"),this.resetTabSelect()}setContext(n){this.context=n,this.addDefaultMarkup(),this.form=this.querySelector("form"),this.fileInput=this.querySelector("input[type=file]"),this.loadDataBtn=this.querySelector("button.load"),this.importBtn=this.querySelector("button.import"),this.controls=this.querySelector("div.ciq-dialog-cntrls"),this.warning=this.querySelector(".invalid-warning"),this.warningTitle=this.warning.querySelector(".invalid-warning-title"),this.warningText=this.warning.querySelector(".invalid-warning-text"),this.form.dialog=this,this.form.addEventListener("submit",this.importData),this.form.addEventListener("change",this.validate()),this.fileInput.addEventListener("change",this.validateFileInput()),this.keystrokeHub=n.uiManager.keystrokeHub}validate(){const n=this;return function(r){n.getFormData();let i,a=!0;for(const c of n.fileMap){const[,l]=c,{formData:u,fields:h}=l,d=u.get("display"),f=u.get("periodicity");if(!((h.includes("DT")||h.includes("Date"))&&h.some(p=>p==="Close"||p==="Value")))return a=!1,o({messageTitle:"Invalid Data fields",messageText:'Your data contains invalid schema to display. It must include a "DT" column and either a "Close" or "Value" column.'},a);if(d==="secondary"){if(!e.equals(JSON.parse(f),n.context.stx.getPeriodicity()))return a=!1,o({messageTitle:"Mis-matched periodicities:",messageText:"Having mixed periodicities can result in chart displaying incorrect time scales. Check your data and try again."},a)}else{if(i)return a=!1,o({messageTitle:"Multiple Main series",messageText:"Detected multiple data files set to display main data. Only one data file can be main."},a);i=!0}}return o({messageTitle:"",messageText:""},a);function o({messageTitle:c,messageText:l},u){return n.warn(c,l,u),n.resetTabSelect(),n.emitCustomEvent({effect:"validate",detail:{messageTitle:c,messageText:l,valid:u}}),u}}}validateFileInput(){const n=this;return function(r){const i=n.files||n.fileInput.files;let a=!0,o="",c="";Object.values(i).forEach(function(l){const{name:u}=l,h=u.lastIndexOf(".")>0&&u.slice(u.lastIndexOf("."),u.length);(h&&h!==".csv"||t.mimeTypes.indexOf(l.type)==-1)&&(o="Invalid File Type",c="Data Importer requires a text/csv file to work. Please select a CSV file.",a=!1)}),i.length||(o="Please select a file!",c="Data Importer requires a text/csv file to work. Please select a CSV file.",a=!1),n.warn(o,c,a),n.resetTabSelect()}}warn(n,r,i){this.warningTitle.innerText=n,this.warningText.innerText=r,i?this.warning.removeAttribute("cq-active"):this.warning.setAttribute("cq-active",!0)}}t.mimeTypes=["text/csv","application/csv","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/vnd.ms-excel"],t.markup=`
	<cq-scroll cq-no-maximize>
		<cq-section class="loader">
			<label for="fileSelector">Choose one or more CSV files to load data into the chart:</label>
			<input name="fileSelector" type="file" multiple accept=".csv" />
		</cq-section>
		<cq-section class="ciq-dialog-cntrls">
			<button class="ciq-btn load" stxtap="loadData()">Open Files</button>
		</cq-section>
		<cq-section>
			<form class="import-data" id="data-wizard"></form>
		</cq-section>
		<template class="table">
			<cq-section class="data-table">
				<fieldset form="data-wizard" name="file-fields">
				<legend class="file-name"></legend>
				<div class="data-name"><label for="name">Name for imported data:</label><input type="text" name="name" required /></div>
				<div class="data-periodicity">
					<label for="periodicity">Data Periodicity:</label>
					<span class="select-holder">
						<select name="periodicity" class="ciq-select" form="data-wizard" required>
					</span>
					</select>
				</div>
				<div class="data-fields">
					<label>Data Fields:</label>
					<ul class="content-justify-end"></ul>
				</div>
				<div class="data-display">
					<label>Display As:</label>
					<span class="select-holder">
						<select name="display" form="data-wizard" class="ciq-select" required>
						<option value="main">Main Series</option>
						<option value="secondary">Secondary Series</option>
						</select>
					</span>
				</div>
				<div class="content-justify-end">
					<fieldset class="secondary-options">
					<legend>Secondary Series Options:</legend>
						<div>
							<label>Add in new panel: </label><input type="checkbox" name="panel" />
						</div>
						<div>
							<label>Color: </label><cq-swatch name="color"></cq-swatch>
						</div>
					</fieldset>
				</div>
			</div>
			<div class="buttons">
				<button class="ciq-btn-negative abort">Remove</button>
			</div>
			</fieldset>
			</cq-section>
		</template>
		<cq-section>
			<div class="invalid-warning">
				<div class="invalid-warning-title"></div>
				<div aria-live="assertive" class="invalid-warning-text"></div>
			</div>
		</cq-section>
		<cq-section class="ciq-dialog-cntrls">
			<button class="ciq-btn import" form="data-wizard" type="submit">Confirm</button>
		</cq-section>
	
	</cq-scroll>
	<cq-close role="button" title="Close" tabindex="0"></cq-close>
	`,e.UI.addComponentDefinition("cq-data-dialog",t)},Sf=E=>{const e=typeof _CIQ<"u"?_CIQ:E.CIQ;class t extends e.UI.BaseComponent{static get observedAttributes(){return["cq-title","cq-description","cq-close-button"]}constructor(){super(),this.activeAttributes={}}connectedCallback(){if(!this.isConnected||this.attached)return;this.isDialog=!0,super.connectedCallback();const n=i=>this.tap(i);e.UI.stxtap(this,n);const r=e.UI.getUIManager(this);r.registerForResize(this),this.uiManager=r,this.hasAttribute("cq-no-claim")||this.addClaim(this),this.hasAttribute("tabindex")||this.setAttribute("tabindex","0"),this._renderTitleElement(),this._renderCloseButton()}adoptedCallback(){super.adoptedCallback(),e.UI.flattenInheritance(this,t)}disconnectedCallback(){this.doNotDisconnect||(this.removeClaim(this),this.uiManager.unregisterForResize(this),super.disconnectedCallback())}_renderCloseButton(){const n=this.getAttribute("cq-close-button")!=="false";let r=this.querySelector("cq-close");n&&!r?(r=document.createElement("cq-close"),r.setAttribute("role","button"),r.setAttribute("title","Close"),r.setAttribute("tabindex","0"),this.append(r)):!n&&r&&r.remove()}_renderTitleElement(){const n=this.getAttribute("cq-title")||"",r=this.getAttribute("aria-labelledby");let i=this.querySelector("#"+r);if(!n&&i?i.remove():n&&(i||(i=document.createElement("h4"),i.id=r,this.prepend(i)),this.context?e.makeTranslatableElement(i,this.context.stx,n):i.innerText=n),i){let a=i.nextSibling;const o=a&&a.matches("p[id]"),c=this.getAttribute("cq-description")||"";c?(o||(a=document.createElement("p"),i.parentElement.insertBefore(a,i.nextSibling)),a.id=this.getAttribute("aria-describedby"),this.context?e.makeTranslatableElement(a,this.context.stx,c):a.innerHTML=c):o&&a.remove()}return i}setTitle(n){this.setAttribute("cq-title",""),this.setAttribute("cq-title",n)}handlePropertyChange(n,r,i){if(i!==r)switch(this[n]=i,n){case"cq-title":case"cq-description":this._renderTitleElement();return;case"cq-close-button":this._renderCloseButton();return}}refreshFocus(){const n=this.getKeyboardSelectableItems();let r=this.findFocused(n)[0];r||(r=Array.from(n||[]).find(i=>i.matches("[name="+this.activeElementName+"]"))),r&&this.focusItem(r)}getKeyboardSelectableItems(){return this.querySelectorAll("[keyboard-selectable='true'], [tabindex='0'], input, .ciq-select, cq-swatch, .ciq-btn, .ciq-btn-negative, cq-scroll li, ul cq-item, .ciq-filter")}keyStroke(n,r,i){if(n.tabActiveModals[0]!==this)return!1;const a=r==="ArrowUp"||i.shiftKey;(r==="ArrowUp"||r==="ArrowDown")&&(r="Tab");const o=this.hasAttribute("native-tabbing"),c=this.getKeyboardSelectableItems();if(r==="Tab"&&!o){const l=this.focusNextItem(c,a,!0),u=this.querySelector("cq-scroll");if(l&&u)return u.scrollToElement(l),setTimeout(()=>n.highlightAlign()),!0}else if(r=="Enter"||r===" "){const l=this.findFocused(c)[0];if(l)return this.clickItem(l,i,this),l.tagName==="INPUT"&&typeof l.click=="function"&&l.click(),!0}return!1}onKeyboardSelection(){this.keyboardNavigation.highlightHide()}onKeyboardDeselection(){this.keyboardNavigation&&this.keyboardNavigation!==null&&this.keyboardNavigation.highlightAlign()}clickItem(n,r,i){if(n&&this.keyboardNavigation){const a=n.querySelector("cq-dropdown, cq-menu-dropdown");a&&(a.keyboardOriginationElement=i,this.keyboardNavigation.setKeyControlElement(a))}super.clickItem(n,r,this)}processEsc(n){return this.closeActiveMenu()?(n.tabActiveModals[0]&&n.setKeyControlElement(n.tabActiveModals[0]),!0):!1}closeActiveMenu(){const n=this.querySelector("*.stxMenuActive");if(n){const r=e.UI.getUIManager(this);return r&&r.closeMenu(n),!0}return!1}addActiveAttribute(n){this.activeAttributes[n]=!0}center(){}close(n){this.uiManager.closeMenu(this),this.onClose&&this.onClose(n),this.parentElement.removeAttribute("cq-active")}hide(){if(this.enableMultichartColorPickerFloat(!1),!this.active||this.querySelector(":invalid"))return;this.active=!1,[...this.children].forEach(r=>{typeof r.hide=="function"&&r.hide()}),this.uiManager.overlay&&this.uiManager.overlay.hasAttribute("cq-active")&&this.uiManager.overlay.removeAttribute("cq-active");for(let r in this.activeAttributes)this.hasAttribute(r)&&this.removeAttribute(r);this.activeAttributes={},[...this.querySelectorAll("input")].forEach(r=>{r==r.ownerDocument.activeElement&&r.blur()}),this.removeFocused();const{keystrokeHub:n}=this.ownerDocument.body;if(n&&n.removeActiveModal(this),this.parentElement.removeAttribute("cq-active"),this.matches("cq-color-picker")||this.ownerDocument.body.classList.remove("ciq-dialog-open"),this.setAttribute("role","dialog"),this.ariaHidden="true",document.activeElement.tagName!=="INPUT"&&document.activeElement.tagName!=="TEXTAREA"){let{caller:r}=this;for((!r||!r.focus)&&this.context&&(r=this.context.topNode.querySelector("cq-chart-instructions"));r&&!e.trulyVisible(r);)r=r.parentElement;r&&setTimeout(()=>{r.closest("[native-tabbing]")||(r.tabIndex=-1),r.focus()},10)}this.emitCustomEvent({action:null,cause:"helper",effect:"hide",detail:{title:this["cq-title"],type:this.wraps}})}launchColorPicker(){this.uiManager&&this.uiManager.closeMenu(null,"CQ-MENU")}open(n){this.uiManager.openMenu(this,n);const{context:r,caller:i}=n||{};if(this.context=r,!r||!r.config){this.onClose=null;return}this.caller=i||document.activeElement;const{config:{channels:a},stx:o}=r;o.translateUI&&o.translateUI(this),this.onClose=c=>{this.channelWrite(a.dialog||"channel.dialog",{},o),this.onClose=null,c&&[...this.children].forEach(l=>{l.hide&&l.hide(),l.onClose&&l.onClose()})},this.parentElement.setAttribute("cq-active",!0),this.ariaHidden="false",this.matches("cq-color-picker")||(this.ownerDocument.body.classList.add("ciq-dialog-open"),setTimeout(()=>{this.tabIndex=-1,this.focus()},10)),this.emitCustomEvent({action:null,cause:"helper",effect:"show",detail:{title:this["cq-title"],type:this.wraps}}),this.enableMultichartColorPickerFloat(!0)}enableMultichartColorPickerFloat(n){const r=(Object.entries(this.activeAttributes).find(([i,a])=>i!=="cq-active"&&a)||[])[0];r&&(r.includes("-context")||(document.querySelectorAll("cq-context-wrapper, .ciq-multi-chart-container-wrapper").forEach(i=>i.style.zIndex=n?"inherit":""),document.querySelectorAll(".ciq-multi-chart-container-wrapper").forEach(i=>i.style.overflow=n?"visible":"")))}resize(){[...this.querySelectorAll("cq-scroll")].forEach(r=>{r.resize&&r.resize()}),this.params&&this.params.x?this.stxContextMenu():this.center()}show(n){if(this.active)return;this.params=n,n||(n=this.params={});const r=n.context||e.UI.getMyContext(this);if(!this.uiManager.overlay&&!n.bypassOverlay&&(this.uiManager.overlay=document.createElement("cq-dialog-overlay"),r&&r.node.append(this.uiManager.overlay)),this.active=!0,setTimeout((()=>{this.uiManager.overlay&&!n.bypassOverlay&&this.uiManager.overlay.getAttribute("cq-active")!=="true"&&this.uiManager.overlay.setAttribute("cq-active","true"),this.activeAttributes["cq-active"]=!0;for(let o in this.activeAttributes)this.getAttribute(o)!=="true"&&this.setAttribute(o,"true");this.resize()}).bind(this)),r&&r.config&&r.config.themes){const o=Object.keys(r.config.themes.builtInThemes);this.classList.remove(...o);const c=o.find(l=>r.topNode.classList.contains(l)===!0);c&&this.classList.add(c)}const{keystrokeHub:a}=this.ownerDocument.body;a&&a.addActiveModal(this)}stxContextMenu(){let n=this.parentElement;n.tagName=="BODY"&&(n=window);const r=e.guaranteedSize(n),i=r.width,a=r.height,o=e.elementDimensions(this,{padding:1,border:1});let c=o.width,l=o.height,u=this.params.x,h=this.params.y,d=!1;[...this.querySelectorAll("cq-menu.stxMenuActive")].forEach(g=>{if(g.querySelector(".context-menu-right")){const m=[...g.parentNode.children],b=m.length-m.indexOf(g),C=e.elementDimensions(g,{padding:1,border:1}),F=e.elementDimensions(g.querySelector(".context-menu-right"),{padding:1,border:1});c+=o.width,l+=F.height-C.height*b,d=!0}});const f=this.closest("cq-context"),A=f?this.params.context.topNode.getBoundingClientRect().left:0,p=f?this.params.context.topNode.getBoundingClientRect().top:0;u-A+c>i&&(u=A+(i-c)),h-p+l>a&&(h=p+(a-l)),h<0&&(h=0),d&&(this.params.x=u,this.params.y=h),Object.assign(this.style,{top:`${h}px`,left:`${u}px`,"margin-top":"auto"})}tap(n){if(this.uiManager.topMenu()===this){n.stopPropagation();return}n.currentTarget.active||n.stopPropagation()}}e.UI.addComponentDefinition("cq-dialog",t)},kf=E=>{const e=typeof _CIQ<"u"?_CIQ:E.CIQ;class t extends e.UI.BaseComponent{connectedCallback(){!this.isConnected||this.attached||(super.connectedCallback(),this.init())}adoptedCallback(){super.adoptedCallback(),e.UI.flattenInheritance(this,t),this.constructor=t}init(){this.addDefaultMarkup(),this.textRange=this.querySelector(".ciq-double-slider-text"),this.lowSlider=this.querySelector(".ciq-double-slider-range[range='low']"),this.highSlider=this.querySelector(".ciq-double-slider-range[range='high']"),this.backing=this.querySelector("cq-double-slider-range"),this.name=this.getAttribute("name")||e.uniqueID(),["min","max","step","low","high"].forEach(i=>{this.hasAttribute(i)&&(this[i]=Number(this.getAttribute(i)))}),this.setBounds(this);const n=this;function r(i,a){let o=i.value;if(a){const c=a.touches[0],l=n.highSlider.getBoundingClientRect();let{height:u,width:h}=getComputedStyle(n.highSlider);u=parseFloat(u),h=parseFloat(h);let d=1;u>h?d=Math.max(0,Math.min(u,c.pageY-l.top))/u:d=Math.max(0,Math.min(h,c.pageX-l.left))/h,o=n.min+d*(n.max-n.min)}n.whichSlider||(n.whichSlider=o*2>(isNaN(n.high)?n.max:n.high)+(isNaN(n.low)?n.min:n.low)+1?n.highSlider:n.lowSlider),n.whichSlider===n.lowSlider?n.low=n.lowSlider.value=Math.min(typeof n.high>"u"?n.max:n.high,o):n.whichSlider===n.highSlider&&(n.high=n.highSlider.value=Math.max(typeof n.low>"u"?n.min:n.low,o)),n.setValue(n)}[this.highSlider,this.lowSlider].forEach(i=>{["mousedown","pointerdown"].forEach(a=>{i.addEventListener(a,o=>{n.whichSlider=null})}),i.addEventListener("input",()=>r(i)),e.touchDevice&&(i.addEventListener("touchstart",a=>{n.whichSlider=null,n.engaged=!0,r(i,a)},{passive:!1}),i.addEventListener("touchmove",a=>{n.engaged&&r(i,a)},{passive:!1}),i.addEventListener("touchend",a=>{n.engaged=!1},{passive:!1}))})}setBounds(n){Array.from(this.querySelectorAll('input[type="range"]')).forEach(r=>{["min","max","step"].forEach(i=>{(n[i]||n[i]===0)&&(r.setAttribute(i,n[i]),this[i]=n[i])})}),this.updateVisual()}setValue(n){const r={};n&&(n.low!==void 0&&(r.low=this.min===void 0?n.low:Math.max(this.min,n.low)),n.high!==void 0&&(r.high=this.max===void 0?n.high:Math.min(this.max,n.high))),e.equals(this.value,r)||(this.value=r),this.low=r.low,this.high=r.high,this.updateVisual()}updateVisual(){this.setAttribute("min",this.min),this.setAttribute("max",this.max),this.setAttribute("low",this.low),this.setAttribute("high",this.high),this.setAttribute("step",this.step);const n=getComputedStyle(this.textRange),r=n.color,i=n.borderLeftColor;let a=this.low;(isNaN(a)||a<this.min)&&(a=this.min);let o=this.high;(isNaN(o)||o>this.max)&&(o=this.max),this.lowSlider.value=a,this.highSlider.value=o,typeof a<"u"&&(a=Number(this.lowSlider.value)),typeof o<"u"&&(o=Number(this.highSlider.value));const c=a-this.min,l=o-this.min;this.textRange.innerHTML=a+"-"+o;const u=this.max-this.min,h=[c/u*100,l/u*100];this.backing.style.background=`linear-gradient(to right,
			${i} 0% ${h[0]}%,
			${r} ${h[0]}% ${h[1]}%,
			${i} ${h[1]}% 100%)`}}t.markup=`
		<cq-double-slider-text class="ciq-double-slider-text"></cq-double-slider-text>
		<cq-double-slider-range class="ciq-double-slider-range"></cq-double-slider-range>
		<input type="range" class="ciq-double-slider-range" range="low">
		<input type="range" class="ciq-double-slider-range" range="high">
`,e.UI.addComponentDefinition("cq-double-slider",t)},Ef=E=>{const e=typeof _CIQ<"u"?_CIQ:E.CIQ;class t extends e.UI.DialogContentTag{adoptedCallback(){super.adoptedCallback(),e.UI.flattenInheritance(this,t),this.constructor=t}open(n){this.addDefaultMarkup(),this.classList.add("ciq-context-menu"),this.drawing=n.drawing;const r=this.node.find("[cq-edit-text]");return this.drawing.edit?r.show():r.hide(),super.open(n)}postProcess(n){this.emitCustomEvent({effect:n,detail:{item:this.drawing}})}}t.markup=`
		<div stxtap="DrawingEdit.text()" cq-edit-text>Edit Text</div>
		<div stxtap="DrawingEdit.edit()">Edit Settings</div>
		<div stxtap="DrawingEdit.clone()">Clone Drawing</div>
		<cq-menu stxtap="resize()" cq-close-top="cq-dialog[cq-drawing-context]">
			<cq-menu-dropdown cq-no-scroll="true" class="context-menu-right">
				<cq-item stxtap="DrawingEdit.reorderLayer('top')">Bring to Top</cq-item>
				<cq-item stxtap="DrawingEdit.reorderLayer('up')">Bring Forward</cq-item>
				<cq-item stxtap="DrawingEdit.reorderLayer('down')">Send Backward</cq-item>
				<cq-item stxtap="DrawingEdit.reorderLayer('bottom')">Send to Bottom</cq-item>
			</cq-menu-dropdown>
			<!-- element here so that <cq-menu-dropdown> can keep "top: auto;" -->
			<div>Layer Management<div class="context-button-right-arrow"></div></div>
		</cq-menu>
		<div stxtap="DrawingEdit.remove()">Delete Drawing</div>
	`,e.UI.addComponentDefinition("cq-drawing-context",t)},Bf=E=>{const e=typeof _CIQ<"u"?_CIQ:E.CIQ;class t extends e.UI.BaseComponent{static get observedAttributes(){return["maximize","noresize","config"]}constructor(){super(),e.UI.makeShadow(this)}connectedCallback(){if(!(!this.isConnected||this.attached)){if(this.handlesBinding=!0,super.connectedCallback(),this.isShadowComponent&&this.children.length){const n=document.createElement("div");for(this.root.appendChild(n);this.children.length;)n.appendChild(this.firstChild)}else if(!this.children.length){const n=document.createElement("ul");this.root.appendChild(n)}this.contentRoot=this.root.querySelector(".content")||this.root.firstChild,this.contentRoot.classList.add("content"),this.contentRoot.setAttribute("role","menu"),this.contentRoot.addEventListener("scroll",n=>this.highlightItem(n.currentTarget.querySelector("[cq-focused]"))),this.addClaim(this),this.setupShadow(),this.owningMenu=e.climbUpDomTree(this,"cq-menu",!0)[0],this.fireConfigChange()}}adoptedCallback(){super.adoptedCallback(),e.UI.flattenInheritance(this,t),this.constructor=t}bind(n,r){if(!n)return;n.matches("[stxtap], [stxsetget], [stxbind]")&&e.UI.BaseComponent.scheduleForBinding(n,this);const i=a=>{Date.now()-n.lastClick<1e3||(n.lastClick=Date.now(),n.matches(".radio-item[stxtap]")&&(this.contentRoot.querySelectorAll(".radio-item").forEach(o=>{o!==n&&(o.classList.remove("ciq-active"),o.ariaChecked="false")}),n.classList.add("ciq-active"),n.ariaChecked="true"),this.emitCustomEvent({effect:r,detail:{menu:this.owningMenu,params:n.params}}))};["mouseup","touchend","pointerup","click"].forEach(a=>n.addEventListener(a,i))}disablekeyboardNavigation(){this.keyboardNavigation&&this.keyboardNavigation.setKeyControlElement(),this.removeFocused(this.root.querySelectorAll("[cq-focused]"))}fireConfigChange(){this.handlePropertyChange("config",this.config,""),this.handlePropertyChange("config","",this.getAttribute("config"))}focused(){const n=this.qsa("[cq-focused]",this,!0);return n.length?n[0]:null}handlePropertyChange(n,r,i){if(r!==i){switch(n){case"config":if(!this.attached)break;const a=e.UI.BaseComponent.getHelper(this,"MenuConfig");if(!a||!a[i])break;Object.assign(this,a[i]),this.config=i,this.populate();break;case"maximize":case"noresize":this[n]=i||i==="true";break}this.attached&&this.resize()}}keyStroke(n,r,i){if(!this.keyboardNavigation&&!this.owningMenu.matches(".stxMenuActive"))return;if(!e.trulyVisible(this.contentRoot))return!1;const a=this.qsa("[keyboard-selectable]:not(.item-hidden)",this.contentRoot,!0);if(!a.length)return!1;const o=this.findFocused(a),c=l=>({" ":{fn:"click"},Spacebar:{fn:"click"},Enter:{fn:"click"},ArrowDown:{fn:"scroll"},ArrowUp:{fn:"scroll",rev:!0},ArrowLeft:{fn:"select",rev:!0},ArrowRight:{fn:"select"},Down:{fn:"scroll"},Up:{fn:"scroll",rev:!0},Left:{fn:"select",rev:!0},Right:{fn:"select"}})[l]||{};switch(c(r).fn){case"click":if(!o.length)return;const l=o[0].querySelectorAll("[keyboard-selectable-child][cq-focused]");l.length?this.clickItem(l[0],i):this.clickItem(o[0],i);break;case"scroll":const u=c(r).rev;!this.focusNextItem(a,u)&&u&&(this.contentRoot.scrollTop=0);break;case"select":if(!o.length)return;const h=o[0].querySelectorAll("[keyboard-selectable-child]");if(h.length){const d=c(r).rev,f=this.focusNextItem(h,d);d&&!f&&(this.removeFocused(h),this.focusItem(o[0]))}break;default:return!1}return!0}makeComponent(n,r){return`<${n}${(()=>{if(!r||typeof r!="object")return"";let a="";for(const o in r)a+=` ${o}`,r[o]!=null&&(a+=`="${r[o]}"`);return a})()}></${n}>`}onKeyboardDeselection(){this.keyboardNavigation&&this.keyboardNavigation.highlightPosition()}populate(){const n=this.content,r=this.ownerDocument.querySelector("template[cq-dropdown-templates]");if(Array.isArray(n)){for(;this.contentRoot.firstChild;)this.contentRoot.firstChild.remove();n.forEach(i=>{const a=document.createElement("div");if(i.type==="template"&&r){const c=e.UI.makeFromTemplate(r);i.content=c.find(`[name=${i.value}]`)[0].outerHTML}else i.type==="component"&&(i.content=this.makeComponent(i.value,i.attributes),i.type="template");a.innerHTML=this.constructor.itemTemplate(i);const o=a.children[0];i.options&&new MutationObserver(l=>{l.forEach(u=>{o.querySelector("[role=menuitemradio]").ariaChecked=u.target.ariaChecked})}).observe(o,{attributeFilter:["aria-checked"]}),this.contentRoot.appendChild(o),!("menuPersist"in i)&&["separator","heading","switch"].includes(i.type)&&(i.menuPersist=!0),o.params=i,this.bind(o,i.type==="switch"?"toggle":"select"),this.bind(o.querySelector(".options"),"edit")})}}resize(){if(this.closest(".sharing")||this.noresize)return;const{contentRoot:n}=this,{opacity:r,display:i}=this.style;Object.assign(this.style,{opacity:0,display:"block"});const{top:a}=n.getBoundingClientRect(),{paddingTop:o,paddingBottom:c}=getComputedStyle(n),l=e.stripPX(o)+e.stripPX(c);Object.assign(this.style,{opacity:r,display:i});const u=this.reduceMenuHeight||45;let h,d;const f=e.UI.closestContextContainer(n);if(f){const m=f.getBoundingClientRect();h=m.height,d=m.top}else h=window.innerHeight,d=0;if(!h)return;let A=h-(a-d)-u-l;const p=e.climbUpDomTree(n,".stx-holder,.stx-subholder,.chartContainer",!0);p.length&&p.forEach(m=>{const b=m.getBoundingClientRect().top+e.elementDimensions(m).height;A=Math.min(A,b-a-5)}),this.maximize&&(n.style.height=A+"px"),n.style["max-height"]=A+"px";const g=this.scrollImplementation();!this.noscroll&&g&&(n.style.overflowY="auto",g.refresh(n)),this.dispatchEvent(new CustomEvent("refresh",{detail:{node:n}}))}scrollToElement(n){const{contentRoot:r}=this,{top:i,bottom:a}=r.getBoundingClientRect(),{top:o,bottom:c}=n.getBoundingClientRect();o>i&&c<a||(c>=a?r.scrollTop=Math.max(c-a+r.scrollTop,0):r.scrollTop=Math.max(o-i+r.scrollTop,0),this.resize())}scrollImplementation(){const n=e.UI.shadowComponents.get(this)||this.closest("cq-context");return n&&n.config?n.config.scrollbarStyling:e.UI.scrollbarStyling}setFocus(n){const r=this.qsa(n,this.contentRoot,!0)[0];r&&r.focus()}}t.itemTemplate=({type:s,active:n,className:r,options:i,feature:a,helpId:o,iconCls:c,label:l,bind:u,tap:h,setget:d,selector:f,method:A,value:p,content:g,filterMin:m,filterLabel:b,filterFor:C})=>{const F=`${r?`${r} `:""}${n?"ciq-active ":""}`,w=p&&p!==0?Array.isArray(p)?p.map(y=>typeof y=="string"?`'${y}'`:y).join():`'${p}'`:"",U=i?"group":{separator:"separator",heading:"presentation",template:"group",clickable:"presentation",checkbox:"menuitemcheckbox",switch:"menuitemcheckbox",radio:"menuitemradio"}[s]||"menuitem",B={checkbox:"menuitemcheckbox",switch:"menuitemcheckbox",radio:"menuitemradio"}[s]||"menuitem",k=!["separator","heading","template"].includes(s);return`
		<li class="${F}${s}-item item" role="${U}"
			${k?"tabindex=0":""}
			${d?`stxsetget="${d}(${w})"`:h?`stxtap="${h}(${w})"`:u?`stxbind="${u}(${w})"`:w&&!U.indexOf("menuitem")?`data='${JSON.stringify(p).replace(/'/g,"'")}'`:""}
			${a?`feature="${a}"`:""}
			${s==="radio"?`aria-checked="${n?"true":"false"}"`:""}
			${i?`aria-labelledby="label_${l.replace(/ /g,"")}"`:""}
			${p&&(d||h)?`data-value="${p}"`:""}
			${k&&s!=="clickable"?"keyboard-selectable":""}
		>			${s==="separator"?"<hr>":""}			${s==="template"?`${g}`:""}			${s==="clickable"?`<cq-clickable class="dropdown-clickable" keyboard-selectable selector="${f}" method="${A}">`:""}			${s==="heading"?`<h4><cq-heading class="dropdown"
						${m?`filter-min="${m}"`:""}
						${b?`filter-label="${b}"`:""}
						${C?`filter-for="${C}"`:""}
						${l?`text="${l}"`:""}
						></cq-heading></h4>`:l?`<div>
						${c?`<span ciq-menu-icon class="icon ${c} ciq-icon-${c}"></span>`:""}						<span id="label_${l.replace(/ /g,"")}" label
							${i?`role="${B}"`:""}
						>${l}</span>
						${o?`<em class="ciq-screen-reader help-instr">(Help available, press question mark key)</em>
								<cq-help help-id="${o}" aria-hidden="true"></cq-help>`:""}						${i?`<span class="icon options ciq-edit" keyboard-selectable-child stxtap="${i}(${w})">
								<div class="ciq-screen-reader" role="button">Set ${l} Options</div>
								</span>`:""}						<span class="ciq-${s}"><span></span></span>
				      </div>`:""}			${s==="clickable"?"</cq-clickable>":""}		</li>`},e.UI.addComponentDefinition("cq-dropdown",t)},Df=E=>{const e=typeof _CIQ<"u"?_CIQ:E.CIQ;class t extends e.UI.DialogContentTag{adoptedCallback(){super.adoptedCallback(),e.UI.flattenInheritance(this,t),this.constructor=t}add(){let n=this.querySelector("[cq-custom-fibonacci-setting] input").value;if(!n||(n=parseFloat(n)/100,isNaN(n)))return;const r=this.context.stx.currentVectorParameters.fibonacci.fibs||[];let i,a;for(let o=0;o<r.length;o++)if(i=r[o],i.level>n){a=e.clone(i),a.level=n,a.display=!0,a.parameters&&(a.parameters.opacity=.25),r.splice(o,0,a);break}a||(r.length?i=e.clone(r[0]):i={color:"auto",parameters:{pattern:"solid",opacity:.25,lineWidth:1}},a=e.clone(i),a.level=n,a.display=!0,r.push(a)),this.open()}close(){if(this.opener){const n=new Event("change",{bubbles:!0,cancelable:!0});this.opener.dispatchEvent(n);const{currentVectorParameters:r}=this.context.stx,{fibonacci:i,vectorType:a}=r;i.fibsAlreadySet=!0,this.emitCustomEvent({effect:"save",detail:{type:a,levels:i.fibs.filter(o=>o.display&&(o.level>=0||a!="fibarc")).map(o=>o.level).join()}})}super.close()}open(n){this.addDefaultMarkup(),super.open(n),n&&(this.opener=n.caller);const r=this.context.stx.currentVectorParameters,{vectorType:i}=r,a=this.closest("cq-dialog");[...this.querySelectorAll("cq-fibonacci-settings > *:not(template)")].forEach(c=>c.remove()),r.fibonacci&&i!="fibtimezone"?(a.setTitle("Fibonacci Settings"),(r.fibonacci.fibs||[]).forEach(l=>{if(i==="fibarc"&&l.level<0)return;const u=e.UI.makeFromTemplate(this.querySelector("template"),this.querySelector("cq-fibonacci-settings"))[0],h=l.level*100;u.querySelector(".ciq-heading").innerText=h.toFixed(1)+"%";const d=u.querySelector("input");l.display&&(d.checked=!0),this.setChangeEvent(d,"fib",l.level),u.querySelector(".stx-data").append(d)})):a.setTitle("Settings"),this.querySelector("[cq-custom-fibonacci-setting] input").value=""}setChangeEvent(n,r,i){n.addEventListener("change",()=>{const a=this.context.stx.currentVectorParameters,{vectorType:o}=a;if(a.fibonacci&&o!="fibtimezone"){const c=a.fibonacci.fibs||[];n.type=="checkbox"&&c.forEach(l=>{l.level===i&&(l.display=!!n.checked)})}})}}t.markup=`
		<cq-scroll cq-no-maximize>
			<cq-fibonacci-settings>
				<template cq-fibonacci-setting>
					<cq-fibonacci-setting>
						<div class="ciq-heading"></div>
						<div class="stx-data">
							<input type="checkbox">
						</div>
					</cq-fibonacci-setting>
				</template>
			</cq-fibonacci-settings>
			<div cq-custom-fibonacci-setting>
				<input class="ciq-heading" type="text">%
				<div class="ciq-btn stx-data" stxtap="add()">Add</div>
			</div>
		</cq-scroll>
		<div class="ciq-dialog-cntrls">
			<div class="ciq-btn" stxtap="close()">Done</div>
		</div>
	`,e.UI.addComponentDefinition("cq-fib-settings-dialog",t)},Tf=E=>{const e=typeof _CIQ<"u"?_CIQ:E.CIQ;class t extends e.UI.ContextTag{adoptedCallback(){super.adoptedCallback(),e.UI.flattenInheritance(this,t),this.constructor=t}setContext(r){const{stx:i}=r;i.callbackListeners.floatingWindow||(i.callbackListeners.floatingWindow=[]),i.addEventListener("floatingWindow",a=>{const o=this["on"+e.capitalize(a.type)];if(o)return o.call(this,a),!0})}onShortcut({container:r,title:i,tag:a,content:o,width:c,status:l,onClose:u}){if(this.shortcutWindow){this.shortcutWindow.toggle(l).ensureVisible();return}this.shortcutWindow=this.constructor.windowImplementation.get({tag:a,content:o,title:i,container:r||document.body,onClose:u}),this.shortcutWindow.titleBarEl.setAttribute("title","Keyboard Shortcut Guide. "+this.shortcutWindow.titleBarEl.getAttribute("title")),this.shortcutWindow.toggle(!0).update({width:c}).positionRelativeTo()}onDocumentation({container:r,title:i,tag:a,content:o,targetElement:c,actionButtons:l,width:u,onClose:h}){function d(A,p){return()=>{A==="close"?p.toggle(!1):typeof A=="function"&&A()}}this.documentationWindow=this.constructor.windowImplementation.get({tag:a,content:o+"<br>",title:i,container:r||document.body,onClose:h}),this.documentationWindow.targetElement=c;const f=document.createElement("div");f.classList.add("ciq-window-actions"),this.documentationWindow.bodyEl.appendChild(f);for(let A of l){const p=document.createElement("button");p.innerText=A.label,p.style.marginTop="1em",p.style.marginRight="1em",p.classList.add("ciq-btn"),e.safeClickTouch(p,d(A.action,this.documentationWindow)),f.appendChild(p)}this.context.stx.translateUI&&this.context.stx.translateUI(this.documentationWindow.w),this.documentationWindow.titleBarEl.setAttribute("title","Help window. "+this.documentationWindow.titleBarEl.getAttribute("title")),this.documentationWindow.toggle(!0).update({width:u}).positionRelativeTo()}}class s{constructor({content:r,title:i,tag:a,minWidth:o,minHeight:c,container:l,onClose:u}){const h=document.createElement("div");h.innerHTML=this.constructor.markup,h.classList.add("ciq-window"),(l.ownerDocument||document).body.append(h),h.tag=a,h.docWindow=this,Object.assign(this,{isDragging:!1,isResizing:!1,isOpen:!1,xDiff:0,yDiff:0,x:50,y:50,w:h}),this.bindEvents();const d=e.UI.closestContextContainer(l);if(d&&d.currentTheme){h.classList.add(d.currentTheme);const{stx:f}=d.CIQ.UI.context;f.addEventListener("theme",()=>{h.className=`ciq-window ${d.currentTheme}`})}this.titleEl=h.querySelector(".ciq-window-title"),this.bodyEl=h.querySelector(".ciq-window-body"),this.titleBarEl=h.querySelector(".ciq-window-bar"),this.setProps({title:i,content:r,minWidth:o,minHeight:c,container:l,onClose:u}),this.render()}setProps({title:r,content:i,minWidth:a,minHeight:o,container:c,onClose:l}){const{w:u,titleEl:h,bodyEl:d}=this;h.removeAttribute("cq-translate-original"),d.removeAttribute("cq-translate-original"),r!==void 0&&(h.textContent=r),i!==void 0&&(d.innerHTML=i),a!==void 0&&(u.style.minWidth=a+"px"),o!==void 0&&(u.style.minHeight=o+"px"),c&&(this.container=c),l!==void 0&&(this.onClose=l)}bindEvents(){const{w:r}=this,i=l=>r.querySelector(l);i(".ciq-window-bar").addEventListener("mousedown",this.onStartDrag.bind(this));const a=this.toggleCollapse.bind(this);i(".ciq-window-bar").addEventListener("dblclick",a),i(".ciq-window-collapse").addEventListener("click",a),"top, right, bottom, left, top-right, bottom-right, bottom-left, top-left".split(/, /).forEach(l=>{i(`.ciq-window-resize-${l}`).addEventListener("mousedown",c(this))}),r.ownerDocument.addEventListener("mousemove",this.onMouseMove.bind(this)),r.ownerDocument.addEventListener("mouseup",this.onMouseUp.bind(this)),i(".ciq-window-close").addEventListener("click",this.toggle.bind(this,!1)),r.ownerDocument.defaultView.addEventListener("resize",this.ensureVisible.bind(this));function c(l){return u=>{u.button===0&&e.extend(l,{isResizing:u.target.className.replace(/ciq-window-resize-/,""),downX:u.pageX,downY:u.pageY,startWidth:l.width,startHeight:l.height,startLeft:l.x,startTop:l.y})}}}update({x:r,y:i,width:a,height:o}){return Object.assign(this,{x:r,y:i,width:a,height:o}),this.render(),this}positionRelativeTo({container:r,location:i="center"}={}){const{x:a,y:o,width:c,height:l}=(r||this.container||document.body).getBoundingClientRect(),u=this.w.ownerDocument.documentElement.scrollTop,h=this.w.ownerDocument.documentElement.scrollLeft;return this.width>c-20&&(this.width=c-20),this.height>l-20&&(this.height=l-20),i==="center"&&(this.x=h+(a+c/2-this.width/2),this.y=u+(o+l/2-this.height/2)),this.render(),this}ensureVisible(){if(!this.isOpen)return;const{x:r,y:i,width:a}=this.w.getBoundingClientRect(),{innerWidth:o,innerHeight:c}=this.w.ownerDocument.defaultView;i>c-20&&(this.y=c-20),r>o-a&&(this.x=o-a),this.render()}render(){const{x:r,y:i}=this;Object.assign(this.w.style,{display:this.isOpen?"":"none",transform:"translate("+r+"px, "+i+"px)"}),this.w.classList.toggle("ciq-wdragging",this.isDragging||this.isResizing)}get width(){return this.w.offsetWidth}set width(r){r&&(this.w.style.width=r+"px")}get height(){return this.w.offsetHeight}set height(r){r&&(this.w.style.height=r+"px")}clampX(r){return Math.min(Math.max(r,0),this.w.ownerDocument.defaultView.innerWidth-this.w.offsetWidth)}clampY(r){return Math.min(Math.max(r,0),this.w.ownerDocument.defaultView.innerHeight-this.titleBarEl.offsetHeight-8)}onMouseMove(r){const{isDragging:i,isResizing:a}=this;if(!i&&!a)return;const o=r.pageX-this.downX,c=r.pageY-this.downY;i&&(this.x=this.clampX(o),this.y=this.clampY(c));const{startWidth:l,startHeight:u}=this,h=2;let d,f;if(/left/.test(a)&&(f=this.startWidth-o,this.width=f,this.x=this.startLeft+o),/top/.test(a)&&(d=this.startHeight-c,this.height=d,this.y=this.startTop+c),a&&/right|bottom/.test(a)){this.width=/right/.test(a)?o+l:f||l,this.height=/bottom/.test(a)?c+u:d||u;const A=this.w.ownerDocument.defaultView;this.x+this.width-h>A.innerWidth&&(this.width=A.innerWidth-this.x-h),this.y+this.height-h>A.innerHeight&&(this.height=A.innerHeight-this.y-h)}this.render()}onStartDrag(r){r.button===0&&(this.isDragging=!0,this.downX=r.pageX-this.x,this.downY=r.pageY-this.y)}onMouseUp(){this.isDragging=!1,this.isResizing=!1,this.render()}toggle(r){const i=r===void 0?!this.isOpen:r,a=this.isOpen!==i;return this.isOpen=i,this.isOpen?(this.w.setAttribute("aria-labelledby","floating-window-title"),this.w.setAttribute("aria-hidden","false"),this.w.setAttribute("role","alertdialog"),setTimeout(()=>{this.w.tabIndex=-1,this.w.focus()},10)):(this.w.removeAttribute("role"),this.w.setAttribute("aria-hidden","true"),this.targetElement&&setTimeout(()=>{this.targetElement.tabIndex=-1,this.targetElement.focus()},10)),a&&!this.isOpen&&this.onClose&&(this.onClose(),this.isCollapsed&&this.toggleCollapse()),this.render(),this}toggleCollapse(){this.isCollapsed=!this.isCollapsed,this.isCollapsed?(this.prevHeight=this.height,this.w.classList.add("ciq-window-collapsed"),this.height=this.titleBarEl.offsetHeight,this.onCollapse&&this.onCollapse()):(this.height=this.prevHeight,this.w.classList.remove("ciq-window-collapsed"));const r=this.w.querySelector(".ciq-window-collapse");r.title=this.isCollapsed?"Expand":"Collapse",this.render()}}s.markup=`
	<div class="ciq-window-bar" title="Drag to reposition, double click to collapse.">
		<div><h3 id="floating-window-title" class="ciq-window-title"></h3></div>
		<span class="ciq-window-collapse" title="Collapse" aria-hidden="true"></span>
		<span class="ciq-window-close" title="Click to close" role="button"></span>
	</div>
	<div class="ciq-window-body"></div>
	<div class="ciq-window-resize-left"></div>
	<div class="ciq-window-resize-top"></div>
	<div class="ciq-window-resize-right"></div>
	<div class="ciq-window-resize-bottom"></div>
	<div class="ciq-window-resize-bottom-right"></div>
	<div class="ciq-window-resize-bottom-left"></div>
	<div class="ciq-window-resize-top-left"></div>
	<div class="ciq-window-resize-top-right"></div>
`,s.get=function(n){let r;return n.tag&&(r=Array.from((n.container.ownerDocument||document).querySelectorAll(".ciq-window")).find(i=>i.tag===n.tag),r)?(r.docWindow.setProps(n),r.docWindow):new this(n)},t.windowImplementation=s,e.UI.addComponentDefinition("cq-floating-window",t)},Mf=E=>{const e=typeof _CIQ<"u"?_CIQ:E.CIQ;class t extends e.UI.BaseComponent{connectedCallback(){if(!this.isConnected||this.attached)return;super.connectedCallback(),this.innerHTML=this.render(),this.columns=2,this.rows=2,this.generateTable(this.columns,this.rows),this.highlightTable(this.columns-1,this.rows-1),this.querySelector("table").addEventListener("mouseleave",()=>{this.generateTable(this.columns+1,this.rows+1),this.highlightTable(this.columns,this.rows)});const{srMapping:n={}}=this.constructor,r=i=>{let a=document.createElement("li");a.className="ciq-multi-chart-button "+i;const o=n[i]||"Custom Template";return o&&a.setAttribute("aria-label",o),a.setAttribute("role","menuitem"),e.safeClickTouch(a,(function(c){this.triggerUpdateGridEvent({template:i})}).bind(this)),a};if(this.templates){const i=this.querySelector(".ciq-grid-layout-picker");this.templates.split(" ").forEach(a=>{i.appendChild(r(a))}),i.childNodes.forEach(a=>{const o=getComputedStyle(a);let c=0;o.gridTemplateAreas&&o.gridTemplateAreas!="none"?c=[...new Set(o.gridTemplateAreas.match(/([a-z])+/gi))].length:o.getPropertyValue("--grid-dimension")&&(c=parseInt(o.getPropertyValue("--grid-dimension"))||0,c++);for(let l=0;l<c;l++)a.innerHTML+="<div></div>"})}this.setAttribute("role","menu"),this.setAttribute("aria-label","Multichart grid selector")}adoptedCallback(){super.adoptedCallback(),e.UI.flattenInheritance(this,t),this.constructor=t}get maxcols(){return this.getAttribute("maxcols")||4}set maxcols(n){this.setAttribute("maxcols",n)}get maxrows(){return this.getAttribute("maxrows")||4}set maxrows(n){this.setAttribute("maxrows",n)}get templates(){return this.getAttribute("templates")||""}set templates(n){this.setAttribute("templates",n)}get resize(){return this.getAttribute("resize")||""}set resize(n){this.setAttribute("resize",n)}generateTable(n,r){const i=this;this.resize=="fixed"&&(n=this.maxcols,r=this.maxrows);function a(c){const{column:l,row:u}=c.target.dataset;let h=parseInt(l)+1;h>i.maxcols&&(h=i.maxcols);let d=parseInt(u)+1;d>i.maxrows&&(d=i.maxrows),this.resize!="fixed"&&i.generateTable(h,d),i.highlightTable(parseInt(l),parseInt(u))}let o=this.querySelector("table");if(o){this.cleanTable(n,r),n=n||1,r=r||1;for(let c=1;c<=Math.min(r,this.maxrows);c++){let l;o.childNodes[c-1]?l=o.childNodes[c-1]:(l=document.createElement("tr"),o.appendChild(l));for(let u=1;u<=Math.min(n,this.maxcols);u++)if(!l.childNodes[u-1]){let h=document.createElement("td");h.dataset.row=c,h.dataset.column=u,h.dataset.rows=r,h.dataset.columns=n,h.addEventListener("mouseenter",a),h.setAttribute("aria-label",`${c} row${c-1?"s":""} ${u} column${u-1?"s":""}`),h.setAttribute("role","menuitem"),h.addEventListener("click",(function(d){this.triggerUpdateGridEvent({columns:d.target.dataset.column,rows:d.target.dataset.row})}).bind(this)),h.appendChild(document.createElement("div")),l.appendChild(h)}}}}triggerUpdateGridEvent({columns:n,rows:r,template:i}){this.columns=+n,this.rows=+r,this.template=i||"",this.highlightTable(this.columns,this.rows),this.highlightTemplate(),this.emitCustomEvent({effect:"update-grid",detail:{columns:n,rows:r,template:i}}),this.closest("cq-context, [cq-context]").dispatchEvent(new CustomEvent("update-grid",{detail:{columns:n,rows:r,template:i,container:this.closest("cq-context")},bubbles:!0,composed:!0}))}highlightTable(n,r){for(let c of this.querySelectorAll("td"))c.dataset.column<=n&&c.dataset.row<=r?c.classList.add("highlight"):c.classList.remove("highlight");const i=this.querySelector(".row.count"),a=this.querySelector(".multiply"),o=this.maxrows<2;i.style.display=o?"none":"",a.style.display=o?"none":"",i.innerHTML=r,this.querySelector(".column.count").innerHTML=n}highlightTemplate(n){n&&(this.template=n);const r=this.querySelectorAll(".ciq-grid-layout-picker .ciq-multi-chart-button");if(r.forEach(i=>{i.classList.remove("active")}),this.template){const i=Array.from(r).find(a=>a.classList.contains(this.template));i&&i.classList.add("active")}}cleanTable(n,r){let i=this.querySelector("table");for(;i.childNodes.length>r;)i.removeChild(i.lastChild);for(let a of i.childNodes)for(;a.childNodes.length>n;)a.removeChild(a.lastChild)}render(){return`
				<ul class="ciq-grid-layout-picker"></ul>
				<cq-separator></cq-separator>
				<table class="grid-size-picker"></table>
				<p><span class="row count">1</span> <span class="multiply">+</span> <span class="column count">1</span></p>
			`}}t.srMapping={"ciq-auto-grid-1":"Top 1 chart, bottom 2 charts","ciq-auto-grid-2":"Top 2 charts, bottom 1 chart","ciq-auto-grid-3":"Left 1 chart, right 2 charts","ciq-auto-grid-4":"Left 2 charts, right 1 chart","ciq-auto-grid-5":"Top 1 chart, bottom 3 charts","ciq-auto-grid-6":"Top 3 charts, bottom 1 chart","ciq-auto-grid-7":"Left 1 chart, right 3 charts","ciq-auto-grid-8":"Left 3 charts, right 1 chart","ciq-auto-grid-9":"Top 1 chart, bottom 4 charts","ciq-auto-grid-10":"Top 4 charts, bottom 1 chart","ciq-auto-grid-11":"Left 1 chart, right 4 charts","ciq-auto-grid-12":"Left 4 charts, right 1 chart"},e.UI.addComponentDefinition("cq-grid-size-picker",t)},Ff=E=>{const e=typeof _CIQ<"u"?_CIQ:E.CIQ;class t extends e.UI.BaseComponent{static get observedAttributes(){return["filter-for","filter-label","filter-min","icon","text"]}constructor(){super(),e.UI.makeShadow(this)}connectedCallback(){if(!(!this.isConnected||this.attached)){if(super.connectedCallback(),this.innerText&&!this.text&&(this.text=this.innerText.trim()),this.isShadowComponent&&this.children.length)for(;this.children.length;)this.root.appendChild(this.firstChild);this.markup=this.trimInnerHTMLWhitespace(),this.usingMarkup=!!this.markup.match(/\{\{(.{1,20}?)\}\}/g),this.build(),this.setupShadow()}}adoptedCallback(){super.adoptedCallback(),e.UI.flattenInheritance(this,t),this.constructor=t}handlePropertyChange(n,r,i){r!==i&&(this[n]=i,this.usingMarkup&&this.attached&&this.build())}build(){const{children:n}=this.root;(!n.length||this.usingMarkup)&&(this.usingMarkup=!0,n.length&&[...n].forEach(r=>{["LINK","STYLE"].includes(r.tagName)||r.remove()}),this.addDefaultMarkup(null,this.getMarkup()),this.makeFilter())}getMarkup(){let n=this.markup||this.constructor.markup;const r=n.match(/\{\{(.{1,20}?)\}\}/g);return r&&r.forEach(i=>{const a=i.substring(2,i.length-2),o=this[a];a==="icon"?n=n.replace(i,o||"hidden"):n=n.replace(i,o||(a==="filter-label"?"Search":""))}),n}makeFilter(){const n=this.qsa(".searchFilter",this,!0)[0];if(!this["filter-min"]){n&&n.remove();return}const r=this["filter-for"];let i=this.itemContainer||(r?this.qsa(`[filter-name='${r}']`,null,!0)[0]:this.nextElementSibling);if(!i||!i.root&&!i.children){setTimeout(()=>this.makeFilter(),100);return}i.root&&i!==i.root&&(i=i.root);let a="";const o=({target:{value:u}})=>{const h=new RegExp(u,"i");[...i.children].filter(d=>!d.contains(this)).forEach(d=>{const f=u&&!h.test(d.textContent)?"add":"remove";d.classList[f]("item-hidden"),d.ariaHidden=f==="add",a!==u&&(a=u,this.removeFocused.apply(i),this.qsa(".cq-keyboard-selected-highlight").forEach(A=>{A.classList.add("disabled")}),c.focus())}),this.emitCustomEvent({action:"input",effect:"search",detail:{value:u}})},c=this.qsa("input",this,!0)[0];c&&(c.addEventListener("stxtap",u=>u.stopPropagation(),!0),c.addEventListener("input",o));const l=this["filter-min"]||15;if(n){const u=()=>{const h=i.children.length;n.classList[h>l?"add":"remove"]("active")};if(typeof MutationObserver>"u"){n.classList.add("active");return}this.mutationObserver&&this.mutationObserver.disconnect(),this.mutationObserver=new MutationObserver(u),this.mutationObserver.observe(i,{childList:!0,subtree:!0}),u()}}}t.markup=`
		<div>{{text}}</div>
		<div class="searchFilter">
			<span class="icon {{icon}}"></span>
			<input type="search" placeholder="{{filter-label}}" tabindex="-1"></input>
		</div>
	`,e.UI.addComponentDefinition("cq-heading",t)},_f=E=>{const e=typeof _CIQ<"u"?_CIQ:E.CIQ;class t extends e.UI.ContextTag{adoptedCallback(){super.adoptedCallback(),e.UI.flattenInheritance(this,t),this.constructor=t}disconnectedCallback(){super.disconnectedCallback(),this.attached=!0}setContext(n){this.addDefaultMarkup();const r=new e.UI.HeadsUp(this,n,{followMouse:!0,autoStart:!1}),i=n.config&&n.config.channels?n.config.channels.headsUp:"layout.headsUp";this.channelSubscribe(i,a=>{r[a==="dynamic"||(a||{}).dynamic?"begin":"end"]()})}}t.markup=`
		<svg version="1.1" x="0px" y="0px" viewBox="0 0 215 140" enableBackground="new 0 0 215 140">
			<defs>
				<filter id="ciq-hu-shadow" height="130%">
					<feGaussianBlur in="SourceAlpha" stdDeviation="1"></feGaussianBlur>
					<feOffset dx="0" dy="1" result="offsetblur"></feOffset>
					<feComponentTransfer>
						<feFuncA type="linear" slope="0.2"></feFuncA>
					</feComponentTransfer>
					<feMerge>
						<feMergeNode></feMergeNode>
						<feMergeNode in="SourceGraphic"></feMergeNode>
					</feMerge>
				</filter>
			</defs>
			<polygon
				class="ciq-hu-bg" style="stroke-width: 1;"
				points="198.4,124.4 1,124.4 1,1 214,1 214,137.8"
				filter="url(#ciq-hu-shadow)"
				/>
			<path class="ciq-hu-stroke"
				fill="#398DFF"
				d="M213,2v133.6l-13.7-11.8l-0.6-0.5H198H2V2H213 M215,0H0v125.4h198l17,14.6V0L215,0z">
			</path>
		</svg>
		<div>
			<cq-hu-col1>
				<cq-hu-date></cq-hu-date>
				<cq-hu-price></cq-hu-price>
				<cq-volume-grouping>
					<div>Volume</div>
					<div><cq-volume-visual></cq-volume-visual></div>
					<div><cq-hu-volume></cq-hu-volume><cq-volume-rollup></cq-volume-rollup></div>
				</cq-volume-grouping>
			</cq-hu-col1>
			<cq-hu-col2>
				<div>Open</div><cq-hu-open></cq-hu-open>
				<div>Close</div><cq-hu-close></cq-hu-close>
				<div>High</div><cq-hu-high></cq-hu-high>
				<div>Low</div><cq-hu-low></cq-hu-low>
			</cq-hu-col2>
		</div>
	`,e.UI.addComponentDefinition("cq-hu-dynamic",t)},If=E=>{const e=typeof _CIQ<"u"?_CIQ:E.CIQ;class t extends e.UI.ContextTag{adoptedCallback(){super.adoptedCallback(),e.UI.flattenInheritance(this,t),this.constructor=t}disconnectedCallback(){super.disconnectedCallback(),this.attached=!0}setContext(n){this.addDefaultMarkup();const r=new e.UI.HeadsUp(this,n,{autoStart:!0}),i=n.config&&n.config.channels?n.config.channels.headsUp:"layout.headsUp";this.channelSubscribe(i,a=>{r[a==="static"||(a||{}).static?"begin":"end"]()})}}t.markup=`
		<div>
			<div>Price</div><cq-hu-price></cq-hu-price>
			<div>Open</div><cq-hu-open></cq-hu-open>
			<div>Close</div><cq-hu-close></cq-hu-close>
		</div>
		<div>
			<div>Vol</div>
			<cq-volume-section>
				<cq-hu-volume></cq-hu-volume>
				<cq-volume-rollup></cq-volume-rollup>
			</cq-volume-section>
			<div>High</div><cq-hu-high></cq-hu-high>
			<div>Low</div><cq-hu-low></cq-hu-low>
		</div>
	`,e.UI.addComponentDefinition("cq-hu-static",t)},Uf=E=>{const e=typeof _CIQ<"u"?_CIQ:E.CIQ;class t extends e.UI.ContextTag{static get observedAttributes(){return["help-id"]}constructor(){super(),e.UI.makeShadow(this)}connectedCallback(){!this.isConnected||this.attached||(super.connectedCallback(),["mousedown","pointerdown","touchstart"].forEach(n=>this.addEventListener(n,this.mouseTouchDown,{passive:!1})),["mouseup","pointerup","touchend","touchmove","click"].forEach(n=>this.addEventListener(n,this.mouseTouchUp,{passive:!1})),this.setupShadow())}adoptedCallback(){super.adoptedCallback(),e.UI.flattenInheritance(this,t),this.constructor=t}disconnectedCallback(){this.doNotDisconnect||(this.removeClaim(this),super.disconnectedCallback())}setContext(n){this.addDefaultMarkup();let{stx:r}=n;e.Help&&e.UI.activatePluginUI(r,"help"),this.ensureMessagingAvailable(r),this.addClaim(this)}mouseTouchDown(n){this.stopPropagation=!1,!(!e.Help||!e.Help.Content||!e.Help.Content[this["help-id"]]||this.pressTimer||n.button&&n.button>=2)&&(this.pressTimer=setTimeout(()=>{this.pressTimer=null,setTimeout(()=>this.classList.remove("pressing"),1e3),this.press()},this.context.stx.longHoldTime),this.classList.add("pressing"))}mouseTouchUp(n){this.stopPropagation&&n.stopPropagation(),!(!e.Help||!e.Help.Content||!e.Help.Content[this["help-id"]]||n.button&&n.button>=2)&&(n.type==="click"&&(!n.detail&&!this.classList.contains("pressing")&&this.press(),this.classList.remove("pressing")),this.pressTimer&&(clearTimeout(this.pressTimer),this.pressTimer=null))}keyStroke(n,r,i){if(r!=="?")return!1;const a=this["help-id"];let o=this.qsa("[help-id]",e.getActiveElement(),!0);return o.length===1?o=o[0]:o=null,o||(o=e.climbUpDomTree(e.getActiveElement(),"[help-id]",!0)[0]),!o&&n.tabActiveElement&&(o=this.qsa("[help-id]",n.tabActiveElement.element,!0)[0]),!o||a!==o.getAttribute("help-id")?!1:(this.press(),!0)}ensureMessagingAvailable(n){setTimeout(()=>{const r=n.uiContext.topNode;r.querySelector("cq-floating-window")||r.append(document.createElement("cq-floating-window"))})}verifyHelpContent(){if(!e.Help||!e.Help.Content)return;e.Help.Content[this["help-id"]]?this.classList.add("help-available"):this.classList.remove("help-available")}press(){if(!e.Help||!e.Help.Content)return;let{stx:n}=this.context,r=this["help-id"]||"default",i=e.Help.Content[r]||e.Help.Content.default;this.emitCustomEvent({action:"longpress",effect:"help",detail:{params:Object.assign({helpId:r},i)}}),i&&(n.dispatch("floatingWindow",{type:"documentation",title:i.title,content:i.content,targetElement:this.parentElement||this.getRootNode().host,actionButtons:[],container:n.chart.panel.subholder,onClose:()=>!0,width:500,status:!0,tag:"help"}),this.stopPropagation=!0)}}t.markup=`
		<div class="ciq-help-widget"></div>
		<div class="press-indicator" aria-hidden="true">
			<!-- 1x1 transparent image to maintain aspect ratio when sizing by height -->
			<img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7">
		</div>
	`,e.UI.addComponentDefinition("cq-help",t)},Qf=E=>{const e=typeof _CIQ<"u"?_CIQ:E.CIQ;let t=!1;class s extends HTMLElement{connectedCallback(){if(this.hasAttribute("attached"))return;this.setAttribute("attached","");const r=this,i=this.getAttribute("env-container")||"body",a=this.getAttribute("tmpl-src");let o=this.querySelector("cq-context");o||(o=this.appendChild(document.createElement("cq-context")));const c=this.hasAttribute("no-save");this.style.visibility="hidden",e.loadUI(a,o,function(l){if(l)return;const u=r.querySelector("cq-chart-title");u&&u.removeAttribute("cq-browser-tab");const h=r.querySelectorAll("cq-ui-manager, cq-dialog, cq-color-picker");for(let f=0;f<h.length;f++){const A=h[f];A.parentNode.removeChild(A),t||document.querySelector(i).appendChild(A)}t=!0;const d={extendedHours:!0,rangeSlider:!0,inactivityTimer:!0,fullScreen:!1,initialSymbol:r.getAttribute("symbol")||void 0,restore:!c};r.signalEvent=new CustomEvent("signal-chart-ready",{detail:{node:r,params:d}}),r.setAttribute("cq-event-flag",""),r.style.visibility="",r.ownerDocument.body.dispatchEvent(r.signalEvent)})}disconnectedCallback(){this.stx.destroy()}}customElements.define("cq-instant-chart",s)},Lf=E=>{const e=typeof _CIQ<"u"?_CIQ:E.CIQ;if(!e.I18N)console.error("languageDialog component requires first activating i18n feature.");else{class t extends e.UI.DialogContentTag{adoptedCallback(){super.adoptedCallback(),e.UI.flattenInheritance(this,t),this.constructor=t}close(){const n=this.ownerDocument.querySelector("cq-language-dialog");n&&n.closest("cq-dialog,cq-menu").close()}open(n){this.addDefaultMarkup(),super.open(n);const r=this.querySelector("cq-languages");[...r.children].forEach(c=>{c.matches("template")||c.remove()});const i=this.querySelector("template"),{languages:a}=e.I18N;if(!a)return;const o=c=>()=>{e.UI.contextsForEach(function(){const{stx:l}=this;e.I18N.localize(l,c),this.config.setHtmlLang&&document.documentElement.setAttribute("lang",c),l.preferences.language=c,l.changeOccurred("preferences"),l.draw()},this),e.I18N.translateUI(c,this.dialog),this.emitCustomEvent({effect:"change",detail:{language:c}})};for(let c in a){const l=e.UI.makeFromTemplate(i,r)[0];l.querySelector("cq-language-name").innerText=a[c],l.querySelector("cq-flag").setAttribute("cq-lang",c),e.UI.stxtap(l,o(c))}if(this.ownerDocument.body.keystrokeHub){let{tabActiveModals:c}=this.ownerDocument.body.keystrokeHub;c[0]&&this.ownerDocument.body.keystrokeHub.setKeyControlElement(c[0])}}}t.markup=`
		<cq-languages role="listbox">
			<template><div keyboard-selectable="true" role="option"><cq-flag></cq-flag><cq-language-name></cq-language-name></div></template>
		</cq-languages>
	`,e.UI.addComponentDefinition("cq-language-dialog",t)}},Pf=E=>{const e=typeof _CIQ<"u"?_CIQ:E.CIQ;class t extends e.UI.ContextTag{adoptedCallback(){super.adoptedCallback(),e.UI.flattenInheritance(this,t)}show(n){this.classList.add("stx-show");const{context:r}=this;this.isShowing=!0,r&&n&&(this.applyClass=n,r.stx.container.classList.add("ciq-loading-data"))}hide(){this.classList.remove("stx-show"),this.isShowing=!1;const{context:n}=this;n&&this.applyClass&&n.stx.container.classList.remove("ciq-loading-data")}setContext(n){this.parentNode.stx&&n.setLoader(this),this.isShowing||this.hide()}}e.UI.addComponentDefinition("cq-loader",t)},Hf=E=>{const e=typeof _CIQ<"u"?_CIQ:E.CIQ;if(!e.ChartEngine.Driver)console.error("lookup component requires first activating quoteFeed feature.");else if(!e.ChartEngine.Driver.Lookup)console.error("lookup component requires first activating symbolLookupBase feature.");else{class t extends e.UI.ContextTag{static get observedAttributes(){return["cq-exchanges","cq-keystroke-default","cq-uppercase"]}constructor(){super(),this.usingEmptyDriver=!1,this.currentFilter=null,this.filterElements=null,this.params={},this.overrideIsActive=!1,e.UI.makeShadow(this)}connectedCallback(){!this.isConnected||this.attached||(super.connectedCallback(),this.attached=!0,this.setupShadow())}adoptedCallback(){super.adoptedCallback(),e.UI.flattenInheritance(this,t),this.constructor=t}disconnectedCallback(){this.doNotDisconnect||(this.removeClaim(this),super.disconnectedCallback())}acceptText(n,r){this.params.driver||(this.context.lookupDriver?this.setDriver(this.context.lookupDriver):(this.setDriver(new e.ChartEngine.Driver.Lookup),this.usingEmptyDriver=!0));const i=o=>{this.params.driver.exchanges=this.params.driver.exchanges,this.results(o)},a=this["cq-exchanges"];a&&(this.params.driver.exchanges=a.split(",")),this.emitCustomEvent({effect:"search",detail:{value:n,filter:r,exchanges:a}}),this.params.driver.acceptText(n,r,null,i)}chooseResult({node:n}){e.blur(this.input),this.selectItem(n.params.data),this.input.value="",setTimeout(this.close.bind(this))}close(){if(this.keyboardNavigation)this.highlightItem(this.input,1e3*(this.getOpenCloseTransition()||0)),this.removeFocused(this.filterElements),this.resultList.keyboardNavigation=null;else{const r=this.ownerDocument.body.keystrokeHub;r&&setTimeout(()=>r.highlightAlign(),250)}const n=e.climbUpDomTree(this,"cq-dialog,cq-menu",!0)[0];n&&n.close()}forceInput(){const n=this.input;this.selectItem({symbol:n.value}),e.blur(n),this.close(),n.value=""}getOpenCloseTransition(){let{transition:n}=getComputedStyle(this);return n&&(n=n.match(/width ((\d{1,4}\.)?\d{1,4})s/),n&&(n=n[1])),n}initialize(){const{root:n}=this;if(this.addDefaultMarkup(),this.resultList=n.querySelector("cq-dropdown"),this.input=n.querySelector("input"),!this.input){const a=document.createElement("input");a.setAttribute("type","hidden"),a.value="",this.input=n.appendChild(a)}e.UI.stxtap(this.input,function(){this.focus()});const r=this;Array.from(this.input).forEach(function(a){a.addEventListener("paste",function(o){const c=o.target;setTimeout(function(){r.acceptText(c.value,r.currentFilter)},0)})});const i=n.querySelectorAll(".filters > *");i&&i.forEach(function(a){r.makeTap(a,function(){i.forEach(function(o){o.classList.remove("true")}),this.classList.add("true"),r.currentFilter=this.getAttribute("cq-translate-original")||this.innerHTML,r.acceptText(r.input.value,r.currentFilter)})}),this.hasAttribute("cq-keystroke-claim")&&this.addClaim(this)}isActive(){return this.input.value!==""}keyStroke(n,r,i,a){if(a.ctrl||a.cmd||r=="Meta"||r=="Win")return!1;const o=this.input,c=e.getActiveElement(),l=c===o;let u=!1;if(!l&&(i.altKey||c&&(c.tagName=="INPUT"||c.tagName=="TEXTAREA")))return!1;let h=!1,d=!1;if(e.climbUpDomTree(this,".stxMenuActive",!0)[0]&&(d=!0),(l||d)&&(h=!0),!h&&(!this["cq-keystroke-default"]||!d&&this.uiManager.topMenu()))return;if((r===" "||r==="Spacebar")&&o.value==="")return!1;let A=this.findFocused(this.filterElements);switch(r){case"Delete":case"Backspace":case"Del":o.value.length&&(window.getSelection().toString()?o.value="":(l||(o.value=o.value.substring(0,o.value.length-1)),o.value.length&&this.acceptText(o.value,this.currentFilter)),u=!0),r=="Backspace"&&(u=!0);break;case"Escape":case"Esc":o.value="",this.close(),e.blur(o),u=!0;break;case"Enter":if(this.resultList.focused())return o.value="",!1;if(c===o){let{value:p}=o;["false","0",null].indexOf(this["cq-uppercase"])==-1&&(p=p.toUpperCase()),this.selectItem({symbol:p}),e.blur(o),this.close(),o.value=""}this["cq-keystroke-default"]?u=!0:u=this.qsa("[cq-focused]",this,!0).length;break;case"ArrowRight":case"Right":A.length&&(this.resultList.keyboardNavigation&&(this.resultList.keyboardNavigation=null),this.focusNextItem(this.filterElements),this.clickFocusedItem(this.filterElements,i));break;case"ArrowLeft":case"Left":this.resultList.keyboardNavigation&&(this.resultList.keyboardNavigation=null),A.length&&(this.focusNextItem(this.filterElements,!0),this.clickFocusedItem(this.filterElements,i));break;case"ArrowDown":case"Down":if(!this.keyboardNavigation)break;if(A=this.findFocused(this.filterElements),A.length){if(!this.resultList.keyboardNavigation){const p=this.qsa("[keyboard-selectable]",this.resultList,!0)[0];if(p)return this.resultList.keyboardNavigation=this.keyboardNavigation,this.focusItem(p),!0}}else for(let p=0;p<this.filterElements.length;p++){const g=this.filterElements[p];if(g.classList.contains("true")){this.focusItem(g);break}}e.blur(o);break;case"ArrowUp":case"Up":if(!this.keyboardNavigation)break;if(this.resultList.keyboardNavigation){const p=this.qsa(".item:first-of-type [cq-focused]",this.resultList,!0)[0];p&&(p.removeAttribute("cq-focused"),this.resultList.keyboardNavigation=null,this.highlightFocusedItem(this.filterElements))}else A.length&&(this.removeFocused(A),this.highlightItem(o),e.focus(o));break;default:r.length===1&&(l||(o.value=o.value+r),this.acceptText(o.value,this.currentFilter),u=!0);break}if(u)return this.usingEmptyDriver||!o.value.length&&(r=="Escape"||r=="Esc"||r=="Enter"||!l)?this.close():this.open(),l?{allowDefault:!0}:!0}open(){this.highlightItem(this.input,1e3*(this.getOpenCloseTransition()||0));const n=e.climbUpDomTree(this,"cq-dialog,cq-menu",!0)[0];n&&n.open({e:{target:this}})}onKeyboardDeselection(){e.blur(this.input),this.close(),this.keyboardNavigation&&this.keyboardNavigation.highlightPosition(),this.resultList.keyboardNavigationWait=!1}onKeyboardSelection(){this.highlightItem(this.input),e.focus(this.input),this.resultList.keyboardNavigationWait=!0,this.open()}reset(){this.input[0].value="",this.resultList.empty()}results(n){const r=this.root.querySelector("cq-dropdown"),i=e.UI.BaseComponent.getHelper(this,"MenuConfig");if(r&&i){const a=e.uniqueID(),o=[];n.forEach(c=>{const[l,u,h]=c.display,f={type:"item",label:`<span>${l}</span><span>${u}</span><span>${h}</span>`,tap:"chooseResult",data:c.data};o.push(f)}),i[a]={content:o},r.setAttribute("config",a),delete i[this.lastResultId],this.lastResultId=a}}selectItem(n,r){this.params.cb&&this.params.cb(n,r),n&&this.emitCustomEvent({action:"input",effect:"select",detail:n})}setCallback(n){this.params.cb=n}setContext(n){this.initialize();const{config:r,stx:i}=n;if(!r)return;const{channels:a={}}=r;this.channelSubscribe(a.breakpoint||"channel.breakpoint",o=>{let c=i.crossSection?i.crossSection.symbolInputType:"Symbol";o==="break-lg"?c="Enter "+c:o==="break-sm"&&(c=""),this.input.setAttribute("cq-translate-placeholder-original",c),this.input.setAttribute("placeholder",i.translateIf(c)),i.translateUI&&i.translateUI(this.input.parentElement),this.root.querySelector("cq-dropdown").resize()}),this.filterElements=this.root.querySelectorAll(".filters > *"),!this.params.cb&&n.changeSymbol&&(this.params.cb=n.changeSymbol)}changeContext(n){this.params.cb&&n.changeSymbol&&(this.params.cb=n.changeSymbol)}setDriver(n){this.params.driver=n}}t.markup=`
		<div class="input-area" cq-no-close>
			<span class="icon search"></span>
			<input type="text" spellcheck="false" autocomplete="off" autocorrect="off" autocapitalize="none" name="symbol" placeholder="" tabindex="-1">
			<div cq-tooltip>Search</div>
		</div>
		<div class="results-area">
			<ul class="filters" cq-no-close>
				<li class="true">ALL</li>
				<li>STOCKS</li>
				<li>FX</li>
				<li>INDEXES</li>
				<li>FUNDS</li>
				<li>FUTURES</li>
			</ul>
			<cq-dropdown class="lookup"></cq-dropdown>
		</div>
	`,e.UI.addComponentDefinition("cq-lookup",t)}},Nf=E=>{const e=typeof _CIQ<"u"?_CIQ:E.CIQ;class t extends e.UI.DialogContentTag{static get observedAttributes(){return["filter"]}constructor(n={}){super(),this.params=n,this.swatchColors=e.UI.defaultSwatchColors,this.initialized=!1}adoptedCallback(){super.adoptedCallback(),e.UI.flattenInheritance(this,t),this.constructor=t}disconnectedCallback(){this.doNotDisconnect||(this.removeClaim(this),super.disconnectedCallback())}handlePropertyChange(n,r,i){if(i!==r)switch(this[n]=i,n){case"filter":if(this.form){const{filter:a,symbol:o}=this.form.elements;a.value=i,this.acceptText(o.value)}break}}acceptText(n){this.params.driver.acceptText(n,this.filter,null,r=>this.results(r)),this.emitCustomEvent({action:"input",effect:"search",detail:{value:n}})}open(n){const{caller:r,context:i,callback:a,useFirstResult:o}=n;a?this.selectItem=l=>{a(l),this.close()}:this.selectItem=t.prototype.selectItem.bind(this),this.useFirstResult=o,this.firstResult=null;const c=r&&r.hasAttribute("comparison");if(!(c&&!i.stx.chart.symbol)){if(this.maintainCase=r&&!["false","0",null].includes(r.getAttribute("cq-maintain-case")),super.open(n),this.isComparison=c,this.dialog.setTitle(c?"Add Comparison":"Symbol Lookup"),c?(this.input.parentElement.parentElement.classList.add("comparison"),e.UI.pickSwatchColor(this,this.swatch)):this.input.parentElement.parentElement.classList.remove("comparison"),!this.filter){const l=this.filters.firstElementChild;this.currentFilter=l,this.filter=l.innerText,l.classList.add("true"),l.ariaChecked="true"}this.dialog.setAttribute("native-tabbing",!0),setTimeout(()=>{this.input.focus()},10)}}close(){this.channelWrite("channel.lookup",!1,this.context.stx),this.input.value="",super.close()}hide(){this.swatch.colorPicker&&this.swatch.colorPicker.close()}initialize(){this.addDefaultMarkup(),this.form=this.querySelector("form"),this.input=this.querySelector("cq-lookup-input input"),this.filters=this.querySelector("cq-lookup-filters"),this.resultList=this.querySelector(".ciq-lookup-results"),this.resultTemplate=this.querySelector("template#lookupResult"),this.swatch=this.querySelector("cq-swatch"),this.submit=this.querySelector("[type=submit]"),this.input.addEventListener("input",n=>{this.acceptText(n.target.value)}),this.form.addEventListener("submit",n=>{n.preventDefault(),this.selectItem((this.useFirstResult?this.firstResult:null)||this.input.value)}),this.onClose=()=>this.reset(),this.initialized=!0,e.UI.scrollbarStyling&&e.UI.scrollbarStyling.refresh(this.resultList,{maxScrollbarLength:500}),this.addClaim(this),this.filters.addEventListener("click",this.setFilter.bind(this)),this.filters.addEventListener("mousedown",n=>{this.context.stx.ownerWindow.requestAnimationFrame(()=>n.target.blur())}),this.verticalStructure=t.verticalStructure.map(n=>this.querySelector(n))}reset(){const{input:n,resultList:r}=this;for(n.value="";r.firstChild;)r.removeChild(r.firstChild)}results(n){const{resultList:r}=this;for(;r.firstChild;)r.removeChild(r.firstChild);this.input.ariaExpanded="false",this.firstResult=n[0].data,n.forEach(a=>{const o=document.createElement("li");let{data:c,display:l}=a;o.classList.add("result");let u=Object.entries(c).filter(h=>l.find(d=>h[1]===d));o.innerHTML=i(u.map(h=>`<span class="${h[0]}">${h[1]}</span>`).join("")),e.UI.stxtap(o.firstChild,()=>this.selectItem(c)),r.append(o)}),this.input.ariaExpanded="true";function i(a){return`<cq-item tabindex="0">${a}</cq-item>`}}selectItem(n){const r=n.symbol&&n||{symbol:n};let i=n.symbol||n;if(!i||typeof i!="string"||!i.trim().length)return;this.maintainCase||(i=i.toUpperCase()),r.symbol=i;const{stx:a,changeSymbol:o}=this.context,{symbol:c}=a.chart;if(this.isComparison){if(c.toLowerCase()===i.toLowerCase()){a.dispatch("notification","duplicatesymbol");return}a.addSeries(i,{name:"comparison "+i,symbolObject:r,color:this.swatch.style.backgroundColor,isComparison:!0})}else o(r);this.emitCustomEvent({effect:"select",detail:n.symbol?n:{symbol:n}}),this.close()}setContext(n){this.context=n,this.dialog=this.closest("cq-dialog"),this.dialog.setAttribute("native-tabbing",!0),this.params.driver||this.setDriver(n.lookupDriver),this.initialized||this.initialize()}setFilter(n){this.currentFilter&&this.currentFilter.classList.remove("true"),this.currentFilter.ariaChecked="false";const r=n.target;n.preventDefault(),r.classList.add("true"),r.ariaChecked="true",this.filter=r.innerText,this.currentFilter=r}setDriver(n){this.params.driver=n}keyStroke(n,r,i){const a=this.context.uiManager.topMenu();if(a&&a.matches("cq-color-picker"))return;const o=this.ownerDocument.activeElement,c=o.parentElement,l=m=>m.findIndex(b=>b===o);let u,h,d,f;const A=this.verticalStructure.findIndex(m=>m.contains(o)),p=o.matches("cq-item"),g=o.matches("[role=radio]");switch(r){case"ArrowDown":case"Down":if(g&&(f=o.nextElementSibling,f))break;p?(u=this.naturalTabElements(this.resultList),h=l(u),f=u[h+1]):(d=this.verticalStructure[A+1],f=this.naturalTabElements(d)[0]);break;case"ArrowUp":case"Up":if(g&&(f=o.previousElementSibling,f))break;p?(u=this.naturalTabElements(this.resultList),h=l(u),f=u[h-1],h===0&&(d=this.verticalStructure[A-1],f=this.naturalTabElements(d)[0])):(d=this.verticalStructure[A-1],f=this.naturalTabElements(d)[0]);break;case"ArrowLeft":case"Left":f=o.previousElementSibling;break;case"ArrowRight":case"Right":f=o.nextElementSibling;break;case"Enter":c===this.filters&&this.setFilter(i),(o===this.input||o===this.submit)&&(this.form.requestSubmit?this.form.requestSubmit():this.form.dispatchEvent(new Event("submit")));break}f&&(this.removeFocused(u),this.focusItem(f))}}t.verticalStructure=["cq-lookup-input","cq-lookup-filters",".ciq-lookup-results"],t.markup=`
	<form role="search">
		<div class="ciq-search-container">
			<cq-lookup-input class="hide-label">
				<cq-lookup-icon></cq-lookup-icon>
				<label id="lookup_dialog_input_label">Input Search Text</label>
				<input type="text"
					spellcheck="false"
					autocomplete="off"
					autocorrect="off"
					autocapitalize="none"
					name="symbol"
					placeholder=""
					role="combobox"
					aria-expanded="false"
					aria-labelledby="lookup_dialog_input_label"
				>
			</cq-lookup-input>
			<cq-swatch-input class="hide-label">
				<label id="lookup_dialog_swatch_label">Comparison Series Color</label>
				<cq-swatch tabindex="0" name="color" aria-labelledby="lookup_dialog_swatch_label"></cq-swatch>
				<input name="color" type="hidden"/>
			</cq-swatch-input>
			<button type="submit" class="ciq-btn">GO</button>
		</div>
		<cq-lookup-filters role="group" aria-label="Search Result Filters">
			<button type="button" class="ciq-filter" role="radio">ALL</button>
			<button type="button" class="ciq-filter" role="radio">STOCKS</button>
			<button type="button" class="ciq-filter" role="radio">FX</button>
			<button type="button" class="ciq-filter" role="radio">INDEXES</button>
			<button type="button" class="ciq-filter" role="radio">FUNDS</button>
			<button type="button" class="ciq-filter" role="radio">FUTURES</button>
		</cq-lookup-filters>
		<input type="hidden" name="filter" />
	</form>
	<ul class="ciq-lookup-results" aria-label="Results"></ul>
	<template id="lookupResult">
		<li><span></span></li>
	</template>
	`,e.UI.addComponentDefinition("cq-lookup-dialog",t)},qf=E=>{const e=typeof _CIQ<"u"?_CIQ:E.CIQ;class t extends e.UI.ContextTag{adoptedCallback(){super.adoptedCallback(),e.UI.flattenInheritance(this,t)}}e.UI.addComponentDefinition("cq-marker",t)},Of=E=>{const e=typeof _CIQ<"u"?_CIQ:E.CIQ;class t extends e.UI.DialogContentTag{adoptedCallback(){super.adoptedCallback(),e.UI.flattenInheritance(this,t),this.constructor=t}open(n){this.addDefaultMarkup(),super.open(n),n&&(this.opener=n.caller);const{currentVectorParameters:r}=this.context.stx,i=r.measurementline||{},a=this.querySelector('div[fieldname="hoverdisplay"] input');a.checked=i.calloutOnHover,a.changeHandler&&a.removeEventListener("change",a.changeHandler),a.changeHandler=({target:o})=>{const c=o.checked;i.calloutOnHover=c;const l=new Event("change",{bubbles:!0,cancelable:!0});this.opener.dispatchEvent(l),this.emitCustomEvent({effect:"select",detail:{field:"hoverdisplay",value:c}})},a.addEventListener("change",a.changeHandler),Object.keys(i.displayGroups).forEach(o=>{const c=this.querySelector(`div[fieldname="${o}"] input`);c&&(c.checked=i.displayGroups[o],c.groupName=o,c.changeHandler&&c.removeEventListener("change",c.changeHandler),c.changeHandler=({target:l})=>{const{checked:u,groupName:h}=l;i.displayGroups[h]=u;const d=new Event("change",{bubbles:!0,cancelable:!0});this.opener.dispatchEvent(d),this.emitCustomEvent({effect:"select",detail:{field:h,value:u}})},c.addEventListener("change",c.changeHandler))})}}t.markup=`
	<cq-scroll cq-no-maximize>
		<div class="ciq-drawing-dialog-setting" fieldname="hoverdisplay">
			<div class="ciq-heading">Display Info on Hover</div>
			<div class="stx-data">
				<input type="checkbox">
			</div>
		</div>

		<div class="ciq-drawing-dialog-setting" fieldname="bars">
			<div class="ciq-heading"># Bars</div>
			<div class="stx-data">
				<input type="checkbox">
			</div>
		</div>
		<div class="ciq-drawing-dialog-setting" fieldname="delta">
			<div class="ciq-heading">Delta (% Delta)</div>
			<div class="stx-data">
				<input type="checkbox">
			</div>
		</div>
		<div class="ciq-drawing-dialog-setting" fieldname="annpercent">
			<div class="ciq-heading">Annualized %</div>
			<div class="stx-data">
				<input type="checkbox">
			</div>
		</div>
		<!--<div class="ciq-drawing-dialog-setting" fieldname="totreturn">
			<div class="ciq-heading">Total Return</div>
			<div class="stx-data">
				<input type="checkbox">
			</div>
		</div>-->
		<div class="ciq-drawing-dialog-setting" fieldname="volume">
			<div class="ciq-heading">Volume</div>
			<div class="stx-data">
				<input type="checkbox">
			</div>
		</div>
		<div class="ciq-drawing-dialog-setting" fieldname="studies">
			<div class="ciq-heading">Studies</div>
			<div class="stx-data">
				<input type="checkbox">
			</div>
		</div>
	</cq-scroll>
	<div class="ciq-dialog-cntrls">
		<div class="ciq-btn" stxtap="close()">Done</div>
	</div>
`,e.UI.addComponentDefinition("cq-measurementline-settings-dialog",t)},Rf=E=>{const e=typeof _CIQ<"u"?_CIQ:E.CIQ;class t extends e.UI.BaseComponent{static get observedAttributes(){return["binding","config","help-id","icon","reader","responsive","state","text","tooltip","lift-dropdown"]}get focusElement(){return this.getAttribute("cq-focus")}constructor(){super(),e.UI.makeShadow(this),this.activeClassName="stxMenuActive",this.active=!1,this.adjustLiftPosition=this.adjustLiftPosition.bind(this)}connectedCallback(){if(!(!this.isConnected||this.attached)){if(super.connectedCallback(),this.uiManager=e.UI.getUIManager(this),this.isShadowComponent&&this.children.length)for(;this.children.length;)this.root.appendChild(this.firstChild);this.markup=this.trimInnerHTMLWhitespace(),this.usingMarkup=!!this.markup.match(/\{\{(.{1,20}?)\}\}/g),this.setMarkup(),this.setupShadow(),this.listenersAdded||(this.addEventListener("stxtap",n=>this.captureTap(n),!0),e.UI.stxtap(this,n=>this.tap(n)),this.listenersAdded=!0),window.addEventListener("resize",this.adjustLiftPosition)}}adoptedCallback(){super.adoptedCallback(),e.UI.flattenInheritance(this,t),this.constructor=t}handlePropertyChange(n,r,i){if(r===i)return;this[n]=i;const a=this.lifts;a&&this.unlift(),n==="state"?this.processStateChange():this.usingMarkup&&this.setMarkup(),a&&this.lift()}disconnectedCallback(){this.doNotDisconnect||(window.removeEventListener("resize",this.adjustLiftPosition),super.disconnectedCallback())}captureTap(n){const r=()=>{const a=this.getBoundingClientRect();return n.pageX>=a.left&&n.pageX<=a.right&&n.pageY>=a.top&&n.pageY<=a.bottom},i=n.composedPath();this.noClose=this===i[0]&&!r()||i.some(a=>{const o=a.getAttribute&&a.getAttribute("cq-no-close");return o!=null&&o!=="false"||a.params&&a.params.menuPersist}),this.noClose||(this.noClose=n.composedPath().some(a=>a.matches&&a.matches("cq-separator,cq-heading")))}close(){this.uiManager.closeMenu(this)}hide(){if(!this.active)return;this.unlift(),this.classList.remove(this.activeClassName),this.setAriaPressed();const n=this.root.querySelector("[aria-expanded]");n&&(n.ariaExpanded=!1),this.active=!1,this.state="closed",this.qsa("input",this,!0).forEach(a=>{a===e.getActiveElement()&&a.blur()}),this.root.querySelectorAll("cq-lookup").forEach(a=>{a.classList.remove("active")});const r=this.root.querySelector("cq-dropdown, cq-menu-dropdown");if(r&&r.disablekeyboardNavigation(),this.ownerDocument.body.keystrokeHub){let{tabActiveModals:a}=this.ownerDocument.body.keystrokeHub;a[0]&&this.ownerDocument.body.keystrokeHub.setKeyControlElement(a[0])}const i=this.root.querySelector("cq-lookup");i&&i.close()}lift(){const n=()=>[...this.querySelectorAll("*[cq-lift]")].filter(a=>e.climbUpDomTree(a,"cq-menu,cq-dialog",!0)[0]==this),r=e.UI.getMyContext(this);(this.lifts=n()).forEach(a=>{if(r&&r.config&&r.config.themes){let c=Object.keys(r.config.themes.builtInThemes);a.classList.remove(...c);let l=c.find(u=>r.topNode.classList.contains(u)===!0);l&&a.classList.add(l)}const o=a.closest("cq-scroll");o&&(a.boundResize=a.resize.bind(a),o.addEventListener("scroll",this.adjustLiftPosition),o.addEventListener("scroll",a.boundResize)),this.uiManager.lift(a),a.remember.scrollParent=o,setTimeout(()=>{const c=a.contentRoot||a;c.tabIndex=-1,c.focus()},10),this.adjustLiftPosition()})}adjustLiftPosition(){this.lifts&&this.lifts.forEach(n=>{const{parentNode:r}=n.remember,i=r.getBoundingClientRect(),a=1;n.style.top=i.bottom-a+"px",n.style.left=i.left+"px"})}onKeyboardDeselection(){this.close()}open(n){this.uiManager.openMenu(this,n)}processStateChange(){switch(this.state){case"open":this.active||this.open();break;case"closed":this.active&&this.close();break;default:return}this.emitCustomEvent({action:this.clicked?"click":null,effect:this.state})}setContent(n,r){this.content=n,this.liftAttribute=r,this.attached&&this.setMarkup()}setAriaPressed(n){const r=this.root.querySelector("[aria-pressed]");r&&(r.ariaPressed=!!n)}setMarkup(){const{children:n}=this.root;if(!n.length||this.usingMarkup){this.usingMarkup=!0,n.length&&[...n].forEach(o=>{["LINK","STYLE"].includes(o.tagName)||o.remove()});let r=this.markup||this.constructor.markup;const i=r.match(/\{\{(.{1,20}?)\}\}/g);if(i&&i.forEach(o=>{const c=o.substring(2,o.length-2);if(c.includes("_class"))return;const l=this[c];l==null?c==="reader"&&this.text?r=r.replace(o,this.text):c==="icon"?r=r.replace(o,"hidden"):c==="help-id"?r=r.replace(/\{\{help_class\}\}/g,"hidden"):c==="text"?r=r.replace("{{label_class}}","hidden"):c==="tooltip"?r=r.replace("{{tooltip_class}}","hidden"):r=r.replace(o,""):(c==="help-id"?r=r.replace(/\{\{help_class\}\}/g,""):c==="text"?r=r.replace("{{label_class}}",""):c==="tooltip"?r=r.replace("{{tooltip_class}}",""):c==="responsive"?r=r.replace("{{responsive}}","responsive"):c==="lift-dropdown"&&(r=r.replace("{{lift-dropdown}}","cq-lift")),r=r.replace(o,l))}),this.addDefaultMarkup(null,r),this.content&&!this.config){const o=this.root.querySelector("cq-dropdown");o&&(o.content=this.content,o.noscroll=this.noscroll,o.populate(),this.liftAttribute&&o.setAttribute("cq-lift",""))}const a=this.qsa(".menu-clickable .icon",this,!0)[0];a&&this.binding&&this.hasAttribute("icon")?(a.setAttribute("ciq-menu-icon",""),this.classList.add("ciq-menu-icon")):this.classList.remove("ciq-menu-icon")}}show(){if(this.active)return;this.active=!0,this.classList.add(this.activeClassName),this.state="open",this.setAriaPressed(!0);const n=this.root.querySelector("[aria-expanded]");if(n&&(n.ariaExpanded=!0),this.lift(),this.root.querySelectorAll("cq-lookup").forEach(r=>{r.classList.add("active")}),this.root.querySelectorAll("cq-dropdown").forEach(r=>r.resize()),this.ownerDocument.body.keystrokeHub){const r=this.root.querySelector("cq-dropdown");r&&this.ownerDocument.body.keystrokeHub.setKeyControlElement(r,!0)}}tap(n){n.stopPropagation();const r=this.document||document;if(n.ciqStamp&&n.ciqStamp<=r.lastTap)return;this.clicked=!0;const{uiManager:i}=this;if(this.active)this.noClose||i.closeMenu(this);else{if(n.composedPath().includes(this.root.querySelector("cq-dropdown")))return;let o=!1;if(n.composedPath().filter(c=>c.matches&&c.matches("cq-menu")).forEach(c=>{c.active&&(o=!0)}),!o){const c=e.climbUpDomTree(n.target,"cq-dialog",!0)[0];i.closeMenu(null,"cq-menu,cq-color-picker"+(c?"":",cq-dialog"))}if(this.open({e:n}),this.focusElement&&!e.isMobile){const c=this.qsa(this.focusElement,this,!0)[0];c&&c.focus();const l=this.qsa("cq-dropdown",this,!0)[0];l&&l.setFocus(this.focusElement)}}delete this.clicked}unlift(){const n=i=>{if(!i)return;const{remember:a}=i,o=a.scrollParent;o&&(o.removeEventListener("scroll",this.adjustLiftPosition),o.removeEventListener("scroll",i.boundResize)),i.doNotDisconnect=!0,i.remove(),delete i.doNotDisconnect,Object.assign(i.style,a.css),a.parentNode.appendChild(i)},{lifts:r}=this;r&&(r.forEach(i=>n(i)),this.lifts=null)}}t.markup=`
		<div class="menu-clickable {{responsive}}" aria-hidden="true">
			<cq-help class="{{help_class}}" help-id="{{help-id}}" aria-hidden="true"></cq-help>
			<span class="icon {{icon}}">
				<div cq-tooltip class="{{tooltip_class}}" aria-hidden="true">{{tooltip}}</div>
			</span>
			<span class="{{label_class}}" label stxbind="{{binding}}">{{text}}</span>
		</div>
		<div class="ciq-screen-reader">
			<button type="button" aria-haspopup="menu" aria-expanded="false" tabindex="-1">{{reader}}</button>
			<em class="help-instr {{help_class}}">(Help available, press question mark key)</em>
		</div>
		<cq-dropdown config="{{config}}" {{lift-dropdown}}></cq-dropdown>
	`,e.UI.addComponentDefinition("cq-menu",t)},zf=E=>{const e=typeof _CIQ<"u"?_CIQ:E.CIQ;class t extends e.UI.ContextTag{static get observedAttributes(){return["default-display-time","default-transition","default-position"]}constructor(){super()}connectedCallback(){super.connectedCallback(),this.messageQueue=[],this.displayTimer=null}adoptedCallback(){super.adoptedCallback(),e.UI.flattenInheritance(this,t)}setContext(n){n.stx.addEventListener("notification",r=>{this.newMessage(r)}),this.addInjection("append","resizeChart",()=>this.handleResize())}handleResize(){for(let n=0;n<this.messageQueue.length;n++)this.messageQueue[n].isDisplayed&&this.positionElement(this.messageQueue[n])}positionElement(n){const r=this.context.stx.chart.canvas.getBoundingClientRect(),i=this.context.topNode.getBoundingClientRect(),a=n.classList.contains("align-bottom");let o=r.top-i.top,c=r.left-i.left;Object.assign(n.style,{top:a?o+r.height+"px":o+"px",left:c+r.width*.5+"px"})}createMessageElement(n){if(!n.message)return;let{message:r,position:i,type:a,transition:o,displayTime:c,priority:l,callback:u}=n,h=+this.getAttribute("default-display-time");isNaN(h)&&(h=10);const d=this.getAttribute("default-position")||"top",f=this.getAttribute("default-transition")||"";c!==0&&(c=c||h),i=i||d,o=o||f,l=l||0,a=a||"info",r.length>160&&(r=r.slice(0,160)+"...");let A=document.createElement("div");A.innerHTML=`
			<div class="cq-message-container">
				<div class="cq-message-icon"></div>
				<div class="cq-message-text"></div>
			</div>`;let p=A.querySelector(".cq-message-text");return e.makeTranslatableElement(p,this.context.stx,r),A.classList.add("cq-toast-message"),A.classList.add("type-"+a),A.setAttribute("aria-label","Toast Message"),A.setAttribute("role","alert"),o&&A.classList.add("animate","transition-"+o),i=="bottom"&&A.classList.add("align-bottom"),A.displayTime=c,A.priority=l,A.message=r,A.type=a,e.safeClickTouch(A,(function(g,m,b){b.stopPropagation(),m&&m(),this.removeMessageNode(g,"click")}).bind(this,A,u)),this.positionElement(A),A}displayNextMessage(){if(!this.messageQueue.length)return;if(!this.context.topNode.querySelector(".cq-toast-message")){let r=this.messageQueue[0];this.context.topNode.appendChild(r),r.isDisplayed=!0,this.emitCustomEvent({emitter:this,action:null,cause:"alert",effect:"display",detail:(({displayTime:i,priority:a,message:o,type:c})=>({displayTime:i,priority:a,message:o,type:c}))(r)}),r.displayTime!==0&&(this.displayTimer=window.setTimeout(this.removeMessageNode.bind(this,r,"timeout"),r.displayTime*1e3))}}removeMessageNode(n,r){if(n.classList.contains("hide"))return;n.classList.add("hide");let i=n.classList.contains("animate")?500:0;window.setTimeout(()=>{n.remove(),this.emitCustomEvent({emitter:this,action:r==="click"?"click":null,cause:r==="click"?"useraction":r||"alert",effect:"remove",detail:(({displayTime:a,priority:o,message:c,type:l})=>({displayTime:a,priority:o,message:c,type:l}))(n)}),this.messageQueue.splice(this.messageQueue.indexOf(n),1),this.displayTimer&&(this.displayTimer=window.clearTimeout(this.displayTimer)),this.displayNextMessage()},i)}recallMessageNode(n){n.isDisplayed&&(this.displayTimer&&(this.displayTimer=window.clearTimeout(this.displayTimer)),n.isDisplayed=!1,this.context.topNode.removeChild(n),this.emitCustomEvent({emitter:this,action:null,cause:"alert",effect:"recall",detail:(({displayTime:r,priority:i,message:a,type:o})=>({displayTime:r,priority:i,message:a,type:o}))(n)}))}newMessage(n){if(typeof n=="string"&&this.context.config&&this.context.config.systemMessages&&(n=this.context.config.systemMessages[n]),!n||typeof n!="object")return;if(n.remove){for(const i of this.messageQueue)i.message===n.message&&this.dismissMessage(n.message);return}let r=this.createMessageElement(n);if(r){const i=this.messageQueue.findIndex(a=>a.priority<r.priority);i>=0?(this.messageQueue[i].isDisplayed&&this.recallMessageNode(this.messageQueue[i]),this.messageQueue.splice(i,0,r)):this.messageQueue.push(r),this.displayNextMessage()}}dismissMessage(n){for(const r of this.messageQueue)r.message===n&&this.removeMessageNode(r)}}e.UI.addComponentDefinition("cq-message-toaster",t)},Vf=E=>{const e=typeof _CIQ<"u"?_CIQ:E.CIQ;class t extends e.UI.ContextTag{static get observedAttributes(){return["docked","orientation"]}constructor(){super(),this.dragMargin=10}adoptedCallback(){super.adoptedCallback(),e.UI.flattenInheritance(this,t)}init(){this.isDragging=!1,this.minHeight=parseInt(this.getAttribute("min-height"),10),isNaN(this.minHeight)&&(this.minHeight=25),this.paletteDock=this.parentElement.parentElement,this.dragStrip=this.querySelector(".drag-strip"),this.resizeStrip=this.querySelector(".resize-strip"),this.dragStrip&&(this.dragStrip.addEventListener("mousedown",this.handleDragResize.bind(this,"dragging")),this.dragStrip.addEventListener("touchstart",this.handleDragResize.bind(this,"dragging"),{passive:!1})),this.resizeStrip&&(this.resizeStrip.addEventListener("mousedown",this.handleDragResize.bind(this,"resizing")),this.resizeStrip.addEventListener("touchstart",this.handleDragResize.bind(this,"resizing"),{passive:!1})),this.paletteDock.paletteSubscribe&&(this.sendMessage=this.paletteDock.paletteSubscribe(this.handleMessage.bind(this)))}handlePropertyChange(n,r,i){if(r!==i){if(this.internallySet){this.internallySet=!1;return}switch(this[n]=i,n){case"docked":i==="false"?this.detach(100,70,.8):this.dock();break}}}handleDragResize(n,r){this.paletteDock.hasOwnProperty("dragging")&&this.paletteDock.startDrag(this,n)}handleMessage(n,r){}detach(n,r,i){if(this.ownerDocument.body.classList.contains("break-sm")||!this.paletteDock)return;typeof n!="number"&&(n=null),this.internallySet=!0,this.docked="false",n=n||10,r=r||10;let o={top:0,left:0,width:0,height:0};this.paletteDock.getBounds&&(o=this.paletteDock.getChartBoundsOffset()),n>o.left+o.width-this.clientWidth&&(n=o.left+o.width-this.clientWidth),this.setTransformPosition(n,r),this.paletteDock.setChartDimensions(),this.context.stx.resizeChart(),i?this.setHeightByScale(i):this.paletteDock.setVerticalPaletteHeight(),this.emitCustomEvent({effect:"detach"})}dock(){this.docked="true",this.transform="",this.style.left="",this.style.top="",this.paletteDock&&this.paletteDock.setChartDimensions(),this.emitCustomEvent({effect:"dock"})}getHeight(){return this.clientHeight}getWidth(){return this.clientWidth}checkPosition(){let n={top:0,left:0,width:0,height:0};this.paletteDock.getChartBounds&&(n=this.paletteDock.getChartBounds()),this.paletteDock.getBounds&&this.paletteDock.getBounds();const r=(this.transform||[0,0]).slice(0);r[0]=Math.min(r[0]+this.dragStrip.clientWidth*.5,n.width-this.clientWidth),r[1]=Math.min(r[1]+this.dragStrip.clientHeight*.5,n.height-this.clientHeight),this.setTransform(r[0],r[1])}setTransformPosition(n,r){let i={top:0,left:0,width:0,height:0};this.paletteDock.getBounds&&(i=this.paletteDock.getChartBoundsOffset());let a={top:0,left:0,width:0,height:0};this.paletteDock.getBounds&&(a=this.paletteDock.getBounds());let o=Math.floor(r-this.dragStrip.clientHeight*.5),c=Math.floor(n-this.dragStrip.clientWidth*.5);o=Math.min(Math.max(o,i.top+this.dragMargin),i.top+i.height-(this.dragStrip.clientHeight+this.dragMargin))-a.top,c=Math.min(Math.max(c,i.left+this.dragMargin),i.left+i.width-this.clientWidth-(this.dragStrip.clientWidth+this.dragMargin))-a.left,this.setTransform(c,o)}setTransform(n,r){this.transform=[n,r],this.style.left=n+"px",this.style.top=r+"px",this.emitCustomEvent({action:this.paletteDock.dragging?"drag":null,effect:"reposition",detail:{x:n,y:r}})}setHeightToPosition(n){let r={top:0,left:0,width:0,height:0};this.paletteDock.getBounds&&(r=this.paletteDock.getBounds());let i=this.getBoundingClientRect(),a=n-i.top;this.orientation==="vertical"&&a>this.minHeight&&a+(i.top-r.top)<r.height&&this.setHeight(a)}setHeightByScale(n){this.style.height=Math.floor(parseInt(this.style.height,10)*n)+"px"}setHeight(n){this.style.height=n+"px"}}e.UI.addComponentDefinition("cq-palette",t)},Kf=E=>{const e=typeof _CIQ<"u"?_CIQ:E.CIQ;class t extends e.UI.ContextTag{constructor(){super(),this.dragging=!1,this.paletteRegistry=[],this.mouseOutCk=!1}adoptedCallback(){super.adoptedCallback(),e.UI.flattenInheritance(this,t)}initListeners(){const{stx:n,config:r={}}=this.context,i=this;this.setVerticalPaletteHeight(),this.addEventListener("touchend",d=>this.stopDrag(d)),this.addEventListener("touchmove",u,{passive:!1}),this.addEventListener("mouseup",d=>this.stopDrag(d)),this.addEventListener("mouseleave",o),this.addEventListener("mouseenter",c),this.addEventListener("mousemove",l),this.addEventListener("mousedown",this.stopContext.bind(this)),this.addInjection("append","resizeChart",()=>this.handleResize({resizeChart:!1}));const a=(r.channels||{}).drawing||"channel.drawing";this.channelSubscribe(a,h);function o(d){n.showCrosshairs(),i.mouseOutCk=setTimeout(()=>i.stopDrag(),500)}function c(d){if(n.undisplayCrosshairs(),!!i.dragging){if(d.buttons===1){clearTimeout(i.mouseOutCk);return}i.stopDrag()}}function l(d){i.dragging&&(d.stopPropagation(),i.dragging.classList.contains("dragging")&&i.dragging.setTransformPosition(d.clientX,d.clientY),i.dragging.classList.contains("resizing")&&i.dragging.setHeightToPosition(d.clientY))}function u(d){i.dragging&&d.touches[0]&&(d.stopPropagation(),i.dragging.classList.contains("dragging")&&i.dragging.setTransformPosition(d.touches[0].clientX,d.touches[0].clientY),i.dragging.classList.contains("resizing")&&i.dragging.setHeightToPosition(d.touches[0].clientY))}function h(d){i.setChartDimensions(),n.resizeChart()}}setContext(n){this.initListeners()}palettePublish(n,r){this.paletteRegistry.forEach(i=>i(n,r))}paletteSubscribe(n){return this.paletteRegistry.push(n),this.palettePublish.bind(this)}getBounds(){return this.parentNode.getBoundingClientRect()}getChartBounds(){let n=this.parentNode.getBoundingClientRect(),r={top:0,left:0,height:n.height,width:n.width};return[...this.querySelectorAll('[docked="true"]')].forEach(a=>{a.orientation==="vertical"?(r.width-=a.getWidth(),r.left+=a.getWidth()):a.orientation==="horizontal"&&(r.height-=a.getHeight(),r.top+=a.getHeight())}),r}getChartBoundsOffset(){let n=this.parentNode.getBoundingClientRect(),r=this.getChartBounds();return r.top+=n.top,r.left+=n.left,r}startContext(){this.classList.add("context")}stopContext(){this.classList.remove("context"),this.palettePublish("context","stop")}startDrag(n,r){[...this.querySelectorAll('[docked="false"]')].forEach(a=>a.style.zIndex=1),r=r||"dragging",this.dragging=n,this.classList.add("dragging"),this.dragging.classList.add(r),this.dragging.style.zIndex=10}stopDrag(n){n&&n.preventDefault(),this.classList.remove("dragging"),this.dragging=!1,this.resizing=!1,[...this.querySelectorAll('[docked="false"]')].forEach(r=>r.classList.remove("dragging","resizing"))}startResize(n){this.resizing=n,this.classList.add("dragging"),this.dragging.classList.add("dragging")}handleResize({resizeChart:n=!0}={}){this.palettePublish("dockWillResize"),this.setChartDimensions(),this.setVerticalPaletteHeight();const r=this.ownerDocument.body.classList.contains("break-sm");[...this.querySelectorAll('[docked="false"]')].forEach(a=>{r?a.dock():a.checkPosition()}),this.palettePublish("dockDidResize"),n&&this.context.stx.resizeChart()}setVerticalPaletteHeight(){[...this.querySelectorAll("[orientation=vertical]")].forEach(n=>{n.getAttribute("docked")==="true"&&(n.style.height=this.parentNode.clientHeight+"px")})}setChartDimensions(){const n=this.context.stx.container,{top:r,left:i,width:a,height:o}=this.getChartBounds(),{config:c}=this.context,{isMultiChartHost:l}=this.context.topNode;let u=0;c&&c.channels?(this.channelWrite(c.channels.drawingPalettes||"channel.drawingPalettes",{top:r,left:i,width:a,height:o}),l&&(u=this.channelRead(c.channels.sidepanelSize||"channel.sidepanelSize")||0)):(n.style.width=a+"px",n.style.height=o+"px",n.style.top=r+"px",n.style.left=i+"px",l&&(u=+(this.context.topNode.querySelector("cq-side-panel")||{style:{width:""}}).style.width.replace("px",""))),[...this.querySelectorAll('[orientation="horizontal"][docked="true"]')].forEach(f=>{f.style.left=i+1+"px",f.style.width=a-u-3+"px"}),[...this.querySelectorAll('[orientation="vertical"]')].forEach(f=>{f.docked==="false"?f.style.top=r+"px":f.style.top=0})}dockAllPalettes(){[...this.querySelectorAll('[docked="false"]')].forEach(r=>r.dock())}}e.UI.addComponentDefinition("cq-palette-dock",t)},Wf=E=>{const e=typeof _CIQ<"u"?_CIQ:E.CIQ;class t extends e.UI.ContextTag{adoptedCallback(){super.adoptedCallback(),e.UI.flattenInheritance(this,t)}pairUp(n){this.undo=n,this.undo.redoButton=this,e.UI.stxtap(this,()=>this.undo.redo()),this.undo.setButtonStyle()}}e.UI.addComponentDefinition("cq-redo",t)},Yf=E=>{const e=typeof _CIQ<"u"?_CIQ:E.CIQ;class t extends e.UI.BaseComponent{connectedCallback(){!this.isConnected||this.attached||(super.connectedCallback(),this.hasAttribute("cq-no-claim")||this.addClaim(this),!this.hasAttribute("cq-no-scroll")&&(this.style.overflowY="auto",this.uiManager=e.UI.getUIManager(this),this.uiManager.length&&(this.uiManager=this.uiManager[0]),this.addEventListener(e.wheelEvent,n=>n.stopPropagation(),{passive:!1}),e.UI.addResizeListener(this,()=>this.resize()),this.resize(),this.maxHeight=this.getAttribute("cq-max-height"),this.addEventListener("scroll",()=>{this.uiManager.closeOpenColorPicker()})))}adoptedCallback(){super.adoptedCallback(),e.UI.flattenInheritance(this,t)}disconnectedCallback(){this.doNotDisconnect||(this.removeClaim(this),e.UI.removeResizeListener(this),e.UI.scrollbarStyling&&e.UI.scrollbarStyling.destroy(this),super.disconnectedCallback())}focused(){return this.querySelector("cq-item[cq-focused]")}keyStroke(n,r,i){if(!this.keyboardNavigation&&(this.keyboardNavigationWait||!this.matches(".stxMenuActive *")))return;if(!e.trulyVisible(this))return!1;const a=this.querySelectorAll("[keyboard-selectable='true'], cq-item:not(.item-hidden), li");if(!a.length)return!1;if(r==" "||r=="Spacebar"||r=="Enter"){const o=this.findFocused(a);if(!o||!o.length)return!1;const c=o[0].querySelectorAll("[keyboard-selectable-child='true'][cq-focused]");if(c.length){const l=o[0].closest("cq-study-legend");l&&l.storeFocused(o,c[0]),this.clickItem(c[0],i)}else this.clickItem(o[0],i)}else if(r=="ArrowDown"||r=="Down")this.focusNextItem(a);else if(r=="ArrowUp"||r=="Up")this.focusNextItem(a,!0);else if(r=="ArrowRight"||r=="Right"){const o=this.findFocused(a);if(!o||!o.length)return!1;const c=o[0].querySelectorAll("[keyboard-selectable-child='true']");c.length&&this.focusNextItem(c)}else if(r=="ArrowLeft"||r=="Left"){const o=this.findFocused(a)[0];if(!o)return!1;const c=o.querySelectorAll("[keyboard-selectable-child='true']");c.length&&!this.focusNextItem(c,!0)&&(this.removeFocused(c),this.focusItem(o))}return!0}focusItem(n){this.scrollToElement(n),super.focusItem(n)}onKeyboardDeselection(){this.keyboardNavigation&&this.keyboardNavigation!==null&&this.keyboardNavigation.highlightPosition()}resize(){const n=this.closest("cq-context");if(this.closest(".sharing")||this.hasAttribute("cq-no-resize"))return;this.hasAttribute("cq-no-maximize")&&(this.noMaximize=!0);const r=this.getBoundingClientRect();if(!r.height)return;const i=this.reduceMenuHeight||45;let a,o;if(n){const{multiChartContainer:d}=n,f=(d||n).getBoundingClientRect();a=f.height,o=f.top}else a=this.ownerDocument.defaultView.innerHeight,o=0;if(!a)return;let c=a-(r.top-o)-i;const l=e.climbUpDomTree(this,".stx-holder,.stx-subholder,.chartContainer",!0);l.length&&l.forEach(d=>{const f=d.getBoundingClientRect().top+e.elementDimensions(d).height;c=Math.min(c,f-r.top-5)});const u=[...this.parentNode.children],h=u.slice(u.indexOf(this)+1);for(let d=0;d<h.length;d++){const f=h[d];f&&!e.trulyVisible(f)||(c-=e.elementDimensions(f,{border:1,padding:1,margin:1}).height)}if(this.maxHeight&&this.maxHeight<c&&(c=this.maxHeight),this.noMaximize||(this.style.height=c+"px"),this.hasAttribute("cq-drop-up-menu")){const d=+this.style.bottom.replace("px",""),f=Math.min(r.top-o-i+d-4,25);this.style.bottom=f+"px"}this.style.maxHeight=c+"px",this.refresh()}scrollToElement(n){const r=this.clientHeight,i=this.scrollTop,a=n.offsetTop+n.clientHeight;n.offsetTop>i&&a<r+i||(this.scrollTop=Math.max(a-r,0),this.refresh())}top(){this.scrollTop=0,this.refresh()}scrollToTop(){this.top()}refresh(){e.UI.scrollbarStyling&&e.UI.scrollbarStyling.refresh(this)}}e.UI.addComponentDefinition("cq-scroll",t)},Xf=E=>{const e=typeof _CIQ<"u"?_CIQ:E.CIQ;class t extends e.UI.ContextTag{static get observedAttributes(){return["help-id","icon","reader","responsive","text","tooltip"]}constructor(){super(),e.UI.makeShadow(this)}connectedCallback(){if(!(!this.isConnected||this.attached)){if(super.connectedCallback(),this.isShadowComponent&&this.children.length)for(;this.children.length;)this.root.appendChild(this.firstChild);this.markup=this.trimInnerHTMLWhitespace(),this.usingMarkup=!!this.markup.match(/\{\{(.{1,20}?)\}\}/g),this.reset(),this.setupShadow()}}adoptedCallback(){super.adoptedCallback(),e.UI.flattenInheritance(this,t),this.constructor=t}handlePropertyChange(n,r,i){r!==i&&(this[n]=i,this.usingMarkup&&this.reset())}getMarkup(){let n=this.markup||this.constructor.markup;const r=n.match(/\{\{(.{1,20}?)\}\}/g);return r&&r.forEach(i=>{const a=i.substring(2,i.length-2);if(a.includes("_class"))return;const o=this[a];o==null?a==="reader"&&this.text?n=n.replace(i,this.text):a==="help-id"?n=n.replace(/\{\{help_class\}\}/g,"hidden"):a==="icon"?n=n.replace(i,"hidden"):a==="text"?n=n.replace("{{label_class}}","hidden"):a==="tooltip"?n=n.replace("{{tooltip_class}}","hidden"):n=n.replace(i,""):(a==="text"?n=n.replace("{{label_class}}",""):a==="tooltip"?n=n.replace("{{tooltip_class}}",""):a==="help-id"?n=n.replace(/\{\{help_class\}\}/g,""):a==="responsive"&&(n=n.replace("{{responsive}}","responsive")),n=n.replace(i,o))}),n}reset(){const{children:n}=this.root;if(!n.length||this.usingMarkup){this.usingMarkup=!0,n.length&&[...n].forEach(i=>{["LINK","STYLE"].includes(i.tagName)||i.remove()});const r=document.createElement("div");this.addDefaultMarkup(r,this.getMarkup())}}setContext(n){this.makeTap(this,r=>{r.stopPropagation(),this.tap()}),e.Share.onClipboard(r=>{e.Share.loadChartFromID(this.context.stx,r)}),this.reset()}tap(){this.uiManager.closeMenu(null,"cq-menu,cq-dialog,cq-color-picker");const{context:n}=this;if(n.config)this.channelWrite(n.config.channels.dialog,{type:"share",params:{context:n}},n.stx);else{const r=this.ownerDocument.querySelector("cq-share-dialog");r&&r.open&&r.open({context:n})}this.emitCustomEvent({effect:"click"})}async getClipboard(){const n=await e.Share.getClipboard();n?e.Share.loadChartFromID(this.context.stx,n):this.tap()}}t.markup=`
		<div class="share-clickable {{responsive}}">
			<cq-help class="{{help_class}}" help-id="{{help-id}}"aria-hidden="true"></cq-help>
			<span class="icon {{icon}}">
				<div cq-tooltip class="{{tooltip_class}}" aria-hidden="true">{{tooltip}}</div>
			</span>
			<span class="{{label_class}}" label>{{text}}</span>
		</div>
		<div class="ciq-screen-reader">
			<button type="button" tabindex="-1">{{reader}}</button>
			<em	class="help-instr {{help_class}}">(Help available, press question mark key)</em>
		</div>
	`,e.UI.addComponentDefinition("cq-share-button",t)},jf=E=>{const e=typeof _CIQ<"u"?_CIQ:E.CIQ;if(!e.Share)console.error("shareDialog component requires first activating share feature.");else{class t extends e.UI.DialogContentTag{adoptedCallback(){super.adoptedCallback(),e.UI.flattenInheritance(this,t),this.constructor=t}open(n){if(this.addDefaultMarkup(),this.closeTeamsDialog(),!n.context||!n.context.stx||!n.context.stx.chart||!n.context.stx.chart.canvas)return;super.open(n);const{chartSharing:r}=n.context.config;if(r&&r.getChartLayout?(this.querySelector("[cq-share-dialog-div]").classList.add("has-live-chart-sharing"),this.shareChartID("auto")):this.shareChartImage("auto"),this.ownerDocument.body.keystrokeHub){let{tabActiveModals:i}=this.ownerDocument.body.keystrokeHub;i[0]&&this.ownerDocument.body.keystrokeHub.setKeyControlElement(i[0])}}async createImage(){return new Promise(n=>{const{stx:r}=this.context,i=this.querySelector(".share-image-container .share-copyable-link");i&&(i.innerHTML="Loading...");const a=this.querySelector(".share-image-container .cq-share-copy");if(a&&a.setAttribute("disabled",""),e.UI.bypassBindings=!0,e.Share.createImage(r,{hide:[".ciq-nav",".ciq-footer","cq-dialog","cq-dialogs",".stx_chart_controls",".stx-btn-panel",".stx_jump_today",".stx-baseline-handle",".ciq-edit",".ciq-close","cq-marker-label"]},o=>{e.UI.bypassBindings=!1;const c=e.uniqueID(),l="https://share.chartiq.com",u=r.getStartDateOffset(),h={layout:r.exportLayout(),drawings:r.exportDrawings(),xOffset:u,startDate:r.chart.dataSegment[u].Date,endDate:r.chart.dataSegment[r.chart.dataSegment.length-1].Date,id:c,symbol:r.chart.symbol},d=l+"/upload/"+c,f={id:c,image:o,config:h};e.Share.uploadImage(o,d,f,(A,p)=>{if(A!==null)e.alert("error: "+A);else{const g=l+p;i&&(i.innerHTML=g),a&&a.removeAttribute("disabled"),n(g)}})}),this.ownerDocument.body.keystrokeHub){let{tabActiveModals:o}=this.ownerDocument.body.keystrokeHub;o[0]&&this.ownerDocument.body.keystrokeHub.setKeyControlElement(o[0])}})}copy_image({node:n}){n.disabled||this.copy("image")}copy_layout({node:n}){n.disabled||this.copy("layout")}copy(n){const r=this.querySelector(`.share-${n}-container .share-copyable-link`);if(!r)return;const i=r.innerText,a=document.createElement("input");if(a.type="text",a.value=i,a.contentEditable=!0,a.readOnly=!0,this.ownerDocument.body.appendChild(a),a.focus(),a.select(),!e.isIE){const l=document.createRange();l.selectNodeContents(a);const u=window.getSelection();u.removeAllRanges(),u.addRange(l),a.setSelectionRange(0,i.length)}this.ownerDocument.execCommand("copy"),this.ownerDocument.body.removeChild(a),r.parentElement.classList.add("share-copied");const o=this.querySelector(`.share-${n}-container .cq-share-copy`),c=o.innerHTML;n==="image"?o.innerHTML="URL Copied!":o.innerHTML="ID Copied!",this.emitCustomEvent({effect:"copy",detail:{value:i}}),setTimeout(()=>{o.innerHTML=c},3e3)}loadChart(n){e.Share.loadChart(this.context.stx,n.e.target.previousElementSibling.value)}activateTab(n){const r=this.querySelector(`.ciq-share-chart-tab[type="${n}"]`),i=this.querySelector(`.ciq-share-chart-tab-content[type="${n}"]`);return[...this.querySelectorAll(".ciq-share-chart-tab, .ciq-share-chart-tab-content")].forEach(a=>{a.classList.remove("ciq-active")}),r.classList.add("ciq-active"),i.classList.add("ciq-active"),{activeTab:r,activeContent:i}}async shareChartID(n){const{activeContent:r}=this.activateTab("id");e.Share.saveChartLayout(this.context.stx).then(i=>{const{chartSharing:a}=this.context.config;this.emitCustomEvent({action:n?null:void 0,cause:n,effect:"share",detail:{value:i}}),a.generateURL&&a.generateURL(i).then(o=>{const c=encodeURI(`${o}`),l=this.querySelector(".share-layout-container .share-copyable-link");l&&(l.innerHTML=o),r&&r.classList.add("share-layout-loaded");const u=this.querySelector(".share-layout-container .cq-share-copy");u&&u.removeAttribute("disabled"),this.updateSocialLinks("layout",c)})})}openTeamsDialog(){this.querySelector(".ciq-share-teams").classList.add("ciq-active"),this.closest("cq-dialog").setTitle("Share With Teams")}closeTeamsDialog(){this.querySelector(".ciq-share-teams").classList.remove("ciq-active"),this.closest("cq-dialog").setTitle("Share Your Chart")}updateTeamsLink(n){const r=n.target.parentElement.querySelector(".ciq-share-teams-link");r.href=`https://teams.microsoft.com/l/chat/0/0?users=${n.target.value}&topicName=View%20Chart&message=${r.getAttribute("ciq-encoded-message")}`}updateSocialLinks(n,r){const{chartSharing:i}=this.context.config;if(i&&i.quickLinks){const{quickLinks:a}=i;[...this.querySelectorAll(`.share-${n}-container .ciq-share-link`)].forEach(o=>{const c=o.getAttribute("cq-share-name");if(a[c]!==!1)switch(c){case"msteams":o.href=`https://teams.microsoft.com/l/chat/0/0?users=&topicName=View%20Chart&message=${r}`,o.addEventListener("click",l=>{l.preventDefault(),this.openTeamsDialog();const u=this.querySelector(".ciq-share-teams-link"),h=this.querySelector(".ciq-share-teams textarea");h.addEventListener("change",this.updateTeamsLink),h.addEventListener("keyup",this.updateTeamsLink),u.setAttribute("ciq-encoded-message",r),u.addEventListener("click",()=>{this.closeTeamsDialog()})});break;case"twitter":o.href=`http://twitter.com/share?text=${r}&hashtags=&url=`;break;case"symphony":o.href=`https://open.symphony.com/?startChat=&message=${r}`}})}}async shareChartImage(n){this.activateTab("image");const r=await this.createImage();this.updateSocialLinks("image",encodeURI(r)),this.emitCustomEvent({action:n?null:void 0,cause:n,effect:"link",detail:{value:r}}),setTimeout(()=>{this.tabIndex=-1,this.focus()},10)}}t.markup=`
		<div class="ciq-share-teams">
			<div>Enter Teams recipients separated by commas:</div>
			<textarea></textarea>
			<div class="ciq-share-teams-buttons">
				<a href="#" target="_blank" class="ciq-btn ciq-share-teams-link" stxtap="shareTeams()">Share</a>
			</div>
		</div>
		<div class="ciq-share-form">
			<div cq-share-dialog-div>
				<div class="ciq-share-chart-tabs">
					<div class="ciq-share-chart-tab" type="id" keyboard-selectable="true" stxtap="shareChartID()">
						<span class="ciq-radio"><span></span></span>
						<span>Live Chart</span>
					</div>
					<div class="ciq-share-chart-tab" type="image" keyboard-selectable="true" stxtap="shareChartImage()">
						<span class="ciq-radio"><span></span></span>
						<span>Chart Image</span>
					</div>
				</div>

				<cq-separator></cq-separator>

				<div class="ciq-share-chart-tab-content share-layout-container" type="id">
					<div class="share-copy-container">
						<div class="share-copyable-link">Loading...</div>
						<button class="ciq-btn cq-share-copy" stxtap="copy_layout()" disabled>Copy URL</button>
					</div>
					<div class="ciq-share-icons">
						<a href="#" target="_blank" class="ciq-btn ciq-share-link" cq-share-name="twitter">
							<span class="ciq-share-name">Share to Twitter</span>
						</a>
						<a href="#" target="_blank" class="ciq-btn ciq-share-link" cq-share-name="msteams">
							<span class="ciq-share-name">Share to Microsoft Teams</span>
						</a>
						<!--
						<a href="#" target="_blank" class="ciq-btn ciq-share-link" cq-share-name="symphony">
							<span class="ciq-share-name">Share to Symphony</span>
						</a>
						-->
					</div>

					<!--
					<cq-separator></cq-separator>

					<h4 class="title">Load Chart</h4>
					<div class="share-load-container">
						<input type="text" placeholder="Paste share ID" />
						<button class="ciq-btn" stxtap="loadChart()">Load Chart</button>
					</div>
					-->
				</div>
				<div class="ciq-share-chart-tab-content share-image-container" type="image">
					<div class="share-copy-container">
						<div class="share-copyable-link">Loading...</div>
						<button class="ciq-btn cq-share-copy" stxtap="copy_image()" disabled>Copy URL</button>
					</div>
					<div class="ciq-share-icons">
						<a href="#" target="_blank" class="ciq-btn ciq-share-link" cq-share-name="twitter">
							<span class="ciq-share-name">Share to Twitter</span>
						</a>
						<a href="#" target="_blank" class="ciq-btn ciq-share-link" cq-share-name="msteams">
							<span class="ciq-share-name">Share to Microsoft Teams</span>
						</a>
						<!--
						<a href="#" target="_blank" class="ciq-btn ciq-share-link" cq-share-name="symphony">
							<span class="ciq-share-name">Share to Symphony</span>
						</a>
						-->
					</div>
				</div>
			</div>
		</div>
	`,e.UI.addComponentDefinition("cq-share-dialog",t)}},$f=E=>{const e=typeof _CIQ<"u"?_CIQ:E.CIQ;class t extends e.UI.ContextTag{static get observedAttributes(){return["config"]}constructor(){super(),e.UI.makeShadow(this)}connectedCallback(){if(!(!this.isConnected||this.attached)){if(super.connectedCallback(),this.isShadowComponent&&this.children.length){const n=document.createElement("div");for(this.root.appendChild(n);this.children.length;)n.appendChild(this.firstChild)}else if(!this.children.length){const n=document.createElement("ul");this.root.appendChild(n)}this.contentRoot=this.root.querySelector(".content")||this.root.firstChild,this.contentRoot.classList.add("content"),this.contentRoot.setAttribute("role","menu"),this.setupShadow()}}adoptedCallback(){super.adoptedCallback(),e.UI.flattenInheritance(this,t),this.constructor=t}handlePropertyChange(n,r,i){if(r!==i&&this.attached&&n==="config"){const a=e.UI.BaseComponent.getHelper(this,"GroupConfig");if(!a||!a[i])return;Object.assign(this,a[i]),this.config=i,this.populate()}}setContext(n){this.handlePropertyChange("config",this.config,""),this.handlePropertyChange("config","",this.getAttribute("config"))}populate(){const n=this.content;if(n instanceof Array){for(;this.contentRoot.firstChild;)this.contentRoot.firstChild.remove();n.forEach(r=>{const i=document.createElement("div");i.innerHTML=this.constructor.itemTemplate(r);const a=i.children[0];this.contentRoot.appendChild(a),a.params=r,e.UI.BaseComponent.scheduleForBinding(a,this)})}}set(n,r,i,a,o,c){const{context:l}=this;l.loader&&l.loader.show();const u={multiplier:r,base:i,padding:40};a&&(u.periodicity={interval:a,period:o||1,timeUnit:c}),l.stx.setSpan(u,()=>{l.loader&&l.loader.hide(),delete u.padding,this.emitCustomEvent({effect:"select",detail:{params:u}})})}}t.itemTemplate=({type:s,className:n,feature:r,helpId:i,iconCls:a,label:o,tap:c,value:l,id:u})=>{const h=`${n?`${n} `:""}`,d=l&&l!==0?Array.isArray(l)?l.map(p=>typeof p=="string"?`'${p}'`:p).join():`'${l}'`:"",f={separator:"separator",heading:"presentation"}[s]||"menuitem",A=s==="item";return`
		<li class="${h}${s}-item item" role="${f}"
			${c?`stxtap="${c}(${d})"`:d&&!f.indexOf("menuitem")?`data='${JSON.stringify(l).replace(/'/g,"'")}'`:""}
			${r?`feature="${r}"`:""}
			${l&&c?`data-value="${l}"`:""}
			${A?"keyboard-selectable":""}
		>			${o?s==="heading"?`<h4><cq-heading class="inline" text="${o}"${u?` id="${u}"`:""}></cq-heading></h4>`:`
							${i?`<cq-help help-id="${i}" aria-hidden="true"></cq-help>`:""}							${a?`<span class="icon ${a}"></span>`:""}							<span label ${u?`id="${u}"`:""} >${o}</span>`:""}			${i?`<div class="ciq-screen-reader">
						<em class="help-instr">(Help available, press question mark key)</em>
					</div>`:""}		</li>`},e.UI.addComponentDefinition("cq-show-range",t)},Gf=E=>{const e=typeof _CIQ<"u"?_CIQ:E.CIQ;class t extends e.UI.ContextTag{adoptedCallback(){super.adoptedCallback(),e.UI.flattenInheritance(this,t)}setContext(n){const{config:{channels:r={}}={}}=n;if(this.init)return;this.init=!0;const i=this.querySelector("div"),a=this.qs(".sidenav-toggle","thisChart"),o=this.getAttribute("cq-on")||"sidenavOn",c=this.getAttribute("cq-off")||"sidenavOff",l=r.breakpoint||"channel.breakpoint",u=r.crosshair||"layout.crosshair",h=r.headsUp||"layout.headsUp",d=r.sidenav||"layout.sidenav",f=r.sidenavSize||"channel.sidenavSize",A=r.tfc||"channel.tfc";this.insertAdjacentHTML("afterend","<span sidenav-placeholder aria-hidden=false></span>");let p,g;const m=()=>{const b=this.channelRead(l),C=this.channelRead(h),F=this.channelRead(u),w=this.channelRead(d);typeof b=="string"&&!b.includes("height")&&(g=b==="break-sm");const U=g&&w===o;if(i){if(i.classList.remove("sidenav","ciq-toggles"),i.classList.add(g?"sidenav":"ciq-toggles"),i.classList[U?"add":"remove"]("active"),this.channelWrite(f,U?i.getBoundingClientRect().width:0),a&&(a.querySelectorAll("cq-menu").forEach(B=>B.setAttribute("aria-hidden",g)),p!==g))if(p=g,g)this.preventChildNodeDisconnect(),a.append(this),this.preventChildNodeDisconnect(!1);else{const B=this.qs("[sidenav-placeholder]","thisChart");B&&(this.preventChildNodeDisconnect(),B.before(this),this.preventChildNodeDisconnect(!1))}if(this.setAttribute("aria-hidden",g&&!U),g){const B=e.clone(C);B.static=!0,F&&(this.channelWrite(h,B),this.channelWrite(u,!1),this.channelWrite(u,!0))}}};this.channelSubscribe(d,m),this.channelSubscribe(l,m),this.channelSubscribe(A,b=>{b&&this.channelWrite(d,c)})}preventChildNodeDisconnect(n=!0){this.querySelectorAll("cq-toggle").forEach(r=>{n?r.doNotDisconnect=n:delete r.doNotDisconnect})}}e.UI.addComponentDefinition("cq-side-nav",t)},Jf=E=>{const e=typeof _CIQ<"u"?_CIQ:E.CIQ;class t extends e.UI.ContextTag{constructor(){super(),this.callbacks=[]}adoptedCallback(){super.adoptedCallback(),e.UI.flattenInheritance(this,t)}setContext(n){const{config:r,stx:i}=n;if(!r)return;const{channels:a={}}=r,o=this.resizeMyself.bind(this),c=()=>{setTimeout(o)},l=u=>{u?this.setAttribute("cq-active",!0):this.removeAttribute("cq-active"),this.emitCustomEvent({action:null,cause:"channel",effect:u?"open":"close"}),c()};if(!this.mo){const u=h=>this.mo.observe(h,{attributes:!0});this.mo=new MutationObserver(h=>{[...h[0].addedNodes].forEach(u),h[0].attributeName&&l(this.nonAnimatedWidth()>0)}),this.mo.observe(this,{childList:!0}),[...this.children].forEach(u)}this.channelSubscribe(a.breakpoint||"channel.breakpoint",c)}cleanup(){[...this.children].forEach(n=>{n.sidePanelActiveClass?n.classList.remove(n.sidePanelActiveClass):n.removeAttribute(n.sidePanelActiveAttribute)})}close(){this.removeAttribute("cq-active"),this.cleanup(),this.emitCustomEvent({effect:"close",action:null}),setTimeout(()=>this.resizeMyself(),0)}nonAnimatedWidth(){return[...this.children].reduce((n,r)=>n+=r.getBoundingClientRect().width,0)}open(n){this.cleanup();const r=this.querySelectorAll(n.selector);n.className?[...r].forEach(i=>{i.classList.add(n.className),i.sidePanelActiveClass=n.className}):[...r].forEach(i=>{i.setAttribute(n.attribute,"true"),i.sidePanelActiveAttribute=n.attribute}),this.setAttribute("cq-active","true"),this.emitCustomEvent({effect:"open",action:null}),setTimeout(()=>this.resizeMyself(),0)}registerCallback(n){this.callbacks.push(n)}resizeMyself(){const n=this.nonAnimatedWidth();this.style.width=n+"px",this.callbacks.forEach(o=>o.call(this,n));const{config:r,stx:i}=this.context||{};if(!r)return;const a=(r.channels||{}).sidepanelSize||"channel.sidepanelSize";this.channelWrite(a,n,i)}}e.UI.addComponentDefinition("cq-side-panel",t)},Zf=E=>{const e=typeof _CIQ<"u"?_CIQ:E.CIQ;class t extends e.UI.ContextTag{static get observedAttributes(){return["favorites"]}constructor(){super(),e.UI.makeShadow(this)}connectedCallback(){!this.isConnected||this.attached||(super.connectedCallback(),this.setupShadow())}adoptedCallback(){super.adoptedCallback(),e.UI.flattenInheritance(this,t),this.constructor=t}disconnectedCallback(){this.doNotDisconnect||(this.context&&(e.UI.unobserveProperty("studyLibraryHash",this.context.stx.chart,this.listener),this.context.stx.removeEventListener("preferences",this.listener)),super.disconnectedCallback())}handlePropertyChange(n,r,i){r!==i&&(this[n]=i,this.updateOrder())}initialize(n){this.params=n||{},this.alwaysDisplayDialog=this.params.alwaysDisplayDialog||!1,this.excludedStudies=this.params.excludedStudies||[],this.renderMenu(this.context.stx)}setContext(n){const{config:r,stx:i}=n;this.addDefaultMarkup(),r&&this.initialize(Object.assign({},r.menuStudiesConfig));const a=()=>this.renderMenu(i);e.UI.observeProperty("studyLibraryHash",this.context.chart,a),i.addEventListener("preferences",a)}renderMenu(n){if(!e.Studies)return;let r=[],i;for(let f in e.Studies.studyLibrary)i=e.Studies.studyLibrary[f],!(!i||this.excludedStudies[f]||this.excludedStudies[i.name]||i.siqList!==void 0)&&(i.name||(i.name=f),r.push([f,n.translateIf(i.name)]));r.sort(function(f,A){return f[1].localeCompare(A[1],n.locale||"en",{sensitivity:"base",caseFirst:"upper"})});const a=f=>A=>{const p=this.document||document;if(A.ciqStamp&&A.ciqStamp<=p.lastTap){A.stopPropagation();return}if(A.target.classList.contains("ciq-info-btn")){this.showStudyInfo&&this.showStudyInfo(f),A.stopPropagation();return}h(A,f),this.dispatchEvent(new Event("resize",{composed:!0}))},{root:o}=this;let c;for(;c=o.querySelector(".item, cq-item");)c.remove();const l=e.Studies.Favorites&&this.hasAttribute("favorites");r.forEach(f=>{const A=e.UI.makeFromTemplate(o.querySelector("template"))[0];i=e.Studies.studyLibrary[f[0]];const p=A.querySelector("span");p.id=p.id+i.name.replace(/ /g,""),e.makeTranslatableElement(p||A,n,i.name),A.type=f[0];const g=A.querySelector(".fav-marker");g&&(l?(this.makeTap(g,d.call(this,i,n)),A.setAttribute("aria-labelledby",p.id)):g.remove()),this.makeTap(A,a(f[0]));const m=A.querySelector(".ciq-info-btn");m&&(!e.Studies.Info||!e.Studies.Info[i.name])&&(m.style.display="none"),o.appendChild(A)}),l&&this.updateOrder();const u=(f,A)=>{const{context:p}=this;if(p.config)this.channelWrite(p.config.channels.dialog,{type:"study",params:Object.assign({},f,{context:p,addWhenDone:A})},p.stx);else{f.context=this.context;const g=this.ownerDocument.querySelector("cq-study-dialog");g.addWhenDone=A,g.open(f)}},h=(f,A)=>{const{alwaysDisplayDialog:p={},context:{stx:g}}=this;function m(F,w,U){if(F===!0)return u(w,U),!0;if(typeof F=="object"){for(let B in F)if(B==A&&F[B])return u(w,U),!0}}if(this.emitCustomEvent({effect:"select",detail:{value:A}}),m(this.params.dialogBeforeAddingStudy,{stx:g,name:A},!0))return;const b=p[A]?{interactiveAdd:!1}:null,C=e.Studies.addStudy(g,A,null,null,b);!f.target.classList.contains("ciq-favorite")&&!f.target.parentElement.classList.contains("ciq-favorite")&&this.uiManager.closeMenu(),!C.parameters.interactiveAdd&&!m(p,{sd:C,stx:g})&&f.stopPropagation()};function d(f,A){return p=>{p.stopPropagation();const g=p.target.parentElement,m=g.classList.contains("ciq-favorite");g.classList.add(m?"ciq-move-down":"ciq-move-up"),this.emitCustomEvent({effect:"toggle",detail:{favorite:m,value:f.name}}),setTimeout(()=>{g.classList[m?"remove":"add"]("ciq-favorite"),e.Studies.Favorites&&e.Studies.Favorites[m?"remove":"add"](f.name),this.updateOrder()},200)}}}updateOrder(){if(!this.context)return;const{stx:n}=this.context;e.Studies.Favorites&&e.Studies.Favorites.retrieveList(n,r=>{const i=this.hasAttribute("favorites"),a=Array.from(this.root.querySelectorAll(".item, cq-item")),o=r.filter(({isCustomized:l})=>!l).reduce((l,{type:u})=>({...l,[u]:!0}),{}),c=({textContent:l,type:u},{textContent:h,type:d})=>{if(i){if(o[u]&&!o[d])return-1;if(!o[u]&&o[d])return 1}return l.localeCompare(h,n.locale||"en",{sensitivity:"base",caseFirst:"upper"})};a.sort(c).forEach(l=>{l.classList[o[l.type]?"add":"remove"]("ciq-favorite"),l.classList.remove("ciq-move-up"),l.classList.remove("ciq-move-down"),this.root.append(l)})})}}t.markup=`
		<template>
			<li class="item" role="group" tabindex="0" keyboard-selectable>
				<div class="fav-marker" role="menuitemcheckbox" keyboard-selectable-child>
					<div class="ciq-screen-reader">Toggle favorite</div>
				</div>
				<span id="study_" role=menuitem label></span>
			</li>
		</template>
	`,e.UI.addComponentDefinition("cq-studies",t)},ep=E=>{const e=typeof _CIQ<"u"?_CIQ:E.CIQ;class t extends e.UI.DialogContentTag{adoptedCallback(){super.adoptedCallback(),e.UI.flattenInheritance(this,t),this.constructor=t}setContext(n){let{markup:r}=this.constructor;!!n.topNode.querySelector(".ciq-sb-container")||(r=r.split(/\n/g).filter(a=>!/StudyEdit\.addToFavorites/i.test(a)).join(`
`)),this.addDefaultMarkup(this,r),this.classList.add("ciq-context-menu"),super.setContext(n)}postProcess(n,r){this.emitCustomEvent({effect:n,detail:{item:r}})}}t.markup=`
		<div stxtap="StudyEdit.edit()">Edit Settings...</div>
		<div stxtap="StudyEdit.addToFavorites()">Add to Favorites</div>
		<div stxtap="StudyEdit.remove()">Delete Study</div>
	`,e.UI.addComponentDefinition("cq-study-context",t)},tp=E=>{const e=typeof _CIQ<"u"?_CIQ:E.CIQ;if(!e.Studies)console.error("studyDialog component requires first activating studies feature.");else{class n extends e.UI.DialogContentTag{connectedCallback(){!this.isConnected||this.attached||(super.connectedCallback(),this.queuedUpdates={})}adoptedCallback(){super.adoptedCallback(),e.UI.flattenInheritance(this,n),this.constructor=n}disconnectedCallback(){this.doNotDisconnect||(e.UI.unobserveProperty("signal",this.helper),super.disconnectedCallback())}close(){if(this.addWhenDone){const i=this.helper,a=e.Studies.addStudy(i.stx,i.name);e.isEmpty(this.queuedUpdates)||(i.sd=a,i.updateStudy(this.queuedUpdates),this.queuedUpdates={}),delete this.addWhenDone}}closeActiveMenu(i){const a=this.ownerDocument.body.keystrokeHub,o=this.querySelector("*.stxMenuActive"),c=e.UI.getUIManager(this);!o||!a||!a.tabActiveElement||a.tabActiveElement.element!==i||(a.tabActiveElement=null,a.highlightHide(),c.closeMenu(o))}formatDateInput(i){return i=i.replace(/-/g,""),i.search(/^\d{8}$/)||(i=i.substring(0,4)+"-"+i.substring(4,6)+"-"+i.substring(6,8)),i}formatTimeInput(i){return i=i.replace(/:/g,""),i.search(/^\d{4,6}$/)||(i=i.substring(0,2)+":"+i.substring(2,4)+(i.length==4?"":":"+i.substring(4,6))),i}hide(){e.isEmpty(this.queuedUpdates)||(this.helper.updateStudy(this.queuedUpdates),this.queuedUpdates={}),[...this.querySelectorAll("cq-menu")].forEach(i=>{i.unlift&&i.unlift()}),[...this.querySelectorAll("cq-swatch")].forEach(i=>{i.colorPicker&&i.colorPicker.close()})}makeMenu(i,a,o,c){const l=document.createElement("cq-menu");l.className="ciq-select",l.setAttribute("id","cq-study-dialog-"+c+"-"+i.replace(/ /g,"_"));const u=[];for(const d in o){const f={};f.type="item",f.label=o[d],f.tap="StudyDialog.setSelectOption",f.value=[c,i,d],u.push(f)}const h=o[a]||this.helper.stx.translateIf(a);return l&&l.setContent&&l.setContent(u,!0),l.setAttribute("text",h),l.setAttribute("reader",h),l}open(i){this.addDefaultMarkup(),this.selectTemplates(),"axisSelect"in i||(i.axisSelect=this.getAttribute("cq-study-axis"),i.axisSelect===""&&(i.axisSelect=!0)),"panelSelect"in i||(i.panelSelect=this.getAttribute("cq-study-panel"),i.panelSelect===""&&(i.panelSelect=!0)),typeof i.addWhenDone<"u"&&(this.addWhenDone=i.addWhenDone),e.UI.unobserveProperty("signal",this.helper),this.helper=new e.Studies.DialogHelper(i),this.closest("cq-dialog").setTitle(this.helper.title),super.open(i),e.UI.observeProperty("signal",this.helper,o=>{this.refreshInputs(),this.refreshOutputs(),this.refreshParameters(i)}),this.refreshInputs(!0),this.refreshOutputs(!0),this.refreshParameters(i,!0)}refreshInputs(i){const a=this.querySelector("cq-study-inputs");i&&[...a.children].forEach(o=>o.remove());for(let o=0;o<this.helper.inputs.length;o++){const c=this.helper.inputs[o],l=document.createElement("div");e.UI.makeFromTemplate(this.inputTemplate,l);const u=l.querySelector("cq-study-input");this.menuTemplate=u.querySelector("template[cq-menu]");const h="cq-study-dialog-inputs-"+c.name.replace(/ /g,"_"),d=u.querySelector(".ciq-heading");if(d){d.innerText=c.heading;const m=u.querySelector("label");m&&m.setAttribute("for",h)}u.setAttribute("fieldname",c.name);let f=null,A;const p=this.helper.attributes[c.name];if(c.type=="number"){f=document.createElement("input"),f.setAttribute("type","number"),f.setAttribute("id",h),f.value=c.value,this.setChangeEvent(f,"inputs",c.name);for(A in p){let m=p[A];(e.isIE||e.isEdge)&&A=="step"&&Math.floor(m)!=m&&(m="any"),A!=="hidden"&&f.setAttribute(A,m)}}else if(c.name==="Comparison Symbol")f=this.ownerDocument.createElement("cq-symbol-input"),f.initialize({value:c.value}),this.setChangeEvent(f,"inputs",c.name);else if(c.type=="text"||c.type=="date"||c.type=="time"){f=document.createElement("input"),f.setAttribute("type",e.UI.supportedInputType(c.type)),f.setAttribute("id",h),c.type=="date"?f.value=this.formatDateInput(c.value):c.type=="time"?f.value=this.formatTimeInput(c.value):f.value=c.value,this.setChangeEvent(f,"inputs",c.name);for(A in p)A!=="hidden"&&f.setAttribute(A,p[A])}else if(c.type=="select")f=this.makeMenu(c.name,c.value,c.options,"inputs"),p&&p.readonly&&f.setAttribute("readonly",p.readonly);else if(c.type=="checkbox"){f=document.createElement("input"),f.setAttribute("type","checkbox"),f.setAttribute("id",h),c.value&&(f.checked=!0),this.setChangeEvent(f,"inputs",c.name);for(A in p)A!=="hidden"&&f.setAttribute(A,p[A])}p&&p.hidden&&[...l.children].forEach(m=>m.hidden=!0),f&&u.querySelector(".stx-data").append(f),u.originalOuterHTML=u.outerHTML;const g=a.querySelector("[fieldname='"+c.name+"']");g?g.originalOuterHTML!==u.originalOuterHTML&&g.replaceWith(u):a.append(...l.children)}}refreshOutputs(i){const a=this.querySelector("cq-study-outputs");i&&[...a.children].forEach(o=>o.remove());for(let o=0;o<this.helper.outputs.length;o++){const c=this.helper.outputs[o],l=document.createElement("div");e.UI.makeFromTemplate(this.outputTemplate,l);const u=l.querySelector("cq-study-output");u.initialize({studyDialog:this,output:c.name});const h="cq-study-dialog-outputs-"+c.name.replace(/ /g,"_"),d=u.querySelector(".ciq-heading");if(d){d.innerText=c.heading;const b=u.querySelector("label");b&&b.setAttribute("for",h)}u.setAttribute("fieldname",c.name),u.originalOuterHTML=u.outerHTML;const f=a.querySelector("[fieldname='"+c.name+"']");f?f.originalOuterHTML!==u.originalOuterHTML&&f.replaceWith(u):a.append(...l.children);const A=u.querySelector("cq-swatch");if(A){A.setAttribute("id",h);let b=c.color;typeof b=="object"&&(b=b.color),A.setColor(b,!1,c.isAuto)}const p=u.querySelector("cq-menu"),{pattern:g="solid",width:m=1}=c.color||{};p.icon=`ciq-${g}-${m}`}}refreshParameters(i,a){const o=this.querySelector("cq-study-parameters");a&&[...o.children].forEach(c=>c.remove());for(let c=0;c<this.helper.parameters.length;c++){const l=this.helper.parameters[c],u=document.createElement("div");e.UI.makeFromTemplate(this.parameterTemplate,u);const h=u.querySelector("cq-study-parameter");if(this.menuTemplate=h.querySelector("template[cq-menu]"),!this.menuTemplate&&l.options)continue;const d="cq-study-dialog-parameters-"+l.name.replace(/ /g,"_"),f=h.querySelector(".ciq-heading");if(f){f.innerText=l.heading;const F=h.querySelector("label");F&&F.setAttribute("for",d)}h.setAttribute("fieldname",l.name);const A=h.querySelector("cq-swatch");let p=document.createElement("input"),g,m=!1,b={};if(l.defaultValue.constructor==Boolean){p.setAttribute("type","checkbox"),p.setAttribute("id",d),l.value&&(p.checked=!0),this.setChangeEvent(p,"parameters",l.name+"Enabled"),A&&A.remove(),b=this.helper.attributes[l.name+"Enabled"];for(g in b)g!=="hidden"&&p.setAttribute(g,b[g])}else if(l.defaultValue.constructor==String){let F=l.name;p.setAttribute("id",d),l.defaultColor?(h.initialize({studyDialog:this,parameter:l.name+"Color",params:i}),m=!0,F=F+"Value"):A&&A.remove(),l.options?p=this.makeMenu(F,l.value,l.options,"parameters"):p.value=l.value,b=this.helper.attributes[F];for(g in b)g!=="hidden"&&p.setAttribute(g,b[g])}else if(l.defaultValue.constructor==Number){p.setAttribute("type","number"),p.setAttribute("id",d),p.value=l.value,this.setChangeEvent(p,"parameters",l.name+"Value"),h.initialize({studyDialog:this,parameter:l.name+"Color",params:i}),m=!0,b=this.helper.attributes[l.name+"Value"];for(g in b){let F=b[g];(e.isIE||e.isEdge)&&g=="step"&&Math.floor(F)!=F&&(F="any"),g!=="hidden"&&p.setAttribute(g,F)}}else continue;b&&b.hidden&&[...u.children].forEach(F=>F.hidden=!0),p&&h.querySelector(".stx-data").append(p),h.originalOuterHTML=h.outerHTML;const C=o.querySelector("[fieldname='"+l.name+"']");C?C.originalOuterHTML!==h.originalOuterHTML&&C.replaceWith(h):o.append(...u.children),m&&A.setColor(l.color,!1,l.isAuto)}}setChangeEvent(i,a,o){const c=l=>{const{target:u}=l,h={[a]:{[o]:["checkbox","radio"].includes(u.type)?u.checked:u.value}};this.updateStudy(h,!0)};i.addEventListener("change",c.bind(this))}setContext(i){this.context=i,i.advertiseAs(this,"StudyDialog")}setSelectOption(i,a,o,c){const{node:l}=i;o=o||l.getAttribute("name"),c=c||l.getAttribute("value");const u={[a]:{[o]:c}};this.closeActiveMenu(l),this.updateStudy(u,!0)}updateStudy(i,a=!1){if(!this.querySelector(":invalid")){if(this.addWhenDone){e.extend(this.queuedUpdates,i);return}this.helper.libraryEntry.deferUpdate?(e.extend(this.queuedUpdates,{inputs:i.inputs}),this.helper.updateStudy({outputs:i.outputs,parameters:i.parameters})):this.helper.updateStudy(i),this.emitCustomEvent({action:a?"change":null,effect:"update",detail:{updates:i}})}}selectTemplates(){this.inputTemplate||(this.inputTemplate=this.querySelector("template[cq-study-input]"),this.outputTemplate=this.querySelector("template[cq-study-output]"),this.parameterTemplate=this.querySelector("template[cq-study-parameters]"))}setLine(i,a,o){const c=e.climbUpDomTree(i.node,"cq-dropdown")[0].owningMenu,l=e.climbUpDomTree(c,"cq-study-output")[0],{color:u}=l.querySelector("cq-swatch");c.icon=`ciq-${o}-${a}`,this.updateStudy({outputs:{[l.params.output]:{width:a,pattern:o,color:u}}})}}n.markup=`
		<cq-scroll cq-no-maximize>
			<cq-study-inputs>
				<template cq-study-input>
					<cq-study-input>
						<label>
							<span class="ciq-heading"></span>
							<div class="stx-data">
								<template cq-menu>
									<cq-menu class="ciq-select"></cq-menu>
								</template>
							</div>
						</label>
					</cq-study-input>
					<hr>
				</template>
			</cq-study-inputs>
			<cq-study-outputs>
				<template cq-study-output>
					<cq-study-output>
						<label>
							<span class="ciq-heading"></span>
							<div class="stx-data">
								<cq-menu lift-dropdown class="ciq-select ciq-line-style" reader="Line Style" config="studyLinestyle" icon="ciq-solid-1" tooltip="Line Style"></cq-menu>
								<cq-swatch overrides="auto"></cq-swatch>
							</div>
						</label>
					</cq-study-output>
					<hr>
				</template>
			</cq-study-outputs>
			<cq-study-parameters>
				<template cq-study-parameters>
					<cq-study-parameter>
						<label>
							<span class="ciq-heading"></span>
							<div class="stx-data"><cq-swatch overrides="auto"></cq-swatch>
								<template cq-menu>
									<cq-menu class="ciq-select"></cq-menu>
								</template>
							</div>
						</label>
					</cq-study-parameter>
					<hr>
				</template>
			</cq-study-parameters>
		</cq-scroll>
		<div class="ciq-dialog-cntrls">
			<div class="ciq-btn" stxtap="close()">Done</div>
		</div>
	`,e.UI.addComponentDefinition("cq-study-dialog",n)}class t extends e.UI.BaseComponent{constructor(){super(),this.type=this.tagName.split("-").pop().toLowerCase()}adoptedCallback(){super.adoptedCallback(),e.UI.flattenInheritance(this,t)}initialize(r){this.params=r}setColor(r){if(!this.params)return;const i=`${this.type}s`,a={[i]:{}};a[i][this.params[this.type]]=this.type==="output"?{color:r}:r,this.params.studyDialog.updateStudy(a,!0)}}e.UI.addComponentDefinition("cq-study-output",t);class s extends t{adoptedCallback(){super.adoptedCallback(),e.UI.flattenInheritance(this,s)}}e.UI.addComponentDefinition("cq-study-parameter",s)},ip=E=>{const e=typeof _CIQ<"u"?_CIQ:E.CIQ;if(!e.Studies)console.error("studyLegend component requires first activating studies feature.");else{class t extends e.UI.ModalTag{static get observedAttributes(){return["button-clear-all","button-edit","button-remove","clone-to-panel","content-keys","filter","heading","marker-label","series"]}constructor(){super(),e.UI.makeShadow(this)}connectedCallback(){if(!(!this.isConnected||this.attached)){if(super.connectedCallback(),this.addClaim(this),this.context&&this.context.config&&this.context.config.channels&&this.channelWrite(this.context.config.channels.keyboardNavigation||"channel.keyboardNavigation",{action:"registerElements"}),this.isShadowComponent&&this.children.length)for(;this.children.length;)this.root.appendChild(this.firstChild);this.markup=this.trimInnerHTMLWhitespace(),this.usingMarkup=!!this.markup.match(/\{\{(.{1,20}?)\}\}/g),this.setMarkup(),this.setupShadow()}}adoptedCallback(){super.adoptedCallback(),e.UI.flattenInheritance(this,t),this.constructor=t}disconnectedCallback(){this.doNotDisconnect||(this.context&&this.context.config&&this.context.config.channels&&this.channelWrite(this.context.config.channels.keyboardNavigation||"channel.keyboardNavigation",{action:"registerElements"}),window.removeEventListener("resize",this.resizeListener),this.setActiveState(!1),this.removeClaim(this),super.disconnectedCallback())}handlePropertyChange(n,r,i){r!==i&&(this[n]=i,["content-keys","heading","button-clear-all"].includes(n)&&this.usingMarkup&&this.setMarkup(),this.renderLegend())}begin(){this.init||(this.hasAttribute("cq-marker")&&(this.setAttribute("chart-legend",""),e.UI.stxtap(this,function(n){n.target.isConnected&&!n.target.closest("[section-dynamic]")&&this.setActiveState()})),this.init=!0)}setActiveState(n){const r=this.classList.contains("ciq-active");n=typeof n>"u"?!r:n;const i=this.ownerDocument.body.keystrokeHub;n?(this.classList.add("ciq-active"),i&&this.keyboardNavigation&&i.addActiveModal(this)):(this.classList.remove("ciq-active"),i&&i.removeActiveModal(this))}keyStroke(n,r,i){if(!this.keyboardNavigation)return!1;const a=this.qsa("[keyboard-selectable]:not(.item-hidden), cq-comparison-item",this,!0);if(r==" "||r=="Spacebar"||r=="Enter"){const o=this.findFocused(a);if(!o||!o.length)return;const c=o[0].querySelector("[keyboard-selectable-child][cq-focused]");if(c)this.storeFocused(o,c),this.clickItem(c,i);else{const l=o[0].querySelector("cq-swatch");l?this.clickItem(l,i):this.clickItem(o[0],i)}}else if(r=="ArrowDown"||r=="Down")this.focusNextItem(a);else if(r=="ArrowUp"||r=="Up")this.focusNextItem(a,!0);else if(r=="ArrowRight"||r=="Right"){const o=this.findFocused(a);if(!o||!o.length)return;const c=o[0].querySelectorAll("[keyboard-selectable-child]");c.length&&this.focusNextItem(c)}else if(r=="ArrowLeft"||r=="Left"){const o=this.findFocused(a)[0];if(!o)return;const c=o.querySelectorAll("[keyboard-selectable-child]");c.length&&!this.focusNextItem(c,!0)&&(this.removeFocused(c),this.focusItem(o))}else if(r==="Tab"||r==="Esc"||r==="Escape"){this.removeFocused(a),this.setActiveState(!1);const o=this.ownerDocument.body.keystrokeHub;o&&o.highlightPosition({element:this,position:this.getBoundingClientRect()})}else return!1;return!0}storeFocused(n,r){let i=n[0].querySelector("cq-label")||n[0];const a=r.classList.contains("ciq-switch");a||(i=n[0].previousElementSibling.matches("template")&&n[0].previousElementSibling||n[0].nextElementSibling,i&&i.querySelector("cq-label")&&(i=i.querySelector("cq-label"))),i&&(this.clickedItem={name:i.textContent.trim(),isSwitch:a,ms:+new Date})}launchColorPicker(){this.setActiveState(!0)}renderLegend(){if(this.currentlyDisabling)return;let{filter:n}=this;if(n||(n=""),n=n.split(","),!this.context)return;const{stx:r}=this.context,i=this.root.querySelector("template[cq-study-legend]");for(;i.nextSibling;)i.nextSibling.remove();if(this.series==="true"&&!this.root.querySelector("cq-comparison")){const C=document.createElement("cq-comparison");C.setAttribute("chart-legend",""),i.insertAdjacentElement("beforebegin",C)}else if(this.series!=="true"){const C=this.root.querySelector("cq-comparison");C&&C.remove()}const a=C=>{const F=Object.values(C.outputs);return r.defaultColor||r.getDefaultColor(),F.slice(0,3).map(U=>{const B=U.color||U,k=e.getBackgroundColor(this.parentNode),y=e.chooseForegroundColor(k),S=e.hsl(k),T=B==="auto";let _=T?r.defaultColor:B;const L=e.hsl(_),H=T&&F.length===1||Math.abs(S[2]-L[2])<.2?`solid ${y} 1px`:"",P=T&&F.length===1?`linear-gradient(to right bottom, ${_}, ${_} 49%, ${k} 50%, ${k})`:T?_:B;return`<span style="border: ${H}; background: ${P};"></span>`}).join("")},o=C=>F=>{F.stopPropagation(),this.emitCustomEvent({effect:"remove",detail:{name:(C.signalData||C).name}}),setTimeout(()=>{C.permanent||e.Studies.removeStudy(r,C),this.hasAttribute("cq-marker")&&r.modalEnd(),this.renderLegend()},0)},c=C=>F=>{const{inputs:w,outputs:U,parameters:B,permanent:k,editFunction:y,signalData:S}=C;if(this.emitCustomEvent({effect:"edit",detail:{name:(S||C).name,value:{inputs:w,outputs:U,parameters:B}}}),k||!y){r.dispatch("notification","studynoteditable");return}setTimeout(()=>this.context.getAdvertised("StudyEdit").editPanel({stx:r,sd:C,inputs:w,outputs:U,parameters:B}))},l=(C,F)=>w=>{w.stopPropagation(),this.currentlyDisabling=!0,C.toggleDisabledState(F);let{target:U,currentTarget:B}=w;U.ariaPressed=!C.disabled,(U!==B||U.classList.contains("ciq-switch"))&&(U=U.parentElement),U.classList[C.disabled?"remove":"add"]("ciq-active"),this.emitCustomEvent({effect:"toggle",detail:{name:C.name,value:!C.disabled}}),this.currentlyDisabling=!1},u=n.includes("panel"),h=n.includes("overlay"),d=n.includes("custom-removal"),f=n.includes("signal"),A=this["marker-label"],p=this.closest(".stx-holder"),g=p?p.panel.name:null;let m=!1;const b=e.UI.closestContextContainer(this);if(b&&b.hasAttribute("ciq-native-mobile")&&(m=!0),e.Studies){for(let C in r.layout.studies){const F=r.layout.studies[C];if(F.customLegend||d&&!F.study.customRemoval||u&&F.panel!=g||h&&!F.overlay&&!F.underlay||(!p||g==="chart")&&e.xor(f,F.signalData))continue;const w=this.root.querySelector("template[cq-study-legend]"),U=e.UI.makeFromTemplate(w)[0];w.parentNode.appendChild(U);const B=U.querySelector("[label]");e.makeTranslatableElement(B,r,F.inputs.display),A||B.setAttribute("role","menuitem"),U.setAttribute("title",B.innerText),p&&U.appendChild(B);const{disabled:k,signalData:y}=F,S=U.querySelector(".swatch");S&&(!p||y?S.classList.add("hidden"):S.innerHTML=a(F));const T=U.querySelector(".ciq-switch"),_=e.uniqueID()+"_toggle_label";T.setAttribute("aria-labelledBy",_),T.ariaPressed=!k,k||U.classList.add("ciq-active"),e.UI.stxtap(T,l(F,r));const L=U.querySelector("[id][hidden]");L&&(L.id=_),T.classList.remove("hidden"),this.clickedItem&&+new Date-this.clickedItem.ms<100&&this.clickedItem.name.replace(/\u200C/g,"")===F.inputs.display.replace(/\u200C/g,"")&&(this.focusItem(U),this.clickedItem.isSwitch&&this.focusItem(T));const H=U.querySelector(".close");H&&(!this["button-remove"]||this["button-remove"]==="false"?H.classList.add("hidden"):F.permanent?H.style.visibility="hidden":e.UI.stxtap(H,o(F)));let P=U.querySelector(".options");(F.permanent||!F.editFunction||this["button-edit"]!=="true")&&(P&&P.classList.add("hidden"),P=U,B.setAttribute("role","button")),e.UI.stxtap(P||U,m?l(F,r):c(F)),e.isMobile&&(e.UI.stxtap(U.querySelector(".swatch"),()=>{}),e.UI.stxtap(U.querySelector("[label]"),()=>{}))}this.setPanelLegendWidth()}if(typeof A<"u"&&!this.root.querySelector(".marker-label")){const C=document.createElement("span");C.className="marker-label",e.makeTranslatableElement(C,r,A);const F=this.root.querySelectorAll("link, style");this.root.insertBefore(C,F.length?F[F.length-1].nextSibling:this.root.firstChild)}r.translateUI(this),this.displayLegendTitle()}displayLegendTitle(){const n=i=>{for(;i;){if(i.nodeName.toLowerCase()==="template")return!1;i=i.parentElement}return!0};[...this.qsa(this["content-keys"]||"[label], [description]",this,!0)].some(n)?(this.style.display="",this.style.width=""):(this.style.display="none",this.style.width="0px"),this.context.stx.translateUI&&this.context.stx.translateUI(this.node[0])}setContext(n){if(!this.parentElement)return;if(this["clone-to-panel"]!==void 0){e.UI.closestContextContainer(this).classList.add("stx-panel-legend"),this.spawnPanelLegend();const i=()=>{this["clone-to-panel"]===void 0?n.stx.unappend("stackPanel",i):this.spawnPanelLegend()};n.stx.append("stackPanel",i)}this.begin(),this.changeContext(n)}changeContext(n){if(!this.init){this.context=n,this.setContext(n);return}this.eventListeners.forEach(r=>{this.context.stx.removeEventListener(r)}),this.eventListeners=[n.stx.addEventListener("layout",this.renderLegend.bind(this)),n.stx.addEventListener("theme",this.renderLegend.bind(this))],this.resizeListener=this.setPanelLegendWidth.bind(this),window.addEventListener("resize",this.resizeListener),this.context=n,this.renderLegend()}setPanelLegendWidth(){if(!this.parentElement||!this.parentElement.matches(".fixed-wrapper")||!e.trulyVisible(this))return;const n=e.climbUpDomTree(this,"div.stx-panel-control",!0)[0],r=n.querySelectorAll(".stx-btn-panel");for(let u of r)u.style.marginLeft="";const i=n.querySelector(".stx-btn-panel.stx-show")||null,a=i?i.offsetLeft:null,o=n.lastChild||null,c=o?o.offsetLeft+o.offsetWidth:null;this.channelRead("channel.breakpoint")==="break-sm"?i.style.marginLeft="":i.style.marginLeft="-"+(c-a+20)+"px"}spawnPanelLegend(){const{stx:n}=this.context;function r(i){return function(a){const o=a.currentTarget;(o===this||o.matches("[label]"))&&i.setActiveState()}}for(let i in n.panels){if(i==n.chart.panel.name)continue;const a=n.panels[i].subholder.querySelector(".stx-panel-legend");if(a){let o=a.querySelector(this.nodeName);if(!o){if(this.ownerDocument!==document){const u=document.createElement("template");u.innerHTML=this.outerHTML,document.body.append(u),o=e.UI.makeFromTemplate(u)[0],u.remove()}else o=this.cloneNode(!0),o.innerHTML=this.root.innerHTML;o.removeAttribute("clone-to-panel"),o.removeAttribute("cq-marker"),o.setAttribute("chart-legend",""),this.makeTap(o,r(o));const c=o.querySelector(".marker-label");c&&c.remove();const l=document.createElement("div");l.className="fixed-wrapper",l.appendChild(o),a.appendChild(l),o.begin()}}}}setMarkup(){const{children:n}=this.root;if(!n.length||this.usingMarkup){this.usingMarkup=!0,n.length&&[...n].forEach(c=>{["LINK","STYLE"].includes(c.tagName)||c.remove()});let r=this.markup||this.constructor.markup;const{filter:i}=this,a=new RegExp("{{mode}}","g");r=r.replace("{{heading}}",this.heading||"").replace("{{heading_class}}",this.heading?"":"hidden").replace("{{heading_style}}",this.heading?"":"margin: 0;").replace("{{button_action}}",this["button-clear-all"]||"").replace("{{button_class}}",this["button-clear-all"]?"":"hidden").replace(a,(i||"").split(",").includes("signal")?"signal":"study"),this.addDefaultMarkup(null,r);const o=this.root.querySelector("cq-heading");o&&this.matches(".template-item *")&&o.classList.add("dropdown")}}}t.markup=`
		<div section-dynamic>
			<h4 class="{{heading_class}}" style="{{heading_style}}">
				<cq-heading text="{{heading}}"></cq-heading>
			</h4>
			<div>
				<template cq-study-legend>
					<div class="item" role="group" keyboard-selectable>
						<span label></span>
						<span class="icon options" keyboard-selectable-child>
							<div class="ciq-screen-reader" role="button">Edit this {{mode}}</div>
						</span>
						<div class="icon close ciq-icon ciq-close" keyboard-selectable-child>
							<div class="ciq-screen-reader" role="button">Remove this {{mode}}</div>
						</div>
						<span class="ciq-switch hidden" role="button" keyboard-selectable-child aria-labelledby="xyz"></span>
						<span id="xyz" hidden>Toggle this plot</span>
						<div class="swatch"></div>
					</div>
				</template>
			</div>
			<cq-clickable cq-no-close role="button" class="clickable-item item ciq-btn sm {{button_class}}" stxtap="{{button_action}}" keyboard-selectable>
				<span>Clear All</span>
			</cq-clickable>
		</div>
	`,e.UI.addComponentDefinition("cq-study-legend",t)}},rp=E=>{const e=typeof _CIQ<"u"?_CIQ:E.CIQ;class t extends e.UI.BaseComponent{static get observedAttributes(){return["color","overrides","static"]}constructor(){super(),this.defaultColor=null,this.preventPercolate=null}connectedCallback(){!this.isConnected||this.attached||(this.attached=!0,this.tapListener=n=>{this.launchColorPicker(),n.stopPropagation()},this._setInteractive(this.getAttribute("static")),this.setAttribute("role","button"),this.children.length||this.addDefaultMarkup(),this.color&&this._updateSwatchColor(this.color,!0))}adoptedCallback(){super.adoptedCallback(),e.UI.flattenInheritance(this,t),this.constructor=t}handlePropertyChange(n,r,i){if(i!==r)switch(this[n]=i,n){case"color":this._updateSwatchColor(i);return;case"overrides":const{activeMenuStack:a}=e.UI.getUIManager();a&&a.length&&a[a.length-1].callingNode===this&&this.launchColorPicker();return;case"static":this._setInteractive(i);return}}_setInteractive(n){typeof n=="string"&&n!=="false"?(this.style.cursor="default",this.removeEventListener("stxtap",this.tapListener)):(this.style.cursor="pointer",this.addEventListener("stxtap",this.tapListener))}_updateSwatchColor(n,r){n||(n="transparent");let i=this.parentNode?e.getBackgroundColor(this.parentNode):"";const a=e.chooseForegroundColor(i),o=e.hsl(i),c=n==="auto";let l=c?this.getDefaultColor():n;l.indexOf("rgba(")===0&&(l=(l.split(",").slice(0,3).join(",")+")").replace(/rgba/,"rgb"));const u=e.hsl(l),h=e.isTransparent(n);this.style.background=this.value=l,c||Math.abs(o[2]-u[2])<.2||h?(this.style.border="solid "+a+" 1px",h&&(this.style.background="linear-gradient(to bottom right, transparent, transparent 49%, "+a+" 50%, transparent 51%, transparent)")):this.style.border="",c&&(i=e.chooseForegroundColor(l),this.style.background="linear-gradient(to bottom right, "+l+", "+l+" 49%, "+i+" 50%, "+i+")"),!r&&(this.emitCustomEvent({action:null,cause:this.cause,effect:"change",detail:{value:n}}),this.preventPercolate===!0?this.preventPercolate=null:e.UI.containerExecute(this,"setColor",n,this))}getDefaultColor(){if(this.defaultColor)return this.defaultColor;const n=e.UI.getMyContext(this);return n?n.stx.defaultColor:"transparent"}setColor(n,r,i){if(!this.parentNode)return;r===!1&&(this.preventPercolate=!0),this.cause="setColor";const a=i?"auto":n;this.setAttribute("color",a),delete this.cause;const o=this.querySelector("[label]");o&&(o.innerText=a)}launchColorPicker(){if(!this.attached)return;e.UI.containerExecute(this,"launchColorPicker");const n=e.UI.getUIManager().getColorPicker(this);if(n){n.callback=i=>this.setColor(i,null,i==="auto");let r=this.overrides;r&&(r=r.split(",")),setTimeout(()=>{n.display({node:this,context:e.UI.getMyContext(this),overrides:r}),this.colorPicker=n,this.emitCustomEvent({effect:"open"})},e.isMobile?250:0)}}}t.markup=`
	<span class="ciq-screen-reader">Color Swatch</span>
	<span class="ciq-screen-reader" label></span>
`,e.UI.addComponentDefinition("cq-swatch",t)},ap=E=>{const e=typeof _CIQ<"u"?_CIQ:E.CIQ;class t extends e.UI.ContextTag{static get observedAttributes(){return[]}constructor(){super(),e.UI.makeShadow(this)}connectedCallback(){!this.isConnected||this.attached||(super.connectedCallback(),this.attached=!0,this.setupShadow())}adoptedCallback(){super.adoptedCallback(),e.UI.flattenInheritance(this,t),this.constructor=t}disconnectedCallback(){this.doNotDisconnect||(this.removeClaim(this),super.disconnectedCallback())}initialize(n){this.addDefaultMarkup(),this.currentSymbol=this.querySelector(".current-symbol"),this.currentSymbol.value=n.value,this.value=n.value}openDialog(){const{context:n,channelWrite:r}=this,i=(n.config.channels||{}).dialog||"channel.dialog";setTimeout(()=>{r(i,{type:"lookup",params:{context:n,caller:this,useFirstResult:!0,callback:a=>{a.symbol&&(this.value=a.symbol,this.dispatchEvent(new CustomEvent("change",{bubbles:!0,cancelable:!1,composed:!0,detail:a})),this.currentSymbol.value=a.symbol)}}},n.stx)}),this.emitCustomEvent({effect:"open"})}}t.markup=`
		<div class="ciq-symbol-input" stxtap="openDialog()">
			<input class="current-symbol" type="text" />
		</div>
	`,e.UI.addComponentDefinition("cq-symbol-input",t)},np=E=>{const e=typeof _CIQ<"u"?_CIQ:E.CIQ;if(!e.ThemeHelper)console.error("themeDialog component requires first activating theme feature.");else{class s extends e.UI.DialogContentTag{adoptedCallback(){super.adoptedCallback(),e.UI.flattenInheritance(this,s),this.constructor=s}applyChanges(){const r=this.context.topNode.parentElement.closest("cq-context");(r&&r.getCharts?r.getCharts():[this.context.stx]).forEach(a=>{a&&(this.helper.update(a),a.changeOccurred("theme"))})}close(){this.helper.settings=this.revert,this.applyChanges(),super.close()}open(r){this.addDefaultMarkup();let{themeName:i,initiatingMenu:a}=r;this.initiatingMenu=a,this.context=r.context,this.helper=new e.ThemeHelper({stx:this.context.stx}),this.revert=e.clone(this.helper.settings);const o=(h,d,f,A)=>{const p=this.querySelector(`cq-theme-piece[cq-piece="${h}"]`);p&&(p.piece={obj:d,field:f},p.querySelector("cq-swatch").setColor(d[f],!1))},{settings:c}=this.helper,l=c.chartTypes["Candle/Bar"];o("cu",l.up,"color"),o("cd",l.down,"color"),o("wu",l.up,"wick"),o("wd",l.down,"wick"),o("bu",l.up,"border"),o("bd",l.down,"border"),o("lc",c.chartTypes.Line,"color"),o("mb",c.chartTypes.Mountain,"basecolor"),o("mc",c.chartTypes.Mountain,"color"),o("bg",c.chart.Background,"color"),o("gl",c.chart["Grid Lines"],"color"),o("dd",c.chart["Grid Dividers"],"color"),o("at",c.chart["Axis Text"],"color"),i||(i="My Theme");const u=this.querySelector("cq-action input");u&&(u.value=i),super.open(r)}save(){const r=this.querySelector("cq-action input"),i={settings:e.clone(this.helper.settings),name:r&&r.value,builtIn:null};e.UI.contextsForEach(function(){this.stx.updateListeners("theme")},this),this.qsa("cq-themes",null,!0).filter(a=>a.ownerDocument===this.ownerDocument).forEach(a=>{i.builtIn=a.currentLoadedBuiltIn,a.addCustom(i,this.initiatingMenu)}),i.name&&this.emitCustomEvent({effect:"save",detail:{name:i.name,theme:i.settings}}),super.close()}setValue(r,i,a){r[i]=a,this.applyChanges()}}s.markup=`
		<cq-scroll cq-no-maximize>
			<cq-section>
				<cq-placeholder>Candle Color
					<cq-theme-piece-container>
						<cq-theme-piece cq-piece="cu"><cq-swatch overrides="Hollow"></cq-swatch></cq-theme-piece>
						<cq-theme-piece cq-piece="cd"><cq-swatch overrides="Hollow"></cq-swatch></cq-theme-piece>
					</cq-theme-piece-container>
				</cq-placeholder>
				<cq-placeholder>Candle Wick
					<cq-theme-piece-container>
						<cq-theme-piece cq-piece="wu"><cq-swatch></cq-swatch></cq-theme-piece>
						<cq-theme-piece cq-piece="wd"><cq-swatch></cq-swatch></cq-theme-piece>
					</cq-theme-piece-container>
				</cq-placeholder>
				<cq-placeholder>Candle Border
					<cq-theme-piece-container>
						<cq-theme-piece cq-piece="bu"><cq-swatch overrides="No Border"></cq-swatch></cq-theme-piece>
						<cq-theme-piece cq-piece="bd"><cq-swatch overrides="No Border"></cq-swatch></cq-theme-piece>
					</cq-theme-piece-container>
				</cq-placeholder>
				<cq-separator></cq-separator>
				<cq-placeholder>Line/Bar Chart
					<cq-theme-piece-container>
						<cq-theme-piece cq-piece="lc"><cq-swatch></cq-swatch></cq-theme-piece>
					</cq-theme-piece-container>
				</cq-placeholder>
				<cq-separator></cq-separator>
				<cq-placeholder>Mountain Base
					<cq-theme-piece-container>
						<cq-theme-piece cq-piece="mb"><cq-swatch></cq-swatch></cq-theme-piece>
					</cq-theme-piece-container>
				</cq-placeholder>
				<cq-placeholder>Mountain Peak
				<cq-theme-piece-container>
					<cq-theme-piece cq-piece="mc"><cq-swatch></cq-swatch></cq-theme-piece>
				</cq-theme-piece-container>
				</cq-placeholder>
			</cq-section>
			<cq-section>
				<cq-placeholder>Background
					<cq-theme-piece-container>
						<cq-theme-piece cq-piece="bg"><cq-swatch></cq-swatch></cq-theme-piece>
					</cq-theme-piece-container>
				</cq-placeholder>
				<cq-placeholder>Grid Lines
					<cq-theme-piece-container>
						<cq-theme-piece cq-piece="gl"><cq-swatch></cq-swatch></cq-theme-piece>
					</cq-theme-piece-container>
				</cq-placeholder>
				<cq-placeholder>Date Dividers
					<cq-theme-piece-container>
						<cq-theme-piece cq-piece="dd"><cq-swatch></cq-swatch></cq-theme-piece>
					</cq-theme-piece-container>
				</cq-placeholder>
				<cq-placeholder>Axis Text
					<cq-theme-piece-container>
						<cq-theme-piece cq-piece="at"><cq-swatch></cq-swatch></cq-theme-piece>
					</cq-theme-piece-container>
				</cq-placeholder>
			</cq-section>
			<cq-action>
				<div style="text-align:center;margin-top:10px;">
					<label for="cq-theme-dialog-input-name"><div>Enter name of theme:</div>
						<br>
						<input id="cq-theme-dialog-input-name" spellcheck="false" autocomplete="off" autocorrect="off" autocapitalize="none" maxlength="40" placeholder="Name"><br>
						<br>
					</label>
					<button class="ciq-btn" stxtap="save()">Save</button>
				</div>
			</cq-action>
		</cq-scroll>
	`,e.UI.addComponentDefinition("cq-theme-dialog",s)}class t extends e.UI.BaseComponent{adoptedCallback(){super.adoptedCallback(),e.UI.flattenInheritance(this,t)}setBoolean(n){e.UI.containerExecute(this,"setValue",this.piece.obj,this.piece.field,n),this.emitCustomEvent({effect:"change",detail:{name:this.getAttribute("cq-piece"),value:n}})}setColor(n){(n=="Hollow"||n=="No Border")&&(n="transparent",this.querySelector("cq-swatch").setColor("transparent",!1)),e.UI.containerExecute(this,"setValue",this.piece.obj,this.piece.field,n),this.emitCustomEvent({effect:"change",detail:{name:this.getAttribute("cq-piece"),value:n}})}}e.UI.addComponentDefinition("cq-theme-piece",t)},sp=E=>{const e=typeof _CIQ<"u"?_CIQ:E.CIQ;class t extends e.UI.ContextTag{static get observedAttributes(){return["theme"]}constructor(){super(),e.UI.makeShadow(this)}connectedCallback(){!this.isConnected||this.attached||(super.connectedCallback(),this.setupShadow())}adoptedCallback(){super.adoptedCallback(),e.UI.flattenInheritance(this,t),this.constructor=t}handlePropertyChange(n,r,i){r!==i&&(this[n]=i,n==="theme"&&this.load(i))}setContext(n){const{config:r}=n;if(!r)return;const{chartId:i,themes:{builtInThemes:a,defaultTheme:o}}=r,c=r.themes.nameValueStore||r.nameValueStore;this.initialize({builtInThemes:a,defaultTheme:o,nameValueStore:c,id:i})}addCustom(n,r){this.params.customThemes[n.name]=n,this.currentThemeSettings=n&&n.settings||n,r===e.climbUpDomTree(this,"cq-menu",!0)[0]&&(this.currentTheme=n.name),this.configureMenu(),this.persist()}configureMenu(){const n=o=>c=>{this.clicked=!0,this.setAttribute("theme",o),delete this.clicked};[...this.builtInMenu.children].forEach(o=>!o.matches("template")&&o.remove()),[...this.customMenu.children].forEach(o=>!o.matches("template")&&o.remove());let r;const{builtInThemes:i,customThemes:a}=this.params;for(let o in i)r=e.UI.makeFromTemplate(this.builtInTemplate)[0],r.innerText=i[o],this.makeTap(r,n(o)),this.builtInMenu.appendChild(r);if(this.context.stx.translateUI&&this.context.stx.translateUI(this.builtInMenu),this.customMenu&&this.customTemplate){const o=c=>l=>{l.stopPropagation(),this.emitCustomEvent({effect:"remove",detail:{value:c}}),this.removeTheme(c)};for(let c in a){r=e.UI.makeFromTemplate(this.customTemplate)[0],r.querySelector("[label]").innerText=c,this.makeTap(r,n(c));const l=r.querySelector(".close");l&&(l.setAttribute("keyboard-selectable-child",""),e.UI.stxtap(l,o(c))),this.customMenu.appendChild(r)}}}initialize(n){if(this.initialized)return;this.initialized=!0,this.addDefaultMarkup(),this.selectTemplates(this),this.params={},n&&(this.params=n);const r=a=>typeof a=="function";e.ensureDefaults(this.params,{customThemes:{},builtInThemes:{},nameValueStore:e.NameValueStore&&new e.NameValueStore}),this.params.id&&(this.id="themes_"+this.params.id);let{nameValueStore:i}=this.params;i?(r(i)&&(i=this.params.nameValueStore=new i),i.get("CIQ.Themes.prototype.custom",(a,o)=>{!a&&o&&(this.params.customThemes=o),i.get(this.id+"CIQ.Themes.prototype.current",(c,l)=>{!c&&l&&l.theme?this.setAttribute("theme",l.theme):this.setAttribute("theme",this.params.defaultTheme),this.configureMenu()})})):this.loadTheme(this.theme||this.params.defaultTheme)}load(n){this.context&&(this.loadTheme(n),this.emitCustomEvent({effect:"select",action:this.clicked?"click":null,detail:{value:n}}),this.params.callback&&this.params.callback({theme:this.currentTheme}),this.persist("current"))}loadBuiltIn(n){this.currentLoadedBuiltIn&&this.currentLoadedBuiltIn.split(/\./).forEach(r=>{this.removeThemeClass(r)}),this.addThemeClass(n),this.currentLoadedBuiltIn=this.currentTheme=n,this.reinitializeChart()}loadCustom(n){this.currentLoadedBuiltIn&&this.currentLoadedBuiltIn.split(/\./).forEach(i=>{this.removeThemeClass(i)});const r=this.params.customThemes[n];r.builtIn&&this.addThemeClass(r.builtIn),this.currentLoadedBuiltIn=r.builtIn,this.currentTheme=r.name,this.reinitializeChart(r)}loadTheme(n){this.params.customThemes[n]?this.loadCustom(n):this.params.builtInThemes[n]?this.loadBuiltIn(n):this.loadBuiltIn(this.params.defaultTheme)}get contextContainers(){const n=this.context.topNode;return[n].concat([...n.querySelectorAll("cq-context")])}addThemeClass(n){const r=i=>{i.currentTheme=n,i.classList.add(...n.split("."));const{context:a}=i.CIQ.UI,o=(a.config.channels||{}).componentClass||"channel.componentClass";this.channelWrite(o,{[n]:"add"},a.stx)};this.contextContainers.forEach(r),this.context.topNode.setCurrentThemeClass=r}removeThemeClass(n){const r=i=>{i.classList.remove(n);const{context:a}=i.CIQ.UI,o=(a.config.channels||{}).componentClass||"channel.componentClass";this.channelWrite(o,{[n]:"remove"},a.stx)};this.contextContainers.forEach(r),this.context.topNode.setCurrentThemeClass=null,this.context.topNode.currentTheme=null}newTheme(){const{context:n}=this;n.config?this.channelWrite(n.config.channels.dialog,{type:"theme",params:{context:n,initiatingMenu:this}},n.stx):this.ownerDocument.querySelector("cq-theme-dialog").open({context:this.context,initiatingMenu:this})}persist(n){this.params.nameValueStore&&((!n||n=="current")&&this.params.nameValueStore.set(this.id+"CIQ.Themes.prototype.current",{theme:this.currentTheme}),(!n||n=="custom")&&this.params.nameValueStore.set("CIQ.Themes.prototype.custom",this.params.customThemes))}removeTheme(n){let r=!1;this.context.topNode.CIQ.UI.Components.filter(i=>i.matches("cq-themes")&&i.ownerDocument===this.ownerDocument).forEach(i=>{delete i.params.customThemes[n],i.configureMenu(),r||(i.persist(),r=!0)})}selectTemplates(){this.builtInMenu||(this.builtInMenu=this.root.querySelector("div[themes-builtin]"),this.builtInTemplate=this.builtInMenu.querySelector("template"),this.customMenu=this.root.querySelector("div[themes-custom]"),this.customTemplate=this.customMenu.querySelector("template"))}reinitializeChart(n){const r=this.context.topNode.getCharts,{styles:i}=this.context.topNode;i?Object.values(i).forEach(o=>{for(let c in o)delete o[c]}):this.context.topNode.styles={};const a=r?this.context.topNode.getCharts():[this.context.stx];this.currentThemeSettings=n&&n.settings||n,a.forEach(o=>{o&&o.setThemeSettings&&o.setThemeSettings(n?n.settings:null)})}}t.markup=`
		<div>
			<div themes-builtin>
				<template>
					<div class="item" role="menuitem" keyboard-selectable></div>
				</template>
			</div>
			<div themes-custom>
				<template>
					<div class="item" keyboard-selectable>
						<span label role="menuitem"></span>
						<div class="icon close ciq-icon ciq-close">
							<div class="ciq-screen-reader" role="button">Remove this theme</div>
						</div>
					</div>
				</template>
			</div>
		</div>
	`,e.UI.addComponentDefinition("cq-themes",t)},op=E=>{const e=typeof _CIQ<"u"?_CIQ:E.CIQ;if(!e.timeZoneMap)console.error("timezoneDialog component requires first activating timezone feature.");else{class t extends e.UI.DialogContentTag{adoptedCallback(){super.adoptedCallback(),e.UI.flattenInheritance(this,t),this.constructor=t}open(n){this.addDefaultMarkup(),super.open(n),this.context=n.context;const{stx:r}=this.context,i=()=>{const l=this.querySelector(".currentUserTimeZone");if(r.displayZone){let u=r.displayZone;for(let h in e.timeZoneMap)e.timeZoneMap[h]===r.displayZone&&(u=h);l.innerText=r.translateIf("Current Timezone is")+" "+r.translateIf(u),c.style.display=""}else l.innerText=r.translateIf("Your timezone is your current location"),c.style.display="none"},a=l=>u=>{const h=e.timeZoneMap[l];e.ChartEngine.defaultDisplayTimeZone=h,r.setTimeZone(r.dataZone,h),r.chart.symbol&&r.draw(),i(),this.emitCustomEvent({effect:"change",detail:{zone:h}})},o=this.querySelector("ul, .ciq-ul"),c=this.querySelector(".ciq-btn");this.template||(this.template=o.querySelector("li.timezoneTemplate").cloneNode(!0)),o.innerHTML="";for(let l in e.timeZoneMap){const u=this.template.cloneNode(!0);u.innerHTML=r.translateIf(l),e.safeClickTouch(u,a(l).bind(this)),o.append(u)}i()}removeTimezone(){e.ChartEngine.defaultDisplayTimeZone=null;const{stx:n}=this.context;n.displayZone=null,n.setTimeZone(),n.displayInitialized&&n.draw(),this.emitCustomEvent({effect:"remove"}),this.close()}}t.markup=`
		<p class="currentUserTimeZone"></p>
		<div class="detect">
			<div class="ciq-btn" stxtap="removeTimezone()">Use My Current Location</div>
		</div>
		<div class="timezoneDialogWrapper">
			<cq-scroll cq-no-maximize class="ciq-ul" role="listbox">
				<li class="timezoneTemplate" role="option"></li>
			</cq-scroll>
		</div>
		<div class="instruct">(Scroll for more options)</div>
	`,e.UI.addComponentDefinition("cq-timezone-dialog",t)}},lp=E=>{const e=typeof _CIQ<"u"?_CIQ:E.CIQ;class t extends e.UI.ContextTag{static get observedAttributes(){return["action","config","help-id","icon","member","multichart-distribute","reader","stxtap","toggles","toggle-classes","tooltip","value"]}constructor(){super(),e.UI.makeShadow(this),this.defaultParams={action:"class",activeClass:"active",member:null,toggles:"",classes:{},callbacks:[]},Object.assign(this,this.defaultParams)}connectedCallback(){if(!this.isConnected||this.attached)return;if(super.connectedCallback(),this.isShadowComponent&&this.children.length)for(;this.children.length;)this.root.appendChild(this.firstChild);this.markup=this.trimInnerHTMLWhitespace(),this.usingMarkup=!!this.markup.match(/\{\{(.{1,20}?)\}\}/g);const n=this.getAttribute("active-class");n&&(this.activeClass=n),this.reset(),this.setupShadow()}adoptedCallback(){super.adoptedCallback(),e.UI.flattenInheritance(this,t),this.constructor=t}disconnectedCallback(){this.doNotDisconnect||(this.disconnectObservable(),super.disconnectedCallback())}handlePropertyChange(n,r,i){if(r!==i){if(this[n]=i,n==="value"){this.set(this.splitAndNormalize(i)[0]),this.postProcess();return}n==="stxtap"?e.UI.BaseComponent.buildReverseBindings(this.root):this.usingMarkup&&this.reset()}}connectObservable(){const{objectsMember:n,obj:r}=this;if(n&&r){this.disconnectObservable();const i=()=>{this.updateFromBinding()};e.UI.observeProperty(n,r,i),this.observeInfo={member:n,obj:r,listener:i}}}disconnectObservable(){if(!this.observeInfo)return;const{member:n,obj:r,listener:i}=this.observeInfo;e.UI.unobserveProperty(n,r,i)}begin(){this.connectObservable(),!this.tapInitialized&&(this.lastTap={},this.tapInitialized=!0,!this.getAttribute("stxtap")&&e.UI.stxtap(this,n=>{n.stopPropagation();const r=Date.now();if(this.lastTap.target!==n.target&&r-this.lastTap.tapTime<200)return;this.lastTap={tapTime:r,target:n.target},this.clicked=!0;const i=e.climbUpDomTree(n.target,"cq-dialog",!0)[0],a=e.climbUpDomTree(n.target,"cq-menu",!0)[0];this.uiManager.closeMenu(null,"cq-color-picker"+(i?"":",cq-dialog")+(a?"":",cq-menu"));let o=this.toggles||this.defaultParams.toggles;if(o){o=this.splitAndNormalize(o);let c;for(c=0;c<o.length;c++){const l=o[c];if(this.value==l){c<o.length-1?this.set(o[c+1]):this.set(o[0]);break}}c==o.length&&this.set(o[0])}else this.set(!this.value);delete this.clicked}))}postProcess(){if(!this.context)return;this.emitCustomEvent({action:this.clicked?"click":null,effect:"toggle",detail:{value:this.value}});const{stx:n}=this.context;n.draw();const{obj:r}=this;r===n.layout&&n.changeOccurred("layout"),r===n.preferences&&n.changeOccurred("preferences")}getMarkup(){let n=this.markup||this.constructor.markup;const r=n.match(/\{\{(.{1,20}?)\}\}/g);return r&&r.forEach(i=>{const a=i.substring(2,i.length-2);if(["help_class","tooltip_class"].includes(a))return;const o=this[a];o==null?a==="help-id"?n=n.replace(/\{\{help_class\}\}/g,"hidden"):a==="icon"?n=n.replace(i,"hidden"):a==="tooltip"?n=n.replace("{{tooltip_class}}","hidden"):n=n.replace(i,""):(n=n.replace(i,o||""),a==="tooltip"?n=n.replace("{{tooltip_class}}",""):a==="help-id"&&(n=n.replace(/\{\{help_class\}\}/g,"")))}),n}registerCallback(n,r){r!==!1&&(r=!0),this.callbacks.push(n),r&&n.call(this,this.value)}splitAndNormalize(n){return typeof n=="string"?(n=n.split(","),n.forEach((r,i)=>{r==="null"?r=null:r==="true"||r==="false"?r=r==="true":isNaN(Number(r))||(r=Number(r)),n[i]=r})):n=[n],n}reset(){const{children:n}=this.root;if(!n.length||this.usingMarkup){this.usingMarkup=!0,n.length&&[...n].forEach(a=>{["LINK","STYLE"].includes(a.tagName)||a.remove()});const i=document.createElement("div");this.addDefaultMarkup(i,this.getMarkup())}!this.value&&this.value!==0&&(this.value=!1);const r=this.config;if(r){const i=e.UI.BaseComponent.getHelper(this,"ToggleConfig");i&&i[r]&&i[r].callbacks&&(this.callbacks=[],i[r].callbacks.forEach(function(a){typeof a=="object"?this.registerCallback(a.fn,a.immediate):this.registerCallback(a)},this))}if(this.context){this.obj=this.context.stx.layout;const{contextConfig:i}=this;let a=this.originalMember||this.member;if(i&&i.channels&&i.channels[a]&&(a=i.channels[a]),a&&a.indexOf(".")!==-1){const u=a.split(".");this.obj=this.context.stx[u[0]],typeof this.obj>"u"&&(this.context.stx[u[0]]=this.obj={},this.originalMember=a),a=u[1]}a&&(this.objectsMember=a);let o=this.toggles||this.defaultParams.toggles;o&&(o=this.splitAndNormalize(o));const c=this["toggle-classes"]||"",l=c.split(/, |,/);if(this.removeClasses=c.split(/, | |,/).filter(u=>u),this.classes=(o||[]).reduce(function(u,h,d){return u[h]=l[d].split(/ /),u},{}),a&&this.obj[a]===void 0){const u=o&&o.length?o[o.length-1]:!1;this.obj[a]=u}}this.connectObservable(),this.setAriaPressed()}set(n){if(!this.setting){if(this.setting=!0,this.member){const{context:r,objectsMember:i,obj:a}=this,{stx:o,topNode:c}=r||{};if(r&&c.getCharts&&this.hasAttribute("multichart-distribute")){let l=c.getCharts(),u=null;a===o.layout&&(u="layout"),a===o.preferences&&(u="preferences"),u&&l.forEach(h=>{h[u][i]=n,h!==o&&h.changeOccurred(u)})}a&&(a[i]=n),this.value=n}else this.callbacks&&this.callbacks.forEach(r=>r.call(this,n)),this.value=n;this.updateClass(),this.setAriaPressed(),delete this.setting}}setAriaPressed(){const n=this.root.querySelector("[aria-pressed]");n&&(n.ariaPressed=this.toggles?!!this.matches(".active, .on, .true"):!!this.value)}setContext(n){const{config:r}=n;this.contextConfig=r,this.reset(r),this.begin()}changeContext(n){this.context=n,this.setContext(n)}updateClass(){const{removeClasses:n,classes:r}=this;if(!n||this.value===void 0)return;this.classList.remove(...n);let i=r[this.value];i&&i[0]&&this.classList.add(...i)}updateFromBinding(){this.value=this.obj[this.objectsMember],this.callbacks.length?this.callbacks.forEach(n=>n.call(this,this.value)):this.action=="class"&&(this.value?this.classList.add(this.activeClass):this.classList.remove(this.activeClass)),this.updateClass(),this.setAriaPressed(),this.member=="crosshair"&&this.value===!1&&this.context.stx.doDisplayCrosshairs()}}t.markup=`
		<cq-help class="{{help_class}}" help-id="{{help-id}}"aria-hidden="true"></cq-help>
		<span class="icon {{icon}}">
			<div cq-tooltip class="{{tooltip_class}}" aria-hidden="true">{{tooltip}}</div>
		</span>
		<span class="ciq-screen-reader">
			<button type="button" aria-pressed="false" tabindex="-1">{{reader}}</button>
			<em	class="help-instr {{help_class}}">(Help available, press question mark key)</em>
		</span>
	`,e.UI.addComponentDefinition("cq-toggle",t)},cp=E=>{},up=E=>{const e=typeof _CIQ<"u"?_CIQ:E.CIQ;class t extends e.UI.ContextTag{constructor(){super(),this.redoButton=null,this.undostack=[],this.redostack=[],this.contexts=[]}connectedCallback(){!this.isConnected||this.attached||(super.connectedCallback(),e.UI.stxtap(this,()=>this.undo()),this.setButtonStyle())}adoptedCallback(){super.adoptedCallback(),e.UI.flattenInheritance(this,t)}disconnectedCallback(){this.doNotDisconnect||(this.removeClaim(this),super.disconnectedCallback())}clear(n){this.setButtonStyle()}handleEvent(n,r,i){this.undostack.push({context:n,drawings:i.before}),this.redostack=[],this.setButtonStyle()}keyStroke(n,r,i,a){if(r=="z"&&(a.ctrl||a.cmd))return a.shift?this.redo():this.undo(),!0;if(r=="y"&&(a.ctrl||a.cmd))return this.redo(),!0}manageContext(n){this.addClaim(this),this.eventListeners.push(n.stx.addEventListener("undoStamp",r=>this.handleEvent(n,"undoStamp",r))),this.contexts.push(n)}redo(){const n=this.redostack.pop();if(n){const{context:r,drawings:i}=n;this.undostack.push({context:r,drawings:r.stx.exportDrawings()}),r.stx.abortDrawings(!0),r.stx.importDrawings(i),r.stx.changeOccurred("vector"),r.stx.draw()}this.setButtonStyle()}setButtonStyle(){this.undostack.length?(this.setAttribute("cq-active","true"),this.removeAttribute("aria-disabled")):(this.removeAttribute("cq-active"),this.setAttribute("aria-disabled","true")),this.redoButton&&(this.redostack.length?(this.redoButton.setAttribute("cq-active","true"),this.redoButton.removeAttribute("aria-disabled")):(this.redoButton.removeAttribute("cq-active"),this.redoButton.setAttribute("aria-disabled","true")))}setContext(n){let r=[this.context];this.context.topNode.getCharts&&(r=this.context.topNode.getCharts().map(a=>a.uiContext)),r.forEach(i=>{this.manageContext(i)}),this.addInjection("append","initializeChart",()=>{this.undostack=[],this.redostack=[],this.clear()})}undo(){let n=!1;for(let i=0;i<this.contexts.length;i++)this.contexts[i].stx.activeDrawing&&(this.contexts[i].stx.undo(),n=!0);if(n)return;const r=this.undostack.pop();if(r){const{context:i,drawings:a}=r;this.redostack.push({context:i,drawings:i.stx.exportDrawings()}),i.stx.abortDrawings(!0),i.stx.importDrawings(a),i.stx.changeOccurred("vector"),i.stx.draw()}this.setButtonStyle()}}e.UI.addComponentDefinition("cq-undo",t)},hp=E=>{const e=typeof _CIQ<"u"?_CIQ:E.CIQ;class t extends e.UI.DialogContentTag{adoptedCallback(){super.adoptedCallback(),e.UI.flattenInheritance(this,t),this.constructor=t}open(n){this.addDefaultMarkup(),this.querySelector("input").value="",super.open(n)}save(){const n=this.querySelector("input").value;if(!n)return;let r=!1,i;this.updateContext();const a=this.context.stx.exportLayout();(this.context.topNode.multiChartContainer||this.context.topNode).CIQ.UI.Components.filter(o=>o.matches("cq-views")&&o.ownerDocument===this.ownerDocument).forEach(o=>{const c=o.params.viewObj;let l,u=0;for(;u<c.views.length&&(l=c.views[u],n!=e.first(l));u++);u==c.views.length&&(l={},l[n]={},c.views.push(l)),l[n]=a,delete l[n].candleWidth,o.renderMenu(),r||(r=!0,o.params.nameValueStore&&o.params.nameValueStore.set("stx-views",c.views)),i=l[n]}),i&&this.emitCustomEvent({effect:"save",detail:{name:n,view:i}}),this.close()}updateContext(){const{topNode:n}=this.context;let r=n.querySelector("cq-context-wrapper.active cq-context");r||n.multiChartContainer&&(r=n.multiChartContainer.querySelector("cq-context-wrapper.active cq-context")),r&&(this.context=r.CIQ.UI.context)}}t.markup=`
		<div style="text-align:center;margin-top:10px;">
			<label for="cq-view-dialog-input-name"><div>Enter name of view:</div>
				<br>
				<input id="cq-view-dialog-input-name" spellcheck="false" autocomplete="off" autocorrect="off" autocapitalize="none" maxlength="40" placeholder="Name"></input><br>
				<br>
			</label>
			<button class="ciq-btn" stxtap="save()">Save</button>
		</div>
	`,e.UI.addComponentDefinition("cq-view-dialog",t)},dp=E=>{const e=typeof _CIQ<"u"?_CIQ:E.CIQ;class t extends e.UI.ContextTag{constructor(){super(),e.UI.makeShadow(this)}connectedCallback(){!this.isConnected||this.attached||(super.connectedCallback(),this.setupShadow())}adoptedCallback(){super.adoptedCallback(),e.UI.flattenInheritance(this,t),this.constructor=t}setContext(n){this.addDefaultMarkup(),this.config=n.config,this.initialize()}initialize(n){n||(n=this.config);const{nameValueStore:r,menuViewConfig:i}=n;this.params=Object.assign({},i),e.ensureDefaults(this.params,{viewObj:{views:[]},nameValueStore:r&&new r||e.NameValueStore&&new e.NameValueStore});const{params:a}=this;a.nameValueStore&&a.nameValueStore.get("stx-views",(o,c)=>{!o&&c&&(a.viewObj.views=c),a.cb&&a.cb.call(this),this.renderMenu()})}renderMenu(){const n=(a,o)=>c=>{c.stopPropagation(),this.emitCustomEvent({effect:"remove",detail:{value:o}});const{views:l}=this.params.viewObj;l.splice(a,1),this.params.nameValueStore&&this.params.nameValueStore.set("stx-views",l),(this.root!==this?e.UI.shadowComponents:new Map(this.context.topNode.CIQ.UI.Components.map(h=>[h,this.context.topNode]))).forEach((h,d)=>{d.tagName===this.tagName&&h===this.context.topNode&&(d.params.viewObj.views=l.slice(0),d.renderMenu())})},r=(a,o)=>c=>{this.emitCustomEvent({effect:"select",detail:{value:o}});const{loader:l}=this.context;l&&l.show(),setTimeout(()=>{const{stx:h}=this.context,d=()=>{h.changeOccurred("layout"),l&&l.hide()};h.importLayout(this.params.viewObj.views[a][o],{managePeriodicity:!0,preserveTicksAndCandleWidth:!0,cb:d})},10)};this.root.querySelectorAll(".list .item").forEach(a=>a.remove());const i=this.root.querySelector(".list");this.params.viewObj.views.forEach((a,o)=>{const c=e.first(a);if(c=="recent")return;const l=e.UI.makeFromTemplate(i.querySelector("template"))[0],u=l.querySelector("[label]");if(u){u.innerText=c;const d=c.trim().replace(/\s+/g,"-");u.classList.add("view-name-"+d)}const h=l.querySelector(".close");h&&(h.setAttribute("keyboard-selectable-child",""),e.UI.stxtap(h,n(o,c))),this.makeTap(l,r(o,c)),i.appendChild(l)}),this.params.renderCB&&this.params.renderCB(this)}}t.markup=`
		<div class="list" filter-name="views">
			<template>
				<div class="item" keyboard-selectable>
					<span label role="menuitem"></span>
					<div class="icon close ciq-icon ciq-close">
						<div class="ciq-screen-reader" role="button">Remove this view</div>
					</div>
				</div>
			</template>
		</div>
	`,e.UI.addComponentDefinition("cq-views",t)},fp=E=>{const e=typeof _CIQ<"u"?_CIQ:E.CIQ;class t extends e.UI.DialogContentTag{adoptedCallback(){super.adoptedCallback(),e.UI.flattenInheritance(this,t),this.constructor=t}open(n){this.addDefaultMarkup(),super.open(n),n&&(this.opener=n.caller);const{currentVectorParameters:r}=this.context.stx;r.volumeprofile||(r.volumeprofile={});const i=r.volumeProfile,a=this.querySelector('div[fieldname="Price Buckets"] input');a.value=i.priceBuckets,a.changeHandler&&a.removeEventListener("change",a.changeHandler),a.changeHandler=({target:o})=>{const c=parseInt(o.value);if(isNaN(c))return;i.priceBuckets=c;const l=new Event("change",{bubbles:!0,cancelable:!0});this.opener.dispatchEvent(l),this.emitCustomEvent({effect:"change",detail:{field:"priceBuckets",value:c}})},a.addEventListener("change",a.changeHandler)}}t.markup=`
	<cq-scroll cq-no-maximize>
		<div class="ciq-drawing-dialog-setting" fieldname="Price Buckets">
			<div class="ciq-heading">Price Buckets</div>
			<div class="stx-data">
				<input type="number" min="1" step="1">
			</div>
		</div
	</cq-scroll>
	<div class="ciq-dialog-cntrls">
		<div class="ciq-btn" stxtap="close()">Done</div>
	</div>
`,e.UI.addComponentDefinition("cq-volumeprofile-settings-dialog",t)},pp=E=>{const e=typeof _CIQ<"u"?_CIQ:E.CIQ;class t extends e.UI.ContextTag{static get observedAttributes(){return["corrective","decoration","impulse","show-lines","template"]}static templates(){return{"Grand Supercycle":{impulse:["I","II","III","IV","V"],corrective:["a","b","c"],decoration:"enclosed"},Supercycle:{impulse:["I","II","III","IV","V"],corrective:["a","b","c"],decoration:"parentheses"},Cycle:{impulse:["I","II","III","IV","V"],corrective:["a","b","c"],decoration:"none"},Primary:{impulse:["1","2","3","4","5"],corrective:["A","B","C"],decoration:"enclosed"},Intermediate:{impulse:["1","2","3","4","5"],corrective:["A","B","C"],decoration:"parentheses"},Minor:{impulse:["1","2","3","4","5"],corrective:["A","B","C"],decoration:"none"},Minute:{impulse:["i","ii","iii","iv","v"],corrective:["a","b","c"],decoration:"enclosed"},Minuette:{impulse:["i","ii","iii","iv","v"],corrective:["a","b","c"],decoration:"parentheses"},"Sub-Minuette":{impulse:["i","ii","iii","iv","v"],corrective:["a","b","c"],decoration:"none"}}}constructor(){super(),this.templates=t.templates()}connectedCallback(){!this.isConnected||this.attached||(this.template="Grand Supercycle",this.children.length===0&&this.addDefaultMarkup(),this.templateHeader=this.qsa(".ciq-active-template",this,!0)[0],this.impulseHeader=this.qsa(".ciq-active-impulse",this,!0)[0],this.correctiveHeader=this.qsa(".ciq-active-corrective",this,!0)[0],this.decorators={none:this.qsa(".ciq-btn:nth-of-type(1n)",this,!0)[0],parentheses:this.qsa(".ciq-btn:nth-of-type(2n)",this,!0)[0],enclosed:this.qsa(".ciq-btn:nth-of-type(3n)",this,!0)[0]},this.lineToggleCheckbox=this.qsa("span.ciq-checkbox",this,!0)[0],super.connectedCallback())}adoptedCallback(){super.adoptedCallback(),e.UI.flattenInheritance(this,t),this.constructor=t}handlePropertyChange(n,r,i){if(r===i)return;this[n]=i;const a=this.activator?"click":null;if(delete this.activator,this[n]=i,!this.stx)return;let o=this.stx.currentVectorParameters,c=o.waveParameters||{},l;switch(n){case"template":let u=this.templates[i];u&&(l={decoration:u.decoration}),this.update(null,"template",i);break;case"impulse":case"corrective":l={[n]:i&&i.split(",")},this.update(null,n,i);break;case"decoration":l={decoration:i},this.update(null,"decoration",i);break;case"show-lines":l={showLines:i},this.update(null,"showLines",i);break}o.waveParameters=Object.assign(c,l),!(!this.context||n==="template"&&this.customizingTemplate)&&this.emitCustomEvent({action:a,effect:"select",detail:{name:n,value:i===void 0?null:i}})}activate(){const{stx:n}=this;n&&(this.cvp=n.currentVectorParameters,this.cvp.waveParameters||(this.template="Grand Supercycle"),this.update(null,"template",this.template))}setContext(n){this.stx=n.stx}toggleLines(n){this.activator=n;let r=this.lineToggleCheckbox,i=this["show-lines"];this["show-lines"]=!i,i?r.classList.remove("ciq-active"):r.classList.add("ciq-active"),r.setAttribute("aria-checked",(!i).toString())}update(n,r,i){if(r==="template"){let o=this.templates[i];if(o){this.customizingTemplate=!0,this.impulse=o.impulse.join(","),this.impulseHeader.setAttribute("text",o.impulse.join(" ")),this.corrective=o.corrective.join(","),this.correctiveHeader.setAttribute("text",o.corrective.join(" "));for(let l in this.decorators)this.decorators[l].classList.remove("ciq-active"),this.decorators[l].setAttribute("aria-checked","false");let c=o.decoration||"none";this.decorators[c].classList.add("ciq-active"),this.decorators[c].setAttribute("aria-checked","true"),this.decoration=c,this["show-lines"]=!0,this.lineToggleCheckbox.classList.add("ciq-active"),this.lineToggleCheckbox.setAttribute("aria-checked","true"),this.cvp.waveParameters=e.clone(o),this.cvp.waveParameters.showLines=!0,this.activator=n,this.customizingTemplate=!1,this.template=i,this.templateHeader.setAttribute("text",i)}else this.cvp.waveParameters={corrective:this.corrective&&this.corrective.split(","),impulse:this.impulse&&this.impulse.split(","),decoration:this.decoration,showLines:this["show-lines"]}}else{if(this.activator=n,r==="decoration"){for(let o in this.decorators)this.decorators[o].classList[o===i?"add":"remove"]("ciq-active"),this.decorators[o].setAttribute("aria-checked",(o===i).toString());this.decoration=i}else if(r==="impulse"||r==="corrective"){let o=i&&i.split(",");this[r]=i,this[r+"Header"].setAttribute("text",o?o.join(" "):"- - -")}r==="showLines"?(this["show-lines"]=i,this.lineToggleCheckbox.classList[i==="true"?"add":"remove"]("ciq-active"),this.lineToggleCheckbox.setAttribute("aria-checked",i)):this.customizingTemplate||(this.template="Custom",this.templateHeader.setAttribute("text",this.template))}}}t.markup=`
		<div class="ciq-wave-template" cq-section>
			<div class="ciq-heading">WAVE TEMPLATE</div>
			<cq-menu class="ciq-select ciq-active-template" reader="WAVE TEMPLATE" config="wavetemplate" text="WAVE TEMPLATE"></cq-menu>
		</div>
		<div class="ciq-wave-impulse" cq-section>
			<div class="ciq-heading">IMPULSE</div>
			<cq-menu class="ciq-select ciq-active-impulse" reader="IMPULSE" config="waveimpulse" text="IMPULSE"></cq-menu>
		</div>
		<div class="ciq-wave-corrective" cq-section>
			<div class="ciq-heading">CORRECTIVE</div>
			<cq-menu class="ciq-select ciq-active-corrective" reader="CORRECTIVE" config="wavecorrective" text="CORRECTIVE"></cq-menu>
		</div>
		<div role="radiogroup" aria-label="Vertex Options" cq-section>
			<span role="radio" class="ciq-icon-btn ciq-btn" decoration="none" stxtap="update('decoration','none')" cq-section>
				<cq-tooltip>None</cq-tooltip>
			</span>
			<span role="radio" class="ciq-icon-btn ciq-btn" decoration="parentheses" stxtap="update('decoration','parentheses')" cq-section>
				<cq-tooltip>Parentheses</cq-tooltip>
			</span>
			<span role="radio" class="ciq-icon-btn ciq-btn" decoration="enclosed" stxtap="update('decoration','enclosed')" cq-section>
				<cq-tooltip>Enclosed</cq-tooltip>
			</span>
		</div>
		<div class="ciq-heading ciq-show-lines" cq-section>
			<span role="checkbox" stxtap="toggleLines()" class="ciq-checkbox ciq-active" aria-checked="true">
				<div class="ciq-heading">Show Lines:</div>
				<span></span>
			</span>
		</div>
	`,e.UI.addComponentDefinition("cq-wave-parameters",t)},Ap=E=>{const e=typeof _CIQ<"u"?_CIQ:E.CIQ;class t extends e.UI.DialogContentTag{adoptedCallback(){super.adoptedCallback(),e.UI.flattenInheritance(this,t),this.constructor=t}setContext(u){const{stx:h}=u,{currentYAxis:d}=h,f=o(h,d),A=Math.abs(f.right-d.left)<3,p=f.left===d.left+d.width,g=c(d,f,"left"),m=c(d,f,"right"),b=h.currentYAxis.studies.filter(k=>!h.overlays[k].underlay),C=d.renderers.filter(k=>k==="_main_series"?h.chart.symbol:h.chart.seriesRenderers[k].seriesParams.find(({symbol:T})=>T)),F=C.length+b.length>=2;let w="";w+=g||A?this.menuItems.moveLeft:"",w+=m||p?this.menuItems.moveRight:"",w+=g?this.menuItems.mergeLeft:"",w+=m?this.menuItems.mergeRight:"",w+=F?this.menuItems.unmerge:"";const U=d.renderers.find(k=>h.chart.seriesRenderers[k].constructor===e.Renderer.Histogram);this.getAttribute("cq-allow-transform")!=="false"&&!U&&(w+="<hr>",Object.keys(this.transformItems).forEach(k=>{w+=n(k,this.transformItems[k],k===d.transformName)})),this.innerHTML=w,e.UI.BaseComponent.buildReverseBindings(this),this.classList.add("ciq-context-menu"),this.setAttribute("role","menu");const B=this.querySelector("[role=menuitem]");B&&B.focus(),super.setContext(u)}updateYAxis(u,h,d){if(h==="transform"){const f=s(d,this.context.stx);this.querySelectorAll(".ciq-transform").forEach(p=>{p.classList.remove("ciq-active"),p.setAttribute("aria-checked","false")}),f&&(u.node.classList.add("ciq-active"),u.node.setAttribute("aria-checked","true"))}else h==="unmerge"?i(this.context.stx):a(this.context.stx,h,d);this.emitCustomEvent({effect:`${h} ${d}`.trim()}),h!=="transform"&&this.close()}}function s(l,u){const{currentYAxis:h}=u;let{transformName:d}=h;return d===l&&(l=""),u.setComparison(l,u.chart,null,h),u.draw(),h===u.chart.yAxis&&(u.layout.chartScale=l,u.changeOccurred("layout")),l}t.prototype.menuItems={moveLeft:`<div stxtap="updateYAxis('move', 'left')" keyboard-selectable="true" role="menuitem" tabindex="-1">Move Left</div>`,moveRight:`<div stxtap="updateYAxis('move', 'right')" keyboard-selectable="true" role="menuitem" tabindex="-1">Move Right</div>`,mergeLeft:`<div stxtap="updateYAxis('merge', 'left')" keyboard-selectable="true" role="menuitem" tabindex="-1">Merge Left</div>`,mergeRight:`<div stxtap="updateYAxis('merge', 'right')" keyboard-selectable="true" role="menuitem" tabindex="-1">Merge Right</div>`,unmerge:`<div stxtap="updateYAxis('unmerge')" keyboard-selectable="true" role="menuitem" tabindex="-1">Unmerge</div>`},t.prototype.transformItems={netchange:"Net Change",percent:"Percent Change"};function n(l,u,h){return`
		<div stxtap="updateYAxis('transform', '${l}')" keyboard-selectable="true" class="ciq-switch-item ciq-transform ciq-${l} ${h?"ciq-active":""}" role="menuitemcheckbox" aria-checked="${h?"true":"false"}">
			<span class="ciq-switch-label">${u}</span>
			<span class="ciq-switch"></span>
		</div>`}function r(l,u,h,d){return d?l==="merge"?d.left+d.width/2:u==="right"?d.left+d.width:d.left:u==="right"?h.right:h.left}function i(l,u,h){const{currentYAxis:d}=l,f=o(l,d),A=p=>{f.subholder.classList.add("dropzone"),f.subholder.classList.add(d.left>f.left?"right":"left"),l.grabbingScreen=!1,l.highlightedDraggable=p,l.grabStartPanel=f,l.dragPlotOrAxis(d.left-1,f.bottom-f.height/2)};d.renderers.forEach(p=>{p!==l.mainSeriesRenderer.params.name&&A(l.chart.seriesRenderers[p])}),d.studies.forEach(p=>{A(l.layout.studies[p])})}function a(l,u,h){const{currentYAxis:d}=l,f=o(l,d),A=c(d,f,h),p=f.top+(f.bottom-f.top)/2,g=r(u,h,f,A);d.showMenuToggle(!1),l.mousemoveinner(l.left+d.left,l.top+p),l.grabbingScreen=!0,l.highlightedDraggable=d,l.grabStartPanel=f,l.mousemoveinner(l.left+g,l.top+p),l.mouseup({clientX:l.left+g,clientY:l.top+p})}function o(l,u){return Object.values(l.panels).find(h=>h.yaxisLHS.concat(h.yaxisRHS).some(d=>l.yaxisMatches(u,d)))}function c(l,u,h){const d=l.left,f=l.left+l.width,A=l.top;return u.yaxisLHS.concat(u.yaxisRHS).filter(p=>p!==l).find(p=>{const g=p.left,m=g+p.width;return A!==p.top||p.width<2?!1:h==="left"?d===m:f===g})}e.UI.addComponentDefinition("cq-yaxis-context",t)},gp=E=>{const e=typeof _CIQ<"u"?_CIQ:E.CIQ,t=e.UI._webcomponents.list["cq-dialog"];if(!t)console.error("colorPicker component requires first activating dialog component.");else{class s extends t.classDefinition{static get observedAttributes(){return["cq-active","cq-colors"]}constructor(){super(),this.params={colorMap:[]},this.items=[]}connectedCallback(){!this.isConnected||this.attached||(this.setAttribute("cq-close-button","false"),super.connectedCallback(),this.build())}adoptedCallback(){super.adoptedCallback(),e.UI.flattenInheritance(this,s),this.constructor=s}handlePropertyChange(r,i,a){if(a!==i)switch(this[r]=a,r){case"cq-active":this.reposition();return;case"cq-colors":this.build();return}}build(){this.addDefaultMarkup();let r=this.getAttribute("cq-colors");if(r){r=r.split(",");const i=Math.ceil(Math.sqrt(r.length));this.params.colorMap=[];let a=0,o=[];r.forEach(c=>{a>=i&&(a=0,this.params.colorMap.push(o),o=[]),o.push(c),a++}),this.params.colorMap.push(o)}else this.params.colorMap=this.constructor.defaultColors;this.cqOverrides=this.querySelector("[cq-overrides]"),this.cqOverrides&&(this.template=this.cqOverrides.querySelector("template")),this.initialize()}display(r){const{node:i}=r;this.callingNode=i;const a=i.getBoundingClientRect();this.style.top=this.style.left="0px";const o=this.parentNode.getBoundingClientRect(),c=e.elementDimensions(i,{border:!0});let l=a.left-o.left+c.width+10,u=a.top-o.top+15;this.cqOverrides&&[...this.cqOverrides.children].forEach(b=>{b.matches("template")||b.remove()});const h=r.context||this.context||e.UI.getMyContext(this);if(this.uiManager=h.uiManager||e.UI.getUIManager(this),r.overrides&&this.template){let b;r.overrides.forEach(C=>{b=e.UI.makeFromTemplate(this.template,!0)[0],b.innerText=h.stx?h.stx.translateIf(C):C,e.UI.stxtap(b,()=>this.pickColor(C=="none"?"transparent":C))})}const d=e.elementDimensions(this,{border:!0}),f=this.ownerDocument||document,A=e.guaranteedSize(f).width,p=d.width;l+p>A&&(l=A-p-20);const g=e.guaranteedSize(f).height,m=d.height;u+m>g&&(u=g-m-30),this.style.left=l+"px",this.style.top=u+"px",this.hasAttribute("aria-label")||this.setAttribute("aria-label","Color Picker"),this.classList.contains("stxMenuActive")?h.e&&h.e.stopPropagation():this.open({context:h,caller:i}),this.items=this.querySelectorAll("[cq-colorgrid] span, .ciq-btn"),setTimeout(()=>this.colors.focus())}reposition(){const r=e.elementDimensions(this,{border:!0}),i=this.ownerDocument||document,a=e.guaranteedSize(i).width,o=r.width;e.stripPX(this.style.left)+o>a&&(this.style.left=a-o-20+"px");const c=e.guaranteedSize(i).height,l=r.height;e.stripPX(this.style.top)+l>c&&(this.style.top=c-l-30+"px")}initialize(){this.colors=this.querySelector("[cq-colorgrid]"),this.colors||(this.colors=this),[...this.colors.children].forEach(r=>r.remove()),this.params.colorMap.forEach(r=>{const i=document.createElement("ul");this.colors.appendChild(i),r.forEach(a=>{const o=document.createElement("li");i.appendChild(o);const c=document.createElement("span");o.appendChild(c),c.style.backgroundColor=a,e.UI.stxtap(c,()=>this.pickColor(a)),c.setAttribute("role","option"),c.setAttribute("tabindex","0"),c.setAttribute("aria-label",a)})}),this.rowLength=this.params.colorMap[0].length||0}keyStroke(r,i,a){if(r&&r.tabActiveModals[0]!==this)return;const{items:o}=this;switch(i){case"Tab":this.focusNextItem(o,!!a.shiftKey);break;case"ArrowRight":this.focusNextItem(o);break;case"ArrowLeft":this.focusNextItem(o,!0);break;case"ArrowDown":this.focusNextRow(o);break;case"ArrowUp":this.focusNextRow(o,{reverse:!0});break;case"Enter":const c=this.findFocused(o);return this.clickItem(c[0],a),!0}}focusNextRow(r,i){const{reverse:a}=i||{},o=this.findFocused(r);let c=-1;if(o.length)for(c=0;c<r.length&&r[c]!==o[0];c++);if(a)do if(c-=this.rowLength,c<0)break;while(!e.trulyVisible(r[c]));else do if(c+=this.rowLength,c>=r.length){c=r.length-1;break}while(!e.trulyVisible(r[c]));return c>-1&&c<r.length&&r[c]!==o[0]?(this.removeFocused(r),this.focusItem(r[c]),!0):!1}pickColor(r){const i=this.context.topNode.querySelector(".cq-keyboard-selected-highlight"),a=i&&!i.classList.contains("disabled");this.callback&&this.callback(r),this.emitCustomEvent({effect:"select",detail:{value:r}}),this.close();const o=e.getFromNS(document,"body.keystrokeHub.keyControlElement");o&&a?o.focusItem(this.caller):this.caller.focus()}resize(){}setColors(r){this.params.colorMap=r,this.initialize()}}s.defaultColors=[["#ffffff","#e1e1e1","#cccccc","#b7b7b7","#a0a0a5","#898989","#707070","#626262","#555555","#464646","#363636","#262626","#1d1d1d","#000000"],["#f4977c","#f7ac84","#fbc58d","#fff69e","#c4de9e","#85c99e","#7fcdc7","#75d0f4","#81a8d7","#8594c8","#8983bc","#a187bd","#bb8dbe","#f29bc1"],["#ef6c53","#f38d5b","#f8ae63","#fff371","#acd277","#43b77a","#2ebbb3","#00bff0","#4a8dc8","#5875b7","#625da6","#8561a7","#a665a7","#ee6fa9"],["#ea1d2c","#ee652e","#f4932f","#fff126","#8ec648","#00a553","#00a99c","#00afed","#0073ba","#0056a4","#323390","#66308f","#912a8e","#e9088c"],["#9b0b16","#9e4117","#a16118","#c6b920","#5a852d","#007238","#00746a","#0077a1","#004c7f","#003570","#1d1762","#441261","#62095f","#9c005d"],["#770001","#792e03","#7b4906","#817a0b","#41661e","#005827","#005951","#003b5c","#001d40","#000e35","#04002c","#19002b","#2c002a","#580028"]],s.markup=`
		<div cq-colorgrid aria-label="Color Choices" role="region" tabindex="-1"></div>
		<div cq-overrides>
			<template>
				<div class="ciq-btn" role="button"></div>
			</template>
		</div>
	`,e.UI.addComponentDefinition("cq-color-picker",s)}},mp=E=>{const e=typeof _CIQ<"u"?_CIQ:E.CIQ,t=e.UI._webcomponents.list["cq-palette"];if(!t)console.error("drawingPalette component requires first activating palette component.");else if(!e.Drawing)console.error("drawingPalette component requires first activating drawing feature.");else{class s extends t.classDefinition{static get observedAttributes(){return["docked","orientation","view","active-tool"]}constructor(){super(),this.mode="",this.callbacks=[],this.toolSettings={favList:[],toolGroup:""},this.toolGroups=[],this.groupedTools={},this.toolShortcuts={}}adoptedCallback(){super.adoptedCallback(),e.UI.flattenInheritance(this,s),this.constructor=s}disconnectedCallback(){this.doNotDisconnect||(this.removeClaim(this),e.UI.unobserveProperty("toolGroup",this.toolSettings,this.toolSettingsListener),super.disconnectedCallback())}handlePropertyChange(r,i,a){if(a!==i){switch(r){case"view":this.changeView(null,a);break;case"active-tool":this.tool(null,a);break}super.handlePropertyChange(r,i,a)}}setupKeyboardActivation(r){if(this.hasAttribute("cq-keystroke-claim")){let i=this.context.topNode.querySelectorAll("*[cq-tool][cq-tool-shortcut]");for(let a=0;a<i.length;a++){let o=i[a].getAttribute("cq-tool-shortcut");if(/^[A-Za-z0-9]{1}$/g.test(o)){this.toolShortcuts[o.toUpperCase()]={toolName:i[a].getAttribute("cq-tool"),node:i[a]};let c=i[a].querySelector("[label]"),l=document.createElement("span");l.classList.add("shortcut"),l.innerHTML=" (Alt+"+o.toUpperCase()+")",c.appendChild(l)}else console.warn("cq-tool-shortcut attribute must be a single letter: "+o+" ignored.")}this.addClaim(this)}}keyStroke(r,i,a){if(a.altKey&&!a.ctrlKey&&!a.shiftKey){i=a.code.replace(/^(Key|Digit|Numpad)/,"");let o=this.toolShortcuts[i.toUpperCase()];if(o){const c=this.channels?this.channels.drawing:"channel.drawing";this.channelWrite(c,!0),this.tool({node:o.node},o.toolName)}}else if(a.key==="Escape"){let o=this.context.topNode.querySelector('*[cq-tool="notool"]');o&&this.noTool({node:o})}}handleMessage(r,i){switch(r){case"changeToolSettings":this.activateTool(i.activator,i.toolName);break;case"toggleDrawingPalette":this.togglePalette();break;case"hideDrawingPalette":this.hidePalette();break;case"dockWillResize":this.hidePalette();break;case"dockDidResize":this.resetScroller();break;case"context":i==="stop"&&(this.toolContextMenu.style.display="none")}}loadToolSettings(){if(this.store){let r=this;this.store.get("CIQ.DrawingToolSettings",function(i,a){!i&&a&&a.favList&&(r.toolSettings=Object.assign(r.toolSettings,a))})}}storeToolSettings(){this.store&&this.store.set("CIQ.DrawingToolSettings",JSON.stringify(this.toolSettings))}setContext(r){const{config:i,stx:a}=r;if(i){const{channels:o={},drawingToolGrouping:c=[],nameValueStore:l}=i,{groupedTools:u}=this;i.drawingTools&&(i.drawingTools=i.drawingTools.filter(({tool:f})=>e.Drawing[f])).forEach(f=>{let A=f.group;u[A]=u[A]?[...u[A],f]:[f]}),this.toolGroups=c||[],this.store=l&&new l||e.NameValueStore&&new e.NameValueStore,this.addDefaultMarkup(this,this.getMarkup(i));const h=i.drawingToolGrouping.filter(f=>["All","Favorites"].includes(f)||i.drawingTools.some(({group:A})=>A===f.toLowerCase())).map(f=>({type:"item",label:f,tap:"setToolGroup",value:f.toLowerCase()}));r.config.menus.toolgrouping.content=h;const d=this.querySelector(".ciq-tool-group-selection");d&&(d.setAttribute("config",""),d.setAttribute("config","toolgrouping")),this.channels={drawing:o.drawing||"channel.drawing"}}this.init(),this.loadToolSettings(),this.params={toolGroupSelection:this.node.find("*[cq-tool-group-selection]")},this.setFavorites(),this.setMode("grid"),this.setEvenOdd(),this.toolContextMenu=this.createContextMenu(),this.addEventListener("contextmenu",(function(o){const c=o.target.hasAttribute("cq-tool-group")?o.target:e.climbUpDomTree(o.target,"[cq-tool-group]")[0];if(o.preventDefault(),c){let l=c.getBoundingClientRect(),u=this.getBoundingClientRect();this.showToolContextMenu(c.getAttribute("cq-tool"),o.clientY+l.height-u.top,o.clientX-u.left)}}).bind(this)),this.setupKeyboardActivation(),this.pairUndoRedo(),this.toolSettings.toolGroup&&setTimeout(()=>{const o=this.querySelector("cq-menu.ciq-tool-group-selection");if(o){let c=o.qsa('li.item[feature="'+this.toolSettings.toolGroup+'"]',o,!0);window.testBtn=c,c[0]&&c[0].click()}}),this.channels&&(this.channelSubscribe(this.channels.drawing||"channel.drawing",o=>{const c=a.currentVectorParameters.vectorType;if(o)this.resetScroller(),c||a.changeVectorType(this.priorVectorType||""),this.setActiveTool(c||"notool"),setTimeout(()=>{this.tabIndex=-1,this.focus()},10);else{const{multiChartContainer:l}=this.container.topNode;l&&e.getFromNS(this,"context.config.soloActive.onDraw")?Array.from(l.querySelectorAll("cq-drawing-palette")).forEach(u=>{u.priorVectorType=c}):this.priorVectorType=c,a.changeVectorType(null)}}),this.channelSubscribe(this.channels.breakpoint||"channel.breakpoint",o=>{o==="break-sm"&&this.setMode("list")}))}pairUndoRedo(){const r=this.qs("cq-redo",this),i=this.qs("cq-undo",this);r.pairUp(i)}changeView(r,i){if(this.context){this.setMode(i);for(let a=0;a<this.callbacks.length;a++)this.callbacks[a].call(this,this.mode)}}createContextMenu(){let r=document.createElement("div");r.className="menu-item",r.innerHTML="Add/Remove Favorite",r.addEventListener("mousedown",(function(a){a.stopPropagation(),a.button<2&&(this.toggleFavorite(a.currentTarget.parentElement.getAttribute("context-tool")),this.paletteDock.stopContext(this))}).bind(this)),r.addEventListener("pointerdown",a=>a.stopPropagation());let i=document.createElement("div");return i.appendChild(r),i.className="tool-context-menu",this.node.append(i),i}registerCallback(r){this.callbacks.push(r)}resetScroller(){const r=this.querySelector(".tool-group cq-scroll");return r?(this.setEvenOdd(),r.refresh(),!0):!1}setActiveTool(r){const i=this.querySelector(`cq-item[cq-tool=${r}]`);i&&this.tool({node:i})}setActiveButton(r){const i=this.node.find(".ciq-tool.active");if(i&&(i.removeClass("active"),i.removeAttr("aria-checked"),i.removeAttr("aria-current")),r){r.classList.add("active");const a=r.getAttribute("role")==="radio"?"aria-checked":"aria-current";r.setAttribute(a,"true"),r.setAttribute("aria-checked","true"),r.setAttribute("aria-current","true")}e.trulyVisible(this.ownerDocument.querySelector(".ciq-mobile-palette-toggle"))||this.togglePalette()}setMode(r){r=r==="list"?r:"grid",this.mode=r,this.classList.remove("list","grid"),this.classList.add(this.mode),this.setAttribute("view",this.mode),this.querySelectorAll("[cq-view]").forEach(i=>i.setAttribute("aria-checked","false")),this.querySelector(`[cq-view=${r}]`).setAttribute("aria-checked","true"),this.querySelectorAll(".fav-marker").forEach(i=>{const a=i.parentElement.querySelector("[id]");i.setAttribute("role",r==="list"?"button":"none"),i.parentElement.setAttribute("role",r==="list"?"group":"radio"),a&&(a.setAttribute("role",r==="list"?"radio":"none"),i.parentElement.setAttribute("aria-labelledby",r==="list"?a.id:""))}),this.sortToolButtons(),this.resetScroller(),this.paletteDock.handleResize&&this.paletteDock.handleResize({resizeChart:!0}),this.emitCustomEvent({effect:"view",detail:{view:r}})}setEvenOdd(){const r=this.querySelectorAll(".tool-group cq-scroll .drawing-tools-group");r.length&&r.forEach(i=>{const a=i.querySelectorAll("cq-item");let o=!1;for(let c=0;c<a.length;c++)e.trulyVisible(a[c])&&(a[c].classList[o?"add":"remove"]("odd"),o=!o)})}setFavorites(r=!0){const i=this.querySelectorAll(".tool-group [cq-tool]");for(let o=0;o<i.length;o++){const c=i[o];let l=c.querySelector(".fav-marker");l===null&&(l=document.createElement("div"),l.className="fav-marker",l.setAttribute("aria-label","Favorite"),l.addEventListener("click",this.handleFavoriteClick.bind(this)),l.addEventListener("touchstart",this.handleFavoriteClick.bind(this),{capture:!0,passive:!1}),l.addEventListener("pointerdown",u=>u.stopPropagation()),c.appendChild(l)),c.getAttribute("cq-tool-group").indexOf("favorite")>=0&&(c.setAttribute("cq-tool-group",c.getAttribute("cq-tool-group").replace("favorite","")),l.removeAttribute("aria-pressed")),this.toolSettings.favList.indexOf(c.getAttribute("cq-tool"))>=0&&(c.setAttribute("cq-tool-group",c.getAttribute("cq-tool-group")+" favorite"),l.setAttribute("aria-pressed","true"))}this.sortToolButtons();const{multiChartContainer:a}=this.context.topNode;r&&a&&a.getCharts().forEach(o=>{const c=o.uiContext.topNode;if(!c.closest("cq-context-wrapper")||c===this.context.topNode)return;const u=c.querySelector("cq-drawing-palette");setTimeout(()=>{u.loadToolSettings(),u.setFavorites(!1)})})}sortToolButtons(){const r=this.querySelector(".tool-group cq-scroll"),i=r&&r.querySelector(".ps__rail-x, .ps__rail-y"),{groupedTools:a,toolGroups:o,toolSettings:c}=this,{favList:l}=c,u=this.classList.contains("grid")?"grid":"list",h=p=>{i?r.insertBefore(p,i):r.appendChild(p)},d=(p,g)=>{const m=document.createElement("div");return m.setAttribute("class",`drawing-tools-group ${g}`),m.setAttribute("role","group"),m.setAttribute("aria-labelledby",`drawing_tools_group_${g}`),p.forEach(b=>{const C=b.tool||b;if(g!=="favorites"&&l.includes(C))return;const F=this.querySelector(".tool-group [cq-tool="+C+"]");F&&m.appendChild(F)}),m.insertAdjacentHTML("beforeend",`<cq-separator><span hidden id="drawing_tools_group_${g}">${e.capitalize(g)} tools</span></cq-separator>`),m},f=(p,g)=>{const m=this.querySelector(".tool-group [cq-tool="+p.tool+"]"),b=m.getAttribute("cq-tool-group").includes("favorite");m&&(g?b:!b)&&h(m)},A=()=>{r.querySelectorAll("div.drawing-tools-group").forEach(p=>{p.children.length<=1&&p.remove()})};if(u==="grid"){l.length&&h(d(l,"favorites")),o.forEach(p=>{const g=p.toLowerCase(),m=a[g];if(m){const b=d(m,g);h(b)}});for(const p in a)if(!o.includes(e.capitalize(p))){const g=d(a[p],p);h(g)}}if(u==="list"){for(let p of this.context.config.drawingTools)f(p,!0);for(let p of this.context.config.drawingTools)f(p,!1)}A()}handleFavoriteClick(r){r.stopPropagation(),r.preventDefault(),this.toggleFavorite(r.target.parentElement.getAttribute("cq-tool")),this.hidePalette()}addFavorite(r){this.toolSettings.favList.indexOf(r)<0&&(this.toolSettings.favList.push(r),this.storeToolSettings(),this.setFavorites())}showToolContextMenu(r,i,a){this.toolContextMenu.style.display="block",this.toolContextMenu.style.top=i+"px",this.toolContextMenu.style.left=a+"px",this.toolContextMenu.setAttribute("context-tool",r),this.paletteDock.startContext(this)}toggleFavorite(r){let i=this.toolSettings.favList.indexOf(r);i>=0?this.toolSettings.favList.splice(i,1):this.toolSettings.favList.push(r),this.storeToolSettings(),this.setFavorites(),this.setEvenOdd()}setToolGroup(r,i){this.toolSettings.toolGroup=i,this.querySelector(".tool-group").setAttribute("tool-group-filter",this.toolSettings.toolGroup),this.querySelector(".tool-group cq-scroll").top(),this.setEvenOdd();for(let a=0;a<this.callbacks.length;a++)this.callbacks[a].call(this,this.mode);this.showPalette(),this.storeToolSettings()}bindToolGroups(r){this.toolSettingsListener=i=>{e.makeTranslatableElement(r,this.context.stx,e.capitalize(i.value||"all"))},e.UI.observeProperty("toolGroup",this.toolSettings,this.toolSettingsListener)}togglePalette(){this.classList.toggle("palette-hide")}hidePalette(){this.classList.add("palette-hide")}showPalette(){this.classList.remove("palette-hide")}activateTool(r,i){let a=null;(!r||!r.node)&&i?a=this.querySelector("[cq-tool="+i+"]"):a=r.node,this.setActiveButton(a),this.setAttribute("active-tool",i),this.lastToolChangeEvent!==i&&(this.lastToolChangeEvent=i,this.emitCustomEvent({effect:"select",detail:{toolName:i,activator:a}}));let o=[this.context.stx];return o[0].uiContext.topNode.getCharts&&(o=o[0].uiContext.topNode.getCharts()),o.forEach(c=>{c.clearMeasure(),c.changeVectorType(i=="notool"?"":i),i==="notool"?c.container.classList.remove("stx-crosshair-cursor-on"):c.container.classList.add("stx-crosshair-cursor-on")}),a}noTool(r){this.tool(r,"notool")}tool(r,i){if(!this.context)return;const{stx:a}=this.context;if(!i&&r&&(i=r.node.getAttribute("cq-tool")),!i||a.currentVectorParameters.vectorType==i)return;let o=this.activateTool(r,i);r||(r={node:o});let c=r.node.querySelector("[label]").innerHTML;if(this.sendMessage&&this.sendMessage("changeTool",{activator:r,toolName:i,toolLabel:c}),i!=="notool"&&a.chart.hideDrawings){const l=a.uiContext.topNode.querySelector('cq-toggle[member="chart.hideDrawings"]');l?l.dispatchEvent(new Event("stxtap")):a.chart.hideDrawings=!1,a.dispatch("notification","drawingsRevealed")}}clearDrawings(){this.sendMessage&&this.sendMessage("clearDrawings")}restoreDefaultConfig(r,i){this.sendMessage&&this.sendMessage("restoreDefaultConfig",{activator:r,all:i})}getMarkup(r){const i=r.getMenu("drawingTools",!0).join("");return this.constructor.markup.replace("{{tools}}",i)}}s.itemInterior=(n,r,i)=>`
			<span>
				<span class="icon ${r||""}"></span><span label>${n}</span>
				${i?`<em class="ciq-screen-reader help-instr">(Help available, press question mark key)</em>
					       <cq-help help-id="${i}" aria-hidden="true"></cq-help>`:""}
			</span>
		`,s.markup=`
	<div role="group" aria-label="Drawing Tool Palette" class="palette-container">
		<div class="drag-strip" aria=hidden="true"></div>
			<div class="mini-widget-group">
					<span role="radiogroup" aria-label="Palette Type View">
						<cq-item role="radio" tabindex="-1" class="ciq-mini-widget" cq-view="list" stxtap="changeView('list')">
							${s.itemInterior("List View",null,"drawing_palette_list_view")}
						</cq-item>
						<cq-item role="radio" tabindex="-1" class="ciq-mini-widget" cq-view="grid" stxtap="changeView('grid')">
							${s.itemInterior("Grid View",null,"drawing_palette_grid_view")}
						</cq-item>
					</span>
					<cq-item role="button" tabindex="-1" class="ciq-mini-widget" cq-view="detach" stxtap="detach()">
						${s.itemInterior("Detach Palette",null,"drawing_palette_detach")}
					</cq-item>
					<cq-item role="button" tabindex="-1" class="ciq-mini-widget" cq-view="attach" stxtap="dock()">
						${s.itemInterior("Dock Palette",null,"drawing_palette_attach")}
					</cq-item>
			</div>
			<cq-separator></cq-separator>
			<div class="primary-tool-group">
				<cq-item role="button" tabindex="-1" class="ciq-tool active" cq-tool="notool" stxtap="tool()">
					${s.itemInterior("No Tool","pointer","drawing_palette_notool")}
				</cq-item>
				<cq-item role="button" tabindex="-1" class="ciq-tool" cq-tool="measure" stxtap="tool()">
					${s.itemInterior("Measure","measure","drawing_palette_measure")}
				</cq-item>
				<cq-undo role="button" tabindex="-1" class="ciq-tool">
					${s.itemInterior("Undo","undo","drawing_palette_undo")}
				</cq-undo>
				<cq-redo role="button" tabindex="-1" class="ciq-tool">
					${s.itemInterior("Redo","redo","drawing_palette_redo")}
				</cq-redo>
				<cq-menu
					class="ciq-select
					ciq-tool-group-selection"
					config="toolgrouping"
					reader="Tool Groups"
					text="All"
					help-id="drawing_palette_tool_categories"
					binding="bindToolGroups()"
				></cq-menu>
			</div>
			<cq-separator></cq-separator>
			<div class="tool-group" tool-group-filter="all">
				<cq-scroll cq-no-resize role="radiogroup" aria-label="Tools">
					{{tools}}
				</cq-scroll>
				<cq-separator></cq-separator>
				<div class="mini-widget-group mini-widget-foot">
					<cq-item tabindex="-1" class="ciq-mini-widget">
						<cq-toggle
							class="ciq-magnet bottom"
							member="preferences.magnet"
							toggles="true,75,false"
							toggle-classes="active strong,active,"
							multichart-distribute="true"
							reader="Magnet"
							help-id="drawing_palette_magnet"
						></cq-toggle>
						<span class="icon magnet"></span><span label aria-hidden="true">Magnet</span>
					</cq-item>
					<cq-item role="button" tabindex="-1" class="ciq-mini-widget ciq-hide-drawings">
						<cq-toggle
							class="ciq-hide bottom"
							member="chart.hideDrawings"
							toggles="true,false"
							toggle-classes="active,"
							multichart-distribute="true"
							reader="Hide"
							help-id="drawing_palette_hide"
						></cq-toggle>
						<span class="icon hide"></span><span label aria-hidden="true">Hide All Drawings (Shift+Alt+H)</span>
					</cq-item>
					<cq-item role="button" tabindex="-1" class="ciq-mini-widget" stxtap="clearDrawings()">
						${s.itemInterior("Clear All Drawings","clear","drawing_palette_clear")}
					</cq-item>
					<cq-item role="button" tabindex="-1" class="ciq-mini-widget" stxtap="restoreDefaultConfig(true)">
						${s.itemInterior("Restore Default Parameters","restore","drawing_palette_restore")}
					</cq-item>
				</div>
			</div>
		<div class="resize-strip"></div>
	</div>
	`,e.UI.addComponentDefinition("cq-drawing-palette",s)}},yp=E=>{const e=typeof _CIQ<"u"?_CIQ:E.CIQ,t=e.UI._webcomponents.list["cq-palette"];if(!t)console.error("drawingSettings component requires first activating palette component.");else if(!e.Drawing)console.error("drawingSettings component requires first activating drawing feature.");else{class s extends t.classDefinition{static get observedAttributes(){return["docked","hide","active-tool","axis-label","fill-color","font-bold","font-family","font-italic","font-size","line-color","line-pattern","line-width","orientation","show-callout","span-panels"]}constructor(){super()}connectedCallback(){!this.isConnected||this.attached||(super.connectedCallback(),this.addEventListener("stxtap",r=>r.stopPropagation()))}adoptedCallback(){super.adoptedCallback(),e.UI.flattenInheritance(this,s),this.constructor=s}setContext(r){this.addDefaultMarkup(),this.init(),this.params={lineSelection:this.querySelector(".ciq-line-style"),fontSizeSelection:this.querySelector(".ciq-font-size"),fontFamilySelection:this.querySelector(".ciq-font-family"),fontStyleToggle:this.querySelector("cq-annotation-italic"),fontWeightToggle:this.querySelector("cq-annotation-bold"),fontOptions:this.querySelector("cq-annotation"),axisLabelToggle:this.querySelector("cq-axis-label .ciq-checkbox"),spanPanelsToggle:this.querySelector("cq-span-panels .ciq-checkbox"),showCalloutToggle:this.querySelector("cq-show-callout .ciq-checkbox"),fillColor:this.querySelector("cq-fill-color:not(cq-cvp-controller)"),lineColor:this.querySelector("cq-line-color:not(cq-cvp-controller)"),cvpControllers:this.querySelectorAll("cq-cvp-controller"),waveParameters:this.querySelector("cq-wave-parameters")},this.params.cvpControllers.forEach(a=>a.toolbar=this),this.sync(),this.dirty(!1);const i=this;e.UI.contextsForEach(function(){this.stx.setDrawingContainer&&this.stx.setDrawingContainer(i)}),r.stx.addEventListener("theme",()=>{const a=this.querySelector("*[cq-toolbar-dirty].ciq-active");this.sync(),a||this.dirty(!1)})}handlePropertyChange(r,i,a){if(a===i)return;const o=this.activator?"click":null;switch(delete this.activator,r){case"active-tool":this.tool(null,a);break;case"line-color":this.setColor(a,"line");break;case"fill-color":this.setColor(a,"fill");break;case"font-family":this.setFontFamily(null,a);break;case"font-size":this.setFontSize(null,a);break;case"font-italic":this.setFontStyle("italic",a==="true");break;case"font-bold":this.setFontStyle("bold",a==="true");break;case"line-width":this.setLine(null,a,null);break;case"line-pattern":this.setLine(null,null,a);break;case"axis-label":case"span-panels":case"show-callout":this.toggleCheckbox(null,r,a==="true");break}super.handlePropertyChange(r,i,a),this.context&&(this.syncing||this.emitCustomEvent({action:o,effect:"select",detail:{name:r,value:a}}))}handleMessage(r,i){switch(r){case"changeTool":this.setActiveToolLabel(i.toolLabel),this.toolSettings(i.activator,i.toolName);break;case"clearDrawings":this.clearDrawings();break;case"restoreDefaultConfig":this.restoreDefaultConfig(i.activator,i.all)}}clearDrawings(){const r=this.context.topNode.querySelectorAll("cq-context-wrapper");r.length?r.forEach(i=>{i.classList.contains("active")&&i.querySelector("cq-context").context.stx.clearDrawings(null,!1)}):this.context.stx.clearDrawings(null,!1)}crosshairs(r){const{stx:i}=this.context;i.changeVectorType(null),i.layout.crosshair=!0,i.doDisplayCrosshairs(),i.findHighlights(!1,!0),i.changeOccurred("layout"),i.draw(),i.updateChartAccessories(),this.querySelectorAll("*[cq-section]").forEach(a=>a.classList.remove("ciq-active")),this.emit()}tool(r,i){this.context&&(this.toolSettings(r,i),this.setActiveToolLabel(i),this.sendMessage("changeToolSettings",{activator:r,toolName:i}))}toolSettings(r,i){if(!this.context)return;const{stx:a}=this.context;this.querySelectorAll("*[cq-section]").forEach(u=>u.classList.remove("ciq-active"));let o=!this.querySelector("*[cq-toolbar-dirty].ciq-active");const c=e.Drawing.getDrawingParameters(a,i);let l;if(c){l=this.querySelector("*[cq-toolbar-action='save']"),l&&l.classList.add("ciq-active");const u=a.preferences.drawings;u&&u[i]&&(l=this.querySelector("*[cq-toolbar-action='restore']"),l&&l.classList.add("ciq-active"),o=!0),i==="fibtimezone"&&delete c.parameters;const h=this.params.lineSelection.querySelector(".fills-only");h&&h.setAttribute("hidden","");let d=this.defaultElements(c,i);for(let f=0;f<d.length;f++)this.querySelectorAll(`${d[f]}[cq-section], ${d[f]} [cq-section]`).forEach(p=>p.classList.add("ciq-active")),h&&d[f]=="cq-fill-color"&&h.removeAttribute("hidden");if(d=e.Drawing[i].prototype.$controls,d)for(let f=0;f<d.length;f++)this.querySelectorAll(`${d[f]}[cq-section]`).forEach(p=>p.classList.add("ciq-active"));i==="trendline"&&!a.currentVectorParameters.showCallout&&["fontOptions","fillColor"].forEach(f=>this.params[f].classList.remove("ciq-active"))}i==="notool"?(a.changeVectorType(""),this.hide="true"):(this.hide="false",this.restoreDocked&&(this.dock(),delete this.restoreDocked),setTimeout(()=>{const u=this.querySelector(".palette-container");u.tabIndex=-1,u.focus()},10)),this.paletteDock.handleResize(),this["active-tool"]=i,this.sync(),o&&this.dirty(!1)}defaultElements(r,i){const a=[];for(let o in r)if(o=="color")a.push("cq-line-color");else if(o=="fillColor")a.push("cq-fill-color");else if(o=="pattern"||o=="lineWidth")a.push("cq-line-style");else if(o=="axisLabel")a.push("cq-axis-label");else if(o=="spanPanels")a.push("cq-span-panels");else if(o=="showCallout")a.push("cq-show-callout");else if(o=="font")a.push("cq-annotation");else if(o=="parameters")switch(i){case"volumeprofile":a.push("cq-clickable[cq-volumeprofile-settings]");break;case"measurementline":a.push("cq-clickable[cq-measurementline-settings]");break;default:a.push("cq-clickable[cq-fib-settings]")}return a}dirty(r=!0){this.querySelector("*[cq-toolbar-dirty]").classList.toggle("ciq-active",r)}emit(){const r=new Event("change",{bubbles:!0,cancelable:!0});this.dirty(),this.dispatchEvent(r)}getColor(r,i){if(i!=="fill"&&i!=="line")return;const{node:a}=r,o=["color-auto","color-transparent"],c=this.context.stx.currentVectorParameters[i==="line"?"currentColor":"fillColor"];if(this[i+"-color"]=c,o.forEach(u=>a.classList.remove(u)),o.includes("color-"+c))a.removeAttribute("style"),a.classList.add("color-"+c);else{a.style.background=c;const u=e.getBackgroundColor(this.parentNode);if(!c||Math.abs(e.hsl(u)[2]-e.hsl(c)[2])<.2){const h=e.chooseForegroundColor(u);a.style.border="solid "+h+" 1px"}else a.style.border=""}const l=a.querySelector("[label]");l&&(l.innerText=c)}pickColor(r,i){if(i!=="fill"&&i!=="line")return;const{node:a}=r,o=this.uiManager.getColorPicker(this);o.callback=l=>{this.activator=r,this.setColor(l,i),this.emit()};let c=a.getAttribute("cq-overrides");c&&(c=c.split(",")),o.display({node:a,overrides:c,context:this.context})}setColor(r,i){i!=="fill"&&i!=="line"||this.context&&(this.context.stx.currentVectorParameters[i==="line"?"currentColor":"fillColor"]=r,this.getColor({node:this.querySelector("cq-"+i+"-color")},i),this.emit())}restoreDefaultConfig(r,i){const{stx:a}=this.context;e.Drawing.restoreDefaultConfig(a,a.currentVectorParameters.vectorType,i);const o=this.querySelector("*[cq-toolbar-action='restore']");o&&o.classList.remove("ciq-active"),this.sync(),this.dirty(!1)}saveConfig(){const{stx:r}=this.context;e.Drawing.saveConfig(r,r.currentVectorParameters.vectorType);const i=this.querySelector("*[cq-toolbar-action='restore']");i&&i.classList.add("ciq-active"),this.sync(),this.dirty(!1)}setFibs(r,i){const a=this.context.stx.currentVectorParameters.fibonacci;if(a){for(let o=0;o<a.fibs.length;o++)a.fibs[o].parameters.lineWidth=r,a.fibs[o].parameters.pattern=i;a.timezone.parameters.lineWidth=r,a.timezone.parameters.pattern=i}}setFontFamily(r,i){if(!this.context)return;this.activator=r;const{stx:a}=this.context;a.currentVectorParameters.annotation&&(i=="Default"?a.currentVectorParameters.annotation.font.family=null:a.currentVectorParameters.annotation.font.family=i),this["font-family"]=i,this.params.fontFamilySelection.setAttribute("text",i),this.emit()}setFontSize(r,i){if(!this.context)return;this.activator=r;const{stx:a}=this.context;a.currentVectorParameters.annotation&&(a.currentVectorParameters.annotation.font.size=i),this["font-size"]=i,this.params.fontSizeSelection.setAttribute("text",i),this.emit()}setLine(r,i,a){if(!this.context)return;this.activator=r;const{stx:o}=this.context;if(i=i||o.currentVectorParameters.lineWidth,a=a||o.currentVectorParameters.pattern,o.currentVectorParameters.lineWidth=i,o.currentVectorParameters.pattern=a,this.setFibs(i,a),this.currentLineSelectedClass="ciq-"+a+"-"+parseInt(i,10),a=="none"&&(this.currentLineSelectedClass=null),this.params.lineSelection.setAttribute("icon",this.currentLineSelectedClass),!this.querySelector("cq-fill-color.ciq-active")){const c=this.params.lineSelection.querySelector(".fills-only");c&&c.setAttribute("hidden","")}this["line-width"]=i,this["line-pattern"]=a,this.emit()}setActiveToolLabel(r){r==="No Tool"?r="":r==="freeform"?r="Doodle":r=r+":",this.querySelector(".ciq-active-tool-label").innerHTML=r,this.querySelector(".ciq-mobile-palette-toggle span").innerHTML=r||"Select Tool"}sync(r){this.syncing=!0;const{stx:i}=this.context;r?i.currentVectorParameters=e.extend(i.currentVectorParameters||{},r):r=i.currentVectorParameters;const{params:a}=this;this.setLine(null,r.lineWidth,r.pattern);const o=i.canvasStyle("stx_annotation"),c=r.annotation&&r.annotation.font,l=c&&c.size||o.fontSize;this.setFontSize(null,l);const u=c&&c.family||o.fontFamily;this.setFontFamily(null,u);const h=c&&c.style||o.fontStyle,d=c&&c.weight||o.fontWeight;this.setFontStyle("italic",h==="italic"),this.setFontStyle("bold",d==="bold"||d>=700),this.toggleCheckbox(null,"axis-label",r.axisLabel),this.toggleCheckbox(null,"show-callout",r.showCallout),this.toggleCheckbox(null,"span-panels",r.spanPanels),this.getColor({node:a.fillColor},"fill"),this.getColor({node:a.lineColor},"line"),a.cvpControllers.forEach(A=>{A.sync(r)});const{waveParameters:f}=a;f&&f.activate(),this.syncing=!1}toggleCheckbox(r,i,a=null){if(!this.context)return;this.activator=r;const o=this.context.stx.currentVectorParameters;i=i.replace(/-./g,u=>u[1].toUpperCase()),o[i]=a===null?!o[i]:a;const c=this.params[i+"Toggle"];c&&c.classList[o[i]?"add":"remove"]("ciq-active"),i==="showCallout"&&o.vectorType==="trendline"&&["fontOptions","fillColor"].forEach(u=>this.params[u].classList[o[i]?"add":"remove"]("ciq-active"));const l=i.replace(/[A-Z]/g,u=>`-${u.toLowerCase()}`);this[l]=o[i].toString(),this.params[i+"Toggle"].setAttribute("aria-checked",o[i].toString()),this.emit()}toggleFontStyle(r,i){const{stx:a}=this.context;let o=!1;this.activator=r,i=="italic"?o=a.currentVectorParameters.annotation.font.style=="italic":(i=="bold"||i>=700)&&(o=a.currentVectorParameters.annotation.font.weight=="bold"),this.setFontStyle(i,!o)}setFontStyle(r,i){if(!this.context)return;const{stx:a}=this.context,o=this.querySelector("cq-annotation-"+r);if(r=="italic")a.currentVectorParameters.annotation.font.style=i?"italic":null;else if(r=="bold")a.currentVectorParameters.annotation.font.weight=i?"bold":null;else return;this["font-"+r]=i?"true":"false",o&&(o.classList[i?"add":"remove"]("ciq-active"),o.setAttribute("aria-pressed",i)),this.emit()}toggleMagnet(r){const i=r.node,{stx:a}=this.context;a.preferences.magnet?(i.classList.remove("active"),a.preferences.magnet=!1):(i.classList.add("active"),a.preferences.magnet=!0),e.UI.contextsForEach(function(){this.stx.preferences.magnet=a.preferences.magnet,this.stx.chart.tempCanvas&&e.clearCanvas(this.stx.chart.tempCanvas,this.stx)})}togglePalette(){this.sendMessage("toggleDrawingPalette")}}s.markup=`
	<div role="group" aria-label="Drawing Tool Settings Palette" class="palette-container">	
		<div class="drag-strip" aria-hidden="true"></div>
			<div class="drawing-settings-wrapper">
					<div class="mini-widget-group">
						<cq-item class="ciq-mini-widget" cq-view="detach" stxtap="detach()" aria-label="Detach Palette" role="button"><span class="icon" aria-hidden="true"></span><label>Detach</label></cq-item>
						<cq-item class="ciq-mini-widget" cq-view="attach" stxtap="dock()" aria-label="Dock Palette" role="button"><span class="icon" aria-hidden="true"></span><label>Attach</label></cq-item>
					</div>
				<cq-clickable class="ciq-select ciq-mobile-palette-toggle" stxtap="togglePalette()"><span>Select Tool</span></cq-clickable>
				<cq-toolbar-settings>
					<div class="ciq-active-tool-label ciq-heading"></div>
					<cq-fill-color cq-section cq-overrides="auto,none" class="ciq-color" stxbind="getColor('fill')" stxtap="pickColor('fill')" role="button">
						<span class="icon" aria-hidden="true"></span>
						<span class="ciq-screen-reader">Fill Color</span>
						<span class="ciq-screen-reader" label></span>
					</cq-fill-color>
					<div>
						<cq-line-color cq-section cq-overrides="auto" class="ciq-color" stxbind="getColor('line')" stxtap="pickColor('line')" role="button">
							<span class="icon" aria-hidden="true"></span>
							<span class="ciq-screen-reader">Line Color</span>
							<span class="ciq-screen-reader" label></span>
						</cq-line-color>
						<cq-line-style cq-section>
							<cq-menu class="ciq-select ciq-line-style" reader="Line Style" config="linestyle" icon="ciq-solid-1" tooltip="Line Style"></cq-menu>
						</cq-line-style>
					</div>

					<cq-cvp-controller cq-section cq-cvp-header="1"></cq-cvp-controller>
					<cq-cvp-controller cq-section cq-cvp-header="2"></cq-cvp-controller>
					<cq-cvp-controller cq-section cq-cvp-header="3"></cq-cvp-controller>

					<cq-axis-label cq-section>
						<span role="checkbox" stxtap="toggleCheckbox('axisLabel')" class="ciq-checkbox ciq-active" aria-checked="true">
							<div class="ciq-heading">Axis Label:</div>
							<span></span>
						</span>
					</cq-axis-label>

					<cq-span-panels cq-section>
						<span role="checkbox" stxtap="toggleCheckbox('spanPanels')" class="ciq-checkbox ciq-active" aria-checked="true">
							<div class="ciq-heading">Span Panels:</div>
							<span></span>
						</span>
					</cq-span-panels>
	
					<cq-show-callout cq-section>
						<span role="checkbox" stxtap="toggleCheckbox('showCallout')" class="ciq-checkbox" aria-checked="false">
							<div class="ciq-heading">Show Callout:</div>
							<span></span>
						</span>
					</cq-show-callout>
	
					<cq-annotation cq-section role="group" aria-label="Annotation Settings">
						<cq-annotation-italic role="button" aria-label="Font Italic" stxtap="toggleFontStyle('italic')" class="ciq-btn" style="font-style:italic;" aria-pressed="false">I</cq-annotation-italic>
						<cq-annotation-bold role="button" aria-label="Font Bold" stxtap="toggleFontStyle('bold')" class="ciq-btn" style="font-weight:bold;" aria-pressed="false">B</cq-annotation-bold>
						<cq-menu class="ciq-select ciq-font-size" reader="Font Size" config="fontsize" text="Font Size"></cq-menu>
						<cq-menu class="ciq-select ciq-font-family" reader="Font Family" config="fontfamily" text="Font Family"></cq-menu>
					</cq-annotation>
					<cq-clickable role="button" aria-label="Fibonacci Settings" cq-fib-settings selector="cq-fib-settings-dialog" method="open" cq-section>
						<span class="ciq-icon-btn cq-icon-gear">
							<cq-tooltip>Settings</cq-tooltip>
						</span>
					</cq-clickable>
					<cq-clickable role="button" aria-label="Volume Profile Settings" cq-volumeprofile-settings selector="cq-volumeprofile-settings-dialog" method="open" cq-section>
						<span class="ciq-icon-btn cq-icon-gear">
							<cq-tooltip>Settings</cq-tooltip>
						</span>
					</cq-clickable>
					<cq-clickable role="button" aria-label="Measurement Line Settings" cq-measurementline-settings selector="cq-measurementline-settings-dialog" method="open" cq-section>
						<span class="ciq-icon-btn cq-icon-gear">
							<cq-tooltip>Settings</cq-tooltip>
						</span>
					</cq-clickable>
					<div class="ciq-drawing-edit-only" cq-section>
						<div role="button" aria-label="Done Edit" cq-toolbar-action="done_edit" stxtap="DrawingEdit.endEdit('close')" cq-section><cq-tooltip>Done Editing</cq-tooltip></div>
					</div>
					<br cq-section cq-wave-parameters><!-- This break is not displayed by default but uses the .ciq-active class to be displayed and push cq-wave-parameters onto a new line in the toolbar -->
					<cq-wave-parameters cq-section role="group" aria-label="Wave Parameters"></cq-wave-parameters>
					<div class="ciq-drawing-edit-hidden" cq-section>
						<div role="button" aria-label="Save Config" cq-toolbar-action="save" stxtap="saveConfig()" cq-section><div cq-toolbar-dirty></div><cq-tooltip>Save Config</cq-tooltip></div>
						<div role="button" aria-label="Restore Config" cq-toolbar-action="restore" stxtap="restoreDefaultConfig()" cq-section><cq-tooltip>Restore Config</cq-tooltip></div>
					</div>
				</cq-toolbar-settings>
				<cq-measure><span class="mMeasure" aria-label="Measurement"></span></cq-measure>
			</div>
		<div class="resize-strip"></div>
	</div>
	`,e.UI.addComponentDefinition("cq-drawing-settings",s)}},vp=E=>{const e=typeof _CIQ<"u"?_CIQ:E.CIQ,t=e.UI._webcomponents.list["cq-scroll"];if(!t)console.error("menuDropdown component requires first activating scroll component.");else{class s extends t.classDefinition{constructor(){super(),this.noMaximize=!0}connectedCallback(){super.connectedCallback()}adoptedCallback(){super.adoptedCallback(),e.UI.flattenInheritance(this,s)}disablekeyboardNavigation(){this.keyboardNavigation&&this.keyboardNavigation.setKeyControlElement()}}e.UI.addComponentDefinition("cq-menu-dropdown",s)}},xp={CIQ:j};(typeof __TREE_SHAKE__>"u"||!__TREE_SHAKE__)&&xp.CIQ.activateImports(ff,pf,Af,gf,mf,yf,vf,xf,bf,Cf,wf,Sf,kf,Ef,Bf,Df,Tf,Mf,Ff,_f,If,Uf,Qf,Lf,Pf,Hf,Nf,qf,Of,Rf,zf,Vf,Kf,Wf,Yf,Xf,jf,$f,Gf,Jf,Zf,ep,tp,ip,rp,ap,np,sp,op,lp,cp,up,hp,dp,fp,pp,Ap,gp,mp,yp,vp,null);/*!
 * html2canvas 1.0.0-rc.5 <https://html2canvas.hertzen.com>
 * Copyright (c) 2019 Niklas von Hertzen <https://hertzen.com>
 * Released under MIT License
 */(function(E,e){typeof exports=="object"&&typeof module<"u"?module.exports=e():typeof define=="function"&&define.amd?define(e):(E=E||self).html2canvas=e()})(void 0,function(){/*! *****************************************************************************
   Copyright (c) Microsoft Corporation. All rights reserved.
   Licensed under the Apache License, Version 2.0 (the "License"); you may not use
   this file except in compliance with the License. You may obtain a copy of the
   License at http://www.apache.org/licenses/LICENSE-2.0
   THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
   KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
   WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
   MERCHANTABLITY OR NON-INFRINGEMENT.
   See the Apache Version 2.0 License for specific language governing permissions
   and limitations under the License.
   ***************************************************************************** */var E=function(I,z){return(E=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(W,te){W.__proto__=te}||function(W,te){for(var le in te)te.hasOwnProperty(le)&&(W[le]=te[le])})(I,z)};function e(I,z){function W(){this.constructor=I}E(I,z),I.prototype=z===null?Object.create(z):(W.prototype=z.prototype,new W)}var t=function(){return(t=Object.assign||function(I){for(var z,W=1,te=arguments.length;W<te;W++)for(var le in z=arguments[W])Object.prototype.hasOwnProperty.call(z,le)&&(I[le]=z[le]);return I}).apply(this,arguments)};function s(I,z,W,te){return new(W||(W=Promise))(function(le,ye){function xe(Me){try{Ce(te.next(Me))}catch(Te){ye(Te)}}function Be(Me){try{Ce(te.throw(Me))}catch(Te){ye(Te)}}function Ce(Me){Me.done?le(Me.value):new W(function(Te){Te(Me.value)}).then(xe,Be)}Ce((te=te.apply(I,[])).next())})}function n(I,z){var W,te,le,ye,xe={label:0,sent:function(){if(1&le[0])throw le[1];return le[1]},trys:[],ops:[]};return ye={next:Be(0),throw:Be(1),return:Be(2)},typeof Symbol=="function"&&(ye[Symbol.iterator]=function(){return this}),ye;function Be(Ce){return function(Me){return function(Te){if(W)throw new TypeError("Generator is already executing.");for(;xe;)try{if(W=1,te&&(le=2&Te[0]?te.return:Te[0]?te.throw||((le=te.return)&&le.call(te),0):te.next)&&!(le=le.call(te,Te[1])).done)return le;switch(te=0,le&&(Te=[2&Te[0],le.value]),Te[0]){case 0:case 1:le=Te;break;case 4:return xe.label++,{value:Te[1],done:!1};case 5:xe.label++,te=Te[1],Te=[0];continue;case 7:Te=xe.ops.pop(),xe.trys.pop();continue;default:if(!(le=0<(le=xe.trys).length&&le[le.length-1])&&(Te[0]===6||Te[0]===2)){xe=0;continue}if(Te[0]===3&&(!le||Te[1]>le[0]&&Te[1]<le[3])){xe.label=Te[1];break}if(Te[0]===6&&xe.label<le[1]){xe.label=le[1],le=Te;break}if(le&&xe.label<le[2]){xe.label=le[2],xe.ops.push(Te);break}le[2]&&xe.ops.pop(),xe.trys.pop();continue}Te=z.call(I,xe)}catch(at){Te=[6,at],te=0}finally{W=le=0}if(5&Te[0])throw Te[1];return{value:Te[0]?Te[1]:void 0,done:!0}}([Ce,Me])}}}var r=(i.prototype.add=function(I,z,W,te){return new i(this.left+I,this.top+z,this.width+W,this.height+te)},i.fromClientRect=function(I){return new i(I.left,I.top,I.width,I.height)},i);function i(I,z,W,te){this.left=I,this.top=z,this.width=W,this.height=te}for(var a=function(I){return r.fromClientRect(I.getBoundingClientRect())},o=function(I){for(var z=[],W=0,te=I.length;W<te;){var le=I.charCodeAt(W++);if(55296<=le&&le<=56319&&W<te){var ye=I.charCodeAt(W++);(64512&ye)==56320?z.push(((1023&le)<<10)+(1023&ye)+65536):(z.push(le),W--)}else z.push(le)}return z},c=function(){for(var I=[],z=0;z<arguments.length;z++)I[z]=arguments[z];if(String.fromCodePoint)return String.fromCodePoint.apply(String,I);var W=I.length;if(!W)return"";for(var te=[],le=-1,ye="";++le<W;){var xe=I[le];xe<=65535?te.push(xe):(xe-=65536,te.push(55296+(xe>>10),xe%1024+56320)),(le+1===W||16384<te.length)&&(ye+=String.fromCharCode.apply(String,te),te.length=0)}return ye},l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",u=typeof Uint8Array>"u"?[]:new Uint8Array(256),h=0;h<l.length;h++)u[l.charCodeAt(h)]=h;function d(I,z,W){return I.slice?I.slice(z,W):new Uint16Array(Array.prototype.slice.call(I,z,W))}var f=(A.prototype.get=function(I){var z;if(0<=I){if(I<55296||56319<I&&I<=65535)return z=((z=this.index[I>>5])<<2)+(31&I),this.data[z];if(I<=65535)return z=((z=this.index[2048+(I-55296>>5)])<<2)+(31&I),this.data[z];if(I<this.highStart)return z=2080+(I>>11),z=this.index[z],z+=I>>5&63,z=((z=this.index[z])<<2)+(31&I),this.data[z];if(I<=1114111)return this.data[this.highValueIndex]}return this.errorValue},A);function A(I,z,W,te,le,ye){this.initialValue=I,this.errorValue=z,this.highStart=W,this.highValueIndex=te,this.index=le,this.data=ye}function p(I,z,W,te){var le=te[W];if(Array.isArray(I)?I.indexOf(le)!==-1:I===le)for(var ye=W;ye<=te.length;){if((Ce=te[++ye])===z)return!0;if(Ce!==k)break}if(le===k)for(ye=W;0<ye;){var xe=te[--ye];if(Array.isArray(I)?I.indexOf(xe)!==-1:I===xe)for(var Be=W;Be<=te.length;){var Ce;if((Ce=te[++Be])===z)return!0;if(Ce!==k)break}if(xe!==k)break}return!1}function g(I,z){for(var W=I;0<=W;){var te=z[W];if(te!==k)return te;W--}return 0}function m(I,z,W,te,le){if(W[te]===0)return X;var ye=te-1;if(Array.isArray(le)&&le[ye]===!0)return X;var xe=ye-1,Be=1+ye,Ce=z[ye],Me=0<=xe?z[xe]:0,Te=z[Be];if(Ce===2&&Te===3)return X;if(oe.indexOf(Ce)!==-1)return"!";if(oe.indexOf(Te)!==-1||ae.indexOf(Te)!==-1)return X;if(g(ye,z)===8)return"÷";if(ne.get(I[ye])===11&&(Te===Y||Te===O||Te===R)||Ce===7||Te===7||Ce===9||[k,y,S].indexOf(Ce)===-1&&Te===9||[T,_,L,v,Q].indexOf(Te)!==-1||g(ye,z)===N||p(23,N,ye,z)||p([T,_],P,ye,z)||p(12,12,ye,z))return X;if(Ce===k)return"÷";if(Ce===23||Te===23)return X;if(Te===16||Ce===16)return"÷";if([y,S,P].indexOf(Te)!==-1||Ce===14||Me===36&&ie.indexOf(Ce)!==-1||Ce===Q&&Te===36||Te===H&&se.concat(H,L,x,Y,O,R).indexOf(Ce)!==-1||se.indexOf(Te)!==-1&&Ce===x||se.indexOf(Ce)!==-1&&Te===x||Ce===D&&[Y,O,R].indexOf(Te)!==-1||[Y,O,R].indexOf(Ce)!==-1&&Te===M||se.indexOf(Ce)!==-1&&Ae.indexOf(Te)!==-1||Ae.indexOf(Ce)!==-1&&se.indexOf(Te)!==-1||[D,M].indexOf(Ce)!==-1&&(Te===x||[N,S].indexOf(Te)!==-1&&z[1+Be]===x)||[N,S].indexOf(Ce)!==-1&&Te===x||Ce===x&&[x,Q,v].indexOf(Te)!==-1)return X;if([x,Q,v,T,_].indexOf(Te)!==-1)for(var at=ye;0<=at;){if((lt=z[at])===x)return X;if([Q,v].indexOf(lt)===-1)break;at--}if([D,M].indexOf(Te)!==-1)for(at=[T,_].indexOf(Ce)!==-1?xe:ye;0<=at;){var lt;if((lt=z[at])===x)return X;if([Q,v].indexOf(lt)===-1)break;at--}if(G===Ce&&[G,J,V,K].indexOf(Te)!==-1||[J,V].indexOf(Ce)!==-1&&[J,Z].indexOf(Te)!==-1||[Z,K].indexOf(Ce)!==-1&&Te===Z||ge.indexOf(Ce)!==-1&&[H,M].indexOf(Te)!==-1||ge.indexOf(Te)!==-1&&Ce===D||se.indexOf(Ce)!==-1&&se.indexOf(Te)!==-1||Ce===v&&se.indexOf(Te)!==-1||se.concat(x).indexOf(Ce)!==-1&&Te===N||se.concat(x).indexOf(Te)!==-1&&Ce===_)return X;if(Ce===41&&Te===41){for(var gt=W[ye],ut=1;0<gt&&z[--gt]===41;)ut++;if(ut%2!=0)return X}return Ce===O&&Te===R?X:"÷"}function b(I,z){z||(z={lineBreak:"normal",wordBreak:"normal"});var W=function(xe,Be){Be===void 0&&(Be="strict");var Ce=[],Me=[],Te=[];return xe.forEach(function(at,lt){var gt=ne.get(at);if(50<gt?(Te.push(!0),gt-=50):Te.push(!1),["normal","auto","loose"].indexOf(Be)!==-1&&[8208,8211,12316,12448].indexOf(at)!==-1)return Me.push(lt),Ce.push(16);if(gt!==4&&gt!==11)return Me.push(lt),gt===31?Ce.push(Be==="strict"?P:Y):gt===ee||gt===29?Ce.push(q):gt===43?131072<=at&&at<=196605||196608<=at&&at<=262141?Ce.push(Y):Ce.push(q):void Ce.push(gt);if(lt===0)return Me.push(lt),Ce.push(q);var ut=Ce[lt-1];return he.indexOf(ut)===-1?(Me.push(Me[lt-1]),Ce.push(ut)):(Me.push(lt),Ce.push(q))}),[Me,Ce,Te]}(I,z.lineBreak),te=W[0],le=W[1],ye=W[2];return z.wordBreak!=="break-all"&&z.wordBreak!=="break-word"||(le=le.map(function(xe){return[x,q,ee].indexOf(xe)!==-1?Y:xe})),[te,le,z.wordBreak==="keep-all"?ye.map(function(xe,Be){return xe&&19968<=I[Be]&&I[Be]<=40959}):void 0]}var C,F,w,U,B,k=10,y=13,S=15,T=17,_=18,L=19,H=20,P=21,N=22,v=24,x=25,M=26,D=27,Q=28,q=30,O=32,R=33,V=34,K=35,Y=37,G=38,J=39,Z=40,ee=42,X="×",ne=(C=function(I){var z,W,te,le,ye,xe=.75*I.length,Be=I.length,Ce=0;I[I.length-1]==="="&&(xe--,I[I.length-2]==="="&&xe--);var Me=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&Uint8Array.prototype.slice!==void 0?new ArrayBuffer(xe):new Array(xe),Te=Array.isArray(Me)?Me:new Uint8Array(Me);for(z=0;z<Be;z+=4)W=u[I.charCodeAt(z)],te=u[I.charCodeAt(z+1)],le=u[I.charCodeAt(z+2)],ye=u[I.charCodeAt(z+3)],Te[Ce++]=W<<2|te>>4,Te[Ce++]=(15&te)<<4|le>>2,Te[Ce++]=(3&le)<<6|63&ye;return Me}("KwAAAAAAAAAACA4AIDoAAPAfAAACAAAAAAAIABAAGABAAEgAUABYAF4AZgBeAGYAYABoAHAAeABeAGYAfACEAIAAiACQAJgAoACoAK0AtQC9AMUAXgBmAF4AZgBeAGYAzQDVAF4AZgDRANkA3gDmAOwA9AD8AAQBDAEUARoBIgGAAIgAJwEvATcBPwFFAU0BTAFUAVwBZAFsAXMBewGDATAAiwGTAZsBogGkAawBtAG8AcIBygHSAdoB4AHoAfAB+AH+AQYCDgIWAv4BHgImAi4CNgI+AkUCTQJTAlsCYwJrAnECeQKBAk0CiQKRApkCoQKoArACuALAAsQCzAIwANQC3ALkAjAA7AL0AvwCAQMJAxADGAMwACADJgMuAzYDPgOAAEYDSgNSA1IDUgNaA1oDYANiA2IDgACAAGoDgAByA3YDfgOAAIQDgACKA5IDmgOAAIAAogOqA4AAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAK8DtwOAAIAAvwPHA88D1wPfAyAD5wPsA/QD/AOAAIAABAQMBBIEgAAWBB4EJgQuBDMEIAM7BEEEXgBJBCADUQRZBGEEaQQwADAAcQQ+AXkEgQSJBJEEgACYBIAAoASoBK8EtwQwAL8ExQSAAIAAgACAAIAAgACgAM0EXgBeAF4AXgBeAF4AXgBeANUEXgDZBOEEXgDpBPEE+QQBBQkFEQUZBSEFKQUxBTUFPQVFBUwFVAVcBV4AYwVeAGsFcwV7BYMFiwWSBV4AmgWgBacFXgBeAF4AXgBeAKsFXgCyBbEFugW7BcIFwgXIBcIFwgXQBdQF3AXkBesF8wX7BQMGCwYTBhsGIwYrBjMGOwZeAD8GRwZNBl4AVAZbBl4AXgBeAF4AXgBeAF4AXgBeAF4AXgBeAGMGXgBqBnEGXgBeAF4AXgBeAF4AXgBeAF4AXgB5BoAG4wSGBo4GkwaAAIADHgR5AF4AXgBeAJsGgABGA4AAowarBrMGswagALsGwwbLBjAA0wbaBtoG3QbaBtoG2gbaBtoG2gblBusG8wb7BgMHCwcTBxsHCwcjBysHMAc1BzUHOgdCB9oGSgdSB1oHYAfaBloHaAfaBlIH2gbaBtoG2gbaBtoG2gbaBjUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHbQdeAF4ANQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQd1B30HNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1B4MH2gaKB68EgACAAIAAgACAAIAAgACAAI8HlwdeAJ8HpweAAIAArwe3B14AXgC/B8UHygcwANAH2AfgB4AA6AfwBz4B+AcACFwBCAgPCBcIogEYAR8IJwiAAC8INwg/CCADRwhPCFcIXwhnCEoDGgSAAIAAgABvCHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIhAiLCI4IMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlggwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAANQc1BzUHNQc1BzUHNQc1BzUHNQc1B54INQc1B6II2gaqCLIIugiAAIAAvgjGCIAAgACAAIAAgACAAIAAgACAAIAAywiHAYAA0wiAANkI3QjlCO0I9Aj8CIAAgACAAAIJCgkSCRoJIgknCTYHLwk3CZYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiAAIAAAAFAAXgBeAGAAcABeAHwAQACQAKAArQC9AJ4AXgBeAE0A3gBRAN4A7AD8AMwBGgEAAKcBNwEFAUwBXAF4QkhCmEKnArcCgAHHAsABz4LAAcABwAHAAd+C6ABoAG+C/4LAAcABwAHAAc+DF4MAAcAB54M3gweDV4Nng3eDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEeDqABVg6WDqABoQ6gAaABoAHXDvcONw/3DvcO9w73DvcO9w73DvcO9w73DvcO9w73DvcO9w73DvcO9w73DvcO9w73DvcO9w73DvcO9w73DvcO9w73DncPAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcAB7cPPwlGCU4JMACAAIAAgABWCV4JYQmAAGkJcAl4CXwJgAkwADAAMAAwAIgJgACLCZMJgACZCZ8JowmrCYAAswkwAF4AXgB8AIAAuwkABMMJyQmAAM4JgADVCTAAMAAwADAAgACAAIAAgACAAIAAgACAAIAAqwYWBNkIMAAwADAAMADdCeAJ6AnuCR4E9gkwAP4JBQoNCjAAMACAABUK0wiAAB0KJAosCjQKgAAwADwKQwqAAEsKvQmdCVMKWwowADAAgACAALcEMACAAGMKgABrCjAAMAAwADAAMAAwADAAMAAwADAAMAAeBDAAMAAwADAAMAAwADAAMAAwADAAMAAwAIkEPQFzCnoKiQSCCooKkAqJBJgKoAqkCokEGAGsCrQKvArBCjAAMADJCtEKFQHZCuEK/gHpCvEKMAAwADAAMACAAIwE+QowAIAAPwEBCzAAMAAwADAAMACAAAkLEQswAIAAPwEZCyELgAAOCCkLMAAxCzkLMAAwADAAMAAwADAAXgBeAEELMAAwADAAMAAwADAAMAAwAEkLTQtVC4AAXAtkC4AAiQkwADAAMAAwADAAMAAwADAAbAtxC3kLgAuFC4sLMAAwAJMLlwufCzAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAApwswADAAMACAAIAAgACvC4AAgACAAIAAgACAALcLMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAvwuAAMcLgACAAIAAgACAAIAAyguAAIAAgACAAIAA0QswADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAANkLgACAAIAA4AswADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACJCR4E6AswADAAhwHwC4AA+AsADAgMEAwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMACAAIAAGAwdDCUMMAAwAC0MNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQw1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHPQwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADUHNQc1BzUHNQc1BzUHNQc2BzAAMAA5DDUHNQc1BzUHNQc1BzUHNQc1BzUHNQdFDDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAgACAAIAATQxSDFoMMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAF4AXgBeAF4AXgBeAF4AYgxeAGoMXgBxDHkMfwxeAIUMXgBeAI0MMAAwADAAMAAwAF4AXgCVDJ0MMAAwADAAMABeAF4ApQxeAKsMswy7DF4Awgy9DMoMXgBeAF4AXgBeAF4AXgBeAF4AXgDRDNkMeQBqCeAM3Ax8AOYM7Az0DPgMXgBeAF4AXgBeAF4AXgBeAF4AXgBeAF4AXgBeAF4AXgCgAAANoAAHDQ4NFg0wADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAeDSYNMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIAAgACAAIAAgACAAC4NMABeAF4ANg0wADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAD4NRg1ODVYNXg1mDTAAbQ0wADAAMAAwADAAMAAwADAA2gbaBtoG2gbaBtoG2gbaBnUNeg3CBYANwgWFDdoGjA3aBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gaUDZwNpA2oDdoG2gawDbcNvw3HDdoG2gbPDdYN3A3fDeYN2gbsDfMN2gbaBvoN/g3aBgYODg7aBl4AXgBeABYOXgBeACUG2gYeDl4AJA5eACwO2w3aBtoGMQ45DtoG2gbaBtoGQQ7aBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gZJDjUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1B1EO2gY1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQdZDjUHNQc1BzUHNQc1B2EONQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHaA41BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1B3AO2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gY1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1B2EO2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gZJDtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBkkOeA6gAKAAoAAwADAAMAAwAKAAoACgAKAAoACgAKAAgA4wADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAD//wQABAAEAAQABAAEAAQABAAEAA0AAwABAAEAAgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAKABMAFwAeABsAGgAeABcAFgASAB4AGwAYAA8AGAAcAEsASwBLAEsASwBLAEsASwBLAEsAGAAYAB4AHgAeABMAHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAFgAbABIAHgAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYADQARAB4ABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAUABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkAFgAaABsAGwAbAB4AHQAdAB4ATwAXAB4ADQAeAB4AGgAbAE8ATwAOAFAAHQAdAB0ATwBPABcATwBPAE8AFgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAFAATwBAAE8ATwBPAEAATwBQAFAATwBQAB4AHgAeAB4AHgAeAB0AHQAdAB0AHgAdAB4ADgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgBQAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkACQAJAAkACQAJAAkABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAFAAHgAeAB4AKwArAFAAUABQAFAAGABQACsAKwArACsAHgAeAFAAHgBQAFAAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUAAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAYAA0AKwArAB4AHgAbACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAB4ABAAEAB4ABAAEABMABAArACsAKwArACsAKwArACsAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAKwArACsAKwArAFYAVgBWAB4AHgArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AGgAaABoAGAAYAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQAEwAEACsAEwATAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABLAEsASwBLAEsASwBLAEsASwBLABoAGQAZAB4AUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABMAUAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABABQAFAABAAEAB4ABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUAAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAFAABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQAUABQAB4AHgAYABMAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAFAABAAEAAQABAAEAFAABAAEAAQAUAAEAAQABAAEAAQAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArACsAHgArAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAAQABAANAA0ASwBLAEsASwBLAEsASwBLAEsASwAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAKwArACsAUABQAFAAUAArACsABABQAAQABAAEAAQABAAEAAQAKwArAAQABAArACsABAAEAAQAUAArACsAKwArACsAKwArACsABAArACsAKwArAFAAUAArAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAGgAaAFAAUABQAFAAUABMAB4AGwBQAB4AKwArACsABAAEAAQAKwBQAFAAUABQAFAAUAArACsAKwArAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUAArAFAAUAArACsABAArAAQABAAEAAQABAArACsAKwArAAQABAArACsABAAEAAQAKwArACsABAArACsAKwArACsAKwArAFAAUABQAFAAKwBQACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwAEAAQAUABQAFAABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUABQAFAAUAArACsABABQAAQABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQAKwArAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwAeABsAKwArACsAKwArACsAKwBQAAQABAAEAAQABAAEACsABAAEAAQAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwArAAQABAArACsABAAEAAQAKwArACsAKwArACsAKwArAAQABAArACsAKwArAFAAUAArAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwAeAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwAEAFAAKwBQAFAAUABQAFAAUAArACsAKwBQAFAAUAArAFAAUABQAFAAKwArACsAUABQACsAUAArAFAAUAArACsAKwBQAFAAKwArACsAUABQAFAAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAAQABAAEAAQAKwArACsABAAEAAQAKwAEAAQABAAEACsAKwBQACsAKwArACsAKwArAAQAKwArACsAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAB4AHgAeAB4AHgAeABsAHgArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABAArACsAKwArACsAKwArAAQABAArAFAAUABQACsAKwArACsAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAB4AUAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABAArACsAKwArACsAKwArAAQABAArACsAKwArACsAKwArAFAAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABABQAB4AKwArACsAKwBQAFAAUAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQABoAUABQAFAAUABQAFAAKwArAAQABAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQACsAUAArACsAUABQAFAAUABQAFAAUAArACsAKwAEACsAKwArACsABAAEAAQABAAEAAQAKwAEACsABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgAqACsAKwArACsAGwBcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAeAEsASwBLAEsASwBLAEsASwBLAEsADQANACsAKwArACsAKwBcAFwAKwBcACsAKwBcAFwAKwBcACsAKwBcACsAKwArACsAKwArAFwAXABcAFwAKwBcAFwAXABcAFwAXABcACsAXABcAFwAKwBcACsAXAArACsAXABcACsAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgArACoAKgBcACsAKwBcAFwAXABcAFwAKwBcACsAKgAqACoAKgAqACoAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAFwAXABcAFwAUAAOAA4ADgAOAB4ADgAOAAkADgAOAA0ACQATABMAEwATABMACQAeABMAHgAeAB4ABAAEAB4AHgAeAB4AHgAeAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUAANAAQAHgAEAB4ABAAWABEAFgARAAQABABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAAQABAAEAAQABAANAAQABABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsADQANAB4AHgAeAB4AHgAeAAQAHgAeAB4AHgAeAB4AKwAeAB4ADgAOAA0ADgAeAB4AHgAeAB4ACQAJACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqAFwASwBLAEsASwBLAEsASwBLAEsASwANAA0AHgAeAB4AHgBcAFwAXABcAFwAXAAqACoAKgAqAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAKgAqACoAKgAqACoAKgBcAFwAXAAqACoAKgAqAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAXAAqAEsASwBLAEsASwBLAEsASwBLAEsAKgAqACoAKgAqACoAUABQAFAAUABQAFAAKwBQACsAKwArACsAKwBQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQACsAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwAEAAQABAAeAA0AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYAEQArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAADQANAA0AUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAA0ADQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQACsABAAEACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoADQANABUAXAANAB4ADQAbAFwAKgArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAB4AHgATABMADQANAA4AHgATABMAHgAEAAQABAAJACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAUABQAFAAUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwAeACsAKwArABMAEwBLAEsASwBLAEsASwBLAEsASwBLAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwBcAFwAXABcAFwAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBcACsAKwArACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEACsAKwAeAB4AXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgArACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgArACsABABLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKgAqACoAKgAqACoAKgBcACoAKgAqACoAKgAqACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAUABQAFAAUABQAFAAUAArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsADQANAB4ADQANAA0ADQAeAB4AHgAeAB4AHgAeAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAHgAeAB4AHgBQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwANAA0ADQANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwBQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAA0AUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsABAAEAAQAHgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAUABQAFAABABQAFAAUABQAAQABAAEAFAAUAAEAAQABAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAKwBQACsAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAHgAeAB4AHgAeAB4AHgAeAFAAHgAeAB4AUABQAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAKwArAB4AHgAeAB4AHgAeACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAUABQAFAAKwAeAB4AHgAeAB4AHgAeAA4AHgArAA0ADQANAA0ADQANAA0ACQANAA0ADQAIAAQACwAEAAQADQAJAA0ADQAMAB0AHQAeABcAFwAWABcAFwAXABYAFwAdAB0AHgAeABQAFAAUAA0AAQABAAQABAAEAAQABAAJABoAGgAaABoAGgAaABoAGgAeABcAFwAdABUAFQAeAB4AHgAeAB4AHgAYABYAEQAVABUAFQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgANAB4ADQANAA0ADQAeAA0ADQANAAcAHgAeAB4AHgArAAQABAAEAAQABAAEAAQABAAEAAQAUABQACsAKwBPAFAAUABQAFAAUAAeAB4AHgAWABEATwBQAE8ATwBPAE8AUABQAFAAUABQAB4AHgAeABYAEQArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAGwAbABsAGwAbABsAGwAaABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAaABsAGwAbABsAGgAbABsAGgAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgBQABoAHgAdAB4AUAAeABoAHgAeAB4AHgAeAB4AHgAeAB4ATwAeAFAAGwAeAB4AUABQAFAAUABQAB4AHgAeAB0AHQAeAFAAHgBQAB4AUAAeAFAATwBQAFAAHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AUABQAFAAUABPAE8AUABQAFAAUABQAE8AUABQAE8AUABPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBQAFAAUABQAE8ATwBPAE8ATwBPAE8ATwBPAE8AUABQAFAAUABQAFAAUABQAFAAHgAeAFAAUABQAFAATwAeAB4AKwArACsAKwAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB0AHQAeAB4AHgAdAB0AHgAeAB0AHgAeAB4AHQAeAB0AGwAbAB4AHQAeAB4AHgAeAB0AHgAeAB0AHQAdAB0AHgAeAB0AHgAdAB4AHQAdAB0AHQAdAB0AHgAdAB4AHgAeAB4AHgAdAB0AHQAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAdAB4AHgAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHgAdAB0AHQAdAB4AHgAdAB0AHgAeAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHQAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABQAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAlACUAHgAeAB4AHgAeAB4AHgAeAB4AFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBQAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeAB4AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAdAB0AHQAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAeAB4AHgAeAB0AHQAeAB4AHgAeAB0AHQAdAB4AHgAdAB4AHgAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB0AHQAeAB4AHQAeAB4AHgAeAB0AHQAeAB4AHgAeACUAJQAdAB0AJQAeACUAJQAlACAAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAHgAeAB4AHgAdAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHQAdAB0AHgAdACUAHQAdAB4AHQAdAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAHQAdAB0AHQAlAB4AJQAlACUAHQAlACUAHQAdAB0AJQAlAB0AHQAlAB0AHQAlACUAJQAeAB0AHgAeAB4AHgAdAB0AJQAdAB0AHQAdAB0AHQAlACUAJQAlACUAHQAlACUAIAAlAB0AHQAlACUAJQAlACUAJQAlACUAHgAeAB4AJQAlACAAIAAgACAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeABcAFwAXABcAFwAXAB4AEwATACUAHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAWABEAFgARAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAeAB4AKwArACsAKwArABMADQANAA0AUAATAA0AUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUAANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAA0ADQANAA0ADQANAA0ADQAeAA0AFgANAB4AHgAXABcAHgAeABcAFwAWABEAFgARABYAEQAWABEADQANAA0ADQATAFAADQANAB4ADQANAB4AHgAeAB4AHgAMAAwADQANAA0AHgANAA0AFgANAA0ADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArAA0AEQARACUAJQBHAFcAVwAWABEAFgARABYAEQAWABEAFgARACUAJQAWABEAFgARABYAEQAWABEAFQAWABEAEQAlAFcAVwBXAFcAVwBXAFcAVwBXAAQABAAEAAQABAAEACUAVwBXAFcAVwA2ACUAJQBXAFcAVwBHAEcAJQAlACUAKwBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBRAFcAUQBXAFEAVwBXAFcAVwBXAFcAUQBXAFcAVwBXAFcAVwBRAFEAKwArAAQABAAVABUARwBHAFcAFQBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBRAFcAVwBXAFcAVwBXAFEAUQBXAFcAVwBXABUAUQBHAEcAVwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwArACUAJQBXAFcAVwBXACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAKwArACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAE8ATwBPAE8ATwBPAE8ATwAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADQATAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQAHgBQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAeAA0ADQANAA0ADQArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAAQAUABQAFAABABQAFAAUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAeAB4AHgAeACsAKwArACsAUABQAFAAUABQAFAAHgAeABoAHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADgAOABMAEwArACsAKwArACsAKwArACsABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUAAeAB4AHgBQAA4AUAArACsAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAB4AWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYACsAKwArAAQAHgAeAB4AHgAeAB4ADQANAA0AHgAeAB4AHgArAFAASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArAB4AHgBcAFwAXABcAFwAKgBcAFwAXABcAFwAXABcAFwAXABcAEsASwBLAEsASwBLAEsASwBLAEsAXABcAFwAXABcACsAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAFAAUABQAAQAUABQAFAAUABQAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAHgANAA0ADQBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAKgAqACoAXABcACoAKgBcAFwAXABcAFwAKgAqAFwAKgBcACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAA0ADQBQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQADQAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAVABVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBUAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVACsAKwArACsAKwArACsAKwArACsAKwArAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAKwArACsAKwBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAKwArACsAKwAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArACsAKwArAFYABABWAFYAVgBWAFYAVgBWAFYAVgBWAB4AVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgArAFYAVgBWAFYAVgArAFYAKwBWAFYAKwBWAFYAKwBWAFYAVgBWAFYAVgBWAFYAVgBWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAEQAWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAaAB4AKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAGAARABEAGAAYABMAEwAWABEAFAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACUAJQAlACUAJQAWABEAFgARABYAEQAWABEAFgARABYAEQAlACUAFgARACUAJQAlACUAJQAlACUAEQAlABEAKwAVABUAEwATACUAFgARABYAEQAWABEAJQAlACUAJQAlACUAJQAlACsAJQAbABoAJQArACsAKwArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAcAKwATACUAJQAbABoAJQAlABYAEQAlACUAEQAlABEAJQBXAFcAVwBXAFcAVwBXAFcAVwBXABUAFQAlACUAJQATACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXABYAJQARACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAWACUAEQAlABYAEQARABYAEQARABUAVwBRAFEAUQBRAFEAUQBRAFEAUQBRAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcARwArACsAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXACsAKwBXAFcAVwBXAFcAVwArACsAVwBXAFcAKwArACsAGgAbACUAJQAlABsAGwArAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAAQAB0AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsADQANAA0AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQBQAFAAUABQACsAKwArACsAUABQAFAAUABQAFAAUABQAA0AUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQACsAKwArAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgBQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwBQAFAAUABQAFAABAAEAAQAKwAEAAQAKwArACsAKwArAAQABAAEAAQAUABQAFAAUAArAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsABAAEAAQAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsADQANAA0ADQANAA0ADQANAB4AKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AUABQAFAAUABQAFAAUABQAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwArACsAUABQAFAAUABQAA0ADQANAA0ADQANABQAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwANAA0ADQANAA0ADQANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQAeAB4AHgAeAB4AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsASwBLAEsASwBLAEsASwBLAEsASwANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAeAA4AUAArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAADQANAB4ADQAeAAQABAAEAB4AKwArAEsASwBLAEsASwBLAEsASwBLAEsAUAAOAFAADQANAA0AKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAA0AHgANAA0AHgAEACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAA0AKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAUAArACsAKwArACsAKwAEACsAKwArACsAKwBQAFAAUABQAFAABAAEACsAKwAEAAQABAAEAAQABAAEACsAKwArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABABQAFAAUABQAA0ADQANAA0AHgBLAEsASwBLAEsASwBLAEsASwBLACsADQArAB4AKwArAAQABAAEAAQAUABQAB4AUAArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEACsAKwAEAAQABAAEAAQABAAEAAQABAAOAA0ADQATABMAHgAeAB4ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0AUABQAFAAUAAEAAQAKwArAAQADQANAB4AUAArACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAKwAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAXABcAA0ADQANACoASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAOAB4ADQANAA0ADQAOAB4ABAArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAFAAUAArACsAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAA0ADQANACsADgAOAA4ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAFAADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAOABMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAArACsAKwAEACsABAAEACsABAAEAAQABAAEAAQABABQAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABIAEgAQwBDAEMAUABQAFAAUABDAFAAUABQAEgAQwBIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABDAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwANAA0AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAANACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQANAB4AHgAeAB4AHgAeAFAAUABQAFAADQAeACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEcARwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwArACsAKwArACsAKwArACsAKwArACsAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQACsAKwAeAAQABAANAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAHgAeAAQABAAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAEAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUAArACsAUAArACsAUABQACsAKwBQAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQACsAUABQAFAAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwAeAB4AUABQAFAAUABQACsAUAArACsAKwBQAFAAUABQAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AKwArAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAEAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAeAB4ADQANAA0ADQAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABAArAAQABAArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAEAAQABAAEAAQABAAEACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAFgAWAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArAFAAKwArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArAFAAKwBQACsAKwArACsAKwArAFAAKwArACsAKwBQACsAUAArAFAAKwBQAFAAUAArAFAAUAArAFAAKwArAFAAKwBQACsAUAArAFAAKwBQACsAUABQACsAUAArACsAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAUABQAFAAUAArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwBQAFAAUAArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAlACUAJQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeACUAJQAlACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeACUAJQAlACUAJQAeACUAJQAlACUAJQAgACAAIAAlACUAIAAlACUAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAIQAhACEAIQAhACUAJQAgACAAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAIAAgACAAIAAlACUAJQAlACAAJQAgACAAIAAgACAAIAAgACAAIAAlACUAJQAgACUAJQAlACUAIAAgACAAJQAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeACUAHgAlAB4AJQAlACUAJQAlACAAJQAlACUAJQAeACUAHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAIAAgACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAIAAlACUAJQAlACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAIAAgACAAJQAlACUAIAAgACAAIAAgAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFwAXABcAFQAVABUAHgAeAB4AHgAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAIAAgACAAJQAlACUAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAlACAAIAAlACUAJQAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAIAAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsA"),F=Array.isArray(C)?function(I){for(var z=I.length,W=[],te=0;te<z;te+=4)W.push(I[te+3]<<24|I[te+2]<<16|I[te+1]<<8|I[te]);return W}(C):new Uint32Array(C),w=Array.isArray(C)?function(I){for(var z=I.length,W=[],te=0;te<z;te+=2)W.push(I[te+1]<<8|I[te]);return W}(C):new Uint16Array(C),U=d(w,12,F[4]/2),B=F[5]===2?d(w,(24+F[4])/2):function(I,z,W){return I.slice?I.slice(z,W):new Uint32Array(Array.prototype.slice.call(I,z,W))}(F,Math.ceil((24+F[4])/4)),new f(F[0],F[1],F[2],F[3],U,B)),se=[q,36],oe=[1,2,3,5],ae=[k,8],Ae=[D,M],he=oe.concat(ae),ge=[G,J,Z,V,K],ie=[S,y],re=(de.prototype.slice=function(){return c.apply(void 0,this.codePoints.slice(this.start,this.end))},de);function de(I,z,W,te){this.codePoints=I,this.required=z==="!",this.start=W,this.end=te}var ce,fe;(fe=ce||(ce={}))[fe.STRING_TOKEN=0]="STRING_TOKEN",fe[fe.BAD_STRING_TOKEN=1]="BAD_STRING_TOKEN",fe[fe.LEFT_PARENTHESIS_TOKEN=2]="LEFT_PARENTHESIS_TOKEN",fe[fe.RIGHT_PARENTHESIS_TOKEN=3]="RIGHT_PARENTHESIS_TOKEN",fe[fe.COMMA_TOKEN=4]="COMMA_TOKEN",fe[fe.HASH_TOKEN=5]="HASH_TOKEN",fe[fe.DELIM_TOKEN=6]="DELIM_TOKEN",fe[fe.AT_KEYWORD_TOKEN=7]="AT_KEYWORD_TOKEN",fe[fe.PREFIX_MATCH_TOKEN=8]="PREFIX_MATCH_TOKEN",fe[fe.DASH_MATCH_TOKEN=9]="DASH_MATCH_TOKEN",fe[fe.INCLUDE_MATCH_TOKEN=10]="INCLUDE_MATCH_TOKEN",fe[fe.LEFT_CURLY_BRACKET_TOKEN=11]="LEFT_CURLY_BRACKET_TOKEN",fe[fe.RIGHT_CURLY_BRACKET_TOKEN=12]="RIGHT_CURLY_BRACKET_TOKEN",fe[fe.SUFFIX_MATCH_TOKEN=13]="SUFFIX_MATCH_TOKEN",fe[fe.SUBSTRING_MATCH_TOKEN=14]="SUBSTRING_MATCH_TOKEN",fe[fe.DIMENSION_TOKEN=15]="DIMENSION_TOKEN",fe[fe.PERCENTAGE_TOKEN=16]="PERCENTAGE_TOKEN",fe[fe.NUMBER_TOKEN=17]="NUMBER_TOKEN",fe[fe.FUNCTION=18]="FUNCTION",fe[fe.FUNCTION_TOKEN=19]="FUNCTION_TOKEN",fe[fe.IDENT_TOKEN=20]="IDENT_TOKEN",fe[fe.COLUMN_TOKEN=21]="COLUMN_TOKEN",fe[fe.URL_TOKEN=22]="URL_TOKEN",fe[fe.BAD_URL_TOKEN=23]="BAD_URL_TOKEN",fe[fe.CDC_TOKEN=24]="CDC_TOKEN",fe[fe.CDO_TOKEN=25]="CDO_TOKEN",fe[fe.COLON_TOKEN=26]="COLON_TOKEN",fe[fe.SEMICOLON_TOKEN=27]="SEMICOLON_TOKEN",fe[fe.LEFT_SQUARE_BRACKET_TOKEN=28]="LEFT_SQUARE_BRACKET_TOKEN",fe[fe.RIGHT_SQUARE_BRACKET_TOKEN=29]="RIGHT_SQUARE_BRACKET_TOKEN",fe[fe.UNICODE_RANGE_TOKEN=30]="UNICODE_RANGE_TOKEN",fe[fe.WHITESPACE_TOKEN=31]="WHITESPACE_TOKEN",fe[fe.EOF_TOKEN=32]="EOF_TOKEN";function me(I){return 48<=I&&I<=57}function ve(I){return me(I)||65<=I&&I<=70||97<=I&&I<=102}function pe(I){return I===10||I===9||I===32}function be(I){return function(z){return function(W){return 97<=W&&W<=122}(z)||function(W){return 65<=W&&W<=90}(z)}(I)||function(z){return 128<=z}(I)||I===95}function Se(I){return be(I)||me(I)||I===45}function Ee(I,z){return I===92&&z!==10}function Ie(I,z,W){return I===45?be(z)||Ee(z,W):!!be(I)||!(I!==92||!Ee(I,z))}function Qe(I,z,W){return I===43||I===45?!!me(z)||z===46&&me(W):me(I===46?z:I)}var Ne={type:ce.LEFT_PARENTHESIS_TOKEN},De={type:ce.RIGHT_PARENTHESIS_TOKEN},Re={type:ce.COMMA_TOKEN},_e={type:ce.SUFFIX_MATCH_TOKEN},Ue={type:ce.PREFIX_MATCH_TOKEN},He={type:ce.COLUMN_TOKEN},Pe={type:ce.DASH_MATCH_TOKEN},We={type:ce.INCLUDE_MATCH_TOKEN},Ge={type:ce.LEFT_CURLY_BRACKET_TOKEN},je={type:ce.RIGHT_CURLY_BRACKET_TOKEN},Je={type:ce.SUBSTRING_MATCH_TOKEN},Oe={type:ce.BAD_URL_TOKEN},nt={type:ce.BAD_STRING_TOKEN},Ze={type:ce.CDO_TOKEN},Le={type:ce.CDC_TOKEN},et={type:ce.COLON_TOKEN},Ye={type:ce.SEMICOLON_TOKEN},Ve={type:ce.LEFT_SQUARE_BRACKET_TOKEN},ct={type:ce.RIGHT_SQUARE_BRACKET_TOKEN},ot={type:ce.WHITESPACE_TOKEN},dt={type:ce.EOF_TOKEN},xt=(Ke.prototype.write=function(I){this._value=this._value.concat(o(I))},Ke.prototype.read=function(){for(var I=[],z=this.consumeToken();z!==dt;)I.push(z),z=this.consumeToken();return I},Ke.prototype.consumeToken=function(){var I=this.consumeCodePoint();switch(I){case 34:return this.consumeStringToken(34);case 35:var z=this.peekCodePoint(0),W=this.peekCodePoint(1),te=this.peekCodePoint(2);if(Se(z)||Ee(W,te)){var le=Ie(z,W,te)?2:1,ye=this.consumeName();return{type:ce.HASH_TOKEN,value:ye,flags:le}}break;case 36:if(this.peekCodePoint(0)===61)return this.consumeCodePoint(),_e;break;case 39:return this.consumeStringToken(39);case 40:return Ne;case 41:return De;case 42:if(this.peekCodePoint(0)===61)return this.consumeCodePoint(),Je;break;case 43:if(Qe(I,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(I),this.consumeNumericToken();break;case 44:return Re;case 45:var xe=I,Be=this.peekCodePoint(0),Ce=this.peekCodePoint(1);if(Qe(xe,Be,Ce))return this.reconsumeCodePoint(I),this.consumeNumericToken();if(Ie(xe,Be,Ce))return this.reconsumeCodePoint(I),this.consumeIdentLikeToken();if(Be===45&&Ce===62)return this.consumeCodePoint(),this.consumeCodePoint(),Le;break;case 46:if(Qe(I,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(I),this.consumeNumericToken();break;case 47:if(this.peekCodePoint(0)===42)for(this.consumeCodePoint();;){var Me=this.consumeCodePoint();if(Me===42&&(Me=this.consumeCodePoint())===47)return this.consumeToken();if(Me===-1)return this.consumeToken()}break;case 58:return et;case 59:return Ye;case 60:if(this.peekCodePoint(0)===33&&this.peekCodePoint(1)===45&&this.peekCodePoint(2)===45)return this.consumeCodePoint(),this.consumeCodePoint(),Ze;break;case 64:var Te=this.peekCodePoint(0),at=this.peekCodePoint(1),lt=this.peekCodePoint(2);if(Ie(Te,at,lt))return ye=this.consumeName(),{type:ce.AT_KEYWORD_TOKEN,value:ye};break;case 91:return Ve;case 92:if(Ee(I,this.peekCodePoint(0)))return this.reconsumeCodePoint(I),this.consumeIdentLikeToken();break;case 93:return ct;case 61:if(this.peekCodePoint(0)===61)return this.consumeCodePoint(),Ue;break;case 123:return Ge;case 125:return je;case 117:case 85:var gt=this.peekCodePoint(0),ut=this.peekCodePoint(1);return gt!==43||!ve(ut)&&ut!==63||(this.consumeCodePoint(),this.consumeUnicodeRangeToken()),this.reconsumeCodePoint(I),this.consumeIdentLikeToken();case 124:if(this.peekCodePoint(0)===61)return this.consumeCodePoint(),Pe;if(this.peekCodePoint(0)===124)return this.consumeCodePoint(),He;break;case 126:if(this.peekCodePoint(0)===61)return this.consumeCodePoint(),We;break;case-1:return dt}return pe(I)?(this.consumeWhiteSpace(),ot):me(I)?(this.reconsumeCodePoint(I),this.consumeNumericToken()):be(I)?(this.reconsumeCodePoint(I),this.consumeIdentLikeToken()):{type:ce.DELIM_TOKEN,value:c(I)}},Ke.prototype.consumeCodePoint=function(){var I=this._value.shift();return I===void 0?-1:I},Ke.prototype.reconsumeCodePoint=function(I){this._value.unshift(I)},Ke.prototype.peekCodePoint=function(I){return I>=this._value.length?-1:this._value[I]},Ke.prototype.consumeUnicodeRangeToken=function(){for(var I=[],z=this.consumeCodePoint();ve(z)&&I.length<6;)I.push(z),z=this.consumeCodePoint();for(var W=!1;z===63&&I.length<6;)I.push(z),z=this.consumeCodePoint(),W=!0;if(W){var te=parseInt(c.apply(void 0,I.map(function(Be){return Be===63?48:Be})),16),le=parseInt(c.apply(void 0,I.map(function(Be){return Be===63?70:Be})),16);return{type:ce.UNICODE_RANGE_TOKEN,start:te,end:le}}var ye=parseInt(c.apply(void 0,I),16);if(this.peekCodePoint(0)===45&&ve(this.peekCodePoint(1))){this.consumeCodePoint(),z=this.consumeCodePoint();for(var xe=[];ve(z)&&xe.length<6;)xe.push(z),z=this.consumeCodePoint();return le=parseInt(c.apply(void 0,xe),16),{type:ce.UNICODE_RANGE_TOKEN,start:ye,end:le}}return{type:ce.UNICODE_RANGE_TOKEN,start:ye,end:ye}},Ke.prototype.consumeIdentLikeToken=function(){var I=this.consumeName();return I.toLowerCase()==="url"&&this.peekCodePoint(0)===40?(this.consumeCodePoint(),this.consumeUrlToken()):this.peekCodePoint(0)===40?(this.consumeCodePoint(),{type:ce.FUNCTION_TOKEN,value:I}):{type:ce.IDENT_TOKEN,value:I}},Ke.prototype.consumeUrlToken=function(){var I=[];if(this.consumeWhiteSpace(),this.peekCodePoint(0)===-1)return{type:ce.URL_TOKEN,value:""};var z,W=this.peekCodePoint(0);if(W===39||W===34){var te=this.consumeStringToken(this.consumeCodePoint());return te.type===ce.STRING_TOKEN&&(this.consumeWhiteSpace(),this.peekCodePoint(0)===-1||this.peekCodePoint(0)===41)?(this.consumeCodePoint(),{type:ce.URL_TOKEN,value:te.value}):(this.consumeBadUrlRemnants(),Oe)}for(;;){var le=this.consumeCodePoint();if(le===-1||le===41)return{type:ce.URL_TOKEN,value:c.apply(void 0,I)};if(pe(le))return this.consumeWhiteSpace(),this.peekCodePoint(0)===-1||this.peekCodePoint(0)===41?(this.consumeCodePoint(),{type:ce.URL_TOKEN,value:c.apply(void 0,I)}):(this.consumeBadUrlRemnants(),Oe);if(le===34||le===39||le===40||0<=(z=le)&&z<=8||z===11||14<=z&&z<=31||z===127)return this.consumeBadUrlRemnants(),Oe;if(le===92){if(!Ee(le,this.peekCodePoint(0)))return this.consumeBadUrlRemnants(),Oe;I.push(this.consumeEscapedCodePoint())}else I.push(le)}},Ke.prototype.consumeWhiteSpace=function(){for(;pe(this.peekCodePoint(0));)this.consumeCodePoint()},Ke.prototype.consumeBadUrlRemnants=function(){for(;;){var I=this.consumeCodePoint();if(I===41||I===-1)return;Ee(I,this.peekCodePoint(0))&&this.consumeEscapedCodePoint()}},Ke.prototype.consumeStringSlice=function(I){for(var z="";0<I;){var W=Math.min(6e4,I);z+=c.apply(void 0,this._value.splice(0,W)),I-=W}return this._value.shift(),z},Ke.prototype.consumeStringToken=function(I){for(var z="",W=0;;){var te=this._value[W];if(te===-1||te===void 0||te===I)return z+=this.consumeStringSlice(W),{type:ce.STRING_TOKEN,value:z};if(te===10)return this._value.splice(0,W),nt;if(te===92){var le=this._value[W+1];le!==-1&&le!==void 0&&(le===10?(z+=this.consumeStringSlice(W),W=-1,this._value.shift()):Ee(te,le)&&(z+=this.consumeStringSlice(W),z+=c(this.consumeEscapedCodePoint()),W=-1))}W++}},Ke.prototype.consumeNumber=function(){var I=[],z=4,W=this.peekCodePoint(0);for(W!==43&&W!==45||I.push(this.consumeCodePoint());me(this.peekCodePoint(0));)I.push(this.consumeCodePoint());W=this.peekCodePoint(0);var te=this.peekCodePoint(1);if(W===46&&me(te))for(I.push(this.consumeCodePoint(),this.consumeCodePoint()),z=8;me(this.peekCodePoint(0));)I.push(this.consumeCodePoint());W=this.peekCodePoint(0),te=this.peekCodePoint(1);var le=this.peekCodePoint(2);if((W===69||W===101)&&((te===43||te===45)&&me(le)||me(te)))for(I.push(this.consumeCodePoint(),this.consumeCodePoint()),z=8;me(this.peekCodePoint(0));)I.push(this.consumeCodePoint());return[function(ye){var xe=0,Be=1;ye[xe]!==43&&ye[xe]!==45||(ye[xe]===45&&(Be=-1),xe++);for(var Ce=[];me(ye[xe]);)Ce.push(ye[xe++]);var Me=Ce.length?parseInt(c.apply(void 0,Ce),10):0;ye[xe]===46&&xe++;for(var Te=[];me(ye[xe]);)Te.push(ye[xe++]);var at=Te.length,lt=at?parseInt(c.apply(void 0,Te),10):0;ye[xe]!==69&&ye[xe]!==101||xe++;var gt=1;ye[xe]!==43&&ye[xe]!==45||(ye[xe]===45&&(gt=-1),xe++);for(var ut=[];me(ye[xe]);)ut.push(ye[xe++]);var bt=ut.length?parseInt(c.apply(void 0,ut),10):0;return Be*(Me+lt*Math.pow(10,-at))*Math.pow(10,gt*bt)}(I),z]},Ke.prototype.consumeNumericToken=function(){var I=this.consumeNumber(),z=I[0],W=I[1],te=this.peekCodePoint(0),le=this.peekCodePoint(1),ye=this.peekCodePoint(2);if(Ie(te,le,ye)){var xe=this.consumeName();return{type:ce.DIMENSION_TOKEN,number:z,flags:W,unit:xe}}return te===37?(this.consumeCodePoint(),{type:ce.PERCENTAGE_TOKEN,number:z,flags:W}):{type:ce.NUMBER_TOKEN,number:z,flags:W}},Ke.prototype.consumeEscapedCodePoint=function(){var I=this.consumeCodePoint();if(ve(I)){for(var z=c(I);ve(this.peekCodePoint(0))&&z.length<6;)z+=c(this.consumeCodePoint());pe(this.peekCodePoint(0))&&this.consumeCodePoint();var W=parseInt(z,16);return W===0||function(te){return 55296<=te&&te<=57343}(W)||1114111<W?65533:W}return I===-1?65533:I},Ke.prototype.consumeName=function(){for(var I="";;){var z=this.consumeCodePoint();if(Se(z))I+=c(z);else{if(!Ee(z,this.peekCodePoint(0)))return this.reconsumeCodePoint(z),I;I+=c(this.consumeEscapedCodePoint())}}},Ke);function Ke(){this._value=[]}var At=(st.create=function(I){var z=new xt;return z.write(I),new st(z.read())},st.parseValue=function(I){return st.create(I).parseComponentValue()},st.parseValues=function(I){return st.create(I).parseComponentValues()},st.prototype.parseComponentValue=function(){for(var I=this.consumeToken();I.type===ce.WHITESPACE_TOKEN;)I=this.consumeToken();if(I.type===ce.EOF_TOKEN)throw new SyntaxError("Error parsing CSS component value, unexpected EOF");this.reconsumeToken(I);for(var z=this.consumeComponentValue();(I=this.consumeToken()).type===ce.WHITESPACE_TOKEN;);if(I.type===ce.EOF_TOKEN)return z;throw new SyntaxError("Error parsing CSS component value, multiple values found when expecting only one")},st.prototype.parseComponentValues=function(){for(var I=[];;){var z=this.consumeComponentValue();if(z.type===ce.EOF_TOKEN)return I;I.push(z),I.push()}},st.prototype.consumeComponentValue=function(){var I=this.consumeToken();switch(I.type){case ce.LEFT_CURLY_BRACKET_TOKEN:case ce.LEFT_SQUARE_BRACKET_TOKEN:case ce.LEFT_PARENTHESIS_TOKEN:return this.consumeSimpleBlock(I.type);case ce.FUNCTION_TOKEN:return this.consumeFunction(I)}return I},st.prototype.consumeSimpleBlock=function(I){for(var z={type:I,values:[]},W=this.consumeToken();;){if(W.type===ce.EOF_TOKEN||_t(W,I))return z;this.reconsumeToken(W),z.values.push(this.consumeComponentValue()),W=this.consumeToken()}},st.prototype.consumeFunction=function(I){for(var z={name:I.value,values:[],type:ce.FUNCTION};;){var W=this.consumeToken();if(W.type===ce.EOF_TOKEN||W.type===ce.RIGHT_PARENTHESIS_TOKEN)return z;this.reconsumeToken(W),z.values.push(this.consumeComponentValue())}},st.prototype.consumeToken=function(){var I=this._tokens.shift();return I===void 0?dt:I},st.prototype.reconsumeToken=function(I){this._tokens.unshift(I)},st);function st(I){this._tokens=I}function it(I){return I.type===ce.DIMENSION_TOKEN}function rt(I){return I.type===ce.NUMBER_TOKEN}function $e(I){return I.type===ce.IDENT_TOKEN}function yt(I){return I.type===ce.STRING_TOKEN}function qe(I,z){return $e(I)&&I.value===z}function ft(I){return I.type!==ce.WHITESPACE_TOKEN}function ze(I){return I.type!==ce.WHITESPACE_TOKEN&&I.type!==ce.COMMA_TOKEN}function pt(I){var z=[],W=[];return I.forEach(function(te){if(te.type===ce.COMMA_TOKEN){if(W.length===0)throw new Error("Error parsing function args, zero tokens for arg");return z.push(W),void(W=[])}te.type!==ce.WHITESPACE_TOKEN&&W.push(te)}),W.length&&z.push(W),z}function wt(I){return I.type===ce.NUMBER_TOKEN||I.type===ce.DIMENSION_TOKEN}function vt(I){return I.type===ce.PERCENTAGE_TOKEN||wt(I)}function Dt(I){return 1<I.length?[I[0],I[1]]:[I[0]]}function Pt(I,z,W){var te=I[0],le=I[1];return[Tt(te,z),Tt(le!==void 0?le:te,W)]}function Ht(I){return I.type===ce.DIMENSION_TOKEN&&(I.unit==="deg"||I.unit==="grad"||I.unit==="rad"||I.unit==="turn")}function Ft(I){switch(I.filter($e).map(function(z){return z.value}).join(" ")){case"to bottom right":case"to right bottom":case"left top":case"top left":return[St,St];case"to top":case"bottom":return It(0);case"to bottom left":case"to left bottom":case"right top":case"top right":return[St,Mt];case"to right":case"left":return It(90);case"to top left":case"to left top":case"right bottom":case"bottom right":return[Mt,Mt];case"to bottom":case"top":return It(180);case"to top right":case"to right top":case"left bottom":case"bottom left":return[Mt,St];case"to left":case"right":return It(270)}return 0}function kt(I){return(255&I)==0}function ht(I){var z=255&I,W=255&I>>8,te=255&I>>16,le=255&I>>24;return z<255?"rgba("+le+","+te+","+W+","+z/255+")":"rgb("+le+","+te+","+W+")"}function Vt(I,z){if(I.type===ce.NUMBER_TOKEN)return I.number;if(I.type!==ce.PERCENTAGE_TOKEN)return 0;var W=z===3?1:255;return z===3?I.number/100*W:Math.round(I.number/100*W)}function Ot(I){var z=I.filter(ze);if(z.length===3){var W=z.map(Vt),te=W[0],le=W[1],ye=W[2];return Kt(te,le,ye,1)}if(z.length!==4)return 0;var xe=z.map(Vt),Be=(te=xe[0],le=xe[1],ye=xe[2],xe[3]);return Kt(te,le,ye,Be)}var _t=function(I,z){return z===ce.LEFT_CURLY_BRACKET_TOKEN&&I.type===ce.RIGHT_CURLY_BRACKET_TOKEN||z===ce.LEFT_SQUARE_BRACKET_TOKEN&&I.type===ce.RIGHT_SQUARE_BRACKET_TOKEN||z===ce.LEFT_PARENTHESIS_TOKEN&&I.type===ce.RIGHT_PARENTHESIS_TOKEN},St={type:ce.NUMBER_TOKEN,number:0,flags:4},Nt={type:ce.PERCENTAGE_TOKEN,number:50,flags:4},Mt={type:ce.PERCENTAGE_TOKEN,number:100,flags:4},Tt=function(I,z){if(I.type===ce.PERCENTAGE_TOKEN)return I.number/100*z;if(it(I))switch(I.unit){case"rem":case"em":return 16*I.number;case"px":default:return I.number}return I.number},Zt=function(I){if(I.type===ce.DIMENSION_TOKEN)switch(I.unit){case"deg":return Math.PI*I.number/180;case"grad":return Math.PI/200*I.number;case"rad":return I.number;case"turn":return 2*Math.PI*I.number}throw new Error("Unsupported angle type")},It=function(I){return Math.PI*I/180},jt=function(I){if(I.type===ce.FUNCTION){var z=ti[I.name];if(z===void 0)throw new Error('Attempting to parse an unsupported color function "'+I.name+'"');return z(I.values)}if(I.type===ce.HASH_TOKEN){if(I.value.length===3){var W=I.value.substring(0,1),te=I.value.substring(1,2),le=I.value.substring(2,3);return Kt(parseInt(W+W,16),parseInt(te+te,16),parseInt(le+le,16),1)}if(I.value.length===4){W=I.value.substring(0,1),te=I.value.substring(1,2),le=I.value.substring(2,3);var ye=I.value.substring(3,4);return Kt(parseInt(W+W,16),parseInt(te+te,16),parseInt(le+le,16),parseInt(ye+ye,16)/255)}if(I.value.length===6)return W=I.value.substring(0,2),te=I.value.substring(2,4),le=I.value.substring(4,6),Kt(parseInt(W,16),parseInt(te,16),parseInt(le,16),1);if(I.value.length===8)return W=I.value.substring(0,2),te=I.value.substring(2,4),le=I.value.substring(4,6),ye=I.value.substring(6,8),Kt(parseInt(W,16),parseInt(te,16),parseInt(le,16),parseInt(ye,16)/255)}if(I.type===ce.IDENT_TOKEN){var xe=zt[I.value.toUpperCase()];if(xe!==void 0)return xe}return zt.TRANSPARENT},Kt=function(I,z,W,te){return(I<<24|z<<16|W<<8|Math.round(255*te)<<0)>>>0};function Ai(I,z,W){return W<0&&(W+=1),1<=W&&(W-=1),W<1/6?(z-I)*W*6+I:W<.5?z:W<2/3?6*(z-I)*(2/3-W)+I:I}function xi(I){var z=I.filter(ze),W=z[0],te=z[1],le=z[2],ye=z[3],xe=(W.type===ce.NUMBER_TOKEN?It(W.number):Zt(W))/(2*Math.PI),Be=vt(te)?te.number/100:0,Ce=vt(le)?le.number/100:0,Me=ye!==void 0&&vt(ye)?Tt(ye,1):1;if(Be==0)return Kt(255*Ce,255*Ce,255*Ce,1);var Te=Ce<=.5?Ce*(1+Be):Ce+Be-Ce*Be,at=2*Ce-Te,lt=Ai(at,Te,xe+1/3),gt=Ai(at,Te,xe),ut=Ai(at,Te,xe-1/3);return Kt(255*lt,255*gt,255*ut,Me)}var mt,Qt,Wt,ei,ti={hsl:xi,hsla:xi,rgb:Ot,rgba:Ot},zt={ALICEBLUE:4042850303,ANTIQUEWHITE:4209760255,AQUA:16777215,AQUAMARINE:2147472639,AZURE:4043309055,BEIGE:4126530815,BISQUE:4293182719,BLACK:255,BLANCHEDALMOND:4293643775,BLUE:65535,BLUEVIOLET:2318131967,BROWN:2771004159,BURLYWOOD:3736635391,CADETBLUE:1604231423,CHARTREUSE:2147418367,CHOCOLATE:3530104575,CORAL:4286533887,CORNFLOWERBLUE:1687547391,CORNSILK:4294499583,CRIMSON:3692313855,CYAN:16777215,DARKBLUE:35839,DARKCYAN:9145343,DARKGOLDENROD:3095837695,DARKGRAY:2846468607,DARKGREEN:6553855,DARKGREY:2846468607,DARKKHAKI:3182914559,DARKMAGENTA:2332068863,DARKOLIVEGREEN:1433087999,DARKORANGE:4287365375,DARKORCHID:2570243327,DARKRED:2332033279,DARKSALMON:3918953215,DARKSEAGREEN:2411499519,DARKSLATEBLUE:1211993087,DARKSLATEGRAY:793726975,DARKSLATEGREY:793726975,DARKTURQUOISE:13554175,DARKVIOLET:2483082239,DEEPPINK:4279538687,DEEPSKYBLUE:12582911,DIMGRAY:1768516095,DIMGREY:1768516095,DODGERBLUE:512819199,FIREBRICK:2988581631,FLORALWHITE:4294635775,FORESTGREEN:579543807,FUCHSIA:4278255615,GAINSBORO:3705462015,GHOSTWHITE:4177068031,GOLD:4292280575,GOLDENROD:3668254975,GRAY:2155905279,GREEN:8388863,GREENYELLOW:2919182335,GREY:2155905279,HONEYDEW:4043305215,HOTPINK:4285117695,INDIANRED:3445382399,INDIGO:1258324735,IVORY:4294963455,KHAKI:4041641215,LAVENDER:3873897215,LAVENDERBLUSH:4293981695,LAWNGREEN:2096890111,LEMONCHIFFON:4294626815,LIGHTBLUE:2916673279,LIGHTCORAL:4034953471,LIGHTCYAN:3774873599,LIGHTGOLDENRODYELLOW:4210742015,LIGHTGRAY:3553874943,LIGHTGREEN:2431553791,LIGHTGREY:3553874943,LIGHTPINK:4290167295,LIGHTSALMON:4288707327,LIGHTSEAGREEN:548580095,LIGHTSKYBLUE:2278488831,LIGHTSLATEGRAY:2005441023,LIGHTSLATEGREY:2005441023,LIGHTSTEELBLUE:2965692159,LIGHTYELLOW:4294959359,LIME:16711935,LIMEGREEN:852308735,LINEN:4210091775,MAGENTA:4278255615,MAROON:2147483903,MEDIUMAQUAMARINE:1724754687,MEDIUMBLUE:52735,MEDIUMORCHID:3126187007,MEDIUMPURPLE:2473647103,MEDIUMSEAGREEN:1018393087,MEDIUMSLATEBLUE:2070474495,MEDIUMSPRINGGREEN:16423679,MEDIUMTURQUOISE:1221709055,MEDIUMVIOLETRED:3340076543,MIDNIGHTBLUE:421097727,MINTCREAM:4127193855,MISTYROSE:4293190143,MOCCASIN:4293178879,NAVAJOWHITE:4292783615,NAVY:33023,OLDLACE:4260751103,OLIVE:2155872511,OLIVEDRAB:1804477439,ORANGE:4289003775,ORANGERED:4282712319,ORCHID:3664828159,PALEGOLDENROD:4008225535,PALEGREEN:2566625535,PALETURQUOISE:2951671551,PALEVIOLETRED:3681588223,PAPAYAWHIP:4293907967,PEACHPUFF:4292524543,PERU:3448061951,PINK:4290825215,PLUM:3718307327,POWDERBLUE:2967529215,PURPLE:2147516671,REBECCAPURPLE:1714657791,RED:4278190335,ROSYBROWN:3163525119,ROYALBLUE:1097458175,SADDLEBROWN:2336560127,SALMON:4202722047,SANDYBROWN:4104413439,SEAGREEN:780883967,SEASHELL:4294307583,SIENNA:2689740287,SILVER:3233857791,SKYBLUE:2278484991,SLATEBLUE:1784335871,SLATEGRAY:1887473919,SLATEGREY:1887473919,SNOW:4294638335,SPRINGGREEN:16744447,STEELBLUE:1182971135,TAN:3535047935,TEAL:8421631,THISTLE:3636451583,TOMATO:4284696575,TRANSPARENT:0,TURQUOISE:1088475391,VIOLET:4001558271,WHEAT:4125012991,WHITE:4294967295,WHITESMOKE:4126537215,YELLOW:4294902015,YELLOWGREEN:2597139199};(Qt=mt||(mt={}))[Qt.VALUE=0]="VALUE",Qt[Qt.LIST=1]="LIST",Qt[Qt.IDENT_VALUE=2]="IDENT_VALUE",Qt[Qt.TYPE_VALUE=3]="TYPE_VALUE",Qt[Qt.TOKEN_VALUE=4]="TOKEN_VALUE",(ei=Wt||(Wt={}))[ei.BORDER_BOX=0]="BORDER_BOX",ei[ei.PADDING_BOX=1]="PADDING_BOX";function Yt(I){var z=jt(I[0]),W=I[1];return W&&vt(W)?{color:z,stop:W}:{color:z,stop:null}}function ai(I,z){var W=I[0],te=I[I.length-1];W.stop===null&&(W.stop=St),te.stop===null&&(te.stop=Mt);for(var le=[],ye=0,xe=0;xe<I.length;xe++){var Be=I[xe].stop;if(Be!==null){var Ce=Tt(Be,z);ye<Ce?le.push(Ce):le.push(ye),ye=Ce}else le.push(null)}var Me=null;for(xe=0;xe<le.length;xe++){var Te=le[xe];if(Te===null)Me===null&&(Me=xe);else if(Me!==null){for(var at=xe-Me,lt=(Te-le[Me-1])/(1+at),gt=1;gt<=at;gt++)le[Me+gt-1]=lt*gt;Me=null}}return I.map(function(ut,bt){return{color:ut.color,stop:Math.max(Math.min(1,le[bt]/z),0)}})}function bi(I,z,W){var te=typeof I=="number"?I:function(Te,at,lt){var gt=at/2,ut=lt/2,bt=Tt(Te[0],at)-gt,Et=ut-Tt(Te[1],lt);return(Math.atan2(Et,bt)+2*Math.PI)%(2*Math.PI)}(I,z,W),le=Math.abs(z*Math.sin(te))+Math.abs(W*Math.cos(te)),ye=z/2,xe=W/2,Be=le/2,Ce=Math.sin(te-Math.PI/2)*Be,Me=Math.cos(te-Math.PI/2)*Be;return[le,ye-Me,ye+Me,xe-Ce,xe+Ce]}function ii(I,z){return Math.sqrt(I*I+z*z)}function Ei(I,z,W,te,le){return[[0,0],[0,z],[I,0],[I,z]].reduce(function(ye,xe){var Be=xe[0],Ce=xe[1],Me=ii(W-Be,te-Ce);return(le?Me<ye.optimumDistance:Me>ye.optimumDistance)?{optimumCorner:xe,optimumDistance:Me}:ye},{optimumDistance:le?1/0:-1/0,optimumCorner:null}).optimumCorner}function Qi(I){var z=It(180),W=[];return pt(I).forEach(function(te,le){if(le===0){var ye=te[0];if(ye.type===ce.IDENT_TOKEN&&["top","left","right","bottom"].indexOf(ye.value)!==-1)return void(z=Ft(te));if(Ht(ye))return void(z=(Zt(ye)+It(270))%It(360))}var xe=Yt(te);W.push(xe)}),{angle:z,stops:W,type:ci.LINEAR_GRADIENT}}function Ni(I){return I[0]===0&&I[1]===255&&I[2]===0&&I[3]===255}var wr={name:"background-clip",initialValue:"border-box",prefix:!(ei[ei.CONTENT_BOX=2]="CONTENT_BOX"),type:mt.LIST,parse:function(I){return I.map(function(z){if($e(z))switch(z.value){case"padding-box":return Wt.PADDING_BOX;case"content-box":return Wt.CONTENT_BOX}return Wt.BORDER_BOX})}},Ri={name:"background-color",initialValue:"transparent",prefix:!1,type:mt.TYPE_VALUE,format:"color"},mr=function(I,z,W,te,le){var ye="http://www.w3.org/2000/svg",xe=document.createElementNS(ye,"svg"),Be=document.createElementNS(ye,"foreignObject");return xe.setAttributeNS(null,"width",I.toString()),xe.setAttributeNS(null,"height",z.toString()),Be.setAttributeNS(null,"width","100%"),Be.setAttributeNS(null,"height","100%"),Be.setAttributeNS(null,"x",W.toString()),Be.setAttributeNS(null,"y",te.toString()),Be.setAttributeNS(null,"externalResourcesRequired","true"),xe.appendChild(Be),Be.appendChild(le),xe},Xi=function(I){return new Promise(function(z,W){var te=new Image;te.onload=function(){return z(te)},te.onerror=W,te.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(I))})},Gt={get SUPPORT_RANGE_BOUNDS(){var I=function(z){if(z.createRange){var W=z.createRange();if(W.getBoundingClientRect){var te=z.createElement("boundtest");te.style.height="123px",te.style.display="block",z.body.appendChild(te),W.selectNode(te);var le=W.getBoundingClientRect(),ye=Math.round(le.height);if(z.body.removeChild(te),ye===123)return!0}}return!1}(document);return Object.defineProperty(Gt,"SUPPORT_RANGE_BOUNDS",{value:I}),I},get SUPPORT_SVG_DRAWING(){var I=function(z){var W=new Image,te=z.createElement("canvas"),le=te.getContext("2d");if(!le)return!1;W.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{le.drawImage(W,0,0),te.toDataURL()}catch{return!1}return!0}(document);return Object.defineProperty(Gt,"SUPPORT_SVG_DRAWING",{value:I}),I},get SUPPORT_FOREIGNOBJECT_DRAWING(){var I=typeof Array.from=="function"&&typeof window.fetch=="function"?function(z){var W=z.createElement("canvas"),te=100;W.width=te,W.height=te;var le=W.getContext("2d");if(!le)return Promise.reject(!1);le.fillStyle="rgb(0, 255, 0)",le.fillRect(0,0,te,te);var ye=new Image,xe=W.toDataURL();ye.src=xe;var Be=mr(te,te,0,0,ye);return le.fillStyle="red",le.fillRect(0,0,te,te),Xi(Be).then(function(Ce){le.drawImage(Ce,0,0);var Me=le.getImageData(0,0,te,te).data;le.fillStyle="red",le.fillRect(0,0,te,te);var Te=z.createElement("div");return Te.style.backgroundImage="url("+xe+")",Te.style.height="100px",Ni(Me)?Xi(mr(te,te,0,0,Te)):Promise.reject(!1)}).then(function(Ce){return le.drawImage(Ce,0,0),Ni(le.getImageData(0,0,te,te).data)}).catch(function(){return!1})}(document):Promise.resolve(!1);return Object.defineProperty(Gt,"SUPPORT_FOREIGNOBJECT_DRAWING",{value:I}),I},get SUPPORT_CORS_IMAGES(){var I=new Image().crossOrigin!==void 0;return Object.defineProperty(Gt,"SUPPORT_CORS_IMAGES",{value:I}),I},get SUPPORT_RESPONSE_TYPE(){var I=typeof new XMLHttpRequest().responseType=="string";return Object.defineProperty(Gt,"SUPPORT_RESPONSE_TYPE",{value:I}),I},get SUPPORT_CORS_XHR(){var I="withCredentials"in new XMLHttpRequest;return Object.defineProperty(Gt,"SUPPORT_CORS_XHR",{value:I}),I}},ri=(Bi.prototype.debug=function(){for(var I=[],z=0;z<arguments.length;z++)I[z]=arguments[z];this.enabled&&(typeof window<"u"&&window.console&&typeof console.debug=="function"?console.debug.apply(console,[this.id,this.getTime()+"ms"].concat(I)):this.info.apply(this,I))},Bi.prototype.getTime=function(){return Date.now()-this.start},Bi.create=function(I){Bi.instances[I.id]=new Bi(I)},Bi.destroy=function(I){delete Bi.instances[I]},Bi.getInstance=function(I){var z=Bi.instances[I];if(z===void 0)throw new Error("No logger instance found with id "+I);return z},Bi.prototype.info=function(){for(var I=[],z=0;z<arguments.length;z++)I[z]=arguments[z];this.enabled&&typeof window<"u"&&window.console&&typeof console.info=="function"&&console.info.apply(console,[this.id,this.getTime()+"ms"].concat(I))},Bi.prototype.error=function(){for(var I=[],z=0;z<arguments.length;z++)I[z]=arguments[z];this.enabled&&(typeof window<"u"&&window.console&&typeof console.error=="function"?console.error.apply(console,[this.id,this.getTime()+"ms"].concat(I)):this.info.apply(this,I))},Bi.instances={},Bi);function Bi(I){var z=I.id,W=I.enabled;this.id=z,this.enabled=W,this.start=Date.now()}var Mi=(Xt.create=function(I,z){return Xt._caches[I]=new Sr(I,z)},Xt.destroy=function(I){delete Xt._caches[I]},Xt.open=function(I){var z=Xt._caches[I];if(z!==void 0)return z;throw new Error('Cache with key "'+I+'" not found')},Xt.getOrigin=function(I){var z=Xt._link;return z?(z.href=I,z.href=z.href,z.protocol+z.hostname+z.port):"about:blank"},Xt.isSameOrigin=function(I){return Xt.getOrigin(I)===Xt._origin},Xt.setContext=function(I){Xt._link=I.document.createElement("a"),Xt._origin=Xt.getOrigin(I.location.href)},Xt.getInstance=function(){var I=Xt._current;if(I===null)throw new Error("No cache instance attached");return I},Xt.attachInstance=function(I){Xt._current=I},Xt.detachInstance=function(){Xt._current=null},Xt._caches={},Xt._origin="about:blank",Xt._current=null,Xt);function Xt(){}var Sr=(zi.prototype.addImage=function(I){var z=Promise.resolve();return this.has(I)||(oa(I)||vr(I))&&(this._cache[I]=this.loadImage(I)),z},zi.prototype.match=function(I){return this._cache[I]},zi.prototype.loadImage=function(I){return s(this,void 0,void 0,function(){var z,W,te,le,ye=this;return n(this,function(xe){switch(xe.label){case 0:return z=Mi.isSameOrigin(I),W=!cr(I)&&this._options.useCORS===!0&&Gt.SUPPORT_CORS_IMAGES&&!z,te=!cr(I)&&!z&&typeof this._options.proxy=="string"&&Gt.SUPPORT_CORS_XHR&&!W,z||this._options.allowTaint!==!1||cr(I)||te||W?(le=I,te?[4,this.proxy(le)]:[3,2]):[2];case 1:le=xe.sent(),xe.label=2;case 2:return ri.getInstance(this.id).debug("Added image "+I.substring(0,256)),[4,new Promise(function(Be,Ce){var Me=new Image;Me.onload=function(){return Be(Me)},Me.onerror=Ce,(Er(le)||W)&&(Me.crossOrigin="anonymous"),Me.src=le,Me.complete===!0&&setTimeout(function(){return Be(Me)},500),0<ye._options.imageTimeout&&setTimeout(function(){return Ce("Timed out ("+ye._options.imageTimeout+"ms) loading image")},ye._options.imageTimeout)})];case 3:return[2,xe.sent()]}})})},zi.prototype.has=function(I){return this._cache[I]!==void 0},zi.prototype.keys=function(){return Promise.resolve(Object.keys(this._cache))},zi.prototype.proxy=function(I){var z=this,W=this._options.proxy;if(!W)throw new Error("No proxy defined");var te=I.substring(0,256);return new Promise(function(le,ye){var xe=Gt.SUPPORT_RESPONSE_TYPE?"blob":"text",Be=new XMLHttpRequest;if(Be.onload=function(){if(Be.status===200)if(xe=="text")le(Be.response);else{var Me=new FileReader;Me.addEventListener("load",function(){return le(Me.result)},!1),Me.addEventListener("error",function(Te){return ye(Te)},!1),Me.readAsDataURL(Be.response)}else ye("Failed to proxy resource "+te+" with status code "+Be.status)},Be.onerror=ye,Be.open("GET",W+"?url="+encodeURIComponent(I)+"&responseType="+xe),xe!="text"&&Be instanceof XMLHttpRequest&&(Be.responseType=xe),z._options.imageTimeout){var Ce=z._options.imageTimeout;Be.timeout=Ce,Be.ontimeout=function(){return ye("Timed out ("+Ce+"ms) proxying "+te)}}Be.send()})},zi);function zi(I,z){this.id=I,this._options=z,this._cache={}}function Ki(I){var z=ni.CIRCLE,W=ui.FARTHEST_CORNER,te=[],le=[];return pt(I).forEach(function(ye,xe){var Be=!0;if(xe===0?Be=ye.reduce(function(Me,Te){if($e(Te))switch(Te.value){case"center":return le.push(Nt),!1;case"top":case"left":return le.push(St),!1;case"right":case"bottom":return le.push(Mt),!1}else if(vt(Te)||wt(Te))return le.push(Te),!1;return Me},Be):xe===1&&(Be=ye.reduce(function(Me,Te){if($e(Te))switch(Te.value){case"circle":return z=ni.CIRCLE,!1;case Dr:return z=ni.ELLIPSE,!1;case Fi:case Rr:return W=ui.CLOSEST_SIDE,!1;case zr:return W=ui.FARTHEST_SIDE,!1;case ur:return W=ui.CLOSEST_CORNER,!1;case"cover":case hr:return W=ui.FARTHEST_CORNER,!1}else if(wt(Te)||vt(Te))return Array.isArray(W)||(W=[]),W.push(Te),!1;return Me},Be)),Be){var Ce=Yt(ye);te.push(Ce)}}),{size:W,shape:z,stops:te,position:le,type:ci.RADIAL_GRADIENT}}var ci,Vi,ji=/^data:image\/svg\+xml/i,yr=/^data:image\/.*;base64,/i,kr=/^data:image\/.*/i,vr=function(I){return Gt.SUPPORT_SVG_DRAWING||!Br(I)},cr=function(I){return kr.test(I)},Er=function(I){return yr.test(I)},oa=function(I){return I.substr(0,4)==="blob"},Br=function(I){return I.substr(-3).toLowerCase()==="svg"||ji.test(I)},Rr="closest-side",zr="farthest-side",ur="closest-corner",hr="farthest-corner",Dr="ellipse",Fi="contain";(Vi=ci||(ci={}))[Vi.URL=0]="URL",Vi[Vi.LINEAR_GRADIENT=1]="LINEAR_GRADIENT",Vi[Vi.RADIAL_GRADIENT=2]="RADIAL_GRADIENT";var ni,qi,ui,dr;(qi=ni||(ni={}))[qi.CIRCLE=0]="CIRCLE",qi[qi.ELLIPSE=1]="ELLIPSE",(dr=ui||(ui={}))[dr.CLOSEST_SIDE=0]="CLOSEST_SIDE",dr[dr.FARTHEST_SIDE=1]="FARTHEST_SIDE",dr[dr.CLOSEST_CORNER=2]="CLOSEST_CORNER",dr[dr.FARTHEST_CORNER=3]="FARTHEST_CORNER";var Vr=function(I){if(I.type===ce.URL_TOKEN){var z={url:I.value,type:ci.URL};return Mi.getInstance().addImage(I.value),z}if(I.type!==ce.FUNCTION)throw new Error("Unsupported image type");var W=Ha[I.name];if(W===void 0)throw new Error('Attempting to parse an unsupported image function "'+I.name+'"');return W(I.values)},$i,Wi,Ha={"linear-gradient":function(I){var z=It(180),W=[];return pt(I).forEach(function(te,le){if(le===0){var ye=te[0];if(ye.type===ce.IDENT_TOKEN&&ye.value==="to")return void(z=Ft(te));if(Ht(ye))return void(z=Zt(ye))}var xe=Yt(te);W.push(xe)}),{angle:z,stops:W,type:ci.LINEAR_GRADIENT}},"-moz-linear-gradient":Qi,"-ms-linear-gradient":Qi,"-o-linear-gradient":Qi,"-webkit-linear-gradient":Qi,"radial-gradient":function(I){var z=ni.CIRCLE,W=ui.FARTHEST_CORNER,te=[],le=[];return pt(I).forEach(function(ye,xe){var Be=!0;if(xe===0){var Ce=!1;Be=ye.reduce(function(Te,at){if(Ce)if($e(at))switch(at.value){case"center":return le.push(Nt),Te;case"top":case"left":return le.push(St),Te;case"right":case"bottom":return le.push(Mt),Te}else(vt(at)||wt(at))&&le.push(at);else if($e(at))switch(at.value){case"circle":return z=ni.CIRCLE,!1;case Dr:return z=ni.ELLIPSE,!1;case"at":return!(Ce=!0);case Rr:return W=ui.CLOSEST_SIDE,!1;case"cover":case zr:return W=ui.FARTHEST_SIDE,!1;case Fi:case ur:return W=ui.CLOSEST_CORNER,!1;case hr:return W=ui.FARTHEST_CORNER,!1}else if(wt(at)||vt(at))return Array.isArray(W)||(W=[]),W.push(at),!1;return Te},Be)}if(Be){var Me=Yt(ye);te.push(Me)}}),{size:W,shape:z,stops:te,position:le,type:ci.RADIAL_GRADIENT}},"-moz-radial-gradient":Ki,"-ms-radial-gradient":Ki,"-o-radial-gradient":Ki,"-webkit-radial-gradient":Ki,"-webkit-gradient":function(I){var z=It(180),W=[],te=ci.LINEAR_GRADIENT,le=ni.CIRCLE,ye=ui.FARTHEST_CORNER;return pt(I).forEach(function(xe,Be){var Ce=xe[0];if(Be===0){if($e(Ce)&&Ce.value==="linear")return void(te=ci.LINEAR_GRADIENT);if($e(Ce)&&Ce.value==="radial")return void(te=ci.RADIAL_GRADIENT)}if(Ce.type===ce.FUNCTION){if(Ce.name==="from"){var Me=jt(Ce.values[0]);W.push({stop:St,color:Me})}else if(Ce.name==="to")Me=jt(Ce.values[0]),W.push({stop:Mt,color:Me});else if(Ce.name==="color-stop"){var Te=Ce.values.filter(ze);if(Te.length===2){Me=jt(Te[1]);var at=Te[0];rt(at)&&W.push({stop:{type:ce.PERCENTAGE_TOKEN,number:100*at.number,flags:at.flags},color:Me})}}}}),te===ci.LINEAR_GRADIENT?{angle:(z+It(180))%It(360),stops:W,type:te}:{size:ye,shape:le,stops:W,position:[],type:te}}},fn={name:"background-image",initialValue:"none",type:mt.LIST,prefix:!1,parse:function(I){if(I.length===0)return[];var z=I[0];return z.type===ce.IDENT_TOKEN&&z.value==="none"?[]:I.filter(function(W){return ze(W)&&function(te){return te.type!==ce.FUNCTION||Ha[te.name]}(W)}).map(Vr)}},ba={name:"background-origin",initialValue:"border-box",prefix:!1,type:mt.LIST,parse:function(I){return I.map(function(z){if($e(z))switch(z.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},Ca={name:"background-position",initialValue:"0% 0%",type:mt.LIST,prefix:!1,parse:function(I){return pt(I).map(function(z){return z.filter(vt)}).map(Dt)}};(Wi=$i||($i={}))[Wi.REPEAT=0]="REPEAT",Wi[Wi.NO_REPEAT=1]="NO_REPEAT",Wi[Wi.REPEAT_X=2]="REPEAT_X";var Kr,wa,pn={name:"background-repeat",initialValue:"repeat",prefix:!(Wi[Wi.REPEAT_Y=3]="REPEAT_Y"),type:mt.LIST,parse:function(I){return pt(I).map(function(z){return z.filter($e).map(function(W){return W.value}).join(" ")}).map(Gi)}},Gi=function(I){switch(I){case"no-repeat":return $i.NO_REPEAT;case"repeat-x":case"repeat no-repeat":return $i.REPEAT_X;case"repeat-y":case"no-repeat repeat":return $i.REPEAT_Y;case"repeat":default:return $i.REPEAT}};(wa=Kr||(Kr={})).AUTO="auto",wa.CONTAIN="contain";function Tr(I){return{name:"border-"+I+"-color",initialValue:"transparent",prefix:!1,type:mt.TYPE_VALUE,format:"color"}}function Wr(I){return{name:"border-radius-"+I,initialValue:"0 0",prefix:!1,type:mt.LIST,parse:function(z){return Dt(z.filter(vt))}}}var xr,Yr,hu={name:"background-size",initialValue:"0",prefix:!(wa.COVER="cover"),type:mt.LIST,parse:function(I){return pt(I).map(function(z){return z.filter(du)})}},du=function(I){return $e(I)||vt(I)},fu=Tr("top"),pu=Tr("right"),Au=Tr("bottom"),gu=Tr("left"),mu=Wr("top-left"),yu=Wr("top-right"),vu=Wr("bottom-right"),xu=Wr("bottom-left");(Yr=xr||(xr={}))[Yr.NONE=0]="NONE",Yr[Yr.SOLID=1]="SOLID";function Na(I){return{name:"border-"+I+"-style",initialValue:"solid",prefix:!1,type:mt.IDENT_VALUE,parse:function(z){switch(z){case"none":return xr.NONE}return xr.SOLID}}}function qa(I){return{name:"border-"+I+"-width",initialValue:"0",type:mt.VALUE,prefix:!1,parse:function(z){return it(z)?z.number:0}}}var Xr,Mr,bu=Na("top"),Cu=Na("right"),wu=Na("bottom"),Su=Na("left"),ku=qa("top"),Eu=qa("right"),Bu=qa("bottom"),Du=qa("left"),Tu={name:"color",initialValue:"transparent",prefix:!1,type:mt.TYPE_VALUE,format:"color"},Mu={name:"display",initialValue:"inline-block",prefix:!1,type:mt.LIST,parse:function(I){return I.filter($e).reduce(function(z,W){return z|Fu(W.value)},0)}},Fu=function(I){switch(I){case"block":return 2;case"inline":return 4;case"run-in":return 8;case"flow":return 16;case"flow-root":return 32;case"table":return 64;case"flex":case"-webkit-flex":return 128;case"grid":case"-ms-grid":return 256;case"ruby":return 512;case"subgrid":return 1024;case"list-item":return 2048;case"table-row-group":return 4096;case"table-header-group":return 8192;case"table-footer-group":return 16384;case"table-row":return 32768;case"table-cell":return 65536;case"table-column-group":return 131072;case"table-column":return 262144;case"table-caption":return 524288;case"ruby-base":return 1048576;case"ruby-text":return 2097152;case"ruby-base-container":return 4194304;case"ruby-text-container":return 8388608;case"contents":return 16777216;case"inline-block":return 33554432;case"inline-list-item":return 67108864;case"inline-table":return 134217728;case"inline-flex":return 268435456;case"inline-grid":return 536870912}return 0};(Mr=Xr||(Xr={}))[Mr.NONE=0]="NONE",Mr[Mr.LEFT=1]="LEFT",Mr[Mr.RIGHT=2]="RIGHT",Mr[Mr.INLINE_START=3]="INLINE_START";var Oa,es,Ra,za,_u={name:"float",initialValue:"none",prefix:!(Mr[Mr.INLINE_END=4]="INLINE_END"),type:mt.IDENT_VALUE,parse:function(I){switch(I){case"left":return Xr.LEFT;case"right":return Xr.RIGHT;case"inline-start":return Xr.INLINE_START;case"inline-end":return Xr.INLINE_END}return Xr.NONE}},Iu={name:"letter-spacing",initialValue:"0",prefix:!1,type:mt.VALUE,parse:function(I){return I.type===ce.IDENT_TOKEN&&I.value==="normal"?0:I.type===ce.NUMBER_TOKEN||I.type===ce.DIMENSION_TOKEN?I.number:0}},Uu={name:"line-break",initialValue:(es=Oa||(Oa={})).NORMAL="normal",prefix:!(es.STRICT="strict"),type:mt.IDENT_VALUE,parse:function(I){switch(I){case"strict":return Oa.STRICT;case"normal":default:return Oa.NORMAL}}},Qu={name:"line-height",initialValue:"normal",prefix:!1,type:mt.TOKEN_VALUE},Lu={name:"list-style-image",initialValue:"none",type:mt.VALUE,prefix:!1,parse:function(I){return I.type===ce.IDENT_TOKEN&&I.value==="none"?null:Vr(I)}};(za=Ra||(Ra={}))[za.INSIDE=0]="INSIDE";var Xe,tt,Pu={name:"list-style-position",initialValue:"outside",prefix:!(za[za.OUTSIDE=1]="OUTSIDE"),type:mt.IDENT_VALUE,parse:function(I){switch(I){case"inside":return Ra.INSIDE;case"outside":default:return Ra.OUTSIDE}}};(tt=Xe||(Xe={}))[tt.NONE=-1]="NONE",tt[tt.DISC=0]="DISC",tt[tt.CIRCLE=1]="CIRCLE",tt[tt.SQUARE=2]="SQUARE",tt[tt.DECIMAL=3]="DECIMAL",tt[tt.CJK_DECIMAL=4]="CJK_DECIMAL",tt[tt.DECIMAL_LEADING_ZERO=5]="DECIMAL_LEADING_ZERO",tt[tt.LOWER_ROMAN=6]="LOWER_ROMAN",tt[tt.UPPER_ROMAN=7]="UPPER_ROMAN",tt[tt.LOWER_GREEK=8]="LOWER_GREEK",tt[tt.LOWER_ALPHA=9]="LOWER_ALPHA",tt[tt.UPPER_ALPHA=10]="UPPER_ALPHA",tt[tt.ARABIC_INDIC=11]="ARABIC_INDIC",tt[tt.ARMENIAN=12]="ARMENIAN",tt[tt.BENGALI=13]="BENGALI",tt[tt.CAMBODIAN=14]="CAMBODIAN",tt[tt.CJK_EARTHLY_BRANCH=15]="CJK_EARTHLY_BRANCH",tt[tt.CJK_HEAVENLY_STEM=16]="CJK_HEAVENLY_STEM",tt[tt.CJK_IDEOGRAPHIC=17]="CJK_IDEOGRAPHIC",tt[tt.DEVANAGARI=18]="DEVANAGARI",tt[tt.ETHIOPIC_NUMERIC=19]="ETHIOPIC_NUMERIC",tt[tt.GEORGIAN=20]="GEORGIAN",tt[tt.GUJARATI=21]="GUJARATI",tt[tt.GURMUKHI=22]="GURMUKHI",tt[tt.HEBREW=22]="HEBREW",tt[tt.HIRAGANA=23]="HIRAGANA",tt[tt.HIRAGANA_IROHA=24]="HIRAGANA_IROHA",tt[tt.JAPANESE_FORMAL=25]="JAPANESE_FORMAL",tt[tt.JAPANESE_INFORMAL=26]="JAPANESE_INFORMAL",tt[tt.KANNADA=27]="KANNADA",tt[tt.KATAKANA=28]="KATAKANA",tt[tt.KATAKANA_IROHA=29]="KATAKANA_IROHA",tt[tt.KHMER=30]="KHMER",tt[tt.KOREAN_HANGUL_FORMAL=31]="KOREAN_HANGUL_FORMAL",tt[tt.KOREAN_HANJA_FORMAL=32]="KOREAN_HANJA_FORMAL",tt[tt.KOREAN_HANJA_INFORMAL=33]="KOREAN_HANJA_INFORMAL",tt[tt.LAO=34]="LAO",tt[tt.LOWER_ARMENIAN=35]="LOWER_ARMENIAN",tt[tt.MALAYALAM=36]="MALAYALAM",tt[tt.MONGOLIAN=37]="MONGOLIAN",tt[tt.MYANMAR=38]="MYANMAR",tt[tt.ORIYA=39]="ORIYA",tt[tt.PERSIAN=40]="PERSIAN",tt[tt.SIMP_CHINESE_FORMAL=41]="SIMP_CHINESE_FORMAL",tt[tt.SIMP_CHINESE_INFORMAL=42]="SIMP_CHINESE_INFORMAL",tt[tt.TAMIL=43]="TAMIL",tt[tt.TELUGU=44]="TELUGU",tt[tt.THAI=45]="THAI",tt[tt.TIBETAN=46]="TIBETAN",tt[tt.TRAD_CHINESE_FORMAL=47]="TRAD_CHINESE_FORMAL",tt[tt.TRAD_CHINESE_INFORMAL=48]="TRAD_CHINESE_INFORMAL",tt[tt.UPPER_ARMENIAN=49]="UPPER_ARMENIAN",tt[tt.DISCLOSURE_OPEN=50]="DISCLOSURE_OPEN";function Va(I){return{name:"margin-"+I,initialValue:"0",prefix:!1,type:mt.TOKEN_VALUE}}var jr,$r,An={name:"list-style-type",initialValue:"none",prefix:!(tt[tt.DISCLOSURE_CLOSED=51]="DISCLOSURE_CLOSED"),type:mt.IDENT_VALUE,parse:function(I){switch(I){case"disc":return Xe.DISC;case"circle":return Xe.CIRCLE;case"square":return Xe.SQUARE;case"decimal":return Xe.DECIMAL;case"cjk-decimal":return Xe.CJK_DECIMAL;case"decimal-leading-zero":return Xe.DECIMAL_LEADING_ZERO;case"lower-roman":return Xe.LOWER_ROMAN;case"upper-roman":return Xe.UPPER_ROMAN;case"lower-greek":return Xe.LOWER_GREEK;case"lower-alpha":return Xe.LOWER_ALPHA;case"upper-alpha":return Xe.UPPER_ALPHA;case"arabic-indic":return Xe.ARABIC_INDIC;case"armenian":return Xe.ARMENIAN;case"bengali":return Xe.BENGALI;case"cambodian":return Xe.CAMBODIAN;case"cjk-earthly-branch":return Xe.CJK_EARTHLY_BRANCH;case"cjk-heavenly-stem":return Xe.CJK_HEAVENLY_STEM;case"cjk-ideographic":return Xe.CJK_IDEOGRAPHIC;case"devanagari":return Xe.DEVANAGARI;case"ethiopic-numeric":return Xe.ETHIOPIC_NUMERIC;case"georgian":return Xe.GEORGIAN;case"gujarati":return Xe.GUJARATI;case"gurmukhi":return Xe.GURMUKHI;case"hebrew":return Xe.HEBREW;case"hiragana":return Xe.HIRAGANA;case"hiragana-iroha":return Xe.HIRAGANA_IROHA;case"japanese-formal":return Xe.JAPANESE_FORMAL;case"japanese-informal":return Xe.JAPANESE_INFORMAL;case"kannada":return Xe.KANNADA;case"katakana":return Xe.KATAKANA;case"katakana-iroha":return Xe.KATAKANA_IROHA;case"khmer":return Xe.KHMER;case"korean-hangul-formal":return Xe.KOREAN_HANGUL_FORMAL;case"korean-hanja-formal":return Xe.KOREAN_HANJA_FORMAL;case"korean-hanja-informal":return Xe.KOREAN_HANJA_INFORMAL;case"lao":return Xe.LAO;case"lower-armenian":return Xe.LOWER_ARMENIAN;case"malayalam":return Xe.MALAYALAM;case"mongolian":return Xe.MONGOLIAN;case"myanmar":return Xe.MYANMAR;case"oriya":return Xe.ORIYA;case"persian":return Xe.PERSIAN;case"simp-chinese-formal":return Xe.SIMP_CHINESE_FORMAL;case"simp-chinese-informal":return Xe.SIMP_CHINESE_INFORMAL;case"tamil":return Xe.TAMIL;case"telugu":return Xe.TELUGU;case"thai":return Xe.THAI;case"tibetan":return Xe.TIBETAN;case"trad-chinese-formal":return Xe.TRAD_CHINESE_FORMAL;case"trad-chinese-informal":return Xe.TRAD_CHINESE_INFORMAL;case"upper-armenian":return Xe.UPPER_ARMENIAN;case"disclosure-open":return Xe.DISCLOSURE_OPEN;case"disclosure-closed":return Xe.DISCLOSURE_CLOSED;case"none":default:return Xe.NONE}}},Hu=Va("top"),Nu=Va("right"),qu=Va("bottom"),Ou=Va("left");($r=jr||(jr={}))[$r.VISIBLE=0]="VISIBLE",$r[$r.HIDDEN=1]="HIDDEN",$r[$r.SCROLL=2]="SCROLL";function Ka(I){return{name:"padding-"+I,initialValue:"0",prefix:!1,type:mt.TYPE_VALUE,format:"length-percentage"}}var Sa,ts,Fr,ua,Ru={name:"overflow",initialValue:"visible",prefix:!($r[$r.AUTO=3]="AUTO"),type:mt.LIST,parse:function(I){return I.filter($e).map(function(z){switch(z.value){case"hidden":return jr.HIDDEN;case"scroll":return jr.SCROLL;case"auto":return jr.AUTO;case"visible":default:return jr.VISIBLE}})}},zu={name:"overflow-wrap",initialValue:(ts=Sa||(Sa={})).NORMAL="normal",prefix:!(ts.BREAK_WORD="break-word"),type:mt.IDENT_VALUE,parse:function(I){switch(I){case"break-word":return Sa.BREAK_WORD;case"normal":default:return Sa.NORMAL}}},Vu=Ka("top"),Ku=Ka("right"),Wu=Ka("bottom"),Yu=Ka("left");(ua=Fr||(Fr={}))[ua.LEFT=0]="LEFT",ua[ua.CENTER=1]="CENTER";var Gr,_r,Xu={name:"text-align",initialValue:"left",prefix:!(ua[ua.RIGHT=2]="RIGHT"),type:mt.IDENT_VALUE,parse:function(I){switch(I){case"right":return Fr.RIGHT;case"center":case"justify":return Fr.CENTER;case"left":default:return Fr.LEFT}}};(_r=Gr||(Gr={}))[_r.STATIC=0]="STATIC",_r[_r.RELATIVE=1]="RELATIVE",_r[_r.ABSOLUTE=2]="ABSOLUTE",_r[_r.FIXED=3]="FIXED";var Pr,Jr,ju={name:"position",initialValue:"static",prefix:!(_r[_r.STICKY=4]="STICKY"),type:mt.IDENT_VALUE,parse:function(I){switch(I){case"relative":return Gr.RELATIVE;case"absolute":return Gr.ABSOLUTE;case"fixed":return Gr.FIXED;case"sticky":return Gr.STICKY}return Gr.STATIC}},$u={name:"text-shadow",initialValue:"none",type:mt.LIST,prefix:!1,parse:function(I){return I.length===1&&qe(I[0],"none")?[]:pt(I).map(function(z){for(var W={color:zt.TRANSPARENT,offsetX:St,offsetY:St,blur:St},te=0,le=0;le<z.length;le++){var ye=z[le];wt(ye)?(te===0?W.offsetX=ye:te===1?W.offsetY=ye:W.blur=ye,te++):W.color=jt(ye)}return W})}};(Jr=Pr||(Pr={}))[Jr.NONE=0]="NONE",Jr[Jr.LOWERCASE=1]="LOWERCASE",Jr[Jr.UPPERCASE=2]="UPPERCASE";var ha,da,Gu={name:"text-transform",initialValue:"none",prefix:!(Jr[Jr.CAPITALIZE=3]="CAPITALIZE"),type:mt.IDENT_VALUE,parse:function(I){switch(I){case"uppercase":return Pr.UPPERCASE;case"lowercase":return Pr.LOWERCASE;case"capitalize":return Pr.CAPITALIZE}return Pr.NONE}},Ju={name:"transform",initialValue:"none",prefix:!0,type:mt.VALUE,parse:function(I){if(I.type===ce.IDENT_TOKEN&&I.value==="none"||I.type!==ce.FUNCTION)return null;var z=Zu[I.name];if(z===void 0)throw new Error('Attempting to parse an unsupported transform function "'+I.name+'"');return z(I.values)}},Zu={matrix:function(I){var z=I.filter(function(W){return W.type===ce.NUMBER_TOKEN}).map(function(W){return W.number});return z.length===6?z:null},matrix3d:function(I){var z=I.filter(function(Ce){return Ce.type===ce.NUMBER_TOKEN}).map(function(Ce){return Ce.number}),W=z[0],te=z[1],le=(z[2],z[3],z[4]),ye=z[5],xe=(z[6],z[7],z[8],z[9],z[10],z[11],z[12]),Be=z[13];return z[14],z[15],z.length===16?[W,te,le,ye,xe,Be]:null}},is={type:ce.PERCENTAGE_TOKEN,number:50,flags:4},eh=[is,is],th={name:"transform-origin",initialValue:"50% 50%",prefix:!0,type:mt.LIST,parse:function(I){var z=I.filter(vt);return z.length!==2?eh:[z[0],z[1]]}};(da=ha||(ha={}))[da.VISIBLE=0]="VISIBLE",da[da.HIDDEN=1]="HIDDEN";var ka,gn,ih={name:"visible",initialValue:"none",prefix:!(da[da.COLLAPSE=2]="COLLAPSE"),type:mt.IDENT_VALUE,parse:function(I){switch(I){case"hidden":return ha.HIDDEN;case"collapse":return ha.COLLAPSE;case"visible":default:return ha.VISIBLE}}};(gn=ka||(ka={})).NORMAL="normal",gn.BREAK_ALL="break-all";var Ea,mn,rh={name:"word-break",initialValue:"normal",prefix:!(gn.KEEP_ALL="keep-all"),type:mt.IDENT_VALUE,parse:function(I){switch(I){case"break-all":return ka.BREAK_ALL;case"keep-all":return ka.KEEP_ALL;case"normal":default:return ka.NORMAL}}},ah={name:"z-index",initialValue:"auto",prefix:!1,type:mt.VALUE,parse:function(I){if(I.type===ce.IDENT_TOKEN)return{auto:!0,order:0};if(rt(I))return{auto:!1,order:I.number};throw new Error("Invalid z-index number parsed")}},nh={name:"opacity",initialValue:"1",type:mt.VALUE,prefix:!1,parse:function(I){return rt(I)?I.number:1}},sh={name:"text-decoration-color",initialValue:"transparent",prefix:!1,type:mt.TYPE_VALUE,format:"color"},oh={name:"text-decoration-line",initialValue:"none",prefix:!1,type:mt.LIST,parse:function(I){return I.filter($e).map(function(z){switch(z.value){case"underline":return 1;case"overline":return 2;case"line-through":return 3;case"none":return 4}return 0}).filter(function(z){return z!==0})}},lh={name:"font-family",initialValue:"",prefix:!1,type:mt.LIST,parse:function(I){return I.filter(ch).map(function(z){return z.value})}},ch=function(I){return I.type===ce.STRING_TOKEN||I.type===ce.IDENT_TOKEN},uh={name:"font-size",initialValue:"0",prefix:!1,type:mt.TYPE_VALUE,format:"length"},hh={name:"font-weight",initialValue:"normal",type:mt.VALUE,prefix:!1,parse:function(I){if(rt(I))return I.number;if($e(I))switch(I.value){case"bold":return 700;case"normal":default:return 400}return 400}},dh={name:"font-variant",initialValue:"none",type:mt.LIST,prefix:!1,parse:function(I){return I.filter($e).map(function(z){return z.value})}};(mn=Ea||(Ea={})).NORMAL="normal",mn.ITALIC="italic";function Li(I,z){return(I&z)!=0}function rs(I,z,W){if(!I)return"";var te=I[Math.min(z,I.length-1)];return te?W?te.open:te.close:""}var fh={name:"font-style",initialValue:"normal",prefix:!(mn.OBLIQUE="oblique"),type:mt.IDENT_VALUE,parse:function(I){switch(I){case"oblique":return Ea.OBLIQUE;case"italic":return Ea.ITALIC;case"normal":default:return Ea.NORMAL}}},ph={name:"content",initialValue:"none",type:mt.LIST,prefix:!1,parse:function(I){if(I.length===0)return[];var z=I[0];return z.type===ce.IDENT_TOKEN&&z.value==="none"?[]:I}},Ah={name:"counter-increment",initialValue:"none",prefix:!0,type:mt.LIST,parse:function(I){if(I.length===0)return null;var z=I[0];if(z.type===ce.IDENT_TOKEN&&z.value==="none")return null;for(var W=[],te=I.filter(ft),le=0;le<te.length;le++){var ye=te[le],xe=te[le+1];if(ye.type===ce.IDENT_TOKEN){var Be=xe&&rt(xe)?xe.number:1;W.push({counter:ye.value,increment:Be})}}return W}},gh={name:"counter-reset",initialValue:"none",prefix:!0,type:mt.LIST,parse:function(I){if(I.length===0)return[];for(var z=[],W=I.filter(ft),te=0;te<W.length;te++){var le=W[te],ye=W[te+1];if($e(le)&&le.value!=="none"){var xe=ye&&rt(ye)?ye.number:0;z.push({counter:le.value,reset:xe})}}return z}},mh={name:"quotes",initialValue:"none",prefix:!0,type:mt.LIST,parse:function(I){if(I.length===0)return null;var z=I[0];if(z.type===ce.IDENT_TOKEN&&z.value==="none")return null;var W=[],te=I.filter(yt);if(te.length%2!=0)return null;for(var le=0;le<te.length;le+=2){var ye=te[le].value,xe=te[le+1].value;W.push({open:ye,close:xe})}return W}},yh={name:"box-shadow",initialValue:"none",type:mt.LIST,prefix:!1,parse:function(I){return I.length===1&&qe(I[0],"none")?[]:pt(I).map(function(z){for(var W={color:255,offsetX:St,offsetY:St,blur:St,spread:St,inset:!1},te=0,le=0;le<z.length;le++){var ye=z[le];qe(ye,"inset")?W.inset=!0:wt(ye)?(te===0?W.offsetX=ye:te===1?W.offsetY=ye:te===2?W.blur=ye:W.spread=ye,te++):W.color=jt(ye)}return W})}},vh=(Zr.prototype.isVisible=function(){return 0<this.display&&0<this.opacity&&this.visibility===ha.VISIBLE},Zr.prototype.isTransparent=function(){return kt(this.backgroundColor)},Zr.prototype.isTransformed=function(){return this.transform!==null},Zr.prototype.isPositioned=function(){return this.position!==Gr.STATIC},Zr.prototype.isPositionedWithZIndex=function(){return this.isPositioned()&&!this.zIndex.auto},Zr.prototype.isFloating=function(){return this.float!==Xr.NONE},Zr.prototype.isInlineLevel=function(){return Li(this.display,4)||Li(this.display,33554432)||Li(this.display,268435456)||Li(this.display,536870912)||Li(this.display,67108864)||Li(this.display,134217728)},Zr);function Zr(I){this.backgroundClip=Ct(wr,I.backgroundClip),this.backgroundColor=Ct(Ri,I.backgroundColor),this.backgroundImage=Ct(fn,I.backgroundImage),this.backgroundOrigin=Ct(ba,I.backgroundOrigin),this.backgroundPosition=Ct(Ca,I.backgroundPosition),this.backgroundRepeat=Ct(pn,I.backgroundRepeat),this.backgroundSize=Ct(hu,I.backgroundSize),this.borderTopColor=Ct(fu,I.borderTopColor),this.borderRightColor=Ct(pu,I.borderRightColor),this.borderBottomColor=Ct(Au,I.borderBottomColor),this.borderLeftColor=Ct(gu,I.borderLeftColor),this.borderTopLeftRadius=Ct(mu,I.borderTopLeftRadius),this.borderTopRightRadius=Ct(yu,I.borderTopRightRadius),this.borderBottomRightRadius=Ct(vu,I.borderBottomRightRadius),this.borderBottomLeftRadius=Ct(xu,I.borderBottomLeftRadius),this.borderTopStyle=Ct(bu,I.borderTopStyle),this.borderRightStyle=Ct(Cu,I.borderRightStyle),this.borderBottomStyle=Ct(wu,I.borderBottomStyle),this.borderLeftStyle=Ct(Su,I.borderLeftStyle),this.borderTopWidth=Ct(ku,I.borderTopWidth),this.borderRightWidth=Ct(Eu,I.borderRightWidth),this.borderBottomWidth=Ct(Bu,I.borderBottomWidth),this.borderLeftWidth=Ct(Du,I.borderLeftWidth),this.boxShadow=Ct(yh,I.boxShadow),this.color=Ct(Tu,I.color),this.display=Ct(Mu,I.display),this.float=Ct(_u,I.cssFloat),this.fontFamily=Ct(lh,I.fontFamily),this.fontSize=Ct(uh,I.fontSize),this.fontStyle=Ct(fh,I.fontStyle),this.fontVariant=Ct(dh,I.fontVariant),this.fontWeight=Ct(hh,I.fontWeight),this.letterSpacing=Ct(Iu,I.letterSpacing),this.lineBreak=Ct(Uu,I.lineBreak),this.lineHeight=Ct(Qu,I.lineHeight),this.listStyleImage=Ct(Lu,I.listStyleImage),this.listStylePosition=Ct(Pu,I.listStylePosition),this.listStyleType=Ct(An,I.listStyleType),this.marginTop=Ct(Hu,I.marginTop),this.marginRight=Ct(Nu,I.marginRight),this.marginBottom=Ct(qu,I.marginBottom),this.marginLeft=Ct(Ou,I.marginLeft),this.opacity=Ct(nh,I.opacity);var z=Ct(Ru,I.overflow);this.overflowX=z[0],this.overflowY=z[1<z.length?1:0],this.overflowWrap=Ct(zu,I.overflowWrap),this.paddingTop=Ct(Vu,I.paddingTop),this.paddingRight=Ct(Ku,I.paddingRight),this.paddingBottom=Ct(Wu,I.paddingBottom),this.paddingLeft=Ct(Yu,I.paddingLeft),this.position=Ct(ju,I.position),this.textAlign=Ct(Xu,I.textAlign),this.textDecorationColor=Ct(sh,I.textDecorationColor||I.color),this.textDecorationLine=Ct(oh,I.textDecorationLine),this.textShadow=Ct($u,I.textShadow),this.textTransform=Ct(Gu,I.textTransform),this.transform=Ct(Ju,I.transform),this.transformOrigin=Ct(th,I.transformOrigin),this.visibility=Ct(ih,I.visibility),this.wordBreak=Ct(rh,I.wordBreak),this.zIndex=Ct(ah,I.zIndex)}var as,xh=function(I){this.content=Ct(ph,I.content),this.quotes=Ct(mh,I.quotes)},ns=function(I){this.counterIncrement=Ct(Ah,I.counterIncrement),this.counterReset=Ct(gh,I.counterReset)},Ct=function(I,z){var W=new xt,te=z!=null?z.toString():I.initialValue;W.write(te);var le=new At(W.read());switch(I.type){case mt.IDENT_VALUE:var ye=le.parseComponentValue();return I.parse($e(ye)?ye.value:I.initialValue);case mt.VALUE:return I.parse(le.parseComponentValue());case mt.LIST:return I.parse(le.parseComponentValues());case mt.TOKEN_VALUE:return le.parseComponentValue();case mt.TYPE_VALUE:switch(I.format){case"angle":return Zt(le.parseComponentValue());case"color":return jt(le.parseComponentValue());case"image":return Vr(le.parseComponentValue());case"length":var xe=le.parseComponentValue();return wt(xe)?xe:St;case"length-percentage":var Be=le.parseComponentValue();return vt(Be)?Be:St}}throw new Error("Attempting to parse unsupported css format type "+I.format)},Ir=function(I){this.styles=new vh(window.getComputedStyle(I,null)),this.textNodes=[],this.elements=[],this.styles.transform!==null&&Ps(I)&&(I.style.transform="none"),this.bounds=a(I),this.flags=0},Wa=function(I,z){this.text=I,this.bounds=z},bh=function(I){var z=I.ownerDocument;if(z){var W=z.createElement("html2canvaswrapper");W.appendChild(I.cloneNode(!0));var te=I.parentNode;if(te){te.replaceChild(W,I);var le=a(W);return W.firstChild&&te.replaceChild(W.firstChild,W),le}}return new r(0,0,0,0)},Ch=function(I,z,W){var te=I.ownerDocument;if(!te)throw new Error("Node has no owner document");var le=te.createRange();return le.setStart(I,z),le.setEnd(I,z+W),r.fromClientRect(le.getBoundingClientRect())},wh=function(I,z){return z.letterSpacing!==0?o(I).map(function(W){return c(W)}):Sh(I,z)},Sh=function(I,z){for(var W,te=function(ye,xe){var Be=o(ye),Ce=b(Be,xe),Me=Ce[0],Te=Ce[1],at=Ce[2],lt=Be.length,gt=0,ut=0;return{next:function(){if(lt<=ut)return{done:!0,value:null};for(var bt=X;ut<lt&&(bt=m(Be,Te,Me,++ut,at))===X;);if(bt===X&&ut!==lt)return{done:!0,value:null};var Et=new re(Be,bt,gt,ut);return gt=ut,{value:Et,done:!1}}}}(I,{lineBreak:z.lineBreak,wordBreak:z.overflowWrap===Sa.BREAK_WORD?"break-word":z.wordBreak}),le=[];!(W=te.next()).done;)W.value&&le.push(W.value.slice());return le},kh=function(I,z){this.text=Eh(I.data,z.textTransform),this.textBounds=function(W,te,le){var ye=wh(W,te),xe=[],Be=0;return ye.forEach(function(Ce){if(te.textDecorationLine.length||0<Ce.trim().length)if(Gt.SUPPORT_RANGE_BOUNDS)xe.push(new Wa(Ce,Ch(le,Be,Ce.length)));else{var Me=le.splitText(Ce.length);xe.push(new Wa(Ce,bh(le))),le=Me}else Gt.SUPPORT_RANGE_BOUNDS||(le=le.splitText(Ce.length));Be+=Ce.length}),xe}(this.text,z,I)},Eh=function(I,z){switch(z){case Pr.LOWERCASE:return I.toLowerCase();case Pr.CAPITALIZE:return I.replace(Bh,Dh);case Pr.UPPERCASE:return I.toUpperCase();default:return I}},Bh=/(^|\s|:|-|\(|\))([a-z])/g,Dh=function(I,z,W){return 0<I.length?z+W.toUpperCase():I},ss=(e(os,as=Ir),os);function os(I){var z=as.call(this,I)||this;return z.src=I.currentSrc||I.src,z.intrinsicWidth=I.naturalWidth,z.intrinsicHeight=I.naturalHeight,Mi.getInstance().addImage(z.src),z}var ls,cs=(e(us,ls=Ir),us);function us(I){var z=ls.call(this,I)||this;return z.canvas=I,z.intrinsicWidth=I.width,z.intrinsicHeight=I.height,z}var hs,ds=(e(fs,hs=Ir),fs);function fs(I){var z=hs.call(this,I)||this,W=new XMLSerializer;return z.svg="data:image/svg+xml,"+encodeURIComponent(W.serializeToString(I)),z.intrinsicWidth=I.width.baseVal.value,z.intrinsicHeight=I.height.baseVal.value,Mi.getInstance().addImage(z.svg),z}var ps,As=(e(gs,ps=Ir),gs);function gs(I){var z=ps.call(this,I)||this;return z.value=I.value,z}var ms,yn=(e(ys,ms=Ir),ys);function ys(I){var z=ms.call(this,I)||this;return z.start=I.start,z.reversed=typeof I.reversed=="boolean"&&I.reversed===!0,z}var vs,Th=[{type:ce.DIMENSION_TOKEN,flags:0,unit:"px",number:3}],Mh=[{type:ce.PERCENTAGE_TOKEN,flags:0,number:50}],Ya="checkbox",Xa="radio",Fh="password",xs=707406591,vn=(e(bs,vs=Ir),bs);function bs(I){var z=vs.call(this,I)||this;switch(z.type=I.type.toLowerCase(),z.checked=I.checked,z.value=function(W){var te=W.type===Fh?new Array(W.value.length+1).join("•"):W.value;return te.length===0?W.placeholder||"":te}(I),z.type!==Ya&&z.type!==Xa||(z.styles.backgroundColor=3739148031,z.styles.borderTopColor=z.styles.borderRightColor=z.styles.borderBottomColor=z.styles.borderLeftColor=2779096575,z.styles.borderTopWidth=z.styles.borderRightWidth=z.styles.borderBottomWidth=z.styles.borderLeftWidth=1,z.styles.borderTopStyle=z.styles.borderRightStyle=z.styles.borderBottomStyle=z.styles.borderLeftStyle=xr.SOLID,z.styles.backgroundClip=[Wt.BORDER_BOX],z.styles.backgroundOrigin=[0],z.bounds=function(W){return W.width>W.height?new r(W.left+(W.width-W.height)/2,W.top,W.height,W.height):W.width<W.height?new r(W.left,W.top+(W.height-W.width)/2,W.width,W.width):W}(z.bounds)),z.type){case Ya:z.styles.borderTopRightRadius=z.styles.borderTopLeftRadius=z.styles.borderBottomRightRadius=z.styles.borderBottomLeftRadius=Th;break;case Xa:z.styles.borderTopRightRadius=z.styles.borderTopLeftRadius=z.styles.borderBottomRightRadius=z.styles.borderBottomLeftRadius=Mh}return z}var Cs,ws=(e(Ss,Cs=Ir),Ss);function Ss(I){var z=Cs.call(this,I)||this,W=I.options[I.selectedIndex||0];return z.value=W&&W.text||"",z}var ks,Es=(e(Bs,ks=Ir),Bs);function Bs(I){var z=ks.call(this,I)||this;return z.value=I.value,z}function Ds(I){return jt(At.create(I).parseComponentValue())}var Ts,Ms=(e(Fs,Ts=Ir),Fs);function Fs(I){var z=Ts.call(this,I)||this;z.src=I.src,z.width=parseInt(I.width,10)||0,z.height=parseInt(I.height,10)||0,z.backgroundColor=z.styles.backgroundColor;try{if(I.contentWindow&&I.contentWindow.document&&I.contentWindow.document.documentElement){z.tree=Qs(I.contentWindow.document.documentElement);var W=I.contentWindow.document.documentElement?Ds(getComputedStyle(I.contentWindow.document.documentElement).backgroundColor):zt.TRANSPARENT,te=I.contentWindow.document.body?Ds(getComputedStyle(I.contentWindow.document.body).backgroundColor):zt.TRANSPARENT;z.backgroundColor=kt(W)?kt(te)?z.styles.backgroundColor:te:W}}catch{}return z}function _s(I){return I.tagName==="STYLE"}var _h=["OL","UL","MENU"],Is=function(I,z,W){for(var te=I.firstChild,le=void 0;te;te=le)if(le=te.nextSibling,Ls(te)&&0<te.data.trim().length)z.textNodes.push(new kh(te,z.styles));else if(xn(te)){var ye=Us(te);ye.styles.isVisible()&&(Ih(te,ye,W)?ye.flags|=4:Uh(ye.styles)&&(ye.flags|=2),_h.indexOf(te.tagName)!==-1&&(ye.flags|=8),z.elements.push(ye),ja(te)||Hs(te)||$a(te)||Is(te,ye,W))}},Us=function(I){return Hh(I)?new ss(I):Ns(I)?new cs(I):Hs(I)?new ds(I):Qh(I)?new As(I):Lh(I)?new yn(I):Ph(I)?new vn(I):$a(I)?new ws(I):ja(I)?new Es(I):qs(I)?new Ms(I):new Ir(I)},Qs=function(I){var z=Us(I);return z.flags|=4,Is(I,z,z),z},Ih=function(I,z,W){return z.styles.isPositionedWithZIndex()||z.styles.opacity<1||z.styles.isTransformed()||bn(I)&&W.styles.isTransparent()},Uh=function(I){return I.isPositioned()||I.isFloating()},Ls=function(I){return I.nodeType===Node.TEXT_NODE},xn=function(I){return I.nodeType===Node.ELEMENT_NODE},Ps=function(I){return I.style!==void 0},Qh=function(I){return I.tagName==="LI"},Lh=function(I){return I.tagName==="OL"},Ph=function(I){return I.tagName==="INPUT"},Hs=function(I){return I.tagName==="svg"},bn=function(I){return I.tagName==="BODY"},Ns=function(I){return I.tagName==="CANVAS"},Hh=function(I){return I.tagName==="IMG"},qs=function(I){return I.tagName==="IFRAME"},ja=function(I){return I.tagName==="TEXTAREA"},$a=function(I){return I.tagName==="SELECT"},Nh=(Ba.prototype.getCounterValue=function(I){var z=this.counters[I];return z&&z.length?z[z.length-1]:1},Ba.prototype.getCounterValues=function(I){var z=this.counters[I];return z||[]},Ba.prototype.pop=function(I){var z=this;I.forEach(function(W){return z.counters[W].pop()})},Ba.prototype.parse=function(I){var z=this,W=I.counterIncrement,te=I.counterReset,le=!0;W!==null&&W.forEach(function(xe){var Be=z.counters[xe.counter];Be&&xe.increment!==0&&(le=!1,Be[Math.max(0,Be.length-1)]+=xe.increment)});var ye=[];return le&&te.forEach(function(xe){var Be=z.counters[xe.counter];ye.push(xe.counter),Be||(Be=z.counters[xe.counter]=[]),Be.push(xe.reset)}),ye},Ba);function Ba(){this.counters={}}function fa(I,z,W,te,le,ye){return I<z||W<I?Ta(I,le,0<ye.length):te.integers.reduce(function(xe,Be,Ce){for(;Be<=I;)I-=Be,xe+=te.values[Ce];return xe},"")+ye}function Os(I,z,W,te){for(var le="";W||I--,le=te(I)+le,z<=(I/=z)*z;);return le}function Si(I,z,W,te,le){var ye=W-z+1;return(I<0?"-":"")+(Os(Math.abs(I),ye,te,function(xe){return c(Math.floor(xe%ye)+z)})+le)}function la(I,z,W){W===void 0&&(W=". ");var te=z.length;return Os(Math.abs(I),te,!1,function(le){return z[Math.floor(le%te)]})+W}function Hr(I,z,W,te,le,ye){if(I<-9999||9999<I)return Ta(I,Xe.CJK_DECIMAL,0<le.length);var xe=Math.abs(I),Be=le;if(xe===0)return z[0]+Be;for(var Ce=0;0<xe&&Ce<=4;Ce++){var Me=xe%10;Me==0&&Li(ye,1)&&Be!==""?Be=z[Me]+Be:1<Me||Me==1&&Ce===0||Me==1&&Ce===1&&Li(ye,2)||Me==1&&Ce===1&&Li(ye,4)&&100<I||Me==1&&1<Ce&&Li(ye,8)?Be=z[Me]+(0<Ce?W[Ce-1]:"")+Be:Me==1&&0<Ce&&(Be=W[Ce-1]+Be),xe=Math.floor(xe/10)}return(I<0?te:"")+Be}var Da,Ga,Rs={integers:[1e3,900,500,400,100,90,50,40,10,9,5,4,1],values:["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"]},zs={integers:[9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["Ք","Փ","Ւ","Ց","Ր","Տ","Վ","Ս","Ռ","Ջ","Պ","Չ","Ո","Շ","Ն","Յ","Մ","Ճ","Ղ","Ձ","Հ","Կ","Ծ","Խ","Լ","Ի","Ժ","Թ","Ը","Է","Զ","Ե","Դ","Գ","Բ","Ա"]},qh={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,400,300,200,100,90,80,70,60,50,40,30,20,19,18,17,16,15,10,9,8,7,6,5,4,3,2,1],values:["י׳","ט׳","ח׳","ז׳","ו׳","ה׳","ד׳","ג׳","ב׳","א׳","ת","ש","ר","ק","צ","פ","ע","ס","נ","מ","ל","כ","יט","יח","יז","טז","טו","י","ט","ח","ז","ו","ה","ד","ג","ב","א"]},Oh={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["ჵ","ჰ","ჯ","ჴ","ხ","ჭ","წ","ძ","ც","ჩ","შ","ყ","ღ","ქ","ფ","ჳ","ტ","ს","რ","ჟ","პ","ო","ჲ","ნ","მ","ლ","კ","ი","თ","ჱ","ზ","ვ","ე","დ","გ","ბ","ა"]},Cn="마이너스",Ta=function(I,z,W){var te=W?". ":"",le=W?"、":"",ye=W?", ":"",xe=W?" ":"";switch(z){case Xe.DISC:return"•"+xe;case Xe.CIRCLE:return"◦"+xe;case Xe.SQUARE:return"◾"+xe;case Xe.DECIMAL_LEADING_ZERO:var Be=Si(I,48,57,!0,te);return Be.length<4?"0"+Be:Be;case Xe.CJK_DECIMAL:return la(I,"〇一二三四五六七八九",le);case Xe.LOWER_ROMAN:return fa(I,1,3999,Rs,Xe.DECIMAL,te).toLowerCase();case Xe.UPPER_ROMAN:return fa(I,1,3999,Rs,Xe.DECIMAL,te);case Xe.LOWER_GREEK:return Si(I,945,969,!1,te);case Xe.LOWER_ALPHA:return Si(I,97,122,!1,te);case Xe.UPPER_ALPHA:return Si(I,65,90,!1,te);case Xe.ARABIC_INDIC:return Si(I,1632,1641,!0,te);case Xe.ARMENIAN:case Xe.UPPER_ARMENIAN:return fa(I,1,9999,zs,Xe.DECIMAL,te);case Xe.LOWER_ARMENIAN:return fa(I,1,9999,zs,Xe.DECIMAL,te).toLowerCase();case Xe.BENGALI:return Si(I,2534,2543,!0,te);case Xe.CAMBODIAN:case Xe.KHMER:return Si(I,6112,6121,!0,te);case Xe.CJK_EARTHLY_BRANCH:return la(I,"子丑寅卯辰巳午未申酉戌亥",le);case Xe.CJK_HEAVENLY_STEM:return la(I,"甲乙丙丁戊己庚辛壬癸",le);case Xe.CJK_IDEOGRAPHIC:case Xe.TRAD_CHINESE_INFORMAL:return Hr(I,"零一二三四五六七八九","十百千萬","負",le,14);case Xe.TRAD_CHINESE_FORMAL:return Hr(I,"零壹貳參肆伍陸柒捌玖","拾佰仟萬","負",le,15);case Xe.SIMP_CHINESE_INFORMAL:return Hr(I,"零一二三四五六七八九","十百千萬","负",le,14);case Xe.SIMP_CHINESE_FORMAL:return Hr(I,"零壹贰叁肆伍陆柒捌玖","拾佰仟萬","负",le,15);case Xe.JAPANESE_INFORMAL:return Hr(I,"〇一二三四五六七八九","十百千万","マイナス",le,0);case Xe.JAPANESE_FORMAL:return Hr(I,"零壱弐参四伍六七八九","拾百千万","マイナス",le,7);case Xe.KOREAN_HANGUL_FORMAL:return Hr(I,"영일이삼사오육칠팔구","십백천만",Cn,ye,7);case Xe.KOREAN_HANJA_INFORMAL:return Hr(I,"零一二三四五六七八九","十百千萬",Cn,ye,0);case Xe.KOREAN_HANJA_FORMAL:return Hr(I,"零壹貳參四五六七八九","拾百千",Cn,ye,7);case Xe.DEVANAGARI:return Si(I,2406,2415,!0,te);case Xe.GEORGIAN:return fa(I,1,19999,Oh,Xe.DECIMAL,te);case Xe.GUJARATI:return Si(I,2790,2799,!0,te);case Xe.GURMUKHI:return Si(I,2662,2671,!0,te);case Xe.HEBREW:return fa(I,1,10999,qh,Xe.DECIMAL,te);case Xe.HIRAGANA:return la(I,"あいうえおかきくけこさしすせそたちつてとなにぬねのはひふへほまみむめもやゆよらりるれろわゐゑをん");case Xe.HIRAGANA_IROHA:return la(I,"いろはにほへとちりぬるをわかよたれそつねならむうゐのおくやまけふこえてあさきゆめみしゑひもせす");case Xe.KANNADA:return Si(I,3302,3311,!0,te);case Xe.KATAKANA:return la(I,"アイウエオカキクケコサシスセソタチツテトナニヌネノハヒフヘホマミムメモヤユヨラリルレロワヰヱヲン",le);case Xe.KATAKANA_IROHA:return la(I,"イロハニホヘトチリヌルヲワカヨタレソツネナラムウヰノオクヤマケフコエテアサキユメミシヱヒモセス",le);case Xe.LAO:return Si(I,3792,3801,!0,te);case Xe.MONGOLIAN:return Si(I,6160,6169,!0,te);case Xe.MYANMAR:return Si(I,4160,4169,!0,te);case Xe.ORIYA:return Si(I,2918,2927,!0,te);case Xe.PERSIAN:return Si(I,1776,1785,!0,te);case Xe.TAMIL:return Si(I,3046,3055,!0,te);case Xe.TELUGU:return Si(I,3174,3183,!0,te);case Xe.THAI:return Si(I,3664,3673,!0,te);case Xe.TIBETAN:return Si(I,3872,3881,!0,te);case Xe.DECIMAL:default:return Si(I,48,57,!0,te)}},Vs="data-html2canvas-ignore",Ks=(ea.prototype.toIFrame=function(I,z){var W=this,te=Rh(I,z);if(!te.contentWindow)return Promise.reject("Unable to find iframe window");var le=I.defaultView.pageXOffset,ye=I.defaultView.pageYOffset,xe=te.contentWindow,Be=xe.document,Ce=zh(te).then(function(){return s(W,void 0,void 0,function(){var Me;return n(this,function(Te){switch(Te.label){case 0:return this.scrolledElements.forEach(Wh),xe&&(xe.scrollTo(z.left,z.top),!/(iPad|iPhone|iPod)/g.test(navigator.userAgent)||xe.scrollY===z.top&&xe.scrollX===z.left||(Be.documentElement.style.top=-z.top+"px",Be.documentElement.style.left=-z.left+"px",Be.documentElement.style.position="absolute")),Me=this.options.onclone,this.clonedReferenceElement===void 0?[2,Promise.reject("Error finding the "+this.referenceElement.nodeName+" in the cloned document")]:Be.fonts&&Be.fonts.ready?[4,Be.fonts.ready]:[3,2];case 1:Te.sent(),Te.label=2;case 2:return typeof Me=="function"?[2,Promise.resolve().then(function(){return Me(Be)}).then(function(){return te})]:[2,te]}})})});return Be.open(),Be.write(Vh(document.doctype)+"<html></html>"),Kh(this.referenceElement.ownerDocument,le,ye),Be.replaceChild(Be.adoptNode(this.documentElement),Be.documentElement),Be.close(),Ce},ea.prototype.createElementClone=function(I){return Ns(I)?this.createCanvasClone(I):_s(I)?this.createStyleClone(I):I.cloneNode(!1)},ea.prototype.createStyleClone=function(I){try{var z=I.sheet;if(z&&z.cssRules){var W=[].slice.call(z.cssRules,0).reduce(function(le,ye){return ye&&typeof ye.cssText=="string"?le+ye.cssText:le},""),te=I.cloneNode(!1);return te.textContent=W,te}}catch(le){if(ri.getInstance(this.options.id).error("Unable to access cssRules property",le),le.name!=="SecurityError")throw le}return I.cloneNode(!1)},ea.prototype.createCanvasClone=function(I){if(this.options.inlineImages&&I.ownerDocument){var z=I.ownerDocument.createElement("img");try{return z.src=I.toDataURL(),z}catch{ri.getInstance(this.options.id).info("Unable to clone canvas contents, canvas is tainted")}}var W=I.cloneNode(!1);try{W.width=I.width,W.height=I.height;var te=I.getContext("2d"),le=W.getContext("2d");return le&&(te?le.putImageData(te.getImageData(0,0,I.width,I.height),0,0):le.drawImage(I,0,0)),W}catch{}return W},ea.prototype.cloneNode=function(I){if(Ls(I))return document.createTextNode(I.data);if(!I.ownerDocument)return I.cloneNode(!1);var z=I.ownerDocument.defaultView;if(Ps(I)&&z){var W=this.createElementClone(I),te=z.getComputedStyle(I),le=z.getComputedStyle(I,":before"),ye=z.getComputedStyle(I,":after");this.referenceElement===I&&(this.clonedReferenceElement=W),bn(W)&&Yh(W);for(var xe=this.counters.parse(new ns(te)),Be=this.resolvePseudoContent(I,W,le,Da.BEFORE),Ce=I.firstChild;Ce;Ce=Ce.nextSibling)xn(Ce)&&(Ce.tagName==="SCRIPT"||Ce.hasAttribute(Vs)||typeof this.options.ignoreElements=="function"&&this.options.ignoreElements(Ce))||this.options.copyStyles&&xn(Ce)&&_s(Ce)||W.appendChild(this.cloneNode(Ce));Be&&W.insertBefore(Be,W.firstChild);var Me=this.resolvePseudoContent(I,W,ye,Da.AFTER);return Me&&W.appendChild(Me),this.counters.pop(xe),te&&this.options.copyStyles&&!qs(I)&&Ws(te,W),I.scrollTop===0&&I.scrollLeft===0||this.scrolledElements.push([W,I.scrollLeft,I.scrollTop]),(ja(I)||$a(I))&&(ja(W)||$a(W))&&(W.value=I.value),W}return I.cloneNode(!1)},ea.prototype.resolvePseudoContent=function(I,z,W,te){var le=this;if(W){var ye=W.content,xe=z.ownerDocument;if(xe&&ye&&ye!=="none"&&ye!=="-moz-alt-content"&&W.display!=="none"){this.counters.parse(new ns(W));var Be=new xh(W),Ce=xe.createElement("html2canvaspseudoelement");return Ws(W,Ce),Be.content.forEach(function(Me){if(Me.type===ce.STRING_TOKEN)Ce.appendChild(xe.createTextNode(Me.value));else if(Me.type===ce.URL_TOKEN){var Te=xe.createElement("img");Te.src=Me.value,Te.style.opacity="1",Ce.appendChild(Te)}else if(Me.type===ce.FUNCTION){if(Me.name==="attr"){var at=Me.values.filter($e);at.length&&Ce.appendChild(xe.createTextNode(I.getAttribute(at[0].value)||""))}else if(Me.name==="counter"){var lt=Me.values.filter(ze),gt=lt[0],ut=lt[1];if(gt&&$e(gt)){var bt=le.counters.getCounterValue(gt.value),Et=ut&&$e(ut)?An.parse(ut.value):Xe.DECIMAL;Ce.appendChild(xe.createTextNode(Ta(bt,Et,!1)))}}else if(Me.name==="counters"){var si=Me.values.filter(ze),Pi=(gt=si[0],si[1]);if(ut=si[2],gt&&$e(gt)){var Ii=le.counters.getCounterValues(gt.value),Di=ut&&$e(ut)?An.parse(ut.value):Xe.DECIMAL,oi=Pi&&Pi.type===ce.STRING_TOKEN?Pi.value:"",Hi=Ii.map(function(ki){return Ta(ki,Di,!1)}).join(oi);Ce.appendChild(xe.createTextNode(Hi))}}}else if(Me.type===ce.IDENT_TOKEN)switch(Me.value){case"open-quote":Ce.appendChild(xe.createTextNode(rs(Be.quotes,le.quoteDepth++,!0)));break;case"close-quote":Ce.appendChild(xe.createTextNode(rs(Be.quotes,--le.quoteDepth,!1)));break;default:Ce.appendChild(xe.createTextNode(Me.value))}}),Ce.className=wn+" "+Sn,z.className+=te===Da.BEFORE?" "+wn:" "+Sn,Ce}}},ea.destroy=function(I){return!!I.parentNode&&(I.parentNode.removeChild(I),!0)},ea);function ea(I,z){if(this.options=z,this.scrolledElements=[],this.referenceElement=I,this.counters=new Nh,this.quoteDepth=0,!I.ownerDocument)throw new Error("Cloned element does not have an owner document");this.documentElement=this.cloneNode(I.ownerDocument.documentElement)}(Ga=Da||(Da={}))[Ga.BEFORE=0]="BEFORE",Ga[Ga.AFTER=1]="AFTER";var Ma,Ja,Rh=function(I,z){var W=I.createElement("iframe");return W.className="html2canvas-container",W.style.visibility="hidden",W.style.position="fixed",W.style.left="-10000px",W.style.top="0px",W.style.border="0",W.width=z.width.toString(),W.height=z.height.toString(),W.scrolling="no",W.setAttribute(Vs,"true"),I.body.appendChild(W),W},zh=function(I){return new Promise(function(z,W){var te=I.contentWindow;if(!te)return W("No window assigned for iframe");var le=te.document;te.onload=I.onload=le.onreadystatechange=function(){te.onload=I.onload=le.onreadystatechange=null;var ye=setInterval(function(){0<le.body.childNodes.length&&le.readyState==="complete"&&(clearInterval(ye),z(I))},50)}})},Ws=function(I,z){for(var W=I.length-1;0<=W;W--){var te=I.item(W);te!=="content"&&z.style.setProperty(te,I.getPropertyValue(te))}return z},Vh=function(I){var z="";return I&&(z+="<!DOCTYPE ",I.name&&(z+=I.name),I.internalSubset&&(z+=I.internalSubset),I.publicId&&(z+='"'+I.publicId+'"'),I.systemId&&(z+='"'+I.systemId+'"'),z+=">"),z},Kh=function(I,z,W){I&&I.defaultView&&(z!==I.defaultView.pageXOffset||W!==I.defaultView.pageYOffset)&&I.defaultView.scrollTo(z,W)},Wh=function(I){var z=I[0],W=I[1],te=I[2];z.scrollLeft=W,z.scrollTop=te},wn="___html2canvas___pseudoelement_before",Sn="___html2canvas___pseudoelement_after",Ys=`{
    content: "" !important;
    display: none !important;
}`,Yh=function(I){Xh(I,"."+wn+":before"+Ys+`
         .`+Sn+":after"+Ys)},Xh=function(I,z){var W=I.ownerDocument;if(W){var te=W.createElement("style");te.textContent=z,I.appendChild(te)}};(Ja=Ma||(Ma={}))[Ja.VECTOR=0]="VECTOR",Ja[Ja.BEZIER_CURVE=1]="BEZIER_CURVE";function Xs(I,z){return I.length===z.length&&I.some(function(W,te){return W===z[te]})}var Bt=(kn.prototype.add=function(I,z){return new kn(this.x+I,this.y+z)},kn);function kn(I,z){this.type=Ma.VECTOR,this.x=I,this.y=z}function pa(I,z,W){return new Bt(I.x+(z.x-I.x)*W,I.y+(z.y-I.y)*W)}var Za=(ta.prototype.subdivide=function(I,z){var W=pa(this.start,this.startControl,I),te=pa(this.startControl,this.endControl,I),le=pa(this.endControl,this.end,I),ye=pa(W,te,I),xe=pa(te,le,I),Be=pa(ye,xe,I);return z?new ta(this.start,W,ye,Be):new ta(Be,xe,le,this.end)},ta.prototype.add=function(I,z){return new ta(this.start.add(I,z),this.startControl.add(I,z),this.endControl.add(I,z),this.end.add(I,z))},ta.prototype.reverse=function(){return new ta(this.end,this.endControl,this.startControl,this.start)},ta);function ta(I,z,W,te){this.type=Ma.BEZIER_CURVE,this.start=I,this.startControl=z,this.endControl=W,this.end=te}function Aa(I){return I.type===Ma.BEZIER_CURVE}var _i,ia,jh=function(I){var z=I.styles,W=I.bounds,te=Pt(z.borderTopLeftRadius,W.width,W.height),le=te[0],ye=te[1],xe=Pt(z.borderTopRightRadius,W.width,W.height),Be=xe[0],Ce=xe[1],Me=Pt(z.borderBottomRightRadius,W.width,W.height),Te=Me[0],at=Me[1],lt=Pt(z.borderBottomLeftRadius,W.width,W.height),gt=lt[0],ut=lt[1],bt=[];bt.push((le+Be)/W.width),bt.push((gt+Te)/W.width),bt.push((ye+ut)/W.height),bt.push((Ce+at)/W.height);var Et=Math.max.apply(Math,bt);1<Et&&(le/=Et,ye/=Et,Be/=Et,Ce/=Et,Te/=Et,at/=Et,gt/=Et,ut/=Et);var si=W.width-Be,Pi=W.height-at,Ii=W.width-Te,Di=W.height-ut,oi=z.borderTopWidth,Hi=z.borderRightWidth,ki=z.borderBottomWidth,$t=z.borderLeftWidth,Ui=Tt(z.paddingTop,I.bounds.width),Ji=Tt(z.paddingRight,I.bounds.width),gi=Tt(z.paddingBottom,I.bounds.width),Jt=Tt(z.paddingLeft,I.bounds.width);this.topLeftBorderBox=0<le||0<ye?fr(W.left,W.top,le,ye,_i.TOP_LEFT):new Bt(W.left,W.top),this.topRightBorderBox=0<Be||0<Ce?fr(W.left+si,W.top,Be,Ce,_i.TOP_RIGHT):new Bt(W.left+W.width,W.top),this.bottomRightBorderBox=0<Te||0<at?fr(W.left+Ii,W.top+Pi,Te,at,_i.BOTTOM_RIGHT):new Bt(W.left+W.width,W.top+W.height),this.bottomLeftBorderBox=0<gt||0<ut?fr(W.left,W.top+Di,gt,ut,_i.BOTTOM_LEFT):new Bt(W.left,W.top+W.height),this.topLeftPaddingBox=0<le||0<ye?fr(W.left+$t,W.top+oi,Math.max(0,le-$t),Math.max(0,ye-oi),_i.TOP_LEFT):new Bt(W.left+$t,W.top+oi),this.topRightPaddingBox=0<Be||0<Ce?fr(W.left+Math.min(si,W.width+$t),W.top+oi,si>W.width+$t?0:Be-$t,Ce-oi,_i.TOP_RIGHT):new Bt(W.left+W.width-Hi,W.top+oi),this.bottomRightPaddingBox=0<Te||0<at?fr(W.left+Math.min(Ii,W.width-$t),W.top+Math.min(Pi,W.height+oi),Math.max(0,Te-Hi),at-ki,_i.BOTTOM_RIGHT):new Bt(W.left+W.width-Hi,W.top+W.height-ki),this.bottomLeftPaddingBox=0<gt||0<ut?fr(W.left+$t,W.top+Di,Math.max(0,gt-$t),ut-ki,_i.BOTTOM_LEFT):new Bt(W.left+$t,W.top+W.height-ki),this.topLeftContentBox=0<le||0<ye?fr(W.left+$t+Jt,W.top+oi+Ui,Math.max(0,le-($t+Jt)),Math.max(0,ye-(oi+Ui)),_i.TOP_LEFT):new Bt(W.left+$t+Jt,W.top+oi+Ui),this.topRightContentBox=0<Be||0<Ce?fr(W.left+Math.min(si,W.width+$t+Jt),W.top+oi+Ui,si>W.width+$t+Jt?0:Be-$t+Jt,Ce-(oi+Ui),_i.TOP_RIGHT):new Bt(W.left+W.width-(Hi+Ji),W.top+oi+Ui),this.bottomRightContentBox=0<Te||0<at?fr(W.left+Math.min(Ii,W.width-($t+Jt)),W.top+Math.min(Pi,W.height+oi+Ui),Math.max(0,Te-(Hi+Ji)),at-(ki+gi),_i.BOTTOM_RIGHT):new Bt(W.left+W.width-(Hi+Ji),W.top+W.height-(ki+gi)),this.bottomLeftContentBox=0<gt||0<ut?fr(W.left+$t+Jt,W.top+Di,Math.max(0,gt-($t+Jt)),ut-(ki+gi),_i.BOTTOM_LEFT):new Bt(W.left+$t+Jt,W.top+W.height-(ki+gi))};(ia=_i||(_i={}))[ia.TOP_LEFT=0]="TOP_LEFT",ia[ia.TOP_RIGHT=1]="TOP_RIGHT",ia[ia.BOTTOM_RIGHT=2]="BOTTOM_RIGHT",ia[ia.BOTTOM_LEFT=3]="BOTTOM_LEFT";function en(I){return[I.topLeftBorderBox,I.topRightBorderBox,I.bottomRightBorderBox,I.bottomLeftBorderBox]}function tn(I){return[I.topLeftPaddingBox,I.topRightPaddingBox,I.bottomRightPaddingBox,I.bottomLeftPaddingBox]}var fr=function(I,z,W,te,le){var ye=(Math.sqrt(2)-1)/3*4,xe=W*ye,Be=te*ye,Ce=I+W,Me=z+te;switch(le){case _i.TOP_LEFT:return new Za(new Bt(I,Me),new Bt(I,Me-Be),new Bt(Ce-xe,z),new Bt(Ce,z));case _i.TOP_RIGHT:return new Za(new Bt(I,z),new Bt(I+xe,z),new Bt(Ce,Me-Be),new Bt(Ce,Me));case _i.BOTTOM_RIGHT:return new Za(new Bt(Ce,z),new Bt(Ce,z+Be),new Bt(I+xe,Me),new Bt(I,Me));case _i.BOTTOM_LEFT:default:return new Za(new Bt(Ce,Me),new Bt(Ce-xe,Me),new Bt(I,z+Be),new Bt(I,z))}},$h=function(I,z,W){this.type=0,this.offsetX=I,this.offsetY=z,this.matrix=W,this.target=6},rn=function(I,z){this.type=1,this.target=z,this.path=I},js=function(I){this.element=I,this.inlineLevel=[],this.nonInlineLevel=[],this.negativeZIndex=[],this.zeroOrAutoZIndexOrTransformedOrOpacity=[],this.positiveZIndex=[],this.nonPositionedFloats=[],this.nonPositionedInlineLevel=[]},$s=(Gs.prototype.getParentEffects=function(){var I=this.effects.slice(0);if(this.container.styles.overflowX!==jr.VISIBLE){var z=en(this.curves),W=tn(this.curves);Xs(z,W)||I.push(new rn(W,6))}return I},Gs);function Gs(I,z){if(this.container=I,this.effects=z.slice(0),this.curves=new jh(I),I.styles.transform!==null){var W=I.bounds.left+I.styles.transformOrigin[0].number,te=I.bounds.top+I.styles.transformOrigin[1].number,le=I.styles.transform;this.effects.push(new $h(W,te,le))}if(I.styles.overflowX!==jr.VISIBLE){var ye=en(this.curves),xe=tn(this.curves);Xs(ye,xe)?this.effects.push(new rn(ye,6)):(this.effects.push(new rn(ye,2)),this.effects.push(new rn(xe,4)))}}function Js(I){var z=I.bounds,W=I.styles;return z.add(W.borderLeftWidth,W.borderTopWidth,-(W.borderRightWidth+W.borderLeftWidth),-(W.borderTopWidth+W.borderBottomWidth))}function an(I){var z=I.styles,W=I.bounds,te=Tt(z.paddingLeft,W.width),le=Tt(z.paddingRight,W.width),ye=Tt(z.paddingTop,W.width),xe=Tt(z.paddingBottom,W.width);return W.add(te+z.borderLeftWidth,ye+z.borderTopWidth,-(z.borderRightWidth+z.borderLeftWidth+te+le),-(z.borderTopWidth+z.borderBottomWidth+ye+xe))}function En(I,z,W){var te=function(Me,Te){return Me===0?Te.bounds:Me===2?an(Te):Js(Te)}(ma(I.styles.backgroundOrigin,z),I),le=function(Me,Te){return Me===Wt.BORDER_BOX?Te.bounds:Me===Wt.CONTENT_BOX?an(Te):Js(Te)}(ma(I.styles.backgroundClip,z),I),ye=Gh(ma(I.styles.backgroundSize,z),W,te),xe=ye[0],Be=ye[1],Ce=Pt(ma(I.styles.backgroundPosition,z),te.width-xe,te.height-Be);return[Jh(ma(I.styles.backgroundRepeat,z),Ce,ye,te,le),Math.round(te.left+Ce[0]),Math.round(te.top+Ce[1]),xe,Be]}function ga(I){return $e(I)&&I.value===Kr.AUTO}function nn(I){return typeof I=="number"}var Bn=function(I,z,W,te){I.container.elements.forEach(function(le){var ye=Li(le.flags,4),xe=Li(le.flags,2),Be=new $s(le,I.getParentEffects());Li(le.styles.display,2048)&&te.push(Be);var Ce=Li(le.flags,8)?[]:te;if(ye||xe){var Me=ye||le.styles.isPositioned()?W:z,Te=new js(Be);if(le.styles.isPositioned()||le.styles.opacity<1||le.styles.isTransformed()){var at=le.styles.zIndex.order;if(at<0){var lt=0;Me.negativeZIndex.some(function(ut,bt){return at>ut.element.container.styles.zIndex.order?(lt=bt,!1):0<lt}),Me.negativeZIndex.splice(lt,0,Te)}else if(0<at){var gt=0;Me.positiveZIndex.some(function(ut,bt){return at>ut.element.container.styles.zIndex.order?(gt=bt+1,!1):0<gt}),Me.positiveZIndex.splice(gt,0,Te)}else Me.zeroOrAutoZIndexOrTransformedOrOpacity.push(Te)}else le.styles.isFloating()?Me.nonPositionedFloats.push(Te):Me.nonPositionedInlineLevel.push(Te);Bn(Be,Te,ye?Te:W,Ce)}else le.styles.isInlineLevel()?z.inlineLevel.push(Be):z.nonInlineLevel.push(Be),Bn(Be,z,W,Ce);Li(le.flags,8)&&Zs(le,Ce)})},Zs=function(I,z){for(var W=I instanceof yn?I.start:1,te=I instanceof yn&&I.reversed,le=0;le<z.length;le++){var ye=z[le];ye.container instanceof As&&typeof ye.container.value=="number"&&ye.container.value!==0&&(W=ye.container.value),ye.listValue=Ta(W,ye.container.styles.listStyleType,!0),W+=te?-1:1}},sn=function(I,z,W,te){var le=[];return Aa(I)?le.push(I.subdivide(.5,!1)):le.push(I),Aa(W)?le.push(W.subdivide(.5,!0)):le.push(W),Aa(te)?le.push(te.subdivide(.5,!0).reverse()):le.push(te),Aa(z)?le.push(z.subdivide(.5,!1).reverse()):le.push(z),le},Gh=function(I,z,W){var te=z[0],le=z[1],ye=z[2],xe=I[0],Be=I[1];if(vt(xe)&&Be&&vt(Be))return[Tt(xe,W.width),Tt(Be,W.height)];var Ce=nn(ye);if($e(xe)&&(xe.value===Kr.CONTAIN||xe.value===Kr.COVER))return nn(ye)?W.width/W.height<ye!=(xe.value===Kr.COVER)?[W.width,W.width/ye]:[W.height*ye,W.height]:[W.width,W.height];var Me=nn(te),Te=nn(le),at=Me||Te;if(ga(xe)&&(!Be||ga(Be)))return Me&&Te?[te,le]:Ce||at?at&&Ce?[Me?te:le*ye,Te?le:te/ye]:[Me?te:W.width,Te?le:W.height]:[W.width,W.height];if(Ce){var lt=0,gt=0;return vt(xe)?lt=Tt(xe,W.width):vt(Be)&&(gt=Tt(Be,W.height)),ga(xe)?lt=gt*ye:Be&&!ga(Be)||(gt=lt/ye),[lt,gt]}var ut=null,bt=null;if(vt(xe)?ut=Tt(xe,W.width):Be&&vt(Be)&&(bt=Tt(Be,W.height)),ut===null||Be&&!ga(Be)||(bt=Me&&Te?ut/te*le:W.height),bt!==null&&ga(xe)&&(ut=Me&&Te?bt/le*te:W.width),ut!==null&&bt!==null)return[ut,bt];throw new Error("Unable to calculate background-size for element")},ma=function(I,z){var W=I[z];return W===void 0?I[0]:W},Jh=function(I,z,W,te,le){var ye=z[0],xe=z[1],Be=W[0],Ce=W[1];switch(I){case $i.REPEAT_X:return[new Bt(Math.round(te.left),Math.round(te.top+xe)),new Bt(Math.round(te.left+te.width),Math.round(te.top+xe)),new Bt(Math.round(te.left+te.width),Math.round(Ce+te.top+xe)),new Bt(Math.round(te.left),Math.round(Ce+te.top+xe))];case $i.REPEAT_Y:return[new Bt(Math.round(te.left+ye),Math.round(te.top)),new Bt(Math.round(te.left+ye+Be),Math.round(te.top)),new Bt(Math.round(te.left+ye+Be),Math.round(te.height+te.top)),new Bt(Math.round(te.left+ye),Math.round(te.height+te.top))];case $i.NO_REPEAT:return[new Bt(Math.round(te.left+ye),Math.round(te.top+xe)),new Bt(Math.round(te.left+ye+Be),Math.round(te.top+xe)),new Bt(Math.round(te.left+ye+Be),Math.round(te.top+xe+Ce)),new Bt(Math.round(te.left+ye),Math.round(te.top+xe+Ce))];default:return[new Bt(Math.round(le.left),Math.round(le.top)),new Bt(Math.round(le.left+le.width),Math.round(le.top)),new Bt(Math.round(le.left+le.width),Math.round(le.height+le.top)),new Bt(Math.round(le.left),Math.round(le.height+le.top))]}},eo="Hidden Text",Zh=(Dn.prototype.parseMetrics=function(I,z){var W=this._document.createElement("div"),te=this._document.createElement("img"),le=this._document.createElement("span"),ye=this._document.body;W.style.visibility="hidden",W.style.fontFamily=I,W.style.fontSize=z,W.style.margin="0",W.style.padding="0",ye.appendChild(W),te.src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",te.width=1,te.height=1,te.style.margin="0",te.style.padding="0",te.style.verticalAlign="baseline",le.style.fontFamily=I,le.style.fontSize=z,le.style.margin="0",le.style.padding="0",le.appendChild(this._document.createTextNode(eo)),W.appendChild(le),W.appendChild(te);var xe=te.offsetTop-le.offsetTop+2;W.removeChild(le),W.appendChild(this._document.createTextNode(eo)),W.style.lineHeight="normal",te.style.verticalAlign="super";var Be=te.offsetTop-W.offsetTop+2;return ye.removeChild(W),{baseline:xe,middle:Be}},Dn.prototype.getMetrics=function(I,z){var W=I+" "+z;return this._data[W]===void 0&&(this._data[W]=this.parseMetrics(I,z)),this._data[W]},Dn);function Dn(I){this._data={},this._document=I}var ed=(Ci.prototype.applyEffects=function(I,z){for(var W=this;this._activeEffects.length;)this.popEffect();I.filter(function(te){return Li(te.target,z)}).forEach(function(te){return W.applyEffect(te)})},Ci.prototype.applyEffect=function(I){this.ctx.save(),function(z){return z.type===0}(I)&&(this.ctx.translate(I.offsetX,I.offsetY),this.ctx.transform(I.matrix[0],I.matrix[1],I.matrix[2],I.matrix[3],I.matrix[4],I.matrix[5]),this.ctx.translate(-I.offsetX,-I.offsetY)),function(z){return z.type===1}(I)&&(this.path(I.path),this.ctx.clip()),this._activeEffects.push(I)},Ci.prototype.popEffect=function(){this._activeEffects.pop(),this.ctx.restore()},Ci.prototype.renderStack=function(I){return s(this,void 0,void 0,function(){var z;return n(this,function(W){switch(W.label){case 0:return(z=I.element.container.styles).isVisible()?(this.ctx.globalAlpha=z.opacity,[4,this.renderStackContent(I)]):[3,2];case 1:W.sent(),W.label=2;case 2:return[2]}})})},Ci.prototype.renderNode=function(I){return s(this,void 0,void 0,function(){return n(this,function(z){switch(z.label){case 0:return I.container.styles.isVisible()?[4,this.renderNodeBackgroundAndBorders(I)]:[3,3];case 1:return z.sent(),[4,this.renderNodeContent(I)];case 2:z.sent(),z.label=3;case 3:return[2]}})})},Ci.prototype.renderTextWithLetterSpacing=function(I,z){var W=this;z===0?this.ctx.fillText(I.text,I.bounds.left,I.bounds.top+I.bounds.height):o(I.text).map(function(te){return c(te)}).reduce(function(te,le){return W.ctx.fillText(le,te,I.bounds.top+I.bounds.height),te+W.ctx.measureText(le).width},I.bounds.left)},Ci.prototype.createFontStyle=function(I){var z=I.fontVariant.filter(function(le){return le==="normal"||le==="small-caps"}).join(""),W=I.fontFamily.join(", "),te=it(I.fontSize)?""+I.fontSize.number+I.fontSize.unit:I.fontSize.number+"px";return[[I.fontStyle,z,I.fontWeight,te,W].join(" "),W,te]},Ci.prototype.renderTextNode=function(I,z){return s(this,void 0,void 0,function(){var W,te,le,ye,xe=this;return n(this,function(Be){return W=this.createFontStyle(z),te=W[0],le=W[1],ye=W[2],this.ctx.font=te,I.textBounds.forEach(function(Ce){xe.ctx.fillStyle=ht(z.color),xe.renderTextWithLetterSpacing(Ce,z.letterSpacing);var Me=z.textShadow;Me.length&&Ce.text.trim().length&&(Me.slice(0).reverse().forEach(function(Te){xe.ctx.shadowColor=ht(Te.color),xe.ctx.shadowOffsetX=Te.offsetX.number*xe.options.scale,xe.ctx.shadowOffsetY=Te.offsetY.number*xe.options.scale,xe.ctx.shadowBlur=Te.blur.number,xe.ctx.fillText(Ce.text,Ce.bounds.left,Ce.bounds.top+Ce.bounds.height)}),xe.ctx.shadowColor="",xe.ctx.shadowOffsetX=0,xe.ctx.shadowOffsetY=0,xe.ctx.shadowBlur=0),z.textDecorationLine.length&&(xe.ctx.fillStyle=ht(z.textDecorationColor||z.color),z.textDecorationLine.forEach(function(Te){switch(Te){case 1:var at=xe.fontMetrics.getMetrics(le,ye).baseline;xe.ctx.fillRect(Ce.bounds.left,Math.round(Ce.bounds.top+at),Ce.bounds.width,1);break;case 2:xe.ctx.fillRect(Ce.bounds.left,Math.round(Ce.bounds.top),Ce.bounds.width,1);break;case 3:var lt=xe.fontMetrics.getMetrics(le,ye).middle;xe.ctx.fillRect(Ce.bounds.left,Math.ceil(Ce.bounds.top+lt),Ce.bounds.width,1)}}))}),[2]})})},Ci.prototype.renderReplacedElement=function(I,z,W){if(W&&0<I.intrinsicWidth&&0<I.intrinsicHeight){var te=an(I),le=tn(z);this.path(le),this.ctx.save(),this.ctx.clip(),this.ctx.drawImage(W,0,0,I.intrinsicWidth,I.intrinsicHeight,te.left,te.top,te.width,te.height),this.ctx.restore()}},Ci.prototype.renderNodeContent=function(I){return s(this,void 0,void 0,function(){var z,W,te,le,ye,xe,Be,Ce,Me,Te,at,lt,gt,ut;return n(this,function(bt){switch(bt.label){case 0:this.applyEffects(I.effects,4),z=I.container,W=I.curves,te=z.styles,le=0,ye=z.textNodes,bt.label=1;case 1:return le<ye.length?(xe=ye[le],[4,this.renderTextNode(xe,te)]):[3,4];case 2:bt.sent(),bt.label=3;case 3:return le++,[3,1];case 4:if(!(z instanceof ss))return[3,8];bt.label=5;case 5:return bt.trys.push([5,7,,8]),[4,this.options.cache.match(z.src)];case 6:return lt=bt.sent(),this.renderReplacedElement(z,W,lt),[3,8];case 7:return bt.sent(),ri.getInstance(this.options.id).error("Error loading image "+z.src),[3,8];case 8:if(z instanceof cs&&this.renderReplacedElement(z,W,z.canvas),!(z instanceof ds))return[3,12];bt.label=9;case 9:return bt.trys.push([9,11,,12]),[4,this.options.cache.match(z.svg)];case 10:return lt=bt.sent(),this.renderReplacedElement(z,W,lt),[3,12];case 11:return bt.sent(),ri.getInstance(this.options.id).error("Error loading svg "+z.svg.substring(0,255)),[3,12];case 12:return z instanceof Ms&&z.tree?[4,new Ci({id:this.options.id,scale:this.options.scale,backgroundColor:z.backgroundColor,x:0,y:0,scrollX:0,scrollY:0,width:z.width,height:z.height,cache:this.options.cache,windowWidth:z.width,windowHeight:z.height}).render(z.tree)]:[3,14];case 13:Be=bt.sent(),z.width&&z.height&&this.ctx.drawImage(Be,0,0,z.width,z.height,z.bounds.left,z.bounds.top,z.bounds.width,z.bounds.height),bt.label=14;case 14:if(z instanceof vn&&(Ce=Math.min(z.bounds.width,z.bounds.height),z.type===Ya?z.checked&&(this.ctx.save(),this.path([new Bt(z.bounds.left+.39363*Ce,z.bounds.top+.79*Ce),new Bt(z.bounds.left+.16*Ce,z.bounds.top+.5549*Ce),new Bt(z.bounds.left+.27347*Ce,z.bounds.top+.44071*Ce),new Bt(z.bounds.left+.39694*Ce,z.bounds.top+.5649*Ce),new Bt(z.bounds.left+.72983*Ce,z.bounds.top+.23*Ce),new Bt(z.bounds.left+.84*Ce,z.bounds.top+.34085*Ce),new Bt(z.bounds.left+.39363*Ce,z.bounds.top+.79*Ce)]),this.ctx.fillStyle=ht(xs),this.ctx.fill(),this.ctx.restore()):z.type===Xa&&z.checked&&(this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(z.bounds.left+Ce/2,z.bounds.top+Ce/2,Ce/4,0,2*Math.PI,!0),this.ctx.fillStyle=ht(xs),this.ctx.fill(),this.ctx.restore())),td(z)&&z.value.length){switch(this.ctx.font=this.createFontStyle(te)[0],this.ctx.fillStyle=ht(te.color),this.ctx.textBaseline="middle",this.ctx.textAlign=rd(z.styles.textAlign),ut=an(z),Me=0,z.styles.textAlign){case Fr.CENTER:Me+=ut.width/2;break;case Fr.RIGHT:Me+=ut.width}Te=ut.add(Me,0,0,-ut.height/2+1),this.ctx.save(),this.path([new Bt(ut.left,ut.top),new Bt(ut.left+ut.width,ut.top),new Bt(ut.left+ut.width,ut.top+ut.height),new Bt(ut.left,ut.top+ut.height)]),this.ctx.clip(),this.renderTextWithLetterSpacing(new Wa(z.value,Te),te.letterSpacing),this.ctx.restore(),this.ctx.textBaseline="bottom",this.ctx.textAlign="left"}if(!Li(z.styles.display,2048))return[3,20];if(z.styles.listStyleImage===null)return[3,19];if((at=z.styles.listStyleImage).type!==ci.URL)return[3,18];lt=void 0,gt=at.url,bt.label=15;case 15:return bt.trys.push([15,17,,18]),[4,this.options.cache.match(gt)];case 16:return lt=bt.sent(),this.ctx.drawImage(lt,z.bounds.left-(lt.width+10),z.bounds.top),[3,18];case 17:return bt.sent(),ri.getInstance(this.options.id).error("Error loading list-style-image "+gt),[3,18];case 18:return[3,20];case 19:I.listValue&&z.styles.listStyleType!==Xe.NONE&&(this.ctx.font=this.createFontStyle(te)[0],this.ctx.fillStyle=ht(te.color),this.ctx.textBaseline="middle",this.ctx.textAlign="right",ut=new r(z.bounds.left,z.bounds.top+Tt(z.styles.paddingTop,z.bounds.width),z.bounds.width,function(Et,si){return $e(Et)&&Et.value==="normal"?1.2*si:Et.type===ce.NUMBER_TOKEN?si*Et.number:vt(Et)?Tt(Et,si):si}(te.lineHeight,te.fontSize.number)/2+1),this.renderTextWithLetterSpacing(new Wa(I.listValue,ut),te.letterSpacing),this.ctx.textBaseline="bottom",this.ctx.textAlign="left"),bt.label=20;case 20:return[2]}})})},Ci.prototype.renderStackContent=function(I){return s(this,void 0,void 0,function(){var z,W,te,le,ye,xe,Be,Ce,Me,Te,at,lt,gt,ut,bt;return n(this,function(Et){switch(Et.label){case 0:return[4,this.renderNodeBackgroundAndBorders(I.element)];case 1:Et.sent(),z=0,W=I.negativeZIndex,Et.label=2;case 2:return z<W.length?(bt=W[z],[4,this.renderStack(bt)]):[3,5];case 3:Et.sent(),Et.label=4;case 4:return z++,[3,2];case 5:return[4,this.renderNodeContent(I.element)];case 6:Et.sent(),te=0,le=I.nonInlineLevel,Et.label=7;case 7:return te<le.length?(bt=le[te],[4,this.renderNode(bt)]):[3,10];case 8:Et.sent(),Et.label=9;case 9:return te++,[3,7];case 10:ye=0,xe=I.nonPositionedFloats,Et.label=11;case 11:return ye<xe.length?(bt=xe[ye],[4,this.renderStack(bt)]):[3,14];case 12:Et.sent(),Et.label=13;case 13:return ye++,[3,11];case 14:Be=0,Ce=I.nonPositionedInlineLevel,Et.label=15;case 15:return Be<Ce.length?(bt=Ce[Be],[4,this.renderStack(bt)]):[3,18];case 16:Et.sent(),Et.label=17;case 17:return Be++,[3,15];case 18:Me=0,Te=I.inlineLevel,Et.label=19;case 19:return Me<Te.length?(bt=Te[Me],[4,this.renderNode(bt)]):[3,22];case 20:Et.sent(),Et.label=21;case 21:return Me++,[3,19];case 22:at=0,lt=I.zeroOrAutoZIndexOrTransformedOrOpacity,Et.label=23;case 23:return at<lt.length?(bt=lt[at],[4,this.renderStack(bt)]):[3,26];case 24:Et.sent(),Et.label=25;case 25:return at++,[3,23];case 26:gt=0,ut=I.positiveZIndex,Et.label=27;case 27:return gt<ut.length?(bt=ut[gt],[4,this.renderStack(bt)]):[3,30];case 28:Et.sent(),Et.label=29;case 29:return gt++,[3,27];case 30:return[2]}})})},Ci.prototype.mask=function(I){this.ctx.beginPath(),this.ctx.moveTo(0,0),this.ctx.lineTo(this.canvas.width,0),this.ctx.lineTo(this.canvas.width,this.canvas.height),this.ctx.lineTo(0,this.canvas.height),this.ctx.lineTo(0,0),this.formatPath(I.slice(0).reverse()),this.ctx.closePath()},Ci.prototype.path=function(I){this.ctx.beginPath(),this.formatPath(I),this.ctx.closePath()},Ci.prototype.formatPath=function(I){var z=this;I.forEach(function(W,te){var le=Aa(W)?W.start:W;te===0?z.ctx.moveTo(le.x,le.y):z.ctx.lineTo(le.x,le.y),Aa(W)&&z.ctx.bezierCurveTo(W.startControl.x,W.startControl.y,W.endControl.x,W.endControl.y,W.end.x,W.end.y)})},Ci.prototype.renderRepeat=function(I,z,W,te){this.path(I),this.ctx.fillStyle=z,this.ctx.translate(W,te),this.ctx.fill(),this.ctx.translate(-W,-te)},Ci.prototype.resizeImage=function(I,z,W){if(!/(iPad|iPhone|iPod|Safari)/g.test(navigator.userAgent)&&I.width===z&&I.height===W)return I;var te=this.canvas.ownerDocument.createElement("canvas");return te.width=z,te.height=W,te.getContext("2d").drawImage(I,0,0,I.width,I.height,0,0,z,W),te},Ci.prototype.renderBackgroundImage=function(I){return s(this,void 0,void 0,function(){var z,W,te,le,ye,xe;return n(this,function(Be){switch(Be.label){case 0:z=I.styles.backgroundImage.length-1,W=function(Ce){var Me,Te,at,lt,gt,ut,bt,Et,si,Pi,Ii,Di,oi,Hi,ki,$t,Ui,Ji,gi,Jt,ya,Ur,ra,Mn,ca,Fn,_n,In,Fa,io,Un;return n(this,function(va){switch(va.label){case 0:if(Ce.type!==ci.URL)return[3,5];Me=void 0,Te=Ce.url,va.label=1;case 1:return va.trys.push([1,3,,4]),[4,te.options.cache.match(Te)];case 2:return Me=va.sent(),[3,4];case 3:return va.sent(),ri.getInstance(te.options.id).error("Error loading background-image "+Te),[3,4];case 4:return Me&&(at=En(I,z,[Me.width,Me.height,Me.width/Me.height]),$t=at[0],Ur=at[1],ra=at[2],gi=at[3],Jt=at[4],Hi=te.ctx.createPattern(te.resizeImage(Me,gi,Jt),"repeat"),te.renderRepeat($t,Hi,Ur,ra)),[3,6];case 5:(function(vi){return vi.type===ci.LINEAR_GRADIENT})(Ce)?(lt=En(I,z,[null,null,null]),$t=lt[0],Ur=lt[1],ra=lt[2],gi=lt[3],Jt=lt[4],gt=bi(Ce.angle,gi,Jt),ut=gt[0],bt=gt[1],Et=gt[2],si=gt[3],Pi=gt[4],(Ii=document.createElement("canvas")).width=gi,Ii.height=Jt,Di=Ii.getContext("2d"),oi=Di.createLinearGradient(bt,si,Et,Pi),ai(Ce.stops,ut).forEach(function(vi){return oi.addColorStop(vi.stop,ht(vi.color))}),Di.fillStyle=oi,Di.fillRect(0,0,gi,Jt),0<gi&&0<Jt&&(Hi=te.ctx.createPattern(Ii,"repeat"),te.renderRepeat($t,Hi,Ur,ra))):function(vi){return vi.type===ci.RADIAL_GRADIENT}(Ce)&&(ki=En(I,z,[null,null,null]),$t=ki[0],Ui=ki[1],Ji=ki[2],gi=ki[3],Jt=ki[4],ya=Ce.position.length===0?[Nt]:Ce.position,Ur=Tt(ya[0],gi),ra=Tt(ya[ya.length-1],Jt),Mn=function(vi,mi,yi,Zi,er){var br=0,Qr=0;switch(vi.size){case ui.CLOSEST_SIDE:vi.shape===ni.CIRCLE?br=Qr=Math.min(Math.abs(mi),Math.abs(mi-Zi),Math.abs(yi),Math.abs(yi-er)):vi.shape===ni.ELLIPSE&&(br=Math.min(Math.abs(mi),Math.abs(mi-Zi)),Qr=Math.min(Math.abs(yi),Math.abs(yi-er)));break;case ui.CLOSEST_CORNER:if(vi.shape===ni.CIRCLE)br=Qr=Math.min(ii(mi,yi),ii(mi,yi-er),ii(mi-Zi,yi),ii(mi-Zi,yi-er));else if(vi.shape===ni.ELLIPSE){var _a=Math.min(Math.abs(yi),Math.abs(yi-er))/Math.min(Math.abs(mi),Math.abs(mi-Zi)),ro=Ei(Zi,er,mi,yi,!0),Qn=ro[0],Ln=ro[1];Qr=_a*(br=ii(Qn-mi,(Ln-yi)/_a))}break;case ui.FARTHEST_SIDE:vi.shape===ni.CIRCLE?br=Qr=Math.max(Math.abs(mi),Math.abs(mi-Zi),Math.abs(yi),Math.abs(yi-er)):vi.shape===ni.ELLIPSE&&(br=Math.max(Math.abs(mi),Math.abs(mi-Zi)),Qr=Math.max(Math.abs(yi),Math.abs(yi-er)));break;case ui.FARTHEST_CORNER:if(vi.shape===ni.CIRCLE)br=Qr=Math.max(ii(mi,yi),ii(mi,yi-er),ii(mi-Zi,yi),ii(mi-Zi,yi-er));else if(vi.shape===ni.ELLIPSE){_a=Math.max(Math.abs(yi),Math.abs(yi-er))/Math.max(Math.abs(mi),Math.abs(mi-Zi));var ao=Ei(Zi,er,mi,yi,!1);Qn=ao[0],Ln=ao[1],Qr=_a*(br=ii(Qn-mi,(Ln-yi)/_a))}}return Array.isArray(vi.size)&&(br=Tt(vi.size[0],Zi),Qr=vi.size.length===2?Tt(vi.size[1],er):br),[br,Qr]}(Ce,Ur,ra,gi,Jt),ca=Mn[0],Fn=Mn[1],0<ca&&0<ca&&(_n=te.ctx.createRadialGradient(Ui+Ur,Ji+ra,0,Ui+Ur,Ji+ra,ca),ai(Ce.stops,2*ca).forEach(function(vi){return _n.addColorStop(vi.stop,ht(vi.color))}),te.path($t),te.ctx.fillStyle=_n,ca!==Fn?(In=I.bounds.left+.5*I.bounds.width,Fa=I.bounds.top+.5*I.bounds.height,Un=1/(io=Fn/ca),te.ctx.save(),te.ctx.translate(In,Fa),te.ctx.transform(1,0,0,io,0,0),te.ctx.translate(-In,-Fa),te.ctx.fillRect(Ui,Un*(Ji-Fa)+Fa,gi,Jt*Un),te.ctx.restore()):te.ctx.fill())),va.label=6;case 6:return z--,[2]}})},te=this,le=0,ye=I.styles.backgroundImage.slice(0).reverse(),Be.label=1;case 1:return le<ye.length?(xe=ye[le],[5,W(xe)]):[3,4];case 2:Be.sent(),Be.label=3;case 3:return le++,[3,1];case 4:return[2]}})})},Ci.prototype.renderBorder=function(I,z,W){return s(this,void 0,void 0,function(){return n(this,function(te){return this.path(function(le,ye){switch(ye){case 0:return sn(le.topLeftBorderBox,le.topLeftPaddingBox,le.topRightBorderBox,le.topRightPaddingBox);case 1:return sn(le.topRightBorderBox,le.topRightPaddingBox,le.bottomRightBorderBox,le.bottomRightPaddingBox);case 2:return sn(le.bottomRightBorderBox,le.bottomRightPaddingBox,le.bottomLeftBorderBox,le.bottomLeftPaddingBox);case 3:default:return sn(le.bottomLeftBorderBox,le.bottomLeftPaddingBox,le.topLeftBorderBox,le.topLeftPaddingBox)}}(W,z)),this.ctx.fillStyle=ht(I),this.ctx.fill(),[2]})})},Ci.prototype.renderNodeBackgroundAndBorders=function(I){return s(this,void 0,void 0,function(){var z,W,te,le,ye,xe,Be,Ce,Me=this;return n(this,function(Te){switch(Te.label){case 0:return this.applyEffects(I.effects,2),z=I.container.styles,W=!kt(z.backgroundColor)||z.backgroundImage.length,te=[{style:z.borderTopStyle,color:z.borderTopColor},{style:z.borderRightStyle,color:z.borderRightColor},{style:z.borderBottomStyle,color:z.borderBottomColor},{style:z.borderLeftStyle,color:z.borderLeftColor}],le=id(ma(z.backgroundClip,0),I.curves),W||z.boxShadow.length?(this.ctx.save(),this.path(le),this.ctx.clip(),kt(z.backgroundColor)||(this.ctx.fillStyle=ht(z.backgroundColor),this.ctx.fill()),[4,this.renderBackgroundImage(I.container)]):[3,2];case 1:Te.sent(),this.ctx.restore(),z.boxShadow.slice(0).reverse().forEach(function(at){Me.ctx.save();var lt=en(I.curves),gt=at.inset?0:1e4,ut=function(bt,Et,si,Pi,Ii){return bt.map(function(Di,oi){switch(oi){case 0:return Di.add(Et,si);case 1:return Di.add(Et+Pi,si);case 2:return Di.add(Et+Pi,si+Ii);case 3:return Di.add(Et,si+Ii)}return Di})}(lt,-gt+(at.inset?1:-1)*at.spread.number,(at.inset?1:-1)*at.spread.number,at.spread.number*(at.inset?-2:2),at.spread.number*(at.inset?-2:2));at.inset?(Me.path(lt),Me.ctx.clip(),Me.mask(ut)):(Me.mask(lt),Me.ctx.clip(),Me.path(ut)),Me.ctx.shadowOffsetX=at.offsetX.number+gt,Me.ctx.shadowOffsetY=at.offsetY.number,Me.ctx.shadowColor=ht(at.color),Me.ctx.shadowBlur=at.blur.number,Me.ctx.fillStyle=at.inset?ht(at.color):"rgba(0,0,0,1)",Me.ctx.fill(),Me.ctx.restore()}),Te.label=2;case 2:xe=ye=0,Be=te,Te.label=3;case 3:return xe<Be.length?(Ce=Be[xe]).style===xr.NONE||kt(Ce.color)?[3,5]:[4,this.renderBorder(Ce.color,ye,I.curves)]:[3,7];case 4:Te.sent(),Te.label=5;case 5:ye++,Te.label=6;case 6:return xe++,[3,3];case 7:return[2]}})})},Ci.prototype.render=function(I){return s(this,void 0,void 0,function(){var z;return n(this,function(W){switch(W.label){case 0:return this.options.backgroundColor&&(this.ctx.fillStyle=ht(this.options.backgroundColor),this.ctx.fillRect(this.options.x-this.options.scrollX,this.options.y-this.options.scrollY,this.options.width,this.options.height)),z=function(te){var le=new $s(te,[]),ye=new js(le),xe=[];return Bn(le,ye,ye,xe),Zs(le.container,xe),ye}(I),[4,this.renderStack(z)];case 1:return W.sent(),this.applyEffects([],2),[2,this.canvas]}})})},Ci);function Ci(I){this._activeEffects=[],this.canvas=I.canvas?I.canvas:document.createElement("canvas"),this.ctx=this.canvas.getContext("2d"),(this.options=I).canvas||(this.canvas.width=Math.floor(I.width*I.scale),this.canvas.height=Math.floor(I.height*I.scale),this.canvas.style.width=I.width+"px",this.canvas.style.height=I.height+"px"),this.fontMetrics=new Zh(document),this.ctx.scale(this.options.scale,this.options.scale),this.ctx.translate(-I.x+I.scrollX,-I.y+I.scrollY),this.ctx.textBaseline="bottom",this._activeEffects=[],ri.getInstance(I.id).debug("Canvas renderer initialized ("+I.width+"x"+I.height+" at "+I.x+","+I.y+") with scale "+I.scale)}var td=function(I){return I instanceof Es||I instanceof ws||I instanceof vn&&I.type!==Xa&&I.type!==Ya},id=function(I,z){switch(I){case Wt.BORDER_BOX:return en(z);case Wt.CONTENT_BOX:return function(W){return[W.topLeftContentBox,W.topRightContentBox,W.bottomRightContentBox,W.bottomLeftContentBox]}(z);case Wt.PADDING_BOX:default:return tn(z)}},rd=function(I){switch(I){case Fr.CENTER:return"center";case Fr.RIGHT:return"right";case Fr.LEFT:default:return"left"}},ad=(to.prototype.render=function(I){return s(this,void 0,void 0,function(){var z,W;return n(this,function(te){switch(te.label){case 0:return z=mr(Math.max(this.options.windowWidth,this.options.width)*this.options.scale,Math.max(this.options.windowHeight,this.options.height)*this.options.scale,this.options.scrollX*this.options.scale,this.options.scrollY*this.options.scale,I),[4,nd(z)];case 1:return W=te.sent(),this.options.backgroundColor&&(this.ctx.fillStyle=ht(this.options.backgroundColor),this.ctx.fillRect(0,0,this.options.width*this.options.scale,this.options.height*this.options.scale)),this.ctx.drawImage(W,-this.options.x*this.options.scale,-this.options.y*this.options.scale),[2,this.canvas]}})})},to);function to(I){this.canvas=I.canvas?I.canvas:document.createElement("canvas"),this.ctx=this.canvas.getContext("2d"),this.options=I,this.canvas.width=Math.floor(I.width*I.scale),this.canvas.height=Math.floor(I.height*I.scale),this.canvas.style.width=I.width+"px",this.canvas.style.height=I.height+"px",this.ctx.scale(this.options.scale,this.options.scale),this.ctx.translate(-I.x+I.scrollX,-I.y+I.scrollY),ri.getInstance(I.id).debug("EXPERIMENTAL ForeignObject renderer initialized ("+I.width+"x"+I.height+" at "+I.x+","+I.y+") with scale "+I.scale)}function Tn(I){return jt(At.create(I).parseComponentValue())}var nd=function(I){return new Promise(function(z,W){var te=new Image;te.onload=function(){z(te)},te.onerror=W,te.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(I))})};Mi.setContext(window);var sd=function(I,z){return s(void 0,void 0,void 0,function(){var W,te,le,ye,xe,Be,Ce,Me,Te,at,lt,gt,ut,bt,Et,si,Pi,Ii,Di,oi,Hi,ki,$t;return n(this,function(Ui){switch(Ui.label){case 0:if(!(W=I.ownerDocument))throw new Error("Element is not attached to a Document");if(!(te=W.defaultView))throw new Error("Document is not attached to a Window");return le=(Math.round(1e3*Math.random())+Date.now()).toString(16),ye=bn(I)||function(Ji){return Ji.tagName==="HTML"}(I)?function(Ji){var gi=Ji.body,Jt=Ji.documentElement;if(!gi||!Jt)throw new Error("Unable to get document size");var ya=Math.max(Math.max(gi.scrollWidth,Jt.scrollWidth),Math.max(gi.offsetWidth,Jt.offsetWidth),Math.max(gi.clientWidth,Jt.clientWidth)),Ur=Math.max(Math.max(gi.scrollHeight,Jt.scrollHeight),Math.max(gi.offsetHeight,Jt.offsetHeight),Math.max(gi.clientHeight,Jt.clientHeight));return new r(0,0,ya,Ur)}(W):a(I),xe=ye.width,Be=ye.height,Ce=ye.left,Me=ye.top,Te=t({},{allowTaint:!1,imageTimeout:15e3,proxy:void 0,useCORS:!1},z),at={backgroundColor:"#ffffff",cache:z.cache?z.cache:Mi.create(le,Te),logging:!0,removeContainer:!0,foreignObjectRendering:!1,scale:te.devicePixelRatio||1,windowWidth:te.innerWidth,windowHeight:te.innerHeight,scrollX:te.pageXOffset,scrollY:te.pageYOffset,x:Ce,y:Me,width:Math.ceil(xe),height:Math.ceil(Be),id:le},lt=t({},at,Te,z),gt=new r(lt.scrollX,lt.scrollY,lt.windowWidth,lt.windowHeight),ri.create({id:le,enabled:lt.logging}),ri.getInstance(le).debug("Starting document clone"),ut=new Ks(I,{id:le,onclone:lt.onclone,ignoreElements:lt.ignoreElements,inlineImages:lt.foreignObjectRendering,copyStyles:lt.foreignObjectRendering}),(bt=ut.clonedReferenceElement)?[4,ut.toIFrame(W,gt)]:[2,Promise.reject("Unable to find element in cloned iframe")];case 1:return Et=Ui.sent(),si=W.documentElement?Tn(getComputedStyle(W.documentElement).backgroundColor):zt.TRANSPARENT,Pi=W.body?Tn(getComputedStyle(W.body).backgroundColor):zt.TRANSPARENT,Ii=z.backgroundColor,Di=typeof Ii=="string"?Tn(Ii):Ii===null?zt.TRANSPARENT:4294967295,oi=I===W.documentElement?kt(si)?kt(Pi)?Di:Pi:si:Di,Hi={id:le,cache:lt.cache,canvas:lt.canvas,backgroundColor:oi,scale:lt.scale,x:lt.x,y:lt.y,scrollX:lt.scrollX,scrollY:lt.scrollY,width:lt.width,height:lt.height,windowWidth:lt.windowWidth,windowHeight:lt.windowHeight},lt.foreignObjectRendering?(ri.getInstance(le).debug("Document cloned, using foreign object rendering"),[4,new ad(Hi).render(bt)]):[3,3];case 2:return ki=Ui.sent(),[3,5];case 3:return ri.getInstance(le).debug("Document cloned, using computed rendering"),Mi.attachInstance(lt.cache),ri.getInstance(le).debug("Starting DOM parsing"),$t=Qs(bt),Mi.detachInstance(),oi===$t.styles.backgroundColor&&($t.styles.backgroundColor=zt.TRANSPARENT),ri.getInstance(le).debug("Starting renderer"),[4,new ed(Hi).render($t)];case 4:ki=Ui.sent(),Ui.label=5;case 5:return lt.removeContainer===!0&&(Ks.destroy(Et)||ri.getInstance(le).error("Cannot detach cloned iframe as it is not in the DOM anymore")),ri.getInstance(le).debug("Finished rendering"),ri.destroy(le),Mi.destroy(le),[2,ki]}})})};return function(I,z){return z===void 0&&(z={}),sd(I,z)}});j.UI.componentMarkup("cq-lookup-dialog",`
    <form role="search">
    <div class="ciq-search-container">
        <cq-lookup-input class="hide-label">
            <cq-lookup-icon></cq-lookup-icon>
            <label id="lookup_dialog_input_label">Input Search Text</label>
            <input type="text"
                spellcheck="false"
                autocomplete="off"
                autocorrect="off"
                autocapitalize="none"
                name="symbol"
                placeholder=""
                role="combobox"
                aria-expanded="false"
                aria-labelledby="lookup_dialog_input_label"
            >
        </cq-lookup-input>
        <cq-swatch-input class="hide-label">
            <label id="lookup_dialog_swatch_label">Comparison Series Color</label>
            <cq-swatch tabindex="0" name="color" aria-labelledby="lookup_dialog_swatch_label"></cq-swatch>
            <input name="color" type="hidden"/>
        </cq-swatch-input>
        <button type="submit" class="ciq-btn">GO</button>
    </div>
    <cq-lookup-filters role="group" aria-label="Search Result Filters">
        <button type="button" class="ciq-filter" role="radio">ALL</button>
        <button type="button" class="ciq-filter" role="radio">STOCKS</button>
        <button type="button" class="ciq-filter" role="radio">ETFS</button>
    </cq-lookup-filters>
    <input type="hidden" name="filter" />
</form>
<ul class="ciq-lookup-results" aria-label="Results"></ul>
<template id="lookupResult">
    <li><span></span></li>
</template>
        `);j.FullScreen=function(E){if(E||(E={}),!E.stx){console.warn("The Full Screen addon requires an stx parameter");return}try{if(window.location.host!==window.top.location.host)throw new Error(window.location.host+" does not match "+window.top.location.host)}catch{console.warn("Full screen mode disabled.");return}this.stx=E.stx,this.stx.fullScreen=this,this.fullScreenButton=null,this.fullScreenState=!1,this.addFullScreenButton=function(){this.stx.registerChartControl&&(this.fullScreenButton=this.stx.registerChartControl("stx-full-screen","Full Screen",function(s){return function(n){s.fullScreenToggle(n),n.stopPropagation()}}(this)))},this.fullScreenToggle=function(s){var n=s.target.ownerDocument;n.documentElement.requestFullscreen||n.documentElement.webkitRequestFullscreen||n.documentElement.mozRequestFullscreen||n.documentElement.msRequestFullscreen?this.getFullScreenElement(n)?n.exitFullscreen?n.exitFullscreen():n.webkitExitFullscreen?n.webkitExitFullscreen():n.mozCancelFullScreen?n.mozCancelFullScreen():n.msExitFullscreen&&n.msExitFullscreen():n.documentElement.requestFullscreen?n.documentElement.requestFullscreen():n.documentElement.webkitRequestFullscreen?n.documentElement.webkitRequestFullscreen():n.documentElement.mozRequestFullscreen?n.documentElement.mozRequestFullscreen():n.documentElement.msRequestFullscreen&&n.documentElement.msRequestFullscreen():(this.fullScreenState=!this.fullScreenState,this.fullScreenRender())},this.fullScreenRender=function(){let s=null;if(s=this.stx.container.closest("*[cq-context], cq-context, body"),s){const n="full-screen",r=this.fullScreenState===!0?"add":"remove";this.fullScreenButton&&this.fullScreenButton.classList[r]("active"),s.classList[r](n),this.stx.channel.componentClass={...this.stx.channel.componentClass,[n]:r},window.dispatchEvent(new Event("resize"))}},this.onFullScreenChange=function(s){this.getFullScreenElement(s.target.ownerDocument)?this.fullScreenState=!0:this.fullScreenState=!1,this.fullScreenRender()},this.getFullScreenElement=function(s){return s.fullscreenElement||s.webkitCurrentFullScreenElement||s.mozFullScreenElement||s.msFullscreenElement};var e=this.onFullScreenChange.bind(this),t=this;["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"].forEach(function(s){t.stx.container.ownerDocument.addEventListener(s,e),t.stx.addEventListener("destroy",function(){this.container.ownerDocument.removeEventListener(s,e)})})};j.activateImports(jn,$n);j.ChartEngine.Driver.Lookup.ChartIQ=function(E){let e=on;this.url=`${e}/search`,this.requestCounter=0};j.inheritsFrom(j.ChartEngine.Driver.Lookup.ChartIQ,j.ChartEngine.Driver.Lookup);j.ChartEngine.Driver.Lookup.ChartIQ.prototype.acceptText=function(E,e,t,s){var n=this.url+"?q="+encodeURIComponent(E);if(e&&e.toUpperCase()!="ALL"){let o=e[0].toLowerCase();n+="&t="+o}else n+="&t=sea";var r=++this.requestCounter,i=this;function a(o,c){if(!(r<i.requestCounter)&&o==200)try{c=JSON.parse(c);for(var l=c.data,u=[],h=0;h<l.length;h++){let f=l[h],A="Stock";f.t==="e"&&(A="ETF"),f.t==="sy"&&(f.st==="e"&&(A="ETF"),f.st==="m"&&(A="MUTF"));var d={symbol:f.s.replace("/",":").toUpperCase(),name:f.n,exchDisp:A};u.push({display:[d.symbol,d.name,d.exchDisp],data:d})}s(u)}catch{}}n.endsWith("=")||j.postAjax({url:n,cb:a})};const or={};or.url=on+"/";or.fetchInitialData=function(E,e,t,s,n){let r=Cr(qr);if((r==null?void 0:r.subtype)==="mutf"&&s.interval==="minute")return;let i=or.getApiUrl(E,s,e,t);this.sendAjax(i,function(a,o){if(a==200){var c=or.formatChartData(o);n({quotes:c})}else n({error:o||a})})};or.fetchUpdateData=function(E,e,t,s){var r;if(Cr(Cd)==="open"&&E===Cr(So)){if(t.interval==="minute"){let i=Cr(qr);if((i==null?void 0:i.subtype)==="mutf")return;let a=((i==null?void 0:i.db_symbol)||(i==null?void 0:i.symbol)).toLowerCase();E!==(i==null?void 0:i.symbol)&&(a=E.toLowerCase());let o=((r=i==null?void 0:i.type)==null?void 0:r[0])||"s",c=this.url;c+=`charts/${o}/`+a,c+="/stream/c?chartiq=true&interval="+t.interval+"&latest=true",this.sendAjax(c,function(l,u){if(l==200){let h=JSON.parse(u),d=h.data[0]||h.data;if(!(d!=null&&d.t)||!(d!=null&&d.p)&&!(d!=null&&d.c))return;let f={DT:new Date(d.t*1e3),Open:d.o,High:d.h,Low:d.l,Close:d.p||d.c,Volume:d.v};s({quotes:[f]})}else s({error:u||l})})}if(t.interval==="day"){let i=Cr(ko);if(i.uid&&!i.uid.toUpperCase().includes(E))return;let a={DT:new Date(i.ts),Open:i.o,High:i.h,Low:i.l,Close:i.p,Volume:i.v};s({quotes:[a]})}}};or.fetchPaginationData=function(E,e,t,s,n){let r=Cr(qr);if((r==null?void 0:r.subtype)==="mutf"&&s.interval==="minute")return;let i=or.getApiUrl(E,s,e,t);this.sendAjax(i,function(a,o){var l,u,h,d,f;if(a==200){let A=JSON.parse(o),p=!0;if(s.interval==="day"&&((l=A==null?void 0:A.data)==null?void 0:l.length)>10)if((h=(u=A==null?void 0:A.data)==null?void 0:u[0])!=null&&h.t){let g=A.data[0].t*1e3,m=A.data[0].startDate;p=m!==null&&m<g}else p=!1;else(!((d=A==null?void 0:A.data)!=null&&d.length)||((f=A==null?void 0:A.data)==null?void 0:f.length)<10)&&(p=!1);var c=or.formatChartData(o);n({quotes:c,moreAvailable:p})}else n({error:o||a})})};or.sendAjax=function(E,e){var t=new XMLHttpRequest;t.onload=function(){e(this.status,this.responseText)},t.onerror=function(){e(500)},t.open("GET",E),t.send()};or.getApiUrl=function(E,e,t,s){var l,u,h,d,f;let n=e.interval,r="MAX";n!=="day"&&(r="stream"),n==="minute"&&(n=e.period+"min");let i=Cr(qr),a=((i==null?void 0:i.db_symbol)||(i==null?void 0:i.symbol)).toLowerCase();E!==(i==null?void 0:i.symbol)&&(a=E.toLowerCase());let o=((l=i==null?void 0:i.type)==null?void 0:l[0])||"s";((u=e==null?void 0:e.symbolObject)==null?void 0:u.exchDisp)==="ETF"&&(o="e"),((h=e==null?void 0:e.symbolObject)==null?void 0:h.exchDisp)==="Stock"&&(o="s"),(d=e==null?void 0:e.symbolObject)!=null&&d.symbol.includes(":")&&(o="a",a=(f=a.replace(":","-"))==null?void 0:f.toUpperCase());var c=`${this.url}charts/${o}/${a}/${r}/c?chartiq=true`;return c+="&start="+co(t)+"&end="+co(s),n!=="day"&&(c+="&interval="+n),c};or.formatChartData=function(E){var e=JSON.parse(E);e=e.data;for(var t=[],s=0;s<e.length;s++)t.push({DT:new Date(e[s].t*1e3),Open:e[s].o,High:e[s].h,Low:e[s].l,Close:e[s].c,Volume:e[s].v});return t};j.activateImports(Xn);var dn=function(E){this.stx=E,this.activeLabels=[]};function zn(E,e){ar.update(t=>t&&{...t,events:{...t.events||{dividends:!1,earnings:!1},[E]:e}})}dn.prototype.hideMarkers=function(E){this.activeLabels=this.activeLabels.filter(e=>e!==E),j.Marker.removeByLabel(this.stx,E),!(E!=="dividends"&&E!=="earnings")&&zn(E,!1)};dn.prototype.noProClick=function(){sa("Pro_Click",{location:"Chart_Menu",type:"Events"}),Co("/pro/")};dn.prototype.showMarkers=function(E,e){var n,r;let t=((r=(n=Cr(qr))==null?void 0:n.curr)==null?void 0:r.dividend)==="USD"?"$":"";this.activeLabels.push(E);let s=new wd;E==="dividends"?s.get_dividend_for_chartiq(e).then(i=>{var c;if((c=i==null?void 0:i.data)!=null&&c.length)for(var a of i.data){var o={size:"small",color:"darkgrey",type:"square",displayStem:!1,category:"dividend",headline:`${t}${Ed.format(a.amt)}`,exDivHeadline:"Ex-Div Date",exDivStory:`${qn(a.dt)}`,payDateHeadline:"Pay Date",payDateStory:`${qn(a.pay)}`};new j.Marker({stx:this.stx,xPositioner:"date",yPositioner:"bottom",x:new Date(a.dt),label:"dividends",node:new j.Marker.Performance(o)})}this.stx.draw(),this.divDrawn=!0,zn("dividends",!0)}).catch(i=>{wo("error","Error","No dividends were found. Either this stock has no dividends or there was an error fetching the data."),sa("Chart_Error",{title:"Could not fetch dividends"})}):s.get_earnings_for_symbol(e).then(i=>{for(var a of i.data){let{date:c,period:l,year:u,currency:h,revenue_actual:d,revenue_est:f,eps_actual:A,eps_est:p,revenue_prior:g,eps_prior:m}=a,b=h==="USD"?"$":"",C=`${l} ${u}`,F=`Reported ${qn(c)}`,w=d>f?" (beat)":" (miss)";f||(w="");let U=A>p?" (beat)":" (miss)";p||(U="");let B=(d-g)/g*100,k=(A-m)/m*100,y=B>0?"Up":"Down",S=k>0?"Up":"Down",T=f?` vs ${b}${Nn(f)}`:"",_=p?` vs ${b}${Nn(p)}`:"",L=`Revenue${w}`,H=`${b}${Nn(d)}${T}
									    ${y} ${uo.format(B)}% YoY`,P=`EPS${U}`,N=`${b}${A}${_}
									${S} ${uo.format(k)}% YoY`;(A<0||m<0)&&(N=`${b}${A}${_}`);var o={markerType:"earnings",size:"small",color:"green",type:"square",displayStem:!1,category:"earningsUp",headline:C,subheadline:F,revenueHeadline:L,revenueStory:H,epsHeadline:P,epsStory:N};let v=d>f,x=A>p;v&&x?(o.category="earningsUp",o.color="green"):!v&&!x?(o.category="earningsDown",o.color="red"):(o.category="earningsDown",o.color="darkgray"),new j.Marker({stx:this.stx,xPositioner:"date",yPositioner:"bottom",x:new Date(c),groupable:!1,label:"earnings",node:new j.Marker.Performance(o)})}this.stx.draw(),this.divDrawn=!0,zn("earnings",!0)}).catch(i=>{sa("Chart_Error",{title:"Could not fetch earnings"})})};let bp={MarkersSample:dn};function Cp(E={}){var t,s,n,r;let e={initialSymbol:{symbol:"AAPL",name:"Apple Inc",exchDisp:"NASDAQ"},root:document,initialData:void 0,enabledAddOns:{extendedHours:!1,fullScreen:!1,rangeSlider:!0,tableView:!0,tooltip:!0,shortcuts:!0},onNewSymbolLoad:{removeSeries(i){return i.parameters.bucket!=="study"&&!i.parameters.retoggle},loadError(i,a){}},restore:!0,lookupDriver:j.ChartEngine.Driver.Lookup.ChartIQ,hotkeyConfig:{hotkeys:[{label:"Pan chart up",action:"up",options:{percent:.02},commands:["ArrowUp","Up"]},{label:"Pan chart down",action:"down",options:{percent:.02},commands:["ArrowDown","Down"]},{label:"Pan chart right",action:"right",options:{bars:1},commands:["ArrowRight","Right"]},{label:"Pan chart left",action:"left",options:{bars:1},commands:["ArrowLeft","Left"]},{label:"Pan chart up fast",action:"up",options:{percent:.2},commands:["Shift+ArrowUp","Shift+Up"]},{label:"Pan chart down fast",action:"down",options:{percent:.2},commands:["Shift+ArrowDown","Shift+Down"]},{label:"Pan chart right fast",action:"right",options:{bars:10},commands:["Shift+ArrowRight","Shift+Right"]},{label:"Pan chart left fast",action:"left",options:{bars:10},commands:["Shift+ArrowLeft","Shift+Left"]},{label:"Page chart right",action:"pageRight",commands:["Alt+ArrowRight","Alt+Right","PageUp"]},{label:"Page chart left",action:"pageLeft",commands:["Alt+ArrowLeft","Alt+Left","PageDown"]},{label:"Zoom in x-axis",action:"zoomInXAxis",commands:["NumpadAdd","="]},{label:"Zoom out x-axis",action:"zoomOutXAxis",commands:["NumpadSubtract","-"]},{label:"Zoom in y-axis",action:"zoomInYAxis",commands:["+"]},{label:"Zoom out y-axis",action:"zoomOutYAxis",commands:["_"]},{label:"Toggle crosshair",action:"toggleCrosshairs",commands:["Alt+Backslash","Alt+\\","Alt+Þ"]},{label:"Toggle continuous zoom",action:"toggleContinuousZoom",commands:["Alt+Digit0","Alt+0"],extension:"continuousZoom"},{label:"Tab to next",action:"keyboardNavigateNext",commands:["Tab"]},{label:"Tab to previous",action:"keyboardNavigatePrevious",commands:["Shift+Tab"]},{label:"Select at tab",action:"keyboardNavigateClick",commands:["Enter"]},{label:"Pan to home",action:"home",commands:["Home"]},{label:"Pan to start of loaded data",action:"end",commands:["End"]},{label:"Delete a highlighted item or the active drawing",action:"delete",commands:["Backspace","Delete","Del"]},{label:"Close an open menu / dialog box or undo the active drawing",action:"escape",commands:["Escape","Esc"]},{label:"Symbol Lookup",action:"symbolLookup",commands:["Shift+Alt+KeyL"],ariaLabel:"Opens main symbol lookup for chart"},{label:"Table view",action:"tableView",commands:["Alt+KeyK"],extension:"tableView",ariaLabel:"Opens chart data in table format"},{label:"Range Slider",action:"rangeSlider",commands:["Shift+Alt+KeyR"],extension:"rangeSlider"},{label:"Extended Hours",action:"extendedHours",commands:["Shift+Alt+KeyX"],extension:"extendedHours"},{label:"Keyboard Shortcuts",action:"shortcuts",commands:["Shift+Alt+Slash","Shift+Alt+?"],extension:"shortcuts"},{label:"Outliers",action:"outliers",commands:["Shift+Alt+KeyO"],extension:"outliers"},{label:"Market Depth",action:"marketDepth",commands:["Shift+Alt+KeyD"],extension:"marketDepth"},{label:"L2 Heat Map",action:"l2HeatMap",commands:["Shift+Alt+KeyM"],extension:"marketDepth"},{label:"Import Data",action:"dataLoader",commands:["Alt+KeyI"],extension:"dataLoader"},{label:"Trade From Chart",action:"tfc",commands:["Shift+Alt+KeyP"],extension:"tfc"}],keysToRepeat:["ArrowUp","ArrowDown","ArrowLeft","ArrowRight","Up","Down","Left","Right","-","_","=","+"]},systemMessages:{copytoclipboard:{message:"Copied to clipboard.",type:"info",displayTime:5},logdeactivated:{message:"Log scale has been deactivated due to a zero or negative value in your visible dataset.",type:"warning"},studynoteditable:{message:"This study is not editable",displayTime:5},eldercannotadd:{message:"Elder Impulse study cannot be activated because a custom chart is already in use.",type:"info",displayTime:3},gonogocannotadd:{message:"GoNoGo study cannot be activated because a custom chart is already in use.",type:"info",displayTime:3},addAVWAP:{message:"Select AVWAP anchor time from the chart.",type:"info",displayTime:0},removeAVWAP:{message:"Select AVWAP anchor time from the chart.",remove:!0},changeperiodicity:{message:"Changing Periodicity may lose loaded data."},duplicatesymbol:{message:"The comparison symbol cannot be the same as the main series.",displayTime:4,type:"error"}},marketDefinitionAPIs:{...E.marketDefinitionAPIs},marketDefinitionDefaultMapping:"#DEFAULT#",marketDefinitionMapping:{...E.marketDefinitionMapping},marketFactory:j.Market.Symbology.factory,chartEngineParams:{preferences:{labels:!1,currentPriceLine:!0,whitespace:0,displayCrosshairsWithDrawingTool:!1}},quoteFeeds:[{quoteFeed:E.quoteFeed,behavior:{refreshInterval:5,backgroundRefreshInterval:5,bufferSize:200}}],selector:{sideNav:".ciq-sidenav",sidePanel:"cq-side-panel",lookupComponent:".ciq-search cq-lookup",studyLegend:"cq-study-legend",timeSpanEvent:".stx-markers cq-item.span-event, .ciq-markers .switch-item.item[stxtap*=TimeSpanEvent]",markersMenuItem:".stx-markers cq-item, .ciq-markers .switch-item.item",themesMenuItem:"cq-themes",tfcTradePanel:".stx-trade-panel",tfcToggle:".stx-trade"},themes:{builtInThemes:{"ciq-day":"Day","ciq-day.redgreen":"Day (Color Blind)","ciq-night":"Night","ciq-night.redgreen":"Night (Color Blind)"},defaultTheme:"ciq-night",nameValueStore:E.nameValueStore},displayStyleIcons:!0,menuViewConfig:{},menuStudiesConfig:{excludedStudies:{stochastics:!0},alwaysDisplayDialog:{ma:!0}},drawingTools:[{type:"dt",tool:"annotation",group:"text",label:"Annotation",shortcut:"w"},{type:"dt",tool:"arrow",group:"markings",label:"Arrow",shortcut:"a"},{type:"dt",tool:"line",group:"lines",label:"Line",shortcut:"l"},{type:"dt",tool:"horizontal",group:"lines",label:"Horizontal",shortcut:"o"},{type:"dt",tool:"vertical",group:"lines",label:"Vertical",shortcut:"p"},{type:"dt",tool:"rectangle",group:"markings",label:"Rectangle",shortcut:"r"},{type:"dt",tool:"trendline",group:"lines",label:"Trend Line",shortcut:"t"},{type:"dt",tool:"measurementline",group:"statistics",label:"Measurement Line",shortcut:""},{type:"dt",tool:"average",group:"statistics",label:"Average Line"},{type:"dt",tool:"callout",group:"text",label:"Callout"},{type:"dt",tool:"channel",group:"lines",label:"Channel"},{type:"dt",tool:"check",group:"markings",label:"Check"},{type:"dt",tool:"continuous",group:"lines",label:"Continuous"},{type:"dt",tool:"crossline",group:"lines",label:"Crossline"},{type:"dt",tool:"elliottwave",group:"technicals",label:"Elliott Wave"},{type:"dt",tool:"ellipse",group:"markings",label:"Ellipse",shortcut:"e"},{type:"dt",tool:"freeform",group:"lines",label:"Doodle"},{type:"dt",tool:"fibprojection",group:"fibonacci",label:"Fib Projection"},{type:"dt",tool:"fibarc",group:"fibonacci",label:"Fib Arc"},{type:"dt",tool:"fibfan",group:"fibonacci",label:"Fib Fan"},{type:"dt",tool:"fibtimezone",group:"fibonacci",label:"Fib Time Zone"},{type:"dt",tool:"focusarrow",group:"markings",label:"Focus"},{type:"dt",tool:"gannfan",group:"technicals",label:"Gann Fan"},{type:"dt",tool:"gartley",group:"technicals",label:"Gartley"},{type:"dt",tool:"heart",group:"markings",label:"Heart"},{type:"dt",tool:"pitchfork",group:"technicals",label:"Pitchfork"},{type:"dt",tool:"quadrant",group:"statistics",label:"Quadrant Lines"},{type:"dt",tool:"ray",group:"lines",label:"Ray"},{type:"dt",tool:"regression",group:"statistics",label:"Regression Line"},{type:"dt",tool:"retracement",group:"fibonacci",label:"Fib Retracement"},{type:"dt",tool:"star",group:"markings",label:"Star"},{type:"dt",tool:"speedarc",group:"technicals",label:"Speed Resistance Arc"},{type:"dt",tool:"speedline",group:"technicals",label:"Speed Resistance Line"},{type:"dt",tool:"timecycle",group:"technicals",label:"Time Cycle"},{type:"dt",tool:"tirone",group:"statistics",label:"Tirone Levels"},{type:"dt",tool:"volumeprofile",group:"statistics",label:"Volume Profile"},{type:"dt",tool:"xcross",group:"markings",label:"Cross"}],drawingToolGrouping:["All","Favorites","Fibonacci","Lines","Markings","Statistics","Technicals","Text"],menuRendering:{item:({label:i,cmd:a,cls:o})=>`
				<cq-item ${o?`class="${o}"`:""} stxtap="${a}">${i}</cq-item>`,checkbox:({label:i,cmd:a,cls:o})=>`
				<cq-item
					${o?`class="${o}"`:""}
					stxsetget="${a}">${i}<span class="ciq-switch ciq-active"><span></span></span>
				</cq-item>`,dt:({tool:i,group:a,label:o,shortcut:c})=>`<cq-item
					role="radio"
					tabindex="-1"
					class="ciq-tool"
					cq-tool="${i}"
					${c?`cq-tool-shortcut="${c}"`:""}
					cq-tool-group="${a}"
					stxtap="tool('${i}')"
				>
					<span class="icon ${i}"></span>
					<span id="drawing_palette_${o.replace(/ /g,"")}">
						<span label role="none">${o}</span>
						<em class="ciq-screen-reader help-instr">(Help available, press question mark key)</em>
						<cq-help help-id="drawing_palette_${i}" aria-hidden="true"></cq-help>
					</span>
				</cq-item>
			`},getMenu(i,a){let o=this[i];if(o)return a===!0&&(a=(c,l)=>c.label>l.label?1:-1),typeof a=="function"&&o.sort(a),this[i].map(c=>this.menuRendering[c.type||"item"](c,this))},abstractMarkers:{},ariaActive:null,attributions:{sources:{simulator:"Simulated data.",demo:"Demo data.",xignite:'<a target="_blank" href="https://www.xignite.com">Market Data</a> <span>by Xignite</span>.',fis_mm:'<a target="_blank" href="https://www.fisglobal.com/">Market Data</a> <span>by FIS MarketMap</span>.',Twiggs:'<span>Twiggs MF Formula courtesy</span> <a target="_blank" href="https://www.incrediblecharts.com/indicators/twiggs_money_flow.php">IncredibleCharts</a>.'},exchanges:{RANDOM:"Data is randomized.","REAL-TIME":"Data is real-time.",DELAYED:"Data delayed 15 min.",RATES:"Yield data latest from source, bid/ask simulated.",BATS:"BATS BZX real-time.",EOD:"End of day data."}},groups:{range:{content:(t=Cr(qr))!=null&&t.archived||((s=Cr(qr))==null?void 0:s.subtype)==="mutf"||(r=(n=Cr(qr))==null?void 0:n.meta)!=null&&r.disableChartIntraday?[{type:"heading",label:"Set Range",className:"hidden",id:"label_showRange"},{type:"item",label:"1M",tap:"set",value:[1,"month",1,1,"day"]},{type:"item",label:"3M",tap:"set",value:[3,"month",1,1,"day"]},{type:"item",label:"6M",tap:"set",value:[6,"month",1,1,"day"]},{type:"item",label:"YTD",tap:"set",value:[1,"YTD",1,1,"day"]},{type:"item",label:"1Y",tap:"set",value:[1,"year",1,1,"day"]},{type:"item",label:"3Y",tap:"set",value:[3,"year",1,1,"day"]},{type:"item",label:"5Y",tap:"set",value:[5,"year",1,1,"week"]},{type:"item",label:"All",tap:"set",value:[1,"all"],className:"hide-sm"}]:[{type:"heading",label:"Set Range",className:"hidden",id:"label_showRange"},{type:"item",label:"1D",tap:"set",value:[1,"today"]},{type:"item",label:"5D",tap:"set",value:[6,"day",5,1,"minute"]},{type:"item",label:"1M",tap:"set",value:[1,"month",1,1,"day"]},{type:"item",label:"3M",tap:"set",value:[3,"month",1,1,"day"],className:"hide-sm"},{type:"item",label:"6M",tap:"set",value:[6,"month",1,1,"day"]},{type:"item",label:"YTD",tap:"set",value:[1,"YTD",1,1,"day"]},{type:"item",label:"1Y",tap:"set",value:[1,"year",1,1,"day"]},{type:"item",label:"3Y",tap:"set",value:[3,"year",1,1,"day"],className:"hide-sm"},{type:"item",label:"5Y",tap:"set",value:[5,"year",1,1,"week"]},{type:"item",label:"All",tap:"set",value:[1,"all"],className:"hide-sm"}]}},menus:{crosshair:{content:[{type:"radio",label:"Hide Heads-Up Display",setget:"Layout.HeadsUp",value:"crosshair"},{type:"radio",label:"Show Heads-Up Display",setget:"Layout.HeadsUp",value:"static"}]},display:{content:[{type:"heading",label:"Chart Types"},{type:"radio",label:"Candle",setget:"Layout.ChartType",iconCls:"candle",value:"candle",helpId:"chart_style_candle"},{type:"radio",label:"Bar",setget:"Layout.ChartType",iconCls:"bar",value:"bar",feature:"advanced",helpId:"chart_style_bar"},{type:"radio",label:"Colored Bar",setget:"Layout.ChartType",iconCls:"colored-bar",value:"colored_bar",feature:"advanced",helpId:"chart_style_colored_bar"},{type:"radio",label:"Line",setget:"Layout.ChartType",iconCls:"line",value:"line",helpId:"chart_style_line"},{type:"radio",label:"Colored Line",setget:"Layout.ChartType",iconCls:"colored-line",value:"colored_line",feature:"advanced",helpId:"chart_style_colored_line"},{type:"radio",label:"Vertex Line",setget:"Layout.ChartType",iconCls:"vertex-line",value:"vertex_line",helpId:"chart_style_vertex_line"},{type:"radio",label:"Step",setget:"Layout.ChartType",iconCls:"step",value:"step",helpId:"chart_style_step"},{type:"radio",label:"Mountain",setget:"Layout.ChartType",iconCls:"mountain",value:"mountain",helpId:"chart_style_mountain"},{type:"radio",label:"Baseline",setget:"Layout.ChartType",iconCls:"baseline-delta",value:"baseline_delta",feature:"advanced",helpId:"chart_style_baseline"},{type:"radio",label:"Hollow Candle",setget:"Layout.ChartType",iconCls:"hollow-candle",value:"hollow_candle",feature:"advanced",helpId:"chart_style_hollow_candle"},{type:"radio",label:"Volume Candle",setget:"Layout.ChartType",iconCls:"volume-candle",value:"volume_candle",feature:"advanced",helpId:"chart_style_volume_candle"},{type:"radio",label:"Colored HLC Bar",setget:"Layout.ChartType",iconCls:"colored-hlc",value:"colored_hlc",feature:"advanced",helpId:"chart_style_colored_hlc_bar"},{type:"radio",label:"Data Points",setget:"Layout.ChartType",iconCls:"scatterplot",value:"scatterplot",feature:"advanced",helpId:"chart_style_datapoints"},{type:"radio",label:"Histogram",setget:"Layout.ChartType",iconCls:"histogram",value:"histogram",helpId:"chart_style_histogram"},{type:"separator",feature:"advanced"},{type:"heading",label:"Aggregated Types",feature:"advanced"},{type:"radio",label:"Heikin Ashi",setget:"Layout.ChartType",iconCls:"heikinashi",value:"heikinashi",feature:"advanced",helpId:"chart_type_heikin_ashi"},{type:"radio",label:"Kagi",setget:"Layout.ChartType",options:"Layout.showAggregationEdit",iconCls:"kagi",value:"kagi",feature:"advanced",helpId:"chart_type_kagi"},{type:"radio",label:"Line Break",setget:"Layout.ChartType",options:"Layout.showAggregationEdit",iconCls:"linebreak",value:"linebreak",feature:"advanced",helpId:"chart_type_linebreak"},{type:"radio",label:"Renko",setget:"Layout.ChartType",options:"Layout.showAggregationEdit",iconCls:"renko",value:"renko",feature:"advanced",helpId:"chart_type_renko"},{type:"radio",label:"Range Bars",setget:"Layout.ChartType",options:"Layout.showAggregationEdit",iconCls:"rangebars",value:"rangebars",feature:"advanced",helpId:"chart_type_rangebars"},{type:"radio",label:"Point & Figure",setget:"Layout.ChartType",options:"Layout.showAggregationEdit",iconCls:"pandf",value:"pandf",feature:"advanced",helpId:"chart_type_pandf"}]},info:{content:[{type:"radio",label:"Show Dynamic Callout",setget:"Layout.HeadsUp",value:"dynamic"},{type:"radio",label:"Show Tooltip",setget:"Layout.HeadsUp",feature:"tooltip",value:"floating"},{type:"item",label:"Remove Pinned Tooltips",tap:"Markers.removePinnedMarkers",value:"pinned_tooltip",feature:"pinnedmarkers"}]},markers:{content:[{type:"heading",label:"SignalIQ",feature:"signaliq"},{type:"component",value:"cq-study-legend",attributes:{filter:"signal","button-remove":"true"},feature:"signaliq"},{type:"separator",className:"partial",feature:"signaliq"},{type:"clickable",label:"New Signal",iconCls:"plus",selector:"cq-signaliq-dialog",method:"open",feature:"signaliq"},{type:"separator",feature:"signaliq"},{type:"heading",label:"Chart Events"},{type:"switch",label:"Simple Square",tap:"Markers.showMarkers",value:"square"},{type:"switch",label:"Simple Circle",tap:"Markers.showMarkers",value:"circle"},{type:"switch",label:"Callouts",tap:"Markers.showMarkers",value:"callout"},{type:"switch",label:"Trade",tap:"Markers.showMarkers",value:"trade",feature:"ta_markers"},{type:"switch",label:"Video",tap:"Markers.showMarkers",value:"video",feature:"video_markers"},{type:"switch",label:"Abstract",tap:"Markers.showMarkers",value:"helicopter"},{type:"separator",className:"partial",feature:"pinnedmarkers"},{type:"item",label:"Remove Pinned Events",tap:"Markers.removePinnedMarkers",value:"pinned_event",feature:"pinnedmarkers"},{type:"separator",feature:"ptv"},{type:"heading",label:"Panel Events",feature:"ptv"},{type:"switch",label:"Order",tap:"TimeSpanEvent.showMarkers",value:"Order",feature:"ptv"},{type:"switch",label:"CEO",tap:"TimeSpanEvent.showMarkers",value:"CEO",feature:"ptv"},{type:"switch",label:"News",tap:"TimeSpanEvent.showMarkers",value:"News",feature:"ptv"}]},period:{content:[{type:"item",label:"1 D",tap:"Layout.setPeriodicity",value:[1,1,"day"]},{type:"item",label:"1 W",tap:"Layout.setPeriodicity",value:[1,1,"week"]},{type:"item",label:"1 Mo",tap:"Layout.setPeriodicity",value:[1,1,"month"]},{type:"separator"},{type:"item",label:"1 Min",tap:"Layout.setPeriodicity",value:[1,1,"minute"]},{type:"item",label:"5 Min",tap:"Layout.setPeriodicity",value:[1,5,"minute"]},{type:"item",label:"10 Min",tap:"Layout.setPeriodicity",value:[2,5,"minute"]},{type:"item",label:"15 Min",tap:"Layout.setPeriodicity",value:[3,5,"minute"]},{type:"item",label:"30 Min",tap:"Layout.setPeriodicity",value:[1,30,"minute"]},{type:"item",label:"1 Hour",tap:"Layout.setPeriodicity",value:[2,30,"minute"]},{type:"item",label:"4 Hour",tap:"Layout.setPeriodicity",value:[8,30,"minute"]}]},preferences:{content:[{type:"heading",label:"Chart Preferences"},{type:"switch",label:"Range Selector",setget:"Layout.RangeSlider",feature:"rangeslider"},{type:"switch",label:"Extended Hours",setget:"Layout.ExtendedHours",feature:"extendedhours"},{type:"switch",label:"Animation",setget:"Layout.Animation",feature:"animation"},{type:"switch",label:"Hide Outliers",setget:"Layout.Outliers",feature:"outliers"},{type:"switch",label:"Market Depth",setget:"Layout.MarketDepth",feature:"marketdepth"},{type:"switch",label:"L2 Heat Map",setget:"Layout.L2Heatmap",feature:"marketdepth"},{type:"separator"},{type:"heading",label:"Y-Axis Preferences"},{type:"switch",label:"Study Labels",setget:"Layout.showYAxisLabels"},{type:"switch",label:"Log Scale",setget:"Layout.ChartScale",value:"log"},{type:"switch",label:"Invert",setget:"Layout.FlippedChart"},{type:"separator"},{type:"heading",label:"Additional Features"},{type:"item",label:"Shortcuts / Hotkeys",tap:"Layout.showShortcuts",value:!0,feature:"shortcuts"},{type:"item",label:"Import Data",tap:"Channel.write",value:["dataLoader",!0],feature:"dataloader"},{type:"separator"},{type:"heading",label:"Themes"},{type:"component",value:"cq-themes",menuPersist:!0},{type:"separator",className:"partial"},{type:"clickable",label:"New Theme",iconCls:"plus",selector:"cq-theme-dialog",method:"open"},{type:"separator"},{type:"heading",label:"Locale"},{type:"clickable",label:"Change Timezone",selector:"cq-timezone-dialog",method:"open"},{type:"item",label:"Change Language",setget:"Layout.Language",iconCls:"flag"}]},studies:{content:[{type:"component",value:"cq-study-legend",attributes:{class:"shaded",heading:"Active Studies","button-remove":"true","button-clear-all":"Layout.clearStudies()"}},{type:"heading",label:"ScriptIQ",feature:"scriptiq"},{type:"component",value:"cq-scriptiq-menu",feature:"scriptiq"},{type:"separator",className:"partial",feature:"scriptiq"},{type:"clickable",label:"New Script",iconCls:"plus",selector:"cq-scriptiq-editor",method:"open",feature:"scriptiq"},{type:"separator",feature:"scriptiq"},{type:"heading",label:"Studies",filterFor:"studylist",filterMin:15},{type:"component",value:"cq-studies",attributes:{"filter-name":"studylist",favorites:""}}]},studybrowser:{noscroll:!0,content:[{type:"component",value:"cq-study-browser"}]},views:{content:[{type:"heading",label:"Saved Views"},{type:"component",value:"cq-views"},{type:"separator",className:"partial"},{type:"clickable",label:"Save View",iconCls:"plus",selector:"cq-view-dialog",method:"open"}]},cvplinestyle:{content:[{type:"item",label:"Line Style Solid 1",tap:"setStyle",value:[1,"solid"],iconCls:"ciq-line-style-option ciq-solid-1"},{type:"item",label:"Line Style Solid 3",tap:"setStyle",value:[3,"solid"],iconCls:"ciq-line-style-option ciq-solid-3"},{type:"item",label:"Line Style Solid 5",tap:"setStyle",value:[5,"solid"],iconCls:"ciq-line-style-option ciq-solid-5"},{type:"item",label:"Line Style Dotted 1",tap:"setStyle",value:[1,"dotted"],iconCls:"ciq-line-style-option ciq-dotted-1"},{type:"item",label:"Line Style Dotted 3",tap:"setStyle",value:[3,"dotted"],iconCls:"ciq-line-style-option ciq-dotted-3"},{type:"item",label:"Line Style Dotted 5",tap:"setStyle",value:[5,"dotted"],iconCls:"ciq-line-style-option ciq-dotted-5"},{type:"item",label:"Line Style Dashed 1",tap:"setStyle",value:[1,"dashed"],iconCls:"ciq-line-style-option ciq-dashed-1"},{type:"item",label:"Line Style Dashed 3",tap:"setStyle",value:[3,"dashed"],iconCls:"ciq-line-style-option ciq-dashed-3"},{type:"item",label:"Line Style Dashed 5",tap:"setStyle",value:[5,"dashed"],iconCls:"ciq-line-style-option ciq-dashed-5"}]},fontfamily:{content:[{type:"item",label:"Default",tap:"setFontFamily",value:["Default"]},{type:"item",label:"Helvetica",tap:"setFontFamily",value:["Helvetica"]},{type:"item",label:"Courier",tap:"setFontFamily",value:["Courier"]},{type:"item",label:"Garamond",tap:"setFontFamily",value:["Garamond"]},{type:"item",label:"Palatino",tap:"setFontFamily",value:["Palatino"]},{type:"item",label:"Times New Roman",tap:"setFontFamily",value:["Times New Roman"]}]},fontsize:{content:[{type:"item",label:"8",tap:"setFontSize",value:["8px"]},{type:"item",label:"10",tap:"setFontSize",value:["10px"]},{type:"item",label:"12",tap:"setFontSize",value:["12px"]},{type:"item",label:"13",tap:"setFontSize",value:["13px"]},{type:"item",label:"14",tap:"setFontSize",value:["14px"]},{type:"item",label:"16",tap:"setFontSize",value:["16px"]},{type:"item",label:"20",tap:"setFontSize",value:["20px"]},{type:"item",label:"28",tap:"setFontSize",value:["28px"]},{type:"item",label:"36",tap:"setFontSize",value:["36px"]},{type:"item",label:"48",tap:"setFontSize",value:["48px"]},{type:"item",label:"64",tap:"setFontSize",value:["64px"]}]},linestyle:{content:[{type:"item",label:"Line Style Solid 1",tap:"setLine",value:[1,"solid"],iconCls:"ciq-line-style-option ciq-solid-1"},{type:"item",label:"Line Style Solid 3",tap:"setLine",value:[3,"solid"],iconCls:"ciq-line-style-option ciq-solid-3"},{type:"item",label:"Line Style Solid 5",tap:"setLine",value:[5,"solid"],iconCls:"ciq-line-style-option ciq-solid-5"},{type:"item",label:"Line Style Dotted 1",tap:"setLine",value:[1,"dotted"],iconCls:"ciq-line-style-option ciq-dotted-1"},{type:"item",label:"Line Style Dotted 3",tap:"setLine",value:[3,"dotted"],iconCls:"ciq-line-style-option ciq-dotted-3"},{type:"item",label:"Line Style Dotted 5",tap:"setLine",value:[5,"dotted"],iconCls:"ciq-line-style-option ciq-dotted-5"},{type:"item",label:"Line Style Dashed 1",tap:"setLine",value:[1,"dashed"],iconCls:"ciq-line-style-option ciq-dashed-1"},{type:"item",label:"Line Style Dashed 3",tap:"setLine",value:[3,"dashed"],iconCls:"ciq-line-style-option ciq-dashed-3"},{type:"item",label:"Line Style Dashed 5",tap:"setLine",value:[5,"dashed"],iconCls:"ciq-line-style-option ciq-dashed-5"},{type:"item",className:"fills-only",label:"Line Style None",tap:"setLine",value:[0,"none"],iconCls:"ciq-none"}]},studyLinestyle:{content:[{type:"item",label:"Line Style Solid 1",tap:"StudyDialog.setLine",value:[1,"solid"],iconCls:"ciq-line-style-option ciq-solid-1"},{type:"item",label:"Line Style Solid 3",tap:"StudyDialog.setLine",value:[3,"solid"],iconCls:"ciq-line-style-option ciq-solid-3"},{type:"item",label:"Line Style Solid 5",tap:"StudyDialog.setLine",value:[5,"solid"],iconCls:"ciq-line-style-option ciq-solid-5"},{type:"item",label:"Line Style Dotted 1",tap:"StudyDialog.setLine",value:[1,"dotted"],iconCls:"ciq-line-style-option ciq-dotted-1"},{type:"item",label:"Line Style Dotted 3",tap:"StudyDialog.setLine",value:[3,"dotted"],iconCls:"ciq-line-style-option ciq-dotted-3"},{type:"item",label:"Line Style Dotted 5",tap:"StudyDialog.setLine",value:[5,"dotted"],iconCls:"ciq-line-style-option ciq-dotted-5"},{type:"item",label:"Line Style Dashed 1",tap:"StudyDialog.setLine",value:[1,"dashed"],iconCls:"ciq-line-style-option ciq-dashed-1"},{type:"item",label:"Line Style Dashed 3",tap:"StudyDialog.setLine",value:[3,"dashed"],iconCls:"ciq-line-style-option ciq-dashed-3"},{type:"item",label:"Line Style Dashed 5",tap:"StudyDialog.setLine",value:[5,"dashed"],iconCls:"ciq-line-style-option ciq-dashed-5"}]},toolgrouping:{content:[]},wavecorrective:{content:[{type:"item",label:"- - -",tap:"update",value:["corrective",null]},{type:"item",label:"A B C",tap:"update",value:["corrective","A,B,C"]},{type:"item",label:"a b c",tap:"update",value:["corrective","a,b,c"]},{type:"item",label:"W X Y",tap:"update",value:["corrective","W,X,Y"]},{type:"item",label:"w x y",tap:"update",value:["corrective","w,x,y"]}]},waveimpulse:{content:[{type:"item",label:"- - -",tap:"update",value:["impulse",null]},{type:"item",label:"I II III IV V",tap:"update",value:["impulse","I,II,III,IV,V"]},{type:"item",label:"i ii iii iv v",tap:"update",value:["impulse","i,ii,iii,iv,v"]},{type:"item",label:"1 2 3 4 5",tap:"update",value:["impulse","1,2,3,4,5"]},{type:"item",label:"A B C D E",tap:"update",value:["impulse","A,B,C,D,E"]},{type:"item",label:"a b c d e",tap:"update",value:["impulse","a,b,c,d,e"]},{type:"item",label:"W X Y X Z",tap:"update",value:["impulse","W,X,Y,X,Z"]},{type:"item",label:"w x y x z",tap:"update",value:["impulse","w,x,y,x,z"]}]},wavetemplate:{content:[{type:"item",label:"Grand Supercycle",tap:"update",value:["template","Grand Supercycle"]},{type:"item",label:"Supercycle",tap:"update",value:["template","Supercycle"]},{type:"item",label:"Cycle",tap:"update",value:["template","Cycle"]},{type:"item",label:"Primary",tap:"update",value:["template","Primary"]},{type:"item",label:"Intermediate",tap:"update",value:["template","Intermediate"]},{type:"item",label:"Minor",tap:"update",value:["template","Minor"]},{type:"item",label:"Minute",tap:"update",value:["template","Minute"]},{type:"item",label:"Minuette",tap:"update",value:["template","Minuette"]},{type:"item",label:"Sub-Minuette",tap:"update",value:["template","Sub-Minuette"]},{type:"item",label:"Custom",tap:"update",value:["template","Custom"]}]}},toggles:{crosshair:{callbacks:[function(i){let{context:a}=this;const o=a.topNode.parentElement.closest("cq-context");o&&(a=o.CIQ.UI.context),!this.getCharts&&a.topNode.getCharts&&(this.getCharts=a.topNode.getCharts);const{layout:c}=a.stx;if((!c.headsUp||typeof c.headsUp!="object")&&(c.headsUp==="static"?c.headsUp={static:!0}:c.headsUp={}),!this.listener){const h=o?o.CIQ.UI.context.stx.layout:c;this.listener=d=>{const{stx:f}=this.context;this.value=d.value&&(d.value==="static"||d.value.static)||h.crosshair,this.classList.toggle("active",!!this.value),this.value?(f.centerCrosshairs(),f.doDisplayCrosshairs()):f.undisplayCrosshairs(),f.container.closest("cq-context-wrapper.active")&&(document.body.keystrokeHub.context=this.context)},j.UI.observeProperty("crosshair",h,this.listener),this.observeInfo={member:"crosshair",obj:h,listener:this.listener};return}const l=this.getCharts&&this.getCharts()||[a.stx],u=l.slice(-1)[0].channel.breakpoint;l.forEach(({layout:h})=>{let d=Object.assign({},h.headsUp);this.lastState||(this.lastState=d),i?(d.static||(d.static=this.lastState.static||u==="break-sm"),h.crosshair=!0):(h.crosshair&&(this.lastState=Object.assign({},d)),d.static=!1,h.crosshair=!1),h.headsUp=d})}]},info:{callbacks:[function(i){let{context:a}=this;const o=a.topNode.parentElement.closest("cq-context");o&&!a.topNode.isMultiChartHost&&(a=o.CIQ.UI.context),!this.getCharts&&a.topNode.getCharts&&(this.getCharts=a.topNode.getCharts);const{layout:c}=a.stx;if((!c.headsUp||typeof c.headsUp!="object")&&(["dynamic","floating","static"].includes(c.headsUp)?c.headsUp={[c.headsUp]:!0}:c.headsUp={}),!this.listener){const{stx:{layout:u},stx:h}=o?o.CIQ.UI.context:a;this.listener=d=>{this.value=d.value&&(["dynamic","floating"].includes(d.value)||d.value.dynamic||d.value.floating),this.classList.toggle("active",!!this.value),d.value&&(d.value==="dynamic"||d.value.dynamic||d.value==="floating"||d.value.floating)&&(this.context.stx.centerCrosshairs(),this.context.stx.doDisplayCrosshairs()),h.container.closest("cq-context-wrapper.active")&&(document.body.keystrokeHub.context=this.context)},j.UI.observeProperty("headsUp",u,this.listener),this.observeInfo={member:"headsUp",obj:u,listener:this.listener};return}(this.getCharts&&this.getCharts()||[a.stx]).forEach(({layout:u})=>{let h=Object.assign({},u.headsUp);this.lastState||(this.lastState=h),i?!h.dynamic&&!h.floating&&(h.dynamic=this.lastState.dynamic||!this.context.stx.huTooltip,h.floating=this.lastState.floating||!h.dynamic):(this.lastState=Object.assign({},h),h.dynamic=h.floating=!1),u.headsUp=h})}]},symbolsearch:{callbacks:[{fn:function(i){const{context:a,channelWrite:o}=this,c=(a.config.channels||{}).dialog||"channel.dialog";o(c,{type:"lookup",params:{context:a,caller:this}},a.stx)},immediate:!1}]}},addOns:{tooltip:{ohl:!0,volume:!0,series:!0,studies:!0},inactivityTimer:{minutes:30},animation:{animationParameters:{tension:.3}},outliers:{},rangeSlider:{},fullScreen:{},extendedHours:{filter:!0},continuousZoom:{periodicities:[{period:1,interval:"month"},{period:1,interval:"week"},{period:1,interval:"day"},{period:8,interval:30},{period:1,interval:30},{period:5,interval:1},{period:1,interval:1},{period:10,interval:1,timeUnit:"second"},{period:1,interval:1,timeUnit:"second"}],boundaries:{maxCandleWidth:15,minCandleWidth:3}},forecasting:{moduleName:"PlotComplementer",id:"forecast",decorator:{symbol:"_fcst",display:" Forecast"},renderingParameters:{chartType:"channel",opacity:.5,pattern:"dotted"},quoteFeed:E.forecastQuoteFeed,behavior:{refreshInterval:60}},tableView:{},dataLoader:{},shortcuts:{}},plugins:{ptv:{moduleName:"TimeSpanEventPanel",menuItemSelector:".stx-markers cq-item.span-event",loadSample:!0,showTooltip:!0,infoPanel:{durationEvent:"main",spanEvent:"main",singleEvent:"main"}},marketDepth:{volume:!0,mountain:!0,step:!0,record:!0,height:"50%",orderbook:!0,interaction:!0},tfc:{moduleName:"TFC",container:".ciq-menu-section .ciq-toggles",loadSample:!0,startCompact:!0,channel:"channel.tfc",toggleMarkup:`
						<cq-toggle feature="tfc" class="sidebar stx-trade" cq-member="tfc">
							<span></span>
							<cq-tooltip>Trade</cq-tooltip>
						</cq-toggle>
					`},crossSection:{pointFreshnessTimeout:1,enableTimeSeries:!0,xAxisType:"regular",timelineDateSelector:{height:95,useNotifications:!0},postInstall({uiContext:i,extension:a}){const{stx:{crossSection:o}}=i;j.getFn("UI.CurveEdit")(null,i,this),j.getFn("CrossSection.HUD")(null,i),this.timelineDateSelector&&j.getFn("CrossSection.TimelineDateSelector")(Object.assign({crossSection:o},this.timelineDateSelector));const c=i.topNode.querySelector("cq-datepicker");c&&c.registerCallback(l=>a.setCurveDate(l))}},visualEarnings:{container:".ciq-menu-section .ciq-dropdowns"},signalIQ:{panelHeight:150,displayCondition:!1,emojiPicker:E.emojiPicker&&{open({stx:i,targetElement:a,handler:o}){if(this.pickers||(this.pickers=new Map),!this.pickers.has(a)){const l=this.container=document.createElement("button");l.type="button",l.classList.add("marker-emoji-picker"),a.parentElement.insertBefore(l,a.nextSibling);const u=[];this.emojis.forEach(h=>{u.push({value:i.emojify(`:${h.replace(/\|/g,"::")}:`),label:h})}),this.pickers.set(a,new E.emojiPicker({button:l,targetElement:a,container:this.container,emojiList:u,displacements:{x:0}}))}const c=this.pickers.get(a);c.onSelect(o),c.toggle(!0)},clean(){this.pickers&&(this.pickers.forEach(i=>i.toggle(!1)),this.pickers=null)},emojis:["smile","partying_face","sob","money_mouth_face","arrow_upper_right","arrow_lower_right","ox","bear","gem","rocket","heart","poop","fire","bomb","pray","moneybag"]},disallowedStudies:["Darvas","Elder Impulse","GoNoGo Trend","Pivot Points","Sentiment By Strike","val lines","Volatility Cone","vol profile"]},studyBrowser:{},scriptIQ:{},analystViews:{container:".ciq-menu-section .ciq-toggles",moduleName:"TCAnalystViews",partner:1e3,token:"eZOrIVNU3KR1f0cf6PTUYg==",channel:"channel.analystviews",toggleMarkup:`
						<cq-toggle class="stx-analystviews" cq-member="analystviews">
							<span></span>
							<cq-tooltip>Analyst Views</cq-tooltip>
						</cq-toggle>
						`},technicalInsights:{container:".ciq-menu-section .ciq-toggles",moduleName:"TCTechnicalInsights",lang:"en",uid:"",channel:"channel.technicalinsights",toggleMarkup:`
						<cq-toggle class="stx-technicalinsights" cq-member="technicalinsights">
							<span></span>
							<cq-tooltip>Technical Insights</cq-tooltip>
						</cq-toggle>
						`}},channels:{lookup:"channel.lookup",crosshair:"layout.crosshair",headsUp:"layout.headsUp",sidenav:"layout.sidenav",tableView:"channel.tableView",drawing:"channel.drawing",drawingPalettes:"channel.drawingPalettes",breakpoint:"channel.breakpoint",containerSize:"channel.containerSize",sidenavSize:"channel.sidenavSize",sidepanelSize:"channel.sidepanelSize",pluginPanelHeight:"channel.pluginPanelHeight",tfc:"channel.tfc",analystviews:"channel.analystviews",technicalinsights:"channel.technicalinsights",dataLoader:"channel.dataLoader",dialog:"channel.dialog",keyboardNavigation:"channel.keyboardNavigation",class:"channel.componentClass"},dialogs:{aggregation:{tag:"cq-aggregation-dialog",attributes:{"cq-title":"Aggregation Dialog"}},dataLoader:{tag:"cq-data-dialog",attributes:{"cq-title":"Import Data","cq-close-button":"false"}},drawingContext:{tag:"cq-drawing-context",attributes:{"cq-close-button":"false"}},fibSettings:{tag:"cq-fib-settings-dialog",attributes:{"cq-title":"Settings","cq-close-button":"false"}},language:{tag:"cq-language-dialog",attributes:{"cq-title":"Choose language"}},lookup:{tag:"cq-lookup-dialog",attributes:{"cq-title":"Symbol Lookup"}},measurementlineSettings:{tag:"cq-measurementline-settings-dialog",attributes:{"cq-title":"Measurement Line Settings","cq-close-button":"false"}},share:{tag:"cq-share-dialog",attributes:{"cq-title":"Share"}},signaliq:{tag:"cq-signaliq-dialog",attributes:{"cq-title":"New Signal"}},study:{tag:"cq-study-dialog",attributes:{"cq-title":"Study","cq-close-button":"false","cq-study-axis":!0,"cq-study-panel":"alias"}},studyContext:{tag:"cq-study-context",attributes:{"cq-close-button":"false"}},theme:{tag:"cq-theme-dialog",attributes:{"cq-title":"Create Custom Theme"}},timezone:{tag:"cq-timezone-dialog",attributes:{"cq-title":"Choose Timezone","cq-description":"To set your timezone use the location button below, or scroll through the following list..."}},view:{tag:"cq-view-dialog",attributes:{"cq-title":"Save View"}},volumeprofileSettings:{tag:"cq-volumeprofile-settings-dialog",attributes:{"cq-title":"Volume Profile Settings","cq-close-button":"false"}},yaxisContext:{tag:"cq-yaxis-context",attributes:{"cq-close-button":"false"}}},eventMarkersImplementation:E.markerFeed,scrollbarStyling:{refresh(i,a={suppressScrollX:!0}){typeof E.scrollStyle=="function"&&(i.__ps||(i.__ps=new E.scrollStyle(i,a),i.__ps.scrollbarX.setAttribute("tabindex",-1),i.__ps.scrollbarY.setAttribute("tabindex",-1)),i.__ps.update(i))},destroy(i){i.__ps&&i.__ps.destroy()}},multiChartCopySymbol:null,multiChartLoadMsg:"Click to load a symbol",restoreOffgridCharts:!0,nameValueStore:E.nameValueStore,onWebComponentsReady:()=>{},onEngineReady:i=>{},onChartReady:i=>{},onMultiChartEvent:(i,a)=>{},soloActive:{onDraw:{shouldSolo(i){return!1},notify:{message:"Click on the draw toggle again to close drawing tools and return to grid view"}},onTFC:{shouldSolo(i){const{width:a,height:o}=i.container.getBoundingClientRect();return a<300||o<250},notify:{message:"Chart has been maximized to make it easier to set trade prices."}},onTechnicalInsights:{notify:{message:"Chart has been soloed for plugin use. Disable plugin to restore chart grid."}},onAnalystViews:{notify:{message:"Chart has been soloed for plugin use. Disable plugin to restore chart grid."}}},useQueryString:{symbolObject:{symbol:"symbol",name:"name",exchDisp:"exchDisp"}},updateFromQueryString(){if(!this.useQueryString)return;const i=j.qs(),a=Object.entries(this.useQueryString.symbolObject).reduce((o,[c,l])=>{const u=i[l];return u!==void 0&&(o[c]=u),o},{});a.symbol&&(this.initialSymbol=a,this.restore&&(this.restore={...this.restore,symbol:!1}))},createChart:function(i,a,o,c,l,u,h){this.updateFromQueryString(),this.initialSymbol={symbol:o,name:a==null?void 0:a.name,exchDisp:a==null?void 0:a.exchange},this.themes.defaultTheme=c?"ciq-night":"ciq-day",this.quoteFeeds=u,this.eventMarkersImplementation=h;const d=this;return j.UI?new j.UI.Chart().createChartAndUI({container:i,config:d,deferLoad:!0}).stx:j.ChartEngine.create({container:i,config:d,deferLoad:!0})},chartSharing:E.chartSharing};return E.quoteFeed||(e.quoteFeeds.length=0),e}j.Studies.Favorites={_list:[],add(E){const{studyLibrary:e}=j.Studies,t=this._list,s=r(E),n=t.findIndex(({name:a})=>a===s.name);n>-1?this._list[n]=s:this._list=t.concat(s),this.save();function r(a){const o=typeof a=="object";if(!o){let A;if(A=a,e[A])a=e[A];else if([A,a]=Object.entries(e).find(([p,{name:g}])=>g===a)||[],!A){console.warn("Study not found");return}return{type:A,name:a.name}}if(i(a))return{type:a.type,name:e[a.type].name};const{type:c,name:l,inputs:u,outputs:h,parameters:d,libraryEntry:{name:f}={}}=a;return{type:c,name:l.replace(/-\d{1,2}$/,""),studyName:f!==l&&f,inputs:u,outputs:h,parameters:d,isCustomized:o}}function i(a){const o=j.Studies.studyLibrary[a.type],{display:c,id:l,...u}=a.inputs;return JSON.stringify(o.inputs)===JSON.stringify(u)&&JSON.stringify(o.outputs)===JSON.stringify(a.outputs)}},remove(E){this._list=this._list.filter(({name:e})=>e!==E),this.save()},getList(){return[...this._list]},includes(E){return this._list.find(({name:e})=>e===E)},addToChart(E,e){const t=this._list.find(({name:s})=>s===E);if(!t){console.warn(`Study ${E} not in favourite list`);return}j.Studies.addStudy(e,t.type,t.inputs,t.outputs,t.parameters)},_getStore(E={}){if(!this._store){const e=j.getFromNS(E,"uiContext.config.nameValueStore",j.NameValueStore);this._store=new e}return this._store},save(E={},e=()=>{}){this._getStore(E).set("CIQ_Studies_Favorite_list",this._list,e)},retrieveList(E={},e=()=>{}){this._getStore(E).get("CIQ_Studies_Favorite_list",(t,s)=>{!t&&s&&(this._list=s,e(s))})}};j.UI&&(j.UI.StudyEdit.prototype.addToFavorites=function({params:E}){this.contextDialog.forEach(function(t){t.close&&t.close()});const{sd:e}=this.params;j.Studies.Favorites.add(e),E.parent.postProcess&&E.parent.postProcess("favorite",e)});new Promise(E=>{import.meta.webpack?bo(()=>Promise.resolve().then(()=>Md),void 0,import.meta.url).then(E):typeof define=="function"&&define.amd?define(["./studybrowser.css"],E):typeof window<"u"?j.loadStylesheet(new URL(""+new URL("https://stockanalysis.com/_app/immutable/assets/studybrowser.BI8bg8Xa.css",import.meta.url).href,import.meta.url).href,E):E()}).then(E=>j.addInternalStylesheet(E,"studybrowser"));if(!j.UI)console.error("Study Browser requires importing componentUI.js.");else{class E extends j.UI.ContextTag{static get observedAttributes(){return["filter"]}constructor(){super(),this.interactiveStudies={"Anchored VWAP":!0}}adoptedCallback(){super.adoptedCallback(),j.UI.flattenInheritance(this,E),this.constructor=E}disconnectedCallback(){this.doNotDisconnect||(this.multiChartContainer&&j.UI.removeResizeListener(this.multiChartContainer),super.disconnectedCallback())}attributeChangedCallback(t,s,n){this.filterCategory(n)}setContext(t){if(this.init)return;this.addDefaultMarkup(),this.getStudies(),this.setupInfoPanel();const s=this.closest("cq-menu");if(this.parentMenu=s,s&&s.show){const{show:n}=s;s.show=(...r)=>{n.apply(s,r),this.isConnected?this.open():s.show=n}}if(s&&s.hide){const{hide:n}=s;s.hide=(...r)=>{n.apply(s,r),this.isConnected?this.hide():s.hide=n}}this.responsiveSetup(),this.init=!0,this.filterCategory("Study Library")}changeContext(t){if(this.context=t,!this.innerHTML){setTimeout(()=>{this.changeContext(t)});return}this.querySelector("cq-study-legend").context=t,this.querySelector("cq-studies").context=t,this.setupActiveStudyCountListener()}open(){this.filterCategory(this.currentFilter,!0),this.context.topNode.classList.add("ciq-sb-active");const t=this.querySelector(".ciq-sb-studies");t.tabIndex=-1,t.focus()}hide(){this.context.topNode.classList.remove("ciq-sb-active"),this.parentMenu&&(this.parentMenu.tabIndex===void 0&&(this.parentMenu.tabIndex=-1),this.parentMenu.focus())}getStudies(){const{stx:t}=this.context;this.categories=j.Studies.Categories;const s=this.querySelector(".ciq-sb-categories cq-scroll"),n=Object.keys(this.categories);j.Scripting&&n.push("ScriptIQ"),s.insertAdjacentHTML("beforeend",`<cq-separator></cq-separator>
					<cq-heading role="heading">Categories</cq-heading>`),n.sort().filter(i=>i!=="Popular").forEach(i=>{s.insertAdjacentHTML("beforeend",`<cq-item cq-no-close cq-filter="${i}" role="menuitemcheckbox" aria-checked="false">${i}</cq-item>`)}),this.makeTap(this.querySelector(".ciq-sb-categories"),i=>{const{target:a}=i,o=a.getAttribute("cq-filter");o&&(this.filterCategory(o),i.stopPropagation())});const r=this.querySelector("div[ciq-favorite-studies]");j.safeClickTouch(r,i=>{const{target:a}=i,o=a.classList.contains("fav-marker"),c=a.closest("cq-item");if(!c)return;const l=c.getAttribute("ciq-name");if(!o&&this.interactiveStudies[l]&&j.UI.getUIManager(this).closeTopMenu(),o)j.Studies.Favorites.remove(l),this.updateFavoriteList();else{const{type:u,inputs:h,outputs:d,parameters:f}=j.Studies.Favorites.getList().find(({name:A})=>A===l);j.Studies.addStudy(this.context.stx,u,h?{...h,display:void 0,id:void 0}:void 0,d,f)}},{absorbDownEvent:!1}),this.studyCountEl=this.querySelector(".ciq-active-study-count"),this.setupActiveStudyCountListener(),j.Studies.Favorites.retrieveList(t,i=>{})}setupActiveStudyCountListener(){if(this.layoutListener||(this.layoutListener=n=>{this.studyCountEl&&j.makeTranslatableElement(this.studyCountEl,n,Object.values(n.layout.studies||{}).filter(({signalData:r})=>!r).length)}),this.layoutListenerSetup){const{stx:n,listener:r}=this.layoutListenerSetup;n.removeEventListener(r)}const{stx:t}=this.context,s=t.addEventListener("layout",this.layoutListener);this.layoutListener(t),this.layoutListenerSetup={stx:t,listener:s}}filterCategory(t,s){if(!s&&(this.currentFilter===t||!this.init))return;this.hideStudyInfo(),this.currentFilter=t;const n=this.categories[t],r=t==="Study Library";if(this.querySelectorAll(".ciq-sb-categories cq-item").forEach(a=>{const o=a.getAttribute("cq-filter")===t?"setAttribute":"removeAttribute";a[o]("cq-active-category",""),a.setAttribute("aria-checked",o==="setAttribute")}),n||r){this.querySelectorAll("cq-studies cq-item span").forEach(o=>{const c=o.getAttribute("cq-translate-original")||o.textContent;o.parentElement.style.display=r||n.includes(c)?"":"none"});const a=this.querySelector("cq-heading input");r||(a.value="",a.dispatchEvent(new Event("input"))),this.querySelector("cq-heading[filter-for], cq-heading[cq-filter]").style.display=r?"":"none",this.selectType("all"),this.querySelector("cq-studies").updateOrder()}else t==="Active Studies"?this.selectType("active"):t==="ScriptIQ"?this.selectType("scriptiq"):(this.selectType("favorites"),this.updateFavoriteList());this.setAttribute("filter",t),this.emitCustomEvent({effect:"filter",detail:{category:t}})}selectType(t){t===void 0&&(t=this.getAttribute("ciq-study-type")||"all");const s=this.querySelector(".ciq-sb-studies").children;["all","active","favorites","scriptiq"].forEach((n,r)=>{const i=t===n;s[r].style.display=i?"":"none",i&&s[r].querySelector("cq-scroll").refresh&&s[r].querySelector("cq-scroll").refresh()}),this.setAttribute("ciq-study-type",t)}updateFavoriteList(){const{stx:t}=this.context,s=this.querySelector("div[ciq-favorite-studies]"),n=function({name:r},{name:i}){return r<i?-1:r>i?1:0};j.Studies.Favorites.retrieveList(this.context.stx,r=>{const i=[...r].sort(n).map(a=>{const{studyName:o,name:c}=a,l=o&&c.replace(/[^(]*/,t.translateIf(o)+" ")||t.translateIf(c);return`
					<cq-item class="ciq-favorite" ciq-name="${a.name}" role="menuitem" aria-label="${l}">
						<cq-label role="button" aria-label="Add study">${l}</cq-label>
						<div class="fav-marker" role="button" aria-label="Remove study from favorites"></div>
					</cq-item>`});s.innerHTML=i.join(`
`)})}setupInfoPanel(){const t=this.querySelector("cq-studies");t.showStudyInfo=this.showStudyInfo.bind(this),this.makeTap(this.querySelector(".ciq-info-panel"),s=>{s.target.matches(".ciq-btn")&&this.interactiveStudies[this.infoPanelStudy.name]||s.stopPropagation()}),this.makeTap(this.querySelector(".ciq-info-panel-back-btn"),s=>{this.hideStudyInfo()}),this.makeTap(this.querySelector(".ciq-info-panel .fav-marker"),s=>{const n=s.target;n.classList.toggle("ciq-favorite"),n.classList.contains("ciq-favorite")?j.Studies.Favorites.add(this.infoPanelStudy.name):j.Studies.Favorites.remove(this.infoPanelStudy.name),this.updateFavoriteList(),this.querySelector("cq-studies").updateOrder()}),this.makeTap(this.querySelector(".ciq-info-panel-controls .ciq-btn"),s=>{this.addStudy(this.infoPanelStudy.type),this.hideStudyInfo()})}showStudyInfo(t){const s=this.querySelector(".ciq-info-panel");if(s.classList[t?"add":"remove"]("ciq-info-panel-active"),s.setAttribute("aria-hidden",!t),this.querySelector("[ciq-sb-panel-all]").setAttribute("aria-hidden",!!t),!t)return;const[,{name:n}]=Object.entries(j.Studies.studyLibrary).find(([d,{name:f}])=>d===t)||[];this.infoPanelStudy={type:t,name:n};const r=j.Studies.Favorites.includes(n),{description:i,link:a}=(j.Studies.Info||{})[n]||{},o=this.querySelector(".ciq-info-panel-title"),c=this.querySelector(".ciq-info-panel .fav-marker"),l=this.querySelector(".ciq-info-panel-description"),u=this.querySelector(".ciq-info-panel a");o.textContent=n,c.classList.toggle("ciq-favorite",!!r),l.innerHTML="<p>"+(i||"").replace(/\n|\r/g,"</p><p>")+"</p>",u.style.display=a?"":"none",u.href=a;const h=this.qs(".ciq-info-panel-back-btn");h&&(h.tabIndex=-1,h.focus())}hideStudyInfo(){this.showStudyInfo(!1)}addStudy(t){const{stx:s}=this.context;j.Studies.addStudy(s,t)}deprecatedTemplate(){return`<template cq-study-legend="">
			<cq-item>
				<cq-label></cq-label>
				<div class="ciq-icon ciq-close"></div>
			</cq-item>
		</template>`}responsiveSetup(){this.context;const t=this.closest("cq-context"),s=t.querySelector("cq-menu[config='studybrowser'] cq-dropdown li, cq-menu.ciq-study-browser cq-menu-dropdown");if(s.tagName==="CQ-MENU-DROPDOWN"){const n=this.querySelector("template[cq-study-legend]");n.insertAdjacentHTML("afterEnd",this.deprecatedTemplate()),n.remove();const r=this.querySelector("cq-heading.dropdown");r.insertAdjacentHTML("afterEnd",'<cq-heading cq-search-icon cq-filter="Search Studies" cq-filter-min="15"></cq-heading>'),r.remove();const i=this.querySelector("cq-studies");i.hasAttribute("favorites")&&i.setAttribute("ciq-favorites","")}if(t.querySelector(".ciq-multi-chart-container-wrapper")){this.multiChartContainer=t,j.UI.addResizeListener(t,()=>{Object.assign(s.style,t.clientWidth<600?{right:"-88px",width:t.clientWidth+"px"}:{right:0,width:""})});return}t.querySelector(".ciq-multi-chart-container-wrapper, .ciq-chart-area")}}E.markup=`
		<div class="ciq-sb-container" role="dialog" aria-label="Study Browser">
			<div class="ciq-sb-categories" role="group" aria-label="Selectable study categories">
				<cq-scroll cq-max-height="500">
					<cq-heading role="heading">Studies</cq-heading>
					<cq-item cq-no-close cq-filter="Active Studies" role="menuitemcheckbox" aria-checked="false">
						<div class="ciq-active-studies"></div>Active Studies<div class="ciq-active-study-count">0</div></cq-item>
					<cq-item cq-no-close class="ciq-favorite" cq-filter="Favorites" role="menuitemcheckbox"  aria-checked="false">
						<div class="ciq-favorite-studies"></div>Favorites</cq-item>
					<cq-item cq-no-close cq-filter="Popular" role="menuitemcheckbox" aria-checked="false">
						<div class="ciq-popular-studies"></div>Most Popular</cq-item>
					<cq-item cq-no-close cq-filter="Study Library" role="menuitemcheckbox" aria-checked="false">
						<div class="ciq-study-library"></div>Study Library</cq-item>
				</cq-scroll>
			</div>
			<div class="ciq-sb-studies" role="group" aria-label="Selectable studies">
				<div ciq-sb-panel-all>
					<cq-heading class="dropdown" icon="ciq-lookup-icon" filter-label="Search Studies" filter-for="studylist" filter-min="15"></cq-heading>
					<cq-scroll cq-max-height="450">
						<cq-studies filter-name="studylist" ciq-favorites favorites>
						<template>
							<cq-item role="group" tabindex="0">
							<span role="button"></span>
							<div class="fav-marker" role="button" aria-label="Favorite"></div>
							<div class="ciq-info-btn" role="button" aria-label="Info"></div>
							</cq-item>
						</template>
						</cq-studies>
					</cq-scroll>
				</div>
				<div ciq-sb-panel-active>
					<cq-scroll cq-max-height="500">
						<cq-study-legend button-remove="true">
							<cq-section-dynamic>
								<cq-study-legend-content>
									<template cq-study-legend="">
										<cq-item>
											<span label></span>
											<div class="close ciq-icon ciq-close"></div>
											<span class="ciq-switch"></span>
										</cq-item>
									</template>
								</cq-study-legend-content>
							</cq-section-dynamic>
							<cq-placeholder>
								<div stxtap="Layout.clearStudies()" class="ciq-btn sm" keyboard-selectable="true" role="button">Clear All</div>
							</cq-placeholder>
						</cq-study-legend>
						</cq-scroll>
				</div>
				<div ciq-sb-panel-favorite>
					<cq-scroll cq-max-height="500">
						<div ciq-favorite-studies cq-no-close=""></div>
					</cq-scroll>
				</div>
				<div ciq-sb-panel-scriptiq>
					<cq-scroll cq-max-height="500">
						<cq-item><cq-clickable selector="cq-scriptiq-editor" method="open">New Script</cq-clickable></cq-item>
						<cq-scriptiq-menu></cq-scriptiq-menu>
					</cq-scroll>
				</div>
				<div class="ciq-info-panel" aria-hidden="true" role="dialog" aria-label="Study info panel">
					<cq-scroll cq-max-height="500">
						<div class="ciq-info-panel-back-btn" role="button" aria-label="Close"></div>
						<div class="ciq-info-panel-title" role="heading"></div>
						<div class="fav-marker" title="Click to add to favorites" role="button"></div>
						<div class="ciq-info-panel-description"></div>
						<div class="ciq-info-panel-controls">
							<div class="ciq-btn sm" role="button">ADD STUDY</div>
							<a href="" target="studyInfo" role="button"><div class="ciq-info-btn"></div> Learn more about this study</a>
						</div>
					</cq-scroll>
				</div>
			</div>
		</div>
	`,j.UI.addComponentDefinition("cq-study-browser",E)}j.Studies.Info||(j.Studies.Info={});j.Studies.Info={...j.Studies.Info,"Accumulation/Distribution":{description:`The Accumulation/Distribution (A/D) indicator calculates the strength of the market over time, based on the net change in price for each period compared to its prior period. When the net change is positive, the maximum difference between the close and the low or the close and the prior close is added to the A/D. Conversely, if the net change is negative the maximum difference between the close and the high or the prior close is subtracted from the A/D.You can use the A/D to analyze money flow. In this case, the positive or negative direction is multiplied by the volume for the current period.
Note: The A/D uses all the data loaded into the chart. Typically this is 200 bars prior to the first bar shown. As the chart is compressed or panned it will load more data forcing the A/D to recalculate and will produce different values. That said, the pattern of the A/D will remain the same.`},"Accumulative Swing Index":{description:`The Accumulative Swing Index indicator (ASI) aggregates all the prior Swing Index (SI) values providing a longer term tool to support a swing trading strategy. The ASI is designed to help simplify market interpretation and leverage the sensitivity of the SI which helps detect potential changes in trend.
Note: The ASI uses all the data loaded into the chart. Typically this is 200 bars prior to the first bar shown. As the chart is compressed or panned it loads more data forcing the ASI to recalculate and will produce different values. That said, the pattern of the ASI will remain the same.
The Accumulative Swing Index was developed by Welles Wilder.
Related Study: Swing Index`},"ADX/DMS":{description:"ADX (Average Directional Index) or DMS (Directional Movement System) uses Directional Movement (DM) calculations to identify trends and gauge the strength of those trends. Directional Movement (DM) is defined as the largest part of the current period`s price range that lies outside the previous period`s price range. Each period will either be positive (PDM = larger range above previous range), negative (NDM = larger range below previous range), or zero if moves above and below the previous period`s range are equal or price stays within the previous day`s range (an inside bar).\nA smoothed average of both positive and negative directional movement are calculated and then divided by the Average True Range (ATR) to derive the Plus Directional Indicator (+DI) and Minus Directional Indicator (-DI). Each period will have only one result, either plus, minus or zero. +DI increases and -DI decreases during rising trends and vice-versa in down trends. The DI Difference (DI) is the sum of +DI and -DI. Accordingly, the DI Histogram will oscillate around zero as the market trends.\nThe Average Directional Index (ADX) is a simple moving average of the absolute value of the DI. The ADX is a non-directional trend analysis tool. Low values indicate the market has consolidated and is ready to trend, whereas high values indicate a strong trend has been well established and may be nearing an end.\nThe ADX/DMS study displays the ADX line as well as the +DI and -DI. In addition, there is an option to display a histogram of the spread between +DI and -DI which serves as a momentum oscillator."},Alligator:{description:`The Alligator indicator uses three smoothed moving averages (SMMAs) named Jaw, Teeth, and Lips. Each one is offset forward (into the future) to indicate convergence/divergence relationships. The SMMAs are calculated on the Median Price. When the market is trending, the Alligator lines will diverge. When the three lines are close together, the Alligator indicates consolidation. The Gator oscillator is often used as a companion study to better understand the divergence/convergence between the three SMMAs.
The Alligator study can hide its Jaw, Teeth, and Lips lines, enabling users to show only the Fractal Arrows to emphasize trading signals.
The Alligator indicator was invented by Bill Williams.
Related Study: Gator Oscillator`},"Anchored VWAP":{description:`Anchored VWAP derives the volume-weighted average price (VWAP) starting from a specified date and time. Unlike VWAP, the Anchored VWAP can be applied to both intraday and historical price data. The mean of the high, low, and close price is the default price used to derive Anchored VWAP.
Related Study: VWAP`},Aroon:{description:`The Aroon indicator measures the strength of a trend based on the recency of new Highs/Lows. Aroon plots two lines: the Aroon Up is based on recent highs and Aroon Down is based on recent lows. The values shown are in percentage terms and fluctuate between 0 and 100.
Related Study: Aroon Oscillator`},"Aroon Oscillator":{description:`The Aroon Oscillator measures the difference between Aroon Up and Aroon Down. The Aroon Oscillator is bounded between 100 and -100.
Related Study: Aroon`},"ATR Bands":{description:`The ATR Bands indicator displays two lines forming an envelope around the Price series (X) based on recent volatility as measured by Average True Range (ATR). The Bands are calculated using a percentage multiple (±Shift) of the ATR which is added/subtracted from X (typically, last price). When the price breaks out of the channel, it can be interpreted as a signal.
NOTE: This study can be applied to other studies by using the Field parameter.
Related Study: Average True Range (ATR), ATR Trailing Stop, True Range (TR), STARC Bands`},"ATR Trailing Stops":{description:`ATR Trailing Stop highlights a reversal in trend by plotting a stop point based upon recent market volatility. Average True Range (ATR) is used to adjust the stop point based upon recent market volatility. The trailing stop will continue to increase in a rising market, and decrease in a down market. If the trend stalls or the market consolidates, the stop will stabilize at a level until the trend resumes or crosses through the stop level. ATR Trailing Stop flips to the invert when price corrects below/above the stop line.
Calculate the ATR and then apply the multiplier. For an up trend, subtract from previous close. For a down trend, add to the previous close.
Related Study: Average True Range (ATR), ATR Bands, True Range (TR)`},"Average True Range":{description:`The Average True Range (ATR) is a simple moving average of the volatility of the market as measured by the True Range (TR).
Related Study: ATR Bands, ATR Trailing Stop, True Range (TR)`},"Awesome Oscillator":{description:`The Awesome Oscillator measures the difference between a 5 period simple moving average (SMA) and a 34 period SMA based on the median price of each bar. The result is an unbounded oscillator. The Awesome is displayed as a histogram and each value is colored based on if the Awesome value is increasing or decreasing to provide visual clarity.
Related Study: Price Oscillator`},"Balance of Power":{description:"The Balance of Power is a moving average of the internal strength of each bar. The internal strength is measured by deriving a ratio of each bar's close-open relative to its high-low range. The highest/lowest value for any bar 1/-1, which occurs if the market opens on the low and closes on the high, and vice-versa in a down market. If the close equals the open the value for the bar is zero, indicating the power is balanced between the bulls and the bears."},Beta:{description:"Beta measures the volatility of returns for one security against those of a benchmark security, usually a market index. It is often used as a measure of risk of a security relative to the market. A Beta greater than 1.0 will tend to move up or down faster than the benchmark security."},"Bollinger %b":{description:`Bollinger %B is a percentage measure of a security\`s location between the Bollinger Bands. %B can be lower than 0 or higher than 100 if price moves outside the bands which would be considered a breakout signal. A value of 50 implies the price is equal to the middle moving average.
Bollinger Bands were created by John Bollinger.
NOTE: This study can be applied to other studies by using the Field parameter.
Related Study: Bollinger Bands, Bollinger Bandwidth`},"Bollinger Bands":{description:`The Bollinger Bands indicator displays two lines forming an envelope around a moving average of price. The upper and lower bands are determined by a number of standard deviations above and below the moving average. The expansion and compression of the bands highlight changes in volatility. Breakouts of the bands typically represent trading opportunities.
Bollinger Bands were created by John Bollinger.
NOTE: This study can be applied to other studies by using the Field parameter.
Related Study: Bollinger Bandwidth, Bollinger %B`},"Bollinger Bandwidth":{description:`The Bollinger Bandwidth measures the difference (spread) between the upper and lower Bollinger Bands. As the market trends and price dispersion increases the bands will widen, thereby providing a measure of volatility. When the Bollinger Bandwidth is low, due to a market consolidation, it is often considered a setup for a trend.
Bollinger Bands were created by John Bollinger.
NOTE: This study can be applied to other studies by using the Field parameter.
Related Study: Bollinger Bands, Bollinger %b`},"Center Of Gravity":{description:`The Center of Gravity (COG) is a leading oscillator created by John Ehlers in 2002. It is used to identify support and resistance. It is constructed using a weighted moving average, which according to its creator, was analogous to the weighted coordinates of an object&#8217;s mass distribution. It is accompanied by a Signal line, a simple moving average.
Claiming to have zero lag, COG allows for clear indication of reversals due to the smoothing effect of the indicator. When the COG line crosses above the signal line, it is an indication of an upturn. When the COG line crosses below the signal line, it is an indication of a market downturn.`},"Chaikin Money Flow":{description:`The Chaikin Money Flow (CMF) indicator is a moving sum of volume which is weighted by where price closes within its range. The indicator oscillates around 0, with positive amounts indicating a bullish trend, and negative amounts indicating a bearish trend.
The weight is called a “multiplier”, which ranges from -1 for a close at the low to +1 for a close at the high. A multiplier of -1 implies all the volume is negative, and is subtracted from the moving sum. In contrast, if the multiplier equals +1, all the volume for the period is added to the moving sum.
The Chaikin Money Flow was developed by Marc Chaikin.
Related Study: On Balance Volume, Twiggs Money Flow`},"Chaikin Volatility":{description:`Chaikin Volatility measures the rate of change, in percentage terms, of a moving average of the high-low range. Higher values indicate the volatility (as measured by range) has been increasing relative to itself. The values are unbounded.
The Chaikin Volatility was developed by Marc Chaikin.`},"Chande Forecast Oscillator":{description:`The Chande Forecast Oscillator (CFO) measures the spread, in percentage terms, between the market price and a Time Series Moving Average (TSMA) which is a n-period moving linear regression using the “least squares fit” method. The oscillator is above zero when the price is above the CFO and less than zero if it is below. The oscillator is quite responsive to changes in trend as the TSMA follows price quite closely.
The Chande Forecast Oscillator was introduced by Tushar Chande.
NOTE: This study can be applied to other studies by using the Field parameter.
Related Study: Moving Average Deviation`},"Chande Momentum Oscillator":{description:`The Chande Momentum Oscillator (CMO) compares, in percentage terms, the sum of all recent one-period price changes divided by the sum of the absolute values of the one-period price changes over the same time period. The range of the CMO is bounded between -100 and +100.
The Chande Momentum Oscillator was introduced by Tushar Chande and Stanley Kroll.`},"Choppiness Index":{description:`The Choppiness Index (CI) is a non-directional trend analysis indicator which rises during a consolidation and falls as the market trends. The CI is a bounded range between 0 - 100. The higher the value, the less the market is trending.
The Choppiness Index was created by Australian commodities trader E.W. Driess.`},"Commodity Channel Index":{description:`The Commodity Channel Index (CCI) study measures market momentum by deriving a price oscillator and normalizing it by the deviation of price from its average. Specifically, it uses the average of the high, low and close for the period (HLC3, also referred to as “typical price”) and subtracts the “n” period moving average of HLC3, this quantity is then divided by the mean deviation of price from the simple moving average (SMA). By measuring price relative to its SMA, the CCI effectively captures the acceleration and deceleration of a market trend.
CCI is an unbounded oscillator. A factor of 0.015 is used to center the series so that +100 and -100 (default threshold values) may be used to identify Overbought and Oversold conditions. When CCI equals 0 it indicates that price is equal to the SMA. The Commodity Channel Index was developed by Donald Lambert.`},"Coppock Curve":{description:`The Coppock Curve is calculated by first summing two rate of change measures, one with a long period and second with a short period. The Coppock Curve is a weighted moving average of this sum.
The Coppock Curve was created by Edwin Coppock.
NOTE: This study can be applied to other studies by using the Field parameter.`},"Correlation Coefficient":{description:`The Correlation Coefficient is a statistical measure used to calculate the strength and direction of the linear relationship (or the statistical relationship) between two data sets. For charting, it is between two traded instruments and the result is recalculated for each period in the same way a moving average “moves” through time using fresh data.
The value ranges between -1 to +1. The positive and negative correlation coefficient represents the direct (positive) and inverse (negative) linear correlation or statistical relationship between the data sets. That is, a positive correlation indicates two instruments have traded in the same direction, whereas a negative correlation implies they have traded in opposite directions. If the correlation is close to zero or equal to zero then the data sets are considered uncorrelated.`},"Darvas Box":{description:`The Darvas Box is a support/resistance indicator and a trading methodology rolled into one. It is an overlay study meant to indicate stocks that are trading at new highs by highlighting recent highs and lows to indicate entry points and placement of stop-losses.
The rules of drawing the Darvas Box are:
<div class=ciq-info-panel-indent>&#8226; Boxes are drawn around bars where an “all time high” was reached followed by 3 successive higher lows, and the high of the first bar was not broken by a higher high.
&#8226; The box continues until either the original high is broken out, or the lowest of the 2 successive lows is broken below.
&#8226; User can configure if high/low or close breaks the box.
&#8226; User can configure if “Ghost boxes” are shown.
<div class=ciq-info-panel-indent>&#8227; These will form on an upwards breakout of a Darvas.
&#8227; The low of the Ghost box will be the same value as the high of the Darvas which was broken.
&#8227; The height of the Ghost box will be the same as the Darvas box.
&#8227; The width of the Ghost box will be either:
<div class=ciq-info-panel-indent>&#8259; The width of the Darvas box
&#8259; Until the Ghost box is broken below
&#8259; Until the Ghost box is broken above, in which case another Ghost box forms with the lower left corner at the upper right corner of the preceding Ghost box.</div></div>
&#8226; User can define if arrow is drawn pointing to a volume spike and at what percentage that will be.
&#8226; User can configure period defining all time high.
&#8226; User can define a price minimum below which boxes will not form.
&#8226; User can define whether “Stop Levels” are drawn and how far below the box low. Stop levels cannot be lowered, only raised (or broken).</div>
While the indicator will run on any bar interval it is best used on higher intervals (i.e., weekly/monthly) with securities in a strong trend.
The logic behind the construction of the Darvas Box is somewhat complex but the usage is fairly straightforward. Once you have a closed box (a blue box assuming the default settings) you wait for a close (or a high) above the box on higher volume for a bullish signal or a close (or a low) below the box on higher volume for a bearish signal. The stop would generally be set just past the other side of the box. New boxes which form while you are in a trade provide an opportunity to build on a position upon a new breakout as well as updating a trailing stop level based on the most recent box. When used strictly as an indicator, the Darvas Box is an excellent mechanism to identify trading ranges on all bar intervals.`},"Depth of Market":{description:`The Depth of Market (DOM) study overlays a vertical market depth chart over the price chart. This DOM shows the supply and demand by indicating the number of bids (buy orders) and asks (sell orders) for each price level surrounding the current market price. The overlay of DOM on the price chart supports blending of technical analysis with the current supply and demand data.
The DOM study requires Level 2 market data.`},"Detrended Price Oscillator":{description:`The Detrended Price Oscillator (DPO) seeks to remove trend information from the data. It does this by taking a moving average and shifting it to the left. It then subtracts the average from the time period from the close of that time period to arrive at the result.
The DPO will not be displayed on the most recent period as the moving average is shifted to the left. The resulting DPO plot will emphasize the movement of the security above and below the moving average while filtering out the general trends. The DPO is often used to help find cycles in the market by identifying peaks and troughs.
NOTE: This study can be applied to other studies by using the Field parameter.`},"Disparity Index":{description:`The Disparity Index (DI) measures the distance of price from a moving average in percentage terms. The DI is an unbounded oscillator that uses percentage based calculation to normalize the spread across time and price.
NOTE: This study can be applied to other studies by using the Field parameter.
Related Study: Moving Average Deviation`},"Donchian Channel":{description:`The Donchian Channel displays a median line and bands that form an envelope around price. The Donchian High is the Highest High and the Donchian Low is the Lowest Low of the prior n periods starting with the previous bar. The median line is the average of the Donchian High and Donchian Low bands for each period.
The Donchian Channel was developed by Richard Donchian.
Related Study: Donchian Width, Highest High Value, Lowest Low Value`},"Donchian Width":{description:`The Donchian Width indicator measures the spread between the Donchian High and Donchian Low bands. This serves as a simple measure of volatility as it captures the range expansion/compression of the market.
The Donchian Channel was developed by Richard Donchian.
Related Study: Donchian Bands, Highest High Value, Lowest Low Value`},"Ease of Movement":{description:"The Ease of Movement (EOM) indicator is designed to measure volume`s impact on price. EOM first divides the volume by the period`s high-low Range, essentially distributing the volume equally across the high-low range. This value is then used as the denominator to measure the impact on the price change. A large change in price implies the volume was able to move the market.\nEOM is an unbounded oscillator. A rising EOM indicates the market is easily moving upward, and the converse is true on the downside.\nThe Ease of Movement indicator was developed by Richard W. Arms, Jr."},"Ehler Fisher Transform":{description:`The Ehler Fisher Transform (EFT) is designed to convert prices into a Gaussian normal distribution based on the recent n-period trading range. The EFT is an unbounded oscillator with a trailing Trigger line that is the EFT with a lag of 1 period. The EFT is designed to reduce volatility of the indicator, but still provide timely signals of change in trend.
The Fisher Transform is a technical indicator created by John F. Ehlers.`},"Elder Force Index":{description:"The Elder Force Index (EFI) is a money flow based oscillator that multiplies the period`s volume times the price change thereby showing the strength of the price movement. EFI is an unbounded oscillator. A rising EFI indicates volume is driving prices higher, and a declining EFI indicates volume is pushing the market lower.\nThe Elder Force Index was developed by Alexander Elder."},"Elder Impulse System":{description:`The Elder Impulse System (EIS) combines net changes in an exponential moving average (EMA) of price with net changes in the MACD histogram to produce bullish and bearish signals applied to the chart using paintbars. The result is a colored bar chart where the colors represent bullish, bearish or neutral signals. Bullish (green) signals appear when the values of both the EMA and the MACD Histogram increase from the prior period. Conversely, if both decrease then it is a bearish (red) signal. If they move in opposite directions then it is a neutral signal (blue).
The Elder Impulse System was developed by Alexander Elder.`},"Elder Ray Index":{description:`The Elder Ray Index is an unbounded oscillator that displays two superimposed histograms measuring the distance of the high/low from the exponential moving average.
The Elder Ray Index was developed by Alexander Elder.`},"Fractal Chaos Bands":{description:`The Fractal Chaos Bands are designed to identify breakouts and trend persistence based on the market making new Highs/Lows. An upside breakout is identified when the current high is the Highest High when compared to the prior two highs, in which case the Upper Band holds its last value and moves sideways. If the market is not trending, either up or down, then the Upper Band will display the high from two bars ago. The reverse is done for the Lower Band.
Related Study: Fractal Chaos Oscillator`},"Fractal Chaos Oscillator":{description:`The Fractal Chaos Oscillator has three states -1, 0, +1. A value of 0 indicates the market is consolidating. A value of +1 indicates a change in the upper range of the market, as best seen using the Upper Fractal Chaos Band. A value of -1 indicates a change in the lower range of the market, as best seen using the Lower Fractal Chaos Band.
The Fractal Chaos Oscillator was developed by E. W. Dreiss.
Related Study: Fractal Chaos Bands`},"Gator Oscillator":{description:`The Gator Oscillator (GO) is derived from the Alligator indicator. It plots two histograms in opposite directions that highlight the divergence/convergence between the three SMMAs used in the Alligator: Jaws, Teeth, and Lips. The positive histogram is the absolute value of the (Jaw - Teeth). The negative histogram is the absolute value of the (Teeth - Lips) multiplied by -1.
Green histogram bars indicate the averages are diverging, highlighting acceleration of the trend. Red bars indicate convergence of the averages showing the trend is losing strength. Compression of the histograms helps determine when a market is consolidating.
Although the GO can be used separately, it is most often combined with the Alligator as they complement each other in giving a more complete overview of current market conditions. The GO shows the absolute degree of convergence/divergence of the three moving averages plotted by Alligator study.`},"GoNoGo - Icons + Trend":{description:`Trend identification is arguably the most important concept in technical analysis. By blending objective, widely proven statistical indicators together with the foundational principles of technical analysis, GoNoGo Trend® colors the price action of any security according to the strength of its trend.
Disciplined investing is simple, but not easy. Many traders and investors are overwhelmed by the often redundant, occasionally contradictory, and ever-complicated battery of indicators. GoNoGo Charts help investors understand the direction and continuity of price trends for any security, any asset class, across any time frame. By blending objective principles of technical analysis and the most widely used statistical measures, GoNoGo Charts remove “indicator overload.” Investors remain focused on what matters most – price – while colors of each bar or candle reflect the strength of the trend.
Financial markets can be complicated, your charts don’t have to be.
Free from the clutter of many technical charts, GoNoGo Trend is easy to interpret. It paints the price bars bright blue when its unique mix of inputs signal the strongest bullish environment. When slightly less bullish, the color turns to aqua. This can happen at the start of a new trend, or after bright blue bars, indicating that the trend may be weakening. The amber bars represent uncertainty, often appearing in the transition from bull trend to bear trend and vice versa. The lower intensity bearish color is pink, and the darker purple appears when the bearish trend intensifies.
GoNoGo Charts highlight low-risk opportunities for trend participation and alert investors to short-term countertrend corrections with intuitive icons directly in the price action.
The resurgence of momentum in the direction of the trend is an excellent entry opportunity, or the chance to scale up positions. GoNoGo Icons illuminate these events on the chart with green or red solid circles. When GoNoGo Trend is painting blue bars, a green solid circle will appear above price each time GoNoGo Oscillator finds support at zero. When GoNoGo Trend is painting purple bars, a red solid circle will appear each time GoNoGo Oscillator hits resistance at the zero-line from below.
Contrarily, within a “Go” trend, a security’s momentum may reach overbought levels, then fall back toward the zero-line. While in a “NoGo” trend, a security’s momentum may fall to extreme oversold levels, and then cool. As the momentum calculations retreat from extreme overbought or oversold levels, GoNoGo Icons highlight the possible countertrend correction in price.`},"GoNoGo - Oscillator":{description:`Momentum goes hand in hand with trend identification. GoNoGo Oscillator® helps investors understand the velocity of price change, giving valuable information about the strength of a trend and the market’s conviction in it. Strong or increasing momentum provides confirmation of a trend while decelerating momentum gives the investor a leading indication of weakness and the potential for reversal.
GoNoGo Oscillator® blends several popular momentum ideas together to provide the user with meaningful momentum analysis. As an oscillator, the indicator’s values range above and below zero, from -6 to +6, with extreme positive values being considered overbought and extreme negative values, oversold. Within trend, a security’s momentum may reach overbought/oversold levels, then fall back toward the zero-line, and then rally again. A break above/below zero would indicate divergent momentum – unsustainable for a healthy trend.
In addition, GoNoGo Oscillator’s color features a change from light blue to dark blue when volume is heavier than normal. Confirming or diverging volume readings give investors additional insight at pivotal decision points.`},"GoNoGo - Squeeze":{description:`Studies have shown that momentum readings are not only useful for mean-reversion strategies but can also add insight within trend. GoNoGo Oscillator is calculated so that when inputs are in neutral territory, it rests at zero. Meaning, when enthusiasm wanes within a trending market, GoNoGo Oscillator® provides an objective point of support/resistance for momentum at the zero line.
Where there is no excessive buying or selling, price action stagnates, volatility declines, markets move sideways, and GoNoGo Oscillator® rests at the zero line. This volatility compression is highlighted by GoNoGo Squeeze®. A visual grid in the oscillator panel climbs as momentum remains neutral reaching extremes with prolonged reduction in volatility. Like a coiled spring, researchers have shown that following these stalemates between buyers and sellers, a breakout can be expected.`},"GoNoGo - Trend":{description:`The GoNoGo Trend study colors the price action of any security according to the strength of its trend, making it simple to identify and interpret the current trend:
<div class=ciq-info-panel-indent>&#8226; Bright Blue price bars indicate the strongest bullish environment.
&#8226; Aqua bars are slightly less bullish; they often occur at the start of a new trend, or as a strong bullish trend begins to weaken.
&#8226; Amber bars represent uncertainty, often appearing in the transition from bull trend to bear trend and vice versa.
&#8226; Pink bars indicate a lower intensity bearish environment
&#8226; Dark Purple bars are shown when the bearish trend intensifies.</div>
The “Go” and “NoGo” labels on the chart mark transitions to bull or bear trends, respectively.
For more information:
<a href='https://www.gonogocharts.com/indicators/' target='_blank' style='margin-top:0px;padding-left:0px'>www.gonogocharts.com/indicators</a>`},"Gopalakrishnan Range Index":{description:"The Gopalakrishnan Range Index (GAPO) measures the volatility of the market by measuring the natural log of the spread between the Highest High and Lowest Low over a given period which is then normalized by the natural log. When the GAPO is increasing the market is making new highs or lows relative to the lookback period."},"Guppy Multiple Moving Average":{description:`The Guppy Multiple Moving Average (GMMA) combines a group of six short-term exponential moving averages (EMA) and a group of six long-term EMAs. The multiple moving averages provide a “weight of the evidence” approach to identify changing trends, breakouts, and trading opportunities in the price of an asset.
The Guppy Multiple Moving Average was introduced by Daryl Guppy.`},"High Low Bands":{description:`The High Low Bands are drawn a percentage or number of points above and below a triangular moving average of the selected field.
Related Study: Triangular Moving Average, Moving Average Envelope`},"High Minus Low":{description:`High Minus Low measures the trading range of the bar.
Related Study: True Range`},"Highest High Value":{description:`Identifies the highest price over a defined range, excluding the current bar in order to highlight if the current price is exceeding the recent Highest High.
Related Study: Lowest Low Value`},"Historical Volatility":{description:"Historical Volatility measures the standard deviation of the underlying percent returns over n-periods. The result is annualized."},"Ichimoku Clouds":{description:`The Ichimoku Cloud study is designed to indicate support/resistance, momentum, and trend direction. It plots five lines and computes various “clouds” based on the interactions between these lines. Ichimoku translates to “one look,” implying that the indicator can signal support and resistance at a glance.
There are five components:
<div class=ciq-info-panel-indent>&#8226; Tenkan Sen (Conversion Line) &#0150; Calculated as the sum of the Highest High over the past nine periods and the Lowest Low divided by two.
&#8226; The Kijun Sen (Base Line) &#0150; Calculated as the sum of the Highest High over the past 22 periods and the Lowest Low divided by two.
&#8226; Senkou Span A (leading) &#0150; The sum of the Tenkan Sen and the Kijun Sen divided by two. The calculation is then plotted 26 time periods ahead of the current price action.
&#8226; Senkou Span B (leading) &#0150; The sum of the Highest High and the Lowest Low over the past 52 periods divided by two. It is also plotted 26 periods ahead.
&#8226; Chikou (lagging) &#0150; The same and Senkou Span B leading but plotted 26 periods in the past.</div>`},"Intraday Momentum Index":{description:`The Intraday Momentum Index (IMI) measures trend strength by using a ratio of the moving sum of the close-open (candle body) over the past “n” periods and relative to the moving sum of the net decreases. The result is a bounded oscillator that is indexed between 0 and 100 and is displayed with Overbought (OB) and Oversold (OS) levels.
The methodology to calculate IMI is quite similar to the Relative Strength Indicator (RSI) and can be interpreted in a similar manner. The central difference between the two is IMI measures market strength/weakness using the range of close-open (hence, the use of ‘Intraday\` in the name) whereas RSI measures the one-period net change. An advantage of IMI is it tends to trend more smoothly and produces OB/OB levels more frequently.
Related Study: RSI`},"Keltner Channel":{description:"The Keltner Channel indicator displays two lines forming an envelope around a moving average of price. The upper and lower channel lines are determined by adding/subtracting a multiple of the Average True Range above and below the moving average of price. The Keltner Channel highlights the expansion and compression of volatility."},"Klinger Volume Oscillator":{description:`The Klinger Volume Oscillator (KVO) is designed to identify short term fluctuations in money flowing in or out of a security. Each period\`s volume is assigned a positive or negative value based on the one period change in Typical Price (the mean of the high, low, and close). The KVO is the spread between a long and a short exponential moving average (EMA) of the directional volume series.
The Signal Line is simply an EMA of the KVO line. The KVO Histogram measures the spread between the KVO and the Signal line. The KVO Histogram is colored green when the values are increasing and red when they are decreasing (green and red are default colors).
KVO is useful in helping evaluate if volume is supporting the trend.
The KVO was developed by Stephen Klinger.`},"Linear Reg Forecast":{description:`The Linear Regression Forecast (LRF) uses the ordinary least squares method to derive a linear function which plots a straight line through prices so as to minimize the distances between the prices and the resulting trendline. The last point of the trendline is the forecasted value. The LRF is a moving series which plots the forecasted value of the derived trend line each period, thereby following the market like a moving average.
NOTE: This study can be applied to other studies by using the Field parameter.
Related Study: Time Series Forecast, Linear Regression R2, Lin Regression Slope, Linear Regression Intercept`},"Linear Reg Intercept":{description:`The Linear Regression Intercept (LR-I) uses the ordinary least squares method to derive a linear function which plots a straight line through prices so as to minimize the distances between the prices and the resulting trendline. The LR-I is a moving linear regression which plots the y-axis intercept for the derived trend line at each period. The intercept is the origination point of the regression and thereby appears to be an offset moving average.
NOTE: This study can be applied to other studies by using the Field parameter.
Related Study: Linear Regression Forecast, Linear Regression Slope, Linear Regression Intercept`},"Linear Reg R2":{description:`The Linear Regression R2 (LR-R2) uses the ordinary least squares method to derive a linear function which plots a straight line through prices so as to minimize the distances between the prices and the resulting trendline. The LR-R2 is a moving linear regression which plots the R-Squared for the derived trend line at each period. The LR-R2 is an oscillator that effectively measures the quality of fit of the derived trend line. Higher R2 values indicate better quality of fit of the trend line and the LR-Forecast thereby making it an ideal companion study to LR-Forecast.
NOTE: This study can be applied to other studies by using the Field parameter.
Related Study: Linear Regression Forecast, Linear Regression Slope, Linear Regression Intercept`},"Linear Reg Slope":{description:`The Linear Regression Slope (LR-Slope) uses the ordinary least squares method to derive a linear function which plots a straight line through prices so as to minimize the distances between the prices and the resulting trendline. The LR-Slope is a moving linear regression which plots the slope for the derived trend line at each period. The LR-Slope is an oscillator that effectively measures the direction of the market over the defined period.
NOTE: This study can be applied to other studies by using the Field parameter.
Related Study: Linear Regression Forecast, Linear Regression R2, Linear Regression Intercept`},"Lowest Low Value":{description:"Identifies the lowest price over a defined range, excluding the current bar to highlight if the current price is below the recent Lowest Low."},MACD:{description:`The Moving Average Convergence/Divergence (MACD) indicator makes use of three exponential moving averages (EMA). Two are averages of price and the third is a signal line that is an average of the difference of the other two.
The MACD line is generated from the first two averages, subtracting the longer from the shorter. The Signal Line is simply an EMA of the MACD line. The MACD Histogram measures the spread between the MACD and the Signal line. Changes in direction of the MACD Histogram are often used as early signals of change in trend.`},"Market Facilitation Index":{description:`The Market Facilitation Index (MFI) is a histogram that analyzes the effect of volume on price. The MFI does not provide directional information, but rather divides the bars range by volume thereby measuring if price responded to the volume executed. A high MFI indicates the volume was able to drive price movement, whereas a low MFI indicates significant balance between buyers and sellers.
The MFI histogram is colored to identify four states that indicate the quality of the price action in relation to increasing or decreasing volume:
<div class=ciq-info-panel-indent><b>Green:</b> MFI and volume both increased, signifying the directional momentum is increasing and the volume was able to move price.</div>
<div class=ciq-info-panel-indent><b>Fade (Brown):</b> MFI and volume both decreased, signifying momentum is decreasing.</div>
<div class=ciq-info-panel-indent><b>Fake (Blue):</b> MFI is increasing while volume is decreasing, signifying uncertainty about whether one-off speculators are driving the market or not</div>
<div class=ciq-info-panel-indent><b>Squat (Pink):</b>MFI is decreasing while volume is increasing, signifying active competition between the bears and bulls in the market, and unclear price direction.</div>
The MFI was developed by Bill Williams.`},"Mass Index":{description:`The Mass Index (MI) is a measure of volatility which has been stabilized to provide comparable values over time. High volatility is often associated with turning points in a market. When the MI crosses above the Bulge Threshold it is an indication that volatility has hit an extreme level.
The MI is derived by comparing an exponential moving average (EMA) of the high-low range to a smoothed EMA of the range. These ratios are then summed over time which serves to normalize the MI.
The Mass Index indicator was developed by Donald Dorsey.`},"Median Price":{description:`A simple moving average of the mid-point between the High and Low of each bar.
Related Study: Moving Average`},"Momentum Indicator":{description:"Momentum measures the change in price over a set range, it is simply: Current Price - Price n-periods ago. Momentum is similar to Price Rate of Change except it shows actual change rather than percent change."},"Money Flow Index":{description:`Money Flow Index (MFI) is essentially a volume-weighted Relative Strength Index (RSI). However, instead of using simple close prices, MFI uses the Typical Price (TP or HLC3, the mean of the high, low and close) multiplied by volume. The result is then used in the RSI calculation as a ratio of average volume weighted size of the up-closes over the past “n” periods and compared to the average volume weighted size of the down-closes. The result is a bounded oscillator that ranges from 0 and 100.
The Money Flow Index (MFI) was developed by Gene Quong and Avrum Soudack.`},"Moving Average":{description:`Moving Averages (MAs) are average price lines that use a fixed lookback and update with each new period. They are the most common tool to remove noise and volatility from a data series allowing the underlying trend to be seen. MAs are a core building block of many other studies. There are many types of moving averages, the most important of which being the Simple Moving Average (SMA), the Exponential Moving Average (EMA).
Moving Averages may be applied to any data series or study shown on the chart using the Field parameter.`},"Moving Average Cross":{description:"Applies three moving averages of the same type to signal changes in trend as the shorter moving averages cross the longer ones."},"Moving Average Deviation":{description:`The Moving Average Deviation measures the spread, in points, between the market price and a moving average. The calculation may be shown in either points or percentages.
NOTE: This study can be applied to other studies by using the Field parameter.
Related Study: Disparity Index`},"Moving Average Envelope":{description:`The Moving Average Envelope (MAE) plots two lines that form an envelope around a Moving Average of price. The upper and lower bands are a percentage or number of points above and below the moving average.
The MAE can be derived using any of the eleven averaging methodologies supported and may be applied to any data field or study displayed on the chart.`},"Negative Volume Index":{description:`The Negative Volume Index (NVI) and its sister study, the Positive Volume Index (PVI), are designed to measure the quality of the trend by using volume as a barometer to evaluate the strength of the price action. Price changes on decreasing volume are considered a positive indicator. Whereas, price changes with increasing volume are considered a negative indicator, as increasing trading volumes are more common with retail traders following-the-crowd.
NVI is a moving average of cumulative percentage price changes on periods when volume decreases from bar to bar. For clarity, volume is only used to determine which data points to average, it is not part of the calculation. A trailing moving average of the NVI is used to signal significant changes in trend.
The Negative Volume Index (NVI) was developed by Paul Dysart.
NOTE: This study can have other studies applied to it using the Field parameter.
Related Study: Negative Volume Index`},"On Balance Volume":{description:`On Balance Volume (OBV) is a cumulative total of the daily volume which sums the volume on days when price rises and subtracts the volume on down days. OBV is often used as a confirmation indicator that shows if the volume activity is supporting the trend.
Related Study: Trade Volume Index`},"Option Sentiment By Strike":{description:"The Option Sentiment by Strike study overlays a profile of the volume or open interest of option contracts at each strike price for a security`s most current data point. Calls and puts are graphed as separate, adjacent horizontal bars, allowing the user to understand any bias within the two option types.\nDisplaying the actual market activity within a security`s corresponding derivative market allows the user to understand positioning and bias within that market. The study may be combined with any other price-based analytics to understand market support and resistance points."},"Parabolic SAR":{description:"The Parabolic SAR indicator is a stop and reverse (SAR) strategy that is designed to highlight when a trend has stalled indefinitely or reversed direction.\nThe initial SAR is set at the extreme price of the previous trend. After the initial SAR is set, the next interval`s SAR is adjusted in the direction of the trend by the distance between the high for the new trend and the previous SAR then multiplied by an acceleration factor (AF). This is then added to the prior period`s SAR. The acceleration factor typically starts at .02 and increases by .02 to a typical maximum of .20 each period the market makes a new high/low for the move.\nWhen price crosses above the SAR point, the entire calculation starts over but the extreme point becomes the Lowest Low of the new trend and the AF becomes a negative number. The reverse is true when price crosses below."},"Performance Index":{description:`The Performance Index (PI) study measures the relative strength of a security to the relative strength of a selected comparison security. Specifically, the PI derives the relative strength, price divided by a moving average, for both the primary series and the comparison series. The PI is the comparison of these two internal relative strength measures. As a ratio, the PI oscillates around 1.00, with positive values indicating strength of the primary security as compared to the benchmark comparison.
Related Study: Price Relative`},"Pivot Points":{description:"Pivots points are used to identify support, resistance and targets, most frequently on intraday charts. The Pivot Points study plots 7 horizontal lines for each period, one for the Pivot line, 3 support levels, and 3 resistance levels. The pivot point itself is simply the average of the high, low and closing prices from the previous trading period. In the subsequent period, trading above the pivot point is thought to indicate ongoing bullish sentiment, while trading below the pivot point indicates bearish sentiment. Pivot points are determined using a longer periodicity than the data displayed on the chart."},"Positive Volume Index":{description:`The Positive Volume Index (PVI) and its sister study, the Negative Volume Index (NVI), are designed to measure the quality of the trend by using volume as a barometer to evaluate the strength of the price action. Price changes on decreasing volume are considered a positive indicator. Whereas, price changes with increasing volume are considered a negative indicator, as increasing trading volumes are more common with retail traders following-the-crowd.
PVI is a moving average of cumulative percentage price changes on periods when volume increases from bar to bar. For clarity, volume is only used to determine which data points to average, it is not part of the calculation. A trailing moving average of the PVI is used to signal significant changes in trend.
The Positive Volume Index (PVI) was developed by Paul Dysart.
NOTE: This study can have other studies applied to it using the Field parameter.
Related Study: Negative Volume Index`},"Pretty Good Oscillator":{description:"The Pretty Good Oscillator (PGO) evaluates the strength of the trend in terms of the security`s volatility as measured by an average of the True Range (TR). The PGO calculates the spread of the current close from a simple moving average of the close. This value is normalized by dividing by an exponential moving average of the TR.\nThe Pretty Good Oscillator was created by Mark Johnson."},"Price Momentum Oscillator":{description:`The Price Momentum Oscillator (PMO) is a twice smoothed exponential moving average (EMA) of the percent change of price over one period. The PMO is an unbounded oscillator as it is based on the trend in one period percent changes. An EMA of the PMO is overlaid to provide a signal line to detect significant changes in the PMO oscillator.
NOTE: This study can be applied to other studies by using the Field parameter.`},"Price Oscillator":{description:`The Price Oscillator measures the spread between two moving averages, similar to a MACD. Accordingly, it is an unbounded oscillator which measures trend strength. An advantage of the Price Oscillator is it allows the selection of Field, Moving Average Type, and derivation in Points or Percent.
Unlike the MACD, the Price Oscillator does not display a Signal Line or a Histogram.
NOTE: This study can be applied to other studies by using the Field parameter.
Related Study: MACD, RAVI`},"Price Rate of Change":{description:`Price Rate of Change measures the percent change in price over a set range. It is an unbounded oscillator similar to Momentum.
NOTE: This study can be applied to other studies by using the Field parameter.
Related Study: Momentum`},"Price Relative":{description:"Price Relative is a simple ratio of security A (the loaded security) divided by security B. A rising line indicates security A is out-performing security B and vice-versa."},"Price Volume Trend":{description:"The Price Volume Trend (PVT) is an aggregation of volume multiplied by price percent change over one period. Significant price moves result in large moves in PVT. The intent of the PVT is to assess the supply/demand balance and volume executed in rising markets versus falling markets."},"Prime Number Bands":{description:"Prime numbers are often considered magnetic points for price. Accordingly, the Prime Number Bands (PNB) indicator plots the nearest prime number above and below the market price. Spikes in the upper or lower PNB are often considered swing points in the market as it implies the market has failed to break through a prime number."},"Prime Number Oscillator":{description:"Prime numbers are often considered magnetic points for price. Accordingly, the Prime Number Oscillator (PNO) simply identifies if the closest prime number is above (+1) or below (-1) the market on the assumption that the market will gravitate toward that value."},"Pring's Know Sure Thing":{description:`Created by Martin Pring, The Know Sure Thing (KST) is an unbounded oscillator which sums together four smoothed Rate of Change oscillators with different periodicities into a single measure, the KST line. The use of multiple periodicities results in a very stable oscillator reducing the potential for false signals. The trading signals are generated when the KST line crosses above/below its signal line, a simple moving average of the KST. The KST can also be used to determine overbought and oversold conditions.
KST operates on the principle that price trends are determined by confluence or divergence of many different time cycles and price trend reversals. As a result, the KST formula is weighted in favor of longer time spans.
NOTE: This study can be applied to other studies by using the Field parameter.`},"Pring's Special K":{description:`Created by Martin Pring, the Special K is an unbounded momentum indicator that sums several different weighted averages of twelve rate-of-change calculations. The intent of combining the short-, intermediate- and long-term velocity into one series is to give a view of the true strength of the trend.
Special K serves two functions. First, it identifies reversals in the primary trend relatively early. Second, it uses that information to time short-term pro-trend price moves.
Special K operates on the principle that price trends are determined by confluence or divergence of many different time cycles and price trend reversals. As a result, the formula incorporates rate-of-change calculations using data from years in the past.
NOTE: This study can be applied to other studies by using the Field parameter.`},"Projected Aggregate Volume":{description:`Projected Aggregate Volume (PAV) study is an aggregation of the day\`s trading volume up to the current time along with a projection of the aggregate volume for the remainder of the trading day. The PAV study reveals whether the trend in trading volume is above or below average and provides a forecast of volume for the rest of the day.
The anchor time control allows the user to set the starting time of the study to understand how the volume is aggregated from that time forward.
Note: This study is displayed ONLY for intraday periodicities.
Related Study: Projected Volume at Time`},"Projected Volume at Time":{description:`Projected Volume at Time (PVAT) is an average of intraday trading volume for each given time segment. The study highlights whether today\`s volume for any particular segment is above or below average. PVAT projects the volume for each time segment for the remainder of the day. A bar graph shows the volume at each periodicity interval (candle); an overlay line shows the average volume for each time segment.
The anchor time control allows the user to set the starting time of the study. If the volume for a given time segment exceeds the threshold multiplier of the average for that time it will be highlighted in yellow (default color).
Note: This study is displayed ONLY for intraday periodicities.
Related Study: Projected Aggregate Volume`},"Psychological Line":{description:"The Psychological Line measures the percentage of bars with rising closing prices relative to the prior bar over the defined period. Values above 50% indicate buyers are in control pushing prices higher whereas a value below 50% indicates weakness as sellers are pushing prices lower on average."},QStick:{description:"The QStick indicator is a moving average of close-open. It measures the average height of the body of a candle, providing insight to the internal strength of the market."},"Rainbow Moving Average":{description:`The Rainbow Moving Average (RMA) study displays ten smoothed simple moving averages (SMA) overlaid on price. The first SMA is calculated on price, each subsequent average smooths the prior SMA using the same range parameter. The averages are color-coded with red being the first average and purple as the smoothest/slowest average.
The RMA can be used to identify trend strength and signal reversals. The trend is strongest when all the SMAs are rising or falling. A reversal is signaled when the faster averages cross all of the slower averages. Consolidation is seen when the averages converge and the spread between them collapses.
NOTE: This study can be applied to other studies by using the Field parameter.`},"Rainbow Oscillator":{description:`The Rainbow Oscillator (RO) study is a price oscillator that is normalized by the price range. The RO measures the spread of the last price to the average of the ten simple moving averages (SMAs) which is then divided by the range of Highest High-Lowest Low (HH-LL) over the selected period. The result is a momentum oscillator that is normalized by the magnitude of the market&#8217;s movement. That is, during a trend both the numerator and the denominator will increase in value, whereas in a consolidation both will decrease.
The RO histogram is displayed within upper and lower bands which mirror one another. Similar to the RO, the Bands measure the spread between the highest and lowest SMA, this value is normalized by the HH-LL range as well.
The Rainbow Oscillator was developed by Mel Widner.
NOTE: This study can be applied to other studies by using the Field parameter.
Related Study: Rainbow Moving Average`},"Random Walk Index":{description:"The Random Walk Index (RWI) is a statistical indicator that helps determine if the current trend is statistically significant or if it is closer to behaving randomly. RWI plots two lines, a High and a Low, which measure the upward and downward trends, respectively. A significant divergence of the High and Low lines indicates a non-random trend is underway. Spikes in either line indicate a trend corresponding to that line. When the High and Low lines are hovering toward the bottom or close together, it indicates more random behavior. A value of zero in either line indicates the trend in the opposite direction has likely reached an extreme point."},RAVI:{description:`The Rapid Adaptive Variance Indicator (RAVI) measures the percent difference between two moving averages. RAVI is an unbounded oscillator that is similar to the Price Oscillator and MACD, except the result is in percent. In addition it is displayed as a histogram with colored bars which indicate the moving averages are diverging and above/below the Overbought/Oversold level which indicates a trend is in place and accelerating.
NOTE: This study can be applied to other studies by using the Field parameter.
Related Study: Price Oscillator`},"Relative Vigor Index":{description:`The Relative Vigor Index (RVI) study compares a Triangular Moving Average (TMA) of the close-open (candle bodies) to a TMA of the high-low range. The RVI rises when the close is near the highs and the open is near the lows. Candle bodies are close in size to the high-low range of the period. The converse is true in down trends.
A TMA of the RVI is used as a signal line to indicate significant change in trend. In addition, a histogram is displayed which measures the spread between the RVI and its Signal line.`},"Relative Volatility":{description:`Relative Volatility measures the standard deviation of price changes over a set lookback range. The value is then normalized into a percentage, with overbought and oversold lines being marked at 70% and 30%, respectively. Readings above 50 indicate upward volatility, while readings below 50 indicate downward volatility.
It is similar to the Relative Strength Index (RSI), which looks at the close instead of the standard deviation.
NOTE: This study can be applied to other studies by using the Field parameter.`},RSI:{description:`The Relative Strength Index (RSI) measures trend strength by using a ratio of average size of the net increases over the past “n” periods and relative to the average size of the net decreases. The result is a bounded oscillator that is indexed between 0 and 100 and is displayed with Overbought and Oversold levels. RSI values are smoothed exponentially using the same “n” period parameter.
The RSI was developed by J. Welles Wilder Jr.
NOTE: This study can be applied to other studies by using the Field parameter.
Related Study: Intraday Momentum Index (IMI)`},"Schaff Trend Cycle":{description:`The Schaff Trend Cycle (STC) is designed to be a forward-looking, leading indicator that generates faster, more reactive and accurate signals than other indicators. The STC is a double smoothed stochastic of the MACD creating a bounded oscillator between 0 - 100.
The STC will remain in Overbought or Oversold territory for long stretches of time producing limited information when a market is trending. Crossing above 25 or below 75 are the key signals generated by the STC.
The Schaff Trend Cycle was developed by Doug Schaff.
NOTE: This study can be applied to other studies by using the Field parameter.`},"Shinohara Intensity Ratio":{description:`The Shinohara Intensity Ratio (SIR) displays Strong (Strength) and Weak Ratio (Popularity) lines which are similar to the +DI and -DI of the ADX/DMS study. Market strength is indicated when the SIR Strong Ratio is above the SIR Weak Ratio.
The Weak Ratio is a moving sum of the High-Close divided by Close-Low. In a bull market when the Close is typically above the midpoint of the bar the numerator High(i)-Close(i) will be less than the denominator Close(i)-Low(i) resulting in smaller values that are summed.
The Strong Ratio is a moving sum of a bar&#8217;s High less the prior bar&#8217;s Close divided by the prior Close less the Low. This captures the true directional strength of a trend as prices should advance/decline from one period to the next. Accordingly, the Strong Ratio will follow the market. A change in direction of the Strong Ratio suggests that a trend may be reversing and a cross of the Weak Ratio indicates an emerging trend.`},"Standard Deviation":{description:`The Standard Deviation indicator is a statistical measure of variability, it is frequently used to assess market volatility. A low standard deviation indicates that the data points tend to be very close to the mean which occurs when the market is consolidating. A high standard deviation value indicates significant dispersion of the data points which often occurs when trends are ending.
NOTE: This study can be applied to other studies by using the Field parameter.`},"STARC Bands":{description:`The STARC (Stoller Average Range Channel) Bands are similar to ATR Bands, except the bands are centered on a simple moving average (SMA) instead of the last close. STARC plots the SMA with upper and lower bands based on recent volatility as measured by Average True Range (ATR). The Bands are calculated using a set percentage multiple (±S) of the ATR which is added/subtracted to the SMA.
When the price breaks out of the channel, it can be interpreted as a signal. Given the center line is a moving average instead of last price, the bands are far more stable than the ATR Bands.
STARC Bands were developed by Manning Stoller.
Related Study: Average True Range (ATR), ATR Trailing Stop, True Range (TR), ATR Bands`},"Stochastic Momentum Index":{description:`The Stochastic Momentum (SMI) is a variation on the original Stochastic indicator, both of which are bounded oscillators designed to identify Overbought and Oversold conditions. The SMI measures price relative to the median of its recent range, rather than a percentage location within the range as done for the Stochastic. The SMI is positive when price is above the median and negative when below it. In addition the SMI uses EMAs to smooth and stabilize the output.
The %D is a moving average of the %K SMI line which provides trigger line that helps to confirm the directional signals. The SMI oscillator values range from -100 to 100 with Overbought and Oversold thresholds defaulted to 40 and -40, respectively.
The SMI was developed by William Blau.`},Stochastics:{description:`The Stochastics indicator is a bounded oscillator that normalizes price within a range by measuring the percentage distance of the last price relative to the upper and lower bounds of its recent trading range. That is, the Stochastic equals 0 when price is at the bottom of the range and 100 when it is at the top. The Fast version (%K) of the Stochastic simply measures where price is in its range. The Slow version (%D) of Stochastic applies a simple moving average (SMA) (typically, 3 period) to remove the volatility of the oscillator and reduce the number of signals generated.
The %D is a trailing trigger line which is a SMA of the %K Stochastic line. The Stochastic values range from 0 to 100. The Overbought and Oversold levels default to 80 and 20 respectively.
The Stochastic Oscillator was developed by George C. Lane.
NOTE: This study can be applied to other studies by using the Field parameter.
Related Study: Williams %R, Stochastic Momentum`},Supertrend:{description:`The Supertrend indicator is a trailing stop tool which plots either a support line below the market or a resistance line above the market, based on the market trend. The Supertrend will switch lines when the high or low price intersects with the plotted line, similar to the Parabolic SAR indicator.
The upper line is the median price plus a multiple of Average True Range (ATR). Similarly, the lower line is the median price minus a multiple of the ATR. Similar to any trailing stop, the upper line follows the market lower and will never move higher once established. Conversely, the lower line follows the market higher and will never move lower once established.
Arrows are drawn pointing to the close of the bar when the direction changes and the bands flip.`},"Swing Index":{description:`The Swing Index indicator (SI) uses last two bars data to identify market swings that may signal a change in trend over a longer period of time. Accordingly, each period\`s value is independent from prior values. The SI compares the action from the current high/low to the prior close as well as the current range and open-close body of the current and prior bars. The short term nature of the SI make is useful as an early warning signal highlighting that investors are changing their trading behavior setting up for a potential change in trend.
The Swing Index was developed by Welles Wilder.
Related Study: Accumulative Swing Index`},"Time Series Forecast":{description:`The Time Series Forecast (TSF) uses the ordinary least squares method to derive a linear function which plots a straight line through prices so as to minimize the distances between the prices and the resulting trendline. The last point of the trendline is the forecasted value. The TSF is a moving series which plots the forecasted value of the derived trend line each period, thereby following the market like a moving average.
NOTE: This study can be applied to other studies by using the Field parameter.
Related Study: Linear Regression Forecast`},"Trade Volume Index":{description:`Trade Volume Index (TVI) adds a price movement threshold parameter to the On Balance Volume (OBV) study. Accordingly, like OBV, TVI is a cumulative total of the volume with the difference being that it only sums the volume on periods when price rises to a minimum threshold and subtracts the volume on down periods that exceed the threshold. TVI is often used as a confirmation indicator that shows if the volume activity is supporting the trend.
Related Study: On Balance Volume`},"Trend Intensity Index":{description:"The Trend Intensity Index (TII) is a ratio of the sum of price deviation above a simple moving average relative to the sum of the price deviation below a simple moving average. The TII is a bounded oscillator between 0 and 100. The TII will move to an extreme value during strong trends."},TRIX:{description:`The TRIX Oscillator measures the percent change of the triple exponential moving average (TEMA) of the close from one bar to the next. A central benefit of the TRIX oscillator when compared to others is it is quite smooth, providing greater clarity of the signals.
The TRIX Oscillator was developed by Jack Hutson.`},"True Range":{description:`The derivation of the True Range (TR) captures gap openings that are missed by traditional high-low ranges.
Related Study: ATR Bands, Average True Range (ATR)`},"Twiggs Money Flow":{description:`Developed by Colin Twiggs, the Twiggs Money Flow (TMF) indicator is a moving sum of volume, displayed as an oscillator, weighted by where price closes within its range. The indicator oscillates around 0, with positive amounts indicating a bullish trend, and negative amounts indicating a bearish trend.
The TMF is a derivation of the Chaikin Money Flow (CMF) indicator, which is in turn derived from the Accumulation/Distribution line. There are two primary differences between TMF and CMF. The first is that the TMF volume multiplier is derived using the True Range instead of the H-L range. The second is that TMF is derived using moving averages instead of cumulative volume. Consequently, these two indicators produce similar results.`},"Typical Price":{description:`The Typical Price indicator is a simple moving average (SMA) of the mean of the high, low, and close.
Note: The term “Typical Price” is used throughout technical analysis in other studies where it refers to HLC3, whereas the Typical Price Indicator is an SMA of HLC3.`},"Ulcer Index":{description:`The Ulcer Index measures the depth of a drawdown from a recent high. Specifically, as stated by Peter Martin: it is the square root of the mean of the squared percentage drawdowns in value. The squaring effect penalizes large drawdowns proportionately more than small drawdowns.
The Ulcer Index was developed by Peter Martin and Byron McCann.
NOTE: This study can be applied to other studies by using the Field parameter.`},"Ultimate Oscillator":{description:"The Ultimate Oscillator (UO) indicator is designed to improve the Overbought and Oversold signals by capturing the market`s momentum across three different time periods (i.e., Cycles). The UO effectively averages oscillators across three periodicities. The UO is a bounded oscillator with values between 0 and 100. Divergences between the UO and market price are often considered an important signal that the trend is failing and will reverse.\nThe Ultimate Oscillator was developed by Larry Williams."},"Valuation Lines":{description:`The Valuation Line is an average of all the data points displayed on the chart. Accordingly, the value will change as the data on the chart is panned left/right or expanded or compressed. Any Field shown on the chart may be selected as the input, including other studies. Three average types are supported: Mean, Median, Harmonic.
Standard Deviation bands may also be displayed above/below the average.
NOTE: This study can be applied to other studies by using the Field parameter.`},"Vertical Horizontal Filter":{description:`The Vertical Horizontal Filter (VHF) is a measure of trend extension and consolidation. It is a ratio of high-low over a range of time divided by the sum of the absolute value of price changes. Higher values indicate a stronger trend, lower values indicate a consolidation.
The Vertical Horizontal Filter was created by Adam White.`},"Volatility Cone":{description:"The Volatility Cone indicator displays a cone projected forward with the likely price range based on recent volatility. Either historical or implied volatility (if available) may be used as the input. The Volatility Projection Cone is a forward-looking study that allows users to blend information from the options market with other technical analysis tools."},"Volume Chart":{description:`Volume is used to quantify trading activity each period in a market, market sector, or individual instrument. It can be added as an underlay on the chart or in a separate window.
Related Study: Volume Underlay`},"Volume Oscillator":{description:"The Volume Oscillator (VO) measures the spread between two exponential moving averages of volume, which is similar to a Price Oscillator using volume as the field."},"Volume Profile":{description:`Volume Profile, sometimes called “volume at price”, overlays horizontal volume bars extending from the y-axis. It is designed to show the volume traded at each price level over the span of the chart. Volume Profile is often used to identify possible support and resistance.
The High-Low range for the date:time range displayed is divided by the number of buckets resulting in a high and low of each bucket. For each time period, the volume value is examined and that volume is placed into the bucket whose high value < volume value and low value > volume value.
The Volume Profile only considers the range of data shown on the screen and will change if the chart is stretched, squeezed, or scrolled back or forward in time. By combining volume and price, the user can identify high-volume price ranges which indicate price levels where significant volume was transacted indicating a balanced market. These levels are likely to provide support or resistance in the future.`},"Volume Rate of Change":{description:`Volume Rate of Change measures the percent change in volume over a set range.
Related Study: Price Rate of Change`},"Volume Underlay":{description:`Volume is used to quantify trading activity each period in a market, market sector, or individual instrument. It can be added as an underlay on the chart or in a separate window.
Related Study: Volume Chart`},"Vortex Indicator":{description:`The Vortex Indicator (VI) evaluates the strength of the trend by measuring the upside and downside price action. Accordingly, the VI derives an Uptrend line (+VI) and a Downtrend line (-VI). Positive price movement is measured over two bars by subtracting the prior low from the current high. The +VI is the sum of the upside values divided by the sum of the True Range (TR) for each bar.
Conversely, negative price movement subtracts the prior high from the current low. The -VI is the sum of the downside values divided by the sum of the TR for each bar.
The crossover of the +VI and -VI is often considered the signal of a new trend in the direction of the rising VI line.
The Vortex Indicator was created by Etienne Botes and Douglas Siepman.`},VWAP:{description:`The Volume-Weighted Average Price (VWAP) is an intraday moving average that is weighted by the volume. It is used to get a view of the fair value of the market based on the price at which volume was executed on average throughout a single day&#8217;s trading session. The calculation starts when trading opens and ends when it closes.
The VWAP multiplies the volume for each period times the typical price (HLC3). Because it also divides by the total volume, the VWAP is considered distinct from the simple moving average (SMA).
VWAP is often used as a confirmation tool in combination with other indicators, and has many uses. For example, a stock trading at prices below the VWAP may be seen as undervalued.
Related Study: Anchored VWAP`},"Weighted Close":{description:"The Weighted Close indicator is a simple moving average of the period`s high, low, and close, with close receiving double weight given its importance of mark-to-market."},"Williams %R":{description:`The Williams %R indicator normalizes prices within a range by measuring the percentage distance of the last price relative to the upper and lower bounds of its recent trading range. The result is multiplied by -100 and is plotted on a scale of -100 to zero.
The Williams %R indicator was developed by Larry Williams.
Related Study: Stochastics`},ZigZag:{description:`The ZigZag study identifies price swings of a predefined minimum magnitude. It is designed to filter out noisy fluctuations in price while identifying larger trends in which the market advances or declines by a minimum percentage (D). ZigZag is effective for analyzing historical data, and cannot forecast future trends.
The trend lines are drawn when price movement exceeds a distance threshold percentage. A Lowest Low point is recorded once the upward price movement achieves the percentage distance threshold from the low. Conversely, a Highest High point is recorded once the downward price is reached which achieves the minimum percentage magnitude.
For OHLC data, the high and low values of the bar are considered. For line and mountain charts, only the close is considered.
The final leg of the ZigZag is a proposed line between the last extreme value encountered and the present price.`}};j.Studies.Categories={Popular:["ADX/DMS","Bollinger Bands","Commodity Channel Index","Ichimoku Clouds","MACD","Moving Average","Moving Average Cross","Parabolic SAR","Projected Volume at Time","RSI","Stochastics"],"Trend Analysis":["Accumulation/Distribution","Accumulative Swing Index","ADX/DMS","Aroon","Choppiness Index","Detrended Price Oscillator","Elder Impulse System","Fractal Chaos Bands","GoNoGo - Trend","Linear Reg R2","Moving Average Cross","Negative Volume Index","Parabolic SAR","Performance Index","Positive Volume Index","Prime Number Oscillator","Psychological Line","QStick","Shinohara Intensity Ratio","Supertrend","Swing Index","Ulcer Index","Vertical Horizontal Filter","Vortex Indicator","ZigZag"],"Money Flow":["Accumulation/Distribution","Chaikin Money Flow","Ease of Movement","Elder Force Index","Klinger Volume Oscillator","Market Facilitation Index","Money Flow Index","Negative Volume Index","On Balance Volume","Positive Volume Index","Price Volume Trend","Trade Volume Index","Twiggs Money Flow"],"Momentum/Oscillator":["ADX/DMS","Aroon Oscillator","Awesome Oscillator","Balance of Power","Bollinger %b","Center Of Gravity","Chande Forecast Oscillator","Chande Momentum Oscillator","Commodity Channel Index","Coppock Curve","Disparity Index","Ease of Movement","Ehler Fisher Transform","Elder Force Index","Elder Ray Index","Fractal Chaos Oscillator","Gator Oscillator","Intraday Momentum Index","Linear Reg Slope","MACD","Momentum Indicator","Money Flow Index","Moving Average Deviation","Pretty Good Oscillator","Price Momentum Oscillator","Price Oscillator","Price Rate of Change","Pring's Know Sure Thing","Pring's Special K","Rainbow Oscillator","RAVI","Relative Vigor Index","RSI","Schaff Trend Cycle","Stochastic Momentum Index","Stochastics","Swing Index","Trend Intensity Index","TRIX","Ultimate Oscillator","Volume Oscillator","Williams %R"],"Averages/Bands":["Alligator","Anchored VWAP","ATR Bands","Bollinger Bands","Donchian Channel","Fractal Chaos Bands","Guppy Multiple Moving Average","High Low Bands","Highest High Value","Ichimoku Clouds","Keltner Channel","Linear Reg Forecast","Linear Reg Intercept","Lowest Low Value","Median Price","Moving Average","Moving Average Cross","Moving Average Envelope","Prime Number Bands","Rainbow Moving Average","STARC Bands","Time Series Forecast","Typical Price","Valuation Lines","VWAP","Weighted Close"],Volume:["Anchored VWAP","Depth of Market","Market Facilitation Index","On Balance Volume","Option Sentiment by Strike","Projected Aggregate Volume","Projected Volume at Time","Twiggs Money Flow","Volume Chart","Volume Oscillator","Volume Profile","Volume Rate of Change","Volume Underlay","VWAP"],"Support/Resistance":["ATR Trailing Stop","Darvas Box","Option Sentiment by Strike","Parabolic SAR","Pivot Points","Prime Number Bands","Supertrend","Volume Profile"],Volatility:["ATR Trailing Stop","Average True Range","Beta","Bollinger Bands","Bollinger Bandwidth","Chaikin Volatility","Choppiness Index","Donchian Width","Gopalakrishnan Range Index","High Minus Low","Historical Volatility","Mass Index","Relative Volatility","STARC Bands","True Range","Ulcer Index","Volatility Cone"],Compare:["Beta","Correlation Coefficient","Performance Index","Price Relative"],Statistical:["Correlation Coefficient","High Low Bands","Highest High Value","Historical Volatility","Linear Reg Forecast","Linear Reg Intercept","Linear Reg R2","Linear Reg Slope","Lowest Low Value","Median Price","Prime Number Oscillator","Random Walk Index","Standard Deviation","Time Series Forecast","Valuation Lines"],Projection:["Ichimoku Clouds","Projected Aggregate Volume","Projected Volume at Time","Volatility Cone"]};j.StudyBrowser||(j.StudyBrowser=function(){});j.Market=j.Market||function(){};j.Market.GLOBEX={name:"GLOBEX",market_tz:"America/Chicago",hour_aligned:!0,normal_daily_open:"00:00",normal_daily_close:"24:00",rules:[{dayofweek:0,open:"15:00",close:"24:00"},{dayofweek:1,open:"00:00",close:"24:00"},{dayofweek:2,open:"00:00",close:"24:00"},{dayofweek:3,open:"00:00",close:"24:00"},{dayofweek:4,open:"00:00",close:"24:00"},{dayofweek:5,open:"00:00",close:"18:00"}]};j.Market.FOREX={name:"FOREX",market_tz:"America/New_York",hour_aligned:!0,normal_daily_open:"17:00",normal_daily_close:"17:00",rules:[{dayofweek:0,open:"15:00",close:"17:00"},{dayofweek:0,open:"17:00",close:"24:00"},{dayofweek:1,open:"00:00",close:"17:00"},{dayofweek:1,open:"17:00",close:"24:00"},{dayofweek:2,open:"00:00",close:"17:00"},{dayofweek:2,open:"17:00",close:"24:00"},{dayofweek:3,open:"00:00",close:"17:00"},{dayofweek:3,open:"17:00",close:"24:00"},{dayofweek:4,open:"00:00",close:"17:00"},{dayofweek:4,open:"17:00",close:"24:00"},{dayofweek:5,open:"00:00",close:"17:00"}]};j.Market.METALS={name:"METALS",market_tz:"America/New_York",hour_aligned:!0,normal_daily_open:"18:00",normal_daily_close:"17:15",rules:[{dayofweek:0,open:"18:00",close:"24:00"},{dayofweek:1,open:"00:00",close:"17:15"},{dayofweek:1,open:"18:00",close:"24:00"},{dayofweek:2,open:"00:00",close:"17:15"},{dayofweek:2,open:"18:00",close:"24:00"},{dayofweek:3,open:"00:00",close:"17:15"},{dayofweek:3,open:"18:00",close:"24:00"},{dayofweek:4,open:"00:00",close:"17:15"},{dayofweek:4,open:"18:00",close:"24:00"},{dayofweek:5,open:"00:00",close:"17:15"}]};j.Market.GENERIC_5DAY={name:"5DAY",hour_aligned:!0,normal_daily_open:"0:00",normal_daily_close:"24:00",rules:[{dayofweek:1,open:"0:00",close:"24:00"},{dayofweek:2,open:"0:00",close:"24:00"},{dayofweek:3,open:"0:00",close:"24:00"},{dayofweek:4,open:"0:00",close:"24:00"},{dayofweek:5,open:"0:00",close:"24:00"}]};j.Market.NYSE={name:"NYSE",market_tz:"America/New_York",hour_aligned:!1,normal_daily_open:"09:30",normal_daily_close:"16:00",rules:[{dayofweek:1,open:"09:30",close:"16:00"},{dayofweek:2,open:"09:30",close:"16:00"},{dayofweek:3,open:"09:30",close:"16:00"},{dayofweek:4,open:"09:30",close:"16:00"},{dayofweek:5,open:"09:30",close:"16:00"},{dayofweek:1,open:"04:00",close:"09:30",name:"pre"},{dayofweek:2,open:"04:00",close:"09:30",name:"pre"},{dayofweek:3,open:"04:00",close:"09:30",name:"pre"},{dayofweek:4,open:"04:00",close:"09:30",name:"pre"},{dayofweek:5,open:"04:00",close:"09:30",name:"pre"},{dayofweek:1,open:"16:00",close:"20:00",name:"post"},{dayofweek:2,open:"16:00",close:"20:00",name:"post"},{dayofweek:3,open:"16:00",close:"20:00",name:"post"},{dayofweek:4,open:"16:00",close:"20:00",name:"post"},{dayofweek:5,open:"16:00",close:"20:00",name:"post"},{date:"*-12-25",open:"00:00",close:"00:00"},{date:"*-07-04",open:"00:00",close:"00:00"},{date:"*-01-01",open:"00:00",close:"00:00"},{date:"2012-01-02",open:"00:00",close:"00:00"},{date:"2025-01-20"},{date:"2025-02-17"},{date:"2025-04-18"},{date:"2025-05-26"},{date:"2025-06-19"},{date:"2025-07-03",open:"4:00",close:"9:30",name:"pre"},{date:"2025-07-03",open:"9:30",close:"13:00"},{date:"2025-07-03",open:"13:00",close:"17:00",name:"post"},{date:"2025-09-01"},{date:"2025-11-27"},{date:"2025-11-28",open:"4:00",close:"9:30",name:"pre"},{date:"2025-11-28",open:"9:30",close:"13:00"},{date:"2025-11-28",open:"13:00",close:"17:00",name:"post"},{date:"2025-12-24",open:"4:00",close:"9:30",name:"pre"},{date:"2025-12-24",open:"9:30",close:"13:00"},{date:"2025-12-24",open:"13:00",close:"17:00",name:"post"},{date:"2024-01-15"},{date:"2024-02-19"},{date:"2024-03-29"},{date:"2024-05-27"},{date:"2024-06-19"},{date:"2024-07-03",open:"4:00",close:"9:30",name:"pre"},{date:"2024-07-03",open:"9:30",close:"13:00"},{date:"2024-07-03",open:"13:00",close:"17:00",name:"post"},{date:"2024-09-02"},{date:"2024-11-28"},{date:"2024-11-29",open:"4:00",close:"9:30",name:"pre"},{date:"2024-11-29",open:"9:30",close:"13:00"},{date:"2024-11-29",open:"13:00",close:"17:00",name:"post"},{date:"2024-12-24",open:"4:00",close:"9:30",name:"pre"},{date:"2024-12-24",open:"9:30",close:"13:00"},{date:"2024-12-24",open:"13:00",close:"17:00",name:"post"},{date:"2023-01-02"},{date:"2023-01-16"},{date:"2023-02-20"},{date:"2023-04-07"},{date:"2023-05-29"},{date:"2023-06-19"},{date:"2023-07-03",open:"4:00",close:"9:30",name:"pre"},{date:"2023-07-03",open:"9:30",close:"13:00"},{date:"2023-07-03",open:"13:00",close:"17:00",name:"post"},{date:"2023-09-04"},{date:"2023-11-23"},{date:"2023-11-24",open:"4:00",close:"9:30",name:"pre"},{date:"2023-11-24",open:"9:30",close:"13:00"},{date:"2023-11-24",open:"13:00",close:"17:00",name:"post"},{date:"2022-01-17"},{date:"2022-02-21"},{date:"2022-04-15"},{date:"2022-05-30"},{date:"2022-09-05"},{date:"2022-11-24"},{date:"2022-11-25",open:"4:00",close:"9:30",name:"pre"},{date:"2022-11-25",open:"9:30",close:"13:00"},{date:"2022-11-25",open:"13:00",close:"17:00",name:"post"},{date:"2022-12-26"},{date:"2021-01-18"},{date:"2021-02-15"},{date:"2021-04-02"},{date:"2021-05-31"},{date:"2021-07-05"},{date:"2021-09-06"},{date:"2021-11-25"},{date:"2021-11-26",open:"4:00",close:"9:30",name:"pre"},{date:"2021-11-26",open:"9:30",close:"13:00"},{date:"2021-11-26",open:"13:00",close:"17:00",name:"post"},{date:"2021-12-24"},{date:"2020-01-20"},{date:"2020-02-17"},{date:"2020-04-10"},{date:"2020-05-25"},{date:"2020-07-03"},{date:"2020-09-07"},{date:"2020-11-26"},{date:"2020-11-27",open:"4:00",close:"9:30",name:"pre"},{date:"2020-11-27",open:"9:30",close:"13:00"},{date:"2020-12-24",open:"4:00",close:"9:30",name:"pre"},{date:"2020-12-24",open:"9:30",close:"13:00"},{date:"2019-01-21"},{date:"2019-02-18"},{date:"2019-04-19"},{date:"2019-05-27"},{date:"2019-07-03",open:"4:00",close:"9:30",name:"pre"},{date:"2019-07-03",open:"9:30",close:"13:00"},{date:"2019-09-02"},{date:"2019-11-28"},{date:"2019-11-29",open:"4:00",close:"9:30",name:"pre"},{date:"2019-11-29",open:"9:30",close:"13:00"},{date:"2019-12-24",open:"4:00",close:"9:30",name:"pre"},{date:"2019-12-24",open:"9:30",close:"13:00"},{date:"2018-01-15"},{date:"2018-02-19"},{date:"2018-03-30"},{date:"2018-05-28"},{date:"2018-07-03",open:"4:00",close:"9:30",name:"pre"},{date:"2018-07-03",open:"9:30",close:"13:00"},{date:"2018-09-03"},{date:"2018-11-22"},{date:"2018-11-23",open:"4:00",close:"9:30",name:"pre"},{date:"2018-11-23",open:"9:30",close:"13:00"},{date:"2018-12-05"},{date:"2018-12-24",open:"4:00",close:"9:30",name:"pre"},{date:"2018-12-24",open:"9:30",close:"13:00"},{date:"2017-01-02"},{date:"2017-01-16"},{date:"2017-02-20"},{date:"2017-04-14"},{date:"2017-05-29"},{date:"2017-07-03",open:"4:00",close:"9:30",name:"pre"},{date:"2017-07-03",open:"9:30",close:"13:00"},{date:"2017-09-04"},{date:"2017-11-23"},{date:"2017-11-24",open:"4:00",close:"9:30",name:"pre"},{date:"2017-11-24",open:"9:30",close:"13:00"},{date:"2016-01-18"},{date:"2016-02-15"},{date:"2016-03-25"},{date:"2016-05-30"},{date:"2016-09-05"},{date:"2016-11-24"},{date:"2016-11-25",open:"4:00",close:"9:30",name:"pre"},{date:"2016-11-25",open:"9:30",close:"13:00"},{date:"2016-12-26"},{date:"2015-01-19"},{date:"2015-02-16"},{date:"2015-04-03"},{date:"2015-05-25"},{date:"2015-07-03"},{date:"2015-09-07"},{date:"2015-11-26"},{date:"2015-11-27",open:"4:00",close:"9:30",name:"pre"},{date:"2015-11-27",open:"9:30",close:"13:00"},{date:"2015-12-24",open:"4:00",close:"9:30",name:"pre"},{date:"2015-12-24",open:"9:30",close:"13:00"},{date:"2014-01-20"},{date:"2014-02-17"},{date:"2014-04-18"},{date:"2014-05-26"},{date:"2014-09-01"},{date:"2014-11-27"},{date:"2014-07-03",open:"4:00",close:"9:30",name:"pre"},{date:"2014-07-03",open:"9:30",close:"13:00"},{date:"2014-11-28",open:"4:00",close:"9:30",name:"pre"},{date:"2014-11-28",open:"9:30",close:"13:00"},{date:"2014-12-24",open:"4:00",close:"9:30",name:"pre"},{date:"2014-12-24",open:"9:30",close:"13:00"},{date:"2013-01-21"},{date:"2013-02-18"},{date:"2013-03-29"},{date:"2013-05-27"},{date:"2013-09-02"},{date:"2013-11-28"},{date:"2013-07-03",open:"4:00",close:"9:30",name:"pre"},{date:"2013-07-03",open:"9:30",close:"13:00"},{date:"2013-11-29",open:"4:00",close:"9:30",name:"pre"},{date:"2013-11-29",open:"9:30",close:"13:00"},{date:"2013-12-24",open:"4:00",close:"9:30",name:"pre"},{date:"2013-12-24",open:"9:30",close:"13:00"},{date:"2012-01-16"},{date:"2012-02-20"},{date:"2012-04-06"},{date:"2012-05-28"},{date:"2012-09-03"},{date:"2012-10-29"},{date:"2012-10-30"},{date:"2012-11-22"},{date:"2012-07-03",open:"4:00",close:"9:30",name:"pre"},{date:"2012-07-03",open:"9:30",close:"13:00"},{date:"2012-11-23",open:"4:00",close:"9:30",name:"pre"},{date:"2012-11-23",open:"9:30",close:"13:00"},{date:"2012-12-24",open:"4:00",close:"9:30",name:"pre"},{date:"2012-12-24",open:"9:30",close:"13:00"}]};j.Market.LSE={name:"London",market_tz:"Europe/London",hour_aligned:!1,normal_daily_open:"08:00",normal_daily_close:"17:00",rules:[{dayofweek:1,open:"08:00",close:"17:00"},{dayofweek:2,open:"08:00",close:"17:00"},{dayofweek:3,open:"08:00",close:"17:00"},{dayofweek:4,open:"08:00",close:"17:00"},{dayofweek:5,open:"08:00",close:"17:00"},{date:"*-12-25",open:"00:00",close:"00:00"},{date:"*-12-26",open:"00:00",close:"00:00"},{date:"*-01-01",open:"00:00",close:"00:00"},{date:"2012-01-02",open:"00:00",close:"00:00"},{date:"2025-04-18"},{date:"2025-04-21"},{date:"2025-05-05"},{date:"2025-05-26"},{date:"2025-08-25"},{date:"2025-12-24",open:"8:00",close:"12:30"},{date:"2025-12-31",open:"8:00",close:"12:30"},{date:"2024-03-29"},{date:"2024-04-01"},{date:"2024-05-06"},{date:"2024-05-27"},{date:"2024-08-26"},{date:"2024-12-24",open:"8:00",close:"12:30"},{date:"2024-12-31",open:"8:00",close:"12:30"},{date:"2023-01-02"},{date:"2023-04-07"},{date:"2023-04-10"},{date:"2023-05-01"},{date:"2023-05-29"},{date:"2023-08-28"},{date:"2023-12-22",open:"8:00",close:"12:30"},{date:"2023-12-29",open:"8:00",close:"12:30"},{date:"2022-01-03"},{date:"2022-04-15"},{date:"2022-04-18"},{date:"2022-05-02"},{date:"2022-05-30"},{date:"2022-08-29"},{date:"2022-12-23",open:"8:00",close:"12:30"},{date:"2022-12-27"},{date:"2022-12-30",open:"8:00",close:"12:30"},{date:"2021-04-02"},{date:"2021-04-05"},{date:"2021-05-03"},{date:"2021-05-31"},{date:"2021-08-30"},{date:"2021-12-24",open:"8:00",close:"12:30"},{date:"2021-12-27"},{date:"2021-12-28"},{date:"2021-12-31",open:"8:00",close:"12:30"},{date:"2020-04-10"},{date:"2020-04-13"},{date:"2020-05-04"},{date:"2020-05-25"},{date:"2020-08-31"},{date:"2020-12-24",open:"8:00",close:"12:30"},{date:"2020-12-28"},{date:"2020-12-31",open:"8:00",close:"12:30"},{date:"2019-04-19"},{date:"2019-04-22"},{date:"2019-05-06"},{date:"2019-05-27"},{date:"2019-08-26"},{date:"2019-12-24",open:"8:00",close:"12:30"},{date:"2019-12-31",open:"8:00",close:"12:30"},{date:"2018-03-30"},{date:"2018-04-02"},{date:"2018-05-07"},{date:"2018-05-28"},{date:"2018-08-27"},{date:"2018-12-24",open:"8:00",close:"12:30"},{date:"2018-12-31",open:"8:00",close:"12:30"},{date:"2017-01-02"},{date:"2017-04-14"},{date:"2017-04-17"},{date:"2017-05-01"},{date:"2017-05-29"},{date:"2017-08-28"},{date:"2017-12-22",open:"8:00",close:"12:30"},{date:"2017-12-29",open:"8:00",close:"12:30"},{date:"2016-03-25"},{date:"2016-03-28"},{date:"2016-05-02"},{date:"2016-05-30"},{date:"2016-08-29"},{date:"2016-12-23",open:"8:00",close:"12:30"},{date:"2016-12-27"},{date:"2016-12-30",open:"8:00",close:"12:30"},{date:"2015-04-03"},{date:"2015-04-06"},{date:"2015-05-04"},{date:"2015-05-25"},{date:"2015-08-31"},{date:"2015-12-24",open:"8:00",close:"12:30"},{date:"2015-12-28"},{date:"2015-12-31",open:"8:00",close:"12:30"},{date:"2014-04-18"},{date:"2014-04-21"},{date:"2014-05-05"},{date:"2014-05-26"},{date:"2014-08-25"},{date:"2014-12-24",open:"8:00",close:"12:30"},{date:"2014-12-31",open:"8:00",close:"12:30"},{date:"2013-03-29"},{date:"2013-04-01"},{date:"2013-05-06"},{date:"2013-05-27"},{date:"2013-08-26"},{date:"2013-12-24",open:"8:00",close:"12:30"},{date:"2013-12-31",open:"8:00",close:"12:30"},{date:"2012-01-02"},{date:"2012-04-06"},{date:"2012-04-09"},{date:"2012-05-07"},{date:"2012-06-04"},{date:"2012-06-05"},{date:"2012-08-27"},{date:"2012-12-24",open:"8:00",close:"12:30"},{date:"2012-12-31",open:"8:00",close:"12:30"}]};const wp=Object.freeze({marketDefinition:{url:"http://localhost:3000/marketdef/{{symbol}}",method:"get",headers:{}}});function Vn(E,e,t="second"){const s=(()=>{let n;switch(t){case"minute":n=6e4;break;case"hour":n=36e5;break;case"day":n=864e5;break;case"second":default:n=1e3}return Math.round(n/e)})();Object.defineProperty(Vn,E,{get:function n(){const r=Date.now(),a=r-(n.last||0)>=s;return a&&(n.last=r),a}})}function Ua(E){if(!new.target)return new Ua(E);if(Ua.instance!==void 0)return Ua.instance;const e=function s(n,r=""){if(r instanceof Object){const i=r instanceof Array?[]:{};for(const a in r)i[a]=s(n,r[a]);return i}return typeof r!="string"?r:r.replace(/\{\{(.+?)\}\}/g,function(i,a){const o=n[a]||"";return o instanceof Object?JSON.stringify(o):encodeURI(o)})},t={get:function(s,n){const r=new XMLHttpRequest,i=n.timeout||s.timeout||0;r.open(s.method,e(n,s.url)),Object.entries(s.headers||{}).forEach(([a,o])=>{r.setRequestHeader(a,e(n,o))}),r.onload=function(){n.success(r.response)},r.onerror=function(a){n.failure(a)},i>0&&(r.timeout=i,r.ontimeout=function(a){n.failure(a)}),r.send()},post:function(s,n){const r=new XMLHttpRequest,i=n.timeout||s.timeout||0;r.open(s.method,e(n,s.url)),Object.entries(s.headers||{}).forEach(([o,c])=>{r.setRequestHeader(o,e(n,c))}),r.onload=function(){n.success(r.response)},r.onerror=function(o){n.failure(o)},i>0&&(r.timeout=i,r.ontimeout=function(o){n.failure(o)});let a;typeof s.body=="object"?a=JSON.stringify(e(n,s.body)):a=s.body,r.send(a)},fetch:async function(s,n){try{const r=await fetch(e(n,s.url),{method:s.fetchMethod,headers:Object.entries(s.headers||{}).reduce((i,[a,o])=>(i[a]=o,i),{}),body:e(n,s.body)});n.success(r)}catch(r){n.failure(r)}}};Object.keys(E).forEach(s=>{const n=E[s];n.rate&&Vn(s,n.rate,n.period),Object.defineProperty(this,s,{enumerable:!0,value:function(r){return new Promise((i,a)=>{if(r.success===void 0?(r.success=o=>{i(o)},r.failure=o=>{a(o)}):i("Using provided callback"),Vn[s]===!1){const o=`Call to ${s} throttled`;r.failure(o);return}t[n.method].call(this,n,r)})}})}),Object.defineProperty(Ua,"instance",{value:this})}const Sp=Ua(wp);function Ti(E,e){if(!new.target)return new Ti(...arguments);if(Ti[e]!==void 0)return Ti[e];let t={};const s=36e5,n=6e5;let r=0;Object.defineProperties(this,{name:{enumerable:!0,get:function(){return t.name||"no market name specified"}},market_tz:{enumerable:!0,get:function(){return t.market_tz}},hour_aligned:{enumerable:!0,get:function(){return t.hour_aligned}},convertOnDaily:{enumerable:!0,get:function(){return t.convertOnDaily}},beginningDayOfWeek:{enumerable:!0,get:function(){return t.beginningDayOfWeek}},normal_daily_open:{enumerable:!0,get:function(){return t.normal_daily_open}},normal_daily_close:{enumerable:!0,get:function(){return t.normal_daily_close}},minimum_session_length:{enumerable:!0,get:function(){return t.minimum_session_length}},rules:{enumerable:!0,get:function(){return t.rules}}});const i=new Proxy(this,{get:function(l,u,h){return Object.keys(this).includes(u)&&Date.now()>=r&&i.update(),Reflect.get(l,u,h)}});Object.defineProperties(i,{endpoint:{value:"marketDefinition",writable:!0},extract:{value:void 0,writable:!0},load:{value:function(l){if(["name","hour_aligned","normal_daily_open","normal_daily_close","rules"].every(u=>Object.keys(l).includes(u)))t=l;else throw new Error("Can't load market def: new definition is invalid")}},transform:{value:void 0,writable:!0},update:{value:async function(){try{const l=i.extract?await i.extract(e):{},u=await Sp[i.endpoint](l),h=i.transform?i.transform(u):JSON.parse(u);i.load(h),r=Date.now()+s}catch(l){throw console.error("MarketDefFeed update error"),setTimeout(i.update,n),new Error(l)}}}});const a=E.ChartEngine.registeredContainers.flatMap(l=>l.stx.getSymbols({"include-parameters":!0})),o=Ti.cache;for(o.filter(l=>!a.some(u=>u===l)).forEach(Ti.purge);o.length>=Ti.MAX_CACHED;){const l=o.shift();delete Ti[l]}return i}Object.defineProperties(Ti,{cache:{value:[]},MAX_CACHED:{value:10,writable:!0},purge:{value:function(E){const e=Ti.cache;E===void 0?(e.forEach(t=>delete Ti[t]),e.splice(0,e.length)):(e.splice(e.indexOf(E),1),delete Ti[E])}}});function gr(E,e,t){if(!new.target)return new gr(...arguments);if(gr[E])return gr[E];if(Ti[E])return Promise.resolve(Ti[E]);const s=new Promise(async n=>{try{await e.update()}catch(r){console.error(r),console.warn("Initial update of Market definition failed; falling back to file"),e.load(t)}finally{delete gr[E],Ti.cache.push(E),Object.defineProperty(Ti,E,{configurable:!0,value:e}),n(e)}});return Object.setPrototypeOf(s,gr.prototype),gr[E]=s,s}gr.prototype=Object.create(Promise.prototype);gr.prototype.constructor=gr;j.Market=j.Market||function(){};j.Market.MarketDefinitionFeed=Ti;j.Market.MarketDefinitionPromise=gr;j.Market.Symbology=j.Market.Symbology||function(){};j.Market.Symbology.isAPIBacked=function(E){const e=j.Market.symbolMapping[E]||j.Market.Symbology.isAPIBacked.defaultAPI;return j.Market.definitionAPIs[e]};j.Market.Symbology.isForeignSymbol=function(E){return E?E.indexOf(".")!=-1:!1};j.Market.Symbology.isFuturesSymbol=function(E){return E?E.length>1&&E[0]=="/":!1};j.Market.Symbology.isRateSymbol=function(E){return E?E.length>1&&E[0]=="%":!1};j.Market.Symbology.isForexSymbol=function(E){return!E||j.Market.Symbology.isForeignSymbol(E)||j.Market.Symbology.isFuturesSymbol(E)||E.length<6||E.length>7||E.length==6&&E[5]=="X"?!1:!!/\^?[A-Za-z]{6}/.test(E)};j.Market.Symbology.isForexMetal=function(E,e){const t={XAU:!0,XAG:!0,XPT:!0,XPD:!0};return!E||!j.Market.Symbology.isForexSymbol(E)?!1:(E.charAt(0)!="^"&&(E="^"+E),!t[E.substring(1,4)]&&t[E.substring(4,7)]?!0:!!(!e&&t[E.substring(1,4)]&&!t[E.substring(4,7)]))};j.Market.Symbology.isForexCrypto=function(E){const e={BTC:!0,ETH:!0,XLM:!0,LTC:!0,ETC:!0,XRP:!0,ADA:!0,BNB:!0};return!E||!j.Market.Symbology.isForexSymbol(E)?!1:(E.charAt(0)!="^"&&(E="^"+E),e[E.substring(1,4)]||e[E.substring(4,7)])};j.Market.Symbology.factory=function(E){let e=j.Market.NYSE;const t=E.symbol;j.Market.Symbology.isForeignSymbol(t)?e=j.Market.GENERIC_5DAY:j.Market.Symbology.isFuturesSymbol(t)?e=j.Market.GLOBEX:j.Market.Symbology.isForexCrypto(t)?e=null:j.Market.Symbology.isForexMetal(t)?e=j.Market.METALS:j.Market.Symbology.isForexSymbol(t)&&(e=j.Market.FOREX);const s=j.Market.Symbology.isAPIBacked(t);if(s){if(Ti[t])return Ti[t];const n=gr[t];if(n)throw n;const r=new Ti(j,t);throw r.endpoint=s.endpoint,r.extract=s.extract,r.transform=s.transform,new gr(t,r,e)}return e};j.Market.Symbology.encodeTermStructureInstrumentSymbol=function(E,e){return E[0]==="%"&&(E=E.slice(1)),E+" "+e};j.timeZoneMap={"(UTC-11:00) American Samoa, Midway Island":"Pacific/Pago_Pago","(UTC-10:00) Hawaii":"Pacific/Honolulu","(UTC-10:00) Alaska Aleutian Islands":"America/Adak","(UTC-09:00) Alaska":"America/Juneau","(UTC-08:00) Pacific Time (US and Canada), Tijuana":"America/Los_Angeles","(UTC-07:00) Arizona":"America/Phoenix","(UTC-07:00) Mazatlan":"America/Mazatlan","(UTC-07:00) Mountain Time (US and Canada)":"America/Denver","(UTC-06:00) Saskatchewan":"America/Regina","(UTC-06:00) Central America":"America/Costa_Rica","(UTC-06:00) Central Time (US and Canada)":"America/Chicago","(UTC-06:00) Chihuahua":"America/Chihuahua","(UTC-06:00) Guadalajara, Mexico City, Monterrey":"America/Mexico_City","(UTC-05:00) Bogota, Lima, Quito, Rio Branco":"America/Bogota","(UTC-05:00) Eastern Time (US and Canada)":"America/New_York","(UTC-05:00) Havana":"America/Havana","(UTC-05:00) Port-au-Prince":"America/Port-au-Prince","(UTC-04:00) Caracas":"America/Caracas","(UTC-04:00) Georgetown, La Paz, Manaus, San Juan":"America/Puerto_Rico","(UTC-04:00) Santiago":"America/Santiago","(UTC-04:00) Asuncion":"America/Asuncion","(UTC-04:00) Atlantic Time (Canada)":"America/Halifax","(UTC-03:30) Newfoundland and Labrador":"America/St_Johns","(UTC-03:00) Buenos Aires, Montevideo":"America/Argentina/Buenos_Aires","(UTC-03:00) Punta Arenas":"America/Punta_Arenas","(UTC-03:00) Sao Paulo":"America/Sao_Paulo","(UTC-02:00) Mid-Atlantic":"Atlantic/South_Georgia","(UTC-01:00) Cape Verde Islands":"Atlantic/Cape_Verde","(UTC-01:00) Azores":"Atlantic/Azores","(UTC) Greenwich Mean Time, Reykjavik":"UTC","(UTC) Dublin":"Europe/Dublin","(UTC) Lisbon, London":"Europe/London","(UTC) Casablanca":"Africa/Casablanca","(UTC+01:00) Algiers, Tunis":"Africa/Tunis","(UTC+01:00) Amsterdam, Berlin, Bern, Rome, Stockholm, Vienna":"Europe/Berlin","(UTC+01:00) Belgrade, Budapest, Prague, Sarajevo, Warsaw":"Europe/Belgrade","(UTC+01:00) Brussels, Copenhagen, Madrid, Paris":"Europe/Brussels","(UTC+02:00) Cairo":"Africa/Cairo","(UTC+02:00) Harare, Johannesburg":"Africa/Johannesburg","(UTC+02:00) Kaliningrad":"Europe/Kaliningrad","(UTC+02:00) Athens, Bucharest":"Europe/Bucharest","(UTC+02:00) Helsinki, Kyiv, Riga, Sofia, Tallinn, Vilnius":"Europe/Helsinki","(UTC+02:00) Cyprus":"Asia/Nicosia","(UTC+02:00) Beirut":"Asia/Beirut","(UTC+02:00) Jerusalem":"Asia/Jerusalem","(UTC+03:00) Istanbul":"Europe/Istanbul","(UTC+03:00) Damascus":"Asia/Damascus","(UTC+03:00) Amman":"Asia/Amman","(UTC+03:00) Baghdad, Kuwait, Qatar, Riyadh":"Asia/Riyadh","(UTC+03:00) Minsk, Moscow, Kirov, Simferopol":"Europe/Moscow","(UTC+03:00) Volgograd":"Europe/Volgograd","(UTC+03:00) Nairobi":"Africa/Nairobi","(UTC+03:30) Tehran":"Asia/Tehran","(UTC+04:00) Baku":"Asia/Baku","(UTC+04:00) Dubai, Muscat":"Asia/Dubai","(UTC+04:00) Astrakhan, Samara, Saratov, Ulyanovsk":"Europe/Samara","(UTC+04:30) Kabul":"Asia/Kabul","(UTC+05:00) Karachi, Tashkent":"Asia/Karachi","(UTC+05:00) Yekaterinburg":"Asia/Yekaterinburg","(UTC+05:30) Chennai, Kolkata, Mumbai, New Delhi":"Asia/Kolkata","(UTC+05:45) Kathmandu":"Asia/Kathmandu","(UTC+06:00) Almaty":"Asia/Almaty","(UTC+06:00) Omsk":"Asia/Omsk","(UTC+06:00) Astana, Dhaka":"Asia/Dhaka","(UTC+06:30) Yangon":"Asia/Yangon","(UTC+07:00) Bangkok, Jakarta, Vietnam":"Asia/Bangkok","(UTC+07:00) Hovd":"Asia/Hovd","(UTC+07:00) Krasnoyarsk":"Asia/Krasnoyarsk","(UTC+07:00) Novokuznetsk":"Asia/Novokuznetsk","(UTC+07:00) Barnaul, Novosibirsk, Tomsk":"Asia/Novosibirsk","(UTC+08:00) Beijing, Chongqing, Hong Kong SAR":"Asia/Hong_Kong","(UTC+08:00) Brunei, Kuala Lumpur, Singapore":"Asia/Singapore","(UTC+08:00) Irkutsk":"Asia/Irkutsk","(UTC+08:00) Choibalsan, Ulaanbaatar":"Asia/Ulaanbaatar","(UTC+08:00) Manila, Taipei":"Asia/Taipei","(UTC+08:00) Perth":"Australia/Perth","(UTC+08:45) Eucla":"Australia/Eucla","(UTC+09:00) Osaka, Sapporo, Tokyo":"Asia/Tokyo","(UTC+09:00) Pyongyang":"Asia/Pyongyang","(UTC+09:00) Seoul":"Asia/Seoul","(UTC+09:00) Chita, Khandyga, Yakutsk":"Asia/Yakutsk","(UTC+09:30) Adelaide":"Australia/Adelaide","(UTC+09:30) Darwin":"Australia/Darwin","(UTC+10:00) Brisbane":"Australia/Brisbane","(UTC+10:00) Canberra, Melbourne, Sydney":"Australia/Sydney","(UTC+10:00) Guam, Port Moresby":"Pacific/Guam","(UTC+10:00) Ust-Nera, Vladivostok":"Asia/Vladivostok","(UTC+11:00) Noumea, Solomon Islands":"Pacific/Noumea","(UTC+11:00) Magadan":"Asia/Magadan","(UTC+11:00) Sakhalin, Srednekolymsk":"Asia/Srednekolymsk","(UTC+12:00) Anadyr, Kamchatka":"Asia/Kamchatka","(UTC+12:00) Auckland, Wellington":"Pacific/Auckland","(UTC+12:00) Fiji":"Pacific/Fiji","(UTC+12:45) Chatham":"Pacific/Chatham","(UTC+13:00) Tonga":"Pacific/Tongatapu","(UTC+13:00) Samoa":"Pacific/Apia","(UTC+14:00) Kiritimati":"Pacific/Kiritimati"};xa.timezone.loadingScheme=xa.timezone.loadingSchemes.MANUAL_LOAD;xa.timezone.loadZoneDataFromObject({zones:{"Atlantic/Cape_Verde":[[60,"-","-01",null]],"Africa/Cairo":[[-120,"Egypt","EE%sT",null]],"Africa/Nairobi":[[-180,"-","EAT",null]],"Africa/Casablanca":[[0,"Morocco","+00/+01",15406956e5],[-60,"Morocco","+01/+00",null]],"Africa/Johannesburg":[[-120,"","SAST",null]],"Africa/Tunis":[[-60,"","CE%sT",null]],"Asia/Kabul":[[-270,"-","+0430",null]],"Asia/Baku":[[-240,"","+04/+05",null]],"Asia/Dhaka":[[-360,"","+06/+07",null]],"Asia/Yangon":[[-390,"-","+0630",null]],"Asia/Hong_Kong":[[-480,"","HK%sT",null]],"Asia/Taipei":[[-480,"","C%sT",null]],"Asia/Nicosia":[[-120,"EUAsia","EE%sT",null]],"Asia/Kolkata":[[-330,"-","IST",null]],"Asia/Tehran":[[-210,"Iran","+0330/+0430",null]],"Asia/Jerusalem":[[-120,"Zion","I%sT",null]],"Asia/Tokyo":[[-540,"","J%sT",null]],"Asia/Amman":[[-120,"Jordan","EE%sT",16669152e5],[-180,"-","+03",null]],"Asia/Almaty":[[-360,"-","ALMT",null]],"Asia/Seoul":[[-540,"","K%sT",null]],"Asia/Pyongyang":[[-540,"-","KST",null]],"Asia/Beirut":[[-120,"Lebanon","EE%sT",null]],"Asia/Hovd":[[-420,"","+07/+08",null]],"Asia/Ulaanbaatar":[[-480,"","+08/+09",null]],"Asia/Kathmandu":[[-345,"-","+0545",null]],"Asia/Karachi":[[-300,"","PK%sT",null]],"Asia/Riyadh":[[-180,"-","+03",null]],"Asia/Singapore":[[-480,"-","+08",null]],"Asia/Damascus":[[-120,"Syria","EE%sT",16669152e5],[-180,"-","+03",null]],"Asia/Bangkok":[[-420,"-","+07",null]],"Asia/Dubai":[[-240,"-","+04",null]],"Australia/Darwin":[[-570,"","AC%sT",null]],"Australia/Perth":[[-480,"","AW%sT",null]],"Australia/Eucla":[[-525,"","+0845/+0945",null]],"Australia/Brisbane":[[-600,"","AE%sT",null]],"Australia/Adelaide":[[-570,"AS","AC%sT",null]],"Australia/Sydney":[[-600,"AN","AE%sT",null]],"Pacific/Fiji":[[-720,"Fiji","+12/+13",null]],"Pacific/Guam":[[-600,"-","ChST",null]],"Pacific/Kiritimati":[[-840,"-","+14",null]],"Pacific/Noumea":[[-660,"","+11/+12",null]],"Pacific/Auckland":[[-720,"NZ","NZ%sT",null]],"Pacific/Chatham":[[-765,"Chatham","+1245/+1345",null]],"Pacific/Pago_Pago":[[660,"-","SST",null]],"Pacific/Apia":[[-780,"WS","+13/+14",null]],"Pacific/Tongatapu":[[-780,"","+13/+14",null]],"Etc/UTC":[[0,"-","UTC",null]],"Europe/London":[[0,"EU","GMT/BST",null]],"Europe/Dublin":[[0,"Eire","IST/GMT",null]],"Europe/Brussels":[[-60,"EU","CE%sT",null]],"Europe/Helsinki":[[-120,"EU","EE%sT",null]],"Europe/Berlin":[[-60,"EU","CE%sT",null]],"Atlantic/Azores":[[60,"EU","-01/+00",null]],"Europe/Bucharest":[[-120,"EU","EE%sT",null]],"Europe/Kaliningrad":[[-120,"-","EET",null]],"Europe/Moscow":[[-180,"-","MSK",null]],"Europe/Volgograd":[[-180,"-","MSK",1540692e6],[-240,"-","+04",16090344e5],[-180,"-","MSK",null]],"Europe/Samara":[[-240,"-","+04",null]],"Asia/Yekaterinburg":[[-300,"-","+05",null]],"Asia/Omsk":[[-360,"-","+06",null]],"Asia/Novosibirsk":[[-420,"-","+07",null]],"Asia/Novokuznetsk":[[-420,"-","+07",null]],"Asia/Krasnoyarsk":[[-420,"-","+07",null]],"Asia/Irkutsk":[[-480,"-","+08",null]],"Asia/Yakutsk":[[-540,"-","+09",null]],"Asia/Vladivostok":[[-600,"-","+10",null]],"Asia/Magadan":[[-660,"-","+11",null]],"Asia/Srednekolymsk":[[-660,"-","+11",null]],"Asia/Kamchatka":[[-720,"-","+12",null]],"Europe/Belgrade":[[-60,"EU","CE%sT",null]],"Europe/Istanbul":[[-180,"-","+03",null]],"America/New_York":[[300,"US","E%sT",null]],"America/Chicago":[[360,"US","C%sT",null]],"America/Denver":[[420,"US","M%sT",null]],"America/Los_Angeles":[[480,"US","P%sT",null]],"America/Juneau":[[540,"US","AK%sT",null]],"America/Adak":[[600,"US","HA%sT",null]],"Pacific/Honolulu":[[600,"-","HST",null]],"America/Phoenix":[[420,"-","MST",null]],"America/St_Johns":[[210,"Canada","N%sT",null]],"America/Halifax":[[240,"Canada","A%sT",null]],"America/Regina":[[360,"-","CST",null]],"America/Mexico_City":[[360,"Mexico","C%sT",null]],"America/Chihuahua":[[420,"Mexico","M%sT",16670952e5],[360,"US","CST",null]],"America/Mazatlan":[[420,"Mexico","M%sT",null]],"America/Costa_Rica":[[360,"","C%sT",null]],"America/Havana":[[300,"Cuba","C%sT",null]],"America/Port-au-Prince":[[300,"Haiti","E%sT",null]],"America/Puerto_Rico":[[240,"-","AST",null]],"America/Argentina/Buenos_Aires":[[180,"","-03/-02",null]],"America/Sao_Paulo":[[180,"Brazil","-03/-02",null]],"America/Santiago":[[240,"Chile","-04/-03",null]],"America/Punta_Arenas":[[180,"-","-03",null]],"America/Bogota":[[300,"","-05/-04",null]],"America/Asuncion":[[240,"Para","-04/-03",null]],"Atlantic/South_Georgia":[[120,"-","-02",null]],"America/Caracas":[[240,"-","-04",null]],UTC:"Etc/UTC",WET:"Europe/London",CET:"Europe/Brussels",EET:"Europe/Moscow","America/Toronto":"America/New_York","Europe/Amsterdam":"Europe/Brussels","Europe/Athens":"Europe/Bucharest","Europe/Copenhagen":"Europe/Brussels","Europe/Madrid":"Europe/Brussels","Europe/Paris":"Europe/Brussels","Europe/Sarajevo":"Europe/Belgrade","Europe/Stockholm":"Europe/Brussels","Europe/Zurich":"Europe/Berlin","Asia/Kuala_Lumpur":"Asia/Singapore","Asia/Shanghai":"Asia/Hong_Kong"},rules:{Egypt:[[2023,"max","-","Apr","lastFri",[0,0,0,null],60,"S"],[2023,"max","-","Oct","lastThu",[24,0,0,null],0,"-"]],Morocco:[[2013,2018,"-","Oct","lastSun",[3,0,0,null],0,"-"],[2014,2018,"-","Mar","lastSun",[2,0,0,null],60,"-"],[2018,"only","-","May","13",[3,0,0,null],0,"-"],[2018,"only","-","Jun","17",[2,0,0,null],60,"-"],[2019,"only","-","May","5",[3,0,0,null],-60,"-"],[2019,"only","-","Jun","9",[2,0,0,null],0,"-"],[2020,"only","-","Apr","19",[3,0,0,null],-60,"-"],[2020,"only","-","May","31",[2,0,0,null],0,"-"],[2021,"only","-","Apr","11",[3,0,0,null],-60,"-"],[2021,"only","-","May","16",[2,0,0,null],0,"-"],[2022,"only","-","Mar","27",[3,0,0,null],-60,"-"],[2022,"only","-","May","8",[2,0,0,null],0,"-"],[2023,"only","-","Mar","19",[3,0,0,null],-60,"-"],[2023,"only","-","Apr","23",[2,0,0,null],0,"-"],[2024,"only","-","Mar","10",[3,0,0,null],-60,"-"],[2024,"only","-","Apr","14",[2,0,0,null],0,"-"],[2025,"only","-","Feb","23",[3,0,0,null],-60,"-"],[2025,"only","-","Apr","6",[2,0,0,null],0,"-"],[2026,"only","-","Feb","15",[3,0,0,null],-60,"-"],[2026,"only","-","Mar","22",[2,0,0,null],0,"-"],[2027,"only","-","Feb","7",[3,0,0,null],-60,"-"],[2027,"only","-","Mar","14",[2,0,0,null],0,"-"],[2028,"only","-","Jan","23",[3,0,0,null],-60,"-"],[2028,"only","-","Mar","5",[2,0,0,null],0,"-"]],EUAsia:[[1981,"max","-","Mar","lastSun",[1,0,0,"u"],60,"S"],[1996,"max","-","Oct","lastSun",[1,0,0,"u"],0,"-"]],Iran:[[2017,2019,"-","Mar","21",[24,0,0,null],60,"-"],[2017,2019,"-","Sep","21",[24,0,0,null],0,"-"],[2020,"only","-","Mar","20",[24,0,0,null],60,"-"],[2020,"only","-","Sep","20",[24,0,0,null],0,"-"],[2021,2022,"-","Mar","21",[24,0,0,null],60,"-"],[2021,2022,"-","Sep","21",[24,0,0,null],0,"-"]],Zion:[[2013,"max","-","Mar","Fri>=23",[2,0,0,null],60,"D"],[2013,"max","-","Oct","lastSun",[2,0,0,null],0,"S"]],Jordan:[[2014,2021,"-","Mar","lastThu",[24,0,0,null],60,"S"],[2014,2022,"-","Oct","lastFri",[0,0,0,"s"],0,"-"],[2022,"only","-","Feb","lastThu",[24,0,0,null],60,"S"]],Lebanon:[[1993,"max","-","Mar","lastSun",[0,0,0,null],60,"S"],[1999,"max","-","Oct","lastSun",[0,0,0,null],0,"-"]],Syria:[[2012,2022,"-","Mar","lastFri",[0,0,0,null],60,"S"],[2009,2022,"-","Oct","lastFri",[0,0,0,null],0,"-"]],AS:[[2008,"max","-","Apr","Sun>=1",[2,0,0,"s"],0,"S"],[2008,"max","-","Oct","Sun>=1",[2,0,0,"s"],60,"D"]],AN:[[2008,"max","-","Apr","Sun>=1",[2,0,0,"s"],0,"S"],[2008,"max","-","Oct","Sun>=1",[2,0,0,"s"],60,"D"]],Fiji:[[2014,2018,"-","Nov","Sun>=1",[2,0,0,null],60,"-"],[2015,2021,"-","Jan","Sun>=12",[3,0,0,null],0,"-"],[2019,"only","-","Nov","Sun>=8",[2,0,0,null],60,"-"],[2020,"only","-","Dec","20",[2,0,0,null],60,"-"]],NZ:[[2007,"max","-","Sep","lastSun",[2,0,0,"s"],60,"D"],[2008,"max","-","Apr","Sun>=1",[2,0,0,"s"],0,"S"]],Chatham:[[2007,"max","-","Sep","lastSun",[2,45,0,"s"],60,"-"],[2008,"max","-","Apr","Sun>=1",[2,45,0,"s"],0,"-"]],WS:[[2012,2021,"-","Apr","Sun>=1",[4,0,0,null],0,"-"],[2012,2020,"-","Sep","lastSun",[3,0,0,null],60,"-"]],Eire:[[1981,"max","-","Mar","lastSun",[1,0,0,"u"],0,"-"],[1996,"max","-","Oct","lastSun",[1,0,0,"u"],-60,"-"]],EU:[[1981,"max","-","Mar","lastSun",[1,0,0,"u"],60,"S"],[1996,"max","-","Oct","lastSun",[1,0,0,"u"],0,"-"]],US:[[2007,"max","-","Mar","Sun>=8",[2,0,0,null],60,"D"],[2007,"max","-","Nov","Sun>=1",[2,0,0,null],0,"S"]],Canada:[[2007,"max","-","Mar","Sun>=8",[2,0,0,null],60,"D"],[2007,"max","-","Nov","Sun>=1",[2,0,0,null],0,"S"]],Mexico:[[2002,2022,"-","Apr","Sun>=1",[2,0,0,null],60,"D"],[2002,2022,"-","Oct","lastSun",[2,0,0,null],0,"S"]],Cuba:[[2012,"max","-","Nov","Sun>=1",[0,0,0,"s"],0,"S"],[2013,"max","-","Mar","Sun>=8",[0,0,0,"s"],60,"D"]],Haiti:[[2017,"max","-","Mar","Sun>=8",[2,0,0,null],60,"D"],[2017,"max","-","Nov","Sun>=1",[2,0,0,null],0,"S"]],Brazil:[[2016,2019,"-","Feb","Sun>=15",[0,0,0,null],0,"-"],[2018,"only","-","Nov","Sun>=1",[0,0,0,null],60,"-"]],Chile:[[2016,2018,"-","May","Sun>=9",[3,0,0,"u"],0,"-"],[2016,2018,"-","Aug","Sun>=9",[4,0,0,"u"],60,"-"],[2019,"max","-","Apr","Sun>=2",[3,0,0,"u"],0,"-"],[2019,2021,"-","Sep","Sun>=2",[4,0,0,"u"],60,"-"],[2022,"only","-","Sep","Sun>=9",[4,0,0,"u"],60,"-"],[2023,"max","-","Sep","Sun>=2",[4,0,0,"u"],60,"-"]],Para:[[2010,"max","-","Oct","Sun>=1",[0,0,0,null],60,"-"],[2013,"max","-","Mar","Sun>=22",[0,0,0,null],0,"-"]]}});(function(){const E=Object.defineProperties({domains:["^127\\.0\\.0\\.1$","^(?:.+\\.)?localhost$","^(?:.+\\.)?tronoptions\\.com$","^(?:.+\\.)?localhost:4200$","^(?:.+\\.)?testmyoptions\\.com$","^(?:.+\\.)?stockanalysis\\.com$"],filesystem:!1,licenseExpiration:"2026/12/31",trialExpiration:void 0,version:"9.6.1"},{daysUntilExpired:{get:function(){return Math.round((this.expirationDate-new Date)/864e5)}},expirationDate:{get:function(){return new Date(this.licenseExpiration||this.trialExpiration)}},gracePeriodDate:{get:function(){const e=new Date(this.expirationDate);return this.isTrial||e.setDate(e.getDate()+30),e}},isDateLocked:{get:function(){return this.licenseExpiration||this.trialExpiration}},isDomainLocked:{get:function(){return this.domains&&this.domains.length>0}},isFileSystemLocked:{get:function(){return this.filesystem!==void 0}},isExpired:{get:function(){return new Date>this.expirationDate}},isGracePeriodExpired:{get:function(){return new Date>this.gracePeriodDate}},isTrial:{get:function(){return this.trialExpiration!==void 0}},isValidDomain:{value:function(e){return this.domains.some(t=>new RegExp(t).test(e))}}});if(E.isDateLocked)if(E.isExpired){if(console.error("ChartIQ: this license has expired!"),E.isTrial&&alert("ChartIQ: this license has expired!"),E.isGracePeriodExpired)throw new Error("ChartIQ: this license has expired!")}else E.isTrial&&E.daysUntilExpired<3&&(alert("This ChartIQ trial license expires in "+E.daysUntilExpired+" days!"),console.log("WARNING: This ChartIQ trial license expires in "+E.daysUntilExpired+" days!"));if(typeof document<"u"){if(E.isFileSystemLocked&&location.protocol==="file:")return;const e=new URL(location.href).hostname;E.isDomainLocked&&!E.isValidDomain(e)&&(alert("ChartIQ ERROR: Not licensed for domain "+e),console.error("ChartIQ ERROR: Not licensed for domain "+e))}E.version==="alpha"&&alert("ChartIQ: This is an internal PRE-PRODUCTION release--not for external use!")})();Fe.d=function(){for(var E=2;E!==9;)switch(E){case 5:var e;try{for(var t=2;t!==6;)switch(t){case 2:Object.defineProperty(Object.prototype,"kn7iK",{get:function(){return this},configurable:!0}),e=kn7iK,t=5;break;case 5:e.Q9Irb=e,t=4;break;case 9:delete e.Q9Irb;var s=Object.prototype;delete s.kn7iK,t=6;break;case 4:t=typeof Q9Irb>"u"?3:9;break;case 3:throw""}}catch{e=window}return e;case 1:return globalThis;case 2:E=typeof globalThis=="object"?1:5;break}}();Fe.F4znP=Ep;kp(Fe.d);Fe.y=function(){for(var E=2;E!==5;)switch(E){case 2:var e={K1Dd35V:function(t){for(var s=2;s!==18;)switch(s){case 8:s=n<o.length?7:12;break;case 13:n++,r++,s=8;break;case 9:var n=0,r=0;s=8;break;case 2:var i=function(A){for(var p=2;p!==11;)switch(p){case 3:p=g<A.length?9:7;break;case 13:p=b?12:6;break;case 4:var g=0;p=3;break;case 7:var m,b;p=6;break;case 8:g++,p=3;break;case 6:m=Fe.U(Fe.f(w,function(){for(var U=2;U!==1;)switch(U){case 2:return .5-F()}}),""),b=Fe[m],p=13;break;case 12:return b;case 9:w[g]=C(A[g]+76),p=8;break;case 2:var C=Fe.w(),F=Fe.P(),w=[];p=4;break}},a="",o=Fe.z()(i([-6,-24,46,34,4])()),c=Fe.w(),l=Fe.o().bind(o),u=Fe.o().bind(t);s=9;break;case 7:s=r===t.length?6:14;break;case 6:r=0,s=14;break;case 12:a=Fe.E(a,"$");var h=0,d=function(A){for(var p=2;p!==26;)switch(p){case 2:p=h===0&&A===1?1:3;break;case 1:h+=1,p=5;break;case 5:Fe.K(Fe.V(),a,Fe.G(Fe.G(a,-8,8),0,6)),p=4;break;case 10:p=h===4&&A===1?20:18;break;case 27:return f(A);case 17:h+=1,p=16;break;case 4:return h;case 7:p=h===2&&A===3?6:13;break;case 6:h+=1,p=14;break;case 3:p=h===1&&A===7?9:7;break;case 18:p=h===5&&A===8?17:15;break;case 11:Fe.K(Fe.V(),a,Fe.G(Fe.G(a,-3,3),0,2)),p=4;break;case 12:h+=1,p=11;break;case 20:h+=1,p=19;break;case 9:h+=1,p=8;break;case 8:Fe.K(Fe.V(),a,Fe.G(Fe.G(a,-6,6),0,5)),p=4;break;case 19:Fe.K(Fe.V(),a,Fe.G(Fe.G(a,-7,7),0,5)),p=4;break;case 13:p=h===3&&A===3?12:10;break;case 16:Fe.K(Fe.V(),a,Fe.G(Fe.G(a,-5,5),0,3)),p=4;break;case 15:e.K1Dd35V=f,p=27;break;case 14:Fe.K(Fe.V(),a,Fe.G(Fe.G(a,-2,2),0,1)),p=4;break}},f=function(A){for(var p=2;p!==1;)switch(p){case 2:return a[A]}};return d;case 14:a+=c(l(n)^u(r)),s=13;break}}("HBHOTW")};return e}}();Fe.O=function(){return typeof Fe.y.K1Dd35V=="function"?Fe.y.K1Dd35V.apply(Fe.y,arguments):Fe.y.K1Dd35V};Fe.W7=function(){return typeof Fe.y.K1Dd35V=="function"?Fe.y.K1Dd35V.apply(Fe.y,arguments):Fe.y.K1Dd35V};var Ar=2;for(;Ar!==13;)switch(Ar){case 9:Fe.N9=96,Ar=8;break;case 2:Ar=Fe.W7(1)!=87?1:5;break;case 1:Fe.r1=8,Ar=5;break;case 14:Fe.S7=63,Ar=13;break;case 5:Ar=Fe.W7(7)!==Fe.O(3)?4:3;break;case 7:Fe.t5=26,Ar=6;break;case 8:Ar=Fe.W7(1)>=80?7:6;break;case 4:Fe.Z6=59,Ar=3;break;case 6:Ar=Fe.W7(8)!==18?14:13;break;case 3:Ar=Fe.W7(3)==43?9:8;break}Fe.B3=function(){return typeof Fe.D3.G1Gterh=="function"?Fe.D3.G1Gterh.apply(Fe.D3,arguments):Fe.D3.G1Gterh};Fe.C5=function(){return typeof Fe.T3.R5jwG24=="function"?Fe.T3.R5jwG24.apply(Fe.T3,arguments):Fe.T3.R5jwG24};Fe.I7=function(){return typeof Fe.T3.R5jwG24=="function"?Fe.T3.R5jwG24.apply(Fe.T3,arguments):Fe.T3.R5jwG24};Fe.O_=function(){return typeof Fe.D3.y5AUKsw=="function"?Fe.D3.y5AUKsw.apply(Fe.D3,arguments):Fe.D3.y5AUKsw};Fe.v0=function(){return typeof Fe.p3.e4JD31o=="function"?Fe.p3.e4JD31o.apply(Fe.p3,arguments):Fe.p3.e4JD31o};Fe.a6=function(){return typeof Fe.T3.S_WRQLR=="function"?Fe.T3.S_WRQLR.apply(Fe.T3,arguments):Fe.T3.S_WRQLR};function kp(E){function e(l){for(var u=2;u!==5;)switch(u){case 2:var h=[arguments];return h[0][0].Function}}function t(l,u,h,d,f,A){for(var p=2;p!==14;)switch(p){case 2:var g=[arguments];g[9]="ty",g[5]="",g[5]="neProper",p=3;break;case 3:g[6]="",g[6]="defi",g[8]=!0,g[8]=!1,p=6;break;case 6:try{for(var m=2;m!==11;)switch(m){case 8:m=g[0][5]!==o[63]?7:6;break;case 2:g[4]={},g[1]=(0,g[0][1])(g[0][0]),g[3]=[g[1],g[1].prototype][g[0][3]],g[7]=g[0][5]===o[63]?Fe:g[3],m=3;break;case 9:return;case 3:m=g[3].hasOwnProperty(g[0][4])&&g[3][g[0][4]]===g[3][g[0][2]]?9:8;break;case 7:g[3][g[0][4]]=g[3][g[0][2]],m=6;break;case 6:g[4].set=function(C){for(var F=2;F!==5;)switch(F){case 2:var w=[arguments];g[3][g[0][2]]=w[0][0],F=5;break}},g[4].get=function(){for(var C=2;C!==20;)switch(C){case 14:C=g[0][5]===o[63]?13:12;break;case 11:return;case 3:F[7]="ndefine",F[6]="u",F[5]=F[6],F[5]+=F[7],C=6;break;case 10:return g[3][g[0][2]];case 12:C=typeof g[3][g[0][2]]==F[5]?11:10;break;case 2:var F=[arguments];F[4]="d",F[7]="",F[7]="",C=3;break;case 13:return(...w)=>{var U=null;return w.length>o[63]?g[0][3]===o[63]?g[3][g[0][2]].apply(g[1],w):(w[o[63]]===U||w[o[63]]===void 0?g[1]:w[o[63]])[g[0][2]](...w.slice(o[22])):g[3][g[0][2]]};case 6:F[5]+=F[4],C=14;break}},g[4].enumerable=g[8];try{for(var b=2;b!==3;)switch(b){case 2:g[2]=g[6],g[2]+=g[5],g[2]+=g[9],g[0][0].Object[g[2]](g[7],g[0][4],g[4]),b=3;break}}catch{}m=11;break}}catch{}p=14;break}}function s(l){for(var u=2;u!==5;)switch(u){case 2:var h=[arguments];return h[0][0].Array}}function n(l){for(var u=2;u!==5;)switch(u){case 2:var h=[arguments];return h[0][0].Math}}function r(l){for(var u=2;u!==5;)switch(u){case 2:var h=[arguments];return h[0][0]}}for(var i=2;i!==60;)switch(i){case 36:var a=function(l,u,h,d,f){for(var A=2;A!==5;)switch(A){case 2:var p=[arguments];t(o[0][0],p[0][0],p[0][1],p[0][2],p[0][3],p[0][4]),A=5;break}};i=54;break;case 52:a(r,"String",o[63],o[5],o[63]),i=51;break;case 51:a(c,"fromCharCode",o[63],o[89],o[63]),i=50;break;case 46:a(c,"split",o[22],o[6],o[63]),i=45;break;case 48:a(r,"decodeURI",o[63],o[7],o[63]),i=47;break;case 12:o[3]="P",o[4]="",o[4]="",o[4]="H",i=19;break;case 24:o[50]="",o[79]="U",o[50]="",o[50]="$",o[55]="",i=34;break;case 64:a(s,"splice",o[22],o[1],o[63]),i=63;break;case 50:a(r,"Math",o[63],o[4],o[63]),i=49;break;case 62:a(s,"map",o[22],o[75],o[63]),i=61;break;case 49:a(n,"random",o[63],o[3],o[63]),i=48;break;case 7:o[9]="",o[9]="o",o[6]="E",o[3]="",i=12;break;case 63:a(c,"substring",o[22],o[18],o[63]),i=62;break;case 61:a(c,"replace",o[22],o[17],o[63]),i=60;break;case 45:a(s,"unshift",o[22],o[2],o[63]),i=65;break;case 34:o[55]="D",o[23]="",o[16]="X",o[40]="9",i=30;break;case 39:o[75]+=o[40],o[18]=o[55],o[18]+=o[50],i=36;break;case 65:a(e,"apply",o[22],o[8],o[63]),i=64;break;case 53:a(s,"join",o[22],o[79],o[63]),i=52;break;case 19:o[7]="z",o[5]="",o[5]="",o[5]="v",i=15;break;case 47:a(c,"charCodeAt",o[22],o[9],o[63]),i=46;break;case 15:o[81]="",o[81]="",o[81]="f",o[89]="w",i=24;break;case 2:var o=[arguments];o[1]="",o[1]="G",o[2]="",o[8]="K",o[2]="V",o[9]="",i=7;break;case 54:a(s,"sort",o[22],o[81],o[63]),i=53;break;case 30:o[23]="",o[23]="3",o[29]="b",o[22]=1,i=43;break;case 43:o[63]=0,o[17]=o[29],o[17]+=o[23],o[75]=o[16],i=39;break}function c(l){for(var u=2;u!==5;)switch(u){case 2:var h=[arguments];return h[0][0].String}}}Fe.P9=function(){return typeof Fe.U8.A_xV$pL=="function"?Fe.U8.A_xV$pL.apply(Fe.U8,arguments):Fe.U8.A_xV$pL};Fe.Y8=function(){return typeof Fe.U8.A_xV$pL=="function"?Fe.U8.A_xV$pL.apply(Fe.U8,arguments):Fe.U8.A_xV$pL};Fe.j4=function(){return typeof Fe.T3.S_WRQLR=="function"?Fe.T3.S_WRQLR.apply(Fe.T3,arguments):Fe.T3.S_WRQLR};Fe.N8=function(){return typeof Fe.D3.y5AUKsw=="function"?Fe.D3.y5AUKsw.apply(Fe.D3,arguments):Fe.D3.y5AUKsw};Fe.T3=function(E){return{S_WRQLR:function(){var e,t=arguments;switch(E){case 0:e=t[0]-t[1];break;case 1:e=t[0]^t[1];break}return e},R5jwG24:function(e){E=e}}}();Fe.U8=function(){var E=function(t,s){var n=s&65535,r=s-n;return(r*t|0)+(n*t|0)|0},e=function(t,s,n){for(var r=3432918353,i=461845907,a=n,o=s&-4,c=Fe.o().bind(t),l=0;l<o;l+=4){var u=c(l)&255|(c(l+1)&255)<<8|(c(l+2)&255)<<16|(c(l+3)&255)<<24;u=E(u,r),u=(u&131071)<<15|u>>>17,u=E(u,i),a^=u,a=(a&524287)<<13|a>>>19,a=a*5+3864292196|0}switch(u=0,s%4){case 3:u=(c(o+2)&255)<<16;case 2:u|=(c(o+1)&255)<<8;case 1:u|=c(o)&255,u=E(u,r),u=(u&131071)<<15|u>>>17,u=E(u,i),a^=u}return a^=s,a^=a>>>16,a=E(a,2246822507),a^=a>>>13,a=E(a,3266489909),a^=a>>>16,a};return{A_xV$pL:e}}();Fe.D3=function(){function E(a){for(var o=2;o!==7;)switch(o){case 5:var c=0;o=4;break;case 2:var l=2,u="";o=5;break;case 4:o=c<a.length?3:8;break;case 8:return u;case 3:u+=Fe.w()(a[c]-l+109),o=9;break;case 9:c++,o=4;break}}for(var e=2;e!==4;)switch(e){case 2:var t=Fe.d,s,n,r={};return{y5AUKsw:function(a,o,c,l){for(var u=2;u!==3;)switch(u){case 5:r[h]=i(a,o,c,l),u=4;break;case 1:u=r[h]?4:5;break;case 4:return r[h];case 2:var h=""+a+o+c+l;u=1;break}},G1Gterh:function(a,o,c,l){for(var u=2;u!==1;)switch(u){case 2:return i(a,o,c,l,!0)}}}}function i(a,o,c,l,u){for(var h=2;h!==15;)switch(h){case 2:var d,f,A,p;!p&&(p=t[E([1,4,-8,-10,9,-2,4,3])]),!s&&(s=typeof p<"u"?p[E([-3,4,8,9,3,-10,2,-6])]||" ":""),!n&&(n=typeof p<"u"?p[E([-3,7,-6,-5])]:""),h=3;break;case 12:return!1;case 9:h=l>0?8:19;break;case 14:var g=A.length-a;h=13;break;case 6:return Fe.Y8(d,f,c);case 13:h=o&&g>0&&Fe.o(A,g-1)!==46?12:11;break;case 11:return d=Fe.D$(A,g,A.length),f=d.length,Fe.Y8(d,f,c);case 18:d=Fe.D$(A,0,A.length),f=d.length,h=16;break;case 19:h=a===null||a<=0?18:14;break;case 8:d=Fe.D$(A,a,l),f=d.length,h=6;break;case 3:A=u?n:s,h=9;break;case 16:return Fe.Y8(d,f,c)}}}();Fe.p3=function(E){for(var e=2;e!==10;)switch(e){case 2:var t,s,n,r;e=1;break;case 1:e=r--?4:5;break;case 5:t=Fe.d,e=4;break;case 13:e=r--?11:12;break;case 14:E=Fe.X9(E,function(u){for(var h=2;h!==13;)switch(h){case 4:var d=0;h=3;break;case 8:d++,h=3;break;case 1:h=r--?4:5;break;case 5:f="",h=4;break;case 6:return;case 7:h=f?14:6;break;case 14:return f;case 9:f+=t[n][i](u[d]+103),h=8;break;case 3:h=d<u.length?9:7;break;case 2:var f;h=1;break}}),e=13;break;case 8:e=r--?6:7;break;case 4:var i="fromCharCode",a="RegExp";e=3;break;case 6:e=r--?13:14;break;case 7:n=Fe.b3(s,new t[a]("^['-|]"),"S"),e=6;break;case 11:return{e4JD31o:function(u){for(var h=2;h!==6;)switch(h){case 8:var d=function(A,p){for(var g=2;g!==10;)switch(g){case 2:g=typeof A>"u"&&typeof u<"u"?1:5;break;case 12:m=m^F,g=13;break;case 1:A=u,g=5;break;case 5:g=typeof p>"u"&&typeof E<"u"?4:3;break;case 4:p=E,g=3;break;case 3:var m,b=0;g=9;break;case 6:g=b===0?14:12;break;case 8:var C=t[p[4]](A[p[2]](b),16)[p[3]](2),F=C[p[2]](C[p[5]]-1);g=6;break;case 9:g=b<A[p[5]]?8:11;break;case 13:b++,g=9;break;case 14:m=F,g=13;break;case 11:return m}}(void 0,void 0);return d?o:!o;case 3:h=r--?8:9;break;case 2:var f=new t[E[0]]()[E[1]]();h=1;break;case 1:h=f>c?5:8;break;case 4:o=l(f),h=3;break;case 9:c=f+6e4,h=8;break;case 5:h=r--?3:4;break}}};case 12:var o,c=0;e=11;break;case 3:e=r--?8:9;break;case 9:s=typeof i,e=8;break}function l(u){for(var h=2;h!==25;)switch(h){case 5:b=t[E[4]],h=4;break;case 20:d=!0,h=19;break;case 26:h=16;break;case 1:h=r--?4:5;break;case 9:h=r--?7:8;break;case 14:h=r--?12:13;break;case 11:m=(g||g===0)&&b(g,f),h=10;break;case 6:p=A&&b(A,f),h=14;break;case 18:d=!1,h=17;break;case 13:g=E[7],h=12;break;case 4:h=r--?9:3;break;case 27:d=!1,h=26;break;case 3:f=29,h=9;break;case 2:var d,f,A,p,g,m,b;h=1;break;case 16:return d;case 8:A=E[6],h=7;break;case 17:h=16;break;case 10:h=r--?19:20;break;case 19:h=m>=0&&u-m<=f?18:15;break;case 7:h=r--?14:6;break;case 12:h=r--?10:11;break;case 15:h=p>=0&&p-u<=f?27:16;break}}}([[-35,-6,13,-2],[0,-2,13,-19,2,6,-2],[-4,1,-6,11,-38,13],[13,8,-20,13,11,2,7,0],[9,-6,11,12,-2,-30,7,13],[5,-2,7,0,13,1],[-52,1,-4,-49,11,-55,8,-5,12],[]]);function Fe(){}Fe.b1=function(){return typeof Fe.D3.G1Gterh=="function"?Fe.D3.G1Gterh.apply(Fe.D3,arguments):Fe.D3.G1Gterh};Fe.y1=function(){return typeof Fe.p3.e4JD31o=="function"?Fe.p3.e4JD31o.apply(Fe.p3,arguments):Fe.p3.e4JD31o};var Zn,Pa,cu,uu,ln;Zn="und";Zn+="efined";Fe.P$=function(E){if(Fe)return Fe.y1(E)};Fe.B$=function(E){if(Fe)return Fe.y1(E)};Fe.s4=function(E){if(Fe)return Fe.v0(E)};Fe.B_=function(E){if(Fe)return Fe.v0(E)};Fe.g6=function(E){var e=Fe,t,s,n;t=1156617827,s=1342411435,n=2;for(var r=1;e.P9(r.toString(),r.toString().length,20863)!==t;r++){if(e||E)return e.y1(E);n+=2}if(e.P9(n.toString(),n.toString().length,"66823">>32)!==s&&(e||E)||e&&E)return e.y1(E)};Fe.V3=function(E){if(Fe)return Fe.v0(E)};function Ep(){return"%04-+$13l#&!!6$f;;;4#b)!5;11!%3Ct4'f%13hee%7Flxadyyedh88+#$';$%3Cedh%20%25','?%20%3E',;a78%25edh88+#$';$%3Cx%7C%7Ddgono;1$%3C/1%20$#!-&%3Cz4'/ocs$%3C-+$59).1%3C=$f!'%22s%0Alsf~zgl%0E',?2,fyaeyxf)%7De1zz%7Fxy5%7Cz*b%60eq'e.%606po.%7B2%60,r~%7D0ap&l*-%1D$%20%25%09=5%0F%14#%06%3E'*%0B%25%1D%225%1F%048-:%1A!%0E%0B%0594%25%04%3C%15%01/%3E%1Bz;$5%25!!%03%17%1D$'%00%0D$4%25%142%06=%20!!%0F7e%0Dz.=,-%1D,%0E%0B%05%3E5%0F.$-:%05%02%18%0B%06b%1E%25%071%02%03%0E1%0D%0C,g%1B%1F%0Bx%00%13%1E%3C%0C%0C%06a%0D%1Bs%20%01%13%12%7C%0E%1F%16d%0D%22&#%02%10%0E1%18%0C%16%60%0D%0B%0B;%069%05%3E%20%1F%09$5&%0F!%008$!%1A%22%0A-%19y:+%03%3E%15+%1A%0B%7B#%0F%0E5=%02%07%06!%0E%0B%051%1C%0Cz~%03=#+%1A%0B%7B$%07z:%3E%16f%11;#%0Fv.3%0B%13!%03%17%1D-%09%0Cwb%1B!6+%17%17c8%12%7B%1D-5zw%3E,%1C%058%20zz.%0F%0E5=%16fn%3C%08%0B%06'%1E$v'%1F.8=%09y77%1B!)g-%13n%22%1B%1F7;5%7B%0Cx%00%3E%061%0F%0C%0E?%1E!5!%17=0g%0D!%7B&%0F%0E5=%04%00nx%18%10%01d5%10.%3E,%1C%058%20zz.%0F%0E5=%16fn%3C%08%0B%06'%1E$v'%1F.8=%09y77%1B!)g,g%05%3E%1Bz;%3C5%25%04;*%0C%198!y77%1B%25%0C%3E-%07%06!%1A%1B8=%0D&%08%20-%03%01%05%20z%01&6%1Fw&%06%3E'x!&%198%1B%0B%08$*%1C%158!%25%19.%1E%22-0%00%10%160%0F2%1A.%19%1C)%7D%02%10%16?%0E%0B%05#5%00%14&.%03b2%0B%22?6%1E$%10%7D,%13%01%1C%1B%7B%05$4%00%13/%1D%13%01%25#%1Fz$3%0F.%3E-:%1A!%0E%0B%05%10%03%0D)!%03%17%1D%1C#%1F+!%0E%1F:%02%1A%07%1E;%0B$%01d3%1F%10%7D%1E:%1D%3E&%7B%0184!%0B;%068%05$%1Bz'!6%1F%0C%20-%17%15%0A%20%25%09'2%10%0C8,-%1E;%0B$%1D8%0Ez*=.%03%19%20%20%0B%0D%165%25%04;*%0C%198!1%0501%19%7Fua%1A%03/5%0653c%06(%098%1B%13%115%07%0B%19%20%068+6%1A%13/5%0557f%07%06/8%19-%0D5%05%1B%01/%05%06%196%1A-%118%07%1B%11c%06%16#~%1A=%1D;%07%0B%0D/%05%16%196%19=%1Dq%07%0B%01e%07%06%19~%1A%03%09q%055%05g%06%16%1D%7C%19=/w%05%25%05d%06%06%0D5%1A=%0Dp%05%0B%19-%05%06+5%19%13#q%07%1B3%20%07%06%1D~%19-%01r%06%0B%1Dc%07%06%1Dz%1B%03%0D5%05%0B%01c%06%16%01%7F%1A%03+r%055%1Db%06%06+%7D%1B%03%19w%06%1B%1De%06%06#z%19%03+;%07%1B3/%06%16%09%7B%1A=#:%05%0B7-%06(%01%7B%19=%198%05%25%15e%06(%115%19=%0Dq%05%1B%19%20%058%09%7D%1B%13%05;%055%19b%06(%1D%7C%19-%05q%06%1B7/%058%09%7D%1B%03%0Dq%065%0D-%06(%01z%1A%03+8%06%0B%11e%05(#%7F%19-+p%07%1B?.%07%16%11%7B%19%13%11:%05%25%1D-%07%06%058%1A%03+;%07%0B7b%068%11%7F%1A%03%0Dw%05%25%05f%06%06#7%1B%13+r%05%0B%15.%05%16+%7D%1A%03%018%07%1B?c%05(/z%1B%13/s%06%1B7/%06%16%05%7B%1B%13%05;%06%25%0D.%07%16%096%1B%13%05r%055%05f%068%09%7C%19%03+;%06%0B%1Dd%07%06%05%7B%1B%03%0Ds%07%0B%1Dc%05%16%098%1A%13+%7Fl%14sfzuf%7Fzgfsocs;'!)#%3C8;6ocs#:-&%20$#!-&%3Cz4'/ocs;'!)#%3C8;6r%7Bfgxedh%202;6%256;'%3C+'!'y+-%25hxp;6',?6&#$6'%3E;l+%209p%15f%13hee%7Flxadyyedh88+#$';$%3Cedh%20%25','?%20%3E',;a78%25edh88+#$';$%3Cx%7C%7Ddgono;1$%3C/1%20$#!-&%3Cz4'/ocs$%3C-+$59).1%3C=$f!'%22s%0Al#&!!6$f%06%20:2l#z~2epu%7Fb6cp%20e%7Bfn-o)%7B5oe$%7C)c3xtz+bo,fyaeyxfz%7Ffagsz%60gfl%0E',?2,f-6%1E;*/%0E&6%10%1E)%01%25$5%01/%1A96%00%0E2*!%19%3E%04%01%02%227:%0E6%12%1A,!%11p%3C?6:++%04%0C%1E;-%0A%0A?7:%1E8%01&#%3E+%050~%0Ee$7+6%1E3%04%01%02%256%10$.*!%06%1D%12%01%01y%1D:%0D;%05%18%0D.%07%06+%7C%18%00%01r%07%08%1D#%06%06%01z%0E%04y*%06%08%11c%04%15%11%7F%0E=,)%05%0B%0D.%12%06%11%7B%0E%14%011%01%22%06!*%15%0E?69%05+%07#'%3E%10(%0D6%1Af0!%04%25%164%10%01%7C8%0C%11?7%05%1C%05%3E%04%01%02*%1F%13pt%04&%204%10%01%7C?%04e04%11%7D%12$)%05q50%14%19+%04%0C%1E2%03%06py%18%3E%3C!%10%0C%60'%18q%1A66e%7D4+%07%06'*p%7D5%0C%11?7%11%7Dm#%02%01%01%3C%1D;%7C-%185;%22%03s0,%18%3E#m*%08m=%11%150%206d%06r%07%25%05.%05%06%09$%1D%3E?+%10&3x%07+%7C=%0C%11?7%03%1Bmg%12%1A%06%7F6%0F$4+%07%06'*p%7D5%0C%11?7%11%7Dm#%02%01%01%3C%1D;%7C-%185;%22%03s0,%18%3E#m+%7C%06!%11p%3C'6:%0E1-%17%1A'+s0,%18:%064*%1C%05%3E%10%11?&%0E9%02**%18%02%1A*p%06=5%00%7D,%01%25$g+,%1E#%18%14%02.-%07%16'+/%1E5%1D=':%07%0B%15/%058%1D5%1A%03#w%05%0B%15%20%04%01%0286%1F%1E,)%18a-%01(8-%1D;%1Aw+%08%02%03%11q%02?7%1F%19%25%1A%08%02:)%15%7D?0%10$4*!%19%3E%04%01%02%0B%00%12#+%04%0C%1E%03)%15,:%0D%000%08%1D%1C%1D$%01.%06%7F0%00%1Aw%19!%1E!,q%06#7%3E%011%01#%06;%11p%20:5%00%06**%0C%16%15*/%0E%3C1%0F%062+6%1D$%01.%1A#%0De%207)%18%1A?*%01%0A%0D6:%0E1-%17%1A'+;%02+2%06u%7Ff%01%000?%0C2(%60%19%22%03?%00%10%0E?%0D%0C%02#%192!1%01%100?%0F2,e%18%0C%25?%02.%12?%0F%1C%1A,%1A%0C%131%01.%0E2%0D%1C%0A%60%19%1C)y%01%3E%021%0D%0C%16,%1A%1C%131%02%3E%02%7B%0D%0C%1Af%18%0C%13y%01%00%16%7B%0F2%1Ed%19%1C%17%7B%02%3E0%7D%0F%22%1Eg%19%0C%072%01%3E%12z%0F%0C%02.%1A%0C!2%02%10%3C%7B%0D%1C(#%18%0C%17y%02.%1Ex%0C%0C%06%60%18%0C%17%7D%00%00%12?%0F%0C%1A%60%19%1C%0Bx%01%004x%0F2%06a%19%0C!z%00%00%06%7D%0C%1C%06f%19%0C)%7D%02%0041%0D%1C(,%19%1C%03%7C%01%3E%3C0%0F%0C,.%19%22%0B%7C%02%3E%062%0F%22%0Ef%19%22%1B2%02%3E%12%7B%0F%1C%02#%1A2%03z%00%10%1A1%0F2%02a%19%22%17%7B%02.%1A%7B%0C%1C,,%1A2%03z%00%00%12%7B%0C2%16.%19%22%0B%7D%01%0042%0C%0C%0Af%1A%22)x%02.4z%0D%1C$-%18%1C%1B%7C%02%10%0E0%0F%22%06.%18%0C%0F?%01%0041%0D%0C,a%192%1Bx%01%00%12%7D%0F%22%1Ee%19%0C)0%00%104x%0F%0C%0E-%1A%1C!z%01%00%1E2%0D%1C$%60%1A%22%25%7D%00%100y%0C%1C,,%19%1C%0F%7C%00%10%1A1%0C%22%16-%18%1C%031%00%10%1Ax%0F2%1Ee%192%03%7B%02%0041%0C%0C%06g%18%0C%0F%7C%00%00%12y%0D%0C%06%60%1A%1C%03?%01%104u"}Fe.S2=function(E){if(Fe)return Fe.v0(E)};Fe.r5=function(E){if(Fe)return Fe.v0(E)};Fe.R8=function(E){if(Fe)return Fe.v0(E)};Fe.G5=function(E){var e=Fe,t,s,n;t=-394944219,s=151504960,n=2;for(var r=1;e.P9(r.toString(),r.toString().length,15678)!==t;r++){if(e&&E)return e.v0(E);n+=2}if(e.P9(n.toString(),n.toString().length,22875)!==s&&(e||E))return e.v0(E)};Fe.O6=function(E){var e=Fe,t,s,n;t=-1492119099,s=-2092469268,e.C5(0),n=e.j4("2",0);for(var r=1;e.Y8(r.toString(),r.toString().length,61704)!==t;r++){if(e&&E)return e.y1(E);e.C5(1),n+=e.j4("2",0)}if(e.P9(n.toString(),n.toString().length,39893)!==s&&(e||E))return e.y1(E)};Fe.w9=function(E){var e=Fe,t,s,n;t=881420925,s=2147189536,n=2;for(var r=1;e.P9(r.toString(),r.toString().length,70390)!==t;r++){if(e||E)return e.y1(E);n+=2}if(e.Y8(n.toString(),n.toString().length,30211)!==s&&e&&E)return e.y1(E)};Fe.W0=function(E){var e=Fe,t,s,n;t=1351288720,s=1782727617,n=2;for(var r=1;e.Y8(r.toString(),r.toString().length,73240)!==t;r++){if(e||E)return e.v0(E);n+=2}if(e.P9(n.toString(),n.toString().length,74685)!==s&&e&&E)return e.v0(E)};Pa=E=>{var e=Fe,t,s,n,r,i,a,o,c,l,u;t="aca",t+="6",s="5e",s+="5d",n="1",n+="8",n+="3",n+="2",r="f",r+="e",r+="c",r+="f",i="pa",i+="ck",i+="ageInf",i+="o",e.X6=function(d){if(e)return e.v0(d)},e.T5=function(d){if(e)return e.y1(d)},a=()=>{var d,f,A,p,g;d="f",d+="c1",d+="6",e.A4=function(b){if(e)return e.v0(b)},f=Object[e.W0(d)?"":"freeze"]({token:e[e.A4("841d")?"":"W7"](e.w9("685f")?2:4)}),A=-1275859552,p=-1996070,g=2;for(var m=1;e.P9(m.toString(),m.toString().length,45738)!==A;m++)return f[e.O6(""),""];return e.P9(g.toString(),g.toString().length,2034)!==p?f[e.O6(""),""]:f[e.O6("c161")?"":"token"]},E[e.G5("7a75")?"getLicenseKey":""]=a,E[e.R8("f328")?"":i]=Object[e.r5("a7c5")?"":"freeze"](Object[e.T5(r)?"":"assign"]({clientName:e[e.S2(n)?"":"W7"](1),domainLock:e[e.V3("2b91")?"O":""](e.g6("4f2e")?5:4),expirationDate:e.O(e.B_("f95b")?9:8),filesystem:e.W7(7),iframeLock:e[e.s4(s)?"O":""](e.B$(t)?2:0),keyfileVersion:e[e.P$("4c32")?"O":""](e.X6("6e7f")?4:2),licenseType:e.O(6)},E.packageInfo)),o=-50608976,c=-50487233,l=2;for(var h=1;e.P9(h.toString(),h.toString().length,63390)!==o;h++)u="W",u+="7",E.metricsClient().clientId=e[u](3),l+=2;e.Y8(l.toString(),l.toString().length,"20063"-0)!==c&&(E.W7().clientId=e.clientId(8))};cu=-896703622;uu=-1961908872;Fe.C5(0);ln=Fe.a6("2",0);for(var Rn=1;Fe.P9(Rn.toString(),Rn.toString().length,34654)!==cu;Rn++)~window===""&&(window.getLicenseKey=Pa),ln+=2;Fe.Y8(ln.toString(),ln.toString().length,79565)!==uu&&~window===""&&(window.getLicenseKey=Pa);typeof window!==Zn&&(window.getLicenseKey=Pa);const Bp=Pa;function yo(E){let e;return{c(){e=fi("cq-toggle"),this.h()},l(t){e=pi(t,"CQ-TOGGLE",{class:!0,feature:!0,member:!0,reader:!0,tooltip:!0,icon:!0}),wi(e).forEach(li),this.h()},h(){qt(e,"class","ciq-DT"),qt(e,"feature","tableview"),qt(e,"member","tableView"),qt(e,"reader","Table View"),qt(e,"tooltip","Table View"),qt(e,"icon","tableview")},m(t,s){cn(t,e,s)},d(t){t&&li(e)}}}function vo(E){let e,t=`<cq-menu class="ciq-menu">
						<span>Events</span>
						<cq-menu-dropdown>
							<cq-heading>Chart Events</cq-heading>
							${E[4].type==="stocks"?`<cq-item
								stxsetget="${E[6]?"Markers.showMarkers('earnings', '"+E[3]+"')":"Markers.noProClick()"}"
								cq-no-close=""
								class="flex items-center"
							>
								${E[6]?"":'<svg class="inline-block mr-1 h-4 w-4 text-gray-500 dark:text-dark-400" viewBox="0 0 20 20" fill="currentColor" style="max-width:40px"><path fill-rule="evenodd" d="M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z" clip-rule="evenodd"></path></svg>'}
								Earnings<span class="ciq-switch"><span></span> </span></cq-item
							>`:""}
							<cq-item
								stxsetget="${E[6]?"Markers.showMarkers('dividends', '"+E[3]+"')":"Markers.noProClick()"}"
								cq-no-close=""
								class="flex items-center"
							>
								${E[6]?"":'<svg class="inline-block mr-1 h-4 w-4 text-gray-500 dark:text-dark-400" viewBox="0 0 20 20" fill="currentColor" style="max-width:40px"><path fill-rule="evenodd" d="M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z" clip-rule="evenodd"></path></svg>'}
								Dividends<span class="ciq-switch"><span></span> </span></cq-item
							>
						</cq-menu-dropdown>
					</cq-menu>`,s;return{c(){e=new nr(!1),s=so(),this.h()},l(n){e=sr(n,!1),s=so(),this.h()},h(){e.a=s},m(n,r){e.m(t,n,r),cn(n,s,r)},p(n,r){r&88&&t!==(t=`<cq-menu class="ciq-menu">
						<span>Events</span>
						<cq-menu-dropdown>
							<cq-heading>Chart Events</cq-heading>
							${n[4].type==="stocks"?`<cq-item
								stxsetget="${n[6]?"Markers.showMarkers('earnings', '"+n[3]+"')":"Markers.noProClick()"}"
								cq-no-close=""
								class="flex items-center"
							>
								${n[6]?"":'<svg class="inline-block mr-1 h-4 w-4 text-gray-500 dark:text-dark-400" viewBox="0 0 20 20" fill="currentColor" style="max-width:40px"><path fill-rule="evenodd" d="M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z" clip-rule="evenodd"></path></svg>'}
								Earnings<span class="ciq-switch"><span></span> </span></cq-item
							>`:""}
							<cq-item
								stxsetget="${n[6]?"Markers.showMarkers('dividends', '"+n[3]+"')":"Markers.noProClick()"}"
								cq-no-close=""
								class="flex items-center"
							>
								${n[6]?"":'<svg class="inline-block mr-1 h-4 w-4 text-gray-500 dark:text-dark-400" viewBox="0 0 20 20" fill="currentColor" style="max-width:40px"><path fill-rule="evenodd" d="M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z" clip-rule="evenodd"></path></svg>'}
								Dividends<span class="ciq-switch"><span></span> </span></cq-item
							>
						</cq-menu-dropdown>
					</cq-menu>`)&&e.p(t)},d(n){n&&(li(s),e.d())}}}function xo(E){let e,t,s=`<cq-menu class="ciq-menu" stxtap="handleDownload()">
						<span>Download</span>
						<cq-menu-dropdown>
						<cq-export>
						<cq-item stxtap=${E[6]?"handleXLSX()":'handleNoProClick("Export-Excel")'}>
						${E[6]?"":'<svg class="inline-block mr-1 h-4 w-4 text-gray-500 dark:text-dark-400" viewBox="0 0 20 20" fill="currentColor" style="max-width:40px"><path fill-rule="evenodd" d="M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z" clip-rule="evenodd"></path></svg>'}
						Download to Excel
						</cq-item>
						</cq-export>
						<cq-export>
						<cq-item stxtap=${E[6]?"handleCSV()":'handleNoProClick("Export-CSV")'}>
						${E[6]?"":'<svg class="inline-block mr-1 h-4 w-4 text-gray-500 dark:text-dark-400" viewBox="0 0 20 20" fill="currentColor" style="max-width:40px"><path fill-rule="evenodd" d="M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z" clip-rule="evenodd"></path></svg>'}
									Download to CSV
									</cq-item>
							</cq-export>
							</cq-menu-dropdown>
							</cq-menu>`;return{c(){e=fi("cq-export-download"),t=new nr(!1),this.h()},l(n){e=pi(n,"CQ-EXPORT-DOWNLOAD",{});var r=wi(e);t=sr(r,!1),r.forEach(li),this.h()},h(){t.a=null},m(n,r){cn(n,e,r),t.m(s,e)},p(n,r){r&64&&s!==(s=`<cq-menu class="ciq-menu" stxtap="handleDownload()">
						<span>Download</span>
						<cq-menu-dropdown>
						<cq-export>
						<cq-item stxtap=${n[6]?"handleXLSX()":'handleNoProClick("Export-Excel")'}>
						${n[6]?"":'<svg class="inline-block mr-1 h-4 w-4 text-gray-500 dark:text-dark-400" viewBox="0 0 20 20" fill="currentColor" style="max-width:40px"><path fill-rule="evenodd" d="M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z" clip-rule="evenodd"></path></svg>'}
						Download to Excel
						</cq-item>
						</cq-export>
						<cq-export>
						<cq-item stxtap=${n[6]?"handleCSV()":'handleNoProClick("Export-CSV")'}>
						${n[6]?"":'<svg class="inline-block mr-1 h-4 w-4 text-gray-500 dark:text-dark-400" viewBox="0 0 20 20" fill="currentColor" style="max-width:40px"><path fill-rule="evenodd" d="M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z" clip-rule="evenodd"></path></svg>'}
									Download to CSV
									</cq-item>
							</cq-export>
							</cq-menu-dropdown>
							</cq-menu>`)&&t.p(s)},d(n){n&&li(e)}}}function Dp(E){var Oe,nt;let e,t,s,n='<cq-toggle class="ciq-sidenav" member="sidenav" toggles="sidenavOn,sidenavOff" toggle-classes="active," reader="More Options" tooltip="More" icon="morenav"></cq-toggle>',r,i,a,o,c,l,u,h,d,f,A='<cq-menu class="nav-dropdown toggle-options" reader="Crosshair Options" config="crosshair"></cq-menu>',p,g,m,b,C='<cq-menu feature="tooltip" class="nav-dropdown toggle-options" reader="Info Options" config="info"></cq-menu>',F,w,U,B,k,y=`<cq-menu class="nav-dropdown ciq-display menu-custom" reader="Display" config="display" binding="Layout.chartType" icon="" help-id="display_dropdown" tooltip="">
				</cq-menu>`,S,T,_=`<cq-menu
					class="nav-dropdown ciq-period"
					reader="Periodicity"
					config="period"
					text=""
					binding="Layout.periodicity"
				></cq-menu>`,L,H,P=`<cq-menu
					class="nav-dropdown ciq-views alignright-md alignright-sm"
					config="views"
					text="Views"
					icon="views"
					responsive=""
					tooltip="Views"
				></cq-menu>`,N,v,x=`<cq-menu
					class="nav-dropdown studies-menu-custom ciq-studies alignright"
					cq-focus="input"
					config="${E[0]<=810?"studies":"studybrowser"}"
					text="Studies"
					icon="studies"
					responsive=""
					tooltip="Studies"
				></cq-menu>`,M,D,Q,q,O=`<cq-menu
					class="nav-dropdown ciq-preferences alignright"
					reader="Preferences"
					config="preferences"
					icon="preferences"
					tooltip="Preferences"
				></cq-menu>`,R,V,K,Y,G,J,Z,ee,X,ne,se=`<cq-drawing-palette
						class="palette-drawing palette-hide grid"
						docked="true"
						orientation="vertical"
						min-height="300"
						cq-drawing-edit="none"
					/>`,oe,ae,Ae=`<cq-drawing-settings
						class="palette-settings"
						docked="true"
						hide="true"
						orientation="horizontal"
						min-height="40"
						cq-drawing-edit="none"
					/>`,he,ge,ie='<cq-marker class="chart-control-group full-screen-show"><cq-toggle class="ciq-lookup-icon" config="symbolsearch" reader="Symbol Search" tooltip="Symbol Search" icon="search" help-id="search_symbol_lookup"></cq-toggle> <cq-toggle class="ciq-comparison-icon" config="symbolsearch" reader="Add Comparison" tooltip="Add Comparison" icon="compare" help-id="add_comparison" comparison="true"></cq-toggle> <cq-toggle class="ciq-draw" member="drawing" reader="Draw" icon="draw" tooltip="Draw" help-id="drawing_tools_toggle"></cq-toggle> <cq-toggle class="ciq-CH" config="crosshair" reader="Crosshair" icon="crosshair" tooltip="Crosshair (Alt + )"></cq-toggle> <cq-toggle class="ciq-DT" feature="tableview" member="tableView" reader="Table View" icon="tableview" tooltip="Table View"></cq-toggle> <cq-menu class="nav-dropdown ciq-period full-screen" config="period" text="" binding="Layout.periodicity"></cq-menu></cq-marker> <cq-chart-title cq-marker=""></cq-chart-title> <cq-chartcontrol-group class="full-screen-show" cq-marker=""></cq-chartcontrol-group> <cq-chart-legend></cq-chart-legend> <cq-loader></cq-loader>',re,de,ce,fe,me,ve,pe,be=`<cq-toggle
			feature="shortcuts"
			class="ciq-shortcut-button bottom"
			stxtap="Layout.showShortcuts()"
			reader="Toggle Shortcut Legend"
			icon="shortcuts"
			tooltip="Shortcuts"
		></cq-toggle>
	`,Se,Ee,Ie='<cq-show-range config="range" role="group" aria-labelledby="label_showRange"></cq-show-range>',Qe,Ne,De="<cq-dialog><cq-drawing-context></cq-drawing-context></cq-dialog> <cq-dialog><cq-study-context></cq-study-context></cq-dialog>",Re,_e,Ue,He,Pe,We,Ge=E[6]&&yo(),je=E[0]&&E[0]>=810&&vo(E),Je=!((nt=(Oe=E[4])==null?void 0:Oe.meta)!=null&&nt.spgCharts)&&xo(E);return{c(){e=fi("cq-context"),t=fi("div"),s=fi("div"),s.innerHTML=n,r=hi(),i=fi("cq-toggle"),a=hi(),o=fi("cq-side-nav"),c=fi("div"),l=fi("cq-toggle"),u=hi(),h=fi("cq-toggle"),d=hi(),f=new nr(!1),p=hi(),g=fi("cq-toggle"),m=hi(),b=new nr(!1),F=hi(),Ge&&Ge.c(),w=hi(),U=fi("div"),B=fi("div"),k=new nr(!1),S=hi(),T=new nr(!1),L=hi(),H=new nr(!1),N=hi(),v=new nr(!1),M=hi(),je&&je.c(),D=hi(),Je&&Je.c(),Q=hi(),q=new nr(!1),R=hi(),V=fi("div"),K=hi(),Y=fi("div"),G=fi("div"),J=fi("cq-message-toaster"),Z=hi(),ee=fi("cq-palette-dock"),X=fi("div"),ne=new nr(!1),oe=hi(),ae=new nr(!1),he=hi(),ge=fi("div"),ge.innerHTML=ie,re=hi(),de=fi("cq-abstract-marker"),ce=hi(),fe=fi("div"),me=fi("cq-share-button"),ve=hi(),pe=new nr(!1),Se=hi(),Ee=new nr(!1),Qe=hi(),Ne=fi("cq-dialogs"),Ne.innerHTML=De,Re=hi(),_e=fi("cq-side-panel"),this.h()},l(Ze){e=pi(Ze,"CQ-CONTEXT",{class:!0,style:!0});var Le=wi(e);t=pi(Le,"DIV",{class:!0,role:!0});var et=wi(t);s=pi(et,"DIV",{class:!0,"data-svelte-h":!0}),Pn(s)!=="svelte-1f4r0gm"&&(s.innerHTML=n),r=di(et),i=pi(et,"CQ-TOGGLE",{class:!0,config:!0,reader:!0,tooltip:!0,icon:!0,"help-id":!0,comparison:!0}),wi(i).forEach(li),a=di(et),o=pi(et,"CQ-SIDE-NAV",{"cq-on":!0});var Ye=wi(o);c=pi(Ye,"DIV",{class:!0});var Ve=wi(c);l=pi(Ve,"CQ-TOGGLE",{class:!0,member:!0,reader:!0,tooltip:!0,icon:!0,"help-id":!0}),wi(l).forEach(li),u=di(Ve),h=pi(Ve,"CQ-TOGGLE",{class:!0,config:!0,reader:!0,tooltip:!0,icon:!0}),wi(h).forEach(li),d=di(Ve),f=sr(Ve,!1),p=di(Ve),g=pi(Ve,"CQ-TOGGLE",{class:!0,feature:!0,config:!0,reader:!0,tooltip:!0,icon:!0}),wi(g).forEach(li),m=di(Ve),b=sr(Ve,!1),F=di(Ve),Ge&&Ge.l(Ve),Ve.forEach(li),Ye.forEach(li),w=di(et),U=pi(et,"DIV",{class:!0});var ct=wi(U);B=pi(ct,"DIV",{class:!0});var ot=wi(B);k=sr(ot,!1),S=di(ot),T=sr(ot,!1),L=di(ot),H=sr(ot,!1),N=di(ot),v=sr(ot,!1),M=di(ot),je&&je.l(ot),D=di(ot),Je&&Je.l(ot),Q=di(ot),q=sr(ot,!1),ot.forEach(li),R=di(ct),V=pi(ct,"DIV",{class:!0}),wi(V).forEach(li),ct.forEach(li),et.forEach(li),K=di(Le),Y=pi(Le,"DIV",{class:!0,role:!0});var dt=wi(Y);G=pi(dt,"DIV",{class:!0});var xt=wi(G);J=pi(xt,"CQ-MESSAGE-TOASTER",{defaultdisplaytime:!0,defaulttransition:!0,defaultposition:!0}),wi(J).forEach(li),Z=di(xt),ee=pi(xt,"CQ-PALETTE-DOCK",{});var Ke=wi(ee);X=pi(Ke,"DIV",{class:!0});var At=wi(X);ne=sr(At,!1),oe=di(At),ae=sr(At,!1),At.forEach(li),Ke.forEach(li),he=di(xt),ge=pi(xt,"DIV",{class:!0,"data-svelte-h":!0}),Pn(ge)!=="svelte-1syq583"&&(ge.innerHTML=ie),xt.forEach(li),dt.forEach(li),re=di(Le),de=pi(Le,"CQ-ABSTRACT-MARKER",{"cq-type":!0}),wi(de).forEach(li),ce=di(Le),fe=pi(Le,"DIV",{class:!0});var st=wi(fe);me=pi(st,"CQ-SHARE-BUTTON",{class:!0,reader:!0,icon:!0,tooltip:!0}),wi(me).forEach(li),ve=di(st),pe=sr(st,!1),Se=di(st),Ee=sr(st,!1),st.forEach(li),Qe=di(Le),Ne=pi(Le,"CQ-DIALOGS",{"data-svelte-h":!0}),Pn(Ne)!=="svelte-1f6uky6"&&(Ne.innerHTML=De),Re=di(Le),_e=pi(Le,"CQ-SIDE-PANEL",{}),wi(_e).forEach(li),Le.forEach(li),this.h()},h(){tr(s,"class","sidenav-toggle ciq-toggles"),qt(i,"class","ciq-comparison-icon"),qt(i,"config","symbolsearch"),qt(i,"reader","Add Comparison"),qt(i,"tooltip","Add Comparison"),qt(i,"icon","compare"),qt(i,"help-id","add_comparison"),qt(i,"comparison","true"),qt(l,"class","ciq-draw"),qt(l,"member","drawing"),qt(l,"reader","Draw"),qt(l,"tooltip","Draw"),qt(l,"icon","draw"),qt(l,"help-id","drawing_tools_toggle"),qt(h,"class","ciq-CH"),qt(h,"config","crosshair"),qt(h,"reader","Crosshair"),qt(h,"tooltip","Crosshair (Alt + \\)"),qt(h,"icon","crosshair"),f.a=p,qt(g,"class","ciq-HU"),qt(g,"feature","tooltip"),qt(g,"config","info"),qt(g,"reader","Info"),qt(g,"tooltip","Info"),qt(g,"icon","info"),b.a=F,tr(c,"class","icon-toggles ciq-toggles"),qt(o,"cq-on","sidenavOn"),k.a=S,T.a=L,H.a=N,v.a=M,q.a=null,tr(B,"class","ciq-dropdowns"),tr(V,"class","trade-toggles ciq-toggles"),tr(U,"class","ciq-menu-section"),tr(t,"class","ciq-nav full-screen-hide"),tr(t,"role","navigation"),qt(J,"defaultdisplaytime","10"),qt(J,"defaulttransition","slide"),qt(J,"defaultposition","top"),ne.a=oe,ae.a=null,tr(X,"class","palette-dock-container"),tr(ge,"class","chartContainer h-full w-full"),tr(G,"class","ciq-chart"),tr(Y,"class","ciq-chart-area"),tr(Y,"role","main"),qt(de,"cq-type","helicopter"),qt(me,"class","ciq-share-button bottom"),qt(me,"reader","Share Chart"),qt(me,"icon","share"),qt(me,"tooltip","Share"),pe.a=Se,Ee.a=null,tr(fe,"class","ciq-footer full-screen-hide"),qt(e,"class","h-[400px] xs:h-[450px] bp:h-[500px] sm:h-[650px] landscape:h-[calc(100vh-10px)] lg:landscape:h-[650px]"),qt(e,"style",Ue=E[5]?`height: ${E[2]}px`:"")},m(Ze,Le){cn(Ze,e,Le),Ut(e,t),Ut(t,s),Ut(t,r),Ut(t,i),Ut(t,a),Ut(t,o),Ut(o,c),Ut(c,l),Ut(c,u),Ut(c,h),Ut(c,d),f.m(A,c),Ut(c,p),Ut(c,g),Ut(c,m),b.m(C,c),Ut(c,F),Ge&&Ge.m(c,null),Ut(t,w),Ut(t,U),Ut(U,B),k.m(y,B),Ut(B,S),T.m(_,B),Ut(B,L),H.m(P,B),Ut(B,N),v.m(x,B),Ut(B,M),je&&je.m(B,null),Ut(B,D),Je&&Je.m(B,null),Ut(B,Q),q.m(O,B),Ut(U,R),Ut(U,V),Ut(e,K),Ut(e,Y),Ut(Y,G),Ut(G,J),Ut(G,Z),Ut(G,ee),Ut(ee,X),ne.m(se,X),Ut(X,oe),ae.m(Ae,X),Ut(G,he),Ut(G,ge),Ut(e,re),Ut(e,de),Ut(e,ce),Ut(e,fe),Ut(fe,me),Ut(fe,ve),pe.m(be,fe),Ut(fe,Se),Ee.m(Ie,fe),Ut(e,Qe),Ut(e,Ne),Ut(e,Re),Ut(e,_e),Pe||(We=ld(He=Sd.call(null,e,E[10])),Pe=!0)},p(Ze,[Le]){var et,Ye;Ze[6]?Ge||(Ge=yo(),Ge.c(),Ge.m(c,null)):Ge&&(Ge.d(1),Ge=null),Le&1&&x!==(x=`<cq-menu
					class="nav-dropdown studies-menu-custom ciq-studies alignright"
					cq-focus="input"
					config="${Ze[0]<=810?"studies":"studybrowser"}"
					text="Studies"
					icon="studies"
					responsive=""
					tooltip="Studies"
				></cq-menu>`)&&v.p(x),Ze[0]&&Ze[0]>=810?je?je.p(Ze,Le):(je=vo(Ze),je.c(),je.m(B,D)):je&&(je.d(1),je=null),(Ye=(et=Ze[4])==null?void 0:et.meta)!=null&&Ye.spgCharts?Je&&(Je.d(1),Je=null):Je?Je.p(Ze,Le):(Je=xo(Ze),Je.c(),Je.m(B,Q)),Le&36&&Ue!==(Ue=Ze[5]?`height: ${Ze[2]}px`:"")&&qt(e,"style",Ue),He&&cd(He.update)&&Le&2&&He.update.call(null,Ze[10])},i:no,o:no,d(Ze){Ze&&li(e),Ge&&Ge.d(),je&&je.d(),Je&&Je.d(),Pe=!1,We()}}}function Tp(){const E=Date.now().toString(),e=Math.floor(Math.random()*1e3).toString();return E+e}function Mp(E,e,t){let s,n,r,i,a,o,c,l,u,h,d,f,A,p,g,m;ir(E,Ad,L=>t(8,i=L)),ir(E,gd,L=>t(0,a=L)),ir(E,md,L=>t(9,o=L)),ir(E,ar,L=>t(16,c=L)),ir(E,lo,L=>t(17,l=L)),ir(E,So,L=>t(3,u=L)),ir(E,ko,L=>t(18,h=L)),ir(E,pd,L=>t(19,d=L)),ir(E,qr,L=>t(4,f=L)),ir(E,Hn,L=>t(20,A=L)),ir(E,yd,L=>t(21,p=L)),ir(E,vd,L=>t(5,g=L)),ir(E,xd,L=>t(6,m=L)),Bp(j),or.announceError=function(){sa("Chart_Error",{title:"quoteFeed error"})};let b;async function C(){if(b)return b;try{return await bo(()=>import("./excellentexport.DP3fOsTs.js").then(L=>L.e),__vite__mapDeps([0,1]),import.meta.url).then(L=>L.default)}catch{sa("Export_Error",{type:"importXLSExport error"})}}let F;function w(){var P;class L extends HTMLElement{constructor(){super()}async handleDownload(){b=await C()}}class H extends HTMLElement{constructor(){super(),this.stxx_current=null,this.info=null,this.symbol=null}handleXLSX(){this.handleExport("xlsx")}getProperties(){return{stxx_current:this.stxx_current,info:this.info,symbol:this.symbol}}updateProperties(v,x,M){this.stxx_current=v,this.info=x,this.symbol=M}handleNoProClick(v){Co("/pro/"),sa("Pro_Click",{location:"Chart_Menu",type:"Export-"+v})}handleCSV(){this.handleExport("csv")}handleExport(v){let M=document.querySelector("cq-export").getProperties();const{stxx_current:D,info:Q,symbol:q}=M,O=D.tableView.builder.getDateFormatter(D),R=D.tableView.builder.getValueFormatter(D),V=D.tableView.builder.getValueFormatter(D,D.tableView.builder.percentDecimalPlaces),K=D.tableView.builder.getVolumeFormatter(D);let Y=Object.values(D.tableView.builder.colHeaders).map(ne=>ne.label);const G=D.tableView.builder.getSeriesDataNames(D);G.forEach(ne=>D.tableView.builder.colHeaders[ne]={label:ne});const J=D.tableView.builder.getStudyDataNames(D);J.forEach(ne=>{Y.includes(ne)||Yi(Hn,A.tableView.builder.colHeaders[ne]={label:ne},A)});const Z=G.concat(J);let ee=D.tableView.builder.getChartData(D,{dateFormatter:O,valueFormatter:R,percentFormatter:V,volumeFormatter:K,additionalDataFields:Z});const X=(Q==null?void 0:Q.type)+"-"+(q==null?void 0:q.toLocaleLowerCase())+"-chart";v=="csv"?ho("csv",ee,D.tableView.builder.colHeaders,X,b):ho("xlsx",ee,D.tableView.builder.colHeaders,X,b)}}(P=f==null?void 0:f.meta)!=null&&P.spgCharts||(customElements.get("cq-export")||window.customElements.define("cq-export",H),document.querySelector("cq-export").updateProperties(A,f,u),customElements.get("cq-export-download")||window.customElements.define("cq-export-download",L)),t(1,j.UI.Markers.prototype.setnoProClick=function(){const{context:N,implementation:v}=this;let{topNode:x}=N;!v||!x.parentElement||v.noProClick()},j),t(1,j.UI.Markers.prototype.setshowMarkers=function(N,v){const{activeClassName:x,context:M,implementation:D}=this;let{topNode:Q}=M;!D||!Q.parentElement||(Q=Q.multiChartContainer||Q,D.activeLabels.includes(v)?(D.hideMarkers(v,u),N.node.classList.remove(x)):(D.showMarkers(v,u),N.node.classList.add(x)))},j),t(1,j.UI.Markers.prototype.getshowMarkers=function(N,v){var q,O;const{activeClassName:x,context:M,implementation:D}=this;let{topNode:Q}=M;!D||!Q.parentElement||((q=c==null?void 0:c.events)!=null&&q.earnings&&v==="earnings"&&(D.activeLabels.includes("earnings")||(D.showMarkers("earnings",u),N.classList.add(x))),(O=c==null?void 0:c.events)!=null&&O.dividends&&v=="dividends"&&(D.activeLabels.includes("dividends")||(D.showMarkers("dividends",u),N.classList.add(x))))},j)}async function U(){var N,v,x,M;j&&t(1,j.Studies.Categories={...j.Studies.Categories,Popular:["Bollinger Bands","GoNoGo - Trend","MACD","Moving Average","RSI","Volume Chart","VWAP"]},j),Dd(j);const L=Cp({chartSharing:{saveChartLayout:D=>new Promise(Q=>{const q=Tp();try{fetch(on+`/misc/chart_share?action=store&id=${q}&data=${encodeURIComponent(D)}`)}catch(O){console.error(O),oo(O,"store_chart_share_layout")}Q(q)}),getChartLayout:D=>{},generateURL:D=>new Promise(Q=>Q(`${window.location.href}?id=${D}`)),parseURL:()=>{}}});Td(j),F=L.createChart(document.querySelector("chartContainer"),f,u,p,null,[{quoteFeed:or,behavior:{refreshInterval:5,backgroundRefreshInterval:5,bufferSize:100}}],bp.MarkersSample),Yi(Hn,A=F,A),j.I18N.setLocale(F,"en-US"),F.internationalizer.hourMinute=new Intl.DateTimeFormat("en-US",{hour:"numeric",minute:"numeric",hour12:!0}),F.internationalizer.hourMinuteSecond=new Intl.DateTimeFormat("en-US",{hour:"numeric",minute:"numeric",second:"numeric",hour12:!0}),F.preferences.labels=!1,setTimeout(()=>{var D;(D=F==null?void 0:F.preferences)!=null&&D.labels&&(F.preferences.labels=!0)},3e3),(v=(N=c==null?void 0:c[s])==null?void 0:N.preferences)!=null&&v.timeZone||(((x=f==null?void 0:f.type)==null?void 0:x[0])==="s"||((M=f==null?void 0:f.type)==null?void 0:M[0])==="e")&&F.setTimeZone(null,"America/New_York");let H=null;if(d.url.searchParams.get("id"))try{let D=on+`/misc/chart_share?action=get&id=${d.url.searchParams.get("id")}`,q=await(await fetch(D)).json();q&&(H=q.data)}catch(D){console.error(D),oo(D,"fetch_shared_chart_layout")}let P=document.querySelector("cq-chart-title");P&&(h!=null&&h.cl)&&(P.previousClose=h.cl),setTimeout(()=>{F&&F.uiContext.topNode.querySelector("cq-drawing-palette").setMode("list")},100),H&&(H.drawings&&(F.importDrawings(H.drawings),F.draw()),H.layout&&F.importLayout(H.layout),H.preferences&&F.importPreferences(H.preferences))}const B=j.localStorage,k=localStorage.getItem.bind(localStorage),y=localStorage.setItem.bind(localStorage),S=localStorage.removeItem.bind(localStorage),T={get(L,H){return H==="getItem"?function(P){var N;return P==="CIQ_Studies_Favorite_list"&&c?c.study_favorites||[]:P==="CIQ.Themes.prototype.current"&&c?{theme:c.themes.current}:P==="CIQ.Themes.prototype.custom"&&c?c.themes.custom||{}:P==="stx-views"&&c?c.views:P==="myChartLayout"&&c?c[s].layout:P==="myChartPreferences"&&c?c[s].preferences:P!=="newsl"&&(P==null?void 0:P.length)<7&&((N=c==null?void 0:c.symbols)!=null&&N[P])?c.symbols[P]:k(P)}:H==="setItem"?function(P,N){var x,M,D;let v=JSON.parse(N);if(P==="CIQ_Studies_Favorite_list"&&c){Yi(ar,c={...c,study_favorites:v},c);return}if(P==="CIQ.Themes.prototype.current"&&c){((x=c.themes)==null?void 0:x.current)!==v.theme&&Yi(ar,c.themes={...c.themes,current:v.theme},c);return}if(P==="CIQ.Themes.prototype.custom"&&c){((M=c.themes)==null?void 0:M.current)!==v.theme&&Yi(ar,c.themes.custom=v,c);return}if(P==="stx-views"&&c){Yi(ar,c.views=v,c);return}if(P==="myChartLayout"&&c){Yi(ar,c[s].layout=v,c);return}if(P==="myChartPreferences"&&c){Yi(ar,c[s].preferences=v,c);return}if(P==="_drawings"&&N==="{}"&&c){let Q={...c.symbols};delete Q[u],Yi(ar,c.symbols=Q,c)}if(P!=="newsl"&&P.length<7&&((D=v==null?void 0:v[0])!=null&&D.name)&&c){Yi(ar,c.symbols={...c.symbols,[P]:v},c);return}return y(P,N)}:H==="removeItem"?function(P){if(P==="CIQ_Studies_Favorite_list"&&c){Yi(ar,c={...c,study_favorites:[]},c);return}return S(P)}:L[H]}};j.localStorage=new Proxy(B,T),j.suppressPackageInfo=!0,ud(()=>{U(),w(),t(1,j.UI.Layout.prototype.resetChart=function(){F.clear(),Yi(ar,c=kd,c),Yi(lo,l=Math.random(),l)},j),t(1,j.UI.Layout.prototype.getshowYAxisLabels=function(L){var P;let H=(P=c==null?void 0:c.custom)==null?void 0:P.show_price_labels;F.preferences.labels=H,this.setCheckedState(L,F.preferences.labels),F.draw()},j),t(1,j.UI.Layout.prototype.setshowYAxisLabels=function(L){Yi(ar,c.custom={...c.custom,show_price_labels:!F.preferences.labels},c),this.setCheckedState(L.node,!F.preferences.labels),F.preferences.labels=!F.preferences.labels,F.draw()},j)}),hd(()=>{typeof F.destroy=="function"&&(F.container.remove(),F.destroy(),F=null)});const _=()=>{if(j.UI.getUIManager().ifAllClosed())return;let L=document.getElementsByTagName("cq-dialog");for(let H of L)if(H!=null&&H.active)return;j.UI.getUIManager().closeTopMenu()};return E.$$.update=()=>{E.$$.dirty&1&&(s=a&&a<700?"mobile":"desktop"),E.$$.dirty&1&&t(7,n=a?a<700?52:60:0),E.$$.dirty&641&&(o||t(7,n+=a&&a<768?128:56)),E.$$.dirty&384&&t(2,r=i?i-n:650)},[a,j,r,u,f,g,m,n,i,o,_]}class Vp extends dd{constructor(e){super(),fd(this,e,Mp,Dp,od,{})}}export{Vp as default};
