(self.webpackChunktradingview=self.webpackChunktradingview||[]).push([[14141,70217],{150335:(e,t)=>{"use strict";function n(e){return Math.round(1e10*e)/1e10}Object.defineProperty(t,"__esModule",{value:!0}),t.alignTo=t.fixComputationError=t.isNaN=t.isInteger=t.isNumber=void 0,t.isNumber=function(e){return"number"==typeof e&&isFinite(e)},t.isInteger=function(e){return"number"==typeof e&&e%1==0},t.isNaN=function(e){return!(e<=0||e>0)},t.fixComputationError=n,t.alignTo=function(e,t){var r=e/t,i=Math.floor(r),s=r-i;return s>2e-10?n(s>.5?(i+1)*t:i*t):e}},130551:(e,t)=>{"use strict";t.hasProperty=t.isObject=void 0,t.isObject=function(e){var t=typeof e;return null!==e&&("object"===t||"function"===t)},t.hasProperty=function(e,t){return t in e}},960521:function(e,t,n){var r;!function(){"use strict";var i,s=1e6,o=1e6,a="[big.js] ",c=a+"Invalid ",u=c+"decimal places",l=c+"rounding mode",h=a+"Division by zero",d={},_=void 0,f=/^-?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i;function m(e,t,n,r){var i=e.c;if(n===_&&(n=e.constructor.RM),0!==n&&1!==n&&2!==n&&3!==n)throw Error(l);if(t<1)r=3===n&&(r||!!i[0])||0===t&&(1===n&&i[0]>=5||2===n&&(i[0]>5||5===i[0]&&(r||i[1]!==_))),i.length=1,r?(e.e=e.e-t+1,i[0]=1):i[0]=e.e=0;else if(t<i.length){if(r=1===n&&i[t]>=5||2===n&&(i[t]>5||5===i[t]&&(r||i[t+1]!==_||1&i[t-1]))||3===n&&(r||!!i[0]),i.length=t--,r)for(;++i[t]>9;)i[t]=0,t--||(++e.e,i.unshift(1));for(t=i.length;!i[--t];)i.pop()}return e}function p(e,t,n){var r=e.e,i=e.c.join(""),s=i.length;if(t)i=i.charAt(0)+(s>1?"."+i.slice(1):"")+(r<0?"e":"e+")+r;else if(r<0){for(;++r;)i="0"+i;i="0."+i}else if(r>0)if(++r>s)for(r-=s;r--;)i+="0";else r<s&&(i=i.slice(0,r)+"."+i.slice(r));else s>1&&(i=i.charAt(0)+"."+i.slice(1));return e.s<0&&n?"-"+i:i}d.abs=function(){var e=new this.constructor(this);return e.s=1,e},d.cmp=function(e){var t,n=this,r=n.c,i=(e=new n.constructor(e)).c,s=n.s,o=e.s,a=n.e,c=e.e;if(!r[0]||!i[0])return r[0]?s:i[0]?-o:0;if(s!=o)return s;if(t=s<0,a!=c)return a>c^t?1:-1;for(o=(a=r.length)<(c=i.length)?a:c,s=-1;++s<o;)if(r[s]!=i[s])return r[s]>i[s]^t?1:-1;return a==c?0:a>c^t?1:-1},d.div=function(e){var t=this,n=t.constructor,r=t.c,i=(e=new n(e)).c,o=t.s==e.s?1:-1,a=n.DP;if(a!==~~a||a<0||a>s)throw Error(u);if(!i[0])throw Error(h);if(!r[0])return e.s=o,e.c=[e.e=0],e;var c,l,d,f,p,g=i.slice(),v=c=i.length,S=r.length,E=r.slice(0,c),b=E.length,T=e,w=T.c=[],C=0,P=a+(T.e=t.e-e.e)+1;for(T.s=o,o=P<0?0:P,g.unshift(0);b++<c;)E.push(0);do{for(d=0;d<10;d++){if(c!=(b=E.length))f=c>b?1:-1;else for(p=-1,f=0;++p<c;)if(i[p]!=E[p]){f=i[p]>E[p]?1:-1;break}if(!(f<0))break;for(l=b==c?i:g;b;){if(E[--b]<l[b]){for(p=b;p&&!E[--p];)E[p]=9;--E[p],E[b]+=10}E[b]-=l[b]}for(;!E[0];)E.shift()}w[C++]=f?d:++d,E[0]&&f?E[b]=r[v]||0:E=[r[v]]}while((v++<S||E[0]!==_)&&o--);return w[0]||1==C||(w.shift(),T.e--,P--),C>P&&m(T,P,n.RM,E[0]!==_),T},d.eq=function(e){return 0===this.cmp(e)},d.gt=function(e){return this.cmp(e)>0},d.gte=function(e){return this.cmp(e)>-1},d.lt=function(e){return this.cmp(e)<0},d.lte=function(e){return this.cmp(e)<1},d.minus=d.sub=function(e){
var t,n,r,i,s=this,o=s.constructor,a=s.s,c=(e=new o(e)).s;if(a!=c)return e.s=-c,s.plus(e);var u=s.c.slice(),l=s.e,h=e.c,d=e.e;if(!u[0]||!h[0])return h[0]?e.s=-c:u[0]?e=new o(s):e.s=1,e;if(a=l-d){for((i=a<0)?(a=-a,r=u):(d=l,r=h),r.reverse(),c=a;c--;)r.push(0);r.reverse()}else for(n=((i=u.length<h.length)?u:h).length,a=c=0;c<n;c++)if(u[c]!=h[c]){i=u[c]<h[c];break}if(i&&(r=u,u=h,h=r,e.s=-e.s),(c=(n=h.length)-(t=u.length))>0)for(;c--;)u[t++]=0;for(c=t;n>a;){if(u[--n]<h[n]){for(t=n;t&&!u[--t];)u[t]=9;--u[t],u[n]+=10}u[n]-=h[n]}for(;0===u[--c];)u.pop();for(;0===u[0];)u.shift(),--d;return u[0]||(e.s=1,u=[d=0]),e.c=u,e.e=d,e},d.mod=function(e){var t,n=this,r=n.constructor,i=n.s,s=(e=new r(e)).s;if(!e.c[0])throw Error(h);return n.s=e.s=1,t=1==e.cmp(n),n.s=i,e.s=s,t?new r(n):(i=r.DP,s=r.RM,r.DP=r.RM=0,n=n.div(e),r.DP=i,r.RM=s,this.minus(n.times(e)))},d.plus=d.add=function(e){var t,n,r,i=this,s=i.constructor;if(e=new s(e),i.s!=e.s)return e.s=-e.s,i.minus(e);var o=i.e,a=i.c,c=e.e,u=e.c;if(!a[0]||!u[0])return u[0]||(a[0]?e=new s(i):e.s=i.s),e;if(a=a.slice(),t=o-c){for(t>0?(c=o,r=u):(t=-t,r=a),r.reverse();t--;)r.push(0);r.reverse()}for(a.length-u.length<0&&(r=u,u=a,a=r),t=u.length,n=0;t;a[t]%=10)n=(a[--t]=a[t]+u[t]+n)/10|0;for(n&&(a.unshift(n),++c),t=a.length;0===a[--t];)a.pop();return e.c=a,e.e=c,e},d.pow=function(e){var t=this,n=new t.constructor("1"),r=n,i=e<0;if(e!==~~e||e<-1e6||e>o)throw Error(c+"exponent");for(i&&(e=-e);1&e&&(r=r.times(t)),e>>=1;)t=t.times(t);return i?n.div(r):r},d.prec=function(e,t){if(e!==~~e||e<1||e>s)throw Error(c+"precision");return m(new this.constructor(this),e,t)},d.round=function(e,t){if(e===_)e=0;else if(e!==~~e||e<-s||e>s)throw Error(u);return m(new this.constructor(this),e+this.e+1,t)},d.sqrt=function(){var e,t,n,r=this,i=r.constructor,s=r.s,o=r.e,c=new i("0.5");if(!r.c[0])return new i(r);if(s<0)throw Error(a+"No square root");0===(s=Math.sqrt(r+""))||s===1/0?((t=r.c.join("")).length+o&1||(t+="0"),o=((o+1)/2|0)-(o<0||1&o),e=new i(((s=Math.sqrt(t))==1/0?"5e":(s=s.toExponential()).slice(0,s.indexOf("e")+1))+o)):e=new i(s+""),o=e.e+(i.DP+=4);do{n=e,e=c.times(n.plus(r.div(n)))}while(n.c.slice(0,o).join("")!==e.c.slice(0,o).join(""));return m(e,(i.DP-=4)+e.e+1,i.RM)},d.times=d.mul=function(e){var t,n=this,r=n.constructor,i=n.c,s=(e=new r(e)).c,o=i.length,a=s.length,c=n.e,u=e.e;if(e.s=n.s==e.s?1:-1,!i[0]||!s[0])return e.c=[e.e=0],e;for(e.e=c+u,o<a&&(t=i,i=s,s=t,u=o,o=a,a=u),t=new Array(u=o+a);u--;)t[u]=0;for(c=a;c--;){for(a=0,u=o+c;u>c;)a=t[u]+s[c]*i[u-c-1]+a,t[u--]=a%10,a=a/10|0;t[u]=a}for(a?++e.e:t.shift(),c=t.length;!t[--c];)t.pop();return e.c=t,e},d.toExponential=function(e,t){var n=this,r=n.c[0];if(e!==_){if(e!==~~e||e<0||e>s)throw Error(u);for(n=m(new n.constructor(n),++e,t);n.c.length<e;)n.c.push(0)}return p(n,!0,!!r)},d.toFixed=function(e,t){var n=this,r=n.c[0];if(e!==_){if(e!==~~e||e<0||e>s)throw Error(u);for(e=e+(n=m(new n.constructor(n),e+n.e+1,t)).e+1;n.c.length<e;)n.c.push(0)}return p(n,!1,!!r)},d.toJSON=d.toString=function(){var e=this,t=e.constructor
;return p(e,e.e<=t.NE||e.e>=t.PE,!!e.c[0])},d.toNumber=function(){var e=Number(p(this,!0,!0));if(!0===this.constructor.strict&&!this.eq(e.toString()))throw Error(a+"Imprecise conversion");return e},d.toPrecision=function(e,t){var n=this,r=n.constructor,i=n.c[0];if(e!==_){if(e!==~~e||e<1||e>s)throw Error(c+"precision");for(n=m(new r(n),e,t);n.c.length<e;)n.c.push(0)}return p(n,e<=n.e||n.e<=r.NE||n.e>=r.PE,!!i)},d.valueOf=function(){var e=this,t=e.constructor;if(!0===t.strict)throw Error(a+"valueOf disallowed");return p(e,e.e<=t.NE||e.e>=t.PE,!0)},i=function e(){function t(n){var r=this;if(!(r instanceof t))return n===_?e():new t(n);if(n instanceof t)r.s=n.s,r.e=n.e,r.c=n.c.slice();else{if("string"!=typeof n){if(!0===t.strict)throw TypeError(c+"number");n=0===n&&1/n<0?"-0":String(n)}!function(e,t){var n,r,i;if(!f.test(t))throw Error(c+"number");e.s="-"==t.charAt(0)?(t=t.slice(1),-1):1,(n=t.indexOf("."))>-1&&(t=t.replace(".",""));(r=t.search(/e/i))>0?(n<0&&(n=r),n+=+t.slice(r+1),t=t.substring(0,r)):n<0&&(n=t.length);for(i=t.length,r=0;r<i&&"0"==t.charAt(r);)++r;if(r==i)e.c=[e.e=0];else{for(;i>0&&"0"==t.charAt(--i););for(e.e=n-r-1,e.c=[],n=0;r<=i;)e.c[n++]=+t.charAt(r++)}}(r,n)}r.constructor=t}return t.prototype=d,t.DP=20,t.RM=1,t.NE=-7,t.PE=21,t.strict=false,t.roundDown=0,t.roundHalfUp=1,t.roundHalfEven=2,t.roundUp=3,t}(),i.default=i.Big=i,void 0===(r=function(){return i}.call(t,n,t,e))||(e.exports=r)}()},173777:(e,t,n)=>{"use strict";n.d(t,{SEPARATOR_PREFIX:()=>r,isSeparatorItem:()=>i});const r="###";function i(e){return e.startsWith(r)}},729584:(e,t,n)=>{"use strict";n.d(t,{assertNoEmitterListeners:()=>r});n(650151);function r(e,t){0}},925470:(e,t,n)=>{"use strict";n.d(t,{canUpgradePlan:()=>p,enabled:()=>u,getConfig:()=>m,getExpertPlansWithFeature:()=>_,getProPlansWithFeature:()=>h,getProductFeaturesConfig:()=>f,getProductId:()=>c});var r=n(650151)
;const i=JSON.parse('{"free":{"CHAT_ASSISTANT":{"limit":5},"CHART_STORAGE":{"limit":1},"MULTIPLE_CHARTS":{"limit":1},"INDICATORS_ON_CHART":{"limit":2},"FUNDAMENTALS_ON_CHART":{"limit":1},"HISTORICAL_BARS":{"limit":5},"STUDY_ON_STUDY":{"limit":800,"child_limit":1},"SERVER_SIDE_ALERTS":{"overall_limit":2000,"limit":3,"complex_limit":5,"primitive_limit":3},"SCREENER_INTERVALS":{"interval":["1D","1W","1M"]},"STUDY_TEMPLATES":{"limit":1},"SIMULTANEOUS_CONNECTIONS":{"limit":1},"BACKEND_CONNECTIONS":{"limit":2},"IDEA_SOCIAL_LINKS":{"socials":["Twitter","Youtube"]},"MULTICOLOR_FLAGGED_SYMBOLS":{"limit":1},"WATCHLIST_SYMBOLS":{"limit":30},"VIDEO_IDEAS_LENGTH":{"limit":20},"CREATE_MORE_PORTFOLIOS":{"limit":1},"PORTFOLIO_TRANSACTIONS":{"limit":2000},"PORTFOLIO_HOLDINGS":{"limit":20}},"pro":{"CHAT_ASSISTANT":{"limit":5},"CHART_STORAGE":{"limit":5},"MULTIPLE_CHARTS":{"limit":2},"MARKET_DATA_LIMITS":{"limit":2,"primitive_limit":2},"CUSTOM_INTERVALS":{},"MULTIPLE_WATCHLISTS":{},"IMPORT_WATCHLISTS":{},"EXPORT_WATCHLISTS":{},"INDICATORS_ON_CHART":{"limit":5},"FUNDAMENTALS_ON_CHART":{"limit":4},"TV_PROSTUDIES":{"study_packages":["tv-chartpatterns"]},"HISTORICAL_BARS":{"limit":10},"TV_VOLUMEBYPRICE":{"study_packages":["tv-volumebyprice"]},"STUDY_ON_STUDY":{"limit":800,"child_limit":1},"TICK_BY_TICK_PUSH_DATA":{},"SERVER_SIDE_ALERTS":{"overall_limit":2000,"limit":20,"complex_limit":20,"primitive_limit":20},"SCREENER_AUTO_REFRESH":{},"SCREENER_NEW_AUTO_REFRESH":{},"SCREENER_EXPORT_DATA":{},"SCREENER_NEW_EXPORT_CSV_DATA":{},"SCREENER_NEW_SHOW_RESTRICTED_DATA":{},"SHOW_BONDS_RESTRICTED_DATA":{},"PORTFOLIO_DATA_LIMIT":{},"CREATE_MORE_PORTFOLIOS":{"limit":3},"PORTFOLIO_TRANSACTIONS":{"limit":5000},"PORTFOLIO_HOLDINGS":{"limit":50},"SCREENER_INTERVALS":{"interval":["1m","5m","15m","30m","1h","2h","4h","1D","1W","1M"]},"NO_SPONSORED_ADS":{"disable_on_lite_plan":"exclude_mobile"},"STUDY_TEMPLATES":{"limit":99999},"SIMULTANEOUS_CONNECTIONS":{"limit":1},"BACKEND_CONNECTIONS":{"limit":10},"IDC_AVAILABLE_DELAY":{},"STATUS":{"disable_on_trial":true},"BAR_REPLAY_INTRADAY":{"limit":1},"MULTIFLAGGED_SYMBOLS_LISTS":{},"SHOWS":{"disable_on_trial":true},"ALERTS_WEBHOOK":{},"DEEP_FUNDAMENTALS_HISTORY":{},"PUBLISH_PROTECTED_SCRIPTS":{"disable_on_trial":true},"IDEA_SOCIAL_LINKS":{"socials":["Twitter","Youtube"]},"EXTENDED_SOCIAL_LINKS":{"socials":["Facebook","Instagram"],"disable_on_trial":true},"MULTI_MONITOR":{},"MULTICOLOR_FLAGGED_SYMBOLS":{"limit":7},"INTRADAY_EXCHANGE":{},"VOLUME_PROFILE":{},"STREAMS_ACCESS":{"followers":10},"SMS_2FA_VERIFICATION":{"disable_on_trial":true},"SOCIAL_ACTIVITY":{"disable_on_trial":true},"WATCHLIST_SYMBOLS":{"limit":1000},"FIELDS_PERMISSIONS":{"items":["refbonds"]},"CUSTOM_RANGE_BARS":{},"FASTEST_DATA_FLOW":{},"SESSION_VOLUME_PROFILE":{},"SHOW_ETF_HOLDINGS_DATA":{}},"pro_realtime":{"extends":"pro","CHART_STORAGE":{"limit":10},"MULTIPLE_CHARTS":{"limit":4},"MARKET_DATA_LIMITS":{"limit":4,"primitive_limit":4},"INDICATORS_ON_CHART":{"limit":10},"FUNDAMENTALS_ON_CHART":{"limit":7},"TV_PROSTUDIES":{"study_packages":["tv-prostudies","tv-chartpatterns"]},"STUDY_ON_STUDY":{"limit":800,"child_limit":9},"SERVER_SIDE_ALERTS":{"overall_limit":2000,"limit":100,"complex_limit":100,"primitive_limit":100},"ALERTS_MULTICONDITIONS":{"condition_limit":5},"CHAT_ASSISTANT":{"limit":5},"CAN_EDIT_PUBLIC_CHATS":{"disable_on_trial":true},"BACKEND_CONNECTIONS":{"limit":20},"EXPORT_CHART_DATA":{},"CUSTOM_FORMULAS":{},"INTRADAY_EXOTIC_CHARTS":{},"KAGI_RENKO":{},"INTRADAY_SPREAD":{},"CUSTOM_CHATS":{},"BACKTESTING_EXPORT":{}},"pro_premium":{"extends":"pro_realtime","USE_BAR_MAGNIFIER":{},"CHART_STORAGE":{"limit":99999},"MULTIPLE_CHARTS":{"limit":8},"MARKET_DATA_LIMITS":{"limit":6,"primitive_limit":6},"INDICATORS_ON_CHART":{"limit":25},"FUNDAMENTALS_ON_CHART":{"limit":10},"CHAT_ASSISTANT":{"limit":99999},"CHART_PATTERNS":{"study_packages":["tv-chartpatterns","tv-chart_patterns"]},"HISTORICAL_BARS":{"limit":20},"STUDY_ON_STUDY":{"limit":800,"child_limit":24},"SERVER_SIDE_ALERTS":{"overall_limit":2000,"limit":400,"complex_limit":400,"primitive_limit":400,"watchlist_limit":2,"overall_watchlist_limit":5},"SIMULTANEOUS_CONNECTIONS":{"limit":2},"BACKEND_CONNECTIONS":{"limit":50},"IDEA_SIGNATURE":{"disable_on_trial":true},"PROFILE_WEBSITE_FIELD":{"disable_on_trial":true},"BAR_REPLAY_INTRADAY":{"limit":4},"ALERTS_NO_EXPIRATION":{},"PUBLISH_INVITE_ONLY_SCRIPTS":{"disable_on_trial":true},"EXPORT_CHART_DATA":{},"DEEP_HISTORY_BACKTEST":{},"ALERTS_ON_SECONDS":{},"PERMANENT_STREAM_RECORDS":{},"EXTENDED_SOCIAL_LINKS":{"socials":["Facebook","Instagram","Website"],"disable_on_trial":true},"SECONDS_INTERVALS":{},"TPO_PERIODIC":{"study_packages":["tv-volumebyprice"]},"TPO_CHART_STYLE":{},"VOLUME_CANDLES":{},"VIDEO_IDEAS_LENGTH":{"limit":60},"VOLUME_FOOTPRINT":{},"PINE_SCREENER":{}},"pro_expert":{"extends":"pro_premium","INDICATORS_ON_CHART":{"limit":30},"FUNDAMENTALS_ON_CHART":{"limit":15},"STUDY_ON_STUDY":{"limit":800,"child_limit":29},"MULTIPLE_CHARTS":{"limit":10},"MARKET_DATA_LIMITS":{"limit":12,"primitive_limit":12},"HISTORICAL_BARS":{"limit":25},"SERVER_SIDE_ALERTS":{"overall_limit":2000,"limit":600,"complex_limit":600,"primitive_limit":600,"watchlist_limit":10,"overall_watchlist_limit":20},"BACKEND_CONNECTIONS":{"limit":80},"BAR_REPLAY_INTRADAY":{"limit":6},"EXPORT_FINANCIALS_DATA":{},"TICK_INTERVALS":{},"FIRST_PRIORITY_SUPPORT":{},"BUY_PRO_DATA":{}},"pro_premium_expert":{"extends":"pro_expert","INDICATORS_ON_CHART":{"limit":50},"FUNDAMENTALS_ON_CHART":{"limit":25},"STUDY_ON_STUDY":{"limit":800,"child_limit":49},"MULTIPLE_CHARTS":{"limit":16},"MARKET_DATA_LIMITS":{"limit":99999,"primitive_limit":25},"HISTORICAL_BARS":{"limit":40},"SERVER_SIDE_ALERTS":{"overall_limit":4000,"limit":1000,"complex_limit":1000,"primitive_limit":1000,"watchlist_limit":15,"overall_watchlist_limit":30},"BACKEND_CONNECTIONS":{"limit":200},"BAR_REPLAY_INTRADAY":{"limit":10}}}'),s=JSON.parse('{"cme":{"INDICATORS_ON_CHART":{"limit":99999}},"bovespa":{"INDICATORS_ON_CHART":{"limit":99999}},"qecomqa":{"INDICATORS_ON_CHART":{"limit":99999}}}')
;var o=n(638456),a=n(232759);function c(e){let t=window.user;"undefined"!=typeof window&&window.user&&(t=window.user),e&&(t=e);let n=t?.pro_plan||"free";return"free"!==n&&!(0,a.isTrialProduct)(n)||(n=(0,a.getProductForTrial)(n)),n}function u(e,t,n){let r=window.user;n&&(r=n);const i=m(e,t,r);if(!i)return!1;if(i.disable_on_trial&&(!r||r.is_trial))return!1;const s=i.disable_on_lite_plan;if(s&&r.is_lite_plan){if("all"===s)return!1;if("exclude_mobile"===s&&!o.CheckMobile.any())return!1}return!0}const l={free:"free",pro:"pro",pro_trial:"pro_trial",pro_realtime:"pro_realtime",pro_realtime_trial:"pro_realtime_trial",pro_premium:"pro_premium",pro_premium_trial:"pro_premium_trial"};function h(e){return Object.values(l).filter((t=>{const n=m(e,(0,a.getProductForTrial)(t));return n&&!((0,a.isTrialProduct)(t)&&n.disable_on_trial)}))}const d={pro_expert:"pro_expert",pro_premium_expert:"pro_premium_expert"};function _(e){return Object.values(d).filter((t=>{const n=m(e,t);return n&&!((0,a.isTrialProduct)(t)&&n.disable_on_trial)}))}function f(e){const t=i[e];return t?t.extends?Object.assign({},f(t.extends),t):t:null}function m(e,t,n){let r=f(t||(c(n)??""));if(!r)return null;const i=window.TradingView?.widgetCustomer;return i&&s[i]&&(r=Object.assign({},r,s[i])),r&&r[e]||null}function p(){const e=m("BACKEND_CONNECTIONS")?.limit??0,t=(0,r.ensureDefined)(window.pro),n=t.getProductsByType(t.PRODUCT_TYPES.pro_plan);for(const t of n)if((m("BACKEND_CONNECTIONS",(0,r.ensureDefined)(t.id))?.limit??0)>e)return!0;return!1}},640263:(e,t,n)=>{"use strict";n.d(t,{FeatureToggleWatchedValue:()=>s});var r=n(125226),i=n(820028);class s extends i.WatchedValue{constructor(e,t){super(function(e){return(0,r.isFeatureEnabled)(e)}(e)),(0,r.onFeaturesStateChanged)().subscribe(this,(t=>{e===t&&this.setValue((0,r.isFeatureEnabled)(e))}))}destroy(){(0,r.onFeaturesStateChanged)().unsubscribeAll(this),super.destroy()}}},262078:(e,t,n)=>{"use strict";n.r(t),n.d(t,{pushStreamMultiplexer:()=>R});var r=n(226722),i=n(345848),s=n(49437),o=n(556466),a=n(175203),c=n(735566),u=n(650151),l=n(680039),h=n(482815);class d{constructor(e){this._queue=[],this._isWorking=!1,this._onResolve=()=>{this._queue.length>0&&this._createPromise(this._queue[0])},this._logger=e}enqueue(e){this._logger.logNormal(`Adding channel in stack. Queue size: ${this._queue.length}`),this._isWorking||this._createPromise(e),this._queue.push(e)}_createPromise(e){this._isWorking=!0,this._wrap(e).then(this._onResolve)}_wrap(e){return new Promise((t=>{e().catch((e=>this._logger.logNormal(`Error when trying handling channel: ${e.message}`))).finally((()=>{this._isWorking=!1,this._queue.shift(),t()}))}))}}const _="PushStream",f=(0,c.getLogger)(_);var m;!function(e){e[e.EventSource=0]="EventSource",e[e.WebSocket=1]="WebSocket"}(m||(m={}));class p{constructor(e,t){this._channels=[],this._queue=new d(f),
this._transport=t.transportType===m.EventSource?new l.PersistentEventSourceTransport(this._onPushStreamMessage.bind(this)):new h.PersistentWebsocketTransport(this._onPushStreamMessage.bind(this),this._onPushStreamClose.bind(this)),this._settings=t,this._messageHandler=e}addChannel(e){this._queue.enqueue((()=>this._addChannel(e)))}removeChannel(e){this._queue.enqueue((()=>this._removeChannel(e)))}getChannels(){return this._channels}hasChannel(e){return-1!==this._channels.indexOf(e)}connectionStatus(){return this._transport.connectionStatus()}reconnectEvent(){return this._transport.successReconnectReachedEvent()}connect(){(0,u.assert)(0!==this._channels.length,"There is no channels"),this._transport.connect()}disconnect(){this._transport.disconnect()}getLogs(e){return(0,c.getRawLogHistory)(e,_)}async _addChannel(e){(0,u.assert)(!this.hasChannel(e),`Channel with name ${e} has already been subscribed`),f.logNormal(`Adding channel ${e}`),this._channels.push(e);const{maxSize:t}=this._settings;return void 0!==t&&this._channels.length>t&&(this._channels=this._channels.slice(this._channels.length-t)),this._transport.setUrl(this._generateUrl())}async _removeChannel(e){const t=this._channels.indexOf(e);return(0,u.assert)(-1!==t,`There is no channel with name ${e}`),f.logNormal(`Removing channel ${e}`),this._channels.splice(t,1),this._transport.setUrl(this._generateUrl())}_onPushStreamMessage(e){if("string"!=typeof e)throw new Error("Wrong message type, expected string");const t=JSON.parse(e),n=t.id,r=t.channel;-2===n?f.logWarn("Received unexpected message: about removed the channel"):n>0&&(f.logDebug(`Received message: id="${n}" channel="${r}"`),this._messageHandler(t.text,n,r))}_onPushStreamClose(e){1005===e.code&&a.telemetry.sendChartReport("websocket_code_1005")}_generateUrl(){const e=this._channels.join("/");return f.logNormal(`Generate pushstream url - ${e}`),`${this._settings.url}/${this._settings.urlPath}/${e}`}}n(659863);class g{constructor(){this._handlers={},this._specialHandlers={}}on(e,t){const n=this._isSpecialChannel(e)?this._specialHandlers:this._handlers;n[e]||(n[e]=[]),n[e].push(t)}off(e,t){const n=this._isSpecialChannel(e)?this._specialHandlers:this._handlers;if(!(e in n))return;if(void 0===t)return void delete n[e];const r=n[e].indexOf(t);r>=0&&n[e].splice(r,1)}emit(e,t,n,r){this._handlers[n]&&this._handlers[n].forEach((i=>{i(e,t,n,r)}));for(const i of Object.keys(this._specialHandlers)){const s="^"+i.replace(/\*/g,".*?")+"$";new RegExp(s).test(n)&&this._specialHandlers[i].forEach((i=>{i(e,t,n,r)}))}}_isSpecialChannel(e){return/\*/.test(e)}}var v=n(125226),S=n(623213),E=n(314802),b=n(547465),T=n(925049),w=n(23482);function C(){return!w.isIOS&&!w.isIPad&&void 0!==navigator.locks}class P{constructor(){this._id=(0,S.guid)(),this._state={[this._id]:{}},this._xEventPrefix="multiplexer-state-",this._xEventCreateTab=this._xEventPrefix+"create-new-tab",this._xEventShareState=this._xEventPrefix+"share-state",this._lockName="tab_destruction",this._stateChangeDelegate=new b.Delegate,this._createdLocks={},
this._lockEnabled=C(),this._lockPromise=(0,T.createDeferredPromise)(),this._lockCreated=(0,T.createDeferredPromise)(),this._onTabCreateCb=null,this._onTabCreate=e=>{this._onTabCreateCb&&this._onTabCreateCb();const t=JSON.parse(e);this._state[t]={},this._shareState(),this._requestTabRemoveLock(t)},this._shareState=async()=>{await this._lockCreated.promise;const e=JSON.stringify([this._id,this._state[this._id]]);r.TVXWindowEvents.emit(this._xEventShareState,e)},this._requestTabRemoveLock=e=>{!this._createdLocks[e]&&this._lockEnabled&&(this._createdLocks[e]=1,navigator.locks.request(`${this._lockName}_${e}`,(async()=>{const t=this._state[e]||{};this._compareTabState(e,{},t,"add"),this._compareTabState(e,t,{},"remove"),delete this._state[e],delete this._createdLocks[e]})))},this._onShareStateFromOther=e=>{const[t,n]=JSON.parse(e),r=this._state[t]||{};this._compareTabState(t,n,r,"add"),this._compareTabState(t,r,n,"remove"),this._state[t]=n,this._requestTabRemoveLock(t)},this._removeChannel=(e,t)=>{delete this._state[this._id][e][t],this._isListenByAnotherTab(e,t)||this._stateChangeDelegate.fire("remove",e,t);0===Object.keys(this._state[this._id][e]).length&&delete this._state[this._id][e]},r.TVXWindowEvents.on(this._xEventCreateTab,this._onTabCreate),r.TVXWindowEvents.on(this._xEventShareState,this._onShareStateFromOther),this._lockEnabled?navigator.locks.request(`${this._lockName}_${this._id}`,(async()=>(r.TVXWindowEvents.emit(this._xEventCreateTab,JSON.stringify(this._id)),window.addEventListener("beforeunload",(()=>this._lockPromise.resolve())),this._lockCreated.resolve(),this._lockPromise.promise))):this._lockCreated.resolve()}addChannel(e,t){this._isNotEmpty(e,t)?this._state[this._id][e][t]++:(this._state[this._id][e]||(this._state[this._id][e]={}),this._state[this._id][e][t]=1),this._isListenByAnotherTab(e,t)||this._stateChangeDelegate.fire("add",e,t),this._shareState()}removeChannel(e,t){this._isExist(e,t)&&(this._state[this._id][e][t]--,this._isNotEmpty(e,t)||this._removeChannel(e,t),this._shareState())}collectPushStreamChannels(e){const t=new Set;return Object.keys(this._state).forEach((n=>{const r=this._state[n][e];this._state[n][e]&&Object.keys(r).forEach((e=>t.add(e)))})),Array.from(t)}onStateChange(e){this._stateChangeDelegate.subscribe(null,e)}offStateChange(e){this._stateChangeDelegate.unsubscribe(null,e)}onTabCreate(e){this._onTabCreateCb=e}_isExist(e,t,n=this._id){return void 0!==this._state[n]&&void 0!==this._state[n][e]&&void 0!==this._state[n][e][t]}_isNotEmpty(e,t,n=this._id){return this._isExist(e,t,n)&&this._state[n][e][t]>0}_compareTabState(e,t,n,r){Object.keys(t).forEach((i=>{Object.keys(t[i]).forEach((t=>{this._isListenByAnotherTab(i,t,e)||n[i]&&n[i][t]||this._stateChangeDelegate.fire(r,i,t)}))}))}_isListenByAnotherTab(e,t,n=this._id){return Object.keys(this._state).some((r=>r!==n&&this._isNotEmpty(e,t,r)))}}const A=(0,c.getLogger)(_),N={url:window.PUSHSTREAM_URL,urlPath:"message-pipe-ws",transportType:m.WebSocket},O={url:window.PUSHSTREAM_URL.replace("wss://","https://"),
urlPath:"message-pipe-es",transportType:m.EventSource};class y{constructor(){var e;this.guid=(0,S.guid)(),this._pushStreamPublic=null,this._pushStreamPrivate=null,this._statusHandlers=[],this._reconnectHandlers=[],this._userPrivateChannel=null,this._channelMultiplexer=new g,this._xEventPrefix="multiplexer-bc-",this._storagePrefix="pushStreamMultiplexerState.",this._userChannelPrefix="private_",this._statusPublic=o.ConnectionStatus.Closed,this._statusPrivate=o.ConnectionStatus.Closed,this._xEventSend=this._xEventPrefix+"send",this._xEventConnectionStatus=this._xEventPrefix+"connectionStatus",this._xEventReconnectCommand=this._xEventPrefix+"reconnectCommand",this._xEventReconnectSuccess=this._xEventPrefix+"reconnectSuccess",this._xEventRequestLogs=this._xEventPrefix+"requestLogs",this._xEventShareLogs=this._xEventPrefix+"shareLogs",this._state=new P,this._shareLogsKey=this._storagePrefix+"shareLogs",this._lockName="pushstream",this._lockPromise=(0,T.createDeferredPromise)(),this._dispatchReconnectSuccessCommandFromOther=e=>{if(this.ownPushStream())return;const[t]=this._decodeParams(e);this._callReconnectHandlers(t)},this._dispatchMessage=(e,t,n)=>{this._dispatchMessageToOthers(e,t,n),this._dispatchMessageToSelf(e,t,n,!1)},this._dispatchMessageFromOther=e=>{if(this.ownPushStream())return;const[t,n,r]=this._decodeParams(e);this._dispatchMessageToSelf(t,n,r,!0)},this._dispatchStatusChangeFromOther=e=>{const t=this._decodeConnectionStatus(e),n=t[0],r=t[1];this.ownPushStream()||this._dispatchStatusChangeToSelf(n,r)},this._dispatchReconnectCommandFromOther=()=>{this.ownPushStream()&&this.forceConnect()},this._onRequestLogs=()=>{if(this.ownPushStream()){const e=this._getOwnLogs();let t="";try{t=JSON.stringify(e)}catch(e){A.logError("Failed to stringify own pushstream logs")}s.TVLocalStorage.setItem(this._shareLogsKey,t),r.TVXWindowEvents.emit(this._xEventShareLogs,t)}},this._onStateChange=(e,t,n)=>{const r="private"===t?this._pushStreamPrivate:this._pushStreamPublic;"add"===e?r?.addChannel(n):r?.removeChannel(n)},this._onNewTabCreate=()=>{this._dispatchStatusChangeToOthers(this._statusPublic,this._statusPrivate)},C()?navigator.locks.request(this._lockName,(async()=>(this._state.onStateChange(this._onStateChange),this._state.onTabCreate(this._onNewTabCreate),this._instantiatePushStream(),window.addEventListener("beforeunload",(()=>this._lockPromise.resolve())),this._lockPromise.promise))):(this._state.onStateChange(this._onStateChange),this._instantiatePushStream()),r.TVXWindowEvents.on(this._xEventSend,this._dispatchMessageFromOther),r.TVXWindowEvents.on(this._xEventConnectionStatus,this._dispatchStatusChangeFromOther),r.TVXWindowEvents.on(this._xEventReconnectCommand,this._dispatchReconnectCommandFromOther),r.TVXWindowEvents.on(this._xEventReconnectSuccess,this._dispatchReconnectSuccessCommandFromOther),r.TVXWindowEvents.on(this._xEventRequestLogs,this._onRequestLogs),e=()=>{window.loginStateChange&&window.loginStateChange.subscribe(this,this._changeLoginState)},
"loading"!==document.readyState?e():document.addEventListener("DOMContentLoaded",e)}on(e,t){this._channelMultiplexer.on(e,t)}off(e,t){this._channelMultiplexer.off(e,t)}onStatus(e){this._statusHandlers.push({handler:e,isPrivate:!1}),setTimeout((()=>e(this._statusPublic)),0)}onPrivateStatus(e){this._statusHandlers.push({handler:e,isPrivate:!0}),setTimeout((()=>e(this._statusPrivate)),0)}onReconnect(e,t=!1){this._reconnectHandlers.push({handler:e,isPrivate:t})}offReconnect(e){this._reconnectHandlers=this._reconnectHandlers.filter((t=>t.handler!==e))}offStatus(e){this._statusHandlers=this._statusHandlers.filter((t=>t.handler!==e))}forceConnect(){A.logNormal(`Creating pushstream connection after force connect. Main tab: ${this.ownPushStream()}`),this.ownPushStream()?(this._pushStreamPublic?.disconnect(),this._pushStreamPrivate?.disconnect(),this._instantiatePushStream()):r.TVXWindowEvents.emit(this._xEventReconnectCommand)}disconnect(){this.ownPushStream()&&this._destructPushStream()}getLogs(e){return new Promise((t=>{const n=setTimeout((()=>{const e=s.TVLocalStorage.getItem(this._shareLogsKey);t(null!==e?JSON.parse(e):[])}),1e3),i=e=>{let s;r.TVXWindowEvents.off(this._xEventShareLogs,i),r.TVXWindowEvents.emit(this._xEventShareLogs,""),clearTimeout(n);try{s=JSON.parse(e)}catch(e){s=[],A.logError("Failed to parse logs received from master tab")}t(s)};this.ownPushStream()?t(this._getOwnLogs(e)):(r.TVXWindowEvents.on(this._xEventShareLogs,i),r.TVXWindowEvents.emit(this._xEventRequestLogs))}))}ownPushStream(){return!!this._pushStreamPublic||!!this._pushStreamPrivate}pushStream(){if(!this.ownPushStream())throw new Error("Not own PushStream");return this._pushStreamPublic}isConnected(){return this._statusPublic>0}status(){return this._statusPublic??o.ConnectionStatus.Closed}statusPrivate(){return this._statusPrivate??o.ConnectionStatus.Closed}userChannel(){if(!this._userPrivateChannel)throw new Error("No user channel");return this._userChannel(this._userPrivateChannel)}addChannel(e){this._state.addChannel(e.startsWith(this._userChannelPrefix)?"private":"public",e)}removeChannel(e){this._state.removeChannel(e.startsWith(this._userChannelPrefix)?"private":"public",e)}static getInstance(){return null===this._instance&&(this._instance=new y),this._instance}_userChannel(e){return this._userChannelPrefix+e}_codeParams(e){const t=[...e];return t.push((new Date).getTime()),JSON.stringify(t)}_decodeParams(e){const t=JSON.parse(e);return t.pop(),t}_instantiatePushStream(){this._pushStreamPublic&&((0,i.trackEvent)("PushstreamDoublePublic",window.user&&window.user.username||"Guest",navigator.userAgent),this._pushStreamPublic.disconnect());const e=this._getPushStreamSettings();this._pushStreamPublic=new p(this._dispatchMessage,e),this._pushStreamPublic.connectionStatus().subscribe((e=>{this._dispatchStatusChange(e,this._statusPrivate)})),this._pushStreamPublic.reconnectEvent().subscribe(null,(()=>{this._dispatchReconnectSuccessCommand()})),this._pushStreamPrivate&&((0,
i.trackEvent)("PushstreamDoublePrivate",window.user&&window.user.username||"Guest",navigator.userAgent),this._pushStreamPrivate.disconnect()),this._pushStreamPrivate=new p(this._dispatchMessage,{...e,maxSize:1}),this._pushStreamPrivate.connectionStatus().subscribe((e=>{this._dispatchStatusChange(this._statusPublic,e)})),this._pushStreamPrivate.reconnectEvent().subscribe(null,(()=>{this._dispatchReconnectSuccessCommand(!0)})),this.on("pushstream_set_user_channel",(e=>{this._setUserChannel(e)})),this._connectChannels()}_destructPushStream(){const e=this._pushStreamPublic;this._pushStreamPublic=null,e?.disconnect();const t=this._pushStreamPrivate;this._pushStreamPrivate=null,t?.disconnect(),this._dispatchStatusChangeFromOther(this._codeParams([o.ConnectionStatus.Closed,o.ConnectionStatus.Closed]))}_connectChannels(){this._pushStreamPublic?.addChannel("public");const e=this._state.collectPushStreamChannels("public");void 0!==e&&e.length>0&&e.map((e=>this._pushStreamPublic?.addChannel(e))),"is_authenticated"in window?this._connectUserChannelInitial(!0):window.loginStateChange&&window.loginStateChange.subscribe(this,this._connectUserChannelInitial),this._isPublicPushstreamEnabled()&&this._pushStreamPublic?.connect()}_getPushStreamSettings(){return(0,E.isOnMobileAppPage)("any")?(0,v.isFeatureEnabled)("enable_eventsource_pushstream_mobile")?O:N:(0,v.isFeatureEnabled)("enable_eventsource_pushstream_transport")?O:N}_isPublicPushstreamEnabled(){return(0,E.isOnMobileAppPage)("any")||!(0,v.isFeatureEnabled)("disable_pushstream_connections_for_anonymous_users")||window.is_authenticated||window.TradingView?.onChartPage}_connectUserChannelInitial(e){e&&(window.is_authenticated?(this._userPrivateChannel=window.user.private_channel??null,this._pushStreamPrivate?.addChannel(this.userChannel()),this._pushStreamPrivate?.connect()):this._userPrivateChannel=null)}_changeLoginState(e){e||(this._isPublicPushstreamEnabled()&&this._pushStreamPublic?.connect(),window.is_authenticated?(this._userPrivateChannel=window.user.private_channel??null,this.ownPushStream()&&(this._pushStreamPrivate?.addChannel(this.userChannel()),this._pushStreamPrivate?.connect())):(this.ownPushStream()&&(this._pushStreamPrivate?.removeChannel(this.userChannel()),this._pushStreamPrivate?.disconnect()),this._userPrivateChannel=null))}_setUserChannel(e){A.logNormal("Set user channel "+e),e!==this._userPrivateChannel&&(this.ownPushStream()&&this._userPrivateChannel&&this._pushStreamPrivate?.removeChannel(this.userChannel()),this._userPrivateChannel=e,this.ownPushStream()&&this._userPrivateChannel&&this._pushStreamPrivate?.addChannel(this.userChannel()))}_dispatchStatusChange(e,t){this._dispatchStatusChangeToOthers(e,t),this._dispatchStatusChangeToSelf(e,t)}_dispatchStatusChangeToSelf(e,t){e!==this._statusPublic&&(this._statusPublic=e,this._callStatusHandlers(e,!1)),t!==this._statusPrivate&&(this._statusPrivate=t,this._callStatusHandlers(t,!0))}_callStatusHandlers(e,t){A.logNormal("Connection status change: "+e+", private "+t+", is main tab "+this.ownPushStream()),
a.telemetry.sendReport("site","pushstream_status_change"),this._statusHandlers.forEach((n=>{n.isPrivate===t&&n.handler(e)}))}_callReconnectHandlers(e){A.logNormal("Reconnection has been made"),this._reconnectHandlers.forEach((t=>{t.isPrivate===e&&t.handler()}))}_dispatchReconnectSuccessCommand(e=!1){if(this.ownPushStream()){this._callReconnectHandlers(e);const t=this._codeParams([e]);r.TVXWindowEvents.emit(this._xEventReconnectSuccess,t)}}_decodeConnectionStatus(e){const t=parseInt(e,10);return isNaN(t)?this._decodeParams(e):[t,t]}_dispatchStatusChangeToOthers(e,t){if(this.ownPushStream()){const n=this._codeParams([e,t]);r.TVXWindowEvents.emit(this._xEventConnectionStatus,n)}}_dispatchMessageToSelf(e,t,n,r){const i=e.channel,s=e.content;this._emit(s,t,i,r)}_dispatchMessageToOthers(e,t,n){const i=[e,t,n];r.TVXWindowEvents.emit(this._xEventSend,this._codeParams(i))}_emit(e,t,n,r){this._channelMultiplexer.emit(e,t,n,r)}_getOwnLogs(e){if(this.ownPushStream()){const t=(0,c.getRawLogHistory)(e,_),n=this.pushStream()?.getLogs();return[].concat(t,n??[])}return[]}}y._instance=null;const R=y.getInstance()},564894:(e,t,n)=>{"use strict";n.d(t,{hasService:()=>c,registerService:()=>o,service:()=>u,unregisterService:()=>a,waitServiceRegistered:()=>l});var r=n(925049);const i={},s=new Map;function o(e,t){if(c(e))throw new Error("Service already registered");i[e.id]=t;const n=s.get(e.id);void 0!==n&&(s.delete(e.id),n.resolve(t))}function a(e){if(!c(e))throw new Error("Service not found");i[e.id]=void 0}function c(e){return void 0!==i[e.id]}function u(e){const t=i[e.id];if(void 0===t)throw new Error("ServiceLocator: Service "+e.id+" not found");return t}function l(e){if(c(e))return Promise.resolve(u(e));let t=s.get(e.id);return void 0===t&&(t=(0,r.createDeferredPromise)(),s.set(e.id,t)),t.promise}},526225:(e,t,n)=>{"use strict";n.r(t),n.d(t,{syncUserConversionData:()=>h,syncUserData:()=>l});var r=n(735566),i=n(345848),s=n(803912),o=n(357173);const a=(0,r.getLogger)("User.Sync");function c(e){return`${e}_${window.user&&window.user.username||""}`}function u(e,t,n,r=!0){n!==window.user.pro_plan&&(window.user.pro_plan=n,window.user.is_pro=Boolean(n),(0,i.trackEvent)("Sync User Data","Different Pro Plan",c(e))),t!==window.is_authenticated&&(window.is_authenticated=t,r&&window.loginStateChange.fire(),(0,i.trackEvent)("Sync User Data","Different Auth",c(e)))}async function l(e){try{u(e,!0,(await(0,o.getProPlanDetailsForUser)()).pro_plan)}catch(t){!function(e,t){403===t.status&&["not_authenticated","login_required"].includes(t.type||"")?u(e,!1,void 0):a.logError(t.message)}(e,t)}}async function h(e,t=!0){const n=new URL("/pricing/",window.location.origin),r=new URLSearchParams(window.location.search);r.has("_test_country")&&n.searchParams.append("_test_country",r.get("_test_country")??"");const i=await(0,s.fetch)(n.href),o=await i.json();return u(e,o.is_authenticated,o.user.pro_plan,t),o}},261309:(e,t,n)=>{"use strict";n.d(t,{SYMBOL_LIST_REPOSITORY_BACKEND_SERVICE:()=>r});const r={id:"SymbolListRepositoryBackend"}},83871:(e,t,n)=>{
"use strict";n.d(t,{SYMBOL_LIST_SERVICE:()=>r});const r={id:"SymbolListService"}},306388:(e,t,n)=>{"use strict";n.d(t,{initSymbolListService:()=>o});var r=n(564894),i=n(83871),s=n(213377);function o(){return Promise.all([Promise.all([n.e(56316),n.e(70336),n.e(92537),n.e(98185),n.e(18883),n.e(15371),n.e(32937),n.e(46195),n.e(67780),n.e(79317),n.e(32227),n.e(50030),n.e(5483),n.e(49330),n.e(62526),n.e(27589),n.e(18242),n.e(38506),n.e(54620),n.e(44692),n.e(1026)]).then(n.bind(n,999614)),Promise.all([n.e(56316),n.e(70336),n.e(92537),n.e(98185),n.e(18883),n.e(15371),n.e(32937),n.e(46195),n.e(67780),n.e(79317),n.e(32227),n.e(50030),n.e(5483),n.e(49330),n.e(62526),n.e(27589),n.e(18242),n.e(38506),n.e(54620),n.e(44692),n.e(1026)]).then(n.bind(n,38506)),Promise.all([n.e(56316),n.e(70336),n.e(92537),n.e(98185),n.e(18883),n.e(15371),n.e(32937),n.e(46195),n.e(67780),n.e(79317),n.e(32227),n.e(50030),n.e(5483),n.e(49330),n.e(62526),n.e(27589),n.e(18242),n.e(38506),n.e(54620),n.e(44692),n.e(1026)]).then(n.bind(n,850935)),Promise.all([n.e(56316),n.e(70336),n.e(92537),n.e(98185),n.e(18883),n.e(15371),n.e(32937),n.e(46195),n.e(67780),n.e(79317),n.e(32227),n.e(50030),n.e(5483),n.e(49330),n.e(62526),n.e(27589),n.e(18242),n.e(38506),n.e(54620),n.e(44692),n.e(1026)]).then(n.bind(n,244692)),s.enabled("widget")?null:Promise.all([n.e(56316),n.e(70336),n.e(92537),n.e(98185),n.e(18883),n.e(15371),n.e(32937),n.e(46195),n.e(67780),n.e(79317),n.e(32227),n.e(50030),n.e(5483),n.e(49330),n.e(62526),n.e(27589),n.e(18242),n.e(38506),n.e(54620),n.e(44692),n.e(1026)]).then(n.bind(n,216752))]).then((([e,t,n,s,o])=>{if((0,r.hasService)(i.SYMBOL_LIST_SERVICE))return(0,r.service)(i.SYMBOL_LIST_SERVICE);const{store:a,runner:c}=e.configureStore(),u=c.run(t.symbolListRepositorySaga);(0,r.registerService)(i.SYMBOL_LIST_SERVICE,{store:a,runner:c,actions:{addSymbols:s.addSymbolsThunk,initWidget:n.initWidget,saveListAs:s.saveListAsThunk,createNewWatchList:s.userCreateWatchlistThunk},task:u});const l=(0,r.service)(i.SYMBOL_LIST_SERVICE);return null!==o&&o.getCustomSymbolListSynchronizationServiceInstance(l),l}))}},837657:(e,t,n)=>{"use strict";n.d(t,{isSeparatorItem:()=>i});var r=n(173777);function i(e){return(0,r.isSeparatorItem)(e)}},889267:(e,t,n)=>{"use strict";n.d(t,{factorOutBraces:()=>_,getTokenAtPos:()=>d,isBinaryOperator:()=>l,isSpread:()=>h,parseToken:()=>p,shortName:()=>m,shortNameFromTokens:()=>f,symbolTokenEscapeRe:()=>o,tokenize:()=>u});var r=n(173777),i=n(125226);const s=/(?:[^-+\/*^\s]'|[a-zA-Z0-9_\u0370-\u1FFF_\u2E80-\uFFFF])(?:[^-+\/*^\s]'|[a-zA-Z0-9_\u0020\u0370-\u1FFF_\u2E80-\uFFFF_!|:.&])*|'.+?'/,o=/[+\-/*]/,a=(e=(0,i.isFeatureEnabled)("allow_trailing_whitespace_in_number_token"))=>({number:e?/\d+(?:\.\d*|(?![a-zA-Z0-9_!:.&]))(?:\s*(?=\s*$))?|\.\d+(?:\s*(?=\s*$))?/:/\d+(?:\.\d*|(?![a-zA-Z0-9_!:.&]))|\.\d+/,incompleteNumber:/\./,symbol:s,incompleteSymbol:/'[^']*/,separatorPrefix:r.SEPARATOR_PREFIX,openBrace:"(",closeBrace:")",plus:"+",minus:"-",multiply:"*",divide:"/",power:"^",whitespace:/[\0-\x20\s]+/,unparsed:null
}),c=(e=a())=>new RegExp(Object.values(e).map((e=>{return null===e?"":`(${"string"==typeof e?(t=e,t.replace(/[\^$()[\]{}*+?|\\]/g,"\\$&")):e.source})`;var t})).filter((e=>""!==e)).concat(".").join("|"),"g");function u(e,t=a()){if(!e)return[];const n=[],r=Object.keys(t);let i;const s=c(t);for(;i=s.exec(e);){let e=!1;for(let t=r.length;t--;)if(i[t+1]){r[t]&&n.push({value:i[t+1],type:r[t],precedence:0,offset:i.index}),e=!0;break}e||n.push({value:i[0],type:"unparsed",precedence:0,offset:i.index})}return n}function l(e){return"plus"===e||"minus"===e||"multiply"===e||"divide"===e||"power"===e}function h(e){return e.length>1&&e.some((e=>l(e.type)))}function d(e,t){for(let n=0;n<e.length;n++){const r=e[n],i="symbol"===r.type||"incompleteSymbol"===r.type||"number"===r.type;if(r.offset<=t&&t<=r.offset+r.value.length&&i)return r}return null}function _(e){e=function(e){const t=[];for(const n of e)"whitespace"!==n.type&&t.push(n);return t}(e);const t=[],n=[];let r;for(let i=0;i<e.length;i++){const s=e[i];switch(s.type){case"plus":case"minus":case"multiply":case"divide":case"power":n.length&&n[n.length-1].minPrecedence>s.precedence&&(n[n.length-1].minPrecedence=s.precedence);break;case"openBrace":r={minPrecedence:1/0,openBraceIndex:i},n.push(r);break;case"closeBrace":{if(r=n.pop(),!r)break;const s=e[r.openBraceIndex-1],o=e[i+1],a=s&&("plus"===s.type||"multiply"===s.type);(!l(o?.type)||o?.precedence<=r.minPrecedence)&&(!l(s?.type)||s?.precedence<r?.minPrecedence||s?.precedence===r?.minPrecedence&&a)&&(t.unshift(r.openBraceIndex),t.push(i),n.length&&n[n.length-1].minPrecedence>r.minPrecedence&&(n[n.length-1].minPrecedence=r.minPrecedence))}}}for(let n=t.length;n--;)e.splice(t[n],1);return e}function f(e){return _(e).reduce(((e,t)=>{if("symbol"!==t.type)return e+t.value;const[,n]=p(t);return n?e+n:e}),"")}function m(e){return f(u(e))}function p(e){const t=/^'?(?:([A-Z0-9_]+):)?(.*?)'?$/i.exec(e.value);return null===t?[void 0,void 0]:[t[1],t[2]]}},855247:(e,t,n)=>{"use strict";n.d(t,{numOfDecimalPlaces:()=>i});var r=n(960521);function i(e){return(new r.Big(e).toFixed().split(".")[1]||"").length}},544151:(e,t,n)=>{"use strict";n.d(t,{getMinTick:()=>u,getMinTickData:()=>c,makePriceIndexToPriceConverter:()=>_,makePriceToPriceIndexConverter:()=>d,makeVariableMinTickData:()=>h});var r=n(960521),i=n(150335),s=n(982367),o=n(855247);function a(e){return e?(0,r.Big)(e.minMove).div(e.priceScale).toNumber():NaN}function c(e){const{minTick:t,price:n,variableMinTickData:r,shouldCheckForEquality:s}=e,o=(0,i.isNumber)(t)?l(t):t;return void 0===r?o:function(e,t,n=!1){for(let r=0;r<t.length;r++){if(e<t[r].price)return t[r].minTick;if(n&&e===t[r].price)return t[r].minTick}return t[t.length-1].minTick}(n,r,s)}function u(e){return a(c(e))}function l(e){const t=(0,o.numOfDecimalPlaces)(e),n=Math.pow(10,t);return{priceScale:n,minMove:(0,r.Big)(e).mul(n).toNumber()}}function h(e,t){const n=[{minTick:(0,i.isNumber)(e)?l(e):e,price:1/0,maxIndex:1/0}];try{const e=t.split(" ").map(((e,t)=>(0,s.isEven)(t)?function(e){const t=Number(e)
;if(Number.isFinite(t))return l(t);{const t=e.split("/");if(t.length<2||t.length>3)throw new Error(`Unexpected mintick: ${e}`);const n=Number(t[1]),r=Number(t[0]);if(!Number.isFinite(n)||!Number.isFinite(r))throw new Error(`Unexpected mintick: ${e}`);const i=3===t.length?Number(t[2]):void 0;if(void 0!==i&&!Number.isFinite(i))throw new Error(`Unexpected mintick: ${e}`);const s={priceScale:n,minMove:r};return void 0!==i&&(s.minMove2=i),s}}(e):function(e){const t=Number(e);if(Number.isNaN(t))throw new Error(`Unexpected price limit: ${e}`);return t}(e)));if((0,s.isEven)(e.length))throw new Error("Theme must not be event number of elements");const n=[];for(let t=0;t<e.length;t+=2){const i=e[t+1]??1/0,s=n[n.length-1]?.price??0,o=n[n.length-1]?.maxIndex??0,c=i===1/0?1/0:new r.Big(i).minus(s).div(a(e[t])).plus(o).toNumber();n.push({minTick:e[t],price:i,maxIndex:c})}return n}catch{return n}}function d(e,t){return n=>{if(!Number.isFinite(n))return NaN;if(void 0===t)return new r.Big(n).div(e).round().toNumber();for(let e=0;e<t.length;e++){const{price:i,minTick:s}=t[e],o=t[e-1]?.price??0,c=t[e-1]?.maxIndex??0;if(n<i)return new r.Big(n).minus(o).div(a(s)).plus(c).round().toNumber()}return NaN}}function _(e,t){return n=>{if(!Number.isFinite(n))return NaN;if(void 0===t)return(0,r.Big)(n).mul(e).toNumber();for(let e=0;e<t.length;e++){const{maxIndex:i,minTick:s}=t[e],o=t[e-1]?.price??0,c=t[e-1]?.maxIndex??0;if(n<i)return new r.Big(n).minus(c).mul(a(s)).plus(o).toNumber()}return NaN}}},909456:(e,t,n)=>{"use strict";n.d(t,{numDependencyFormatter:()=>s,numberToStringWithLeadingZero:()=>i});var r=n(536794);function i(e,t){if(!(0,r.isNumber)(e))return"n/a";if(!(0,r.isInteger)(t))throw new TypeError("invalid length");if(t<0||t>24)throw new TypeError("invalid length");if(0===t)return e.toString();return("0000000000000000"+e.toString()).slice(-t)}function s(e){const t=new Map;return n=>{const r=n??-1;let i=t.get(r);return i||(i=e(n),t.set(r,i)),i}}},781441:(e,t,n)=>{"use strict";n.d(t,{formatNumber:()=>o,parseNumber:()=>c});var r=n(960521),i=n(259332),s=n(969680);function o(e,t,n,i,s){if(!Number.isFinite(e))return`${e}`;const o=-1===Math.sign(e)?"-":"";e=Math.abs(e);let a=void 0===n?e.toString():e.toFixed(n);if(a.includes("e")){if(!i)return`${o}${a.replace(".",t.decimalSign)}`;{const t=new r.Big(e);a=t.lt(1)?t.toFixed():t.toString()}}const c=a.split("."),u=c[0];let l=c[1];const h=function(e,t){let n=e.length;const r=[];for(;n>0;)r.unshift(e.slice(Math.max(n-3,0),n)),n-=3;return r.join(t)}(u,t.groupingSeparator);return void 0!==n&&(l=0===n?void 0:e.toFixed(n).slice(-n)),void 0!==s&&void 0!==l&&(l=function(e,t){let n=e.length-1;for(let r=n;r>=t&&"0"===e[r];r-=1)n-=1;return e.slice(0,n+1)}(l,s)),l?`${o}${h}${t.decimalSign}${l}`:`${o}${h}`}const a=(0,i.default)((e=>{const t=e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&");return new RegExp(t,"gm")}));function c(e,t){if(/^(NaN|[+|-]?Infinity)$/.test(e))return parseFloat(e);e=(0,s.stripLTRMarks)(e);const n=a(t.groupingSeparator);return n&&(e=e.replace(n,"")),e=e.replace(t.decimalSign,"."),
/^(\+|-)?\d+(\.\d+|\.)?(e(\+|-)?\d+)?$/.test(e)?parseFloat(e):NaN}},976531:(e,t,n)=>{"use strict";let r;n.d(t,{formatterOptions:()=>i,getNumberFormat:()=>l});const i={decimalSign:".",decimalSignFractional:"'"};const s={groupingSeparator:",",decimalSign:"."},o={groupingSeparator:".",decimalSign:","},a={groupingSeparator:" ",decimalSign:","},c={groupingSeparator:"",decimalSign:"."},u=new Map([["en",s],["th",s],["ja",s],["ko",s],["zh",s],["zh_TW",s],["ar",s],["he_IL",s],["ms_MY",s],["vi",s],["de",o],["es",o],["it",o],["tr",o],["pt",o],["id_ID",o],["fr",a],["pl",a],["ru",a]]);function l(e){if(e)return{decimalSign:i.decimalSign,groupingSeparator:""};const t=r||window.language||"";return u.get(t)??c}},808708:(e,t,n)=>{"use strict";n.d(t,{NumericFormatter:()=>s});var r=n(781441),i=n(976531);class s{constructor(e={}){this._options=e}format(e,t){if(!Number.isFinite(e))return String(e);const{ignoreLocaleNumberFormat:n,precision:o,minPrecision:a}=this._options,c=(0,i.getNumberFormat)(n||t?.ignoreLocaleNumberFormat);return void 0===o?s._formatNoEImpl(e,c,o,a):(0,r.formatNumber)(e,c,o,void 0,a)}parse(e,t){const{ignoreLocaleNumberFormat:n,precision:s}=this._options,o=(0,i.getNumberFormat)(n||t?.ignoreLocaleNumberFormat);let a=(0,r.parseNumber)(e,o);return Number.isFinite(a)?(s&&(a=+a.toFixed(s)),{res:!0,value:a}):{res:!1}}static formatNoE(e,t){return this._formatNoEImpl(e,t)}static _formatNoEImpl(e,t,n,i){return Number.isFinite(e)?(t=t??{groupingSeparator:"",decimalSign:"."},(0,r.formatNumber)(e,t,n,!0,i)):String(e)}}},722652:(e,t,n)=>{"use strict";n.d(t,{PercentageFormatter:()=>o,formattingSymbol:()=>s});var r=n(220129),i=n(969680);const s="%";class o extends r.PriceFormatter{constructor(e={}){void 0!==e.decimalPlaces&&(e.priceScale=Math.pow(10,e.decimalPlaces)),super(e),this.type="percentage"}state(){return{...super.state(),percent:!0}}parse(e,t){return e=e.replace(s,""),super.parse(e,t)}format(e,t={}){const{useRtlFormat:n=!0}=t,r=super.format(e,{...t,useRtlFormat:!1})+s;return n?(0,i.forceLTRStr)(r):r}static serialize(e){return e.state()}static deserialize(e){return new o(e)}}},220129:(e,t,n)=>{"use strict";n.d(t,{PriceFormatter:()=>T,isFormatterHasForexAdditionalPrecision:()=>b});var r=n(960521),i=n(735566),s=n(650151),o=n(444372),a=n(544151),c=n(969680);const u=new RegExp(/^(-?)[0-9]+$/);function l(e,t,n,r){let i=0;if(e>0&&t>0){let t=e;for(n&&r&&(t/=r);t>1;)t/=10,i++}return i}function h(e,t,n){const r=(0,s.ensureNotNull)((0,a.getMinTickData)({price:n,minTick:null,variableMinTickData:t,shouldCheckForEquality:!0})),{priceScale:i,minMove:o,minMove2:c}=r;return{priceScale:i,minMove:o,fractionalLength:l(i,o,e,c)}}class d{constructor(e){this._formatterErrors={custom:o.t(null,void 0,n(366123)),fraction:o.t(null,void 0,n(339643)),secondFraction:o.t(null,void 0,n(370784))};const{priceScale:t,minMove:r,minMove2:i,ignoreMinMove:s,variableMinTick:c,fractionalLength:u}=e;this._priceScale=t,this._minMove=r,this._minMove2=i,this._ignoreMinMove=s,this._variableMinTickData=void 0===c?void 0:(0,a.makeVariableMinTickData)({priceScale:t,
minMove:r,minMove2:i},c),this._fractionalLength=u}formatImpl(e,t={}){const{signPositive:n,signNegative:r=!0,tailSize:i,cutFractionalByPrecision:s=!1,useRtlFormat:o=!0,variableMinTickDataPrice:a,ignoreLocaleNumberFormat:u,removeAllEndingZeros:l}=t;let h="";e<0?h=!1===r?"":"−":e&&!0===n&&(h="+");const d=h+this._formatUnsigned(Math.abs(e),i,s,a,u,l);return o?(0,c.forceLTRStr)(d):d}parse(e,t){return"+"===(e=(e=(0,c.stripLTRMarks)(e)).replace("−","-"))[0]&&(e=e.substring(1)),this._parseUnsigned(e,t)}_removeEndingZeros(e,t){for(let n=0;n<t&&"0"===e[e.length-1];n++)e=e.substring(0,e.length-1);return e}}var _=n(781441),f=n(909456),m=n(976531);const p=(0,i.getLogger)("Chart.DecimalPriceFormatter");class g extends d{constructor(e){super(e);const{minMove2:t,ignoreLocaleNumberFormat:n}=e;void 0!==t&&10!==t&&0!==t&&1!==t&&p.logDebug("invalid minmove2"),this._ignoreLocaleNumberFormat=n}hasForexAdditionalPrecision(){return 10===this._minMove2}_parseUnsigned(e,t){return this._parseAsDecimal(e,t)}_formatUnsigned(e,t,n,r,i,s){const o={price:Math.abs(e),priceScale:this._priceScale,minMove:this._minMove,fractionalLength:this._fractionalLength,tailSize:t,cutFractionalByPrecision:n,ignoreLocaleNumberFormat:i,removeAllEndingZeros:s};return void 0!==this._variableMinTickData&&(Object.assign(o,h(!1,this._variableMinTickData,r??o.price)),this._ignoreMinMove&&(o.minMove=1)),this._formatAsDecimal(o)}_formatAsExponential(e,t){const n=Math.floor(.75*Math.log10(this._priceScale)),r=e*Math.pow(10,n),i=`e-${n}`,s=Math.log10(this._priceScale)-n;return`${r.toFixed(s).replace(".",t.decimalSign)}${i}`}_formatAsDecimal(e){const{price:t,priceScale:n,minMove:i,fractionalLength:s=0,tailSize:o=0,cutFractionalByPrecision:a,ignoreLocaleNumberFormat:c,removeAllEndingZeros:u}=e,l=(0,m.getNumberFormat)(this._ignoreLocaleNumberFormat||c);if(t>=1e21)return t.toString().replace(".",l.decimalSign);if(n>1e15)return this._formatAsExponential(t,l);const h=Math.pow(10,o)*n/(a?1:i),d=1/h;let p;if(h>1)p=Math.floor(t);else{const e=Math.floor(Math.round(t/d)*d);p=0===Math.round((t-e)/d)?e:e+d}let g="";if(h>1){let e=a?new r.Big(t).mul(h).round(void 0,0).minus(new r.Big(p).mul(h)).toNumber():parseFloat((Math.round(t*h)-p*h).toFixed(s));e>=h&&(e-=h,p+=1),e=a?new r.Big(e).round(s,0).toNumber():parseFloat(e.toFixed(s))*i;const n=(0,f.numberToStringWithLeadingZero)(e,s+o),c=this._removeEndingZeros(n,u?n.length:o);g=c?l.decimalSign+c:c}return(0,_.formatNumber)(p,l)+g}_parseAsDecimal(e,t={}){const{ignoreLocaleNumberFormat:n}=t,r=(0,m.getNumberFormat)(this._ignoreLocaleNumberFormat||n),i=(0,_.parseNumber)(e,r);return Number.isFinite(i)?{value:i,res:!0,suggest:this.formatImpl(i)}:{error:this._formatterErrors.custom,res:!1}}}const v=(0,i.getLogger)("Chart.FractionalPriceFormatter");class S extends d{constructor(e){super(e);const{minMove2:t}=e;null!=t&&t>0&&2!==t&&4!==t&&8!==t&&v.logDebug("invalid minmove2")}hasForexAdditionalPrecision(){return!1}_parseUnsigned(e){return this._minMove2?this._parseAsDoubleFractional(e):this._parseAsSingleFractional(e)}_formatUnsigned(e,t,n,r){const i={
price:Math.abs(e),priceScale:this._priceScale,minMove:this._minMove,minMove2:this._minMove2,fractionalLength:(0,s.ensureDefined)(this._fractionalLength),tailSize:t};return void 0!==this._variableMinTickData&&Object.assign(i,h(!0,this._variableMinTickData,r??i.price)),this._formatAsFractional(i)}_parseAsSingleFractional(e){let t=u.exec(e);if(t){const t=parseFloat(e);return{value:t,res:!0,suggest:this.formatImpl(t)}}if(t=new RegExp("^(-?)([0-9]+)\\"+m.formatterOptions.decimalSignFractional+"([0-9]+)$").exec(e),t){const e=!!t[1],n=parseInt(t[2]),r=this._priceScale,i=this._patchFractPart(parseInt(t[3]),1,r);if(i>=r||i<0)return{error:this._formatterErrors.fraction,res:!1};let s=n+i/r;return e&&(s=-s),{value:s,res:!0,suggest:this.formatImpl(s)}}return{error:this._formatterErrors.custom,res:!1}}_parseAsDoubleFractional(e){let t=u.exec(e);if(t){const t=parseFloat(e);return{value:t,res:!0,suggest:this.formatImpl(t)}}if(t=new RegExp("^(-?)([0-9]+)\\"+m.formatterOptions.decimalSignFractional+"([0-9]+)\\"+m.formatterOptions.decimalSignFractional+"([0-9]+)$").exec(e),t){const e=!!t[1],n=parseInt(t[2]),r=void 0!==this._minMove2&&null!==this._minMove2?this._minMove2:NaN,i=this._priceScale/r,s=this._minMove2,o=this._patchFractPart(parseInt(t[3]),1,i),a=this._patchFractPart(parseInt(t[4]),2,s);if(o>=i||o<0)return{error:this._formatterErrors.fraction,res:!1};if(null!=s&&a>=s||a<0)return{error:this._formatterErrors.secondFraction,res:!1};let c=null!=s?n+o/i+a/(i*s):NaN;return e&&(c=-c),{value:c,res:!0,suggest:this.formatImpl(c)}}return{error:this._formatterErrors.custom,res:!1}}_patchFractPart(e,t,n){const r={0:0,5:1},i={0:0,2:1,5:2,7:3},s={0:0,1:1,2:2,3:3,5:4,6:5,7:6,8:7};return 2===n?void 0===r[e]?-1:r[e]:4===n?void 0===i[e]?-1:i[e]:8===n&&2===t?void 0===s[e]?-1:s[e]:e}_formatAsFractional(e){const{price:t,tailSize:n,priceScale:r,minMove:i,minMove2:s,fractionalLength:o}=e,a=r/i;let c=Math.floor(t),u=n?Math.floor(t*a)-c*a:Math.round(t*a)-c*a;u===a&&(u=0,c+=1);let l="";if(n){let e=(t-c-u/a)*a;e=Math.round(e*Math.pow(10,n)),l=(0,f.numberToStringWithLeadingZero)(e,n),l=this._removeEndingZeros(l,n)}if(!o)throw new Error("_fractionalLength is not calculated");let h="";if(s){const e=u%s;u=(u-e)/s;const t=(0,f.numberToStringWithLeadingZero)(u,o),n=this._getFractPart(e,2,s);h=t+m.formatterOptions.decimalSignFractional+n}else u=this._getFractPart(u,1,r),h=(0,f.numberToStringWithLeadingZero)(u*i,o);return c.toString()+m.formatterOptions.decimalSignFractional+h+l}_getFractPart(e,t,n){const r=[0,5],i=[0,2,5,7],s=[0,1,2,3,5,6,7,8];return 2===n?void 0===r[e]?-1:r[e]:4===n?void 0===i[e]?-1:i[e]:8===n&&2===t?void 0===s[e]?-1:s[e]:e}}var E=n(536794);function b(e){return"hasForexAdditionalPrecision"in e}class T{constructor(e={}){this.type="price";const{minMove2:t,fractional:n,variableMinTick:r,ignoreMinMove:i,ignoreLocaleNumberFormat:s}=e,o=!e.minMove||i?1:e.minMove,a=(0,E.isNumber)(e.priceScale)&&(0,E.isInteger)(e.priceScale)?e.priceScale:100,c=l(a,o,n,t),u={...e,minMove:o,priceScale:a,fractionalLength:c};if(a<0)throw new TypeError("invalid base")
;this._priceScale=a,this._minMove=o,this._minMove2=t,this._fractional=n,this._variableMinTick=r,this._ignoreMinMove=i,this._fractionalLength=c,this._ignoreLocaleNumberFormat=s,this._implementation=n?new S(u):new g(u)}isFractional(){return!!this._fractional}state(){return{minMove:this._minMove,minMove2:this._minMove2,priceScale:this._priceScale,variableMinTick:this._variableMinTick,ignoreMinMove:this._ignoreMinMove,fractional:this._fractional}}formatChange(e,t,n){return this._implementation.formatImpl(e-t,{...n,variableMinTickDataPrice:Math.min(Math.abs(e),Math.abs(t))})}format(e,t){return this._implementation.formatImpl(e,t)}parse(e,t){return this._implementation.parse(e,t)}hasForexAdditionalPrecision(){return this._implementation.hasForexAdditionalPrecision()}static serialize(e){return e.state()}static deserialize(e){return new T(e)}}},51196:(e,t,n)=>{"use strict";n.d(t,{PLACE_HOLDER:()=>o,VolumeFormatter:()=>u});var r=n(444372),i=n(808708),s=n(536794);const o="---",a=[{value:3,letter:"K"},{value:6,letter:"M"},{value:9,letter:"B"},{value:12,letter:"T"}];function c(e,t){const n=e-t;return a.find((e=>e.value>=n))??a[a.length-1]}class u{constructor(e={}){this.type="volume";const{precision:t=0,minPrecision:n=0,dimensionPrecision:r=2,dimensionMinPrecision:s=0,significantDigits:o=3,ignoreLocaleNumberFormat:a,removeSpaceBeforeDimension:c}=e;this._precision=t,this._formatter=new i.NumericFormatter({ignoreLocaleNumberFormat:a,precision:this._precision,minPrecision:n}),this._dimensionPrecision=r,this._dimensionFormatter=new i.NumericFormatter({ignoreLocaleNumberFormat:a,precision:this._dimensionPrecision,minPrecision:s}),this._significantDigits=o,this._fractionalValues=void 0!==t&&t>0,this._spaceBeforeDimension=c?"":" ",this._options=e}state(){const{ignoreLocaleNumberFormat:e,...t}=this._options;return t}format(e,t){if(!(0,s.isNumber)(e))return o;if(Math.abs(e)>=1e100)return r.t(null,void 0,n(696935));let i="";Math.abs(e)<1&&(e=+e.toFixed(this._precision)),e<0?i="−":e>0&&t?.signPositive&&(i="+"),e=Math.abs(e);const a=!!(t?.ignoreLocaleNumberFormat??this._options.ignoreLocaleNumberFormat);let u,l,h=Math.floor(Math.log10(e))+1;if(h<=this._significantDigits&&(e=+e.toFixed(this._precision),h=Math.floor(Math.log10(e))+1),h<=this._significantDigits)u=this._formatNumber(e,a,this._formatter);else{let t=c(h,this._significantDigits);const n=Math.pow(10,t.value);e=+(e/n).toFixed(this._dimensionPrecision)*n,t=c(Math.floor(Math.log10(e))+1,this._significantDigits),u=this._formatNumber(e/Math.pow(10,t.value),a,this._dimensionFormatter),l=t.letter}return l?`${i}${u}${this._spaceBeforeDimension}${l}`:`${i}${u}`}parse(e,t){if("---"===e)return{error:"not a number",res:!1,value:NaN};const n={K:1e3,M:1e6,B:1e9,T:1e12},r=(e=e.replace("−","-")).slice(-1);if(n.hasOwnProperty(r)){const i=this._formatter.parse(e.slice(0,-1).trim(),t),o=i.res?i.value:NaN;return(0,s.isNumber)(o)?{res:!0,value:o*n[r]}:{error:"not a number",res:!1,value:NaN}}{const n=this._formatter.parse(e.trim(),t),r=n.res?n.value:NaN;return(0,s.isNumber)(r)?{res:!0,value:r}:{
error:"not a number",res:!1,value:NaN}}}static serialize(e){return e.state()}static deserialize(e){return new u(e)}_formatNumber(e,t,n){if(this._fractionalValues&&0!==e){const t=14-Math.ceil(Math.log10(e)),n=Math.pow(10,t);e=Math.round(e*n)/n}return n.format(e,{ignoreLocaleNumberFormat:t})}}},477786:(e,t,n)=>{"use strict";n.d(t,{Interval:()=>l,ResolutionKind:()=>s,SpecialResolutionKind:()=>o,isHour:()=>d});const r=/^(\d*)([TSHDWMR])$/,i=/^(\d+)$/;var s,o;!function(e){e.Ticks="ticks",e.Seconds="seconds",e.Minutes="minutes",e.Days="days",e.Weeks="weeks",e.Months="months",e.Range="range",e.Invalid="invalid"}(s||(s={})),function(e){e.Hours="hours"}(o||(o={}));const a={};a[s.Ticks]=1e3,a[s.Seconds]=1e3,a[s.Minutes]=60*a[s.Seconds],a[s.Days]=1440*a[s.Minutes],a[s.Weeks]=7*a[s.Days];const c={T:s.Ticks,S:s.Seconds,D:s.Days,W:s.Weeks,M:s.Months,R:s.Range},u=new Set([s.Ticks,s.Seconds,s.Minutes]);class l{constructor(e,t){this._kind=s.Invalid,this._multiplier=0,e!==s.Invalid&&t>0&&(this._kind=e,this._multiplier=t)}kind(){return this._kind}guiKind(){return this.isMinuteHours()?o.Hours:this._kind}multiplier(){return this._multiplier}isValid(){return this.kind()!==s.Invalid&&this.multiplier()>0}isDWM(){return this.isValid()&&!this.isRange()&&!this.isIntraday()&&!this.isTicks()}isIntraday(){const e=u.has(this.kind());return this.isValid()&&e}isSeconds(){return this.kind()===s.Seconds}isMinutes(){return this.kind()===s.Minutes}isMinuteHours(){return this.kind()===s.Minutes&&d(this.multiplier())}isDays(){return this.kind()===s.Days}isWeeks(){return this.kind()===s.Weeks}isMonths(){return this.kind()===s.Months}isRange(){return this.kind()===s.Range}isTicks(){return this.kind()===s.Ticks}is1Tick(){return this.isTicks()&&1===this.multiplier()}isTimeBased(){return!this.isRange()}letter(){return this.isValid()&&this.kind()!==s.Minutes?this.kind()[0].toUpperCase():""}value(){return this.isValid()?this.kind()===s.Minutes?this.multiplier()+"":this.multiplier()+this.letter():""}isEqualTo(e){if(!(e instanceof l))throw new Error("Argument is not an Interval");return!(!this.isValid()||!e.isValid())&&(this.kind()===e.kind()&&this.multiplier()===e.multiplier())}inMilliseconds(e=Date.now()){if(!this.isValid()||this.isRange())return NaN;if(this.isMonths()){const t=new Date(e);t.setUTCMonth(t.getUTCMonth()+(this.multiplier()||1));return+t-e}const t=this.multiplier();return a[this.kind()]*t}static isEqual(e,t){return e===t||l.parse(e).isEqualTo(l.parse(t))}static parseExt(e){e=(e+"").toUpperCase().split(",")[0];let t=r.exec(e);return null!==t?"H"===t[2]?{interval:new l(s.Minutes,60*h(t[1])),guiResolutionKind:o.Hours}:{interval:new l(c[t[2]],h(t[1])),guiResolutionKind:c[t[2]]}:(t=i.exec(e),null!==t?{interval:new l(s.Minutes,h(t[1])),guiResolutionKind:s.Minutes}:{interval:new l(s.Invalid,0),guiResolutionKind:s.Invalid})}static parse(e){return l.parseExt(e).interval}static kind(e){return l.parse(e).kind()}static isValid(e){return l.parse(e).isValid()}static isDWM(e){return l.parse(e).isDWM()}static isIntraday(e){return l.parse(e).isIntraday()}
static isSeconds(e){return l.parse(e).isSeconds()}static isMinutes(e){return l.parse(e).isMinutes()}static isMinuteHours(e){return l.parse(e).isMinuteHours()}static isDays(e){return l.parse(e).isDays()}static isWeeks(e){return l.parse(e).isWeeks()}static isMonths(e){return l.parse(e).isMonths()}static isRange(e){return l.parse(e).isRange()}static isTicks(e){return l.parse(e).isTicks()}static isTimeBased(e){return l.parse(e).isTimeBased()}static normalize(e){const t=l.parse(e);return t.isValid()?t.value():null}}function h(e){return 0===e.length?1:parseInt(e,10)}function d(e){return e>=60&&!(e%60)}},870855:(e,t,n)=>{"use strict";n.r(t),n.d(t,{SERIES_STATUS_TEXT:()=>E,STATUS_CALCULATION_ERROR:()=>p,STATUS_DELAYED:()=>h,STATUS_DELAYED_STREAMING:()=>d,STATUS_EOD:()=>u,STATUS_ERROR:()=>m,STATUS_INVALID_SYMBOL:()=>a,STATUS_LOADING:()=>s,STATUS_NO_BARS:()=>_,STATUS_OFFLINE:()=>r,STATUS_PULSE:()=>l,STATUS_READY:()=>o,STATUS_REPLAY:()=>f,STATUS_RESOLVING:()=>i,STATUS_SNAPSHOT:()=>c,STATUS_UNSUPPORTED_RESOLUTION:()=>g,STYLE_AREA:()=>C,STYLE_BARS:()=>b,STYLE_BASELINE:()=>L,STYLE_CANDLES:()=>T,STYLE_COLUMNS:()=>k,STYLE_HEIKEN_ASHI:()=>y,STYLE_HILO:()=>M,STYLE_HLC_AREA:()=>F,STYLE_HLC_BARS:()=>H,STYLE_HOLLOW_CANDLES:()=>R,STYLE_KAGI:()=>A,STYLE_LINE:()=>w,STYLE_LINE_WITH_MARKERS:()=>D,STYLE_PB:()=>O,STYLE_PNF:()=>N,STYLE_RANGE:()=>I,STYLE_RENKO:()=>P,STYLE_SHORT_NAMES:()=>U,STYLE_STEPLINE:()=>x,SYMBOL_STRING_DATA:()=>j,chartStylesWithAttachedStudies:()=>B,seriesLoadingStatuses:()=>S,seriesReadyStatuses:()=>v});const r=0,i=1,s=2,o=3,a=4,c=5,u=6,l=7,h=8,d=9,_=10,f=11,m=12,p=13,g=14,v=new Set([3,6,7,8,9,11]),S=new Set([1,2]),E={[r]:"connecting",[i]:"loading",[s]:"loading",[o]:"realtime",[a]:"invalid",[c]:"snapshot",[u]:"endofday",[l]:"endofday",[h]:"delayed",[d]:"delayed_streaming",[_]:"forbidden",[f]:"replay",[m]:"error",[p]:"calculation_error",[g]:"unsupported_resolution"},b=0,T=1,w=2,C=3,P=4,A=5,N=6,O=7,y=8,R=9,L=10,I=11,M=12,k=13,D=14,x=15,F=16,H=21,U={0:"bar",1:"candle",9:"hollowCandle",2:"line",14:"lineWithMarkers",15:"stepline",3:"area",16:"hlcArea",4:"renko",7:"pb",5:"kagi",6:"pnf",8:"ha",10:"baseline",11:"range",12:"hilo",13:"column",17:"volFootprint",18:"tpo",19:"volCandles",20:"svp",21:"hlcBars"},j={4:{type:"BarSetRenko@tv-prostudies",basicStudyVersion:73},7:{type:"BarSetPriceBreak@tv-prostudies",basicStudyVersion:34},5:{type:"BarSetKagi@tv-prostudies",basicStudyVersion:73},6:{type:"BarSetPnF@tv-prostudies",basicStudyVersion:73},8:{type:"BarSetHeikenAshi@tv-basicstudies",basicStudyVersion:60},11:{type:"BarSetRange@tv-basicstudies",basicStudyVersion:72},17:{type:"Footprint@tv-volumebyprice",basicStudyVersion:104},18:{type:"TPOPeriodic@tv-volumebyprice",basicStudyVersion:104},20:{type:"VbPSessions@tv-volumebyprice",basicStudyVersion:126}},B=[17,18,20]},657619:(e,t,n)=>{"use strict";function r(e,t){return`${e}@${t}`}function i(e){return e.replace(/(@[^-]+-[^-]+).*$/,"$1")}n.d(t,{extractStudyId:()=>i,studyIdString:()=>r})},646244:(e,t,n)=>{"use strict";function r(e){const t={};if(-1===e.indexOf("@"))t.shortId=e,
t.packageId="tv-basicstudies",t.id=e+"@"+t.packageId,t.version=1;else{const n=e.split("@");t.shortId=n[0];const r=n[1].split("-");if(3===r.length)t.packageId=r.slice(0,2).join("-"),t.id=t.shortId+"@"+t.packageId,t.version=parseInt(r[2]);else if(1===r.length&&"decisionbar"===r[0])t.packageId="les-"+r[0],t.id=t.shortId+"@"+t.packageId,t.version=1;else{if(1!==r.length)throw new Error("unexpected study id:"+e);t.packageId="tv-"+r[0],t.id=t.shortId+"@"+t.packageId,t.version=1}}if(t.fullId=t.id+"-"+t.version,"tv-scripting"===t.packageId){const e=t.shortId;if(0===e.indexOf("Script$")||0===e.indexOf("StrategyScript$")){const n=e.indexOf("_");t.productId=n>=0?e.substring(0,n):t.packageId}else t.productId=t.packageId}else t.productId=t.packageId;return t}n.d(t,{parseIdString:()=>r})},337270:(e,t,n)=>{"use strict";n.d(t,{getAlertsPushApi:()=>E});var r=n(481251),i=n(262078),s=(n(659863),n(685459)),o=n.n(s),a=n(729584),c=n(735566);const u=(0,c.getLogger)("Alerts.AlertsPushApi");class l extends(o()){constructor(e,t={}){super(),this._messageHandler=e=>{try{if(u.logNormal(`Received message from channel 'pricealerts': ${JSON.stringify({...e,p:h(e.p,e.m)})}`),"fires_deleted"===e.m&&this._deletedFireIdsCache.add(e.p),"alert_fired"===e.m&&this._deletedFireIdsCache.has(e.p.fire_id))return void u.logWarn(`alert_fired message with fire ${e.p.fire_id} appears to arrive out of order, it will be dropped`);this.emit(e.m,e.p)}catch(e){u.logError(`Could not emit push message: ${e}`)}},e.on("pricealerts",this._messageHandler),this._deletedFireIdsCache=new d(t.deletedFireIdsCacheTtl),this.destroy=()=>{(0,a.assertNoEmitterListeners)(this,["alerts_created","alerts_updated","alerts_deleted","alert_fired","fires_deleted"]),this._deletedFireIdsCache.destroy(),e.off("pricealerts",this._messageHandler)}}}function h(e,t){const n="alerts_updated"===t||"alerts_created"===t;return Array.isArray(e)&&n?e.map((e=>e.web_hook?{...e,message:"<hidden>",web_hook:"<hidden>"}:e)):e}class d{constructor(e){this._ids=new Set,this._timers=new Set,this._ttl=e??1e4}add(e){for(const t of e)this._ids.add(t);const t=setTimeout((()=>{for(const t of e)this._ids.delete(t);this._timers.delete(t)}),this._ttl);this._timers.add(t)}has(e){return this._ids.has(e)}destroy(){for(const e of this._timers)clearTimeout(e)}}var _=n(920057);const f=(0,c.getLogger)("Alerts.AlertsPushApi.mergeAdjacentMessages"),m={alerts_updated:p,alerts_created:p,alerts_deleted:g,alert_fired:null,fires_deleted:g};function p(e,t){const n=new Set(t.map((e=>e.alert_id)));return[...e.filter((e=>!n.has(e.alert_id))),...t]}function g(e,t){return Array.from(new Set([...e,...t]))}class v{constructor(e,t,n,r){this._eventEmitter=new(o()),this._pushApi=e,this._messageType=t,this._onMessage=e=>{this._mergedPayload=void 0===this._mergedPayload?e:n(this._mergedPayload,e),this._throttledEmit()},this._throttledEmit=(0,_.default)((()=>{void 0!==this._mergedPayload&&(f.logDebug("Merged push messages:\n"+JSON.stringify(h(this._mergedPayload,this._messageType))),this._eventEmitter.emit("message",this._mergedPayload),
delete this._mergedPayload)}),r,{leading:!1})}subscribe(e){const t=this._hasListeners();this._eventEmitter.on("message",e),t||this._pushApi.on(this._messageType,this._onMessage)}unsubscribe(e){this._eventEmitter.off("message",e),this._hasListeners()||(this._throttledEmit.cancel(),delete this._mergedPayload,this._pushApi.off(this._messageType,this._onMessage))}_hasListeners(){return this._eventEmitter.getListeners("message").length>0}}class S{constructor(e,t){this._pushApi=e,this._messageType=t}subscribe(e){this._pushApi.on(this._messageType,e)}unsubscribe(e){this._pushApi.off(this._messageType,e)}}const E=(0,r.default)((()=>function(e,t){const n={};for(const[r,i]of Object.entries(m))n[r]=null===i?new S(e,r):new v(e,r,i,t);return{on:(e,t)=>{n[e].subscribe(t)},off:(e,t)=>{n[e].unsubscribe(t)}}}(new l(i.pushStreamMultiplexer),500)))},75060:(e,t,n)=>{"use strict";n.d(t,{canPlaceAlertOnResolution:()=>s});var r=n(477786),i=n(925470);function s(e,t){const n=r.Interval.isSeconds(e),s=t?t?.alertsOnSeconds:(0,i.enabled)("ALERTS_ON_SECONDS");return!n||s}},556466:(e,t,n)=>{"use strict";var r;n.d(t,{ConnectionStatus:()=>r}),function(e){e[e.Closed=0]="Closed",e[e.Connecting=1]="Connecting",e[e.Open=2]="Open"}(r||(r={}))},680039:(e,t,n)=>{"use strict";n.d(t,{PersistentEventSourceTransport:()=>a});var r=n(735566),i=n(556466),s=n(171789);const o=(0,r.getLogger)("PersistentWebsocketTransport");class a extends s.PersistentTransport{constructor(e){super(e,o),this._specializedErrorHandlerBound=this._specializedErrorHandler.bind(this)}_createNativeTransport(e){const t=new EventSource(e,{withCredentials:!0});return t.addEventListener("error",this._specializedErrorHandlerBound),t.addEventListener("open",this._socketOpenHandler),t.addEventListener("message",this._socketMessageHandler),t}_disconnectTransport(){if(null===this._socket)return;this._socket.removeEventListener("error",this._specializedErrorHandlerBound),this._socket.removeEventListener("open",this._socketOpenHandler),this._socket.removeEventListener("message",this._socketMessageHandler),this._removeOnOfflineListener();const e=this._socket;this._socket=null,this._connectionStatus.setValue(i.ConnectionStatus.Closed),e.readyState!==WebSocket.CLOSED&&e.close()}_specializedErrorHandler(e){e.eventPhase===EventSource.CLOSED?this._socketCloseHandler(e):this._socketErrorHandler()}}},171789:(e,t,n)=>{"use strict";n.d(t,{PersistentTransport:()=>c});var r=n(556466),i=n(258986),s=n(820028),o=n(547465),a=n(904653);class c{constructor(e,t,n){this._url="",this._socket=null,this._reconnectCount=0,this._onlineCancellationToken=null,this._connectionStatus=new s.WatchedValue(r.ConnectionStatus.Closed),this._socketCloseHandler=this._onCloseCallback.bind(this),this._socketErrorHandler=this._onErrorCallback.bind(this),this._socketOpenHandler=this._onOpenCallback.bind(this),this._socketMessageHandler=this._onMessageCallback.bind(this),this._maxReconnectReachedEventDelegate=new o.Delegate,this._successReconnectReachedEventDelegate=new o.Delegate,this._shouldReconnect=!0,this._maxReconnectCount=null,
this._reconnectTimeoutId=0,this._connectAbortController=null,this._tryReconnect=()=>{if(this._disconnect(),this._shouldReconnect){const e=this._getReconnectTimeout();this._logger.logNormal(`Sleeping some time before reconnect ${e}ms`),this._reconnectTimeoutId=setTimeout(this._tryReconnectImpl.bind(this),e)}else this._logger.logNormal("Skip reconnecting because of shouldReconnect state")},this._onOfflineHandler=()=>{this._removeOnOfflineListener(),this._logger.logInfo("Network status changed to offline - trying to reconnect"),this._tryReconnect()},this._logger=t,this._messageHandler=e,this._closeHandler=n,window.addEventListener("unload",(()=>{t.logNormal("Unload event comes - disconnecting without reconnect after that..."),this._shouldReconnect=!1,this._disconnect()}),!1)}setUrl(e){if(this._url===e)return Promise.resolve();const t=this._connectionStatus.value()!==r.ConnectionStatus.Closed;return t&&this._disconnect(),this._url=e,t?this.connect():Promise.resolve()}url(){return this._url}connect(){return this._connectImpl()}setMaxReconnectCount(e){this._maxReconnectCount=e}connectionStatus(){return this._connectionStatus.readonly()}disconnect(){this._shouldReconnect=!1,this._disconnect()}maxReconnectReachedEvent(){return this._maxReconnectReachedEventDelegate}successReconnectReachedEvent(){return this._successReconnectReachedEventDelegate}async _prepareParamsForConnection(e){}_disconnect(){this._connectAbortController?.abort(),this._connectAbortController=null,clearTimeout(this._reconnectTimeoutId),this._reconnectTimeoutId=0,this._connectionStatus.value()!==r.ConnectionStatus.Closed?this._socket?(this._logger.logNormal(`Closing connection to: ${this._socket.url}, currentStatus: ${r.ConnectionStatus[this._connectionStatus.value()]}`),this._disconnectTransport()):this._logger.logNormal("Disconnecting without socket - probably within preparing, it should be already scheduled for aborting"):this._logger.logNormal("Attempt to close connection but it is closed already")}_onErrorCallback(){this._logger.logInfo("Connection is closed by error"),this._tryReconnect()}_onCloseCallback(e){this._logger.logInfo(`Connection is closed - code=${e.code} msg=${e.reason}`),this._closeHandler?.(e),this._tryReconnect()}_tryReconnectImpl(){return null!==this._maxReconnectCount&&this._reconnectCount===this._maxReconnectCount?(this._logger.logWarn("Maximum attempts to reconnect to websocket reached"),void this._maxReconnectReachedEventDelegate.fire()):(this._reconnectCount+=1,this._logger.logInfo(`Reconnecting count: ${this._reconnectCount}`),navigator.onLine?(this._logger.logInfo("Network status: online - trying to connect"),void this.connect()):(this._logger.logInfo("Network status: offline - wait until online"),void(this._onlineCancellationToken=(0,i.callWhenOnline)((()=>{this._logger.logInfo("Network status changed to online - trying to connect"),this.connect()})))))}_onOpenCallback(){this._logger.logNormal("Connection opened"),this._reconnectCount>0&&this._successReconnectReachedEventDelegate.fire(),this._reconnectCount=0,
this._connectionStatus.setValue(r.ConnectionStatus.Open)}_onMessageCallback(e){this._messageHandler(e.data)}_getReconnectTimeout(){return this._reconnectCount<5?300:5e3}_setOnOfflineListener(){window.addEventListener("offline",this._onOfflineHandler)}_removeOnOfflineListener(){window.removeEventListener("offline",this._onOfflineHandler)}async _connectImpl(){if(this._connectionStatus.value()!==r.ConnectionStatus.Closed)return void this._logger.logNormal("Attempt to open connection but it is not closed");this._socket&&(this._logger.logError("Something went wrong - code 0x2"),this.disconnect()),this._onlineCancellationToken&&(this._onlineCancellationToken(),this._onlineCancellationToken=null),this._logger.logNormal(`Connecting to ${this._url}`),this._shouldReconnect=!0,this._connectAbortController=new AbortController;const e=this._connectAbortController.signal;try{if(this._connectionStatus.setValue(r.ConnectionStatus.Connecting),await this._prepareParamsForConnection(e),e.aborted)throw(0,a.createAbortError)();this._socket=this._createNativeTransport(this._url),this._setOnOfflineListener()}catch(e){this._connectionStatus.setValue(r.ConnectionStatus.Closed),(0,a.skipAbortError)(e)}finally{this._connectAbortController=null}}}},482815:(e,t,n)=>{"use strict";n.d(t,{PersistentWebsocketTransport:()=>a});var r=n(735566),i=n(556466),s=n(171789);const o=(0,r.getLogger)("PersistentWebsocketTransport");class a extends s.PersistentTransport{constructor(e,t){super(e,o,t)}sendMessage(e){this._connectionStatus.value()===i.ConnectionStatus.Open?this._socket?this._socket.send(e):o.logError("Something went wrong - code 0x3"):o.logWarn("Attempt to send message but connection is not opened")}_createNativeTransport(e){const t=new WebSocket(e);return t.binaryType="arraybuffer",t.addEventListener("error",this._socketErrorHandler),t.addEventListener("close",this._socketCloseHandler),t.addEventListener("open",this._socketOpenHandler),t.addEventListener("message",this._socketMessageHandler),t}_disconnectTransport(){if(null===this._socket)return;this._socket.removeEventListener("error",this._socketErrorHandler),this._socket.removeEventListener("close",this._socketCloseHandler),this._socket.removeEventListener("open",this._socketOpenHandler),this._socket.removeEventListener("message",this._socketMessageHandler),this._removeOnOfflineListener();const e=this._socket;this._socket=null,this._connectionStatus.setValue(i.ConnectionStatus.Closed),e.readyState!==WebSocket.CLOSED&&e.close()}}},486481:(e,t,n)=>{"use strict";n.d(t,{SubscriptionEventType:()=>h,subscriptionNotification:()=>_});var r=n(444372),i=n(226722),s=n(547465),o=n(735566),a=n(58855),c=n.n(a);const u=(0,o.getLogger)("SubscriptionNotification"),l="subscriptionPermissionHasChanged";var h;!function(e){e.Subscribe="subscribe",e.Unsubscribe="unsubscribe",e.Downgrade="downgrade",e.Upgrade="upgrade",e.Change="change",e.PaymentMethodChanged="paymentmethodChanged",e.AgreementSigned="agreementSigned",e.MarketProfileDataUpdated="marketProfileDataUpdated"}(h||(h={}));class d{constructor(){
this.stateChanged=new s.Delegate,this._handlers=[],this._windowEventsHandlers=[],this._stateChangeHandlers=[]}on(e,t){const n=n=>{let r=null;try{r=JSON.parse(n)}catch{return void u.logWarn(`Failed to parse JSON: ${n}`)}e!==h.Change&&e!==r.type||t(r,{currentTab:!1})},r=n=>{e!==h.Change&&e!==n.type||t(n,{currentTab:!0})};i.TVXWindowEvents.on(l,n),this.stateChanged.subscribe(null,r),this._handlers.push(t),this._windowEventsHandlers.push(n),this._stateChangeHandlers.push(r)}off(e){let t;for(;-1!==t;)t=this._handlers.indexOf(e),t>-1&&(i.TVXWindowEvents.off(l,this._windowEventsHandlers[t]),this.stateChanged.unsubscribe(null,this._stateChangeHandlers[t]),this._handlers.splice(t,1),this._windowEventsHandlers=this._windowEventsHandlers.splice(t,1),this._stateChangeHandlers=this._stateChangeHandlers.splice(t,1))}showNotification(){Promise.all([n.e(63228),n.e(92537),n.e(39759),n.e(18883),n.e(52186),n.e(19190),n.e(98681),n.e(67131),n.e(82332),n.e(94036),n.e(33595),n.e(7276),n.e(51989),n.e(97598),n.e(32227),n.e(59844),n.e(87288),n.e(30870)]).then(n.bind(n,287023)).then((({showSubscriptionHasBeenChangedDialog:e})=>{e({pushReload:!0})}))}showChartNotification(){Promise.all([n.e(63228),n.e(92537),n.e(39759),n.e(18883),n.e(52186),n.e(19190),n.e(98681),n.e(67131),n.e(82332),n.e(94036),n.e(33595),n.e(7276),n.e(51989),n.e(97598),n.e(32227),n.e(59844),n.e(87288),n.e(30870)]).then(n.bind(n,287023)).then((({showSubscriptionHasBeenChangedDialog:e})=>{e({content:r.t(null,void 0,n(368390))})}))}showChartAgreementNotification(){Promise.all([n.e(63228),n.e(92537),n.e(39759),n.e(18883),n.e(52186),n.e(19190),n.e(98681),n.e(67131),n.e(82332),n.e(94036),n.e(33595),n.e(7276),n.e(51989),n.e(97598),n.e(32227),n.e(59844),n.e(87288),n.e(30870)]).then(n.bind(n,287023)).then((({showSubscriptionHasBeenChangedDialog:e})=>{e({title:r.t(null,void 0,n(565824)),content:r.t(null,void 0,n(384734))})}))}showBillingTimeoutNotification(){Promise.all([n.e(63228),n.e(92537),n.e(39759),n.e(18883),n.e(52186),n.e(19190),n.e(98681),n.e(67131),n.e(82332),n.e(94036),n.e(33595),n.e(7276),n.e(51989),n.e(97598),n.e(32227),n.e(59844),n.e(87288),n.e(30870)]).then(n.bind(n,287023)).then((({showSubscriptionHasBeenChangedDialog:e})=>{e({title:r.t(null,void 0,n(897339)),content:r.t(null,void 0,n(301736)),pushReload:!0,icon:c()})}))}xWindowEventsEmit(e){i.TVXWindowEvents.emit(l,JSON.stringify(e))}currentTabEmit(e){this.stateChanged.fire(e)}emit(e){this.currentTabEmit(e),this.xWindowEventsEmit(e)}static getInstance(){return d._instance||(d._instance=new d),d._instance}}function _(){return d.getInstance()}},958178:(e,t,n)=>{"use strict";n.d(t,{AggregateError:()=>S,ApiError:()=>v,accumulateErrors:()=>s,changePassword:()=>g,changePasswordUrl:()=>p,checkPhoneCode:()=>u,continuePartialAuth:()=>N,fetchPost:()=>o,firstLoginData:()=>a,firstLoginDataUrl:()=>i,recoverPassword:()=>b,recoverPasswordUrl:()=>E,recoveryPassword:()=>l,resendLink:()=>c,resetPassword:()=>w,signin:()=>_,signinUrl:()=>h,signup:()=>m,signupUrl:()=>f,socialAuth:()=>A});var r=n(803912);const i="/accounts/first_login_data/"
;function s(e,t){return Object.entries(e).map((e=>new v(e[1].join("\n"),t,e[0])))}function o(e,t){return(0,r.fetch)(e,{method:"POST",credentials:"include",mode:"same-origin",body:t})}function a(e){return o(i,e).then((e=>e.ok?e.json():e.json().then((t=>{throw new S(s(t.errors,e.status))}))))}function c(){return o("/api/v1/users/anon/change-email/resend/").then((e=>e.ok?e.json():e.json().then((e=>{throw Error(e.error)}))))}function u(e){return o("/api/v1/recover_password/check_phone_code/",e).then((e=>e.ok?e.json():e.json().then((e=>{throw Error(e.error)}))))}function l(e){return o("/api/v1/recover_password/",e).then((e=>e))}const h="/accounts/signin/";function d(e){return e.json().then((t=>{if("errors"in t&&Object.keys(t.errors).length)throw new S(s(t.errors,e.status));if("error"in t&&""!==t.error||"code"in t||!e.ok)throw new v(t.error||t.detail,e.status,t.code,t.confirm_auth_data,t.two_factor_types,function(e){if(e.signature)return{signature:e.signature,email:e.email||"",phone:e.phone||"",socials:[]};return}(t));return t}))}function _(e){return o(h,e).then(d)}const f="/accounts/signup/";function m(e){return o(f,e).then((e=>e.json().then((t=>{if("errors"in t&&""!==t.errors)throw new S(s(t.errors,e.status))}))))}const p="/api/v1/user/profile/settings/change_password/";function g(e){return o(p,e).then((e=>e))}class v extends Error{constructor(e,t,n,r,i,s){super(e),this.type=n,this.status=t,this.secondFactorTypes=i,this.socialConfirmData=r,this.resetPasswordData=s}}class S extends Error{constructor(e){super(e.map((e=>e.message)).join("\n")),this.errors=[],this.errors=e}}const E="/api/v1/recover_password/search/";function b(e){return o(E,e).then(d)}const T="/accounts/reset_password/";function w(e,t=T){return o(t,e).then((e=>400===e.status?e.json().then((t=>{if("errors"in t)throw new S(s(t.errors,e.status));throw new v(t.detail,e.status,t.code)})):d(e)))}const C="/accounts/complete/android-jwt/",P={Accept:"application/json"};function A(e,t){const n=new URL(window.origin+C);return Object.entries(t).forEach((([e,t])=>t&&n.searchParams.append(e,t))),(0,r.fetch)(n.href,{method:"POST",body:e,headers:P}).then(d)}function N(e,t){const n=new URL(window.origin+`/accounts/complete/${e}/`),i=new FormData;return i.append("partial_token",t),(0,r.fetch)(n.href,{method:"POST",body:i,headers:P}).then(d)}},357173:(e,t,n)=>{"use strict";n.d(t,{getProPlanDetailsForUser:()=>d,getProPlanWeight:()=>a,isExpertFeature:()=>h});var r=n(925470),i=n(232759),s=n(803912),o=n(958178);function a(e){return window.pro?"free"===e?-1:window.pro.getProduct((0,i.getProductForTrial)(e)).upgrade_weight:0}function c(e){return window.pro?window.pro.getProduct((0,i.getProductForTrial)(e)).upgrade_weight:0}function u(e){return function(e){return e.sort(((e,t)=>a(e)-a(t)))}((0,r.getProPlansWithFeature)(e).filter((e=>!(0,i.isTrialProduct)(e))))[0]||null}function l(e){return function(e){return e.sort(((e,t)=>c(e)-c(t)))}((0,r.getExpertPlansWithFeature)(e))[0]||null}function h(e){const t=l(e),n=u(e);return Boolean(t)&&!Boolean(n)}async function d(){const e=await(0,
s.fetch)("/pro-plans/profile/"),t=await e.json();if(e.ok)return t;if(403===e.status){const n=t;throw new o.ApiError(n.detail,e.status,n.code)}throw new Error(`Unable to handle unexpected response: ${String(e.text())}`)}},232759:(e,t,n)=>{"use strict";n.r(t),n.d(t,{CUSTOM_SUFFIX:()=>a,EA_SUFFIX:()=>o,TRIAL_SUFFIX:()=>s,billingCycleToMonth:()=>T,billingCycleToTimeUnit:()=>c,billingPeriodText:()=>h,countDiscountByBillingCycle:()=>E,countPriceIncludeExtraDays:()=>b,floor0:()=>A,getCouponBillingCycleInfo:()=>w,getDiscountFromEarlyAccess:()=>m,getDiscountProductId:()=>p,getPlanName:()=>R,getProductForTrial:()=>f,getReadableCycle:()=>u,getReadableNumericCycle:()=>l,getRelativeAmountOfDaysFromBillingCycle:()=>S,humanizeCardPlan:()=>v,humanizeProPlan:()=>g,isEarlyAccess:()=>d,isOldUser:()=>L,isTrialProduct:()=>_,round0:()=>P,round1or0:()=>O,round2:()=>C,round2or0:()=>N,roundMinimal:()=>y});n(142492);var r=n(444372),i=n(302221);const s="_trial",o="_discount",a="_custom";function c(e){return{y:r.t(null,{plural:"years",count:1},n(993205)),m:r.t(null,{plural:"months",count:1},n(898393)),"3m":r.t(null,void 0,n(81277))}[e]}function u(e){return{m:r.t(null,void 0,n(173039)),y:r.t(null,void 0,n(317310)),"3m":r.t(null,void 0,n(820877))}[e]||""}function l(e){return{[i.BillingCycle.Monthly]:r.t(null,void 0,n(173039)),[i.BillingCycle.OneYear]:r.t(null,void 0,n(744479)),[i.BillingCycle.ThreeMonths]:r.t(null,void 0,n(820877))}[e]||""}function h(e){return{y:r.t(null,void 0,n(967752)),m:r.t(null,void 0,n(745504))}[e]??""}function d(e){return/\d{0,2}_discount$/.test(e)}function _(e){return new RegExp(s+"$").test(e)}function f(e){return e.split(s)[0]}function m(e){const t=e.match(new RegExp("^(d{0,2})"+o+"$"));return t?+t[1]||50:0}function p(e,t,n){return`${e}_${t}${n}`}function g(e,t){let i=e;switch(e){case"free":i="Basic";break;case"pro":i="Essential";break;case"pro_realtime":i="Plus";break;case"pro_premium":i="Premium";break;case"pro_expert":i="Expert";break;case"pro_premium_expert":i="Ultimate"}return t&&(i+=" "+r.t(null,void 0,n(233969))),i}function v(e){let t=e;switch(e){case"pro":t="Essential";break;case"pro_realtime":t="Plus";break;case"pro_premium":t="Premium";break;case"pro_expert":t="Expert";break;case"pro_premium_expert":t="Ultimate";break;case"free":t="Basic"}return t}function S(e,t){const n=t||new Date,r=T(e),i=n.getMonth()+r,s=new Date(new Date(n).setMonth(i));return s.getMonth()>i%12&&s.setDate(0),function(e,t){const n=t.getTime()-e.getTime();return Math.round(n/1e3/60/60/24)}(n,s)}function E(e,t,n){return Math.round((t-e)*T(n))}function b(e,t,n=0){return e/(30*T(t)+n)*(30*T(i.BillingCycle.Monthly))}function T(e){switch(e){case i.BillingCycle.OneYear:return 12;case i.BillingCycle.ThreeMonths:return 3;default:return 1}}function w(e){const t=r.t(null,void 0,n(425256));switch(e){case i.BillingCycle.Monthly:return r.t(null,void 0,n(699912));case i.BillingCycle.OneYear:default:return t}}function C(e){return(Math.round(100*e)/100).toFixed(2)}function P(e){const t=Math.round(100*e)/100;return Math.round(t).toFixed(0)}function A(e){
return Math.floor(e).toString()}function N(e){const t=Math.round(100*e)/100,n=Math.round(t);return Math.abs(t-n)>0?t.toFixed(2):n.toFixed(0)}function O(e){return Number.isInteger(e)?e.toFixed(0):(Math.round(10*e)/10).toFixed(1)}function y(e){const t=Math.round(100*e)/100,n=Math.round(10*e)/10,r=Math.round(t);return Math.abs(t-r)>0?Math.abs(t-n)>0?t.toFixed(2):n.toFixed(1):r.toFixed(0)}function R(e){const t=r.t(null,void 0,n(946530));if(_(e)){const n=g(f(e));return t.format({proPlanName:n})}return g(e)}function L(){return!!window.user.date_joined&&new Date(window.user.date_joined).getTime()<new Date("2022-05-26").getTime()}},258986:(e,t,n)=>{"use strict";n.d(t,{callWhenOnline:()=>i,waitForOnline:()=>s});var r=n(904653);function i(e){let t=e;const n=()=>{window.removeEventListener("online",n),t&&t()};return window.addEventListener("online",n),()=>{t=null}}async function s(e=null){return!0===navigator.onLine||void 0===navigator.onLine?Promise.resolve():(0,r.respectAbort)(e,new Promise((e=>{const t=()=>{window.removeEventListener("online",t),e()};window.addEventListener("online",t)})))}},58855:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 120 120" width="120" height="120"><path fill="currentColor" d="M83.12 59.5c0-5.13-1.67-9.86-4.49-13.69l3.22-2.37A27.1 27.1 0 0 1 60.02 86.6h-.05l-.53-.02 7.12 7.12-2.83 2.83-12.2-12.2L62.5 73.36l2.83 2.82-6.36 6.36 1.1.05a23.1 23.1 0 0 0 23.05-23.1ZM42.85 73.92a23.1 23.1 0 0 1 18.56-36.78l1.1.05-6.36 6.35 2.83 2.83 10.97-10.96-12.2-12.2-2.83 2.83 7.13 7.12-.54-.02h-.05a27.1 27.1 0 0 0-21.83 43.15l3.22-2.37Z"/><path fill="currentColor" d="M8 30A22 22 0 0 1 30 8h60a22 22 0 0 1 22 22v60a22 22 0 0 1-22 22H30A22 22 0 0 1 8 90V30Zm22-18a18 18 0 0 0-18 18v60a18 18 0 0 0 18 18h60a18 18 0 0 0 18-18V30a18 18 0 0 0-18-18H30Z"/></svg>'},685459:function(e,t,n){var r;!function(t){"use strict";function i(){}var s=i.prototype,o=t.EventEmitter;function a(e,t){for(var n=e.length;n--;)if(e[n].listener===t)return n;return-1}function c(e){return function(){return this[e].apply(this,arguments)}}function u(e){return"function"==typeof e||e instanceof RegExp||!(!e||"object"!=typeof e)&&u(e.listener)}s.getListeners=function(e){var t,n,r=this._getEvents();if(e instanceof RegExp)for(n in t={},r)r.hasOwnProperty(n)&&e.test(n)&&(t[n]=r[n]);else t=r[e]||(r[e]=[]);return t},s.flattenListeners=function(e){var t,n=[];for(t=0;t<e.length;t+=1)n.push(e[t].listener);return n},s.getListenersAsObject=function(e){var t,n=this.getListeners(e);return n instanceof Array&&((t={})[e]=n),t||n},s.addListener=function(e,t){if(!u(t))throw new TypeError("listener must be a function");var n,r=this.getListenersAsObject(e),i="object"==typeof t;for(n in r)r.hasOwnProperty(n)&&-1===a(r[n],t)&&r[n].push(i?t:{listener:t,once:!1});return this},s.on=c("addListener"),s.addOnceListener=function(e,t){return this.addListener(e,{listener:t,once:!0})},s.once=c("addOnceListener"),s.defineEvent=function(e){return this.getListeners(e),this},s.defineEvents=function(e){for(var t=0;t<e.length;t+=1)this.defineEvent(e[t]);return this},
s.removeListener=function(e,t){var n,r,i=this.getListenersAsObject(e);for(r in i)i.hasOwnProperty(r)&&-1!==(n=a(i[r],t))&&i[r].splice(n,1);return this},s.off=c("removeListener"),s.addListeners=function(e,t){return this.manipulateListeners(!1,e,t)},s.removeListeners=function(e,t){return this.manipulateListeners(!0,e,t)},s.manipulateListeners=function(e,t,n){var r,i,s=e?this.removeListener:this.addListener,o=e?this.removeListeners:this.addListeners;if("object"!=typeof t||t instanceof RegExp)for(r=n.length;r--;)s.call(this,t,n[r]);else for(r in t)t.hasOwnProperty(r)&&(i=t[r])&&("function"==typeof i?s.call(this,r,i):o.call(this,r,i));return this},s.removeEvent=function(e){var t,n=typeof e,r=this._getEvents();if("string"===n)delete r[e];else if(e instanceof RegExp)for(t in r)r.hasOwnProperty(t)&&e.test(t)&&delete r[t];else delete this._events;return this},s.removeAllListeners=c("removeEvent"),s.emitEvent=function(e,t){var n,r,i,s,o=this.getListenersAsObject(e);for(s in o)if(o.hasOwnProperty(s))for(n=o[s].slice(0),i=0;i<n.length;i++)!0===(r=n[i]).once&&this.removeListener(e,r.listener),r.listener.apply(this,t||[])===this._getOnceReturnValue()&&this.removeListener(e,r.listener);return this},s.trigger=c("emitEvent"),s.emit=function(e){var t=Array.prototype.slice.call(arguments,1);return this.emitEvent(e,t)},s.setOnceReturnValue=function(e){return this._onceReturnValue=e,this},s._getOnceReturnValue=function(){return!this.hasOwnProperty("_onceReturnValue")||this._onceReturnValue},s._getEvents=function(){return this._events||(this._events={})},i.noConflict=function(){return t.EventEmitter=o,i},void 0===(r=function(){return i}.call(t,n,t,e))||(e.exports=r)}(this||{})},336169:(e,t,n)=>{"use strict";n.d(t,{default:()=>s});var r=n(52494),i=n(799615);const s=(0,r.default)(i.default,"Set")},191412:(e,t,n)=>{"use strict";n.d(t,{default:()=>a});var r=n(975440);const i=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this};const s=function(e){return this.__data__.has(e)};function o(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new r.default;++t<n;)this.add(e[t])}o.prototype.add=o.prototype.push=i,o.prototype.has=s;const a=o},87593:(e,t,n)=>{"use strict";n.d(t,{default:()=>d});var r=n(746956);const i=function(){this.__data__=new r.default,this.size=0};const s=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n};const o=function(e){return this.__data__.get(e)};const a=function(e){return this.__data__.has(e)};var c=n(19385),u=n(975440);const l=function(e,t){var n=this.__data__;if(n instanceof r.default){var i=n.__data__;if(!c.default||i.length<199)return i.push([e,t]),this.size=++n.size,this;n=this.__data__=new u.default(i)}return n.set(e,t),this.size=n.size,this};function h(e){var t=this.__data__=new r.default(e);this.size=t.size}h.prototype.clear=i,h.prototype.delete=s,h.prototype.get=o,h.prototype.has=a,h.prototype.set=l;const d=h},216299:(e,t,n)=>{"use strict";n.d(t,{default:()=>r});const r=n(799615).default.Uint8Array},837390:(e,t,n)=>{"use strict";n.d(t,{default:()=>s})
;var r=n(52494),i=n(799615);const s=(0,r.default)(i.default,"WeakMap")},860545:(e,t,n)=>{"use strict";n.d(t,{default:()=>l});const r=function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r};var i=n(154404),s=n(456052),o=n(232437),a=n(399313),c=n(109125),u=Object.prototype.hasOwnProperty;const l=function(e,t){var n=(0,s.default)(e),l=!n&&(0,i.default)(e),h=!n&&!l&&(0,o.default)(e),d=!n&&!l&&!h&&(0,c.default)(e),_=n||l||h||d,f=_?r(e.length,String):[],m=f.length;for(var p in e)!t&&!u.call(e,p)||_&&("length"==p||h&&("offset"==p||"parent"==p)||d&&("buffer"==p||"byteLength"==p||"byteOffset"==p)||(0,a.default)(p,m))||f.push(p);return f}},218573:(e,t,n)=>{"use strict";n.d(t,{default:()=>r});const r=function(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}},600857:(e,t,n)=>{"use strict";n.d(t,{default:()=>i});var r=n(355136);const i=function(e,t,n){"__proto__"==t&&r.default?(0,r.default)(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}},131679:(e,t,n)=>{"use strict";n.d(t,{default:()=>s});var r=n(952110),i=n(649634);const s=function(e,t){return function(n,r){if(null==n)return n;if(!(0,i.default)(n))return e(n,r);for(var s=n.length,o=t?s:-1,a=Object(n);(t?o--:++o<s)&&!1!==r(a[o],o,a););return n}}(r.default)},876507:(e,t,n)=>{"use strict";n.d(t,{default:()=>r});const r=function(e){return function(t,n,r){for(var i=-1,s=Object(t),o=r(t),a=o.length;a--;){var c=o[e?a:++i];if(!1===n(s[c],c,s))break}return t}}()},952110:(e,t,n)=>{"use strict";n.d(t,{default:()=>s});var r=n(876507),i=n(377251);const s=function(e,t){return e&&(0,r.default)(e,t,i.default)}},296909:(e,t,n)=>{"use strict";n.d(t,{default:()=>s});var r=n(218573),i=n(456052);const s=function(e,t,n){var s=t(e);return(0,i.default)(e)?s:(0,r.default)(s,n(e))}},39216:(e,t,n)=>{"use strict";n.d(t,{default:()=>y});var r=n(87593),i=n(191412);const s=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1};var o=n(620465);const a=function(e,t,n,r,a,c){var u=1&n,l=e.length,h=t.length;if(l!=h&&!(u&&h>l))return!1;var d=c.get(e),_=c.get(t);if(d&&_)return d==t&&_==e;var f=-1,m=!0,p=2&n?new i.default:void 0;for(c.set(e,t),c.set(t,e);++f<l;){var g=e[f],v=t[f];if(r)var S=u?r(v,g,f,t,e,c):r(g,v,f,e,t,c);if(void 0!==S){if(S)continue;m=!1;break}if(p){if(!s(t,(function(e,t){if(!(0,o.default)(p,t)&&(g===e||a(g,e,n,r,c)))return p.push(t)}))){m=!1;break}}else if(g!==v&&!a(g,v,n,r,c)){m=!1;break}}return c.delete(e),c.delete(t),m};var c=n(366711),u=n(216299),l=n(554523);const h=function(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n};var d=n(564423),_=c.default?c.default.prototype:void 0,f=_?_.valueOf:void 0;const m=function(e,t,n,r,i,s,o){switch(n){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!s(new u.default(e),new u.default(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return(0,l.default)(+e,+t);case"[object Error]":
return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var c=h;case"[object Set]":var _=1&r;if(c||(c=d.default),e.size!=t.size&&!_)return!1;var m=o.get(e);if(m)return m==t;r|=2,o.set(e,t);var p=a(c(e),c(t),r,i,s,o);return o.delete(e),p;case"[object Symbol]":if(f)return f.call(e)==f.call(t)}return!1};var p=n(438366),g=Object.prototype.hasOwnProperty;const v=function(e,t,n,r,i,s){var o=1&n,a=(0,p.default)(e),c=a.length;if(c!=(0,p.default)(t).length&&!o)return!1;for(var u=c;u--;){var l=a[u];if(!(o?l in t:g.call(t,l)))return!1}var h=s.get(e),d=s.get(t);if(h&&d)return h==t&&d==e;var _=!0;s.set(e,t),s.set(t,e);for(var f=o;++u<c;){var m=e[l=a[u]],v=t[l];if(r)var S=o?r(v,m,l,t,e,s):r(m,v,l,e,t,s);if(!(void 0===S?m===v||i(m,v,n,r,s):S)){_=!1;break}f||(f="constructor"==l)}if(_&&!f){var E=e.constructor,b=t.constructor;E==b||!("constructor"in e)||!("constructor"in t)||"function"==typeof E&&E instanceof E&&"function"==typeof b&&b instanceof b||(_=!1)}return s.delete(e),s.delete(t),_};var S=n(987796),E=n(456052),b=n(232437),T=n(109125),w="[object Arguments]",C="[object Array]",P="[object Object]",A=Object.prototype.hasOwnProperty;const N=function(e,t,n,i,s,o){var c=(0,E.default)(e),u=(0,E.default)(t),l=c?C:(0,S.default)(e),h=u?C:(0,S.default)(t),d=(l=l==w?P:l)==P,_=(h=h==w?P:h)==P,f=l==h;if(f&&(0,b.default)(e)){if(!(0,b.default)(t))return!1;c=!0,d=!1}if(f&&!d)return o||(o=new r.default),c||(0,T.default)(e)?a(e,t,n,i,s,o):m(e,t,l,n,i,s,o);if(!(1&n)){var p=d&&A.call(e,"__wrapped__"),g=_&&A.call(t,"__wrapped__");if(p||g){var N=p?e.value():e,O=g?t.value():t;return o||(o=new r.default),s(N,O,n,i,o)}}return!!f&&(o||(o=new r.default),v(e,t,n,i,s,o))};var O=n(513795);const y=function e(t,n,r,i,s){return t===n||(null==t||null==n||!(0,O.default)(t)&&!(0,O.default)(n)?t!=t&&n!=n:N(t,n,r,i,e,s))}},705561:(e,t,n)=>{"use strict";n.d(t,{default:()=>w});var r=n(87593),i=n(39216);const s=function(e,t,n,s){var o=n.length,a=o,c=!s;if(null==e)return!a;for(e=Object(e);o--;){var u=n[o];if(c&&u[2]?u[1]!==e[u[0]]:!(u[0]in e))return!1}for(;++o<a;){var l=(u=n[o])[0],h=e[l],d=u[1];if(c&&u[2]){if(void 0===h&&!(l in e))return!1}else{var _=new r.default;if(s)var f=s(h,d,l,e,t,_);if(!(void 0===f?(0,i.default)(d,h,3,s,_):f))return!1}}return!0};var o=n(182433);const a=function(e){return e==e&&!(0,o.default)(e)};var c=n(377251);const u=function(e){for(var t=(0,c.default)(e),n=t.length;n--;){var r=t[n],i=e[r];t[n]=[r,i,a(i)]}return t};const l=function(e,t){return function(n){return null!=n&&(n[e]===t&&(void 0!==t||e in Object(n)))}};const h=function(e){var t=u(e);return 1==t.length&&t[0][2]?l(t[0][0],t[0][1]):function(n){return n===e||s(n,e,t)}};var d=n(954029),_=n(424720),f=n(261070),m=n(213383);const p=function(e,t){return(0,f.default)(e)&&a(t)?l((0,m.default)(e),t):function(n){var r=(0,d.default)(n,e);return void 0===r&&r===t?(0,_.default)(n,e):(0,i.default)(t,r,3)}};var g=n(876402),v=n(456052),S=n(42361),E=n(549084);const b=function(e){return function(t){return(0,E.default)(t,e)}}
;const T=function(e){return(0,f.default)(e)?(0,S.default)((0,m.default)(e)):b(e)};const w=function(e){return"function"==typeof e?e:null==e?g.default:"object"==typeof e?(0,v.default)(e)?p(e[0],e[1]):h(e):T(e)}},589815:(e,t,n)=>{"use strict";n.d(t,{default:()=>o});var r=n(5196);const i=(0,n(245635).default)(Object.keys,Object);var s=Object.prototype.hasOwnProperty;const o=function(e){if(!(0,r.default)(e))return i(e);var t=[];for(var n in Object(e))s.call(e,n)&&"constructor"!=n&&t.push(n);return t}},42361:(e,t,n)=>{"use strict";n.d(t,{default:()=>r});const r=function(e){return function(t){return null==t?void 0:t[e]}}},805467:(e,t,n)=>{"use strict";n.d(t,{default:()=>r});const r=function(e){return function(t){return e(t)}}},620465:(e,t,n)=>{"use strict";n.d(t,{default:()=>r});const r=function(e,t){return e.has(t)}},410687:(e,t,n)=>{"use strict";n.d(t,{default:()=>c});const r=function(e,t,n,r){for(var i=-1,s=null==e?0:e.length;++i<s;){var o=e[i];t(r,o,n(o),e)}return r};var i=n(131679);const s=function(e,t,n,r){return(0,i.default)(e,(function(e,i,s){t(r,e,n(e),s)})),r};var o=n(705561),a=n(456052);const c=function(e,t){return function(n,i){var c=(0,a.default)(n)?r:s,u=t?t():{};return c(n,e,(0,o.default)(i,2),u)}}},355136:(e,t,n)=>{"use strict";n.d(t,{default:()=>i});var r=n(52494);const i=function(){try{var e=(0,r.default)(Object,"defineProperty");return e({},"",{}),e}catch(e){}}()},438366:(e,t,n)=>{"use strict";n.d(t,{default:()=>o});var r=n(296909),i=n(21578),s=n(377251);const o=function(e){return(0,r.default)(e,s.default,i.default)}},21578:(e,t,n)=>{"use strict";n.d(t,{default:()=>a});const r=function(e,t){for(var n=-1,r=null==e?0:e.length,i=0,s=[];++n<r;){var o=e[n];t(o,n,e)&&(s[i++]=o)}return s};var i=n(469043),s=Object.prototype.propertyIsEnumerable,o=Object.getOwnPropertySymbols;const a=o?function(e){return null==e?[]:(e=Object(e),r(o(e),(function(t){return s.call(e,t)})))}:i.default},987796:(e,t,n)=>{"use strict";n.d(t,{default:()=>w});var r=n(52494),i=n(799615);const s=(0,r.default)(i.default,"DataView");var o=n(19385);const a=(0,r.default)(i.default,"Promise");var c=n(336169),u=n(837390),l=n(389572),h=n(265114),d="[object Map]",_="[object Promise]",f="[object Set]",m="[object WeakMap]",p="[object DataView]",g=(0,h.default)(s),v=(0,h.default)(o.default),S=(0,h.default)(a),E=(0,h.default)(c.default),b=(0,h.default)(u.default),T=l.default;(s&&T(new s(new ArrayBuffer(1)))!=p||o.default&&T(new o.default)!=d||a&&T(a.resolve())!=_||c.default&&T(new c.default)!=f||u.default&&T(new u.default)!=m)&&(T=function(e){var t=(0,l.default)(e),n="[object Object]"==t?e.constructor:void 0,r=n?(0,h.default)(n):"";if(r)switch(r){case g:return p;case v:return d;case S:return _;case E:return f;case b:return m}return t});const w=T},399313:(e,t,n)=>{"use strict";n.d(t,{default:()=>i});var r=/^(?:0|[1-9]\d*)$/;const i=function(e,t){var n=typeof e;return!!(t=t??9007199254740991)&&("number"==n||"symbol"!=n&&r.test(e))&&e>-1&&e%1==0&&e<t}},5196:(e,t,n)=>{"use strict";n.d(t,{default:()=>i});var r=Object.prototype;const i=function(e){
var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||r)}},292350:(e,t,n)=>{"use strict";n.d(t,{default:()=>a});var r=n(97889),i="object"==typeof exports&&exports&&!exports.nodeType&&exports,s=i&&"object"==typeof module&&module&&!module.nodeType&&module,o=s&&s.exports===i&&r.default.process;const a=function(){try{var e=s&&s.require&&s.require("util").types;return e||o&&o.binding&&o.binding("util")}catch(e){}}()},245635:(e,t,n)=>{"use strict";n.d(t,{default:()=>r});const r=function(e,t){return function(n){return e(t(n))}}},564423:(e,t,n)=>{"use strict";n.d(t,{default:()=>r});const r=function(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}},226190:(e,t,n)=>{"use strict";n.d(t,{default:()=>o});var r=n(600857),i=n(410687),s=Object.prototype.hasOwnProperty;const o=(0,i.default)((function(e,t,n){s.call(e,n)?++e[n]:(0,r.default)(e,n,1)}))},954029:(e,t,n)=>{"use strict";n.d(t,{default:()=>i});var r=n(549084);const i=function(e,t,n){var i=null==e?void 0:(0,r.default)(e,t);return void 0===i?n:i}},424720:(e,t,n)=>{"use strict";n.d(t,{default:()=>h});const r=function(e,t){return null!=e&&t in Object(e)};var i=n(561882),s=n(154404),o=n(456052),a=n(399313),c=n(965743),u=n(213383);const l=function(e,t,n){for(var r=-1,l=(t=(0,i.default)(t,e)).length,h=!1;++r<l;){var d=(0,u.default)(t[r]);if(!(h=null!=e&&n(e,d)))break;e=e[d]}return h||++r!=l?h:!!(l=null==e?0:e.length)&&(0,c.default)(l)&&(0,a.default)(d,l)&&((0,o.default)(e)||(0,s.default)(e))};const h=function(e,t){return null!=e&&l(e,t,r)}},876402:(e,t,n)=>{"use strict";n.d(t,{default:()=>r});const r=function(e){return e}},154404:(e,t,n)=>{"use strict";n.d(t,{default:()=>u});var r=n(389572),i=n(513795);const s=function(e){return(0,i.default)(e)&&"[object Arguments]"==(0,r.default)(e)};var o=Object.prototype,a=o.hasOwnProperty,c=o.propertyIsEnumerable;const u=s(function(){return arguments}())?s:function(e){return(0,i.default)(e)&&a.call(e,"callee")&&!c.call(e,"callee")}},649634:(e,t,n)=>{"use strict";n.d(t,{default:()=>s});var r=n(688987),i=n(965743);const s=function(e){return null!=e&&(0,i.default)(e.length)&&!(0,r.default)(e)}},232437:(e,t,n)=>{"use strict";n.d(t,{default:()=>c});var r=n(799615);const i=function(){return!1};var s="object"==typeof exports&&exports&&!exports.nodeType&&exports,o=s&&"object"==typeof module&&module&&!module.nodeType&&module,a=o&&o.exports===s?r.default.Buffer:void 0;const c=(a?a.isBuffer:void 0)||i},715943:(e,t,n)=>{"use strict";n.d(t,{default:()=>d});var r=n(589815),i=n(987796),s=n(154404),o=n(456052),a=n(649634),c=n(232437),u=n(5196),l=n(109125),h=Object.prototype.hasOwnProperty;const d=function(e){if(null==e)return!0;if((0,a.default)(e)&&((0,o.default)(e)||"string"==typeof e||"function"==typeof e.splice||(0,c.default)(e)||(0,l.default)(e)||(0,s.default)(e)))return!e.length;var t=(0,i.default)(e);if("[object Map]"==t||"[object Set]"==t)return!e.size;if((0,u.default)(e))return!(0,r.default)(e).length;for(var n in e)if(h.call(e,n))return!1;return!0}},650279:(e,t,n)=>{"use strict";n.d(t,{default:()=>i})
;var r=n(39216);const i=function(e,t){return(0,r.default)(e,t)}},965743:(e,t,n)=>{"use strict";n.d(t,{default:()=>r});const r=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}},109125:(e,t,n)=>{"use strict";n.d(t,{default:()=>h});var r=n(389572),i=n(965743),s=n(513795),o={};o["[object Float32Array]"]=o["[object Float64Array]"]=o["[object Int8Array]"]=o["[object Int16Array]"]=o["[object Int32Array]"]=o["[object Uint8Array]"]=o["[object Uint8ClampedArray]"]=o["[object Uint16Array]"]=o["[object Uint32Array]"]=!0,o["[object Arguments]"]=o["[object Array]"]=o["[object ArrayBuffer]"]=o["[object Boolean]"]=o["[object DataView]"]=o["[object Date]"]=o["[object Error]"]=o["[object Function]"]=o["[object Map]"]=o["[object Number]"]=o["[object Object]"]=o["[object RegExp]"]=o["[object Set]"]=o["[object String]"]=o["[object WeakMap]"]=!1;const a=function(e){return(0,s.default)(e)&&(0,i.default)(e.length)&&!!o[(0,r.default)(e)]};var c=n(805467),u=n(292350),l=u.default&&u.default.isTypedArray;const h=l?(0,c.default)(l):a},377251:(e,t,n)=>{"use strict";n.d(t,{default:()=>o});var r=n(860545),i=n(589815),s=n(649634);const o=function(e){return(0,s.default)(e)?(0,r.default)(e):(0,i.default)(e)}},481251:(e,t,n)=>{"use strict";n.d(t,{default:()=>s});var r=n(256882);const i=function(e,t){var n;if("function"!=typeof t)throw new TypeError("Expected a function");return e=(0,r.default)(e),function(){return--e>0&&(n=t.apply(this,arguments)),e<=1&&(t=void 0),n}};const s=function(e){return i(2,e)}},469043:(e,t,n)=>{"use strict";n.d(t,{default:()=>r});const r=function(){return[]}},920057:(e,t,n)=>{"use strict";n.d(t,{default:()=>s});var r=n(290484),i=n(182433);const s=function(e,t,n){var s=!0,o=!0;if("function"!=typeof e)throw new TypeError("Expected a function");return(0,i.default)(n)&&(s="leading"in n?!!n.leading:s,o="trailing"in n?!!n.trailing:o),(0,r.default)(e,t,{leading:s,maxWait:t,trailing:o})}},256882:(e,t,n)=>{"use strict";n.d(t,{default:()=>o});var r=n(678677),i=1/0;const s=function(e){return e?(e=(0,r.default)(e))===i||e===-1/0?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0};const o=function(e){var t=s(e),n=t%1;return t==t?n?t-n:t:0}}}]);
