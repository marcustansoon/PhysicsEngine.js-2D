/* CropGuide Client b1652349795869, only for use with an active CropGuide license, https://crop.guide/ (c) 2021 PQINA Inc. */
(()=>{var Tf=(e,t)=>{let n=document.createElement("link");n.href=e,n.rel="stylesheet",(t||document.head).appendChild(n)};var Rf=e=>new File([e],e.name,{type:e.type,lastModified:e.lastModified});var mg=65504,gg=65505,Pf=65498,Mf={[gg]:"exif",[mg]:"jfif",[Pf]:"sos"},bg=65496,pg=255,If=e=>{if(e.getUint16(0)!==bg)return;let t=Object.keys(Mf).map(s=>parseInt(s,10)),n=e.byteLength,o=2,i,r;for(;o<n&&e.getUint8(o)===pg;){if(i=e.getUint16(o),t.includes(i)){let s=Mf[i];r||(r={}),r[s]||(r[s]={offset:o,size:e.getUint16(o+2)})}if(i===Pf)break;o+=2+e.getUint16(o+2)}return r},yg=65505,Sg=1165519206,_g=42,wg=19789,Af=18761,kg=(e,t)=>{if(e.getUint16(t)!==yg)return;let n=e.getUint16(t+2);if(t+=4,e.getUint32(t)!==Sg)return;t+=6;let o=e.getUint16(t);if(o!==Af&&o!==wg)return;let i=o===Af;if(t+=2,e.getUint16(t,i)!==_g)return;t+=e.getUint32(t+2,i);let r=s=>{let l=[],a=t,c=t+n-16;for(;a<c;a+=12){let u=a;e.getUint16(u,i)===s&&l.push(u)}return l};return{read:s=>{let l=r(s);if(!!l.length)return e.getUint16(l[0]+8,i)},write:(s,l)=>{let a=r(s);return a.length?(a.forEach(c=>e.setUint16(c+8,l,i)),!0):!1}}},bc=274,pc=(e,t,n)=>{if(!e)return;let o=new DataView(e),i=If(o);if(!i||!i.exif)return;let r=kg(o,i.exif.offset);if(!!r)return n===void 0?r.read(t):r.write(t,n)},Ef="__pqina_webapi__",yc=e=>window[Ef]?window[Ef][e]:window[e],ct=(...e)=>{},Cg={ArrayBuffer:"readAsArrayBuffer"},Tg=(e,t=ct,n={})=>new Promise((o,i)=>{let{dataFormat:r=Cg.ArrayBuffer}=n,s=new(yc("FileReader"));s.onload=()=>o(s.result),s.onerror=i,s.onprogress=t,s[r](e)}),vf=async(e,t=[0,e.size],n)=>await Tg(e.slice(...t),n),Rg=async(e,t)=>{let n=await vf(e,[0,64*2048],t);return pc(n,bc)||1},Sc=null,on=()=>(Sc===null&&(Sc=typeof window!="undefined"&&typeof window.document!="undefined"),Sc),Vl=null,Lr=()=>new Promise(e=>{if(Vl===null){let t="data:image/jpg;base64,/9j/4AAQSkZJRgABAQEASABIAAD/4QA6RXhpZgAATU0AKgAAAAgAAwESAAMAAAABAAYAAAEoAAMAAAABAAIAAAITAAMAAAABAAEAAAAAAAD/2wBDAP//////////////////////////////////////////////////////////////////////////////////////wAALCAABAAIBASIA/8QAJgABAAAAAAAAAAAAAAAAAAAAAxABAAAAAAAAAAAAAAAAAAAAAP/aAAgBAQAAPwBH/9k=",n=on()?new Image:{};n.onload=()=>{Vl=n.naturalWidth===1,n=void 0,e(Vl)},n.src=t;return}return e(Vl)}),Ds=e=>e.getContext("2d").getImageData(0,0,e.width,e.height),Tt=(e,t,n=[])=>{let o=document.createElement(e),i=Object.getOwnPropertyDescriptors(o.__proto__);for(let r in t)r==="style"?o.style.cssText=t[r]:i[r]&&i[r].set||/textContent|innerHTML/.test(r)||typeof t[r]=="function"?o[r]=t[r]:o.setAttribute(r,t[r]);return n.forEach(r=>o.appendChild(r)),o},Pg={1:()=>[1,0,0,1,0,0],2:e=>[-1,0,0,1,e,0],3:(e,t)=>[-1,0,0,-1,e,t],4:(e,t)=>[1,0,0,-1,0,t],5:()=>[0,1,1,0,0,0],6:(e,t)=>[0,1,-1,0,t,0],7:(e,t)=>[0,-1,-1,0,t,e],8:e=>[0,-1,1,0,0,e]},Mg=(e,t,n=-1)=>(n===-1&&(n=1),Pg[n](e,t)),rn=e=>{e.width=1,e.height=1;let t=e.getContext("2d");t&&t.clearRect(0,0,1,1)},Hl=e=>"data"in e,zs=async(e,t=1)=>{let[n,o]=await Lr()||t<5?[e.width,e.height]:[e.height,e.width],i=Tt("canvas",{width:n,height:o}),r=i.getContext("2d");if(Hl(e)&&!await Lr()&&t>1){let s=Tt("canvas",{width:e.width,height:e.height});s.getContext("2d").putImageData(e,0,0),e=s}return!await Lr()&&t>1&&r.transform.apply(r,Mg(e.width,e.height,t)),Hl(e)?r.putImageData(e,0,0):r.drawImage(e,0,0),e instanceof HTMLCanvasElement&&rn(e),i},Lf=async(e,t=1)=>t===1||await Lr()?e:Ds(await zs(e,t)),Ws=e=>typeof e=="object",Ff=e=>Ws(e)?xf(e):e,xf=e=>{let t;return Array.isArray(e)?(t=[],e.forEach((n,o)=>{t[o]=Ff(n)})):(t={},Object.keys(e).forEach(n=>{let o=e[n];t[n]=Ff(o)})),t},Ht=e=>typeof e=="string",Qn=e=>typeof e=="function",Ig=(e,{width:t,height:n,canvasMemoryLimit:o})=>{let i=t||e.naturalWidth,r=n||e.naturalHeight;!i&&!r&&(i=300,r=150);let s=i*r;if(o&&s>o){let c=Math.sqrt(o)/Math.sqrt(s);i=Math.floor(i*c),r=Math.floor(r*c)}let l=Tt("canvas");return l.width=i,l.height=r,l.getContext("2d").drawImage(e,0,0,i,r),l},Ag=(e,t)=>new Promise((n,o)=>{let i=()=>n(Ig(e,t));e.complete&&e.width?i():(e.onload=i,e.onerror=o)}),Eg=async(e,t)=>{let n=Tt("img",{src:URL.createObjectURL(e)}),o=await Ag(n,{canvasMemoryLimit:t});return URL.revokeObjectURL(n.src),o},Of=()=>"createImageBitmap"in window,vg=()=>"OffscreenCanvas"in window,Bf=e=>/svg/.test(e.type),Fr=()=>Math.random().toString(36).substr(2,9),Lg=e=>new Blob(["(",typeof e=="function"?e.toString():e,")()"],{type:"application/javascript"}),Fg=e=>`function () {self.onmessage = function (message) {(${e.toString()}).apply(null, message.data.content.concat([function (err, response) {
    response = response || {};
    const transfer = 'data' in response ? [response.data.buffer] : 'width' in response ? [response] : [];
    return self.postMessage({ id: message.data.id, content: response, error: err }, transfer);
}]))}}`,_c=new Map,Nl=(e,t,n)=>new Promise((o,i)=>{let r=e.toString(),s=_c.get(r);if(!s){let a=Fg(e),c=URL.createObjectURL(Lg(a)),u=new Map,f=new Worker(c);s={url:c,worker:f,messages:u,terminationTimeout:void 0,terminate:()=>{clearTimeout(s.terminationTimeout),s.worker.terminate(),URL.revokeObjectURL(c),_c.delete(r)}},f.onmessage=function(h){let{id:m,content:b,error:p}=h.data;if(clearTimeout(s.terminationTimeout),s.terminationTimeout=setTimeout(()=>{u.size>0||s.terminate()},500),!u.has(m))return;let y=u.get(m);u.delete(m),p!=null?y.reject(p):y.resolve(b)},_c.set(r,s)}let l=Fr();s.messages.set(l,{resolve:o,reject:i}),s.worker.postMessage({id:l,content:t},n)}),Df=async(e,t)=>{let n;if(Of()&&!Bf(e)&&vg())try{n=await Nl((o,i,r)=>{createImageBitmap(o).then(s=>{let l=s.width,a=s.height,c=l*a;if(i&&c>i){let m=Math.sqrt(i)/Math.sqrt(c);l=Math.floor(l*m),a=Math.floor(a*m)}let u=new OffscreenCanvas(l,a),f=u.getContext("2d");f.drawImage(s,0,0,l,a);let h=f.getImageData(0,0,u.width,u.height);r(null,h)}).catch(s=>{r(s)})},[e,t])}catch(o){}if(!n||!n.width){let o=await Eg(e,t);n=Ds(o),rn(o)}return n},wc=(e,t=void 0,n=void 0)=>new Promise((o,i)=>{try{e.toBlob(r=>{o(r)},t,n)}catch(r){i(r)}}),xg=async(e,t,n)=>{let o=await zs(e),i=await wc(o,t,n);return rn(o),i},Og=(e,t,n=[0,e.size])=>t?new Blob([t,e.slice(...n)],{type:e.type}):e,zf=e=>(e.match(/\/([a-z]+)/)||[])[1],Bg=e=>e.substr(0,e.lastIndexOf("."))||e,Dg=e=>e.split(".").pop(),zg=/avif|bmp|gif|jpg|jpeg|jpe|jif|jfif|png|svg|tiff|webp/,Wg=e=>zg.test(e)?"image/"+(/jfif|jif|jpe|jpg/.test(e)?"jpeg":e==="svg"?"svg+xml":e):"",kc=e=>e&&Wg(Dg(e).toLowerCase()),Vg=(e,t)=>{let n=kc(e);if(n===t)return e;let o=zf(t)||n;return`${Bg(e)}.${o}`},Vs=(e,t,n)=>{let o=new Date().getTime(),i=e.type.length&&!/null|text/.test(e.type),r=i?e.type:n,s=Vg(t,r);try{return new(yc("File"))([e],s,{lastModified:o,type:i?e.type:r})}catch(l){let a=i?e.slice():e.slice(0,e.size,r);return a.lastModified=o,a.name=s,a}},ci=(e,t)=>e/t,Ft=e=>e;var $n=Math.PI/2,ui=$n/2,To=e=>{let t=Math.abs(e)%Math.PI;return t>ui&&t<Math.PI-ui},Ul=(e,t,n)=>n+(e-n)*t;var Kt=()=>oe(0,0),oe=(e,t)=>({x:e,y:t}),Hg=e=>oe(e.width,e.height),Wf=e=>oe(e.x,e.y),Vf=e=>oe(e.pageX,e.pageY),Ng=e=>oe(e.offsetX,e.offsetY),At=e=>oe(e.x,e.y);var Hf=e=>(e.x=-e.x,e.y=-e.y,e);var xr=(e,t,n=Kt())=>{let o=Math.cos(t),i=Math.sin(t),r=e.x-n.x,s=e.y-n.y;return e.x=n.x+o*r-i*s,e.y=n.y+i*r+o*s,e},Or=e=>Math.sqrt(e.x*e.x+e.y*e.y),Oi=e=>{let t=Math.sqrt(e.x*e.x+e.y*e.y);return t===0?Kt():(e.x/=t,e.y/=t,e)};var Nf=(e,t)=>e.x===t.x&&e.y===t.y,Br=(e,t)=>(e.x=t(e.x),e.y=t(e.y),e),Vn=(e,t)=>(e.x+=t.x,e.y+=t.y,e),kn=(e,t)=>(e.x-=t.x,e.y-=t.y,e);var Dr=(e,t)=>(e.x*=t,e.y*=t,e),Ug=(e,t)=>e.x*t.x+e.y*t.y,Hs=(e,t=Kt())=>{let n=e.x-t.x,o=e.y-t.y;return n*n+o*o},Bi=(e,t=Kt())=>Math.sqrt(Hs(e,t)),Zg=(e,t,n)=>(e.x=Ul(e.x,t,n.x),e.y=Ul(e.y,t,n.y),e),Ns=e=>{let t=0,n=0;return e.forEach(o=>{t+=o.x,n+=o.y}),oe(t/e.length,n/e.length)},Zl=(e,t,n,o,i)=>(e.forEach(r=>{r.x=t?o-(r.x-o):r.x,r.y=n?i-(r.y-i):r.y}),e),jl=(e,t,n,o)=>{let i=Math.sin(t),r=Math.cos(t);return e.forEach(s=>{s.x-=n,s.y-=o;let l=s.x*r-s.y*i,a=s.x*i+s.y*r;s.x=n+l,s.y=o+a}),e},zr=(e,t)=>({width:e,height:t}),eo=e=>zr(e.width,e.height),Bo=e=>zr(e.width,e.height),fi=e=>zr(e.width,e.height),jg=e=>zr(e[0],e[1]),Gg=e=>zr(e.naturalWidth,e.naturalHeight),Cc=e=>/img/i.test(e.nodeName)?Gg(e):Bo(e),Cn=(e,t)=>zr(e,t),Gl=(e,t,n=Ft)=>n(e.width)===n(t.width)&&n(e.height)===n(t.height),Uf=(e,t)=>(e.width*=t,e.height*=t,e),Xl=e=>oe(e.width*.5,e.height*.5),Zf=(e,t)=>{let n=Math.abs(t),o=Math.cos(n),i=Math.sin(n),r=o*e.width+i*e.height,s=i*e.width+o*e.height;return e.width=r,e.height=s,e},Xg=(e,t)=>{let n=e.width,o=e.height;return To(t)&&(e.width=o,e.height=n),e},jf=(e,t)=>e.width>=t.width&&e.height>=t.height,Wr=(e,t)=>(e.width=t(e.width),e.height=t(e.height),e),Yg=e=>Math.sqrt(e.width*e.width+e.height*e.height),qg=(e,t)=>Cn(Math.min(e.width,t.width),Math.min(e.height,t.height)),Yl=(e,t)=>({start:e,end:t}),Gf=e=>Yl(At(e.start),At(e.end)),Xf=(e,t)=>{if(t===0)return e;let n=oe(e.start.x-e.end.x,e.start.y-e.end.y),o=Oi(n),i=Dr(o,t);return e.start.x+=i.x,e.start.y+=i.y,e.end.x-=i.x,e.end.y-=i.y,e},Kg=(e,t)=>{if(t===0)return e;let n=oe(e.start.x-e.end.x,e.start.y-e.end.y),o=Oi(n),i=Dr(o,t);return e.end.x+=i.x,e.end.y+=i.y,e};var Jg=[oe(-1,-1),oe(-1,1),oe(1,1),oe(1,-1)],fo=(e,t,n,o)=>({x:e,y:t,width:n,height:o}),et=e=>fo(e.x,e.y,e.width,e.height),Do=()=>fo(0,0,0,0),Qg=(e,t)=>fo(0,0,e,t),An=e=>fo(0,0,e.width,e.height),Yf=e=>fo(e.x||0,e.y||0,e.width||0,e.height||0),Ro=e=>{let t=e[0].x,n=e[0].x,o=e[0].y,i=e[0].y;return e.forEach(r=>{t=Math.min(t,r.x),n=Math.max(n,r.x),o=Math.min(o,r.y),i=Math.max(i,r.y)}),fo(t,o,n-t,i-o)};var qf=(e,t)=>fo(e.x-t.width*.5,e.y-t.height*.5,t.width,t.height),Tn=(e,t,n,o)=>fo(e,t,n,o),xt=e=>oe(e.x+e.width*.5,e.y+e.height*.5),Vr=(e,t)=>(e.x+=t.x,e.y+=t.y,e),di=(e,t,n)=>(n=n||xt(e),e.x=t*(e.x-n.x)+n.x,e.y=t*(e.y-n.y)+n.y,e.width=t*e.width,e.height=t*e.height,e),Us=(e,t)=>(e.x*=t,e.y*=t,e.width*=t,e.height*=t,e),Kf=(e,t)=>(e.x/=t,e.y/=t,e.width/=t,e.height/=t,e),$g=(e,t)=>(e.x-=t.x,e.y-=t.y,e.width-=t.width,e.height-=t.height,e),eb=(e,t)=>(e.x+=t.x,e.y+=t.y,e.width+=t.width,e.height+=t.height,e),zo=(e,t,n=Ft)=>n(e.x)===n(t.x)&&n(e.y)===n(t.y)&&n(e.width)===n(t.width)&&n(e.height)===n(t.height),zt=e=>ci(e.width,e.height),Jf=(e,t,n,o,i)=>(e.x=t,e.y=n,e.width=o,e.height=i,e),ql=(e,t)=>(e.x=t.x,e.y=t.y,e.width=t.width,e.height=t.height,e),Di=(e,t,n)=>(n||(n=xt(e)),Hr(e).map(o=>xr(o,t,n))),Qf=(e,t)=>fo(e.width*.5-t.width*.5,e.height*.5-t.height*.5,t.width,t.height),$f=(e,t)=>!(t.x<e.x||t.y<e.y||t.x>e.x+e.width||t.y>e.y+e.height),Kl=(e,t,n=Kt())=>{if(e.width===0||e.height===0)return Do();let o=zt(e);t||(t=o);let i=e.width,r=e.height;return t>o?i=r*t:r=i/t,fo(n.x+(e.width-i)*.5,n.y+(e.height-r)*.5,i,r)},En=(e,t=zt(e),n=Kt())=>{if(e.width===0||e.height===0)return Do();let o=e.width,i=o/t;return i>e.height&&(i=e.height,o=i*t),fo(n.x+(e.width-o)*.5,n.y+(e.height-i)*.5,o,i)},Tc=e=>[Math.min(e.y,e.y+e.height),Math.max(e.x,e.x+e.width),Math.max(e.y,e.y+e.height),Math.min(e.x,e.x+e.width)],Hr=e=>[oe(e.x,e.y),oe(e.x+e.width,e.y),oe(e.x+e.width,e.y+e.height),oe(e.x,e.y+e.height)],ho=(e,t)=>{if(!!e)return e.x=t(e.x),e.y=t(e.y),e.width=t(e.width),e.height=t(e.height),e},ed=(e,t,n=xt(e))=>Hr(e).map((o,i)=>{let r=Jg[i];return oe(Ul(o.x,1+r.x*t.x,n.x),Ul(o.y,1+r.y*t.y,n.y))}),Rc=e=>(e.x=0,e.y=0,e),Pc=e=>{let t=e[0],n=e[e.length-1];e=Nf(t,n)?e:[...e,t];let o=t.x,i=t.y,r=0,s=0,l=0,a=0,c,u,f,h=e.length;for(;s<h;s++)c=e[s],u=e[s+1>h-1?0:s+1],f=(c.y-i)*(u.x-o)-(u.y-i)*(c.x-o),r+=f,l+=(c.x+u.x-2*o)*f,a+=(c.y+u.y-2*i)*f;return f=r*3,oe(o+l/f,i+a/f)},td=(e,t)=>tb(e.start,e.end,t.start,t.end),tb=(e,t,n,o)=>{let i=(o.y-n.y)*(t.x-e.x)-(o.x-n.x)*(t.y-e.y);if(i===0)return;let r=((o.x-n.x)*(e.y-n.y)-(o.y-n.y)*(e.x-n.x))/i,s=((t.x-e.x)*(e.y-n.y)-(t.y-e.y)*(e.x-n.x))/i;if(!(r<0||r>1||s<0||s>1))return oe(e.x+r*(t.x-e.x),e.y+r*(t.y-e.y))};var nd=e=>{let t=[];for(let n=0;n<e.length;n++){let o=n+1;o===e.length&&(o=0),t.push(Yl(At(e[n]),At(e[o])))}return t},nb=(e,t,n,o=0,i=!1,r=!1,s=12)=>{let l=[];for(let a=0;a<s;a++)l.push(oe(e.x+t*Math.cos(a*(Math.PI*2)/s),e.y+n*Math.sin(a*(Math.PI*2)/s)));return(i||r)&&Zl(l,i,r,e.x,e.y),o&&jl(l,o,e.x,e.y),l},ob=(e,t)=>{let n=An(e),o=xt(n),i=Di(n,t,o);return Rc(Ro(i))},Zs=(e,t)=>e instanceof HTMLElement&&(t?new RegExp(`^${t}$`,"i").test(e.nodeName):!0),od=e=>e instanceof File,ib=async(e,t,n)=>{let o=await wc(e,t,n);return Vs(o,"canvas")},id=e=>e.split("/").pop().split(/\?|\#/).shift(),rb=on()&&!!Node.prototype.replaceChildren,sb=rb?(e,t)=>e.replaceChildren(t):(e,t)=>{for(;e.lastChild;)e.removeChild(e.lastChild);t!==void 0&&e.append(t)},Jl=on()&&Tt("div",{class:"PinturaMeasure",style:"pointer-events:none;left:0;top:0;width:0;height:0;contain:strict;overflow:hidden;position:absolute;"}),rd,Mc=e=>(sb(Jl,e),Jl.parentNode||document.body.append(Jl),clearTimeout(rd),rd=setTimeout(()=>{Jl.remove()},500),e),Ic=null,js=()=>(Ic===null&&(Ic=on()&&/^((?!chrome|android).)*(safari|iphone|ipad)/i.test(navigator.userAgent)),Ic),sd=e=>new Promise((t,n)=>{let o=!1;!e.parentNode&&js()&&(o=!0,e.style.cssText="position:absolute;visibility:hidden;pointer-events:none;left:0;top:0;width:0;height:0;",Mc(e));let i=()=>{let s=e.naturalWidth,l=e.naturalHeight;!(s&&l)||(o&&e.remove(),clearInterval(r),t({width:s,height:l}))};e.onerror=s=>{clearInterval(r),n(s)};let r=setInterval(i,1);i()}),ld=async e=>{let t=e;t.src||(t=new Image,t.src=Ht(e)?e:URL.createObjectURL(e));let n;try{n=await sd(t)}finally{od(e)&&URL.revokeObjectURL(t.src)}return n},lb=e=>new Promise((t,n)=>{if(e.complete)return t(e);e.onload=()=>t(e),e.onerror=n}),ab=async e=>{try{let t=await ld(e),n=await lb(e),o=document.createElement("canvas");o.width=t.width,o.height=t.height,o.getContext("2d").drawImage(n,0,0);let r=await wc(o);return Vs(r,id(n.src))}catch(t){throw t}},cb=e=>/^data:/.test(e),Nr=(e=0,t=!0)=>new(yc("ProgressEvent"))("progress",{loaded:e*100,total:100,lengthComputable:t}),ad=e=>/^image/.test(e.type),ub=async(e,t="data-uri",n=ct)=>{n(Nr(0));let o=await fetch(e);n(Nr(.33));let i=await o.blob(),r;ad(i)||(r=`image/${e.includes(",/9j/")?"jpeg":"png"}`),n(Nr(.66));let s=Vs(i,t,r);return n(Nr(1)),s},cd=(e,t,n=o=>o)=>e.getAllResponseHeaders().indexOf(t)>=0?n(e.getResponseHeader(t)):void 0,fb=e=>{if(!e)return null;let t=e.split(/filename=|filename\*=.+''/).splice(1).map(n=>n.trim().replace(/^["']|[;"']{0,2}$/g,"")).filter(n=>n.length);return t.length?decodeURI(t[t.length-1]):null},db={URL_REQUEST:"URL_REQUEST",DOCTYPE_MISSING:"DOCTYPE_MISSING"},Gs=class extends Error{constructor(t,n,o){super(t);this.name="EditorError",this.code=n,this.metadata=o}},hb=(e,t)=>new Promise((n,o)=>{let i=()=>o(new Gs("Error fetching image",db.URL_REQUEST,r)),r=new XMLHttpRequest;r.onprogress=t,r.onerror=i,r.onload=()=>{if(!r.response||r.status>=300||r.status<200)return i();let s=cd(r,"Content-Type"),l=cd(r,"Content-Disposition",fb)||id(e);n(Vs(r.response,l,s||kc(l)))},r.open("GET",e),r.responseType="blob",r.send()}),mb=(e,t)=>cb(e)?ub(e,void 0,t):hb(e,t),gb=e=>e instanceof Blob&&!(e instanceof File),bb=async(e,t)=>{if(od(e)||gb(e))return e;if(Ht(e))return await mb(e,t);if(Zs(e,"canvas"))return await ib(e);if(Zs(e,"img"))return await ab(e);throw new Gs("Invalid image source","invalid-image-source")},Ac=null,pb=()=>(Ac===null&&(Ac=on()&&/^mac/i.test(navigator.platform)),Ac),ud=e=>on()?RegExp(e).test(window.navigator.userAgent):void 0,Ec=null,Po=()=>(Ec===null&&(Ec=on()&&(ud(/iPhone|iPad|iPod/)||pb()&&navigator.maxTouchPoints>=1)),Ec),yb=async(e,t=1)=>await Lr()||Po()||t<5?e:Cn(e.height,e.width),fd=e=>/jpeg/.test(e.type),Sb=e=>typeof e=="object"&&e.constructor==Object,_b=e=>Sb(e)?JSON.stringify(e):e,wb=(e,t,n)=>new Promise((o,i)=>{let{token:r={},beforeSend:s=ct,onprogress:l=ct}=n;r.cancel=()=>a.abort();let a=new XMLHttpRequest;a.upload.onprogress=l,a.onload=()=>a.status>=200&&a.status<300?o(a):i(a),a.onerror=()=>i(a),a.ontimeout=()=>i(a),a.open("POST",encodeURI(e)),s(a),a.send(t instanceof FormData?t:t.reduce((c,u)=>(c.append(...u.map(_b)),c),new FormData))}),dd=(e,t=0,n)=>(t===0||(e.translate(n.x,n.y),e.rotate(t),e.translate(-n.x,-n.y)),e),kb=(e,t,n)=>(e.translate(t,n),e),Cb=(e,t,n)=>(e.scale(t,n),e),Tb=async(e,t={})=>{let{flipX:n,flipY:o,rotation:i,crop:r}=t,s=Bo(e),l=n||o,a=!!i,c=r&&(r.x||r.y||r.width||r.height),u=c&&zo(r,An(s)),f=c&&!u;if(!l&&!a&&!f)return e;let h,m=Tt("canvas",{width:e.width,height:e.height});if(m.getContext("2d").putImageData(e,0,0),l){let p=Tt("canvas",{width:m.width,height:m.height}).getContext("2d");Cb(p,n?-1:1,o?-1:1),p.drawImage(m,n?-m.width:0,o?-m.height:0),p.restore(),rn(m),m=p.canvas}if(a){let p=Wr(fi(Ro(Di(Yf(m),i))),Math.floor),y=Tt("canvas",{width:r.width,height:r.height}).getContext("2d");kb(y,-r.x,-r.y),dd(y,i,Xl(p)),y.drawImage(m,(p.width-m.width)*.5,(p.height-m.height)*.5),y.restore(),rn(m),m=y.canvas}else if(f)return h=m.getContext("2d").getImageData(r.x,r.y,r.width,r.height),rn(m),h;return h=m.getContext("2d").getImageData(0,0,m.width,m.height),rn(m),h},Rb=(e,t)=>{let{imageData:n,width:o,height:i}=e,r=n.width,s=n.height,l=Math.round(o),a=Math.round(i),c=n.data,u=new Uint8ClampedArray(l*a*4),f=r/l,h=s/a,m=Math.ceil(f*.5),b=Math.ceil(h*.5);for(let p=0;p<a;p++)for(let y=0;y<l;y++){let w=(y+p*l)*4,C=0,M=0,R=0,k=0,T=0,P=0,D=0,x=(p+.5)*h;for(let A=Math.floor(p*h);A<(p+1)*h;A++){let g=Math.abs(x-(A+.5))/b,O=(y+.5)*f,j=g*g;for(let v=Math.floor(y*f);v<(y+1)*f;v++){let G=Math.abs(O-(v+.5))/m,z=Math.sqrt(j+G*G);if(z<-1||z>1||(C=2*z*z*z-3*z*z+1,C<=0))continue;G=4*(v+A*r);let B=c[G+3];D+=C*B,R+=C,B<255&&(C=C*B/250),k+=C*c[G],T+=C*c[G+1],P+=C*c[G+2],M+=C}}u[w]=k/M,u[w+1]=T/M,u[w+2]=P/M,u[w+3]=D/R}t(null,{data:u,width:l,height:a})},hd=e=>{if(e instanceof ImageData)return e;let t;try{t=new ImageData(e.width,e.height)}catch(n){t=Tt("canvas").getContext("2d").createImageData(e.width,e.height)}return t.data.set(e.data),t},Pb=async(e,t={},n)=>{let{width:o,height:i,fit:r,upscale:s}=t;if(!o&&!i)return e;let l=o,a=i;if(o?i||(a=o):l=i,r!=="force"){let c=l/e.width,u=a/e.height,f=1;if(r==="cover"?f=Math.max(c,u):r==="contain"&&(f=Math.min(c,u)),f>1&&s===!1)return e;l=Math.round(e.width*f),a=Math.round(e.height*f)}return l=Math.max(l,1),a=Math.max(a,1),e.width===l&&e.height===a?e:n?n(e,l,a):(e=await Nl(Rb,[{imageData:e,width:l,height:a}],[e.data.buffer]),hd(e))},Mb=(e,t)=>{let{imageData:n,matrix:o}=e;if(!o)return t(null,n);let i=new Uint8ClampedArray(n.width*n.height*4),r=n.data,s=r.length,l=o[0],a=o[1],c=o[2],u=o[3],f=o[4],h=o[5],m=o[6],b=o[7],p=o[8],y=o[9],w=o[10],C=o[11],M=o[12],R=o[13],k=o[14],T=o[15],P=o[16],D=o[17],x=o[18],A=o[19],g=0,O=0,j=0,v=0,G=0,z=0,B=0,ee=0,ge=0,ve=0,Oe=0,Ve=0;for(;g<s;g+=4)O=r[g]/255,j=r[g+1]/255,v=r[g+2]/255,G=r[g+3]/255,z=O*l+j*a+v*c+G*u+f,B=O*h+j*m+v*b+G*p+y,ee=O*w+j*C+v*M+G*R+k,ge=O*T+j*P+v*D+G*x+A,ve=Math.max(0,z*ge)+(1-ge),Oe=Math.max(0,B*ge)+(1-ge),Ve=Math.max(0,ee*ge)+(1-ge),i[g]=Math.max(0,Math.min(1,ve))*255,i[g+1]=Math.max(0,Math.min(1,Oe))*255,i[g+2]=Math.max(0,Math.min(1,Ve))*255,i[g+3]=G*255;t(null,{data:i,width:n.width,height:n.height})},Ib=(e,t)=>{let{imageData:n,matrix:o}=e;if(!o)return t(null,n);let i=o.reduce((D,x)=>D+x);i=i<=0?1:i;let r=n.width,s=n.height,l=n.data,a=0,c=0,u=0,f=Math.round(Math.sqrt(o.length)),h=Math.floor(f/2),m=0,b=0,p=0,y=0,w=0,C=0,M=0,R=0,k=0,T=0,P=new Uint8ClampedArray(r*s*4);for(u=0;u<s;u++)for(c=0;c<r;c++){for(m=0,b=0,p=0,y=0,C=0;C<f;C++)for(w=0;w<f;w++)M=u+C-h,R=c+w-h,M<0&&(M=s-1),M>=s&&(M=0),R<0&&(R=r-1),R>=r&&(R=0),k=(M*r+R)*4,T=o[C*f+w],m+=l[k]*T,b+=l[k+1]*T,p+=l[k+2]*T,y+=l[k+3]*T;P[a]=m/i,P[a+1]=b/i,P[a+2]=p/i,P[a+3]=y/i,a+=4}t(null,{data:P,width:r,height:s})},Ab=(e,t)=>{let{imageData:n,strength:o}=e;if(!o)return t(null,n);let i=new Uint8ClampedArray(n.width*n.height*4),r=n.width,s=n.height,l=n.data,a=(A,g)=>(m=A-f,b=g-h,Math.sqrt(m*m+b*b)),c=0,u=0,f=r*.5,h=s*.5,m,b,p=a(0,0),y,w,C,M,R,k,T,P,D,x=(A,g,O,j)=>{M=g[A]/255,R=g[A+1]/255,k=g[A+2]/255,T=g[A+3]/255,P=1-j,D=P*T+j,O[A]=(P*T*M+j*y)/D*255,O[A+1]=(P*T*R+j*w)/D*255,O[A+2]=(P*T*k+j*C)/D*255,O[A+3]=D*255};for(o>0?(y=0,w=0,C=0):(o=Math.abs(o),y=1,w=1,C=1),u=0;u<s;u++)for(c=0;c<r;c++)x((c+u*r)*4,l,i,a(c,u)*o/p);t(null,{data:i,width:n.width,height:n.height})},Eb=(e,t)=>{let{imageData:n,level:o,monochrome:i=!1}=e;if(!o)return t(null,n);let r=new Uint8ClampedArray(n.width*n.height*4),s=n.data,l=s.length,a=0,c,u,f,h=()=>(-1+Math.random()*2)*255*o,m=i?()=>{let b=h();return[b,b,b]}:()=>[h(),h(),h()];for(;a<l;a+=4)[c,u,f]=m(),r[a]=s[a]+c,r[a+1]=s[a+1]+u,r[a+2]=s[a+2]+f,r[a+3]=s[a+3];t(null,{data:r,width:n.width,height:n.height})},vb=(e,t)=>{let{imageData:n,level:o}=e;if(!o)return t(null,n);let i=new Uint8ClampedArray(n.width*n.height*4),r=n.data,s=r.length,l=0,a,c,u;for(;l<s;l+=4)a=r[l]/255,c=r[l+1]/255,u=r[l+2]/255,i[l]=Math.pow(a,o)*255,i[l+1]=Math.pow(c,o)*255,i[l+2]=Math.pow(u,o)*255,i[l+3]=r[l+3];t(null,{data:i,width:n.width,height:n.height})},Lb=e=>{let t=e.length,n,o=t>=20?6:t>=16?5:3;for(let i=0;i<t;i++){if(n=e[i],n===1&&i%o!=0)return!1;if(n!==0&&n!==1)return!1}return!0},Fb=async(e,t={})=>{let{colorMatrix:n,convolutionMatrix:o,gamma:i,noise:r,vignette:s}=t,l=[];if(o&&l.push([Ib,{matrix:o.clarity}]),i>0&&l.push([vb,{level:1/i}]),n&&!Lb(n)&&l.push([Mb,{matrix:n}]),(r>0||r<0)&&l.push([Eb,{level:r}]),(s>0||s<0)&&l.push([Ab,{strength:s}]),!l.length)return e;let a=(u,f)=>`(err, imageData) => {
            (${u[f][0].toString()})(Object.assign({ imageData: imageData }, filterInstructions[${f}]), 
                ${u[f+1]?a(u,f+1):"done"})
        }`,c=`function (options, done) {
        const filterInstructions = options.filterInstructions;
        const imageData = options.imageData;
        (${a(l,0)})(null, imageData)
    }`;return e=await Nl(c,[{imageData:e,filterInstructions:l.map(u=>u[1])}],[e.data.buffer]),hd(e)},ut=e=>typeof e=="number";var mt=(e,t)=>e.hasOwnProperty(t),sn=e=>Array.isArray(e);var Ql=e=>e instanceof Blob;var vn=e=>`rgba(${Math.round(e[0]*255)}, ${Math.round(e[1]*255)}, ${Math.round(e[2]*255)}, ${ut(e[3])?e[3]:1})`,vc=e=>Object.values(e).join("_"),xb=(e=0)=>new Promise(t=>{setTimeout(t,e)}),Ob=e=>!new Uint32Array(e.getImageData(0,0,e.canvas.width,e.canvas.height).data.buffer).some(n=>n!==0),md=80,gd=80,bd=async(e,t=0)=>{let o=Tt("canvas",{width:md,height:gd}).getContext("2d");return await xb(t),o.drawImage(e,0,0,md,gd),Ob(o)&&t<=256?await bd(e,t+16):!0},pd=new Map,Bb=(e,{safariCacheKey:t="*"}={})=>new Promise((n,o)=>{let i=new Image;i.onerror=o,i.onload=()=>{if(!js()||!e.includes("@font-face")||pd.has(t))return n(i);bd(i).then(()=>{pd.set(t,!0),n(i)})},i.src="data:image/svg+xml,"+e}),Db=e=>new Promise((t,n)=>{let o=new FileReader;o.onerror=n,o.onload=()=>t(o.result),o.readAsDataURL(e)}),Mo=()=>{let e=[];return{sub:(t,n)=>(e.push({event:t,callback:n}),()=>e=e.filter(o=>o.event!==t||o.callback!==n)),pub:(t,n)=>{e.filter(o=>o.event===t).forEach(o=>o.callback(n))}}},zb=e=>e.replace(/</g,"&lt;").replace(/>/g,"&gt;"),Ur=32,Wb=({fontSize:e=16,lineHeight:t=20}={})=>Math.max(0,e-t)*.5,Lc=({color:e=[0,0,0],fontSize:t=16,fontFamily:n="sans-serif",fontVariant:o="normal",fontWeight:i="normal",fontStyle:r="normal",textAlign:s="left",lineHeight:l=20})=>`font-size:${t}px;font-style:${r};font-weight:${i};font-family:${n};font-variant:${o};line-height:${l}px;text-align:${s};color:${vn(e)};`,Fc=e=>{let{width:t,height:n}=e,o=!t,i=o?"auto":`${t}px`,r=n?`${n}px`:"auto",s=o?"normal":"break-word",l=o?"nowrap":"pre-line",a=Wb(e);return`max-width:none;min-width:auto;width:${i};height:${r};margin-top:0;margin-bottom:0;padding-top:${a}px;word-break:${s};word-wrap:normal;white-space:${l};overflow:visible;`},yd=new Map,Vb=(e="",t)=>{let{width:n=0,height:o="auto",fontSize:i,fontFamily:r,lineHeight:s,fontWeight:l,fontStyle:a,fontVariant:c}=t,u=vc({text:e,fontFamily:r,fontWeight:l,fontStyle:a,fontVariant:c,fontSize:i,lineHeight:s,width:n,height:o}),f=yd.get(u);if(f)return f;let h=Tt("span"),m=Mc(Tt("pre",{contenteditable:"true",spellcheck:"false",style:`pointer-events:none;visibility:hidden;position:absolute;left:0;top:0;${Lc({fontFamily:r,fontWeight:l,fontStyle:a,fontVariant:c,fontSize:i,lineHeight:s})};${Fc(t)}"`,innerHTML:e},[h])),b=m.getBoundingClientRect(),p=h.getBoundingClientRect();return f={textSize:Bo(b),lastCharPosition:Br(Wf(p),Math.round)},yd.set(u,f),m.remove(),f},Sd=new Map,xc=(e="",t)=>{let{width:n=0,height:o=0}=t;if(n&&o)return Cn(n,o);let{fontSize:i,fontFamily:r,lineHeight:s,fontWeight:l,fontStyle:a,fontVariant:c}=t,u=vc({text:e,fontFamily:r,fontWeight:l,fontStyle:a,fontVariant:c,fontSize:i,lineHeight:s,width:n}),f=Sd.get(u);if(f)return f;let m=Mc(Tt("pre",{contenteditable:"true",spellcheck:"false",style:`pointer-events:none;visibility:hidden;position:absolute;${Lc(t)};${Fc(t)}"`,innerHTML:e},[Tt("span")])).getBoundingClientRect();return f=Bo(m),f.height+=Math.max(0,i-s),Sd.set(u,f),f},Hb=e=>e.pathname.split("/").slice(0,-1).join("/"),Nb=e=>{let{sub:t,pub:n}=Mo(),o,i;return fetch(e).then(r=>r.text()).then(r=>{o=r,n("load",o)}).catch(r=>{i=r,n("error",i)}),{sub:(r,s)=>{if(r==="load"&&o)return s(o);if(r==="error"&&i)return s(i);t(r,s)}}},_d=new Map,Ub=e=>new Promise((t,n)=>{let o=_d.get(e);o||(o=Nb(e),_d.set(e,o)),o.sub("load",t),o.sub("error",n)}),Zb=async e=>{let t;try{t=await Ub(e)}catch(i){return[]}let n=Tt("style",{innerHTML:t,id:Fr()});document.head.append(n);let o=Array.from(document.styleSheets).find(i=>i.ownerNode.id===n.id);return n.remove(),Array.from(o.cssRules)},$l=new Map,wd=e=>e.filter(t=>t instanceof CSSFontFaceRule),jb=async(e,t=()=>!0)=>{if($l.has(e.href))return $l.get(e.href);let n;try{n=wd(Array.from(e.cssRules))}catch(o){let i=e.href;if(!t(i))return $l.set(i,[]),[];n=wd(await Zb(i)),$l.set(i,n)}return n},kd=(e,t)=>e.style.getPropertyValue(t),Gb=(e,t)=>kd(e,"font-family").replace(/^"|"$/g,"")==t,Xb=(e,t)=>{let n=[];for(let o of e)!Gb(o,t)||n.push(o);return n},Yb=async e=>{let t=Array.from(document.styleSheets).map(i=>jb(i,e)),n=await Promise.all(t),o=[];return n.forEach(i=>o.push(...i)),o},qb=async(e,t)=>{let n=await Yb(t),o=Xb(n,e);return o.length?o.map(i=>{let r=i.parentStyleSheet.href&&new URL(i.parentStyleSheet.href),s=r?r.origin+Hb(r)+"/":"",a=i.style.getPropertyValue("src").match(/url\("?(.*?)"?\)/)[1],c=Array.from(i.style).filter(u=>u!="src").reduce((u,f)=>(u+=f+":"+kd(i,f)+";",u),"");return[/^http/.test(a)?a:s+a,c]}):[]},Cd=new Map,Td=new Map,Kb=e=>!e||/woff2/.test(e)?"woff2":/woff/.test(e)?"woff":/ttf|truetype/.test(e)?"truetype":/otf|opentype/.test(e)?"opentype":/svg/.test(e)?"svg":"woff2",Jb=async(e,t)=>{if(Cd.get(e))return;let n=Td.get(e);if(!n){let o=await qb(e,t);if(!o.length){Cd.set(e,!0);return}let i=[];for(let[r,s]of o){let l=await fetch(r).then(u=>u.blob()),a=Kb(l.type),c=await Db(l);i.push(`@font-face { src:url(${c}) format('${a}');${s};font-display:block; }`)}n=i.join(""),Td.set(e,n)}return n},Rd=async(e="",t)=>{if(!e.length)return;let{imageWidth:n=300,imageHeight:o=150,paddingLeft:i=Ur,paddingRight:r=Ur,fontFamily:s,pixelRatio:l=1,willRequestResource:a}=t,c=(n+i+r)*l,u=o*l,f=Lc(t),h=Fc(t),m=await Jb(s,a),b=e.replace(/&/g,"&amp;").replace(/#/g,"%23").replace(/<br>/g,"___BR___").replace(/\n/g,"___BR___"),y=zb(b).replace(/___BR___/g,"<br/>"),w=`<svg xmlns="http://www.w3.org/2000/svg" width="${c}" height="${u}" viewBox="0 0 ${c} ${u}"><foreignObject x="0" y="0" width="${c}" height="${u}"><div xmlns="http://www.w3.org/1999/xhtml" style="transform-origin:0 0;transform:scale(${l})">${m?`<style>${m}</style>`:""}<pre contenteditable="true" spellcheck="false" style="position:absolute;padding-right:${r}px;padding-left:${i}px;${f};${h}">${y}</pre></div></foreignObject></svg>`;return Bb(w,{safariCacheKey:s})},nt=(e,t=12)=>parseFloat(e.toFixed(t));var Xs=e=>{let t={...e};return xf(t)};var Pd=e=>oe(e.x1,e.y1),Md=e=>oe(e.x2,e.y2),zi=e=>mt(e,"text"),Oc=e=>zi(e)&&!(ra(e)||mt(e,"width")),Qb=e=>zi(e)&&(ra(e)||mt(e,"width")),ea=e=>!zi(e)&&np(e),ta=e=>mt(e,"rx"),Zr=e=>mt(e,"x1")&&!na(e),na=e=>mt(e,"x3"),oa=e=>mt(e,"points"),$b=e=>zi(e)&&!e.text.length;var ia=e=>mt(e,"opacity")?e.opacity>0:!0;var ep=e=>mt(e,"width")&&mt(e,"height"),tp=e=>ut(e.strokeWidth)&&e.strokeWidth>0;var ra=e=>(mt(e,"x")||mt(e,"left"))&&mt(e,"right")||(mt(e,"y")||mt(e,"top"))&&mt(e,"bottom"),np=e=>ep(e)||ra(e);var sa=e=>(delete e.left,delete e.right,delete e.top,delete e.bottom,e),Id=e=>(delete e.rotation,e),Ad=e=>(e.strokeWidth=e.strokeWidth||1,e.strokeColor=e.strokeColor||[0,0,0],e),Bc=e=>(e.backgroundColor=e.backgroundColor?e.backgroundColor:e.strokeWidth||e.backgroundImage?void 0:[0,0,0],e),op=e=>(e.fontSize=e.fontSize||"4%",e.fontFamily=e.fontFamily||"sans-serif",e.fontWeight=e.fontWeight||"normal",e.fontStyle=e.fontStyle||"normal",e.fontVariant=e.fontVariant||"normal",e.lineHeight=e.lineHeight||"120%",e.color=e.color||[0,0,0],Oc(e)?ip(e):rp(e)),ip=e=>(delete e.textAlign,sa(e)),rp=e=>(e.textAlign=e.textAlign||"left",e),sp=e=>(e.cornerRadius=e.cornerRadius||0,e.strokeWidth=e.strokeWidth||0,e.strokeColor=e.strokeColor||[0,0,0],Bc(e)),lp=e=>(e.strokeWidth=e.strokeWidth||0,e.strokeColor=e.strokeColor||[0,0,0],Bc(e),sa(e)),ap=e=>(e.strokeWidth=e.strokeWidth||0,e.strokeColor=e.strokeColor||[0,0,0],Bc(e)),cp=e=>(Ad(e),Id(e),sa(e)),up=e=>(Ad(e),e.lineStart=e.lineStart||void 0,e.lineEnd=e.lineEnd||void 0,Id(e),sa(e)),fp=e=>{Ht(e.id)||(e.id=Fr()),mt(e,"rotation")||(e.rotation=0),mt(e,"opacity")||(e.opacity=1),mt(e,"disableErase")||(e.disableErase=!0)},dp=e=>(fp(e),zi(e)?op(e):ea(e)?sp(e):oa(e)?cp(e):Zr(e)?up(e):ta(e)?ap(e):na(e)&&lp(e),e);var hp=new RegExp(/^x|left|right|^width|rx|fontSize|cornerRadius|strokeWidth/,"i"),mp=new RegExp(/^y|top|bottom|^height|ry/,"i"),gp=(e,t,{width:n,height:o})=>{if(Array.isArray(t))return t.map(r=>(Ws(r)&&Ed(r,{width:n,height:o}),r));if(typeof t!="string"||!t.endsWith("%"))return t;let i=parseFloat(t)/100;return hp.test(e)?nt(n*i,6):mp.test(e)?nt(o*i,6):t},Ed=(e,t)=>{Object.entries(e).map(([o,i])=>{e[o]=gp(o,i,t)});let n=e.lineHeight;Ht(n)&&(e.lineHeight=Math.round(e.fontSize*(parseFloat(n)/100)))},Wi=(e,t)=>(Ed(e,t),Fd(e,t),e);var bp=e=>{let t=Do(),n=e.strokeWidth||0;if(ea(e))t.x=e.x-n*.5,t.y=e.y-n*.5,t.width=e.width+n,t.height=e.height+n;else if(Zr(e)){let{x1:o,y1:i,x2:r,y2:s}=e,l=Math.abs(Math.min(o,r)),a=Math.abs(Math.max(o,r)),c=Math.abs(Math.min(i,s)),u=Math.abs(Math.min(i,s));t.x=l+n*.5,t.y=a+n*.5,t.width=a-l+n,t.height=u-c+n}else ta(e)&&(t.x=e.x-e.rx+n*.5,t.y=e.y-e.ry+n*.5,t.width=e.rx*2+n,t.height=e.ry*2+n);return t&&mt(e,"rotation")&&Di(t,e.rotation),Tc(t)},vd=(e,t)=>{let n=e.filter(o=>o.x<0||o.y<0||o.x1<0||o.y1<0).reduce((o,i)=>{let[r,s,l,a]=bp(i);return o.top=Math.min(r,o.top),o.left=Math.min(a,o.left),o.bottom=Math.max(l,o.bottom),o.right=Math.max(s,o.right),o},{top:0,right:0,bottom:0,left:0});return n.right>0&&(n.right-=t.width),n.bottom>0&&(n.bottom-=t.height),n},Ld=(e,t,n)=>{let o=Xs(e);return Wi(o,t),n(o)},Fd=(e,t)=>{if(mt(e,"left")&&(e.x=e.left),mt(e,"right")&&!Ht(e.right)){let n=t.width-e.right;mt(e,"left")?(e.x=e.left,e.width=Math.max(0,n-e.left)):mt(e,"width")&&(e.x=n-e.width)}if(mt(e,"top")&&(e.y=e.top),mt(e,"bottom")&&!Ht(e.bottom)){let n=t.height-e.bottom;mt(e,"top")?(e.y=e.top,e.height=Math.max(0,n-e.top)):mt(e,"height")&&(e.y=n-e.height)}return e},xd=(e,t)=>(oa(e)&&e.points.filter(n=>ut(n.x)).forEach(n=>{n.x*=t,n.y*=t}),na(e)&&ut(e.x1)&&(e.x1*=t,e.y1*=t,e.x2*=t,e.y2*=t,e.x3*=t,e.y3*=t),Zr(e)&&ut(e.x1)&&(e.x1*=t,e.y1*=t,e.x2*=t,e.y2*=t),ut(e.x)&&ut(e.y)&&(e.x*=t,e.y*=t),ut(e.width)&&ut(e.height)&&(e.width*=t,e.height*=t),ut(e.rx)&&ut(e.ry)&&(e.rx*=t,e.ry*=t),tp(e)&&(e.strokeWidth*=t),zi(e)&&(e._scale=t,ut(e.fontSize)&&(e.fontSize*=t),ut(e.lineHeight)&&(e.lineHeight*=t),ut(e.width)&&!ut(e.height)&&(e.width*=t)),mt(e,"cornerRadius")&&ut(e.cornerRadius)&&(e.cornerRadius*=t),e),pp=e=>{if(ea(e))return oe(e.x+e.width*.5,e.y+e.height*.5);if(ta(e))return oe(e.x,e.y);if(Qb(e)){let t=e.height||xc(e.text,e).height;return oe(e.x+e.width*.5,e.y+t*.5)}if(Oc(e)){let t=xc(e.text,e);return oe(e.x+t.width*.5,e.y+t.height*.5)}if(oa(e))return Ns(e.points);if(Zr(e))return Ns([Pd(e),Md(e)])},yp=(e,t,n,o,i,r)=>(o<2*r&&(r=o/2),i<2*r&&(r=i/2),e.beginPath(),e.moveTo(t+r,n),e.arcTo(t+o,n,t+o,n+i,r),e.arcTo(t+o,n+i,t,n+i,r),e.arcTo(t,n+i,t,n,r),e.arcTo(t,n,t+o,n,r),e.closePath(),e),la=e=>/canvas/i.test(e.nodeName),Sp=e=>new URL(e,location.href).origin!==location.origin,_p=(e,t=void 0)=>new Promise((n,o)=>{let i=e,r=!1,s=()=>{r||(r=!0,Qn(t)&&Promise.resolve().then(()=>t(Cn(i.naturalWidth,i.naturalHeight))))};if(i.src||(i=new Image,Ht(e)&&Sp(e)&&(i.crossOrigin="anonymous"),i.src=Ht(e)?e:URL.createObjectURL(e)),i.complete)return s(),n(i);Qn(t)&&sd(i).then(s).catch(o),i.onload=()=>{s(),n(i)},i.onerror=o}),Od=new Map([]),Bd=(e,t={})=>new Promise((n,o)=>{let{onMetadata:i=ct,onLoad:r=n,onError:s=o,onComplete:l=ct}=t,a=Od.get(e);if(a||(a={loading:!1,complete:!1,error:!1,image:void 0,size:void 0,bus:Mo()},Od.set(e,a)),a.bus.sub("meta",i),a.bus.sub("load",r),a.bus.sub("error",s),a.bus.sub("complete",l),la(e)){let c=e,u=c.cloneNode();a.complete=!0,a.image=u,a.size=Cc(c)}if(a.complete){a.bus.pub("meta",{size:a.size}),a.error?a.bus.pub("error",a.error):a.bus.pub("load",a.image),a.bus.pub("complete"),a.bus=Mo();return}a.loading||(a.loading=!0,_p(e,c=>{a.size=c,a.bus.pub("meta",{size:c})}).then(c=>{a.image=c,a.bus.pub("load",c)}).catch(c=>{a.error=c,a.bus.pub("error",c)}).finally(()=>{a.complete=!0,a.loading=!1,a.bus.pub("complete"),a.bus=Mo()}))}),wp=(e,t,n,o)=>e.drawImage(t,n.x,n.x,n.width,n.height,o.x,o.y,o.width,o.height),Dd=async(e,t,n,o,i=wp)=>{e.save(),e.clip(),await i(e,t,n,o),e.restore()},zd=(e,t,n,o)=>{let i=Tn(0,0,n.width,n.height),r=et(e);if(o)i=ho(Ro(o),nt),i.x*=n.width,i.width*=n.width,i.y*=n.height,i.height*=n.height;else if(t==="contain"){let s=En(e,zt(i));r.width=s.width,r.height=s.height,r.x+=s.x,r.y+=s.y}else t==="cover"&&(i=En(Tn(0,0,i.width,i.height),zt(r)));return{srcRect:i,destRect:r}},Wd=(e,t)=>(t.cornerRadius>0?yp(e,t.x,t.y,t.width,t.height,t.cornerRadius):e.rect(t.x,t.y,t.width,t.height),e),Vd=(e,t)=>(t.backgroundColor&&e.fill(),e),Hd=(e,t)=>(t.strokeWidth&&e.stroke(),e),Nd=async(e,t,n={})=>new Promise(async(o,i)=>{let{drawImage:r}=n;if(e.lineWidth=t.strokeWidth?t.strokeWidth:1,e.strokeStyle=t.strokeColor?vn(t.strokeColor):"none",e.fillStyle=t.backgroundColor?vn(t.backgroundColor):"none",e.globalAlpha=t.opacity,t.backgroundImage){let s;try{la(t.backgroundImage)?s=t.backgroundImage:s=await Bd(t.backgroundImage)}catch(c){i(c)}Wd(e,t),Vd(e,t);let{srcRect:l,destRect:a}=zd(t,t.backgroundSize,Cc(s),t.backgroundCorners);await Dd(e,s,l,a,r),Hd(e,t),o([])}else Wd(e,t),Vd(e,t),Hd(e,t),o([])}),kp=async(e,t,n={})=>new Promise(async(o,i)=>{let{drawImage:r}=n;if(e.lineWidth=t.strokeWidth||1,e.strokeStyle=t.strokeColor?vn(t.strokeColor):"none",e.fillStyle=t.backgroundColor?vn(t.backgroundColor):"none",e.globalAlpha=t.opacity,e.ellipse(t.x,t.y,t.rx,t.ry,0,0,Math.PI*2),t.backgroundColor&&e.fill(),t.backgroundImage){let s;try{s=await Bd(t.backgroundImage)}catch(u){i(u)}let l=Tn(t.x-t.rx,t.y-t.ry,t.rx*2,t.ry*2),{srcRect:a,destRect:c}=zd(l,t.backgroundSize,Cc(s));await Dd(e,s,a,c,r),t.strokeWidth&&e.stroke(),o([])}else t.strokeWidth&&e.stroke(),o([])}),Cp=async(e,t,n)=>{let o=t.width&&t.height?Bo(t):xc(t.text,t),i={x:t.x,y:t.y,width:o.width,height:o.height};if(Nd(e,{...t,...i,options:n}),!t.text.length)return[];let{willRequestResource:r}=n,s=await Rd(t.text,{...t,...i,imageWidth:i.width,imageHeight:i.height,willRequestResource:r});return e.drawImage(s,t.x-Ur,t.y,s.width,s.height),[]},Tp=async(e,t)=>new Promise(async n=>{e.lineWidth=t.strokeWidth||1,e.strokeStyle=t.strokeColor?vn(t.strokeColor):"none",e.globalAlpha=t.opacity;let o=Pd(t),i=Md(t);e.moveTo(o.x,o.y),e.lineTo(i.x,i.y),t.strokeWidth&&e.stroke(),n([])}),Rp=async(e,t)=>new Promise((n,o)=>{e.lineWidth=t.strokeWidth||1,e.strokeStyle=t.strokeColor?vn(t.strokeColor):"none",e.fillStyle=t.backgroundColor?vn(t.backgroundColor):"none",e.globalAlpha=t.opacity;let{points:i}=t;t.pathClose&&e.beginPath(),e.moveTo(i[0].x,i[0].y);let r=i.length;for(let s=1;s<r;s++)e.lineTo(i[s].x,i[s].y);t.pathClose&&e.closePath(),t.strokeWidth&&e.stroke(),t.backgroundColor&&e.fill(),n([])}),Pp=(e,t,n,o)=>(!t&&!n||(e.translate(o.x,o.y),e.scale(t?-1:1,n?-1:1),e.translate(-o.x,-o.y)),e),Mp=async(e,t,n)=>{let o=pp(t);dd(e,t.rotation,o),Pp(e,t.flipX,t.flipY,o);let i;return ea(t)?i=Nd:ta(t)?i=kp:Zr(t)?i=Tp:oa(t)?i=Rp:zi(t)&&(i=Cp),i?[t,...await Ud(e,await i(e,t,n),n)]:[]},Ud=async(e,t,n)=>{let o=[];for(let i of t)e.save(),e.beginPath(),o=[...o,...await Mp(e,i,n)],e.restore();return o},Dc=async(e,t={})=>{let{shapes:n=[],contextBounds:o=e,transform:i=ct,drawImage:r,willRequestResource:s,canvasMemoryLimit:l,computeShape:a=Ft,preprocessShape:c=Ft}=t;if(!n.length)return e;let u=Tt("canvas");u.width=o.width,u.height=o.height;let f=u.getContext("2d");f.putImageData(e,o.x||0,o.y||0);let h=n.map(Xs).map(a).map(c).flat();i(f),await Ud(f,h,{drawImage:r,canvasMemoryLimit:l,willRequestResource:s});let m=f.getImageData(0,0,u.width,u.height);return rn(u),m},Ip=async(e,t={})=>{let{backgroundColor:n}=t;if(!n||n&&n[3]===0)return e;let o=Tt("canvas");o.width=e.width,o.height=e.height;let i=o.getContext("2d");i.putImageData(e,0,0),i.globalCompositeOperation="destination-over",i.fillStyle=vn(n),i.fillRect(0,0,o.width,o.height);let r=i.getImageData(0,0,o.width,o.height);return rn(o),r},Ap=(e,t)=>{let n=new Array(20);return n[0]=e[0]*t[0]+e[1]*t[5]+e[2]*t[10]+e[3]*t[15],n[1]=e[0]*t[1]+e[1]*t[6]+e[2]*t[11]+e[3]*t[16],n[2]=e[0]*t[2]+e[1]*t[7]+e[2]*t[12]+e[3]*t[17],n[3]=e[0]*t[3]+e[1]*t[8]+e[2]*t[13]+e[3]*t[18],n[4]=e[0]*t[4]+e[1]*t[9]+e[2]*t[14]+e[3]*t[19]+e[4],n[5]=e[5]*t[0]+e[6]*t[5]+e[7]*t[10]+e[8]*t[15],n[6]=e[5]*t[1]+e[6]*t[6]+e[7]*t[11]+e[8]*t[16],n[7]=e[5]*t[2]+e[6]*t[7]+e[7]*t[12]+e[8]*t[17],n[8]=e[5]*t[3]+e[6]*t[8]+e[7]*t[13]+e[8]*t[18],n[9]=e[5]*t[4]+e[6]*t[9]+e[7]*t[14]+e[8]*t[19]+e[9],n[10]=e[10]*t[0]+e[11]*t[5]+e[12]*t[10]+e[13]*t[15],n[11]=e[10]*t[1]+e[11]*t[6]+e[12]*t[11]+e[13]*t[16],n[12]=e[10]*t[2]+e[11]*t[7]+e[12]*t[12]+e[13]*t[17],n[13]=e[10]*t[3]+e[11]*t[8]+e[12]*t[13]+e[13]*t[18],n[14]=e[10]*t[4]+e[11]*t[9]+e[12]*t[14]+e[13]*t[19]+e[14],n[15]=e[15]*t[0]+e[16]*t[5]+e[17]*t[10]+e[18]*t[15],n[16]=e[15]*t[1]+e[16]*t[6]+e[17]*t[11]+e[18]*t[16],n[17]=e[15]*t[2]+e[16]*t[7]+e[17]*t[12]+e[18]*t[17],n[18]=e[15]*t[3]+e[16]*t[8]+e[17]*t[13]+e[18]*t[18],n[19]=e[15]*t[4]+e[16]*t[9]+e[17]*t[14]+e[18]*t[19]+e[19],n},Zd=e=>e.length?e.reduce((t,n)=>Ap([...t],n),e.shift()):[],Ep=(e,t=2)=>Math.round(e*t)/t,jd=(e,t)=>{let n=e.width*e.height,o=t.reduce((s,l)=>(l.width>s.width&&l.height>s.height&&(s.width=l.width,s.height=l.height),s),{width:0,height:0}),i=o.width*o.height,r=Math.max(.5,.5+(1-i/n)/2);return Ep(r,5)};function tt(){}var zc=e=>e;function Jt(e,t){for(let n in t)e[n]=t[n];return e}function Gd(e){return e()}function Xd(){return Object.create(null)}function Et(e){e.forEach(Gd)}function jt(e){return typeof e=="function"}function gt(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}function vp(e){return Object.keys(e).length===0}function jr(e,...t){if(e==null)return tt;let n=e.subscribe(...t);return n.unsubscribe?()=>n.unsubscribe():n}function Wo(e){let t;return jr(e,n=>t=n)(),t}function W(e,t,n){e.$$.on_destroy.push(jr(t,n))}function Nt(e,t,n,o){if(e){let i=Yd(e,t,n,o);return e[0](i)}}function Yd(e,t,n,o){return e[1]&&o?Jt(n.ctx.slice(),e[1](o(t))):n.ctx}function Lp(e,t,n,o){if(e[2]&&o){let i=e[2](o(n));if(t.dirty===void 0)return i;if(typeof i=="object"){let r=[],s=Math.max(t.dirty.length,i.length);for(let l=0;l<s;l+=1)r[l]=t.dirty[l]|i[l];return r}return t.dirty|i}return t.dirty}function Ut(e,t,n,o,i,r,s){let l=Lp(t,o,i,r);if(l){let a=Yd(t,n,o,s);e.p(a,l)}}function Wc(e){let t={};for(let n in e)n[0]!=="$"&&(t[n]=e[n]);return t}function qd(e,t){let n={};t=new Set(t);for(let o in e)!t.has(o)&&o[0]!=="$"&&(n[o]=e[o]);return n}function fe(e,t,n=t){return e.set(n),t}function vt(e){return e&&jt(e.destroy)?e.destroy:tt}var Kd=typeof window!="undefined",Jd=Kd?()=>window.performance.now():()=>Date.now(),Vc=Kd?e=>requestAnimationFrame(e):tt,Gr=new Set;function Qd(e){Gr.forEach(t=>{t.c(e)||(Gr.delete(t),t.f())}),Gr.size!==0&&Vc(Qd)}function Hc(e){let t;return Gr.size===0&&Vc(Qd),{promise:new Promise(n=>{Gr.add(t={c:e,f:n})}),abort(){Gr.delete(t)}}}function ie(e,t){e.appendChild(t)}function U(e,t,n){e.insertBefore(t,n||null)}function H(e){e.parentNode.removeChild(e)}function $(e){return document.createElement(e)}function Rn(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function Ot(e){return document.createTextNode(e)}function xe(){return Ot(" ")}function en(){return Ot("")}function le(e,t,n,o){return e.addEventListener(t,n,o),()=>e.removeEventListener(t,n,o)}function Fp(e){return function(t){return t.stopPropagation(),e.call(this,t)}}function S(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function Xr(e,t){let n=Object.getOwnPropertyDescriptors(e.__proto__);for(let o in t)t[o]==null?e.removeAttribute(o):o==="style"?e.style.cssText=t[o]:o==="__value"?e.value=e[o]=t[o]:n[o]&&n[o].set?e[o]=t[o]:S(e,o,t[o])}function xp(e){return Array.from(e.childNodes)}function Zt(e,t){t=""+t,e.wholeText!==t&&(e.data=t)}function $d(e,t){let n=document.createEvent("CustomEvent");return n.initCustomEvent(e,!1,!1,t),n}var eh=class{constructor(t=null){this.a=t,this.e=this.n=null}m(t,n,o=null){this.e||(this.e=$(n.nodeName),this.t=n,this.h(t)),this.i(o)}h(t){this.e.innerHTML=t,this.n=Array.from(this.e.childNodes)}i(t){for(let n=0;n<this.n.length;n+=1)U(this.t,this.n[n],t)}p(t){this.d(),this.h(t),this.i(this.a)}d(){this.n.forEach(H)}},Nc=new Set,aa=0;function Op(e){let t=5381,n=e.length;for(;n--;)t=(t<<5)-t^e.charCodeAt(n);return t>>>0}function th(e,t,n,o,i,r,s,l=0){let a=16.666/o,c=`{
`;for(let y=0;y<=1;y+=a){let w=t+(n-t)*r(y);c+=y*100+`%{${s(w,1-w)}}
`}let u=c+`100% {${s(n,1-n)}}
}`,f=`__svelte_${Op(u)}_${l}`,h=e.ownerDocument;Nc.add(h);let m=h.__svelte_stylesheet||(h.__svelte_stylesheet=h.head.appendChild($("style")).sheet),b=h.__svelte_rules||(h.__svelte_rules={});b[f]||(b[f]=!0,m.insertRule(`@keyframes ${f} ${u}`,m.cssRules.length));let p=e.style.animation||"";return e.style.animation=`${p?`${p}, `:""}${f} ${o}ms linear ${i}ms 1 both`,aa+=1,f}function Bp(e,t){let n=(e.style.animation||"").split(", "),o=n.filter(t?r=>r.indexOf(t)<0:r=>r.indexOf("__svelte")===-1),i=n.length-o.length;i&&(e.style.animation=o.join(", "),aa-=i,aa||Dp())}function Dp(){Vc(()=>{aa||(Nc.forEach(e=>{let t=e.__svelte_stylesheet,n=t.cssRules.length;for(;n--;)t.deleteRule(n);e.__svelte_rules={}}),Nc.clear())})}var ca;function ua(e){ca=e}function Yr(){if(!ca)throw new Error("Function called outside component initialization");return ca}function fa(e){Yr().$$.on_mount.push(e)}function nh(e){Yr().$$.after_update.push(e)}function Vo(e){Yr().$$.on_destroy.push(e)}function mo(){let e=Yr();return(t,n)=>{let o=e.$$.callbacks[t];if(o){let i=$d(t,n);o.slice().forEach(r=>{r.call(e,i)})}}}function da(e,t){Yr().$$.context.set(e,t)}function Ys(e){return Yr().$$.context.get(e)}function qr(e,t){let n=e.$$.callbacks[t.type];n&&n.slice().forEach(o=>o(t))}var qs=[],Bt=[],ha=[],Uc=[],oh=Promise.resolve(),Zc=!1;function ih(){Zc||(Zc=!0,oh.then(ce))}function rh(){return ih(),oh}function Vi(e){ha.push(e)}function Kr(e){Uc.push(e)}var jc=!1,Gc=new Set;function ce(){if(!jc){jc=!0;do{for(let e=0;e<qs.length;e+=1){let t=qs[e];ua(t),zp(t.$$)}for(ua(null),qs.length=0;Bt.length;)Bt.pop()();for(let e=0;e<ha.length;e+=1){let t=ha[e];Gc.has(t)||(Gc.add(t),t())}ha.length=0}while(qs.length);for(;Uc.length;)Uc.pop()();Zc=!1,jc=!1,Gc.clear()}}function zp(e){if(e.fragment!==null){e.update(),Et(e.before_update);let t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(Vi)}}var Ks;function Wp(){return Ks||(Ks=Promise.resolve(),Ks.then(()=>{Ks=null})),Ks}function Xc(e,t,n){e.dispatchEvent($d(`${t?"intro":"outro"}${n}`))}var ma=new Set,Ho;function Ze(){Ho={r:0,c:[],p:Ho}}function je(){Ho.r||Et(Ho.c),Ho=Ho.p}function I(e,t){e&&e.i&&(ma.delete(e),e.i(t))}function F(e,t,n,o){if(e&&e.o){if(ma.has(e))return;ma.add(e),Ho.c.push(()=>{ma.delete(e),o&&(n&&e.d(1),o())}),e.o(t)}}var Vp={duration:0};function sh(e,t,n,o){let i=t(e,n),r=o?0:1,s=null,l=null,a=null;function c(){a&&Bp(e,a)}function u(h,m){let b=h.b-r;return m*=Math.abs(b),{a:r,b:h.b,d:b,duration:m,start:h.start,end:h.start+m,group:h.group}}function f(h){let{delay:m=0,duration:b=300,easing:p=zc,tick:y=tt,css:w}=i||Vp,C={start:Jd()+m,b:h};h||(C.group=Ho,Ho.r+=1),s||l?l=C:(w&&(c(),a=th(e,r,h,b,m,p,w)),h&&y(0,1),s=u(C,b),Vi(()=>Xc(e,h,"start")),Hc(M=>{if(l&&M>l.start&&(s=u(l,b),l=null,Xc(e,s.b,"start"),w&&(c(),a=th(e,r,s.b,s.duration,0,p,i.css))),s){if(M>=s.end)y(r=s.b,1-r),Xc(e,s.b,"end"),l||(s.b?c():--s.group.r||Et(s.group.c)),s=null;else if(M>=s.start){let R=M-s.start;r=s.a+s.d*p(R/s.duration),y(r,1-r)}}return!!(s||l)}))}return{run(h){jt(i)?Wp().then(()=>{i=i(),f(h)}):f(h)},end(){c(),s=l=null}}}var lh=typeof window!="undefined"?window:typeof globalThis!="undefined"?globalThis:global;function Hp(e,t){e.d(1),t.delete(e.key)}function Js(e,t){F(e,1,1,()=>{t.delete(e.key)})}function Jr(e,t,n,o,i,r,s,l,a,c,u,f){let h=e.length,m=r.length,b=h,p={};for(;b--;)p[e[b].key]=b;let y=[],w=new Map,C=new Map;for(b=m;b--;){let T=f(i,r,b),P=n(T),D=s.get(P);D?o&&D.p(T,t):(D=c(P,T),D.c()),w.set(P,y[b]=D),P in p&&C.set(P,Math.abs(b-p[P]))}let M=new Set,R=new Set;function k(T){I(T,1),T.m(l,u),s.set(T.key,T),u=T.first,m--}for(;h&&m;){let T=y[m-1],P=e[h-1],D=T.key,x=P.key;T===P?(u=T.first,h--,m--):w.has(x)?!s.has(D)||M.has(D)?k(T):R.has(x)?h--:C.get(D)>C.get(x)?(R.add(D),k(T)):(M.add(x),h--):(a(P,s),h--)}for(;h--;){let T=e[h];w.has(T.key)||a(T,s)}for(;m;)k(y[m-1]);return y}function Hn(e,t){let n={},o={},i={$$scope:1},r=e.length;for(;r--;){let s=e[r],l=t[r];if(l){for(let a in s)a in l||(o[a]=1);for(let a in l)i[a]||(n[a]=l[a],i[a]=1);e[r]=l}else for(let a in s)i[a]=1}for(let s in o)s in n||(n[s]=void 0);return n}function Io(e){return typeof e=="object"&&e!==null?e:{}}function Hi(e,t,n){let o=e.$$.props[t];o!==void 0&&(e.$$.bound[o]=n,n(e.$$.ctx[o]))}function Pe(e){e&&e.c()}function ke(e,t,n,o){let{fragment:i,on_mount:r,on_destroy:s,after_update:l}=e.$$;i&&i.m(t,n),o||Vi(()=>{let a=r.map(Gd).filter(jt);s?s.push(...a):Et(a),e.$$.on_mount=[]}),l.forEach(Vi)}function Ce(e,t){let n=e.$$;n.fragment!==null&&(Et(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function Np(e,t){e.$$.dirty[0]===-1&&(qs.push(e),ih(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function pt(e,t,n,o,i,r,s=[-1]){let l=ca;ua(e);let a=e.$$={fragment:null,ctx:null,props:r,update:tt,not_equal:i,bound:Xd(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(l?l.$$.context:t.context||[]),callbacks:Xd(),dirty:s,skip_bound:!1},c=!1;if(a.ctx=n?n(e,t.props||{},(u,f,...h)=>{let m=h.length?h[0]:f;return a.ctx&&i(a.ctx[u],a.ctx[u]=m)&&(!a.skip_bound&&a.bound[u]&&a.bound[u](m),c&&Np(e,u)),f}):[],a.update(),c=!0,Et(a.before_update),a.fragment=o?o(a.ctx):!1,t.target){if(t.hydrate){let u=xp(t.target);a.fragment&&a.fragment.l(u),u.forEach(H)}else a.fragment&&a.fragment.c();t.intro&&I(e.$$.fragment),ke(e,t.target,t.anchor,t.customElement),ce()}ua(l)}var bt=class{$destroy(){Ce(this,1),this.$destroy=tt}$on(t,n){let o=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return o.push(n),()=>{let i=o.indexOf(n);i!==-1&&o.splice(i,1)}}$set(t){this.$$set&&!vp(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}},Qr=[];function Ni(e,t){return{subscribe:We(e,t).subscribe}}function We(e,t=tt){let n,o=[];function i(l){if(gt(e,l)&&(e=l,n)){let a=!Qr.length;for(let c=0;c<o.length;c+=1){let u=o[c];u[1](),Qr.push(u,e)}if(a){for(let c=0;c<Qr.length;c+=2)Qr[c][0](Qr[c+1]);Qr.length=0}}}function r(l){i(l(e))}function s(l,a=tt){let c=[l,a];return o.push(c),o.length===1&&(n=t(i)||tt),l(e),()=>{let u=o.indexOf(c);u!==-1&&o.splice(u,1),o.length===0&&(n(),n=null)}}return{set:i,update:r,subscribe:s}}function Pt(e,t,n){let o=!Array.isArray(e),i=o?[e]:e,r=t.length<2;return Ni(n,s=>{let l=!1,a=[],c=0,u=tt,f=()=>{if(c)return;u();let m=t(o?a[0]:a,s);r?s(m):u=jt(m)?m:tt},h=i.map((m,b)=>jr(m,p=>{a[b]=p,c&=~(1<<b),l&&f()},()=>{c|=1<<b}));return l=!0,f(),function(){Et(h),u()}})}var Up=e=>e.reduce((t,n)=>Object.assign(t,n),{}),$r=e=>({updateValue:e}),No=e=>({defaultValue:e}),Zp=e=>({store:e}),ga=e=>({store:(t,n)=>Pt(...e(n))}),ba=e=>({store:(t,n)=>{let[o,i,r=()=>!1]=e(n),s=!0,l;return Pt(o,(a,c)=>{i(a,u=>{!s&&r(l,u)||(l=u,s=!1,c(u))})})}}),Yc=e=>({store:(t,n)=>{let[o,i={},r=void 0]=e(n),s=[],l={},a=m=>o(m,l),c=m=>{!s.length&&!m.length||(s=m,u())},u=()=>{let m=s.map(a);r&&m.sort(r),s=[...m],h(m)};Object.entries(i).map(([m,b])=>b.subscribe(p=>{l[m]=p,!!p&&u()}));let{subscribe:f,set:h}=We(t||[]);return{set:c,update:m=>c(m(s)),subscribe:f}}}),jp=(e,t,n)=>{let{store:o=h=>We(h),defaultValue:i=ct,updateValue:r=void 0}=n,s=o(i(),t,e),{subscribe:l,update:a=ct}=s,c,u=h=>{let m=!0;c&&c(),c=l(b=>{if(m)return m=!1;h(b),c(),c=void 0})},f=r?r(e):Ft;return s.set=h=>a(m=>f(h,m,u)),s.defaultValue=i,s},ah=e=>{let t={},n={};return e.forEach(([o,...i])=>{let r=Up(i),s=t[o]=jp(n,t,r),l={get:()=>Wo(s),set:s.set};Object.defineProperty(n,o,l)}),{stores:t,accessors:n}},Gp=[["src"],["imageReader"],["imageWriter"],["imageScrambler"],["images",No(()=>[])],["shapePreprocessor"],["willRequestResource"]],Xp=e=>e.charAt(0).toUpperCase()+e.slice(1),Qs=(e,t)=>{Object.keys(t).forEach(n=>{let o=Qn(t[n])?{value:t[n],writable:!1}:t[n];Object.defineProperty(e,n,o)})},ch=(e,t)=>{let n,o,i,r,s,l,a,c,u,f,h=t.length;for(n=0;n<h;n++)if(o=t[n],i=t[n+1>h-1?0:n+1],r=o.x-e.x,s=o.y-e.y,l=i.x-e.x,a=i.y-e.y,c=r-l,u=s-a,f=c*s-u*r,f<-1e-5)return!1;return!0},qc=1e4,uh=(e,t)=>{let n=nd(t),o=Kt();Hr(e).forEach(a=>{Vn(a,o),!ch(a,t)&&n.forEach(c=>{let u=Math.atan2(c.start.y-c.end.y,c.start.x-c.end.x),f=Math.sin(Math.PI-u)*qc,h=Math.cos(Math.PI-u)*qc,m=oe(a.x+f,a.y+h),b=Xf(Gf(c),qc),p=td(Yl(a,m),b);!p||Vn(o,kn(At(p),a))})});let r=et(e);return Vn(r,o),Hr(r).every(a=>ch(a,t))?(ql(e,r),!0):!1},fh=(e,t)=>{let n=Hr(e),o=nd(t).map(u=>Xf(u,5)),i=xt(e),r=[];n.forEach(u=>{let f=Kg(Yl(At(i),At(u)),1e6),h=!1;o.map(Gf).forEach(m=>{let b=td(f,m);!b||h||(r.push(b),h=!0)})});let s=Bi(r[0],r[2]),l=Bi(r[1],r[3]),a=s<l?[r[0],r[2]]:[r[1],r[3]],c=Ro(a);return c.width<e.width?(ql(e,c),!0):!1},Kc=(e,t,n={x:0,y:0})=>{let o=An(e),i=xt(o),r=ed(o,n,i).map(l=>xr(l,t,i)),s=Ro(r);return r.map(l=>kn(l,s))},Ui=(e,t=0,n=zt(e))=>{let o,i;if(t!==0){let r=Math.atan2(1,n),s=Math.sign(t)*t,l=s%Math.PI,a=s%$n,c,u;l>ui&&l<$n+ui?u=a>ui?s:$n-a:u=a>ui?$n-a:s,c=Math.min(Math.abs(e.height/Math.sin(r+u)),Math.abs(e.width/Math.cos(r-u))),o=Math.cos(r)*c,i=o/n}else o=e.width,i=o/n,i>e.height&&(i=e.height,o=i*n);return Cn(o,i)},Yp=(e,t,n=0,o=Kt(),i)=>{if(ut(n)&&n!==0||o.x||o.y){let r=zt(e),s=Kc(t,n,o),l=Ui(t,n,r);if(!(e.width<l.width&&e.height<l.height)){let u=e.width*.5-l.width*.5,f=e.height*.5-l.height*.5;e.width>l.width&&(e.width=l.width,e.x+=u),e.height>l.height&&(e.height=l.height,e.y+=f)}uh(e,s),fh(e,s)&&uh(e,s)}else{let r=zt(e);e.width=Math.min(e.width,t.width),e.height=Math.min(e.height,t.height),e.x=Math.max(e.x,0),e.x+e.width>t.width&&(e.x-=e.x+e.width-t.width),e.y=Math.max(e.y,0),e.y+e.height>t.height&&(e.y-=e.y+e.height-t.height);let s=xt(e),l=En(e,r);l.width=Math.max(i.width,l.width),l.height=Math.max(i.height,l.height),l.x=s.x-l.width*.5,l.y=s.y-l.height*.5,ql(e,l)}},qp=(e,t,n,o,i,r,s,l)=>{let a=eo(s),c=eo(l),u=nt(Math.max(t.width/c.width,t.height/c.height)),f=nt(Math.min(t.width/a.width,t.height/a.height)),h=et(t);if(f<1||u>1){let m=xt(e),b=xt(t),p=f<1?f:u,y=(b.x+m.x)/2,w=(b.y+m.y)/2,C=h.width/p,M=h.height/p;Jf(h,y-C*.5,w-M*.5,C,M)}return r?(Yp(h,n,o,i,a),{crop:h}):{crop:h}},dh=(e,t,n)=>{let o=An(e),i=xt(o),r=Di(o,n,i),s=xt(Rc(Ro(r))),l=xt(t),a=xr(l,-n,s),c=kn(a,s),u=Br(Vn(i,c),nt);return Tn(u.x-t.width*.5,u.y-t.height*.5,t.width,t.height)},Mt=(e,t,n)=>Math.max(t,Math.min(e,n)),Kp=(e,t,n,o,i,r,s,l,a,c)=>{let u=eo(a),f=eo(c);s&&(f.width=Math.min(c.width,i.width),f.height=Math.min(c.height,i.height));let h=!1,m=(y,w)=>{let C=dh(i,o,y),M=An(i),R=xt(M),k=ed(M,r,R),T=kn(At(R),Pc(k)),P=xr(xt(C),w,R),D=kn(At(R),P);k.forEach(G=>xr(G,w,R));let x=Ro(k),A=Pc(k),g=Vn(kn(kn(A,D),x),T),O=Tn(g.x-C.width*.5,g.y-C.height*.5,C.width,C.height);if(l&&di(O,l.width/O.width),s){let G=Kc(i,w,r);fh(O,G)}let j=nt(Math.min(O.width/u.width,O.height/u.height),8),v=nt(Math.max(O.width/f.width,O.height/f.height),8);return(j<1||v>1)&&nt(Math.abs(w-y))===nt(Math.PI/2)&&!h?(h=!0,m(e,e+Math.sign(w-y)*Math.PI)):{rotation:w,crop:ho(O,G=>nt(G,8))}},b=Math.sign(t)*Math.round(Math.abs(t)/$n)*$n,p=Mt(t,b+n[0],b+n[1]);return m(e,p)},Jc=["cropLimitToImage","cropMinSize","cropMaxSize","cropAspectRatio","flipX","flipY","rotation","crop","colorMatrix","convolutionMatrix","gamma","vignette","redaction","annotation","decoration","frame","backgroundColor","targetSize","metadata"],Qc=e=>sn(e)?e.map(Qc):Ws(e)?{...e}:e,$c=e=>e.map(t=>Object.entries(t).reduce((n,[o,i])=>(o.startsWith("_")||(n[o]=i),n),{})),Jp=(e,t,n)=>{let o=Jc.map(a=>t[a]),i=!1,r=We({}),{subscribe:s}=Pt([...o,r],(a,c)=>{if(i)return;let u=Jc.reduce((f,h,m)=>(f[h]=Qc(a[m]),f),{});u.crop&&ho(u.crop,Math.round),u.redaction=u.redaction&&$c(u.redaction),u.annotation=u.annotation&&$c(u.annotation),u.decoration=u.decoration&&$c(u.decoration),c(u)}),l=a=>{!a||(i=!0,n.cropOrigin=void 0,Jc.filter(c=>mt(a,c)).forEach(c=>{n[c]=Qc(a[c])}),i=!1,r.set({}))};return{set:l,update:a=>l(a(null)),subscribe:s}},Qp=e=>{if(!!e){if(/:/.test(e)){let[t,n]=e.split(":");return t/n}return parseFloat(e)}},$s=(e,t)=>{if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0},$p=(e=[0,0,0,0],t=1)=>e.length===4?e:[...e,t],pa=-ui,ya=ui,hh=(e,t,n)=>{let o=Br(xt(e),u=>nt(u,8)),i=An(t),r=xt(i),s=Di(i,n,r),l=Br(Xl(Ro(s)),u=>nt(u,8)),a=Math.abs(l.x-o.x),c=Math.abs(l.y-o.y);return a<1&&c<1},e2=(e,t,n)=>{let o=Ui(t,n,zt(e));return Gl(Wr(o,Math.round),Wr(eo(e),Math.round))},t2=e=>(t,n=t)=>{let{loadState:o,size:i,cropMinSize:r,cropMaxSize:s,cropLimitToImage:l,cropAspectRatio:a,rotation:c,perspective:u}=e;if(!t&&!n||!o||!o.beforeComplete)return t;t||(t=An(Ui(i,c,a||zt(i))));let f=qp(n,t,i,c,u,l,r,s);return ho(f.crop,m=>nt(m,8))},n2=e=>(t,n)=>{let{loadState:o,crop:i,size:r,rotation:s,cropLimitToImage:l}=e,a=Qp(t);if(!a)return;if(!i||!o||!o.beforeComplete)return a;let c=n?Math.abs(t-n):1;if(hh(i,r,s)&&l&&c>=.1){let u=Xg(eo(r),s);e.crop=ho(En(An(u),t),nt)}else{let u={width:i.height*a,height:i.height},f=(i.width-u.width)*.5,h=(i.height-u.height)*.5;e.crop=ho(Tn(i.x+f,i.y+h,u.width,u.height),nt)}return a},o2=e=>(t,n,o)=>{let{crop:i}=e;return i&&!n&&t&&o(()=>e.crop=et(e.crop)),t},i2=e=>(t,n,o)=>{if(t===n)return t;let{loadState:i,size:r,rotationRange:s,cropMinSize:l,cropMaxSize:a,crop:c,perspective:u,cropLimitToImage:f,cropOrigin:h}=e;if(!c||!i||!i.beforeComplete)return t;let m=e2(c,r,n),b=hh(c,r,n),p=Kp(n,t,s,c,r,u,f,h,l,a);if(m&&b){let y=Ui(r,t,zt(p.crop));p.crop.x+=p.crop.width*.5,p.crop.y+=p.crop.height*.5,p.crop.x-=y.width*.5,p.crop.y-=y.height*.5,p.crop.width=y.width,p.crop.height=y.height}return o(()=>{e.crop=ho(p.crop,y=>nt(y,8))}),p.rotation},r2=(e,t,n,o,i)=>{if(!i)return[pa,ya];let r=Math.max(n.width/o.width,n.height/o.height),s=Cn(o.width*r,o.height*r),l=Yg(s),a=Math.min(e.width,e.height);if(l<a)return[pa,ya];let c=t?e.height:e.width,u=t?e.width:e.height,f=Math.acos(s.height/l),h=Math.acos(u/l),m=Math.asin(c/l),b=f-h,p=m-f;if(Number.isNaN(b)&&Number.isNaN(p))return[pa,ya];let y=Number.isNaN(b)?p:Number.isNaN(p)?b:Math.min(b,p),w=Math.max(-y,pa),C=Math.min(y,ya);return[w,C]},s2=(e,t,n,o,i,r)=>{let s=eo(o),l=eo(i);return r?[s,Wr(Ui(e,t,n),Math.round)]:[s,l]},eu=(e,t)=>{let{context:n,props:o}=t;return e._isFormatted||(e=dp(e),e._isFormatted=!0,Object.assign(e,o)),!e._isDraft&&ra(e)&&(!e._context||!zo(n,e._context))&&(Fd(e,n),e._context={...n}),e},l2=()=>e=>{if(!e)return;let t={frameStyle:void 0,x:0,y:0,width:"100%",height:"100%",disableStyle:["backgroundColor","strokeColor","strokeWidth"]};return Ht(e)?t.frameStyle=e:Object.assign(t,e),t},tu=[["file"],["size"],["loadState"],["processState"],["aspectRatio",ga(({size:e})=>[e,t=>t?zt(t):void 0])],["perspectiveX",No(()=>0)],["perspectiveY",No(()=>0)],["perspective",ga(({perspectiveX:e,perspectiveY:t})=>[[e,t],([n,o])=>({x:n,y:o})])],["rotation",No(()=>0),$r(i2)],["flipX",No(()=>!1)],["flipY",No(()=>!1)],["flip",ga(({flipX:e,flipY:t})=>[[e,t],([n,o])=>({x:n,y:o})])],["isRotatedSideways",ba(({rotation:e})=>[[e],([t],n)=>n(To(t)),(t,n)=>t!==n])],["crop",$r(t2)],["cropAspectRatio",$r(n2)],["cropOrigin"],["cropMinSize",No(()=>({width:1,height:1}))],["cropMaxSize",No(()=>({width:32768,height:32768}))],["cropLimitToImage",No(()=>!0),$r(o2)],["cropSize",ba(({crop:e})=>[[e],([t],n)=>{!t||n(Cn(t.width,t.height))},(t,n)=>Gl(t,n)])],["cropRectAspectRatio",ga(({cropSize:e})=>[[e],([t],n)=>{!t||n(nt(zt(t),5))}])],["cropRange",ba(({size:e,rotation:t,cropRectAspectRatio:n,cropMinSize:o,cropMaxSize:i,cropLimitToImage:r})=>[[e,t,n,o,i,r],([s,l,a,c,u,f],h)=>{if(!s)return;let m=s2(s,l,a,c,u,f);h(m)},(s,l)=>$s(s,l)])],["rotationRange",ba(({size:e,isRotatedSideways:t,cropMinSize:n,cropSize:o,cropLimitToImage:i})=>[[e,t,n,o,i],([r,s,l,a,c],u)=>{if(!r||!a)return;let f=r2(r,s,l,a,c);u(f)},(r,s)=>$s(r,s)])],["backgroundColor",$r(()=>e=>$p(e))],["targetSize"],["colorMatrix"],["convolutionMatrix"],["gamma"],["noise"],["vignette"],["redaction",Yc(({size:e})=>[eu,{context:e}])],["annotation",Yc(({size:e})=>[eu,{context:e}])],["decoration",Yc(({crop:e})=>[eu,{context:e}])],["frame",$r(l2)],["metadata"],["state",Zp(Jp)]],mh=async(e,t,n={},o)=>{let{ontaskstart:i,ontaskprogress:r,ontaskend:s,token:l}=o,a=!1;l.cancel=()=>{a=!0};for(let[c,u]of t.entries()){if(a)return;let[f,h]=u;i(c,h);try{e=await f(e,{...n},m=>r(c,h,m))}catch(m){throw a=!0,m}s(c,h)}return e},a2=({minSize:e={width:1,height:1}}={})=>{let{stores:t,accessors:n}=ah(tu),{pub:o,sub:i}=Mo(),r=(a,c)=>{let u=()=>n[a]||{},f=b=>n[a]={...u(),...b,timeStamp:Date.now()},h=()=>u().error,m=b=>{h()||(f({error:b}),o(`${c}error`,{...u()}))};return{start(){o(`${c}start`)},onabort(){f({abort:!0}),o(`${c}abort`,{...u()})},ontaskstart(b,p){h()||(f({index:b,task:p,taskProgress:void 0,taskLengthComputable:void 0}),o(`${c}taskstart`,{...u()}))},ontaskprogress(b,p,y){h()||(f({index:b,task:p,taskProgress:y.loaded/y.total,taskLengthComputable:y.lengthComputable}),o(`${c}taskprogress`,{...u()}),o(`${c}progress`,{...u()}))},ontaskend(b,p){h()||(f({index:b,task:p}),o(`${c}taskend`,{...u()}))},ontaskerror(b){m(b)},error(b){m(b)},beforeComplete(b){h()||(f({beforeComplete:!0}),o(`before${c}`,b))},complete(b){h()||(f({complete:!0}),o(c,b))}}};return Qs(n,{read:(a,{reader:c})=>{if(!c)return;Object.assign(n,{file:void 0,size:void 0,loadState:void 0});let u={cancel:ct},f=!1,h=r("loadState","load"),m={token:u,...h},b={src:a,size:void 0,dest:void 0},p={};return Promise.resolve().then(async()=>{try{if(h.start(),f)return h.onabort();let y=await mh(b,c,p,m);if(f)return h.onabort();let{size:w,dest:C}=y||{};if(!w||!w.width||!w.height)throw new Gs("Image size missing","IMAGE_SIZE_MISSING",y);if(w.width<e.width||w.height<e.height)throw new Gs("Image too small","IMAGE_TOO_SMALL",{...y,minWidth:e.width,minHeight:e.height});Object.assign(n,{size:w,file:C}),h.beforeComplete(y),h.complete(y)}catch(y){h.error(y)}finally{u=void 0}}),()=>{f=!0,u&&u.cancel(),h.onabort()}},write:(a,c)=>{if(!n.loadState.complete)return;n.processState=void 0;let u=r("processState","process"),f={src:n.file,imageState:n.state,dest:void 0};if(!a){u.start(),u.complete(f);return}let h={cancel:ct},m=!1,b=c,p={token:h,...u};return Promise.resolve().then(async()=>{try{if(u.start(),m)return u.onabort();let y=await mh(f,a,b,p);u.complete(y)}catch(y){u.error(y)}finally{h=void 0}}),()=>{m=!0,h&&h.cancel()}},on:i}),{accessors:n,stores:t}},gh=["loadstart","loadabort","loaderror","loadprogress","load","processstart","processabort","processerror","processprogress","process"],c2=["flip","cropOrigin","isRotatedSideways","perspective","perspectiveX","perspectiveY","cropRange"];var u2=tu.map(([e])=>e).filter(e=>!c2.includes(e)),nu=e=>`image${Xp(e)}`;var f2=e=>Ht(e)||Ql(e)||Zs(e),bh=e=>mt(e,"crop"),ph=()=>{let{stores:e,accessors:t}=ah(Gp),{sub:n,pub:o}=Mo(),i=k=>T=>o(k,T),r=()=>t.images?t.images[0]:{},s={},l={};u2.forEach(k=>{Object.defineProperty(t,nu(k),{get:()=>{let T=r();if(!!T)return T.accessors[k]},set:T=>{s[nu(k)]=T,l[nu(k)]=T;let P=r();!P||(P.accessors[k]=T)}})});let a=()=>t.images&&t.images[0],c=e.src.subscribe(k=>{if(!k)return t.images=[];!t.imageReader||(t.images.length&&(s={}),f(k))}),u=e.imageReader.subscribe(k=>{!k||t.images.length||!t.src||f(t.src)}),f=k=>{Promise.resolve().then(()=>b(k,s)).catch(()=>{})},h=(k,T)=>{if(bh(T)){t.imageState=T;return}if(!T.imageCrop){let x=k.accessors.size,A=T.imageRotation||0,g=An(Zf(eo(x),A)),O=T.imageCropAspectRatio||(T.imageCropLimitToImage?zt(x):zt(g)),j=En(g,O);T.imageCropLimitToImage||(j.x=(x.width-j.width)/2,j.y=(x.height-j.height)/2),T.imageCrop=j}let P=["imageCropLimitToImage","imageCrop","imageCropAspectRatio","imageRotation"];P.filter(x=>mt(T,x)).forEach(x=>{t[x]=T[x],delete T[x]});let D=Object.keys(T).filter(x=>!P.includes(x)).reduce((x,A)=>(x[A]=T[A],x),{});Object.assign(t,D)},m,b=(k,T={})=>new Promise((P,D)=>{let x=a(),A=!(T.cropLimitToImage===!1||T.imageCropLimitToImage===!1||l.imageCropLmitedToImage===!1),g=T.cropMinSize||T.imageCropMinSize||l.imageCropMinSize,O=A?g:x&&x.accessors.cropMinSize;x&&R(),x=a2({minSize:O}),gh.map(G=>x.accessors.on(G,i(G)));let j=()=>{s={},v.forEach(G=>G())},v=[];v.push(x.accessors.on("loaderror",G=>{j(),D(G)})),v.push(x.accessors.on("loadabort",()=>{j(),D({name:"AbortError"})})),v.push(x.accessors.on("load",G=>{m=void 0,j(),P(G)})),v.push(x.accessors.on("beforeload",()=>h(x,T))),t.images=[x],T.imageReader&&(t.imageReader=T.imageReader),T.imageWriter&&(t.imageWriter=T.imageWriter),m=x.accessors.read(k,{reader:t.imageReader})}),p,y=(k,T)=>new Promise((P,D)=>{try{let x=[],A=()=>{p=void 0,x.forEach(g=>g())};(async()=>{f2(k)?await b(k,T):k&&(bh(k)?t.imageState=k:Object.assign(t,k));let g=a();if(!g)return D("no image");x.push(g.accessors.on("processerror",O=>{A(),D(O)})),x.push(g.accessors.on("processabort",()=>{A(),D({name:"AbortError"})})),x.push(g.accessors.on("process",O=>{A(),P(O)})),p=g.accessors.write(t.imageWriter,{shapePreprocessor:t.shapePreprocessor||Ft,imageScrambler:t.imageScrambler,willRequestResource:t.willRequestResource})})()}catch(x){D(x)}}),w=()=>{let k=a();!k||(p&&p(),k.accessors.processState=void 0)},C=()=>{m&&m(),t.images=[]},M=(k,T)=>new Promise((P,D)=>{b(k,T).then(()=>{let{images:x}=t,A=x[0],g=()=>{O(),j()},O=A.accessors.on("processerror",v=>{g(),D(v)}),j=A.accessors.on("process",v=>{g(),P(v)})}).catch(D)}),R=()=>{let k=a();!k||(m&&m(),k.accessors.loadState=void 0,t.images=[])};return Object.defineProperty(t,"stores",{get:()=>e}),Qs(t,{on:n,loadImage:b,abortLoadImage:C,editImage:M,removeImage:R,processImage:y,abortProcessImage:w,destroy:()=>{c(),u()}}),t},ou=(e,t)=>{let{processImage:n}=ph();return n(e,t)},yh=()=>{if(!js())return 1/0;let e=/15_/.test(navigator.userAgent);return Po()?e?3840*3840:4096*4096:e?4096*4096:1/0},Sh=(e,t)=>Object.keys(e).filter(n=>!t.includes(n)).reduce((n,o)=>(n[o]=e[o],n),{}),iu=({imageDataResizer:e,canvasMemoryLimit:t}={})=>async(n,o,i,r)=>{i.width=Math.max(i.width,1),i.height=Math.max(i.height,1),r.width=Math.max(r.width,1),r.height=Math.max(r.height,1);let{dest:s}=await ou(o,{imageReader:Ph(),imageWriter:Mh({format:"canvas",targetSize:{...r,upscale:!0},imageDataResizer:e,canvasMemoryLimit:t}),imageCrop:i});n.drawImage(s,r.x,r.y,r.width,r.height),rn(s)},It=(e,t=(...o)=>o,n)=>async(o,i,r)=>{r(Nr(0,!1));let s=!1,l=await e(...t(o,i,a=>{s=!0,r(a)}));return n&&n(o,l),s||r(Nr(1,!1)),o},d2=({srcProp:e="src",destProp:t="dest"}={})=>[It(bb,(n,o,i)=>[n[e],i],(n,o)=>n[t]=o),"any-to-file"],_h=({srcProp:e="src",destProp:t="size"}={})=>[It(ld,n=>[n[e]],(n,o)=>n[t]=o),"read-image-size"],wh=({srcSize:e="size",srcOrientation:t="orientation",destSize:n="size"}={})=>[It(yb,o=>[o[e],o[t]],(o,i)=>o[n]=i),"image-size-match-orientation"],kh=({srcProp:e="src",destProp:t="head"}={})=>[It((n,o)=>fd(n)?vf(n,o):void 0,n=>[n[e],[0,64*2048],onprogress],(n,o)=>n[t]=o),"read-image-head"],Ch=({srcProp:e="head",destProp:t="orientation"}={})=>[It(pc,n=>[n[e],bc],(n,o=1)=>n[t]=o),"read-exif-orientation-tag"],h2=({srcProp:e="head"}={})=>[It(pc,t=>[t[e],bc,1]),"clear-exif-orientation-tag"],m2=({srcImageSize:e="size",srcCanvasSize:t="imageData",srcImageState:n="imageState",destImageSize:o="size",destScalar:i="scalar"}={})=>[It((r,s)=>[Math.min(s.width/r.width,s.height/r.height),Bo(s)],r=>[r[e],r[t],r[n]],(r,[s,l])=>{r[i]=s,r[o]=l}),"calculate-canvas-scalar"],g2=({srcProp:e="src",destProp:t="imageData",canvasMemoryLimit:n=void 0})=>[It(Df,o=>[o[e],n],(o,i)=>o[t]=i),"blob-to-image-data"],b2=({srcImageData:e="imageData",srcOrientation:t="orientation"}={})=>[It(Lf,n=>[n[e],n[t]],(n,o)=>n.imageData=o),"image-data-match-orientation"],p2=({srcImageData:e="imageData",srcImageState:t="imageState"}={})=>[It(Ip,n=>[n[e],{backgroundColor:n[t].backgroundColor}],(n,o)=>n.imageData=o),"image-data-fill"],y2=({srcImageData:e="imageData",srcImageState:t="imageState",destScalar:n="scalar"}={})=>[It(Tb,o=>{let i=o[n],{crop:r}=o[t];return r&&i!==1&&(r=di(et(r),i,Kt())),[o[e],{crop:r,rotation:o[t].rotation,flipX:o[t].flipX,flipY:o[t].flipY}]},(o,i)=>o.imageData=i),"image-data-crop"],S2=e=>!!(e.targetSize&&e.targetSize.width||e.targetSize&&e.targetSize.height),_2=({targetSize:e={width:void 0,height:void 0,fit:void 0,upscale:void 0},imageDataResizer:t=void 0,srcProp:n="imageData",srcImageState:o="imageState",destImageScaledSize:i="imageScaledSize"})=>[It(Pb,r=>{let s=Math.min(e.width||Number.MAX_SAFE_INTEGER,r[o].targetSize&&r[o].targetSize.width||Number.MAX_SAFE_INTEGER),l=Math.min(e.height||Number.MAX_SAFE_INTEGER,r[o].targetSize&&r[o].targetSize.height||Number.MAX_SAFE_INTEGER);return[r[n],{width:s,height:l,fit:e.fit||"contain",upscale:S2(r[o])?!0:e.upscale||!1},t]},(r,s)=>{Gl(r.imageData,s)||(r[i]=Bo(s)),r.imageData=s}),"image-data-resize"],w2=({srcImageData:e="imageData",srcImageState:t="imageState",destImageData:n="imageData"}={})=>[It(Fb,o=>{let{colorMatrix:i}=o[t],r=i&&Object.keys(i).map(s=>i[s]).filter(Boolean);return[o[e],{colorMatrix:r&&Zd(r),convolutionMatrix:o[t].convolutionMatrix,gamma:o[t].gamma,noise:o[t].noise,vignette:o[t].vignette}]},(o,i)=>o[n]=i),"image-data-filter"],k2=({srcImageData:e="imageData",srcImageState:t="imageState",destImageData:n="imageData",destScalar:o="scalar"}={})=>[It(async(i,r,s,l,a)=>{if(!r)return i;let c;try{let b={dataSizeScalar:jd(i,l)};s&&s[3]>0&&(b.backgroundColor=[...s]),c=await r(i,b)}catch(b){}let u=Tt("canvas");u.width=i.width,u.height=i.height;let f=u.getContext("2d");f.putImageData(i,0,0);let h=new Path2D;l.forEach(b=>{let p=Tn(b.x,b.y,b.width,b.height);Us(p,a);let y=Di(et(p),b.rotation),w=new Path2D;y.forEach((C,M)=>{if(M===0)return w.moveTo(C.x,C.y);w.lineTo(C.x,C.y)}),h.addPath(w)}),f.clip(h,"nonzero"),f.imageSmoothingEnabled=!1,f.drawImage(c,0,0,u.width,u.height),rn(c);let m=f.getImageData(0,0,u.width,u.height);return rn(u),m},(i,{imageScrambler:r})=>[i[e],r,i[t].backgroundColor,i[t].redaction,i[o]],(i,r)=>i[n]=r),"image-data-redact"],C2=({srcImageData:e="imageData",srcSize:t="size",srcImageState:n="imageState",destImageData:o="imageData",destImageScaledSize:i="imageScaledSize",destScalar:r="scalar",imageDataResizer:s=void 0,canvasMemoryLimit:l=void 0}={})=>[It(Dc,(a,{shapePreprocessor:c,willRequestResource:u})=>{let{annotation:f}=a[n];if(!f.length)return[a[e]];let h=a[r],{crop:m}=a[n],b=a[t],p=h,y=a[i];y&&(p=Math.min(y.width/m.width,y.height/m.height));let w={width:b.width/h,height:b.height/h};return[a[e],{shapes:f,computeShape:C=>(C=Wi(C,w),C=Sh(C,["left","right","top","bottom"]),C=xd(C,p),C),transform:C=>{let M=a[t],{rotation:R=0,flipX:k,flipY:T}=a[n],P=a[r],{crop:D=An(M)}=a[n],x=a[i],A=x?Math.min(x.width/D.width,x.height/D.height):1,g={width:M.width/P*A,height:M.height/P*A},O=ob(g,R),j={width:O.width,height:O.height},v=g.width*.5-j.width*.5,G=g.height*.5-j.height*.5,z=Xl(g);C.translate(-v,-G),C.translate(-D.x*A,-D.y*A),C.translate(z.x,z.y),C.rotate(R),C.translate(-z.x,-z.y),C.scale(k?-1:1,T?-1:1),C.translate(k?-g.width:0,T?-g.height:0),C.rect(0,0,g.width,g.height),C.clip()},drawImage:iu({imageDataResizer:s,canvasMemoryLimit:l}),preprocessShape:C=>c(C,{isPreview:!1}),canvasMemoryLimit:l,willRequestResource:u}]},(a,c)=>a[o]=c),"image-data-annotate"],T2=({srcImageData:e="imageData",srcImageState:t="imageState",destImageData:n="imageData",destImageScaledSize:o="imageScaledSize",imageDataResizer:i=void 0,canvasMemoryLimit:r=void 0,destScalar:s="scalar"}={})=>[It(Dc,(l,{shapePreprocessor:a,willRequestResource:c})=>{let{decoration:u}=l[t];if(!u.length)return[l[e]];let f=l[s],{crop:h}=l[t],m=l[o];return m&&(f=Math.min(m.width/h.width,m.height/h.height)),[l[e],{shapes:u,drawImage:iu({imageDataResizer:i,canvasMemoryLimit:r}),computeShape:b=>(b=Wi(b,h),b=Sh(b,["left","right","top","bottom"]),b=xd(b,f),b),preprocessShape:b=>a(b,{isPreview:!1}),canvasMemoryLimit:r,willRequestResource:c}]},(l,a)=>l[n]=a),"image-data-decorate"],R2=({srcImageData:e="imageData",srcImageState:t="imageState",destImageData:n="imageData",destImageScaledSize:o="imageScaledSize",imageDataResizer:i=void 0,canvasMemoryLimit:r=void 0,destScalar:s="scalar"}={})=>[It(Dc,(l,{shapePreprocessor:a,willRequestResource:c})=>{let u=l[t].frame;if(!u)return[l[e]];let f=l[s],{crop:h}=l[t];h&&f!==1&&(h=di(et(h),f,Kt()));let m={...h},b=vd(Ld(u,m,a),m);m.x=Math.abs(b.left),m.y=Math.abs(b.top),m.width+=Math.abs(b.left)+Math.abs(b.right),m.height+=Math.abs(b.top)+Math.abs(b.bottom);let p=l[o],y=p?Math.min(p.width/h.width,p.height/h.height):1;return Us(m,y),m.x=Math.floor(m.x),m.y=Math.floor(m.y),m.width=Math.floor(m.width),m.height=Math.floor(m.height),[l[e],{shapes:[u],contextBounds:m,computeShape:w=>Wi(w,l[e]),transform:w=>{w.translate(m.x,m.y)},drawImage:iu({imageDataResizer:i,canvasMemoryLimit:r}),preprocessShape:w=>a(w,{isPreview:!1}),canvasMemoryLimit:r,willRequestResource:c}]},(l,a)=>l[n]=a),"image-data-frame"],P2=({mimeType:e=void 0,quality:t=void 0,srcImageData:n="imageData",srcFile:o="src",destBlob:i="blob"}={})=>[It(xg,r=>[r[n],e||kc(r[o].name)||r[o].type,t],(r,s)=>r[i]=s),"image-data-to-blob"],M2=({srcImageData:e="imageData",srcOrientation:t="orientation",destCanvas:n="dest"}={})=>[It(zs,o=>[o[e],o[t]],(o,i)=>o[n]=i),"image-data-to-canvas"],I2=async(e,t)=>{if(!fd(e)||!t)return e;let n=new DataView(t),o=If(n);if(!o||!o.exif)return e;let{exif:i}=o,r=t.slice(0,i.offset+i.size+2);return Og(e,r,[20])},A2=(e="blob",t="head",n="blob")=>[It(I2,o=>[o[e],o[t]],(o,i)=>o[n]=i),"blob-write-image-head"],E2=({renameFile:e=void 0,srcBlob:t="blob",srcFile:n="src",destFile:o="dest",defaultFilename:i=void 0}={})=>[It(Vs,r=>[r[t],e?e(r[n]):r[n].name||`${i}.${zf(r[t].type)}`],(r,s)=>r[o]=s),"blob-to-file"],Th=({url:e="./",dataset:t=o=>[["dest",o.dest,o.dest.name],["imageState",o.imageState]],destStore:n="store"})=>[It(async(o,i)=>await wb(e,o,{onprogress:i}),(o,i,r)=>[t(o),r],(o,i)=>o[n]=i),"store"],Rh=e=>[It(t=>(!e||!e.length||Object.keys(t).forEach(n=>{e.includes(n)||delete t[n]}),t)),"prop-filter"],Ph=(e={})=>{let{orientImage:t=!0,outputProps:n=["src","dest","size"],preprocessImageFile:o}=e;return[d2(),o&&[It(o,(i,r,s)=>[i.dest,r,s],(i,r)=>i.dest=r),"preprocess-image-file"],_h({srcProp:"dest"}),t&&kh({srcProp:"dest"}),t&&Ch(),t&&wh(),Rh(n)].filter(Boolean)},Mh=(e={})=>{let{canvasMemoryLimit:t=yh(),orientImage:n=!0,copyImageHead:o=!0,mimeType:i=void 0,quality:r=void 0,renameFile:s=void 0,targetSize:l=void 0,imageDataResizer:a=void 0,store:c=void 0,format:u="file",outputProps:f=["src","dest","imageState","store"],preprocessImageSource:h,preprocessImageState:m,postprocessImageData:b,postprocessImageBlob:p}=e;return[h&&[It(h,(y,w,C)=>[y.src,w,C,y.imageState],(y,w)=>y.src=w),"preprocess-image-source"],(n||o)&&kh(),n&&Ch(),_h(),m&&[It(m,(y,w,C)=>[y.imageState,w,C],(y,w)=>y.imageState=w),"preprocess-image-state"],g2({canvasMemoryLimit:t}),n&&wh(),n&&b2(),m2(),k2(),y2(),_2({imageDataResizer:a,targetSize:l}),w2(),p2(),C2({imageDataResizer:a,canvasMemoryLimit:t}),T2({imageDataResizer:a,canvasMemoryLimit:t}),R2({imageDataResizer:a,canvasMemoryLimit:t}),b&&[It(b,(y,w,C)=>[y.imageData,w,C],(y,w)=>y.imageData=w),"postprocess-image-data"],u==="file"?P2({mimeType:i,quality:r}):u==="canvas"?M2():[y=>(y.dest=y.imageData,y)],u==="file"&&n&&h2(),u==="file"&&o&&A2(),p&&[It(p,({blob:y,imageData:w,src:C},M,R)=>[{blob:y,imageData:w,src:C},M,R],(y,w)=>y.blob=w),"postprocess-image-file"],u==="file"&&E2({defaultFilename:"image",renameFile:s}),u==="file"?c&&(Ht(c)?Th({url:c}):Qn(c)?[c,"store"]:Th(c)):Qn(c)&&[c,"store"],Rh(f)].filter(Boolean)};function v2(e){return Math.sqrt(1- --e*e)}function Ih(e){return Object.prototype.toString.call(e)==="[object Date]"}function ru(e,t){if(e===t||e!==e)return()=>e;let n=typeof e;if(n!==typeof t||Array.isArray(e)!==Array.isArray(t))throw new Error("Cannot interpolate values of different type");if(Array.isArray(e)){let o=t.map((i,r)=>ru(e[r],i));return i=>o.map(r=>r(i))}if(n==="object"){if(!e||!t)throw new Error("Object cannot be null");if(Ih(e)&&Ih(t)){e=e.getTime(),t=t.getTime();let r=t-e;return s=>new Date(e+s*r)}let o=Object.keys(t),i={};return o.forEach(r=>{i[r]=ru(e[r],t[r])}),r=>{let s={};return o.forEach(l=>{s[l]=i[l](r)}),s}}if(n==="number"){let o=t-e;return i=>e+i*o}throw new Error(`Cannot interpolate ${n} values`)}function su(e,t={}){let n=We(e),o,i=e;function r(s,l){if(e==null)return n.set(e=s),Promise.resolve();i=s;let a=o,c=!1,{delay:u=0,duration:f=400,easing:h=zc,interpolate:m=ru}=Jt(Jt({},t),l);if(f===0)return a&&(a.abort(),a=null),n.set(e=i),Promise.resolve();let b=Jd()+u,p;return o=Hc(y=>{if(y<b)return!0;c||(p=m(e,s),typeof f=="function"&&(f=f(e,s)),c=!0),a&&(a.abort(),a=null);let w=y-b;return w>f?(n.set(e=s),!1):(n.set(e=p(h(w/f))),!0)}),o.promise}return{set:r,update:(s,l)=>r(s(i,e),l),subscribe:n.subscribe}}function lu(e,t,n,o){if(typeof n=="number"){let i=o-n,r=(n-t)/(e.dt||1/60),s=e.opts.stiffness*i,l=e.opts.damping*r,a=(s-l)*e.inv_mass,c=(r+a)*e.dt;return Math.abs(c)<e.opts.precision&&Math.abs(i)<e.opts.precision?o:(e.settled=!1,n+c)}else{if(sn(n))return n.map((i,r)=>lu(e,t[r],n[r],o[r]));if(typeof n=="object"){let i={};for(let r in n)i[r]=lu(e,t[r],n[r],o[r]);return i}else throw new Error(`Cannot spring ${typeof n} values`)}}function qe(e,t={}){let n=We(e),{stiffness:o=.15,damping:i=.8,precision:r=.01}=t,s,l,a,c=e,u=e,f=1,h=0,m=!1;function b(y,w={}){u=y;let C=a={};if(e==null||w.hard||p.stiffness>=1&&p.damping>=1)return m=!0,s=null,c=y,n.set(e=u),Promise.resolve();if(w.soft){let M=w.soft===!0?.5:+w.soft;h=1/(M*60),f=0}if(!l){s=null,m=!1;let M={inv_mass:void 0,opts:p,settled:!0,dt:void 0};l=Hc(R=>{if(s===null&&(s=R),m)return m=!1,l=null,!1;f=Math.min(f+h,1),M.inv_mass=f,M.opts=p,M.settled=!0,M.dt=(R-s)*60/1e3;let k=lu(M,c,e,u);return s=R,c=e,n.set(e=k),M.settled&&(l=null),!M.settled})}return new Promise(M=>{l.promise.then(()=>{C===a&&M()})})}let p={set:b,update:(y,w)=>b(y(u,e),w),subscribe:n.subscribe,stiffness:o,damping:i,precision:r};return p}var L2=Ni(!1,e=>{let t=window.matchMedia("(prefers-reduced-motion:reduce)");e(t.matches),t.onchange=()=>e(t.matches)}),F2=()=>"ResizeObserver"in window,au=Do(),Ah=(e,t,n,o,i)=>{e.rect||(e.rect=Do());let r=e.rect;Jf(au,t,n,o,i),!zo(r,au)&&(ql(r,au),e.dispatchEvent(new CustomEvent("measure",{detail:r})))},Sa=Math.round,x2=e=>{let t=e.getBoundingClientRect();Ah(e,Sa(t.x),Sa(t.y),Sa(t.width),Sa(t.height))},cu=e=>Ah(e,e.offsetLeft,e.offsetTop,e.offsetWidth,e.offsetHeight),el=[],_a=null;function Eh(){if(!el.length){_a=null;return}el.forEach(e=>e.measure(e)),_a=requestAnimationFrame(Eh)}var Zi,uu=0,Ln=(e,t={})=>{let{observePosition:n=!1,observeViewRect:o=!1,once:i=!1,disabled:r=!1}=t;if(!r)return F2()&&!n&&!o?(Zi||(Zi=new ResizeObserver(s=>{s.forEach(l=>cu(l.target))})),Zi.observe(e),cu(e),i?Zi.unobserve(e):uu++,{destroy(){i||(Zi.unobserve(e),uu--,uu===0&&(Zi.disconnect(),Zi=void 0))}}):(e.measure=o?x2:cu,el.push(e),_a||(_a=requestAnimationFrame(Eh)),e.measure(e),{destroy(){let s=el.indexOf(e);el.splice(s,1),delete e.measure}})},O2=e=>{let t=!1,l={pointerdown:()=>{t=!1},keydown:()=>{t=!0},keyup:()=>{t=!1},focus:a=>{!t||(a.target.dataset.focusVisible="")},blur:a=>{delete a.target.dataset.focusVisible}};return Object.keys(l).forEach(a=>e.addEventListener(a,l[a],!0)),{destroy(){Object.keys(l).forEach(a=>e.removeEventListener(a,l[a],!0))}}},B2=async e=>new Promise(t=>{if(e.kind==="file")return t(e.getAsFile());e.getAsString(t)}),D2=e=>new Promise((t,n)=>{let{items:o}=e.dataTransfer;if(!o)return t([]);Promise.all(Array.from(o).map(B2)).then(i=>{t(i.filter(r=>Ql(r)&&ad(r)||/^http/.test(r)))}).catch(n)}),z2=(e,t={})=>{let n=i=>{i.preventDefault()},o=async i=>{i.preventDefault(),i.stopPropagation();try{let r=await D2(i);e.dispatchEvent(new CustomEvent("dropfiles",{detail:{event:i,resources:r},...t}))}catch(r){}};return e.addEventListener("drop",o),e.addEventListener("dragover",n),{destroy(){e.removeEventListener("drop",o),e.removeEventListener("dragover",n)}}},tl=null,fu=()=>{if(tl===null)if("WebGL2RenderingContext"in window){let e;try{e=Tt("canvas"),tl=!!e.getContext("webgl2")}catch(t){tl=!1}e&&rn(e),e=void 0}else tl=!1;return tl},wa=(e,t)=>fu()?e.getContext("webgl2",t):e.getContext("webgl",t)||e.getContext("experimental-webgl",t),ka=null,du=()=>{if(ka===null)if(on()){let e=Tt("canvas");ka=!wa(e,{failIfMajorPerformanceCaveat:!0}),rn(e)}else ka=!1;return ka},vh=e=>(e&e-1)==0,hu=(e,t={},n="",o="")=>Object.keys(t).filter(i=>!Ws(t[i])).reduce((i,r)=>i.replace(new RegExp(n+r+o),t[r]),e),W2=`#version 300 es
precision highp float;

out vec4 fragColor;`,V2=`
float a=1.0;vec4 fillColor=uColor;vec4 textureColor=texture(uTexture,vTexCoord);textureColor*=(1.0-step(1.0,vTexCoord.y))*step(0.0,vTexCoord.y)*(1.0-step(1.0,vTexCoord.x))*step(0.0,vTexCoord.x);`,H2=`
uniform float uMaskFeather[8];uniform float uMaskBounds[4];uniform float uMaskOpacity;float mask(float x,float y,float bounds[4],float opacity){return 1.0-(1.0-(smoothstep(bounds[3],bounds[3]+1.0,x)*(1.0-smoothstep(bounds[1]-1.0,bounds[1],x))*(1.0-step(bounds[0],y))*step(bounds[2],y)))*(1.0-opacity);}`,N2=`
float m=mask(gl_FragCoord.x,gl_FragCoord.y,uMaskBounds,uMaskOpacity);`,U2=`
float leftFeatherOpacity=step(uMaskFeather[1],gl_FragCoord.x)*uMaskFeather[0]+((1.0-uMaskFeather[0])*smoothstep(uMaskFeather[1],uMaskFeather[3],gl_FragCoord.x));float rightFeatherOpacity=(1.0-step(uMaskFeather[7],gl_FragCoord.x))*uMaskFeather[4]+((1.0-uMaskFeather[4])*smoothstep(uMaskFeather[7],uMaskFeather[5],gl_FragCoord.x));a*=leftFeatherOpacity*rightFeatherOpacity;`,Z2=`
vec2 scaledPoint=vec2(vRectCoord.x*uSize.x,vRectCoord.y*uSize.y);a*=smoothstep(0.0,1.0,uSize.x-scaledPoint.x);a*=smoothstep(0.0,1.0,uSize.y-scaledPoint.y);a*=smoothstep(0.0,1.0,scaledPoint.x);a*=smoothstep(0.0,1.0,scaledPoint.y);`,j2=`
vec2 s=(uSize-2.0)*.5;vec2 r=(vRectCoord*uSize);vec2 p=r-(uSize*.5);float cornerRadius=uCornerRadius[0];bool left=r.x<s.x;bool top=r.y<s.x;if(!left&&top){cornerRadius=uCornerRadius[1];}if(!left&&!top){cornerRadius=uCornerRadius[3];}if(left&&!top){cornerRadius=uCornerRadius[2];}a*=1.0-clamp(length(max(abs(p)-(s-cornerRadius),0.0))-cornerRadius,0.0,1.0);`,G2=`
if(m<=0.0)discard;fillColor.a*=a;fillColor.rgb*=fillColor.a;fillColor.rgb*=m;fillColor.rgb+=(1.0-m)*(uCanvasColor.rgb*fillColor.a);textureColor*=uTextureOpacity;textureColor.a*=a;textureColor.rgb*=m*a;textureColor.rgb+=(1.0-m)*(uCanvasColor.rgb*textureColor.a);fragColor=textureColor+(fillColor*(1.0-textureColor.a));`,X2=`
if(uTextureColor.a!=0.0&&textureColor.a>0.0){vec3 colorFlattened=textureColor.rgb/textureColor.a;if(colorFlattened.r>=.9999&&colorFlattened.g==0.0&&colorFlattened.b>=.9999){textureColor.rgb=uTextureColor.rgb*textureColor.a;}textureColor*=uTextureColor.a;}`,Y2=`#version 300 es

in vec4 aPosition;uniform mat4 uMatrix;`,q2=`
gl_Position=uMatrix*vec4(aPosition.x,aPosition.y,0,1);`,K2=`
in vec2 aTexCoord;out vec2 vTexCoord;`,J2={head:Y2,text:K2,matrix:q2},Q2={head:W2,mask:H2,init:V2,colorize:X2,maskapply:N2,maskfeatherapply:U2,edgeaa:Z2,cornerradius:j2,fragcolor:G2},$2=(e,t,n)=>(t=hu(t,n===e.VERTEX_SHADER?J2:Q2,"##").trim(),fu()?t:(t=t.replace(/#version.+/gm,"").trim(),t=t.replace(/^\/\/\#/gm,"#"),n===e.VERTEX_SHADER&&(t=t.replace(/in /gm,"attribute ").replace(/out /g,"varying ")),n===e.FRAGMENT_SHADER&&(t=t.replace(/in /gm,"varying ").replace(/out.*?;/gm,"").replace(/texture\(/g,"texture2D(").replace(/fragColor/g,"gl_FragColor")),`${t}`)),Lh=(e,t,n)=>{let o=e.createShader(n),i=$2(e,t,n);return e.shaderSource(o,i),e.compileShader(o),e.getShaderParameter(o,e.COMPILE_STATUS)||console.error(e.getShaderInfoLog(o)),o},nl=(e,t,n,o,i)=>{let r=Lh(e,t,e.VERTEX_SHADER),s=Lh(e,n,e.FRAGMENT_SHADER),l=e.createProgram();e.attachShader(l,r),e.attachShader(l,s),e.linkProgram(l);let a={};return o.forEach(c=>{a[c]=e.getAttribLocation(l,c)}),i.forEach(c=>{a[c]=e.getUniformLocation(l,c)}),{program:l,locations:a,destroy(){e.detachShader(l,r),e.detachShader(l,s),e.deleteShader(r),e.deleteShader(s),e.deleteProgram(l)}}},Fh=e=>fu()?!0:vh(e.width)&&vh(e.height),ey=(e,t,n)=>{e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,Fh(t)?e.LINEAR_MIPMAP_LINEAR:e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,n.filter),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),Fh(t)&&e.generateMipmap(e.TEXTURE_2D)},ty=(e,t,n,o)=>(e.bindTexture(e.TEXTURE_2D,t),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,n),ey(e,n,o),e.bindTexture(e.TEXTURE_2D,null),t),ji=(e,t=1)=>e?[e[0],e[1],e[2],ut(e[3])?t*e[3]:t]:[0,0,0,0],mu=()=>{let e=new Float32Array(16);return e[0]=1,e[5]=1,e[10]=1,e[15]=1,e},ny=(e,t,n,o,i)=>{let r=1/Math.tan(t/2),s=1/(o-i);e[0]=r/n,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=r,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=(i+o)*s,e[11]=-1,e[12]=0,e[13]=0,e[14]=2*i*o*s,e[15]=0},gu=(e,t,n,o,i,r,s)=>{let l=1/(t-n),a=1/(o-i),c=1/(r-s);e[0]=-2*l,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*a,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*c,e[11]=0,e[12]=(t+n)*l,e[13]=(i+o)*a,e[14]=(s+r)*c,e[15]=1},Gi=(e,t,n,o)=>{e[12]=e[0]*t+e[4]*n+e[8]*o+e[12],e[13]=e[1]*t+e[5]*n+e[9]*o+e[13],e[14]=e[2]*t+e[6]*n+e[10]*o+e[14],e[15]=e[3]*t+e[7]*n+e[11]*o+e[15]},xh=(e,t)=>{e[0]*=t,e[1]*=t,e[2]*=t,e[3]*=t,e[4]*=t,e[5]*=t,e[6]*=t,e[7]*=t,e[8]*=t,e[9]*=t,e[10]*=t,e[11]*=t},oy=(e,t)=>{e[0]*=t,e[1]*=t,e[2]*=t,e[3]*=t},iy=(e,t)=>{e[4]*=t,e[5]*=t,e[6]*=t,e[7]*=t},Oh=(e,t)=>{let n=Math.sin(t),o=Math.cos(t),i=e[4],r=e[5],s=e[6],l=e[7],a=e[8],c=e[9],u=e[10],f=e[11];e[4]=i*o+a*n,e[5]=r*o+c*n,e[6]=s*o+u*n,e[7]=l*o+f*n,e[8]=a*o-i*n,e[9]=c*o-r*n,e[10]=u*o-s*n,e[11]=f*o-l*n},Bh=(e,t)=>{let n=Math.sin(t),o=Math.cos(t),i=e[0],r=e[1],s=e[2],l=e[3],a=e[8],c=e[9],u=e[10],f=e[11];e[0]=i*o-a*n,e[1]=r*o-c*n,e[2]=s*o-u*n,e[3]=l*o-f*n,e[8]=i*n+a*o,e[9]=r*n+c*o,e[10]=s*n+u*o,e[11]=l*n+f*o},Dh=(e,t)=>{let n=Math.sin(t),o=Math.cos(t),i=e[0],r=e[1],s=e[2],l=e[3],a=e[4],c=e[5],u=e[6],f=e[7];e[0]=i*o+a*n,e[1]=r*o+c*n,e[2]=s*o+u*n,e[3]=l*o+f*n,e[4]=a*o-i*n,e[5]=c*o-r*n,e[6]=u*o-s*n,e[7]=f*o-l*n},ry=e=>e*Math.PI/180,sy=`
##head
in vec2 vTexCoord;uniform sampler2D uTexture;uniform sampler2D uTextureOverlay;uniform sampler2D uTextureBlend;uniform vec2 uTextureSize;uniform float uOpacity;uniform vec4 uFillColor;uniform vec4 uOverlayColor;uniform mat4 uColorMatrix;uniform vec4 uColorOffset;uniform float uClarityKernel[9];uniform float uClarityKernelWeight;uniform float uColorGamma;uniform float uColorVignette;uniform float uMaskClip;uniform float uMaskOpacity;uniform float uMaskBounds[4];uniform float uMaskCornerRadius[4];uniform float uMaskFeather[8];vec4 applyGamma(vec4 c,float g){c.r=pow(c.r,g);c.g=pow(c.g,g);c.b=pow(c.b,g);return c;}vec4 applyColorMatrix(vec4 c,mat4 m,vec4 o){vec4 cM=(c*m)+o;cM*=cM.a;return cM;}vec4 applyConvolutionMatrix(vec4 c,float k0,float k1,float k2,float k3,float k4,float k5,float k6,float k7,float k8,float w){vec2 pixel=vec2(1)/uTextureSize;vec4 colorSum=texture(uTexture,vTexCoord-pixel)*k0+texture(uTexture,vTexCoord+pixel*vec2(0.0,-1.0))*k1+texture(uTexture,vTexCoord+pixel*vec2(1.0,-1.0))*k2+texture(uTexture,vTexCoord+pixel*vec2(-1.0,0.0))*k3+texture(uTexture,vTexCoord)*k4+texture(uTexture,vTexCoord+pixel*vec2(1.0,0.0))*k5+texture(uTexture,vTexCoord+pixel*vec2(-1.0,1.0))*k6+texture(uTexture,vTexCoord+pixel*vec2(0.0,1.0))*k7+texture(uTexture,vTexCoord+pixel)*k8;vec4 color=vec4(clamp((colorSum/w),0.0,1.0).rgb,c.a);return color;}vec4 applyVignette(vec4 c,vec2 pos,vec2 center,float v){float d=distance(pos,center)/length(center);float f=1.0-(d*abs(v));if(v>0.0){c.rgb*=f;}else if(v<0.0){c.rgb+=(1.0-f)*(1.0-c.rgb);}return c;}vec4 blendPremultipliedAlpha(vec4 back,vec4 front){return front+(back*(1.0-front.a));}void main(){float x=gl_FragCoord.x;float y=gl_FragCoord.y;float a=1.0;float maskTop=uMaskBounds[0];float maskRight=uMaskBounds[1];float maskBottom=uMaskBounds[2];float maskLeft=uMaskBounds[3];float leftFeatherOpacity=step(uMaskFeather[1],x)*uMaskFeather[0]+((1.0-uMaskFeather[0])*smoothstep(uMaskFeather[1],uMaskFeather[3],x));float rightFeatherOpacity=(1.0-step(uMaskFeather[7],x))*uMaskFeather[4]+((1.0-uMaskFeather[4])*smoothstep(uMaskFeather[7],uMaskFeather[5],x));a*=leftFeatherOpacity*rightFeatherOpacity;float overlayColorAlpha=(smoothstep(maskLeft,maskLeft+1.0,x)*(1.0-smoothstep(maskRight-1.0,maskRight,x))*(1.0-step(maskTop,y))*step(maskBottom,y));if(uOverlayColor.a==0.0){a*=overlayColorAlpha;}vec2 offset=vec2(maskLeft,maskBottom);vec2 size=vec2(maskRight-maskLeft,maskTop-maskBottom)*.5;vec2 center=offset.xy+size.xy;int pixelX=int(step(center.x,x));int pixelY=int(step(y,center.y));float cornerRadius=0.0;if(pixelX==0&&pixelY==0)cornerRadius=uMaskCornerRadius[0];if(pixelX==1&&pixelY==0)cornerRadius=uMaskCornerRadius[1];if(pixelX==0&&pixelY==1)cornerRadius=uMaskCornerRadius[2];if(pixelX==1&&pixelY==1)cornerRadius=uMaskCornerRadius[3];float cornerOffset=sign(cornerRadius)*length(max(abs(gl_FragCoord.xy-size-offset)-size+cornerRadius,0.0))-cornerRadius;float cornerOpacity=1.0-smoothstep(0.0,1.0,cornerOffset);a*=cornerOpacity;vec2 scaledPoint=vec2(vTexCoord.x*uTextureSize.x,vTexCoord.y*uTextureSize.y);a*=smoothstep(0.0,1.0,uTextureSize.x-scaledPoint.x);a*=smoothstep(0.0,1.0,uTextureSize.y-scaledPoint.y);a*=smoothstep(0.0,1.0,scaledPoint.x);a*=smoothstep(0.0,1.0,scaledPoint.y);vec4 color=texture(uTexture,vTexCoord);if(uClarityKernelWeight!=-1.0){color=applyConvolutionMatrix(color,uClarityKernel[0],uClarityKernel[1],uClarityKernel[2],uClarityKernel[3],uClarityKernel[4],uClarityKernel[5],uClarityKernel[6],uClarityKernel[7],uClarityKernel[8],uClarityKernelWeight);}color=blendPremultipliedAlpha(color,texture(uTextureBlend,vTexCoord));color=applyGamma(color,uColorGamma);color=applyColorMatrix(color,uColorMatrix,uColorOffset);color=blendPremultipliedAlpha(uFillColor,color);color*=a;if(uColorVignette!=0.0){vec2 pos=gl_FragCoord.xy-offset;color=applyVignette(color,pos,center-offset,uColorVignette);}color=blendPremultipliedAlpha(color,texture(uTextureOverlay,vTexCoord));vec4 overlayColor=uOverlayColor*(1.0-overlayColorAlpha);overlayColor.rgb*=overlayColor.a;color=blendPremultipliedAlpha(color,overlayColor);if(uOverlayColor.a>0.0&&color.a<1.0&&uFillColor.a>0.0){color=blendPremultipliedAlpha(uFillColor,overlayColor);}color*=uOpacity;fragColor=color;}`,ly=`
##head
##text
void main(){vTexCoord=aTexCoord;gl_Position=uMatrix*aPosition;}`,ay=`#version 300 es

in vec4 aPosition;in vec2 aNormal;in float aMiter;out vec2 vNormal;out float vMiter;out float vWidth;uniform float uWidth;uniform mat4 uMatrix;void main(){vMiter=aMiter;vNormal=aNormal;vWidth=(uWidth*.5)+1.0;gl_Position=uMatrix*vec4(aPosition.x+(aNormal.x*vWidth*aMiter),aPosition.y+(aNormal.y*vWidth*aMiter),0,1);}`,cy=`
##head
##mask
in vec2 vNormal;in float vMiter;in float vWidth;uniform float uWidth;uniform vec4 uColor;uniform vec4 uCanvasColor;void main(){vec4 fillColor=uColor;float m=mask(gl_FragCoord.x,gl_FragCoord.y,uMaskBounds,uMaskOpacity);if(m<=0.0)discard;fillColor.a*=clamp(smoothstep(vWidth-.5,vWidth-1.0,abs(vMiter)*vWidth),0.0,1.0);fillColor.rgb*=fillColor.a;fillColor.rgb*=m;fillColor.rgb+=(1.0-m)*(uCanvasColor.rgb*fillColor.a);fragColor=fillColor;}`,uy=`
##head
##text
in vec2 aRectCoord;out vec2 vRectCoord;void main(){vTexCoord=aTexCoord;vRectCoord=aRectCoord;
##matrix
}`,fy=`
##head
##mask
in vec2 vTexCoord;in vec2 vRectCoord;uniform sampler2D uTexture;uniform vec4 uTextureColor;uniform float uTextureOpacity;uniform vec4 uColor;uniform float uCornerRadius[4];uniform vec2 uSize;uniform vec2 uPosition;uniform vec4 uCanvasColor;uniform int uInverted;void main(){
##init
##colorize
##edgeaa
##cornerradius
##maskfeatherapply
if(uInverted==1)a=1.0-a;
##maskapply
##fragcolor
}`,dy=`
##head
##text
out vec2 vTexCoordDouble;void main(){vTexCoordDouble=vec2(aTexCoord.x*2.0-1.0,aTexCoord.y*2.0-1.0);vTexCoord=aTexCoord;
##matrix
}`,hy=`
##head
##mask
in vec2 vTexCoord;in vec2 vTexCoordDouble;uniform sampler2D uTexture;uniform float uTextureOpacity;uniform vec2 uRadius;uniform vec4 uColor;uniform int uInverted;uniform vec4 uCanvasColor;void main(){
##init
float ar=uRadius.x/uRadius.y;vec2 rAA=vec2(uRadius.x-1.0,uRadius.y-(1.0/ar));vec2 scaledPointSq=vec2((vTexCoordDouble.x*uRadius.x)*(vTexCoordDouble.x*uRadius.x),(vTexCoordDouble.y*uRadius.y)*(vTexCoordDouble.y*uRadius.y));float p=(scaledPointSq.x/(uRadius.x*uRadius.x))+(scaledPointSq.y/(uRadius.y*uRadius.y));float pAA=(scaledPointSq.x/(rAA.x*rAA.x))+(scaledPointSq.y/(rAA.y*rAA.y));a=smoothstep(1.0,p/pAA,p);if(uInverted==1)a=1.0-a;
##maskapply
##fragcolor
}`,my=`
##head
void main(){
##matrix
}`,gy=`
##head
##mask
uniform vec4 uColor;uniform vec4 uCanvasColor;void main(){vec4 fillColor=uColor;
##maskapply
fillColor.rgb*=fillColor.a;fillColor.rgb*=m;fillColor.rgb+=(1.0-m)*(uCanvasColor.rgb*fillColor.a);fragColor=fillColor;}`,zh=(e,t,n,o,i)=>{let r=Oi(oe(o.x-n.x,o.y-n.y)),s=Oi(oe(i.x-o.x,i.y-o.y)),l=Oi(oe(r.x+s.x,r.y+s.y)),a=oe(-l.y,l.x),c=oe(-r.y,r.x),u=Math.min(1/Ug(a,c),5);e[t]=o.x,e[t+1]=o.y,e[t+2]=a.x*u,e[t+3]=a.y*u,e[t+4]=-1,e[t+5]=o.x,e[t+6]=o.y,e[t+7]=a.x*u,e[t+8]=a.y*u,e[t+9]=1},by=(e,t)=>{let n,o,i,r=0,s=e.length,l=10,a=new Float32Array((t?s+1:s)*l),c=e[0],u=e[s-1];for(r=0;r<s;r++)n=e[r-1],o=e[r],i=e[r+1],n||(n=t?u:oe(o.x+(o.x-i.x),o.y+(o.y-i.y))),i||(i=t?c:oe(o.x+(o.x-n.x),o.y+(o.y-n.y))),zh(a,r*l,n,o,i);return t&&zh(a,s*l,u,c,e[1]),a},Wh=e=>{let t=new Float32Array(8);return t[0]=e[3].x,t[1]=e[3].y,t[2]=e[0].x,t[3]=e[0].y,t[4]=e[2].x,t[5]=e[2].y,t[6]=e[1].x,t[7]=e[1].y,t},py=e=>{let t=new Float32Array(6);return t[0]=e[0].x,t[1]=e[0].y,t[2]=e[1].x,t[3]=e[1].y,t[4]=e[2].x,t[5]=e[2].y,t},Vh=(e,t=0,n,o)=>{let i=Hr(e),r=e.x+e.width*.5,s=e.y+e.height*.5;return(n||o)&&Zl(i,n,o,r,s),t!==0&&jl(i,t,r,s),i},yy=(e,t,n,o,i,r,s)=>{let l=Math.abs(n)*.5,a=Math.abs(o)*.5,c=Math.abs(n)+Math.abs(o),u=Math.max(20,Math.round(c/6));return nb(oe(e+l,t+a),l,a,i,r,s,u)},Sy=(e,t,n,o,i,r,s,l)=>{let a=[];if(r.every(c=>c===0))a.push(oe(e,t),oe(e+n,t),oe(e+n,t+o),oe(e,t+o));else{let[c,u,f,h]=r,m=e,b=e+n,p=t,y=t+o;a.push(oe(m+c,p)),Ca(a,b-u,p+u,u,-1),a.push(oe(b,p+u)),Ca(a,b-h,y-h,h,0),a.push(oe(b-h,y)),Ca(a,m+f,y-f,f,1),a.push(oe(m,y-f)),Ca(a,m+c,p+c,c,2)}return(s||l)&&Zl(a,s,l,e+n*.5,t+o*.5),i&&jl(a,i,e+n*.5,t+o*.5),a},Ca=(e,t,n,o,i)=>{let r=Math.min(20,Math.max(4,Math.round(o/2))),s=0,l=0,a=0,c=0,u=0;for(;u<r;u++)s=u/r,l=i*$n+s*$n,a=o*Math.cos(l),c=o*Math.sin(l),e.push(oe(t+a,n+c))},Ta=null,bu=()=>{if(Ta!==null)return Ta;let e=Tt("canvas"),t=wa(e);return Ta=t?t.getParameter(t.MAX_TEXTURE_SIZE):void 0,rn(e),e=void 0,Ta},pu=null,_y=()=>(pu===null&&(pu=ud(/Firefox/)),pu),ol=new Float32Array([0,1,0,0,1,1,1,0]),Hh=[0,0,0,0,1,0,0,0,0],wy=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],yu=0,Ra=1,Pa=2,Nh=3,Ma=4,Ia=[0,0,0,0],ky=[0,0,0,0],Uh=(e,t,n,o,i)=>{if(!n||!o)return ol;let r=o.x/n.width,s=o.y/n.height,l=e/n.width/i,a=t/n.height/i;l-=r,a-=s;let c=-r,u=a,f=-r,h=-s,m=l,b=a,p=l,y=-s;return new Float32Array([c,u,f,h,m,b,p,y])},Cy=(e,t)=>Math.floor(Mt(e,0,Math.min((t.width-1)*.5,(t.height-1)*.5))),Ty=e=>{let t={width:0,height:0},n={width:0,height:0},o=bu()||1024,i,r,s=mu(),l=mu(),a,c,u,f,h,m,b,p,y,w=0,C=0,M=0,R=new Map([]),k=(K,re,te)=>{r=te,n.width=K,n.height=re,t.width=K*r,t.height=re*r,i=ci(t.width,t.height),e.width=t.width,e.height=t.height,gu(s,0,t.width,t.height,0,-1,1),p=[1,0,1,0,1,n.width,1,n.width]},T=()=>{g.stencilOp(g.KEEP,g.KEEP,g.REPLACE),g.stencilFunc(g.ALWAYS,1,255),g.stencilMask(255)},P=()=>{g.stencilFunc(g.EQUAL,1,255),g.stencilMask(0)},D=()=>{g.stencilOp(g.KEEP,g.KEEP,g.KEEP),g.stencilFunc(g.ALWAYS,1,255),g.stencilMask(255)},x=ry(30),A=Math.tan(x/2),g=wa(e,{antialias:!1,alpha:!1,premultipliedAlpha:!0,stencil:!0});if(!g)return;g.getExtension("OES_standard_derivatives"),g.disable(g.DEPTH_TEST),g.enable(g.STENCIL_TEST),g.enable(g.BLEND),g.blendFunc(g.ONE,g.ONE_MINUS_SRC_ALPHA),g.pixelStorei(g.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!_y()),D();let O=g.createTexture();g.bindTexture(g.TEXTURE_2D,O),g.texImage2D(g.TEXTURE_2D,0,g.RGBA,1,1,0,g.RGBA,g.UNSIGNED_BYTE,new Uint8Array(Ia)),R.set(yu,O);let j=g.createTexture();R.set(Pa,j);let v=g.createFramebuffer(),G=g.createTexture();R.set(Ra,G);let z=g.createFramebuffer(),B=nl(g,ly,sy,["aPosition","aTexCoord"],["uMatrix","uTexture","uTextureBlend","uTextureOverlay","uTextureSize","uColorGamma","uColorVignette","uColorOffset","uColorMatrix","uClarityKernel","uClarityKernelWeight","uOpacity","uMaskOpacity","uMaskBounds","uMaskCornerRadius","uMaskFeather","uFillColor","uOverlayColor"]),ee=g.createBuffer(),ge=g.createBuffer();g.bindBuffer(g.ARRAY_BUFFER,ge),g.bufferData(g.ARRAY_BUFFER,ol,g.STATIC_DRAW);let ve=(K,re,te,pe,Le,ne,Ee,de,ot,Te,me=wy,Ne=1,_e,Qe=1,_t=0,Fe=p,we=ky,yt=Ia,wt=Ia,Ye=!1,tn=!1)=>{let Wt=re.width*r,dn=re.height*r,Un=Wt*-.5,Gt=dn*.5,hn=Wt*.5,Fn=dn*-.5,$e=new Float32Array([Un,Fn,0,Un,Gt,0,hn,Fn,0,hn,Gt,0]);g.bindBuffer(g.ARRAY_BUFFER,ee),g.bufferData(g.ARRAY_BUFFER,$e,g.STATIC_DRAW);let bo=re.height/2/A*(t.height/re.height)*-1;Le*=r,ne*=r,te*=r,pe*=r;let{program:cn,locations:dt}=B,nn=mu();ny(nn,x,i,1,-bo*2),Gi(nn,Le,-ne,bo),Gi(nn,te,-pe,0),Dh(nn,-ot),xh(nn,Te),Gi(nn,-te,pe,0),Bh(nn,de),Oh(nn,Ee),g.useProgram(cn),g.enableVertexAttribArray(dt.aPosition),g.enableVertexAttribArray(dt.aTexCoord),g.uniform1i(dt.uTexture,Nh),g.uniform2f(dt.uTextureSize,re.width,re.height),g.activeTexture(g.TEXTURE0+Nh),g.bindTexture(g.TEXTURE_2D,K);let ln=tn?Ra:yu,xn=R.get(ln);g.uniform1i(dt.uTextureBlend,ln),g.activeTexture(g.TEXTURE0+ln),g.bindTexture(g.TEXTURE_2D,xn);let Pn=Ye?Pa:yu,Zn=R.get(Pn);g.uniform1i(dt.uTextureOverlay,Pn),g.activeTexture(g.TEXTURE0+Pn),g.bindTexture(g.TEXTURE_2D,Zn),g.bindBuffer(g.ARRAY_BUFFER,ee),g.vertexAttribPointer(dt.aPosition,3,g.FLOAT,!1,0,0),g.bindBuffer(g.ARRAY_BUFFER,ge),g.vertexAttribPointer(dt.aTexCoord,2,g.FLOAT,!1,0,0),g.uniformMatrix4fv(dt.uMatrix,!1,nn),g.uniform4fv(dt.uOverlayColor,wt),g.uniform4fv(dt.uFillColor,yt);let mn;!_e||$s(_e,Hh)?(_e=Hh,mn=-1):(mn=_e.reduce((un,ht)=>un+ht,0),mn=mn<=0?1:mn),g.uniform1fv(dt.uClarityKernel,_e),g.uniform1f(dt.uClarityKernelWeight,mn),g.uniform1f(dt.uColorGamma,1/Qe),g.uniform1f(dt.uColorVignette,_t),g.uniform4f(dt.uColorOffset,me[4],me[9],me[14],me[19]),g.uniformMatrix4fv(dt.uColorMatrix,!1,[me[0],me[1],me[2],me[3],me[5],me[6],me[7],me[8],me[10],me[11],me[12],me[13],me[15],me[16],me[17],me[18]]),g.uniform1f(dt.uOpacity,Ne),g.uniform1f(dt.uMaskOpacity,m),g.uniform1fv(dt.uMaskBounds,b),g.uniform1fv(dt.uMaskCornerRadius,we.map(un=>un*r)),g.uniform1fv(dt.uMaskFeather,Fe.map((un,ht)=>ht%2==0?un:un*r)),g.drawArrays(g.TRIANGLE_STRIP,0,4),g.disableVertexAttribArray(dt.aPosition),g.disableVertexAttribArray(dt.aTexCoord)},Oe=nl(g,ay,cy,["aPosition","aNormal","aMiter"],["uColor","uCanvasColor","uMatrix","uWidth","uMaskBounds","uMaskOpacity"]),Ve=g.createBuffer(),J=(K,re,te,pe=!1)=>{let{program:Le,locations:ne}=Oe;g.useProgram(Le),g.enableVertexAttribArray(ne.aPosition),g.enableVertexAttribArray(ne.aNormal),g.enableVertexAttribArray(ne.aMiter);let Ee=by(K,pe),de=Float32Array.BYTES_PER_ELEMENT*5,ot=Float32Array.BYTES_PER_ELEMENT*2,Te=Float32Array.BYTES_PER_ELEMENT*4;g.uniform1f(ne.uWidth,re),g.uniform4fv(ne.uColor,te),g.uniformMatrix4fv(ne.uMatrix,!1,a),g.uniform4f(ne.uCanvasColor,w,C,M,1),g.uniform1fv(ne.uMaskBounds,b),g.uniform1f(ne.uMaskOpacity,m),g.bindBuffer(g.ARRAY_BUFFER,Ve),g.bufferData(g.ARRAY_BUFFER,Ee,g.STATIC_DRAW),g.vertexAttribPointer(ne.aPosition,2,g.FLOAT,!1,de,0),g.vertexAttribPointer(ne.aNormal,2,g.FLOAT,!1,de,ot),g.vertexAttribPointer(ne.aMiter,1,g.FLOAT,!1,de,Te),g.drawArrays(g.TRIANGLE_STRIP,0,Ee.length/5),g.disableVertexAttribArray(ne.aPosition),g.disableVertexAttribArray(ne.aNormal),g.disableVertexAttribArray(ne.aMiter)},Y=nl(g,my,gy,["aPosition"],["uColor","uCanvasColor","uMatrix","uMaskBounds","uMaskOpacity"]),ue=g.createBuffer(),be=(K,re)=>{let{program:te,locations:pe}=Y;return g.useProgram(te),g.enableVertexAttribArray(pe.aPosition),g.uniform4fv(pe.uColor,re),g.uniformMatrix4fv(pe.uMatrix,!1,a),g.uniform1fv(pe.uMaskBounds,b),g.uniform1f(pe.uMaskOpacity,m),g.uniform4f(pe.uCanvasColor,w,C,M,1),g.bindBuffer(g.ARRAY_BUFFER,ue),g.bufferData(g.ARRAY_BUFFER,K,g.STATIC_DRAW),g.vertexAttribPointer(pe.aPosition,2,g.FLOAT,!1,0,0),g.drawArrays(g.TRIANGLE_STRIP,0,K.length/2),g.disableVertexAttribArray(pe.aPosition),K},ae=nl(g,uy,fy,["aPosition","aTexCoord","aRectCoord"],["uTexture","uColor","uMatrix","uCanvasColor","uTextureColor","uTextureOpacity","uPosition","uSize","uMaskBounds","uMaskOpacity","uMaskFeather","uCornerRadius","uInverted"]),rt=g.createBuffer(),V=g.createBuffer(),ye=g.createBuffer(),L=(K,re,te,pe,Le,ne=O,Ee=1,de=Ia,ot=ol,Te=y,me)=>{let{program:Ne,locations:_e}=ae;return g.useProgram(Ne),g.enableVertexAttribArray(_e.aPosition),g.enableVertexAttribArray(_e.aTexCoord),g.enableVertexAttribArray(_e.aRectCoord),g.uniform4fv(_e.uColor,Le),g.uniform2fv(_e.uSize,[re,te]),g.uniform2fv(_e.uPosition,[K[2],K[3]]),g.uniform1i(_e.uInverted,me?1:0),g.uniform1fv(_e.uCornerRadius,pe),g.uniform4f(_e.uCanvasColor,w,C,M,1),g.uniform1fv(_e.uMaskFeather,Te.map((Qe,_t)=>_t%2==0?Qe:Qe*r)),g.uniform1fv(_e.uMaskBounds,b),g.uniform1f(_e.uMaskOpacity,m),g.uniformMatrix4fv(_e.uMatrix,!1,a),g.uniform1i(_e.uTexture,Ma),g.uniform4fv(_e.uTextureColor,de),g.uniform1f(_e.uTextureOpacity,Ee),g.activeTexture(g.TEXTURE0+Ma),g.bindTexture(g.TEXTURE_2D,ne),g.bindBuffer(g.ARRAY_BUFFER,V),g.bufferData(g.ARRAY_BUFFER,ot,g.STATIC_DRAW),g.vertexAttribPointer(_e.aTexCoord,2,g.FLOAT,!1,0,0),g.bindBuffer(g.ARRAY_BUFFER,ye),g.bufferData(g.ARRAY_BUFFER,ol,g.STATIC_DRAW),g.vertexAttribPointer(_e.aRectCoord,2,g.FLOAT,!1,0,0),g.bindBuffer(g.ARRAY_BUFFER,rt),g.bufferData(g.ARRAY_BUFFER,K,g.STATIC_DRAW),g.vertexAttribPointer(_e.aPosition,2,g.FLOAT,!1,0,0),g.drawArrays(g.TRIANGLE_STRIP,0,K.length/2),g.disableVertexAttribArray(_e.aPosition),g.disableVertexAttribArray(_e.aTexCoord),g.disableVertexAttribArray(_e.aRectCoord),K},q=nl(g,dy,hy,["aPosition","aTexCoord"],["uTexture","uTextureOpacity","uColor","uCanvasColor","uMatrix","uRadius","uInverted","uMaskBounds","uMaskOpacity"]),Me=g.createBuffer(),Be=g.createBuffer(),Se=(K,re,te,pe,Le=O,ne=ol,Ee=1,de=!1)=>{let{program:ot,locations:Te}=q;g.useProgram(ot),g.enableVertexAttribArray(Te.aPosition),g.enableVertexAttribArray(Te.aTexCoord),g.uniformMatrix4fv(Te.uMatrix,!1,a),g.uniform2fv(Te.uRadius,[re*.5,te*.5]),g.uniform1i(Te.uInverted,de?1:0),g.uniform4fv(Te.uColor,pe),g.uniform4f(Te.uCanvasColor,w,C,M,1),g.uniform1fv(Te.uMaskBounds,b),g.uniform1f(Te.uMaskOpacity,m),g.uniform1i(Te.uTexture,Ma),g.uniform1f(Te.uTextureOpacity,Ee),g.activeTexture(g.TEXTURE0+Ma),g.bindTexture(g.TEXTURE_2D,Le),g.bindBuffer(g.ARRAY_BUFFER,Be),g.bufferData(g.ARRAY_BUFFER,ne,g.STATIC_DRAW),g.vertexAttribPointer(Te.aTexCoord,2,g.FLOAT,!1,0,0),g.bindBuffer(g.ARRAY_BUFFER,Me),g.bufferData(g.ARRAY_BUFFER,K,g.STATIC_DRAW),g.vertexAttribPointer(Te.aPosition,2,g.FLOAT,!1,0,0),g.drawArrays(g.TRIANGLE_STRIP,0,K.length/2),g.disableVertexAttribArray(Te.aPosition),g.disableVertexAttribArray(Te.aTexCoord)},Ge=(K,re,te,pe,Le)=>{K.length<2||J(K.map(ne=>({x:ne.x*r,y:ne.y*r})),re*r,ji(te,Le),pe)},st=(K,re=0,te=!1,pe=!1,Le,ne)=>{if(!Le)return;let Ee=K.map(Te=>({x:Te.x*r,y:Te.y*r})),de=Pc(Ee);(te||pe)&&Zl(Ee,te,pe,de.x,de.y),jl(Ee,re,de.x,de.y);let ot=py(Ee);be(ot,ji(Le,ne))},Q=(K,re=0,te=!1,pe=!1,Le,ne,Ee,de=void 0,ot=void 0,Te=void 0,me,Ne,_e,Qe=void 0,_t,Fe)=>{let we=Us(et(K),r),yt=Le.map(wt=>Cy(wt||0,K)).map(wt=>wt*r);if(ne||Ee){let wt=et(we);wt.x-=.5,wt.y-=.5,wt.width+=1,wt.height+=1;let Ye=Vh(wt,re,te,pe),tn=Wh(Ye),Wt;_t&&(Wt=ji(_t),Wt[3]===0&&(Wt[3]=.001)),L(tn,wt.width,wt.height,yt,ji(ne,_e),Ee,_e,Wt,Te?new Float32Array(Te):Uh(wt.width,wt.height,de,ot,r),Qe,Fe)}me&&(me=Math.min(me,we.width,we.height),J(Sy(we.x,we.y,we.width,we.height,re,yt,te,pe),me*r,ji(Ne,_e),!0))},Ke=(K,re,te,pe,Le,ne,Ee,de,ot=void 0,Te=void 0,me=void 0,Ne,_e,Qe,_t)=>{let Fe=Us(Tn(K.x-re,K.y-te,re*2,te*2),r);if(Ee||de){let we=et(Fe);we.x-=.5,we.y-=.5,we.width+=1,we.height+=1;let yt=Vh(we,pe,Le,ne),wt=Wh(yt);Se(wt,we.width,we.height,ji(Ee,Qe),de,me?new Float32Array(me):Uh(we.width,we.height,ot,Te,r),Qe,_t)}Ne&&J(yy(Fe.x,Fe.y,Fe.width,Fe.height,pe,Le,ne),Ne*r,ji(_e,Qe),!0)},Je=new Map,Lt={};Lt[Pa]={width:0,height:0},Lt[Ra]={width:0,height:0};let St=4096,N=(K,re,te,pe=1)=>{let Le=Math.min(Math.min(St,o)/te.width,Math.min(St,o)/te.height,pe),ne=Math.floor(Le*te.width),Ee=Math.floor(Le*te.height);Gl(te,Lt[K])?g.bindFramebuffer(g.FRAMEBUFFER,re):(g.bindTexture(g.TEXTURE_2D,R.get(K)),g.texImage2D(g.TEXTURE_2D,0,g.RGBA,ne,Ee,0,g.RGBA,g.UNSIGNED_BYTE,null),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MIN_FILTER,g.LINEAR),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_S,g.CLAMP_TO_EDGE),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_T,g.CLAMP_TO_EDGE),g.bindFramebuffer(g.FRAMEBUFFER,re),g.framebufferTexture2D(g.FRAMEBUFFER,g.COLOR_ATTACHMENT0,g.TEXTURE_2D,R.get(K),0),Lt[K]=te);let de=te.width*r,ot=te.height*r;gu(l,0,de,ot,0,-1,1),Gi(l,0,ot,0),oy(l,1),iy(l,-1),a=l,g.viewport(0,0,ne,Ee),g.colorMask(!0,!0,!0,!0),g.clearColor(0,0,0,0),g.clear(g.COLOR_BUFFER_BIT),y=[1,0,1,0,1,Math.max(t.width,te.width),1,Math.max(t.width,te.width)]},De=(K,re=!1)=>{let{src:te}=Je.get(K);te instanceof HTMLCanvasElement&&!re&&!te.dataset.retain&&rn(te),Je.delete(K),g.deleteTexture(K)},X=()=>{gu(s,0,t.width,t.height,0,-1,1)};return{drawPath:Ge,drawTriangle:st,drawRect:Q,drawEllipse:Ke,drawImage:ve,textureFilterNearest:g.NEAREST,textureFilterLinear:g.LINEAR,textureCreate:()=>g.createTexture(),textureUpdate:(K,re,te)=>(Je.set(K,{src:re,options:te}),ty(g,K,re,te)),textureGetSize:K=>{let{src:re,options:te}=Je.get(K),pe=Bo(re);return te.scalar?Wr(pe,Le=>Le/te.scalar):pe},textureDelete:De,enablePreviewStencil:T,applyPreviewStencil:P,disablePreviewStencil:D,setCanvasColor(K){w=K[0],C=K[1],M=K[2],g.clear(g.COLOR_BUFFER_BIT)},resetCanvasMatrix:X,updateCanvasMatrix(K,re,te,pe,Le){let ne=K.width,Ee=K.height,de=t.width*(.5/r),ot=t.height*(.5/r),Te={x:de+(te.x+re.x),y:ot+(te.y+re.y)},me={x:Te.x-re.x,y:Te.y-re.y},Ne={x:ne*.5,y:Ee*.5};xr(me,Le.z,Te),Zg(me,pe,Te);let _e={x:me.x-Ne.x,y:me.y-Ne.y};Gi(s,_e.x*r,_e.y*r,0),Gi(s,Ne.x*r,Ne.y*r,0),Dh(s,Le.z);let Qe=Le.x>Math.PI/2;Oh(s,Qe?Math.PI:0);let _t=Le.y>Math.PI/2;Bh(s,_t?Math.PI:0),xh(s,pe),Gi(s,-Ne.x*r,-Ne.y*r,0)},drawToCanvas(){g.bindFramebuffer(g.FRAMEBUFFER,null),a=s,g.viewport(0,0,g.drawingBufferWidth,g.drawingBufferHeight),g.colorMask(!0,!0,!0,!1),g.clearColor(w,C,M,1),g.clear(g.COLOR_BUFFER_BIT),y=[1,0,1,0,1,t.width,1,t.width]},drawToImageBlendBuffer(K,re){N(Ra,z,K,re)},drawToImageOverlayBuffer(K,re){N(Pa,v,K,re)},enableMask(K,re){let te=K.x*r,pe=K.y*r,Le=K.width*r,ne=K.height*r;h=te,u=h+Le,c=t.height-pe,f=t.height-(pe+ne),m=1-re,b=[c,u,f,h]},disableMask(){h=0,u=t.width,c=t.height,f=0,m=1,b=[c,u,f,h]},resize:k,release(){Array.from(Je.keys()).forEach(re=>De(re,!0)),Je.clear(),R.forEach(re=>{g.deleteTexture(re)}),R.clear(),B.destroy(),Oe.destroy(),Y.destroy(),ae.destroy(),q.destroy(),e.width=1,e.height=1,e=void 0}}},Ry=e=>"close"in e;function Py(e){let t,n,o,i;return{c(){t=$("div"),n=$("canvas"),S(t,"class","PinturaCanvas")},m(r,s){U(r,t,s),ie(t,n),e[27](n),o||(i=[le(n,"measure",e[28]),vt(Ln.call(null,n))],o=!0)},p:tt,i:tt,o:tt,d(r){r&&H(t),e[27](null),o=!1,Et(i)}}}function My(e,t,n){let o,i,r,s,l,a,c,u=(N,De)=>{let[X,K,re]=N,[te,pe,Le,ne]=De;return[te*ne+X*(1-ne),pe*ne+K*(1-ne),Le*ne+re*(1-ne),1]},f=mo(),{animate:h}=t,{maskRect:m}=t,{maskOpacity:b=1}=t,{maskFrameOpacity:p=.95}=t,{pixelRatio:y=1}=t,{textPixelRatio:w=y}=t,{backgroundColor:C}=t,{willRender:M=Ft}=t,{didRender:R=Ft}=t,{willRequestResource:k=()=>!0}=t,{loadImageData:T=Ft}=t,{images:P=[]}=t,{interfaceImages:D=[]}=t,x,A=null,g=null,O=null,j=(N,De)=>N.set(De,{hard:!h}),G={precision:{precision:1e-4}.precision*.01},z=su(void 0,{duration:250});W(e,z,N=>n(23,r=N));let B=qe(1,G);W(e,B,N=>n(24,s=N));let ee=qe(1,G);W(e,ee,N=>n(38,c=N));let ge=We();W(e,ge,N=>n(36,l=N));let ve=We();W(e,ve,N=>n(37,a=N));let Oe=()=>requestAnimationFrame(()=>{L=!0,i()}),Ve=new Map([]),J=new Map([]),Y=(N,De)=>{if(!Ve.has(N)){Ve.set(N,N);let X=De==="pixelated"?A.textureFilterNearest:A.textureFilterLinear;if(!Ht(N)&&(Ry(N)||Hl(N)||la(N))){let K=A.textureCreate();A.textureUpdate(K,N,{filter:X}),Ve.set(N,K)}else T(N).then(K=>{let re=A.textureCreate();A.textureUpdate(re,K,{filter:X}),Ve.set(N,re),Oe()}).catch(K=>{console.error(K)})}return Ve.get(N)},ue=N=>{if(!N.text.length){J.delete(N.id);return}let{text:De,textAlign:X,fontFamily:K,fontSize:re,fontWeight:te,fontVariant:pe,fontStyle:Le,lineHeight:ne,width:Ee,height:de}=N,{lastCharPosition:ot,textSize:Te}=Vb(De,N),me=vc({text:De,textAlign:X,fontFamily:K,fontSize:re,fontWeight:te,fontVariant:pe,fontStyle:Le,lineHeight:ne,height:de?Math.min(ot.y,Math.ceil(de/ne)*ne):"auto",xOffset:ot.x,yOffset:ot.y});if(!Ve.has(me)){Ve.set(me,De);let _e=Ee&&Math.round(Ee),Qe=de&&Math.round(de),_t=Math.ceil(Te.width),Fe=Math.ceil(Te.height/ne)*ne;if(_t===0||Fe===0)return;let we=bu(),yt=Math.min(1,(we-Ur*w*2)/(_t*w),we/(Fe*w));Rd(De,{fontSize:re,fontFamily:K,fontWeight:te,fontVariant:pe,fontStyle:Le,textAlign:X,lineHeight:ne,width:_e,height:Qe,imageWidth:_t,imageHeight:Fe,pixelRatio:w*yt,willRequestResource:k,color:[1,0,1]}).then(wt=>{let Ye=A.textureCreate();A.textureUpdate(Ye,wt,{filter:A.textureFilterLinear,scalar:yt}),Ve.set(me,Ye),J.set(N.id,Ye),Oe()}).catch(console.error)}let Ne=Ve.get(me);return He(Ne)?Ne:J.get(N.id)},be=N=>{let De;if(N.backgroundImage)De=Y(N.backgroundImage,N.backgroundImageRendering);else if(Ht(N.text)){if(N.width&&N.width<1||N.height&&N.height<1)return;De=ue(N)}return De},He=N=>N instanceof WebGLTexture,ft=N=>{Ve.forEach((De,X)=>{!!N.find(re=>re===De)||!He(De)||Array.from(J.values()).includes(De)||(Ve.delete(X),A.textureDelete(De))})},ae=({data:N,size:De,origin:X,translation:K,rotation:re,scale:te,colorMatrix:pe,opacity:Le,convolutionMatrix:ne,gamma:Ee,vignette:de,maskFeather:ot,maskCornerRadius:Te,backgroundColor:me,overlayColor:Ne,enableOverlay:_e,enableBlend:Qe})=>{me&&me[3]<1&&me[3]>0&&(me=u(r,me));let _t=Y(N);return A.drawImage(_t,De,X.x,X.y,K.x,K.y,re.x,re.y,re.z,te,pe,Mt(Le,0,1),ne,Ee,de,ot,Te,me,Ne,_e,Qe),_t},rt=([N,De,X,K])=>[K.x,K.y,N.x,N.y,X.x,X.y,De.x,De.y],V=Kt(),ye=(N=[],De)=>N.map(X=>{let K=!X._isLoading&&be(X),re=He(K)?K:void 0,te=X._scale||1,pe=X._translate||V,Le=X.strokeWidth&&X.strokeWidth*te;if(sn(X.points)){let ne=X.points.map(Ee=>oe(Ee.x*te+pe.x,Ee.y*te+pe.y));ne.length===3&&X.backgroundColor?A.drawTriangle(ne,X.rotation,X.flipX,X.flipY,X.backgroundColor,Le,X.strokeColor,X.opacity):A.drawPath(ne,Le,X.strokeColor,X.pathClose,X.opacity)}else if(ut(X.rx)&&ut(X.ry)){let ne=X.x,Ee=X.y;ne*=te,Ee*=te,ne+=pe.x,Ee+=pe.y,A.drawEllipse(oe(ne,Ee),X.rx*te,X.ry*te,X.rotation,X.flipX,X.flipY,X.backgroundColor,re,void 0,void 0,X.backgroundCorners&&rt(X.backgroundCorners),Le,X.strokeColor,X.opacity,X.inverted)}else if(Ht(X.text)&&re||X.width){let ne=re&&A.textureGetSize(re),Ee,de,ot=[X.cornerRadius,X.cornerRadius,X.cornerRadius,X.cornerRadius].map(Ne=>Ne*te);X.width?de=Yf(X):de={x:X.x,y:X.y,...ne},te&&pe&&(de.x*=te,de.y*=te,de.x+=pe.x,de.y+=pe.y,de.width*=te,de.height*=te);let Te,me;if(ne){if(X.backgroundImage&&X.backgroundSize){let Ne=ci(ne.width,ne.height);if(X.backgroundSize==="contain"){let _e=En(de,Ne,de);Te=fi(_e),me=oe((de.width-Te.width)*.5,(de.height-Te.height)*.5)}else if(X.backgroundSize==="cover"){let _e=Kl(de,Ne,de);Te=fi(_e),me=oe(_e.x,_e.y),me=oe((de.width-Te.width)*.5,(de.height-Te.height)*.5)}else Te=X.backgroundSize,me=X.backgroundPosition}else if(X.text){let Ne={width:ne.width/w,height:ne.height/w};me=oe(0,0),Te={width:Ne.width*te,height:Ne.height*te},X.backgroundColor&&A.drawRect({...de,height:de.height||ne.height*te},X.rotation,X.flipX,X.flipY,ot,X.backgroundColor,void 0,void 0,void 0,void 0,Le,X.strokeColor,X.opacity,void 0,void 0,X.inverted),X.backgroundColor=void 0,de.x-=Ur*te,Ee=X.color,X.width?(de.height=de.height||Ne.height*te,de.width+=Ur*2*te,X.textAlign==="center"?me.x=(de.width-Te.width)*.5:X.textAlign==="right"&&(me.x=de.width-Te.width)):(de.width=Ne.width*te,de.height=Ne.height*te),X._prerender&&(Ee[3]=0)}}A.drawRect(de,X.rotation,X.flipX,X.flipY,ot,X.backgroundColor,re,Te,me,X.backgroundCorners&&rt(X.backgroundCorners),Le,X.strokeColor,X.opacity,void 0,Ee,X.inverted)}return K}).filter(Boolean),L=!1,q=!0,Me=!1,Be=[],Se=[],Ge=[],st=()=>{Ge.length=0;let N=P[0],{blendShapes:De,blendShapesDirty:X,annotationShapes:K,annotationShapesDirty:re,interfaceShapes:te,decorationShapes:pe,frameShapes:Le}=M({opacity:N.opacity,rotation:N.rotation,scale:N.scale,images:P,size:Cn(g,O),backgroundColor:[...r],selectionRect:l}),ne=[...r],Ee=l,de=Mt(s,0,1),ot=a,Te=Math.abs(-1+N.rotation.x/Math.PI*2),me=Math.abs(-1+N.rotation.y/Math.PI*2),Ne=Te<.99||me<.99,_e=N.size,Qe=N.backgroundColor,_t=De.length>0,Fe=K.length>0,we=Qe[3]>0;if(de<1&&we){let Ye=ne[0],tn=ne[1],Wt=ne[2],dn=1-de,Un=Qe[0]*dn,Gt=Qe[1]*dn,hn=Qe[2]*dn,Fn=1-dn;ne[0]=Un+Ye*Fn,ne[1]=Gt+tn*Fn,ne[2]=hn+Wt*Fn,ne[3]=1}if(A.setCanvasColor(ne),_t&&X?(A.disableMask(),A.drawToImageBlendBuffer(_e),Be.length=0,Be.push(...ye(De))):_t||(Be.length=0),Ge.push(...Be),q&&(A.drawToImageOverlayBuffer(_e,w),q=!1),Ne?(Fe&&(re||L)||!Me?(A.disableMask(),A.drawToImageOverlayBuffer(_e,w),Se.length=0,Se.push(...ye(K))):Fe||(Se.length=0),Me=!0):Me=!1,A.drawToCanvas(),A.enableMask(Ee,de),we&&A.drawRect(Ee,0,!1,!1,[0,0,0,0],u(r,Qe)),A.enablePreviewStencil(),Ge.push(...[...P].reverse().map(Ye=>ae({...Ye,enableOverlay:Ne&&Fe,enableBlend:_t,mask:Ee,maskOpacity:de,overlayColor:ot}))),Ne||(A.applyPreviewStencil(),A.resetCanvasMatrix(),A.updateCanvasMatrix(_e,N.origin,N.translation,N.scale,N.rotation),Se.length=0,Se.push(...ye(K)),A.disablePreviewStencil()),Ge.push(...Se),A.resetCanvasMatrix(),A.enableMask(Ee,1),Ge.push(...ye(pe)),Le.length){let Ye=Le.filter(Wt=>!Wt.expandsCanvas),tn=Le.filter(Wt=>Wt.expandsCanvas);Ye.length&&Ge.push(...ye(Ye)),tn.length&&(A.enableMask({x:Ee.x+.5,y:Ee.y+.5,width:Ee.width-1,height:Ee.height-1},c),Ge.push(...ye(tn)))}A.disableMask(),Ge.push(...ye(te)),D.forEach(Ye=>{A.enableMask(Ye.mask,Ye.maskOpacity),Ye.backgroundColor&&A.drawRect(Ye.mask,0,!1,!1,Ye.maskCornerRadius,Ye.backgroundColor,void 0,void 0,void 0,void 0,void 0,Ye.opacity,Ye.maskFeather),ae({...Ye,translation:{x:Ye.translation.x+Ye.offset.x-g*.5,y:Ye.translation.y+Ye.offset.y-O*.5}})}),A.disableMask(),ft(Ge),R(),L=!1},Q=Date.now(),Ke=()=>{let N=Date.now();N-Q<48||(Q=N,st())},Je=()=>du()?Ke:st;nh(()=>i()),fa(()=>n(22,A=Ty(x))),Vo(()=>{!A||(A.release(),n(22,A=void 0),n(2,x=void 0))});function Lt(N){Bt[N?"unshift":"push"](()=>{x=N,n(2,x)})}let St=N=>{n(0,g=N.detail.width),n(1,O=N.detail.height),f("measure",{width:g,height:O})};return e.$$set=N=>{"animate"in N&&n(9,h=N.animate),"maskRect"in N&&n(10,m=N.maskRect),"maskOpacity"in N&&n(11,b=N.maskOpacity),"maskFrameOpacity"in N&&n(12,p=N.maskFrameOpacity),"pixelRatio"in N&&n(13,y=N.pixelRatio),"textPixelRatio"in N&&n(14,w=N.textPixelRatio),"backgroundColor"in N&&n(15,C=N.backgroundColor),"willRender"in N&&n(16,M=N.willRender),"didRender"in N&&n(17,R=N.didRender),"willRequestResource"in N&&n(18,k=N.willRequestResource),"loadImageData"in N&&n(19,T=N.loadImageData),"images"in N&&n(20,P=N.images),"interfaceImages"in N&&n(21,D=N.interfaceImages)},e.$$.update=()=>{e.$$.dirty[0]&32768&&C&&j(z,C),e.$$.dirty[0]&2048&&j(B,ut(b)?b:1),e.$$.dirty[0]&4096&&j(ee,ut(p)?p:1),e.$$.dirty[0]&1024&&m&&ge.set(m),e.$$.dirty[0]&25165824&&r&&ve.set([r[0],r[1],r[2],Mt(s,0,1)]),e.$$.dirty[0]&5242883&&n(26,o=!!(A&&g&&O&&P.length)),e.$$.dirty[0]&4202499&&g&&O&&A&&A.resize(g,O,y),e.$$.dirty[0]&67108864&&n(25,i=o?Je():ct),e.$$.dirty[0]&100663296&&o&&i&&i()},[g,O,x,f,z,B,ee,ge,ve,h,m,b,p,y,w,C,M,R,k,T,P,D,A,r,s,i,o,Lt,St]}var Zh=class extends bt{constructor(t){super();pt(this,t,My,Py,gt,{animate:9,maskRect:10,maskOpacity:11,maskFrameOpacity:12,pixelRatio:13,textPixelRatio:14,backgroundColor:15,willRender:16,didRender:17,willRequestResource:18,loadImageData:19,images:20,interfaceImages:21},[-1,-1])}},ze=(e,t=Boolean,n=" ")=>e.filter(t).join(n);function jh(e,t,n){let o=e.slice();return o[17]=t[n],o}var Iy=e=>({tab:e&4}),Gh=e=>({tab:e[17]});function Xh(e){let t,n=[],o=new Map,i,r,s=e[2],l=a=>a[17].id;for(let a=0;a<s.length;a+=1){let c=jh(e,s,a),u=l(c);o.set(u,n[a]=Yh(u,c))}return{c(){t=$("ul");for(let a=0;a<n.length;a+=1)n[a].c();S(t,"class",i=ze(["PinturaTabList",e[0]])),S(t,"role","tablist"),S(t,"data-layout",e[1])},m(a,c){U(a,t,c);for(let u=0;u<n.length;u+=1)n[u].m(t,null);e[14](t),r=!0},p(a,c){c&1124&&(s=a[2],Ze(),n=Jr(n,c,l,1,a,s,o,t,Js,Yh,null,jh),je()),(!r||c&1&&i!==(i=ze(["PinturaTabList",a[0]])))&&S(t,"class",i),(!r||c&2)&&S(t,"data-layout",a[1])},i(a){if(!r){for(let c=0;c<s.length;c+=1)I(n[c]);r=!0}},o(a){for(let c=0;c<n.length;c+=1)F(n[c]);r=!1},d(a){a&&H(t);for(let c=0;c<n.length;c+=1)n[c].d();e[14](null)}}}function Yh(e,t){let n,o,i,r,s,l,a,c,u,f,h=t[11].default,m=Nt(h,t,t[10],Gh);function b(...y){return t[12](t[17],...y)}function p(...y){return t[13](t[17],...y)}return{key:e,first:null,c(){n=$("li"),o=$("button"),m&&m.c(),r=xe(),o.disabled=i=t[17].disabled,S(n,"role","tab"),S(n,"aria-controls",s=t[17].href.substr(1)),S(n,"id",l=t[17].tabId),S(n,"aria-selected",a=t[17].selected),this.first=n},m(y,w){U(y,n,w),ie(n,o),m&&m.m(o,null),ie(n,r),c=!0,u||(f=[le(o,"keydown",b),le(o,"click",p)],u=!0)},p(y,w){t=y,m&&m.p&&w&1028&&Ut(m,h,t,t[10],w,Iy,Gh),(!c||w&4&&i!==(i=t[17].disabled))&&(o.disabled=i),(!c||w&4&&s!==(s=t[17].href.substr(1)))&&S(n,"aria-controls",s),(!c||w&4&&l!==(l=t[17].tabId))&&S(n,"id",l),(!c||w&4&&a!==(a=t[17].selected))&&S(n,"aria-selected",a)},i(y){c||(I(m,y),c=!0)},o(y){F(m,y),c=!1},d(y){y&&H(n),m&&m.d(y),u=!1,Et(f)}}}function Ay(e){let t,n,o=e[4]&&Xh(e);return{c(){o&&o.c(),t=en()},m(i,r){o&&o.m(i,r),U(i,t,r),n=!0},p(i,[r]){i[4]?o?(o.p(i,r),r&16&&I(o,1)):(o=Xh(i),o.c(),I(o,1),o.m(t.parentNode,t)):o&&(Ze(),F(o,1,1,()=>{o=null}),je())},i(i){n||(I(o),n=!0)},o(i){F(o),n=!1},d(i){o&&o.d(i),i&&H(t)}}}function Ey(e,t,n){let o,i,{$$slots:r={},$$scope:s}=t,l,{class:a=void 0}=t,{name:c}=t,{selected:u}=t,{tabs:f=[]}=t,{layout:h=void 0}=t,m=mo(),b=R=>{let k=l.querySelectorAll('[role="tab"] button')[R];!k||k.focus()},p=(R,k)=>{R.preventDefault(),R.stopPropagation(),m("select",k)},y=({key:R},k)=>{if(!/arrow/i.test(R))return;let T=f.findIndex(P=>P.id===k);if(/right|down/i.test(R))return b(T<f.length-1?T+1:0);if(/left|up/i.test(R))return b(T>0?T-1:f.length-1)},w=(R,k)=>y(k,R.id),C=(R,k)=>p(k,R.id);function M(R){Bt[R?"unshift":"push"](()=>{l=R,n(3,l)})}return e.$$set=R=>{"class"in R&&n(0,a=R.class),"name"in R&&n(7,c=R.name),"selected"in R&&n(8,u=R.selected),"tabs"in R&&n(9,f=R.tabs),"layout"in R&&n(1,h=R.layout),"$$scope"in R&&n(10,s=R.$$scope)},e.$$.update=()=>{e.$$.dirty&896&&n(2,o=f.map(R=>{let k=R.id===u;return{...R,tabId:`tab-${c}-${R.id}`,href:`#panel-${c}-${R.id}`,selected:k}})),e.$$.dirty&4&&n(4,i=o.length>1)},[a,h,o,l,i,p,y,c,u,f,s,r,w,C,M]}var Su=class extends bt{constructor(t){super();pt(this,t,Ey,Ay,gt,{class:0,name:7,selected:8,tabs:9,layout:1})}},vy=e=>({panel:e&16}),qh=e=>({panel:e[4][0].id,panelIsActive:!0});function Kh(e,t,n){let o=e.slice();return o[14]=t[n].id,o[15]=t[n].shouldDraw,o[16]=t[n].panelId,o[17]=t[n].tabindex,o[18]=t[n].labelledBy,o[19]=t[n].isActive,o[20]=t[n].hidden,o[3]=t[n].visible,o}var Ly=e=>({panel:e&16,panelIsActive:e&16}),Jh=e=>({panel:e[14],panelIsActive:e[19]});function Fy(e){let t,n,o,i,r,s,l=e[11].default,a=Nt(l,e,e[10],qh);return{c(){t=$("div"),n=$("div"),a&&a.c(),S(n,"class",o=ze([e[1]])),S(t,"class",e[0]),S(t,"style",e[2])},m(c,u){U(c,t,u),ie(t,n),a&&a.m(n,null),i=!0,r||(s=[le(t,"measure",e[13]),vt(Ln.call(null,t))],r=!0)},p(c,u){a&&a.p&&u&1040&&Ut(a,l,c,c[10],u,vy,qh),(!i||u&2&&o!==(o=ze([c[1]])))&&S(n,"class",o),(!i||u&1)&&S(t,"class",c[0]),(!i||u&4)&&S(t,"style",c[2])},i(c){i||(I(a,c),i=!0)},o(c){F(a,c),i=!1},d(c){c&&H(t),a&&a.d(c),r=!1,Et(s)}}}function xy(e){let t,n=[],o=new Map,i,r,s,l,a=e[4],c=u=>u[14];for(let u=0;u<a.length;u+=1){let f=Kh(e,a,u),h=c(f);o.set(h,n[u]=$h(h,f))}return{c(){t=$("div");for(let u=0;u<n.length;u+=1)n[u].c();S(t,"class",i=ze(["PinturaTabPanels",e[0]])),S(t,"style",e[2])},m(u,f){U(u,t,f);for(let h=0;h<n.length;h+=1)n[h].m(t,null);r=!0,s||(l=[le(t,"measure",e[12]),vt(Ln.call(null,t,{observePosition:!0}))],s=!0)},p(u,f){f&1042&&(a=u[4],Ze(),n=Jr(n,f,c,1,u,a,o,t,Js,$h,null,Kh),je()),(!r||f&1&&i!==(i=ze(["PinturaTabPanels",u[0]])))&&S(t,"class",i),(!r||f&4)&&S(t,"style",u[2])},i(u){if(!r){for(let f=0;f<a.length;f+=1)I(n[f]);r=!0}},o(u){for(let f=0;f<n.length;f+=1)F(n[f]);r=!1},d(u){u&&H(t);for(let f=0;f<n.length;f+=1)n[f].d();s=!1,Et(l)}}}function Qh(e){let t,n=e[11].default,o=Nt(n,e,e[10],Jh);return{c(){o&&o.c()},m(i,r){o&&o.m(i,r),t=!0},p(i,r){o&&o.p&&r&1040&&Ut(o,n,i,i[10],r,Ly,Jh)},i(i){t||(I(o,i),t=!0)},o(i){F(o,i),t=!1},d(i){o&&o.d(i)}}}function $h(e,t){let n,o,i,r,s,l,a,c,u,f=t[15]&&Qh(t);return{key:e,first:null,c(){n=$("div"),f&&f.c(),o=xe(),S(n,"class",i=ze(["PinturaTabPanel",t[1]])),n.hidden=r=t[20],S(n,"id",s=t[16]),S(n,"tabindex",l=t[17]),S(n,"aria-labelledby",a=t[18]),S(n,"data-inert",c=!t[3]),this.first=n},m(h,m){U(h,n,m),f&&f.m(n,null),ie(n,o),u=!0},p(h,m){t=h,t[15]?f?(f.p(t,m),m&16&&I(f,1)):(f=Qh(t),f.c(),I(f,1),f.m(n,o)):f&&(Ze(),F(f,1,1,()=>{f=null}),je()),(!u||m&2&&i!==(i=ze(["PinturaTabPanel",t[1]])))&&S(n,"class",i),(!u||m&16&&r!==(r=t[20]))&&(n.hidden=r),(!u||m&16&&s!==(s=t[16]))&&S(n,"id",s),(!u||m&16&&l!==(l=t[17]))&&S(n,"tabindex",l),(!u||m&16&&a!==(a=t[18]))&&S(n,"aria-labelledby",a),(!u||m&16&&c!==(c=!t[3]))&&S(n,"data-inert",c)},i(h){u||(I(f),u=!0)},o(h){F(f),u=!1},d(h){h&&H(n),f&&f.d()}}}function Oy(e){let t,n,o,i,r=[xy,Fy],s=[];function l(a,c){return a[5]?0:1}return t=l(e),n=s[t]=r[t](e),{c(){n.c(),o=en()},m(a,c){s[t].m(a,c),U(a,o,c),i=!0},p(a,[c]){let u=t;t=l(a),t===u?s[t].p(a,c):(Ze(),F(s[u],1,1,()=>{s[u]=null}),je(),n=s[t],n?n.p(a,c):(n=s[t]=r[t](a),n.c()),I(n,1),n.m(o.parentNode,o))},i(a){i||(I(n),i=!0)},o(a){F(n),i=!1},d(a){s[t].d(a),a&&H(o)}}}function By(e,t,n){let o,i,{$$slots:r={},$$scope:s}=t,{class:l=void 0}=t,{name:a}=t,{selected:c}=t,{panelClass:u=void 0}=t,{panels:f=[]}=t,{visible:h=void 0}=t,{style:m=void 0}=t,b={};function p(w){qr(e,w)}function y(w){qr(e,w)}return e.$$set=w=>{"class"in w&&n(0,l=w.class),"name"in w&&n(6,a=w.name),"selected"in w&&n(7,c=w.selected),"panelClass"in w&&n(1,u=w.panelClass),"panels"in w&&n(8,f=w.panels),"visible"in w&&n(3,h=w.visible),"style"in w&&n(2,m=w.style),"$$scope"in w&&n(10,s=w.$$scope)},e.$$.update=()=>{e.$$.dirty&968&&n(4,o=f.map(w=>{let C=w===c;C&&n(9,b[w]=!0,b);let M=h?h.indexOf(w)!==-1:!0;return{id:w,panelId:`panel-${a}-${w}`,labelledBy:`tab-${a}-${w}`,isActive:C,hidden:!C,visible:M,tabindex:C?0:-1,shouldDraw:C||b[w]}})),e.$$.dirty&16&&n(5,i=o.length>1)},[l,u,m,h,o,i,a,c,f,b,s,r,p,y]}var _u=class extends bt{constructor(t){super();pt(this,t,By,Oy,gt,{class:0,name:6,selected:7,panelClass:1,panels:8,visible:3,style:2})}},wu=e=>{let t=Object.getOwnPropertyDescriptors(e.prototype);return Object.keys(t).filter(n=>!!t[n].get)};function Dy(e){let t,n,o,i,r,s=[e[7]];function l(u){e[19](u)}var a=e[11];function c(u){let f={};for(let h=0;h<s.length;h+=1)f=Jt(f,s[h]);return u[5]!==void 0&&(f.name=u[5]),{props:f}}return a&&(n=new a(c(e)),Bt.push(()=>Hi(n,"name",l)),e[20](n),n.$on("measure",e[21])),{c(){t=$("div"),n&&Pe(n.$$.fragment),S(t,"data-util",e[5]),S(t,"class",i=ze(["PinturaUtilPanel",e[2]])),S(t,"style",e[6])},m(u,f){U(u,t,f),n&&ke(n,t,null),r=!0},p(u,[f]){let h=f&128?Hn(s,[Io(u[7])]):{};if(!o&&f&32&&(o=!0,h.name=u[5],Kr(()=>o=!1)),a!==(a=u[11])){if(n){Ze();let m=n;F(m.$$.fragment,1,0,()=>{Ce(m,1)}),je()}a?(n=new a(c(u)),Bt.push(()=>Hi(n,"name",l)),u[20](n),n.$on("measure",u[21]),Pe(n.$$.fragment),I(n.$$.fragment,1),ke(n,t,null)):n=null}else a&&n.$set(h);(!r||f&32)&&S(t,"data-util",u[5]),(!r||f&4&&i!==(i=ze(["PinturaUtilPanel",u[2]])))&&S(t,"class",i),(!r||f&64)&&S(t,"style",u[6])},i(u){r||(n&&I(n.$$.fragment,u),r=!0)},o(u){n&&F(n.$$.fragment,u),r=!1},d(u){u&&H(t),e[20](null),n&&Ce(n)}}}function zy(e,t,n){let o,i,r,s,l=mo(),{isActive:a=!0}=t,{isAnimated:c=!0}=t,{stores:u}=t,{content:f}=t,{component:h}=t,{locale:m}=t,{class:b=void 0}=t,p,y=qe(0),w=Pt(y,v=>Mt(v,0,1));W(e,w,v=>n(18,r=v));let C=!a,M=We(a);W(e,M,v=>n(22,s=v));let R={isActive:Pt(M,async(v,G)=>{if(!v)return G(v);await rh(),G(v)}),isActiveFraction:Pt(w,v=>v),isVisible:Pt(w,v=>v>0)},k=f.view,T=wu(k),P=Object.keys(f.props||{}).reduce((v,G)=>(T.includes(G)&&(v[G]=f.props[G]),v),{}),D=Object.keys(R).reduce((v,G)=>(T.includes(G)&&(v[G]=R[G]),v),{}),x,A=!1;fa(()=>{n(4,A=!0)});function g(v){x=v,n(5,x)}function O(v){Bt[v?"unshift":"push"](()=>{h=v,n(0,h)})}let j=v=>{!A||!a||(n(3,p=v.detail),l("measure",{...p}))};return e.$$set=v=>{"isActive"in v&&n(1,a=v.isActive),"isAnimated"in v&&n(12,c=v.isAnimated),"stores"in v&&n(13,u=v.stores),"content"in v&&n(14,f=v.content),"component"in v&&n(0,h=v.component),"locale"in v&&n(15,m=v.locale),"class"in v&&n(2,b=v.class)},e.$$.update=()=>{e.$$.dirty&11&&p&&a&&h&&l("measure",p),e.$$.dirty&4098&&y.set(a?1:0,{hard:!c}),e.$$.dirty&393216&&(r<=0&&!C?n(17,C=!0):r>0&&C&&n(17,C=!1)),e.$$.dirty&131088&&A&&l(C?"hide":"show"),e.$$.dirty&262144&&l("fade",r),e.$$.dirty&262144&&n(6,o=r<1?`opacity: ${r}`:void 0),e.$$.dirty&2&&fe(M,s=a,s),e.$$.dirty&40960&&n(7,i={...P,...D,stores:u,locale:m})},[h,a,b,p,A,x,o,i,l,w,M,k,c,u,f,m,y,C,r,g,O,j]}var ku=class extends bt{constructor(t){super();pt(this,t,zy,Dy,gt,{isActive:1,isAnimated:12,stores:13,content:14,component:0,locale:15,class:2,opacity:16})}get opacity(){return this.$$.ctx[16]}};function Wy(e){let t,n,o,i=e[5].default,r=Nt(i,e,e[4],null);return{c(){t=Rn("svg"),r&&r.c(),S(t,"class",e[3]),S(t,"style",e[2]),S(t,"width",e[0]),S(t,"height",e[1]),S(t,"viewBox",n="0 0 "+e[0]+`
    `+e[1]),S(t,"xmlns","http://www.w3.org/2000/svg"),S(t,"aria-hidden","true"),S(t,"focusable","false"),S(t,"stroke-linecap","round"),S(t,"stroke-linejoin","round")},m(s,l){U(s,t,l),r&&r.m(t,null),o=!0},p(s,[l]){r&&r.p&&l&16&&Ut(r,i,s,s[4],l,null,null),(!o||l&8)&&S(t,"class",s[3]),(!o||l&4)&&S(t,"style",s[2]),(!o||l&1)&&S(t,"width",s[0]),(!o||l&2)&&S(t,"height",s[1]),(!o||l&3&&n!==(n="0 0 "+s[0]+`
    `+s[1]))&&S(t,"viewBox",n)},i(s){o||(I(r,s),o=!0)},o(s){F(r,s),o=!1},d(s){s&&H(t),r&&r.d(s)}}}function Vy(e,t,n){let{$$slots:o={},$$scope:i}=t,{width:r=24}=t,{height:s=24}=t,{style:l=void 0}=t,{class:a=void 0}=t;return e.$$set=c=>{"width"in c&&n(0,r=c.width),"height"in c&&n(1,s=c.height),"style"in c&&n(2,l=c.style),"class"in c&&n(3,a=c.class),"$$scope"in c&&n(4,i=c.$$scope)},[r,s,l,a,i,o]}var go=class extends bt{constructor(t){super();pt(this,t,Vy,Wy,gt,{width:0,height:1,style:2,class:3})}},e1=(e,t)=>t===e.target||t.contains(e.target);function t1(e){let t,n;return t=new go({props:{class:"PinturaButtonIcon",$$slots:{default:[Hy]},$$scope:{ctx:e}}}),{c(){Pe(t.$$.fragment)},m(o,i){ke(t,o,i),n=!0},p(o,i){let r={};i&134217730&&(r.$$scope={dirty:i,ctx:o}),t.$set(r)},i(o){n||(I(t.$$.fragment,o),n=!0)},o(o){F(t.$$.fragment,o),n=!1},d(o){Ce(t,o)}}}function Hy(e){let t;return{c(){t=Rn("g")},m(n,o){U(n,t,o),t.innerHTML=e[1]},p(n,o){o&2&&(t.innerHTML=n[1])},d(n){n&&H(t)}}}function n1(e){let t,n;return{c(){t=$("span"),n=Ot(e[0]),S(t,"class",e[12])},m(o,i){U(o,t,i),ie(t,n)},p(o,i){i&1&&Zt(n,o[0]),i&4096&&S(t,"class",o[12])},d(o){o&&H(t)}}}function Ny(e){let t,n,o,i=e[1]&&t1(e),r=e[0]&&n1(e);return{c(){t=$("span"),i&&i.c(),n=xe(),r&&r.c(),S(t,"class",e[10])},m(s,l){U(s,t,l),i&&i.m(t,null),ie(t,n),r&&r.m(t,null),o=!0},p(s,l){s[1]?i?(i.p(s,l),l&2&&I(i,1)):(i=t1(s),i.c(),I(i,1),i.m(t,n)):i&&(Ze(),F(i,1,1,()=>{i=null}),je()),s[0]?r?r.p(s,l):(r=n1(s),r.c(),r.m(t,null)):r&&(r.d(1),r=null),(!o||l&1024)&&S(t,"class",s[10])},i(s){o||(I(i),o=!0)},o(s){F(i),o=!1},d(s){s&&H(t),i&&i.d(),r&&r.d()}}}function Uy(e){let t,n,o,i,r=e[25].default,s=Nt(r,e,e[27],null),l=s||Ny(e);return{c(){t=$("button"),l&&l.c(),S(t,"type",e[4]),S(t,"style",e[2]),t.disabled=e[3],S(t,"class",e[11]),S(t,"title",e[0])},m(a,c){U(a,t,c),l&&l.m(t,null),e[26](t),n=!0,o||(i=[le(t,"keydown",function(){jt(e[6])&&e[6].apply(this,arguments)}),le(t,"click",function(){jt(e[5])&&e[5].apply(this,arguments)}),le(t,"pointerdown",function(){jt(e[9])&&e[9].apply(this,arguments)}),vt(e[7].call(null,t))],o=!0)},p(a,[c]){e=a,s?s.p&&c&134217728&&Ut(s,r,e,e[27],c,null,null):l&&l.p&&c&5123&&l.p(e,c),(!n||c&16)&&S(t,"type",e[4]),(!n||c&4)&&S(t,"style",e[2]),(!n||c&8)&&(t.disabled=e[3]),(!n||c&2048)&&S(t,"class",e[11]),(!n||c&1)&&S(t,"title",e[0])},i(a){n||(I(l,a),n=!0)},o(a){F(l,a),n=!1},d(a){a&&H(t),l&&l.d(a),e[26](null),o=!1,Et(i)}}}function Zy(e,t,n){let o,i,r,s,l,{$$slots:a={},$$scope:c}=t,{class:u=void 0}=t,{label:f=void 0}=t,{labelClass:h=void 0}=t,{innerClass:m=void 0}=t,{hideLabel:b=!1}=t,{icon:p=void 0}=t,{style:y=void 0}=t,{disabled:w=void 0}=t,{type:C="button"}=t,{onclick:M=void 0}=t,{onkeydown:R=void 0}=t,{onhold:k=void 0}=t,{action:T=()=>{}}=t,{holdThreshold:P=500}=t,{holdSpeedUpFactor:D=.5}=t,{holdSpeedMin:x=20}=t,A,g=z=>{n(23,A=setTimeout(()=>{k(),g(Math.max(z*D,x))},z))},O,j=z=>e1(z,O),v=()=>O;function G(z){Bt[z?"unshift":"push"](()=>{O=z,n(8,O)})}return e.$$set=z=>{"class"in z&&n(13,u=z.class),"label"in z&&n(0,f=z.label),"labelClass"in z&&n(14,h=z.labelClass),"innerClass"in z&&n(15,m=z.innerClass),"hideLabel"in z&&n(16,b=z.hideLabel),"icon"in z&&n(1,p=z.icon),"style"in z&&n(2,y=z.style),"disabled"in z&&n(3,w=z.disabled),"type"in z&&n(4,C=z.type),"onclick"in z&&n(5,M=z.onclick),"onkeydown"in z&&n(6,R=z.onkeydown),"onhold"in z&&n(17,k=z.onhold),"action"in z&&n(7,T=z.action),"holdThreshold"in z&&n(18,P=z.holdThreshold),"holdSpeedUpFactor"in z&&n(19,D=z.holdSpeedUpFactor),"holdSpeedMin"in z&&n(20,x=z.holdSpeedMin),"$$scope"in z&&n(27,c=z.$$scope)},e.$$.update=()=>{e.$$.dirty&25296896&&n(24,i=k?()=>{!A||(clearTimeout(A),n(23,A=void 0),document.documentElement.removeEventListener("pointerup",i))}:tt),e.$$.dirty&17170432&&n(9,o=k?()=>{document.documentElement.addEventListener("pointerup",i),g(P)}:tt),e.$$.dirty&32768&&n(10,r=ze(["PinturaButtonInner",m])),e.$$.dirty&73728&&n(11,s=ze(["PinturaButton",b&&"PinturaButtonIconOnly",u])),e.$$.dirty&81920&&n(12,l=ze([b?"implicit":"PinturaButtonLabel",h]))},[f,p,y,w,C,M,R,T,O,o,r,s,l,u,h,m,b,k,P,D,x,j,v,A,i,a,G,c]}var es=class extends bt{constructor(t){super();pt(this,t,Zy,Uy,gt,{class:13,label:0,labelClass:14,innerClass:15,hideLabel:16,icon:1,style:2,disabled:3,type:4,onclick:5,onkeydown:6,onhold:17,action:7,holdThreshold:18,holdSpeedUpFactor:19,holdSpeedMin:20,isEventTarget:21,getElement:22})}get isEventTarget(){return this.$$.ctx[21]}get getElement(){return this.$$.ctx[22]}},jy=(e,t)=>{let n=e.findIndex(t);if(n>=0)return e.splice(n,1)},Gy=.25,o1=50,Xy=80,Yy=300,qy=64,Ky=700,Jy=128,Qy=e=>ut(e.button)&&e.button!==0,Aa=(e,t={})=>{let{inertia:n=!1,shouldStartInteraction:o=()=>!0,pinch:i=!1,multiTouch:r=void 0,getEventPosition:s=J=>oe(J.clientX,J.clientY)}=t;function l(J,Y){e.dispatchEvent(new CustomEvent(J,{detail:Y}))}function a(){A&&A(),A=void 0}let c=[],u=J=>J.timeStamp===0?Date.now():J.timeStamp,f=J=>{let Y=u(J),ue={timeStamp:Y,timeStampInitial:Y,position:s(J),origin:s(J),velocity:Kt(),translation:Kt(),interactionState:void 0,event:J};c.push(ue),ue.interactionState=T(c)},h=J=>{let Y=jy(c,ue=>ue.event.pointerId===J.pointerId);if(Y)return Y[0]},m=()=>{c.length=0},b=J=>c.findIndex(Y=>Y.event.pointerId===J.pointerId),p=()=>{let J=At(c[0].position);if(c[1]){let Y=(c[1].position.x-J.x)*.5,ue=(c[1].position.y-J.y)*.5;J.x+=Y,J.y+=ue}return J},y=J=>{J.origin.x=J.position.x,J.origin.y=J.position.y,J.translation.x=0,J.translation.y=0},w=J=>{let Y=C(J);if(!Y)return;let ue=u(J),be=s(J),He=Math.max(1,ue-Y.timeStamp);Y.velocity.x=(be.x-Y.position.x)/He,Y.velocity.y=(be.y-Y.position.y)/He,Y.translation.x=be.x-Y.origin.x,Y.translation.y=be.y-Y.origin.y,Y.timeStamp=ue,Y.position.x=be.x,Y.position.y=be.y,Y.event=J},C=J=>{let Y=b(J);if(!(Y<0))return c[Y]},M=()=>c.length===1,R=()=>c.length===2,k=(J,Y)=>J.reduce((be,He)=>(be+=Bi(Y,He.position),be),0)/J.length,T=J=>{let Y=Ns(J.map(be=>be.position)),ue=k(J,Y);return{center:Y,distance:ue,velocity:Ns(J.map(be=>be.velocity)),translation:Ns(J.map(be=>be.translation))}},P,D,x,A,g,O,j,v,G=0,z;e.addEventListener("pointerdown",B);function B(J){if(!R()&&!Qy(J)&&!!o(J,e)){if(a(),f(J),M())document.documentElement.addEventListener("pointermove",ge),document.documentElement.addEventListener("pointerup",ve),document.documentElement.addEventListener("pointercancel",ve),v=!1,j=1,O=Kt(),g=void 0,l("interactionstart",{origin:At(C(J).origin)});else if(i)v=!0,g=Bi(c[0].position,c[1].position),O.x+=c[0].translation.x,O.y+=c[0].translation.y,y(c[0]);else if(r===!1)return m(),document.documentElement.removeEventListener("pointermove",ge),document.documentElement.removeEventListener("pointerup",ve),document.documentElement.removeEventListener("pointercancel",ve),l("interactioncancel")}}let ee=Date.now();function ge(J){J.preventDefault(),w(J);let Y=At(c[0].translation),ue=j;i&&R()&&(ue*=Bi(c[0].position,c[1].position)/g,Vn(Y,c[1].translation)),Y.x+=O.x,Y.y+=O.y;let be=Date.now();be-ee<16||(ee=be,l("interactionupdate",{position:p(),translation:Y,scalar:i?ue:void 0,isMultiTouching:R()}))}function ve(J){if(!C(J))return;let Y=p(),ue=h(J);i&&M()&&(j*=Bi(c[0].position,ue.position)/g,O.x+=c[0].translation.x+ue.translation.x,O.y+=c[0].translation.y+ue.translation.y,y(c[0]));let be=!1,He=!1;if(!v&&ue){let ye=performance.now(),L=ye-ue.timeStampInitial;be=Hs(ue.translation)<qy&&L<Yy,He=!!(z&&be&&ye-G<Ky&&Hs(z,ue.position)<Jy),be&&(z=At(ue.position),G=ye)}if(c.length>0)return;document.documentElement.removeEventListener("pointermove",ge),document.documentElement.removeEventListener("pointerup",ve),document.documentElement.removeEventListener("pointercancel",ve);let ft=At(ue.translation),ae=At(ue.velocity),rt=!1;l("interactionrelease",{isTap:be,isDoubleTap:He,position:Y,translation:ft,scalar:j,preventInertia:()=>rt=!0});let V=Bi(ae);if(rt||!n||V<Gy)return Ve(ft,{isTap:be,isDoubleTap:He});D=At(Y),x=At(ft),P=su(At(ft),{easing:v2,duration:V*Xy}),P.set({x:ft.x+ae.x*o1,y:ft.y+ae.y*o1}).then(()=>{!A||Ve(Wo(P),{isTap:be,isDoubleTap:He})}),A=P.subscribe(Oe)}function Oe(J){!J||l("interactionupdate",{position:oe(D.x+(J.x-x.x),D.y+(J.y-x.y)),translation:J,scalar:i?j:void 0})}function Ve(J,Y){a(),l("interactionend",{...Y,translation:J,scalar:i?j:void 0})}return{destroy(){a(),e.removeEventListener("pointerdown",B)}}},il=(e,t={})=>{let{direction:n=void 0,shiftMultiplier:o=10,bubbles:i=!1,stopKeydownPropagation:r=!0}=t,s=n==="horizontal",l=n==="vertical",a=c=>{let{key:u}=c,f=c.shiftKey,h=/up|down/i.test(u),m=/left|right/i.test(u);if(!m&&!h||s&&h||l&&m)return;let b=f?o:1;r&&c.stopPropagation(),e.dispatchEvent(new CustomEvent("nudge",{bubbles:i,detail:oe((/left/i.test(u)?-1:/right/i.test(u)?1:0)*b,(/up/i.test(u)?-1:/down/i.test(u)?1:0)*b)}))};return e.addEventListener("keydown",a),{destroy(){e.removeEventListener("keydown",a)}}};function ts(e,t){return t*Math.sign(e)*Math.log10(1+Math.abs(e)/t)}var i1=(e,t,n)=>{if(!t)return et(e);let o=e.x+ts(t.x-e.x,n),i=e.x+e.width+ts(t.x+t.width-(e.x+e.width),n),r=e.y+ts(t.y-e.y,n),s=e.y+e.height+ts(t.y+t.height-(e.y+e.height),n);return{x:o,y:r,width:i-o,height:s-r}},$y=(e,t)=>{if(!!e){if(/em/.test(e))return parseInt(e,10)*16;if(/px/.test(e))return parseInt(e,10)}},Cu=e=>{let t=e.detail||0,{deltaX:n,deltaY:o,wheelDelta:i,wheelDeltaX:r,wheelDeltaY:s}=e;return ut(r)&&Math.abs(r)>Math.abs(s)?t=r/-120:ut(n)&&Math.abs(n)>Math.abs(o)?t=n/20:(i||s)&&(t=(i||s)/-120),t||(t=o/20),t},r1={Up:38,Down:40,Left:37,Right:39};function eS(e){let t,n,o,i,r,s,l,a=e[37].default,c=Nt(a,e,e[36],null);return{c(){t=$("div"),n=$("div"),c&&c.c(),S(n,"style",e[6]),S(t,"class",o=ze(["PinturaScrollable",e[0]])),S(t,"style",e[4]),S(t,"data-direction",e[1]),S(t,"data-state",e[5])},m(u,f){U(u,t,f),ie(t,n),c&&c.m(n,null),e[39](t),r=!0,s||(l=[le(n,"interactionstart",e[9]),le(n,"interactionupdate",e[11]),le(n,"interactionend",e[12]),le(n,"interactionrelease",e[10]),vt(Aa.call(null,n,{inertia:!0})),le(n,"measure",e[38]),vt(Ln.call(null,n)),le(t,"wheel",e[14],{passive:!1}),le(t,"scroll",e[16]),le(t,"focusin",e[15]),le(t,"nudge",e[17]),le(t,"measure",e[13]),vt(Ln.call(null,t,{observePosition:!0})),vt(i=il.call(null,t,{direction:e[1]==="x"?"horizontal":"vertical",stopKeydownPropagation:!1}))],s=!0)},p(u,f){c&&c.p&&f[1]&32&&Ut(c,a,u,u[36],f,null,null),(!r||f[0]&64)&&S(n,"style",u[6]),(!r||f[0]&1&&o!==(o=ze(["PinturaScrollable",u[0]])))&&S(t,"class",o),(!r||f[0]&16)&&S(t,"style",u[4]),(!r||f[0]&2)&&S(t,"data-direction",u[1]),(!r||f[0]&32)&&S(t,"data-state",u[5]),i&&jt(i.update)&&f[0]&2&&i.update.call(null,{direction:u[1]==="x"?"horizontal":"vertical",stopKeydownPropagation:!1})},i(u){r||(I(c,u),r=!0)},o(u){F(c,u),r=!1},d(u){u&&H(t),c&&c.d(u),e[39](null),s=!1,Et(l)}}}function tS(e,t,n){let o,i,r,s,l,a,c,u,f,{$$slots:h={},$$scope:m}=t,b=mo(),p=Object.values(r1),y=Ys("keysPressed");W(e,y,Q=>n(46,f=Q));let w="idle",C,M,R,k,T=qe(0);W(e,T,Q=>n(34,u=Q));let{class:P=void 0}=t,{scrollBlockInteractionDist:D=5}=t,{scrollStep:x=10}=t,{scrollFocusMargin:A=64}=t,{scrollDirection:g="x"}=t,{scrollAutoCancel:O=!1}=t,{elasticity:j=0}=t,{onscroll:v=ct}=t,{maskFeatherSize:G=void 0}=t,{maskFeatherStartOpacity:z=void 0}=t,{maskFeatherEndOpacity:B=void 0}=t,{scroll:ee=void 0}=t,ge,ve="",Oe=!0,Ve=T.subscribe(Q=>{let Ke=Kt();Ke[g]=Q,v(Ke)}),J=Q=>Math.max(Math.min(0,Q),R[o]-M[o]),Y,ue,be,He=Q=>{let Ke=Br(oe(Q.x-be.x,Q.y-be.y),Math.abs);be=At(Q);let Je=Hs(Ke),Lt=Ke.x-Ke.y;return!(Je>1&&Lt<-.5)},ft=()=>{!l||(ue=!1,Y=!0,be=oe(0,0),k=!1,n(28,w="idle"),C=Wo(T))},ae=({detail:Q})=>{!l||(k=!0,n(28,w="idle"))},rt=({detail:Q})=>{if(!!l&&!ue&&!(Y&&(Y=!1,Hs(Q.translation)<.1))){if(O&&g==="x"&&!He(Q.translation)){ue=!0;return}L(C+Q.translation[g],{elastic:!0})}},V=({detail:Q})=>{if(!l||ue)return;let Ke=C+Q.translation[g],Je=J(Ke);Oe=!1,T.set(Je).then(Lt=>{!k||(Oe=!0)})},ye=({detail:Q})=>{n(29,R=Q),b("measure",{x:Q.x,y:Q.y,width:Q.width,height:Q.height})},L=(Q,Ke={})=>{let{elastic:Je=!1,animate:Lt=!1}=Ke;Math.abs(Q)>D&&w==="idle"&&!k&&n(28,w="scrolling");let St=J(Q),N=Je&&j&&!k?St+ts(Q-St,j):St,De=!0;Lt?De=!1:Oe||(De=!k),Oe=!1,T.set(N,{hard:De}).then(X=>{!k||(Oe=!0)})},q=Q=>{if(!l)return;Q.preventDefault(),Q.stopPropagation();let Ke=Cu(Q),Je=Wo(T);L(Je+Ke*x,{animate:!0})},Me=Q=>{if(!l||!k||f.some(X=>p.includes(X)))return;let Ke=Q.target;Q.target.classList.contains("implicit")&&(Ke=Ke.parentNode);let Je=Ke[g==="x"?"offsetLeft":"offsetTop"],Lt=Ke[g==="x"?"offsetWidth":"offsetHeight"],St=Je+Lt,N=Wo(T),De=A+G;N+Je<De?L(-Je+De):N+St>R[o]-De&&L(R[o]-St-De,{animate:!0})},Be=()=>{n(3,ge[g==="x"?"scrollLeft":"scrollTop"]=0,ge)},Se=({detail:Q})=>{let Ke=-2*Q[g],Je=Wo(T);L(Je+Ke*x,{animate:!0})};Vo(()=>{Ve()});let Ge=Q=>n(2,M=Q.detail);function st(Q){Bt[Q?"unshift":"push"](()=>{ge=Q,n(3,ge)})}return e.$$set=Q=>{"class"in Q&&n(0,P=Q.class),"scrollBlockInteractionDist"in Q&&n(21,D=Q.scrollBlockInteractionDist),"scrollStep"in Q&&n(22,x=Q.scrollStep),"scrollFocusMargin"in Q&&n(23,A=Q.scrollFocusMargin),"scrollDirection"in Q&&n(1,g=Q.scrollDirection),"scrollAutoCancel"in Q&&n(24,O=Q.scrollAutoCancel),"elasticity"in Q&&n(25,j=Q.elasticity),"onscroll"in Q&&n(26,v=Q.onscroll),"maskFeatherSize"in Q&&n(20,G=Q.maskFeatherSize),"maskFeatherStartOpacity"in Q&&n(18,z=Q.maskFeatherStartOpacity),"maskFeatherEndOpacity"in Q&&n(19,B=Q.maskFeatherEndOpacity),"scroll"in Q&&n(27,ee=Q.scroll),"$$scope"in Q&&n(36,m=Q.$$scope)},e.$$.update=()=>{if(e.$$.dirty[0]&2&&n(30,o=g==="x"?"width":"height"),e.$$.dirty[0]&2&&n(31,i=g.toUpperCase()),e.$$.dirty[0]&8&&n(32,r=ge&&getComputedStyle(ge)),e.$$.dirty[0]&8|e.$$.dirty[1]&2&&n(33,s=r&&$y(r.getPropertyValue("--scrollable-feather-size"))),e.$$.dirty[0]&1611399172|e.$$.dirty[1]&12&&u!=null&&R&&s!=null&&M){let Q=-1*u/s,Ke=-(R[o]-M[o]-u)/s;n(18,z=Mt(1-Q,0,1)),n(19,B=Mt(1-Ke,0,1)),n(20,G=s),n(4,ve=`--scrollable-feather-start-opacity: ${z};--scrollable-feather-end-opacity: ${B}`)}e.$$.dirty[0]&134217736&&ge&&ee!==void 0&&(ut(ee)?L(ee):L(ee.scrollOffset,ee)),e.$$.dirty[0]&1610612740&&n(35,l=R&&M?M[o]>R[o]:void 0),e.$$.dirty[0]&268435456|e.$$.dirty[1]&16&&n(5,a=ze([w,l?"overflows":void 0])),e.$$.dirty[1]&25&&n(6,c=l?`transform: translate${i}(${u}px)`:void 0)},[P,g,M,ge,ve,a,c,y,T,ft,ae,rt,V,ye,q,Me,Be,Se,z,B,G,D,x,A,O,j,v,ee,w,R,o,i,r,s,u,l,m,h,Ge,st]}var s1=class extends bt{constructor(t){super();pt(this,t,tS,eS,gt,{class:0,scrollBlockInteractionDist:21,scrollStep:22,scrollFocusMargin:23,scrollDirection:1,scrollAutoCancel:24,elasticity:25,onscroll:26,maskFeatherSize:20,maskFeatherStartOpacity:18,maskFeatherEndOpacity:19,scroll:27},[-1,-1])}};function l1(e,{delay:t=0,duration:n=400,easing:o=zc}={}){let i=+getComputedStyle(e).opacity;return{delay:t,duration:n,easing:o,css:r=>`opacity: ${r*i}`}}function nS(e){let t,n,o,i,r,s;return{c(){t=$("span"),n=Ot(e[0]),S(t,"class","PinturaStatusMessage")},m(l,a){U(l,t,a),ie(t,n),i=!0,r||(s=[le(t,"measure",function(){jt(e[1])&&e[1].apply(this,arguments)}),vt(Ln.call(null,t))],r=!0)},p(l,[a]){e=l,(!i||a&1)&&Zt(n,e[0])},i(l){i||(Vi(()=>{o||(o=sh(t,l1,{},!0)),o.run(1)}),i=!0)},o(l){o||(o=sh(t,l1,{},!1)),o.run(0),i=!1},d(l){l&&H(t),l&&o&&o.end(),r=!1,Et(s)}}}function oS(e,t,n){let{text:o}=t,{onmeasure:i=ct}=t;return e.$$set=r=>{"text"in r&&n(0,o=r.text),"onmeasure"in r&&n(1,i=r.onmeasure)},[o,i]}var Tu=class extends bt{constructor(t){super();pt(this,t,oS,nS,gt,{text:0,onmeasure:1})}};function iS(e){let t,n,o,i,r,s,l,a;return{c(){t=$("span"),n=Rn("svg"),o=Rn("g"),i=Rn("circle"),r=Rn("circle"),s=xe(),l=$("span"),a=Ot(e[0]),S(i,"class","PinturaProgressIndicatorBar"),S(i,"r","8.5"),S(i,"cx","10"),S(i,"cy","10"),S(i,"stroke-linecap","round"),S(i,"opacity",".25"),S(r,"class","PinturaProgressIndicatorFill"),S(r,"r","8.5"),S(r,"stroke-dasharray",e[1]),S(r,"cx","10"),S(r,"cy","10"),S(r,"transform","rotate(-90) translate(-20)"),S(o,"fill","none"),S(o,"stroke","currentColor"),S(o,"stroke-width","2.5"),S(o,"stroke-linecap","round"),S(o,"opacity",e[2]),S(n,"width","20"),S(n,"height","20"),S(n,"viewBox","0 0 20 20"),S(n,"xmlns","http://www.w3.org/2000/svg"),S(n,"aria-hidden","true"),S(n,"focusable","false"),S(l,"class","implicit"),S(t,"class","PinturaProgressIndicator"),S(t,"data-status",e[3])},m(c,u){U(c,t,u),ie(t,n),ie(n,o),ie(o,i),ie(o,r),ie(t,s),ie(t,l),ie(l,a)},p(c,[u]){u&2&&S(r,"stroke-dasharray",c[1]),u&4&&S(o,"opacity",c[2]),u&1&&Zt(a,c[0]),u&8&&S(t,"data-status",c[3])},i:tt,o:tt,d(c){c&&H(t)}}}function rS(e,t,n){let o,i,r,s,l,a=mo(),{progress:c}=t,{min:u=0}=t,{max:f=100}=t,{labelBusy:h="Busy"}=t,m=qe(0,{precision:.01}),b=Pt([m],y=>Mt(y,u,f));W(e,b,y=>n(9,l=y));let p=b.subscribe(y=>{c===1&&Math.round(y)>=100&&a("complete")});return Vo(()=>{p()}),e.$$set=y=>{"progress"in y&&n(5,c=y.progress),"min"in y&&n(6,u=y.min),"max"in y&&n(7,f=y.max),"labelBusy"in y&&n(8,h=y.labelBusy)},e.$$.update=()=>{e.$$.dirty&32&&c&&c!==1/0&&m.set(c*100),e.$$.dirty&800&&n(0,o=c===1/0?h:`${Math.round(l)}%`),e.$$.dirty&544&&n(1,i=c===1/0?"26.5 53":`${l/100*53} 53`),e.$$.dirty&544&&n(2,r=Math.min(1,c===1/0?1:l/10)),e.$$.dirty&32&&n(3,s=c===1/0?"busy":"loading")},[o,i,r,s,b,c,u,f,h,l]}var a1=class extends bt{constructor(t){super();pt(this,t,rS,iS,gt,{progress:5,min:6,max:7,labelBusy:8})}};function sS(e){let t,n,o,i=e[5].default,r=Nt(i,e,e[4],null);return{c(){t=$("span"),r&&r.c(),S(t,"class",n=`PinturaStatusAside ${e[0]}`),S(t,"style",e[1])},m(s,l){U(s,t,l),r&&r.m(t,null),o=!0},p(s,[l]){r&&r.p&&l&16&&Ut(r,i,s,s[4],l,null,null),(!o||l&1&&n!==(n=`PinturaStatusAside ${s[0]}`))&&S(t,"class",n),(!o||l&2)&&S(t,"style",s[1])},i(s){o||(I(r,s),o=!0)},o(s){F(r,s),o=!1},d(s){s&&H(t),r&&r.d(s)}}}function lS(e,t,n){let o,{$$slots:i={},$$scope:r}=t,{offset:s=0}=t,{opacity:l=0}=t,{class:a=void 0}=t;return e.$$set=c=>{"offset"in c&&n(2,s=c.offset),"opacity"in c&&n(3,l=c.opacity),"class"in c&&n(0,a=c.class),"$$scope"in c&&n(4,r=c.$$scope)},e.$$.update=()=>{e.$$.dirty&12&&n(1,o=`transform:translateX(${s}px);opacity:${l}`)},[a,o,s,l,r,i]}var Ru=class extends bt{constructor(t){super();pt(this,t,lS,sS,gt,{offset:2,opacity:3,class:0})}};function aS(e){let t,n,o,i=e[3].default,r=Nt(i,e,e[2],null),s=[{for:n="_"},e[1]],l={};for(let a=0;a<s.length;a+=1)l=Jt(l,s[a]);return{c(){t=$("label"),r&&r.c(),Xr(t,l)},m(a,c){U(a,t,c),r&&r.m(t,null),o=!0},p(a,c){r&&r.p&&c&4&&Ut(r,i,a,a[2],c,null,null),Xr(t,l=Hn(s,[{for:n},c&2&&a[1]]))},i(a){o||(I(r,a),o=!0)},o(a){F(r,a),o=!1},d(a){a&&H(t),r&&r.d(a)}}}function cS(e){let t,n,o=e[3].default,i=Nt(o,e,e[2],null),r=[e[1]],s={};for(let l=0;l<r.length;l+=1)s=Jt(s,r[l]);return{c(){t=$("div"),i&&i.c(),Xr(t,s)},m(l,a){U(l,t,a),i&&i.m(t,null),n=!0},p(l,a){i&&i.p&&a&4&&Ut(i,o,l,l[2],a,null,null),Xr(t,s=Hn(r,[a&2&&l[1]]))},i(l){n||(I(i,l),n=!0)},o(l){F(i,l),n=!1},d(l){l&&H(t),i&&i.d(l)}}}function uS(e){let t,n,o=e[3].default,i=Nt(o,e,e[2],null),r=[e[1]],s={};for(let l=0;l<r.length;l+=1)s=Jt(s,r[l]);return{c(){t=$("div"),i&&i.c(),Xr(t,s)},m(l,a){U(l,t,a),i&&i.m(t,null),n=!0},p(l,a){i&&i.p&&a&4&&Ut(i,o,l,l[2],a,null,null),Xr(t,s=Hn(r,[a&2&&l[1]]))},i(l){n||(I(i,l),n=!0)},o(l){F(i,l),n=!1},d(l){l&&H(t),i&&i.d(l)}}}function fS(e){let t,n,o,i,r=[uS,cS,aS],s=[];function l(a,c){return a[0]==="div"?0:a[0]==="span"?1:a[0]==="label"?2:-1}return~(t=l(e))&&(n=s[t]=r[t](e)),{c(){n&&n.c(),o=en()},m(a,c){~t&&s[t].m(a,c),U(a,o,c),i=!0},p(a,[c]){let u=t;t=l(a),t===u?~t&&s[t].p(a,c):(n&&(Ze(),F(s[u],1,1,()=>{s[u]=null}),je()),~t?(n=s[t],n?n.p(a,c):(n=s[t]=r[t](a),n.c()),I(n,1),n.m(o.parentNode,o)):n=null)},i(a){i||(I(n),i=!0)},o(a){F(n),i=!1},d(a){~t&&s[t].d(a),a&&H(o)}}}function dS(e,t,n){let{$$slots:o={},$$scope:i}=t,{name:r="div"}=t,{attributes:s={}}=t;return e.$$set=l=>{"name"in l&&n(0,r=l.name),"attributes"in l&&n(1,s=l.attributes),"$$scope"in l&&n(2,i=l.$$scope)},[r,s,i,o]}var c1=class extends bt{constructor(t){super();pt(this,t,dS,fS,gt,{name:0,attributes:1})}},Pu=()=>on()&&window.devicePixelRatio||1,Mu=null,Iu=e=>(Mu===null&&(Mu=Pu()===1?Math.round:t=>t),Mu(e)),Au=(e,t={})=>{if(!!e){if(t.preventScroll&&js()){let n=document.body.scrollTop;e.focus(),document.body.scrollTop=n;return}e.focus(t)}},hS=e=>({}),u1=e=>({}),mS=e=>({}),f1=e=>({});function gS(e){let t,n,o=[e[10]],i={$$slots:{default:[pS]},$$scope:{ctx:e}};for(let r=0;r<o.length;r+=1)i=Jt(i,o[r]);return t=new es({props:i}),e[37](t),{c(){Pe(t.$$.fragment)},m(r,s){ke(t,r,s),n=!0},p(r,s){let l=s[0]&1024?Hn(o,[Io(r[10])]):{};s[1]&512&&(l.$$scope={dirty:s,ctx:r}),t.$set(l)},i(r){n||(I(t.$$.fragment,r),n=!0)},o(r){F(t.$$.fragment,r),n=!1},d(r){e[37](null),Ce(t,r)}}}function bS(e){let t,n,o=[e[10]],i={};for(let r=0;r<o.length;r+=1)i=Jt(i,o[r]);return t=new es({props:i}),e[36](t),{c(){Pe(t.$$.fragment)},m(r,s){ke(t,r,s),n=!0},p(r,s){let l=s[0]&1024?Hn(o,[Io(r[10])]):{};t.$set(l)},i(r){n||(I(t.$$.fragment,r),n=!0)},o(r){F(t.$$.fragment,r),n=!1},d(r){e[36](null),Ce(t,r)}}}function pS(e){let t,n=e[35].label,o=Nt(n,e,e[40],f1);return{c(){o&&o.c()},m(i,r){o&&o.m(i,r),t=!0},p(i,r){o&&o.p&&r[1]&512&&Ut(o,n,i,i[40],r,mS,f1)},i(i){t||(I(o,i),t=!0)},o(i){F(o,i),t=!1},d(i){o&&o.d(i)}}}function d1(e){let t,n,o,i,r,s,l,a=e[35].details,c=Nt(a,e,e[40],u1);return{c(){t=$("div"),c&&c.c(),n=xe(),o=$("span"),S(o,"class","PinturaPanelTip"),S(o,"style",e[7]),S(t,"class",i=ze(["PinturaPanel",e[1]])),S(t,"tabindex","-1"),S(t,"style",e[6])},m(u,f){U(u,t,f),c&&c.m(t,null),ie(t,n),ie(t,o),e[38](t),r=!0,s||(l=[le(t,"keydown",e[16]),le(t,"measure",e[39]),vt(Ln.call(null,t))],s=!0)},p(u,f){c&&c.p&&f[1]&512&&Ut(c,a,u,u[40],f,hS,u1),(!r||f[0]&128)&&S(o,"style",u[7]),(!r||f[0]&2&&i!==(i=ze(["PinturaPanel",u[1]])))&&S(t,"class",i),(!r||f[0]&64)&&S(t,"style",u[6])},i(u){r||(I(c,u),r=!0)},o(u){F(c,u),r=!1},d(u){u&&H(t),c&&c.d(u),e[38](null),s=!1,Et(l)}}}function yS(e){let t,n,o,i,r,s,l,a,c,u=[bS,gS],f=[];function h(p,y){return p[0]?0:1}n=h(e),o=f[n]=u[n](e);let m=e[5]&&d1(e),b=!1;return{c(){t=xe(),o.c(),i=xe(),m&&m.c(),r=xe(),s=en()},m(p,y){U(p,t,y),f[n].m(p,y),U(p,i,y),m&&m.m(p,y),U(p,r,y),U(p,s,y),l=!0,a||(c=[le(document.body,"pointerdown",function(){jt(e[8])&&e[8].apply(this,arguments)}),le(document.body,"pointerup",function(){jt(e[9])&&e[9].apply(this,arguments)})],a=!0)},p(p,y){e=p;let w=n;n=h(e),n===w?f[n].p(e,y):(Ze(),F(f[w],1,1,()=>{f[w]=null}),je(),o=f[n],o?o.p(e,y):(o=f[n]=u[n](e),o.c()),I(o,1),o.m(i.parentNode,i)),e[5]?m?(m.p(e,y),y[0]&32&&I(m,1)):(m=d1(e),m.c(),I(m,1),m.m(r.parentNode,r)):m&&(Ze(),F(m,1,1,()=>{m=null}),je())},i(p){l||(I(o),I(m),I(b),l=!0)},o(p){F(o),F(m),F(b),l=!1},d(p){p&&H(t),f[n].d(p),p&&H(i),m&&m.d(p),p&&H(r),p&&H(s),a=!1,Et(c)}}}var ns=12;function SS(e,t,n){let o,i,r,s,l,a,c,u,f,h,m,b,p,y,w,C,M,{$$slots:R={},$$scope:k}=t,{buttonClass:T=void 0}=t,{buttonLabel:P=void 0}=t,{panelClass:D=void 0}=t,{isActive:x=!1}=t,{onshow:A=({panel:L})=>Au(L,{preventScroll:!0})}=t,g=Ys("rootPortal");W(e,g,L=>n(34,M=L));let O=Ys("rootRect");W(e,O,L=>n(27,y=L));let j,v,G,z=()=>n(20,G=o&&o.getBoundingClientRect()),B=Kt(),ee=qe(0);W(e,ee,L=>n(29,C=L));let ge=Kt(),ve=We({x:0,y:0});W(e,ve,L=>n(28,w=L));let Oe=qe(-5,{stiffness:.1,damping:.35,precision:.001});W(e,Oe,L=>n(26,p=L));let Ve=L=>e1(L,M)||v.isEventTarget(L),J=!1,Y,ue,be=L=>{x||z(),n(24,ue=L),n(17,x=!x)},He=L=>{!/down/i.test(L.key)||(n(17,x=!0),n(24,ue=L))},ft=L=>{!/esc/i.test(L.key)||(n(17,x=!1),o.focus())};Vo(()=>{if(!M||!Y)return;let L=Y;rh().then(()=>{!L.parentNode||L.remove()})});function ae(L){Bt[L?"unshift":"push"](()=>{v=L,n(3,v)})}function rt(L){Bt[L?"unshift":"push"](()=>{v=L,n(3,v)})}function V(L){Bt[L?"unshift":"push"](()=>{Y=L,n(4,Y)})}let ye=L=>n(2,j=Bo(L.detail));return e.$$set=L=>{"buttonClass"in L&&n(18,T=L.buttonClass),"buttonLabel"in L&&n(0,P=L.buttonLabel),"panelClass"in L&&n(1,D=L.panelClass),"isActive"in L&&n(17,x=L.isActive),"onshow"in L&&n(19,A=L.onshow),"$$scope"in L&&n(40,k=L.$$scope)},e.$$.update=()=>{if(e.$$.dirty[0]&8&&(o=v&&v.getElement()),e.$$.dirty[0]&8519680&&n(9,m=x?L=>{!J||(n(23,J=!1),!Ve(L)&&n(17,x=!1))}:void 0),e.$$.dirty[0]&131072&&ee.set(x?1:0),e.$$.dirty[0]&131072&&Oe.set(x?0:-5),e.$$.dirty[0]&67108864&&n(25,i=1-p/-5),e.$$.dirty[0]&134348800&&y&&x&&z(),e.$$.dirty[0]&135397380&&y&&j&&G&&x){let L=G.x-y.x+G.width*.5-j.width*.5,q=G.y-y.y+G.height,Me=ns,Be=ns,Se=y.width-ns,Ge=y.height-ns,st=L,Q=q,Ke=st+j.width,Je=Q+j.height;if(st<Me&&(n(22,ge.x=st-Me,ge),L=Me),Ke>Se&&(n(22,ge.x=Ke-Se,ge),L=Se-j.width),Je>Ge){n(21,B.y=-1,B);let Lt=q-j.height-G.height;Be<Lt?(n(22,ge.y=0,ge),q-=j.height+G.height):(n(22,ge.y=q-(Je-Ge),ge),q-=Je-Ge)}else n(21,B.y=1,B);fe(ve,w=Br(oe(L,q),Iu),w)}e.$$.dirty[0]&536870912&&n(5,r=C>0),e.$$.dirty[0]&536870912&&n(30,s=C<1),e.$$.dirty[0]&337641472&&n(31,l=`translateX(${Math.round(w.x)+B.x*ns}px) translateY(${Math.round(w.y)+B.y*ns+B.y*p}px)`),e.$$.dirty[0]&1610612736|e.$$.dirty[1]&1&&n(6,a=s?`opacity: ${C}; pointer-events: ${C<1?"none":"all"}; transform: ${l};`:`transform: ${l}`),e.$$.dirty[0]&33554432&&n(32,c=.5+i*.5),e.$$.dirty[0]&33554432&&n(33,u=i),e.$$.dirty[0]&274726916|e.$$.dirty[1]&6&&n(7,f=w&&j&&`opacity:${u};transform:scaleX(${c})rotate(45deg);top:${B.y<0?ge.y+j.height:0}px;left:${ge.x+j.width*.5}px`),e.$$.dirty[0]&131072&&n(8,h=x?L=>{Ve(L)||n(23,J=!0)}:void 0),e.$$.dirty[0]&48|e.$$.dirty[1]&8&&r&&M&&Y&&Y.parentNode!==M&&M.append(Y),e.$$.dirty[0]&131072&&(x||n(24,ue=void 0)),e.$$.dirty[0]&17301552&&r&&Y&&A({e:ue,panel:Y}),e.$$.dirty[0]&262145&&n(10,b={label:P,class:ze(["PinturaPanelButton",T]),onkeydown:He,onclick:be})},[P,D,j,v,Y,r,a,f,h,m,b,g,O,ee,ve,Oe,ft,x,T,A,G,B,ge,J,ue,i,p,y,w,C,s,l,c,u,M,R,ae,rt,V,ye,k]}var rl=class extends bt{constructor(t){super();pt(this,t,SS,yS,gt,{buttonClass:18,buttonLabel:0,panelClass:1,isActive:17,onshow:19},[-1,-1])}};function _S(e){let t,n,o,i,r,s,l,a,c=e[15].default,u=Nt(c,e,e[14],null);return{c(){t=$("li"),n=$("input"),o=xe(),i=$("label"),u&&u.c(),S(n,"type","radio"),S(n,"class","implicit"),S(n,"id",e[7]),S(n,"name",e[0]),n.value=e[3],n.disabled=e[6],n.hidden=e[5],n.checked=e[4],S(i,"for",e[7]),S(i,"title",e[2]),S(t,"class",r=ze(["PinturaRadioGroupOption",e[1]])),S(t,"data-hidden",e[5]),S(t,"data-disabled",e[6]),S(t,"data-selected",e[4])},m(f,h){U(f,t,h),ie(t,n),ie(t,o),ie(t,i),u&&u.m(i,null),s=!0,l||(a=[le(n,"change",Fp(e[16])),le(n,"keydown",e[9]),le(n,"click",e[10])],l=!0)},p(f,[h]){(!s||h&128)&&S(n,"id",f[7]),(!s||h&1)&&S(n,"name",f[0]),(!s||h&8)&&(n.value=f[3]),(!s||h&64)&&(n.disabled=f[6]),(!s||h&32)&&(n.hidden=f[5]),(!s||h&16)&&(n.checked=f[4]),u&&u.p&&h&16384&&Ut(u,c,f,f[14],h,null,null),(!s||h&128)&&S(i,"for",f[7]),(!s||h&4)&&S(i,"title",f[2]),(!s||h&2&&r!==(r=ze(["PinturaRadioGroupOption",f[1]])))&&S(t,"class",r),(!s||h&32)&&S(t,"data-hidden",f[5]),(!s||h&64)&&S(t,"data-disabled",f[6]),(!s||h&16)&&S(t,"data-selected",f[4])},i(f){s||(I(u,f),s=!0)},o(f){F(u,f),s=!1},d(f){f&&H(t),u&&u.d(f),l=!1,Et(a)}}}function wS(e,t,n){let o,i,{$$slots:r={},$$scope:s}=t,{name:l}=t,{class:a=void 0}=t,{label:c}=t,{id:u}=t,{value:f}=t,{checked:h}=t,{onkeydown:m}=t,{onclick:b}=t,{hidden:p=!1}=t,{disabled:y=!1}=t,w=Object.values(r1),C=Ys("keysPressed");W(e,C,T=>n(17,i=T));let M=T=>{m(T)},R=T=>{i.some(P=>w.includes(P))||b(T)};function k(T){qr(e,T)}return e.$$set=T=>{"name"in T&&n(0,l=T.name),"class"in T&&n(1,a=T.class),"label"in T&&n(2,c=T.label),"id"in T&&n(11,u=T.id),"value"in T&&n(3,f=T.value),"checked"in T&&n(4,h=T.checked),"onkeydown"in T&&n(12,m=T.onkeydown),"onclick"in T&&n(13,b=T.onclick),"hidden"in T&&n(5,p=T.hidden),"disabled"in T&&n(6,y=T.disabled),"$$scope"in T&&n(14,s=T.$$scope)},e.$$.update=()=>{e.$$.dirty&2049&&n(7,o=`${l}-${u}`)},[l,a,c,f,h,p,y,o,C,M,R,u,m,b,s,r,k]}var Eu=class extends bt{constructor(t){super();pt(this,t,wS,_S,gt,{name:0,class:1,label:2,id:11,value:3,checked:4,onkeydown:12,onclick:13,hidden:5,disabled:6})}},Ea=(e=[])=>e.reduce((t,n)=>(sn(n)?sn(n[1]):!!n.options)?t.concat(sn(n)?n[1]:n.options):(t.push(n),t),[]),va=(e,t,n)=>{let o;return sn(e)?o={id:t,value:e[0],label:e[1],...e[2]||{}}:(o=e,o.id=o.id!=null?o.id:t),n?n(o):o},kS=(e=[],t)=>{let n=0;return e.map(o=>(n++,sn(o)?sn(o[1])?{id:n,label:o[0],options:o[1].map(i=>va(i,++n,t))}:va(o,n,t):o.options?{id:o.id||n,label:o.label,options:o.options.map(i=>va(i,++n,t))}:va(o,n,t)))},CS=(e,...t)=>e&&e(...t),Nn=(e,t,n)=>Qn(e)?e(t,n):e,h1=(e,t)=>e.map(([n,o,i])=>{if(sn(o))return[Nn(n,t),h1(o,t)];{let r=[n,Nn(o,t)];if(i){let s={...i};i.icon&&(s.icon=Nn(i.icon,t)),r.push(s)}return r}}),m1=(e,t)=>h1(e,t),TS=e=>/enter| /i.test(e),g1=(e,t)=>Array.isArray(e)&&Array.isArray(t)?$s(e,t):e===t;function b1(e,t,n){let o=e.slice();return o[27]=t[n],o}var RS=e=>({option:e[0]&2048}),p1=e=>({option:e[27]});function y1(e,t,n){let o=e.slice();return o[27]=t[n],o}var PS=e=>({option:e[0]&2048}),S1=e=>({option:e[27]}),MS=e=>({option:e[0]&2048}),_1=e=>({option:e[27]});function w1(e){let t,n,o,i=[],r=new Map,s,l,a=e[1]&&k1(e),c=e[11],u=f=>f[27].id;for(let f=0;f<c.length;f+=1){let h=b1(e,c,f),m=u(h);r.set(m,i[f]=I1(m,h))}return{c(){t=$("fieldset"),a&&a.c(),n=xe(),o=$("ul");for(let f=0;f<i.length;f+=1)i[f].c();S(o,"class","PinturaRadioGroupOptions"),S(t,"class",s=ze(["PinturaRadioGroup",e[3]])),S(t,"data-layout",e[5]),S(t,"title",e[7])},m(f,h){U(f,t,h),a&&a.m(t,null),ie(t,n),ie(t,o);for(let m=0;m<i.length;m+=1)i[m].m(o,null);l=!0},p(f,h){f[1]?a?a.p(f,h):(a=k1(f),a.c(),a.m(t,n)):a&&(a.d(1),a=null),h[0]&8420177&&(c=f[11],Ze(),i=Jr(i,h,u,1,f,c,r,o,Js,I1,null,b1),je()),(!l||h[0]&8&&s!==(s=ze(["PinturaRadioGroup",f[3]])))&&S(t,"class",s),(!l||h[0]&32)&&S(t,"data-layout",f[5]),(!l||h[0]&128)&&S(t,"title",f[7])},i(f){if(!l){for(let h=0;h<c.length;h+=1)I(i[h]);l=!0}},o(f){for(let h=0;h<i.length;h+=1)F(i[h]);l=!1},d(f){f&&H(t),a&&a.d();for(let h=0;h<i.length;h+=1)i[h].d()}}}function k1(e){let t,n,o;return{c(){t=$("legend"),n=Ot(e[1]),S(t,"class",o=e[2]&&"implicit")},m(i,r){U(i,t,r),ie(t,n)},p(i,r){r[0]&2&&Zt(n,i[1]),r[0]&4&&o!==(o=i[2]&&"implicit")&&S(t,"class",o)},d(i){i&&H(t)}}}function IS(e){let t,n;return t=new Eu({props:{name:e[4],label:e[27].label,id:e[27].id,value:e[27].value,disabled:e[27].disabled,hidden:e[27].hidden,class:e[8],checked:e[12](e[27])===e[0],onkeydown:e[13](e[27]),onclick:e[14](e[27]),$$slots:{default:[LS]},$$scope:{ctx:e}}}),{c(){Pe(t.$$.fragment)},m(o,i){ke(t,o,i),n=!0},p(o,i){let r={};i[0]&16&&(r.name=o[4]),i[0]&2048&&(r.label=o[27].label),i[0]&2048&&(r.id=o[27].id),i[0]&2048&&(r.value=o[27].value),i[0]&2048&&(r.disabled=o[27].disabled),i[0]&2048&&(r.hidden=o[27].hidden),i[0]&256&&(r.class=o[8]),i[0]&2049&&(r.checked=o[12](o[27])===o[0]),i[0]&2048&&(r.onkeydown=o[13](o[27])),i[0]&2048&&(r.onclick=o[14](o[27])),i[0]&8390720&&(r.$$scope={dirty:i,ctx:o}),t.$set(r)},i(o){n||(I(t.$$.fragment,o),n=!0)},o(o){F(t.$$.fragment,o),n=!1},d(o){Ce(t,o)}}}function AS(e){let t,n,o,i=[],r=new Map,s,l,a,c=e[22].group,u=Nt(c,e,e[23],_1),f=u||FS(e),h=e[27].options,m=b=>b[27].id;for(let b=0;b<h.length;b+=1){let p=y1(e,h,b),y=m(p);r.set(y,i[b]=M1(y,p))}return{c(){t=$("li"),f&&f.c(),n=xe(),o=$("ul");for(let b=0;b<i.length;b+=1)i[b].c();s=xe(),S(o,"class","PinturaRadioGroupOptions"),S(t,"class",l=ze(["PinturaRadioGroupOptionGroup",e[9]]))},m(b,p){U(b,t,p),f&&f.m(t,null),ie(t,n),ie(t,o);for(let y=0;y<i.length;y+=1)i[y].m(o,null);ie(t,s),a=!0},p(b,p){u?u.p&&p[0]&8390656&&Ut(u,c,b,b[23],p,MS,_1):f&&f.p&&p[0]&2048&&f.p(b,p),p[0]&8419665&&(h=b[27].options,Ze(),i=Jr(i,p,m,1,b,h,r,o,Js,M1,null,y1),je()),(!a||p[0]&512&&l!==(l=ze(["PinturaRadioGroupOptionGroup",b[9]])))&&S(t,"class",l)},i(b){if(!a){I(f,b);for(let p=0;p<h.length;p+=1)I(i[p]);a=!0}},o(b){F(f,b);for(let p=0;p<i.length;p+=1)F(i[p]);a=!1},d(b){b&&H(t),f&&f.d(b);for(let p=0;p<i.length;p+=1)i[p].d()}}}function C1(e){let t,n;return t=new go({props:{$$slots:{default:[ES]},$$scope:{ctx:e}}}),{c(){Pe(t.$$.fragment)},m(o,i){ke(t,o,i),n=!0},p(o,i){let r={};i[0]&8390656&&(r.$$scope={dirty:i,ctx:o}),t.$set(r)},i(o){n||(I(t.$$.fragment,o),n=!0)},o(o){F(t.$$.fragment,o),n=!1},d(o){Ce(t,o)}}}function ES(e){let t,n=e[27].icon+"";return{c(){t=Rn("g")},m(o,i){U(o,t,i),t.innerHTML=n},p(o,i){i[0]&2048&&n!==(n=o[27].icon+"")&&(t.innerHTML=n)},d(o){o&&H(t)}}}function T1(e){let t,n=e[27].label+"",o;return{c(){t=$("span"),o=Ot(n),S(t,"class",e[6])},m(i,r){U(i,t,r),ie(t,o)},p(i,r){r[0]&2048&&n!==(n=i[27].label+"")&&Zt(o,n),r[0]&64&&S(t,"class",i[6])},d(i){i&&H(t)}}}function vS(e){let t,n,o,i=e[27].icon&&C1(e),r=!e[27].hideLabel&&T1(e);return{c(){i&&i.c(),t=xe(),r&&r.c(),n=xe()},m(s,l){i&&i.m(s,l),U(s,t,l),r&&r.m(s,l),U(s,n,l),o=!0},p(s,l){s[27].icon?i?(i.p(s,l),l[0]&2048&&I(i,1)):(i=C1(s),i.c(),I(i,1),i.m(t.parentNode,t)):i&&(Ze(),F(i,1,1,()=>{i=null}),je()),s[27].hideLabel?r&&(r.d(1),r=null):r?r.p(s,l):(r=T1(s),r.c(),r.m(n.parentNode,n))},i(s){o||(I(i),o=!0)},o(s){F(i),o=!1},d(s){i&&i.d(s),s&&H(t),r&&r.d(s),s&&H(n)}}}function LS(e){let t,n=e[22].option,o=Nt(n,e,e[23],p1),i=o||vS(e);return{c(){i&&i.c()},m(r,s){i&&i.m(r,s),t=!0},p(r,s){o?o.p&&s[0]&8390656&&Ut(o,n,r,r[23],s,RS,p1):i&&i.p&&s[0]&2112&&i.p(r,s)},i(r){t||(I(i,r),t=!0)},o(r){F(i,r),t=!1},d(r){i&&i.d(r)}}}function FS(e){let t,n=e[27].label+"",o;return{c(){t=$("span"),o=Ot(n),S(t,"class","PinturaRadioGroupOptionGroupLabel")},m(i,r){U(i,t,r),ie(t,o)},p(i,r){r[0]&2048&&n!==(n=i[27].label+"")&&Zt(o,n)},d(i){i&&H(t)}}}function R1(e){let t,n;return t=new go({props:{$$slots:{default:[xS]},$$scope:{ctx:e}}}),{c(){Pe(t.$$.fragment)},m(o,i){ke(t,o,i),n=!0},p(o,i){let r={};i[0]&8390656&&(r.$$scope={dirty:i,ctx:o}),t.$set(r)},i(o){n||(I(t.$$.fragment,o),n=!0)},o(o){F(t.$$.fragment,o),n=!1},d(o){Ce(t,o)}}}function xS(e){let t,n=e[27].icon+"";return{c(){t=Rn("g")},m(o,i){U(o,t,i),t.innerHTML=n},p(o,i){i[0]&2048&&n!==(n=o[27].icon+"")&&(t.innerHTML=n)},d(o){o&&H(t)}}}function P1(e){let t,n=e[27].label+"",o;return{c(){t=$("span"),o=Ot(n),S(t,"class",e[6])},m(i,r){U(i,t,r),ie(t,o)},p(i,r){r[0]&2048&&n!==(n=i[27].label+"")&&Zt(o,n),r[0]&64&&S(t,"class",i[6])},d(i){i&&H(t)}}}function OS(e){let t,n,o,i=e[27].icon&&R1(e),r=!e[27].hideLabel&&P1(e);return{c(){i&&i.c(),t=xe(),r&&r.c(),n=xe()},m(s,l){i&&i.m(s,l),U(s,t,l),r&&r.m(s,l),U(s,n,l),o=!0},p(s,l){s[27].icon?i?(i.p(s,l),l[0]&2048&&I(i,1)):(i=R1(s),i.c(),I(i,1),i.m(t.parentNode,t)):i&&(Ze(),F(i,1,1,()=>{i=null}),je()),s[27].hideLabel?r&&(r.d(1),r=null):r?r.p(s,l):(r=P1(s),r.c(),r.m(n.parentNode,n))},i(s){o||(I(i),o=!0)},o(s){F(i),o=!1},d(s){i&&i.d(s),s&&H(t),r&&r.d(s),s&&H(n)}}}function BS(e){let t,n=e[22].option,o=Nt(n,e,e[23],S1),i=o||OS(e);return{c(){i&&i.c()},m(r,s){i&&i.m(r,s),t=!0},p(r,s){o?o.p&&s[0]&8390656&&Ut(o,n,r,r[23],s,PS,S1):i&&i.p&&s[0]&2112&&i.p(r,s)},i(r){t||(I(i,r),t=!0)},o(r){F(i,r),t=!1},d(r){i&&i.d(r)}}}function M1(e,t){let n,o,i;return o=new Eu({props:{name:t[4],label:t[27].label,id:t[27].id,value:t[27].value,disabled:t[27].disabled,hidden:t[27].hidden,class:t[8],checked:t[12](t[27])===t[0],onkeydown:t[13](t[27]),onclick:t[14](t[27]),$$slots:{default:[BS]},$$scope:{ctx:t}}}),{key:e,first:null,c(){n=en(),Pe(o.$$.fragment),this.first=n},m(r,s){U(r,n,s),ke(o,r,s),i=!0},p(r,s){t=r;let l={};s[0]&16&&(l.name=t[4]),s[0]&2048&&(l.label=t[27].label),s[0]&2048&&(l.id=t[27].id),s[0]&2048&&(l.value=t[27].value),s[0]&2048&&(l.disabled=t[27].disabled),s[0]&2048&&(l.hidden=t[27].hidden),s[0]&256&&(l.class=t[8]),s[0]&2049&&(l.checked=t[12](t[27])===t[0]),s[0]&2048&&(l.onkeydown=t[13](t[27])),s[0]&2048&&(l.onclick=t[14](t[27])),s[0]&8390720&&(l.$$scope={dirty:s,ctx:t}),o.$set(l)},i(r){i||(I(o.$$.fragment,r),i=!0)},o(r){F(o.$$.fragment,r),i=!1},d(r){r&&H(n),Ce(o,r)}}}function I1(e,t){let n,o,i,r,s,l=[AS,IS],a=[];function c(u,f){return u[27].options?0:1}return o=c(t),i=a[o]=l[o](t),{key:e,first:null,c(){n=en(),i.c(),r=en(),this.first=n},m(u,f){U(u,n,f),a[o].m(u,f),U(u,r,f),s=!0},p(u,f){t=u;let h=o;o=c(t),o===h?a[o].p(t,f):(Ze(),F(a[h],1,1,()=>{a[h]=null}),je(),i=a[o],i?i.p(t,f):(i=a[o]=l[o](t),i.c()),I(i,1),i.m(r.parentNode,r))},i(u){s||(I(i),s=!0)},o(u){F(i),s=!1},d(u){u&&H(n),a[o].d(u),u&&H(r)}}}function DS(e){let t,n,o,i=e[10].length&&w1(e),r=!1;return{c(){i&&i.c(),t=xe(),n=en()},m(s,l){i&&i.m(s,l),U(s,t,l),U(s,n,l),o=!0},p(s,l){s[10].length?i?(i.p(s,l),l[0]&1024&&I(i,1)):(i=w1(s),i.c(),I(i,1),i.m(t.parentNode,t)):i&&(Ze(),F(i,1,1,()=>{i=null}),je())},i(s){o||(I(i),I(r),o=!0)},o(s){F(i),F(r),o=!1},d(s){i&&i.d(s),s&&H(t),s&&H(n)}}}function zS(e,t,n){let o,i,r,{$$slots:s={},$$scope:l}=t,a=mo(),{label:c=void 0}=t,{hideLabel:u=!0}=t,{class:f=void 0}=t,{name:h=`radio-group-${Fr()}`}=t,{selectedIndex:m=-1}=t,{options:b=[]}=t,{onchange:p=void 0}=t,{layout:y=void 0}=t,{optionMapper:w=void 0}=t,{optionFilter:C=void 0}=t,{value:M=void 0}=t,{optionLabelClass:R=void 0}=t,{title:k=void 0}=t,{locale:T=void 0}=t,{optionClass:P=void 0}=t,{optionGroupClass:D=void 0}=t,x=v=>v.findIndex(G=>G[0]===void 0),A=v=>r.findIndex(G=>G.id===v.id),g=(v,G)=>{n(0,m=A(v));let z={index:m,...v};CS(p,z,G),a("change",z)},O=v=>G=>{!TS(G.key)||g(v,G)},j=v=>G=>{g(v,G)};return e.$$set=v=>{"label"in v&&n(1,c=v.label),"hideLabel"in v&&n(2,u=v.hideLabel),"class"in v&&n(3,f=v.class),"name"in v&&n(4,h=v.name),"selectedIndex"in v&&n(0,m=v.selectedIndex),"options"in v&&n(15,b=v.options),"onchange"in v&&n(16,p=v.onchange),"layout"in v&&n(5,y=v.layout),"optionMapper"in v&&n(17,w=v.optionMapper),"optionFilter"in v&&n(18,C=v.optionFilter),"value"in v&&n(19,M=v.value),"optionLabelClass"in v&&n(6,R=v.optionLabelClass),"title"in v&&n(7,k=v.title),"locale"in v&&n(20,T=v.locale),"optionClass"in v&&n(8,P=v.optionClass),"optionGroupClass"in v&&n(9,D=v.optionGroupClass),"$$scope"in v&&n(23,l=v.$$scope)},e.$$.update=()=>{e.$$.dirty[0]&1343488&&n(10,o=m1(C?b.filter(C):b,T)),e.$$.dirty[0]&132096&&n(11,i=kS(o,w)),e.$$.dirty[0]&2048&&n(21,r=Ea(i)),e.$$.dirty[0]&2654209&&m<0&&(n(0,m=r.findIndex(v=>g1(v.value,M))),m<0&&n(0,m=x(b)))},[m,c,u,f,h,y,R,k,P,D,o,i,A,O,j,b,p,w,C,M,T,r,s,l]}var sl=class extends bt{constructor(t){super();pt(this,t,zS,DS,gt,{label:1,hideLabel:2,class:3,name:4,selectedIndex:0,options:15,onchange:16,layout:5,optionMapper:17,optionFilter:18,value:19,optionLabelClass:6,title:7,locale:20,optionClass:8,optionGroupClass:9},[-1,-1])}},WS=e=>({}),A1=e=>({});function E1(e){let t,n;return t=new go({props:{class:"PinturaButtonIcon",$$slots:{default:[VS]},$$scope:{ctx:e}}}),{c(){Pe(t.$$.fragment)},m(o,i){ke(t,o,i),n=!0},p(o,i){let r={};i&268435520&&(r.$$scope={dirty:i,ctx:o}),t.$set(r)},i(o){n||(I(t.$$.fragment,o),n=!0)},o(o){F(t.$$.fragment,o),n=!1},d(o){Ce(t,o)}}}function VS(e){let t;return{c(){t=Rn("g")},m(n,o){U(n,t,o),t.innerHTML=e[6]},p(n,o){o&64&&(t.innerHTML=n[6])},d(n){n&&H(t)}}}function HS(e){let t,n,o,i=(e[2]||e[18])+"",r,s,l,a,c,u=e[6]&&E1(e);return{c(){t=$("span"),u&&u.c(),n=xe(),o=$("span"),r=Ot(i),S(o,"class",s=ze(["PinturaButtonLabel",e[3],e[5]&&"implicit"])),S(t,"slot","label"),S(t,"title",l=Nn(e[1],e[15])),S(t,"class",a=ze(["PinturaButtonInner",e[4]]))},m(f,h){U(f,t,h),u&&u.m(t,null),ie(t,n),ie(t,o),ie(o,r),c=!0},p(f,h){f[6]?u?(u.p(f,h),h&64&&I(u,1)):(u=E1(f),u.c(),I(u,1),u.m(t,n)):u&&(Ze(),F(u,1,1,()=>{u=null}),je()),(!c||h&262148)&&i!==(i=(f[2]||f[18])+"")&&Zt(r,i),(!c||h&40&&s!==(s=ze(["PinturaButtonLabel",f[3],f[5]&&"implicit"])))&&S(o,"class",s),(!c||h&32770&&l!==(l=Nn(f[1],f[15])))&&S(t,"title",l),(!c||h&16&&a!==(a=ze(["PinturaButtonInner",f[4]])))&&S(t,"class",a)},i(f){c||(I(u),c=!0)},o(f){F(u),c=!1},d(f){f&&H(t),u&&u.d()}}}function NS(e){let t,n=e[30].label+"",o;return{c(){t=$("span"),o=Ot(n),S(t,"slot","group")},m(i,r){U(i,t,r),ie(t,o)},p(i,r){r&1073741824&&n!==(n=i[30].label+"")&&Zt(o,n)},d(i){i&&H(t)}}}function v1(e){let t,n;return t=new go({props:{style:Qn(e[13])?e[13](e[30].value):e[13],$$slots:{default:[US]},$$scope:{ctx:e}}}),{c(){Pe(t.$$.fragment)},m(o,i){ke(t,o,i),n=!0},p(o,i){let r={};i&1073750016&&(r.style=Qn(o[13])?o[13](o[30].value):o[13]),i&1342177280&&(r.$$scope={dirty:i,ctx:o}),t.$set(r)},i(o){n||(I(t.$$.fragment,o),n=!0)},o(o){F(t.$$.fragment,o),n=!1},d(o){Ce(t,o)}}}function US(e){let t,n=e[30].icon+"";return{c(){t=Rn("g")},m(o,i){U(o,t,i),t.innerHTML=n},p(o,i){i&1073741824&&n!==(n=o[30].icon+"")&&(t.innerHTML=n)},d(o){o&&H(t)}}}function L1(e){let t,n=e[30].sublabel+"",o;return{c(){t=$("span"),o=Ot(n),S(t,"class","PinturaDropdownOptionSublabel")},m(i,r){U(i,t,r),ie(t,o)},p(i,r){r&1073741824&&n!==(n=i[30].sublabel+"")&&Zt(o,n)},d(i){i&&H(t)}}}function ZS(e){let t,n,o,i=e[30].label+"",r,s,l,a,c,u=e[30].icon&&v1(e),f=e[30].sublabel&&L1(e);return{c(){t=$("span"),u&&u.c(),n=xe(),o=$("span"),r=Ot(i),s=xe(),f&&f.c(),S(o,"style",l=Qn(e[14])?e[14](e[30].value):e[14]),S(o,"class",a=ze(["PinturaDropdownOptionLabel",e[10]])),S(t,"slot","option")},m(h,m){U(h,t,m),u&&u.m(t,null),ie(t,n),ie(t,o),ie(o,r),ie(o,s),f&&f.m(o,null),c=!0},p(h,m){h[30].icon?u?(u.p(h,m),m&1073741824&&I(u,1)):(u=v1(h),u.c(),I(u,1),u.m(t,n)):u&&(Ze(),F(u,1,1,()=>{u=null}),je()),(!c||m&1073741824)&&i!==(i=h[30].label+"")&&Zt(r,i),h[30].sublabel?f?f.p(h,m):(f=L1(h),f.c(),f.m(o,null)):f&&(f.d(1),f=null),(!c||m&1073758208&&l!==(l=Qn(h[14])?h[14](h[30].value):h[14]))&&S(o,"style",l),(!c||m&1024&&a!==(a=ze(["PinturaDropdownOptionLabel",h[10]])))&&S(o,"class",a)},i(h){c||(I(u),c=!0)},o(h){F(u),c=!1},d(h){h&&H(t),u&&u.d(),f&&f.d()}}}function jS(e){let t,n,o,i,r,s,l=e[26].controls,a=Nt(l,e,e[28],A1);return o=new sl({props:{class:"PinturaOptionsList PinturaScrollableContent",name:e[7],value:e[9],selectedIndex:e[8],optionFilter:e[11],optionMapper:e[12],optionLabelClass:ze(["PinturaDropdownOptionLabel",e[10]]),optionGroupClass:"PinturaListOptionGroup",optionClass:"PinturaListOption",options:e[16],onchange:e[19],$$slots:{option:[ZS,({option:c})=>({30:c}),({option:c})=>c?1073741824:0],group:[NS,({option:c})=>({30:c}),({option:c})=>c?1073741824:0]},$$scope:{ctx:e}}}),{c(){t=$("div"),a&&a.c(),n=xe(),Pe(o.$$.fragment),S(t,"slot","details"),S(t,"class","PinturaOptionsListWrapper")},m(c,u){U(c,t,u),a&&a.m(t,null),ie(t,n),ke(o,t,null),i=!0,r||(s=le(t,"keydown",e[21]),r=!0)},p(c,u){a&&a.p&&u&268435456&&Ut(a,l,c,c[28],u,WS,A1);let f={};u&128&&(f.name=c[7]),u&512&&(f.value=c[9]),u&256&&(f.selectedIndex=c[8]),u&2048&&(f.optionFilter=c[11]),u&4096&&(f.optionMapper=c[12]),u&1024&&(f.optionLabelClass=ze(["PinturaDropdownOptionLabel",c[10]])),u&65536&&(f.options=c[16]),u&1342202880&&(f.$$scope={dirty:u,ctx:c}),o.$set(f)},i(c){i||(I(a,c),I(o.$$.fragment,c),i=!0)},o(c){F(a,c),F(o.$$.fragment,c),i=!1},d(c){c&&H(t),a&&a.d(c),Ce(o),r=!1,s()}}}function GS(e){let t,n,o;function i(s){e[27](s)}let r={onshow:e[20],buttonClass:ze(["PinturaDropdownButton",e[0],e[5]&&"PinturaDropdownIconOnly"]),$$slots:{details:[jS],label:[HS]},$$scope:{ctx:e}};return e[17]!==void 0&&(r.isActive=e[17]),t=new rl({props:r}),Bt.push(()=>Hi(t,"isActive",i)),{c(){Pe(t.$$.fragment)},m(s,l){ke(t,s,l),o=!0},p(s,[l]){let a={};l&33&&(a.buttonClass=ze(["PinturaDropdownButton",s[0],s[5]&&"PinturaDropdownIconOnly"])),l&268828670&&(a.$$scope={dirty:l,ctx:s}),!n&&l&131072&&(n=!0,a.isActive=s[17],Kr(()=>n=!1)),t.$set(a)},i(s){o||(I(t.$$.fragment,s),o=!0)},o(s){F(t.$$.fragment,s),o=!1},d(s){Ce(t,s)}}}function XS(e,t,n){let o,i,{$$slots:r={},$$scope:s}=t,{class:l=void 0}=t,{title:a=void 0}=t,{label:c=void 0}=t,{labelClass:u=void 0}=t,{innerClass:f=void 0}=t,{hideLabel:h=!1}=t,{icon:m=void 0}=t,{name:b=void 0}=t,{options:p=[]}=t,{selectedIndex:y=-1}=t,{value:w=void 0}=t,{optionLabelClass:C=void 0}=t,{optionFilter:M=void 0}=t,{optionMapper:R=void 0}=t,{optionIconStyle:k=void 0}=t,{optionLabelStyle:T=void 0}=t,{locale:P=void 0}=t,{onchange:D=ct}=t,{onload:x=ct}=t,{ondestroy:A=ct}=t,g=B=>{let ee=B.find(ge=>ge[0]===void 0);if(!!ee)return ee[1]},O,j=B=>{n(18,i=B.value),D(B),n(17,O=!1)},v=({e:B,panel:ee})=>{if(B&&B.key&&/up|down/i.test(B.key))return Au(ee.querySelector("input:not([disabled])"));Au(ee.querySelector("fieldset"))},G=B=>{/tab/i.test(B.key)&&B.preventDefault()};fa(()=>x({options:p})),Vo(()=>A({options:p}));function z(B){O=B,n(17,O)}return e.$$set=B=>{"class"in B&&n(0,l=B.class),"title"in B&&n(1,a=B.title),"label"in B&&n(2,c=B.label),"labelClass"in B&&n(3,u=B.labelClass),"innerClass"in B&&n(4,f=B.innerClass),"hideLabel"in B&&n(5,h=B.hideLabel),"icon"in B&&n(6,m=B.icon),"name"in B&&n(7,b=B.name),"options"in B&&n(22,p=B.options),"selectedIndex"in B&&n(8,y=B.selectedIndex),"value"in B&&n(9,w=B.value),"optionLabelClass"in B&&n(10,C=B.optionLabelClass),"optionFilter"in B&&n(11,M=B.optionFilter),"optionMapper"in B&&n(12,R=B.optionMapper),"optionIconStyle"in B&&n(13,k=B.optionIconStyle),"optionLabelStyle"in B&&n(14,T=B.optionLabelStyle),"locale"in B&&n(15,P=B.locale),"onchange"in B&&n(23,D=B.onchange),"onload"in B&&n(24,x=B.onload),"ondestroy"in B&&n(25,A=B.ondestroy),"$$scope"in B&&n(28,s=B.$$scope)},e.$$.update=()=>{e.$$.dirty&4227072&&n(16,o=P?m1(p,P):p),e.$$.dirty&66048&&n(18,i=o.reduce((B,ee)=>{if(B)return B;let ge=Array.isArray(ee)?ee:[ee,ee],[ve,Oe]=ge;if(g1(ve,w))return Oe},void 0)||g(o)||w)},[l,a,c,u,f,h,m,b,y,w,C,M,R,k,T,P,o,O,i,j,v,G,p,D,x,A,r,z,s]}var Uo=class extends bt{constructor(t){super();pt(this,t,XS,GS,gt,{class:0,title:1,label:2,labelClass:3,innerClass:4,hideLabel:5,icon:6,name:7,options:22,selectedIndex:8,value:9,optionLabelClass:10,optionFilter:11,optionMapper:12,optionIconStyle:13,optionLabelStyle:14,locale:15,onchange:23,onload:24,ondestroy:25})}};function YS(e){let t;return{c(){t=$("div"),S(t,"slot","details")},m(n,o){U(n,t,o),e[8](t)},p:tt,d(n){n&&H(t),e[8](null)}}}function qS(e){let t,n,o;function i(s){e[9](s)}let r={buttonLabel:e[0],buttonClass:e[1],$$slots:{details:[YS]},$$scope:{ctx:e}};return e[3]!==void 0&&(r.isActive=e[3]),t=new rl({props:r}),Bt.push(()=>Hi(t,"isActive",i)),{c(){Pe(t.$$.fragment)},m(s,l){ke(t,s,l),o=!0},p(s,[l]){let a={};l&1&&(a.buttonLabel=s[0]),l&2&&(a.buttonClass=s[1]),l&1028&&(a.$$scope={dirty:l,ctx:s}),!n&&l&8&&(n=!0,a.isActive=s[3],Kr(()=>n=!1)),t.$set(a)},i(s){o||(I(t.$$.fragment,s),o=!0)},o(s){F(t.$$.fragment,s),o=!1},d(s){Ce(t,s)}}}function KS(e,t,n){let{buttonLabel:o=void 0}=t,{buttonClass:i=void 0}=t,{root:r=void 0}=t,{ondestroy:s=ct}=t,l=()=>n(3,u=!1),a=()=>n(3,u=!0),c,u=!1;Vo(s);function f(m){Bt[m?"unshift":"push"](()=>{c=m,n(2,c)})}function h(m){u=m,n(3,u)}return e.$$set=m=>{"buttonLabel"in m&&n(0,o=m.buttonLabel),"buttonClass"in m&&n(1,i=m.buttonClass),"root"in m&&n(4,r=m.root),"ondestroy"in m&&n(5,s=m.ondestroy)},e.$$.update=()=>{e.$$.dirty&20&&c&&r&&c.firstChild!==r&&(c.hasChildNodes()?c.replaceChild(r,c.firstChild):c.append(r))},[o,i,c,u,r,s,l,a,f,h]}var F1=class extends bt{constructor(t){super();pt(this,t,KS,qS,gt,{buttonLabel:0,buttonClass:1,root:4,ondestroy:5,hide:6,show:7})}get hide(){return this.$$.ctx[6]}get show(){return this.$$.ctx[7]}},JS=(e,t)=>(t=1/t,Math.round(e*t)/t),ll=(e,t,n)=>(e-t)/(n-t);function QS(e){let t;return{c(){t=Rn("path"),S(t,"d","M8 12 h8 M12 8 v8")},m(n,o){U(n,t,o)},d(n){n&&H(t)}}}function $S(e){let t;return{c(){t=Rn("path"),S(t,"d","M9 12 h6")},m(n,o){U(n,t,o)},d(n){n&&H(t)}}}function e_(e){let t,n,o,i,r,s,l,a,c,u,f,h,m,b,p,y,w,C;return f=new go({props:{$$slots:{default:[QS]},$$scope:{ctx:e}}}),b=new go({props:{$$slots:{default:[$S]},$$scope:{ctx:e}}}),{c(){t=$("div"),n=$("div"),o=$("input"),i=xe(),r=$("div"),s=xe(),l=$("div"),a=$("div"),c=xe(),u=$("button"),Pe(f.$$.fragment),h=xe(),m=$("button"),Pe(b.$$.fragment),S(o,"type","range"),S(o,"id",e[3]),S(o,"min",e[0]),S(o,"max",e[1]),S(o,"step",e[2]),o.value=e[8],S(r,"class","PinturaSliderTrack"),S(r,"style",e[4]),S(a,"class","PinturaSliderKnob"),S(a,"style",e[5]),S(l,"class","PinturaSliderKnobController"),S(l,"style",e[10]),S(n,"class","PinturaSliderControl"),S(u,"type","button"),S(u,"aria-label","Increase"),S(m,"type","button"),S(m,"aria-label","Decrease"),S(t,"class",p=ze(["PinturaSlider",e[7]])),S(t,"data-direction",e[6])},m(M,R){U(M,t,R),ie(t,n),ie(n,o),e[23](o),ie(n,i),ie(n,r),ie(n,s),ie(n,l),ie(l,a),ie(t,c),ie(t,u),ke(f,u,null),ie(t,h),ie(t,m),ke(b,m,null),y=!0,w||(C=[le(o,"pointerdown",e[13]),le(o,"input",e[11]),le(o,"nudge",e[12]),vt(il.call(null,o)),le(u,"pointerdown",e[14](1)),le(m,"pointerdown",e[14](-1))],w=!0)},p(M,R){(!y||R[0]&8)&&S(o,"id",M[3]),(!y||R[0]&1)&&S(o,"min",M[0]),(!y||R[0]&2)&&S(o,"max",M[1]),(!y||R[0]&4)&&S(o,"step",M[2]),(!y||R[0]&256)&&(o.value=M[8]),(!y||R[0]&16)&&S(r,"style",M[4]),(!y||R[0]&32)&&S(a,"style",M[5]),(!y||R[0]&1024)&&S(l,"style",M[10]);let k={};R[1]&2048&&(k.$$scope={dirty:R,ctx:M}),f.$set(k);let T={};R[1]&2048&&(T.$$scope={dirty:R,ctx:M}),b.$set(T),(!y||R[0]&128&&p!==(p=ze(["PinturaSlider",M[7]])))&&S(t,"class",p),(!y||R[0]&64)&&S(t,"data-direction",M[6])},i(M){y||(I(f.$$.fragment,M),I(b.$$.fragment,M),y=!0)},o(M){F(f.$$.fragment,M),F(b.$$.fragment,M),y=!1},d(M){M&&H(t),e[23](null),Ce(f),Ce(b),w=!1,Et(C)}}}function t_(e,t,n){let o,i,r,s,l,a,c,u,f,{min:h=0}=t,{max:m=100}=t,{step:b=1}=t,{id:p=void 0}=t,{value:y=0}=t,{trackStyle:w=void 0}=t,{knobStyle:C=void 0}=t,{onchange:M=void 0}=t,{onrelease:R=tt}=t,{direction:k="x"}=t,{getValue:T=Ft}=t,{setValue:P=Ft}=t,{class:D=void 0}=t,x,A,g,O,j,v=ae=>P(JS(Mt(ae,h,m),b)),G=(ae,rt,V={})=>{let{released:ye=!1}=V;n(15,y=v(h+ae/rt*i)),y!==j&&(j=y,M(y),ye&&R(y))},z=ae=>{A||(n(15,y=P(parseFloat(ae.target.value))),y!==j&&(j=y,M(y)))},B,ee=ae=>{let rt=x[a],V=o/i*rt;G(V+ae.detail[k],rt),clearTimeout(B),B=setTimeout(()=>{R(y)},250)},ge=ae=>{ae.stopPropagation(),clearTimeout(B),A=x[a],g=ae[c],O=ae[u],G(g,A),document.documentElement.addEventListener("pointermove",ve),document.documentElement.addEventListener("pointerup",Oe)},ve=ae=>{let rt=ae[u]-O;G(g+rt,A)},Oe=ae=>{A=void 0,document.documentElement.removeEventListener("pointermove",ve),document.documentElement.removeEventListener("pointerup",Oe),M(y),R(y)},Ve=()=>{n(15,y=v(o+Y*b)),M(y)},J,Y=1,ue=!1,be=ae=>rt=>{clearTimeout(B),Y=ae,ue=!1,J=setInterval(()=>{ue=!0,Ve()},100),document.addEventListener("pointercancel",He),document.addEventListener("pointerup",He)},He=ae=>{clearTimeout(J),ue||Ve(),R(y),document.removeEventListener("pointerup",He)};function ft(ae){Bt[ae?"unshift":"push"](()=>{x=ae,n(9,x)})}return e.$$set=ae=>{"min"in ae&&n(0,h=ae.min),"max"in ae&&n(1,m=ae.max),"step"in ae&&n(2,b=ae.step),"id"in ae&&n(3,p=ae.id),"value"in ae&&n(15,y=ae.value),"trackStyle"in ae&&n(4,w=ae.trackStyle),"knobStyle"in ae&&n(5,C=ae.knobStyle),"onchange"in ae&&n(16,M=ae.onchange),"onrelease"in ae&&n(17,R=ae.onrelease),"direction"in ae&&n(6,k=ae.direction),"getValue"in ae&&n(18,T=ae.getValue),"setValue"in ae&&n(19,P=ae.setValue),"class"in ae&&n(7,D=ae.class)},e.$$.update=()=>{e.$$.dirty[0]&294912&&n(8,o=y!==void 0?T(y):0),e.$$.dirty[0]&3&&(i=m-h),e.$$.dirty[0]&259&&n(20,r=ll(o,h,m)*100),e.$$.dirty[0]&64&&n(21,s=k.toUpperCase()),e.$$.dirty[0]&64&&n(22,l=k==="x"?"Width":"Height"),e.$$.dirty[0]&4194304&&(a=`offset${l}`),e.$$.dirty[0]&2097152&&(c=`offset${s}`),e.$$.dirty[0]&2097152&&(u=`page${s}`),e.$$.dirty[0]&3145728&&n(10,f=`transform: translate${s}(${r}%)`)},[h,m,b,p,w,C,k,D,o,x,f,z,ee,ge,be,y,M,R,T,P,r,s,l,ft]}var La=class extends bt{constructor(t){super();pt(this,t,t_,e_,gt,{min:0,max:1,step:2,id:3,value:15,trackStyle:4,knobStyle:5,onchange:16,onrelease:17,direction:6,getValue:18,setValue:19,class:7},[-1,-1])}};function x1(e){let t,n;return t=new go({props:{class:"PinturaButtonIcon",$$slots:{default:[n_]},$$scope:{ctx:e}}}),{c(){Pe(t.$$.fragment)},m(o,i){ke(t,o,i),n=!0},p(o,i){let r={};i&524292&&(r.$$scope={dirty:i,ctx:o}),t.$set(r)},i(o){n||(I(t.$$.fragment,o),n=!0)},o(o){F(t.$$.fragment,o),n=!1},d(o){Ce(t,o)}}}function n_(e){let t;return{c(){t=Rn("g")},m(n,o){U(n,t,o),t.innerHTML=e[2]},p(n,o){o&4&&(t.innerHTML=n[2])},d(n){n&&H(t)}}}function o_(e){let t,n,o,i,r,s,l,a,c=e[2]&&x1(e);return{c(){t=$("span"),c&&c.c(),n=xe(),o=$("span"),i=Ot(e[8]),S(o,"class",r=ze(["PinturaButtonLabel",e[3],e[5]&&"implicit"])),S(t,"slot","label"),S(t,"title",s=Nn(e[1],e[6])),S(t,"class",l=ze(["PinturaButtonInner",e[4]]))},m(u,f){U(u,t,f),c&&c.m(t,null),ie(t,n),ie(t,o),ie(o,i),a=!0},p(u,f){u[2]?c?(c.p(u,f),f&4&&I(c,1)):(c=x1(u),c.c(),I(c,1),c.m(t,n)):c&&(Ze(),F(c,1,1,()=>{c=null}),je()),(!a||f&256)&&Zt(i,u[8]),(!a||f&40&&r!==(r=ze(["PinturaButtonLabel",u[3],u[5]&&"implicit"])))&&S(o,"class",r),(!a||f&66&&s!==(s=Nn(u[1],u[6])))&&S(t,"title",s),(!a||f&16&&l!==(l=ze(["PinturaButtonInner",u[4]])))&&S(t,"class",l)},i(u){a||(I(c),a=!0)},o(u){F(c),a=!1},d(u){u&&H(t),c&&c.d()}}}function i_(e){let t,n,o,i,r,s=[e[11],{value:e[7]},{onchange:e[10]}],l={};for(let a=0;a<s.length;a+=1)l=Jt(l,s[a]);return n=new La({props:l}),{c(){t=$("div"),Pe(n.$$.fragment),S(t,"slot","details")},m(a,c){U(a,t,c),ke(n,t,null),o=!0,i||(r=le(t,"keydown",e[9]),i=!0)},p(a,c){let u=c&3200?Hn(s,[c&2048&&Io(a[11]),c&128&&{value:a[7]},c&1024&&{onchange:a[10]}]):{};n.$set(u)},i(a){o||(I(n.$$.fragment,a),o=!0)},o(a){F(n.$$.fragment,a),o=!1},d(a){a&&H(t),Ce(n),i=!1,r()}}}function r_(e){let t,n;return t=new rl({props:{panelClass:"PinturaSliderPanel",buttonClass:ze(["PinturaSliderButton",e[0],e[5]&&"PinturaSliderIconOnly"]),$$slots:{details:[i_],label:[o_]},$$scope:{ctx:e}}}),{c(){Pe(t.$$.fragment)},m(o,i){ke(t,o,i),n=!0},p(o,[i]){let r={};i&33&&(r.buttonClass=ze(["PinturaSliderButton",o[0],o[5]&&"PinturaSliderIconOnly"])),i&526846&&(r.$$scope={dirty:i,ctx:o}),t.$set(r)},i(o){n||(I(t.$$.fragment,o),n=!0)},o(o){F(t.$$.fragment,o),n=!1},d(o){Ce(t,o)}}}function s_(e,t,n){let o=["class","title","label","icon","labelClass","innerClass","hideLabel","locale","value","onchange"],i=qd(t,o),{class:r=void 0}=t,{title:s=void 0}=t,{label:l=Math.round}=t,{icon:a=void 0}=t,{labelClass:c=void 0}=t,{innerClass:u=void 0}=t,{hideLabel:f=!1}=t,{locale:h=void 0}=t,{value:m=void 0}=t,{onchange:b=ct}=t,{min:p,max:y,getValue:w=Ft}=i,C,M=P=>{/tab/i.test(P.key)&&P.preventDefault()},R=P=>Qn(l)?l(w(P),p,y):l,k=P=>{T(P),b(P)},T=P=>n(8,C=R(P));return e.$$set=P=>{t=Jt(Jt({},t),Wc(P)),n(11,i=qd(t,o)),"class"in P&&n(0,r=P.class),"title"in P&&n(1,s=P.title),"label"in P&&n(12,l=P.label),"icon"in P&&n(2,a=P.icon),"labelClass"in P&&n(3,c=P.labelClass),"innerClass"in P&&n(4,u=P.innerClass),"hideLabel"in P&&n(5,f=P.hideLabel),"locale"in P&&n(6,h=P.locale),"value"in P&&n(7,m=P.value),"onchange"in P&&n(13,b=P.onchange)},e.$$.update=()=>{e.$$.dirty&128&&T(m)},[r,s,a,c,u,f,h,m,C,M,k,i,l,b]}var vu=class extends bt{constructor(t){super();pt(this,t,s_,r_,gt,{class:0,title:1,label:12,icon:2,labelClass:3,innerClass:4,hideLabel:5,locale:6,value:7,onchange:13})}};function O1(e,t,n){let o=e.slice();return o[7]=t[n][0],o[8]=t[n][1],o[9]=t[n][2],o[0]=t[n][3],o}function l_(e){let t,n,o,i=[e[9]];var r=e[1][e[7]]||e[7];function s(l){let a={};for(let c=0;c<i.length;c+=1)a=Jt(a,i[c]);return{props:a}}return r&&(t=new r(s())),{c(){t&&Pe(t.$$.fragment),n=en()},m(l,a){t&&ke(t,l,a),U(l,n,a),o=!0},p(l,a){let c=a&1?Hn(i,[Io(l[9])]):{};if(r!==(r=l[1][l[7]]||l[7])){if(t){Ze();let u=t;F(u.$$.fragment,1,0,()=>{Ce(u,1)}),je()}r?(t=new r(s()),Pe(t.$$.fragment),I(t.$$.fragment,1),ke(t,n.parentNode,n)):t=null}else r&&t.$set(c)},i(l){o||(t&&I(t.$$.fragment,l),o=!0)},o(l){t&&F(t.$$.fragment,l),o=!1},d(l){l&&H(n),t&&Ce(t,l)}}}function a_(e){let t,n;return t=new c1({props:{name:e[7],attributes:e[2](e[9]),$$slots:{default:[d_]},$$scope:{ctx:e}}}),{c(){Pe(t.$$.fragment)},m(o,i){ke(t,o,i),n=!0},p(o,i){let r={};i&1&&(r.name=o[7]),i&1&&(r.attributes=o[2](o[9])),i&4097&&(r.$$scope={dirty:i,ctx:o}),t.$set(r)},i(o){n||(I(t.$$.fragment,o),n=!0)},o(o){F(t.$$.fragment,o),n=!1},d(o){Ce(t,o)}}}function c_(e){let t,n=e[9].innerHTML+"",o;return{c(){o=en(),t=new eh(o)},m(i,r){t.m(n,i,r),U(i,o,r)},p(i,r){r&1&&n!==(n=i[9].innerHTML+"")&&t.p(n)},i:tt,o:tt,d(i){i&&H(o),i&&t.d()}}}function u_(e){let t=e[9].textContent+"",n;return{c(){n=Ot(t)},m(o,i){U(o,n,i)},p(o,i){i&1&&t!==(t=o[9].textContent+"")&&Zt(n,t)},i:tt,o:tt,d(o){o&&H(n)}}}function f_(e){let t,n;return t=new Fa({props:{items:e[0],discardEmptyItems:!0}}),{c(){Pe(t.$$.fragment)},m(o,i){ke(t,o,i),n=!0},p(o,i){let r={};i&1&&(r.items=o[0]),t.$set(r)},i(o){n||(I(t.$$.fragment,o),n=!0)},o(o){F(t.$$.fragment,o),n=!1},d(o){Ce(t,o)}}}function d_(e){let t,n,o,i,r=[f_,u_,c_],s=[];function l(a,c){return a[0]&&a[0].length?0:a[9].textContent?1:a[9].innerHTML?2:-1}return~(t=l(e))&&(n=s[t]=r[t](e)),{c(){n&&n.c(),o=xe()},m(a,c){~t&&s[t].m(a,c),U(a,o,c),i=!0},p(a,c){let u=t;t=l(a),t===u?~t&&s[t].p(a,c):(n&&(Ze(),F(s[u],1,1,()=>{s[u]=null}),je()),~t?(n=s[t],n?n.p(a,c):(n=s[t]=r[t](a),n.c()),I(n,1),n.m(o.parentNode,o)):n=null)},i(a){i||(I(n),i=!0)},o(a){F(n),i=!1},d(a){~t&&s[t].d(a),a&&H(o)}}}function B1(e,t){let n,o,i,r,s,l,a=[a_,l_],c=[];function u(f,h){return h&1&&(o=!f[3](f[7])),o?0:1}return i=u(t,-1),r=c[i]=a[i](t),{key:e,first:null,c(){n=en(),r.c(),s=en(),this.first=n},m(f,h){U(f,n,h),c[i].m(f,h),U(f,s,h),l=!0},p(f,h){t=f;let m=i;i=u(t,h),i===m?c[i].p(t,h):(Ze(),F(c[m],1,1,()=>{c[m]=null}),je(),r=c[i],r?r.p(t,h):(r=c[i]=a[i](t),r.c()),I(r,1),r.m(s.parentNode,s))},i(f){l||(I(r),l=!0)},o(f){F(r),l=!1},d(f){f&&H(n),c[i].d(f),f&&H(s)}}}function h_(e){let t=[],n=new Map,o,i,r=e[0],s=l=>l[8];for(let l=0;l<r.length;l+=1){let a=O1(e,r,l),c=s(a);n.set(c,t[l]=B1(c,a))}return{c(){for(let l=0;l<t.length;l+=1)t[l].c();o=en()},m(l,a){for(let c=0;c<t.length;c+=1)t[c].m(l,a);U(l,o,a),i=!0},p(l,[a]){a&15&&(r=l[0],Ze(),t=Jr(t,a,s,1,l,r,n,o.parentNode,Js,B1,o,O1),je())},i(l){if(!i){for(let a=0;a<r.length;a+=1)I(t[a]);i=!0}},o(l){for(let a=0;a<t.length;a+=1)F(t[a]);i=!1},d(l){for(let a=0;a<t.length;a+=1)t[a].d(l);l&&H(o)}}}function m_(e,t,n){let o,{items:i}=t,{discardEmptyItems:r=!0}=t,s={Button:es,Dropdown:Uo,Panel:F1,Slider:vu},l=(u={})=>{let{textContent:f,innerHTML:h,...m}=u;return m},a=u=>!Ht(u)||!!s[u],c=u=>{if(!u)return!1;let[f,,h,m=[]]=u;return a(f)?!0:m.some(c)||h.textContent||h.innerHTML};return e.$$set=u=>{"items"in u&&n(4,i=u.items),"discardEmptyItems"in u&&n(5,r=u.discardEmptyItems)},e.$$.update=()=>{e.$$.dirty&48&&n(0,o=(i&&r?i.filter(c):i)||[])},[o,s,l,a,i,r]}var Fa=class extends bt{constructor(t){super();pt(this,t,m_,h_,gt,{items:4,discardEmptyItems:5})}},g_=e=>{let t=Tt("canvas",{width:e.width,height:e.height});return t.getContext("2d").drawImage(e,0,0),t},b_=["aspectRatio","isRotatedSideways","flip","cropSize"],D1=tu.map(([e])=>e).filter(e=>!b_.includes(e)),p_=function(e,t,n){let o=[];return{set:t,update:n,publish:i=>{o.forEach(r=>r(i))},subscribe:i=>(o.push(i),e(i),()=>{o=o.filter(r=>r!==i)})}},y_=()=>{let e,t,n=D1.reduce((i,r)=>(i[r]=p_(s=>{if(!t)return s();t.stores[r].subscribe(s)()},s=>{!t||t.stores[r].set(s)},s=>{!t||t.stores[r].update(s)}),i),{});return{update:i=>{if(t=i,e&&(e.forEach(r=>r()),e=void 0),!i){n.file.publish(void 0),n.loadState.publish(void 0);return}e=D1.map(r=>i.stores[r].subscribe(s=>{n[r].publish(s)}))},stores:n,destroy:()=>{e&&e.forEach(i=>i())}}},S_=(e,t=!0)=>n=>{n.type==="ping"&&(t&&n.stopPropagation(),e(n.detail.type,n.detail.data))},z1=(e,t)=>new CustomEvent("ping",{detail:{type:e,data:t},cancelable:!0,bubbles:!0}),__=e=>/textarea/i.test(e.nodeName),w_=e=>/date|email|number|search|text|url/.test(e.type),xa=e=>__(e)||w_(e)||e.isContentEditable,W1=(e,t)=>(t?hu(e,t):e).replace(/([a-z])([A-Z])/g,"$1-$2").replace(/\s+/g,"-").toLowerCase(),k_=(e,t)=>{let n=matchMedia(e);return n.addListener(t),t(n),{get matches(){return n.matches},destroy:()=>n.removeListener(t)}},V1=(e,t=Ft)=>{let{subscribe:n,set:o}=We(void 0),i=k_(e,({matches:r})=>o(t(r)));return{subscribe:n,destroy:i.destroy}},C_=()=>{if(!Po())return!1;let e=navigator.userAgent.match(/OS (\d+)_(\d+)_?(\d+)?/i)||[],[,t,n]=e.map(o=>parseInt(o,10)||0);return t>13||t===13&&n>=4},T_=(e,t,n,o,i,r,s,l,a,c,u)=>{if(!e||!t||!n||!o||!l)return;l*=r;let f=Rc(et(t)),h=xt(f),m=xt(e),b=An(n),p=xt(b),y=dh(n,o,a),w=xt(y),C=kn(At(p),w),M=kn(At(m),h);C.x+=M.x,C.y+=M.y;let R=Hf(At(C));R.x+=M.x,R.y+=M.y;let k=xt(Vr(Vr(et(i),s),e)),T=kn(k,m);return Vn(C,T),{origin:R,translation:C,rotation:{x:u?Math.PI:0,y:c?Math.PI:0,z:a},scale:l}},R_=(e,t)=>{let{sub:n,pub:o}=Mo(),i=[],r=We(0),s=[],l=()=>s.forEach(c=>c({index:Wo(r),length:i.length})),a={get index(){return Wo(r)},set index(c){c=Number.isInteger(c)?c:0,c=Mt(c,0,i.length-1),r.set(c),t(i[a.index]),l()},get state(){return i[i.length-1]},length(){return i.length},undo(){let c=a.index--;return o("undo",c),c},redo(){let c=a.index++;return o("redo",a.index),c},revert(){i.length=1,a.index=0,o("revert")},write(c){c&&t({...e(),...c});let u=e(),f=i[i.length-1];JSON.stringify(u)!==JSON.stringify(f)&&(i.length=a.index+1,i.push(u),r.set(i.length-1),l())},set(c={}){i.length=0,a.index=0;let u=Array.isArray(c)?c:[c];i.push(...u),a.index=i.length-1},get(){return[...i]},subscribe(c){return s.push(c),c({index:a.index,length:i.length}),()=>s.splice(s.indexOf(c),1)},on:n};return a},P_=()=>on()&&!!window.chrome,M_=async e=>Ds(await zs(e)),H1=(e,t,n)=>new Promise((o,i)=>{(async()=>{let r=await t.read(e),s=a=>Df(a,n).then(c=>t.apply(c,r)).then(o).catch(i);if(Bf(e)||!Of()||js()||Po())return s(e);let l;try{l=await Nl((a,c)=>createImageBitmap(a).then(u=>c(null,u)).catch(c),[e])}catch(a){}if(!l||!l.width)return s(e);if(!await Lr())return o(t.apply(l,r));if(P_()&&r>1)return o(await M_(l));o(l)})()}),N1=(e,t)=>new Promise(async n=>{if(e.width<t.width&&e.height<t.height)return n(e);let o=Math.min(t.width/e.width,t.height/e.height),i=o*e.width,r=o*e.height,s=Tt("canvas",{width:i,height:r}),l=s.getContext("2d"),a=Hl(e)?await zs(e):e;l.drawImage(a,0,0,i,r),n(Ds(s))}),I_=e=>{let[,t,n,o]=e.split("");e=e.length===4?`#${t}${t}${n}${n}${o}${o}`:e;let[,i,r,s]=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return[i,r,s].map(l=>parseInt(l,16)/255)},Lu=e=>{if(e=e.trim(),/^rgba/.test(e))return e.substr(5).split(",").map(parseFloat).map((t,n)=>t/(n===3?1:255));if(/^rgb/.test(e))return e.substr(4).split(",").map(parseFloat).map(t=>t/255);if(/^#/.test(e))return I_(e);if(/[0-9]{1,3}\s?,\s?[0-9]{1,3}\s?,\s?[0-9]{1,3}/.test(e))return e.split(",").map(t=>parseInt(t,10)).map(t=>t/255)},Fu=null,A_=()=>{if(Fu===null){let e=Tt("canvas");Fu=!!wa(e),rn(e),e=void 0}return Fu},E_=e=>/^image/.test(e.type)&&!/svg/.test(e.type),U1=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],Xi={precision:1e-4},Oa={precision:Xi.precision*.01},v_=(e,t,n={})=>{let{resize:o=1,opacity:i=0}=n,r={opacity:[qe(i,{...Xi,stiffness:.1}),Ft],resize:[qe(o,{...Xi,stiffness:.1}),Ft],translation:[qe(void 0,Xi),Ft],rotation:[qe(void 0,Oa),Ft],origin:[qe(void 0,Xi),Ft],scale:[qe(void 0,Oa),Ft],gamma:[qe(void 0,Oa),f=>f||1],vignette:[qe(void 0,Oa),f=>f||0],colorMatrix:[qe([...U1],Xi),f=>f||[...U1]],convolutionMatrix:[We(void 0),f=>f&&f.clarity||void 0],backgroundColor:[qe(void 0,Xi),Ft]},s=Object.entries(r).map(([f,h])=>[f,h[0]]),l=s.map(([,f])=>f),a=Object.entries(r).reduce((f,[h,m])=>{let[b,p]=m;return f[h]=(y,w)=>b.set(p(y),w),f},{}),c,u=Pt(l,f=>(c=f.reduce((h,m,b)=>{let p=s[b][0];return h[p]=m,h},{}),c.data=e,c.size=t,c.scale*=f[1],c));return u.get=()=>c,u.set=(f,h)=>{let m={hard:!h};Object.entries(f).forEach(([b,p])=>{!a[b]||a[b](p,m)})},u},L_=()=>{let e=[],t=[],n=[],o=(b,p)=>{let y=e.indexOf(b);y<0||(n[y]=p,i())},i=()=>{t.forEach(b=>b(n))},r=b=>{b.unsub=b.subscribe(p=>o(b,p)),i()};return{get length(){return e.length},clear:()=>{e.forEach(b=>b.unsub()),e.length=0,n.length=0},unshift:b=>{e.unshift(b),r(b)},get:b=>e[b],push:b=>{e.push(b),r(b)},remove:b=>{b.unsub();let p=e.indexOf(b);e.splice(p,1),n.splice(p,1)},forEach:b=>e.forEach(b),filter:b=>e.filter(b),subscribe:b=>(t.push(b),()=>{t.splice(t.indexOf(b),1)})}},Z1=e=>e[0]<.25&&e[1]<.25&&e[2]<.25,F_=()=>new Promise(e=>{let t=Tt("input",{style:"position:absolute;visibility:hidden;width:0;height:0;",type:"file",accept:"image/*"}),n=()=>{let[o]=t.files;t.parentNode&&t.remove(),t.removeEventListener("change",n),e(o)};t.addEventListener("change",n),Po()&&document.body.append(t),t.click()}),x_=e=>{try{return e()}catch(t){console.error(t)}},{window:Yi}=lh;function j1(e){let t,n,o,i=e[29]&&G1(e),r=e[31]&&K1(e);return{c(){i&&i.c(),t=xe(),r&&r.c(),n=en()},m(s,l){i&&i.m(s,l),U(s,t,l),r&&r.m(s,l),U(s,n,l),o=!0},p(s,l){s[29]?i?(i.p(s,l),l[0]&536870912&&I(i,1)):(i=G1(s),i.c(),I(i,1),i.m(t.parentNode,t)):i&&(Ze(),F(i,1,1,()=>{i=null}),je()),s[31]?r?(r.p(s,l),l[1]&1&&I(r,1)):(r=K1(s),r.c(),I(r,1),r.m(n.parentNode,n)):r&&(Ze(),F(r,1,1,()=>{r=null}),je())},i(s){o||(I(i),I(r),o=!0)},o(s){F(i),F(r),o=!1},d(s){i&&i.d(s),s&&H(t),r&&r.d(s),s&&H(n)}}}function G1(e){let t,n,o,i,r,s,l=[B_,O_],a=[];function c(u,f){return u[26]?0:u[14]?1:-1}return~(o=c(e))&&(i=a[o]=l[o](e)),{c(){t=$("div"),n=$("p"),i&&i.c(),S(n,"style",e[49]),S(t,"class","PinturaStatus"),S(t,"style",r=`opacity: ${e[28]}`)},m(u,f){U(u,t,f),ie(t,n),~o&&a[o].m(n,null),s=!0},p(u,f){let h=o;o=c(u),o===h?~o&&a[o].p(u,f):(i&&(Ze(),F(a[h],1,1,()=>{a[h]=null}),je()),~o?(i=a[o],i?i.p(u,f):(i=a[o]=l[o](u),i.c()),I(i,1),i.m(n,null)):i=null),(!s||f[1]&262144)&&S(n,"style",u[49]),(!s||f[0]&268435456&&r!==(r=`opacity: ${u[28]}`))&&S(t,"style",r)},i(u){s||(I(i),s=!0)},o(u){F(i),s=!1},d(u){u&&H(t),~o&&a[o].d()}}}function O_(e){let t,n,o,i;t=new Tu({props:{text:e[14].text||"",onmeasure:e[133]}});let r=e[14].aside&&X1(e);return{c(){Pe(t.$$.fragment),n=xe(),r&&r.c(),o=en()},m(s,l){ke(t,s,l),U(s,n,l),r&&r.m(s,l),U(s,o,l),i=!0},p(s,l){let a={};l[0]&16384&&(a.text=s[14].text||""),t.$set(a),s[14].aside?r?(r.p(s,l),l[0]&16384&&I(r,1)):(r=X1(s),r.c(),I(r,1),r.m(o.parentNode,o)):r&&(Ze(),F(r,1,1,()=>{r=null}),je())},i(s){i||(I(t.$$.fragment,s),I(r),i=!0)},o(s){F(t.$$.fragment,s),F(r),i=!1},d(s){Ce(t,s),s&&H(n),r&&r.d(s),s&&H(o)}}}function B_(e){let t,n,o,i;return t=new Tu({props:{text:e[26],onmeasure:e[133]}}),o=new Ru({props:{class:"PinturaStatusIcon",offset:e[53],opacity:e[54],$$slots:{default:[W_]},$$scope:{ctx:e}}}),{c(){Pe(t.$$.fragment),n=xe(),Pe(o.$$.fragment)},m(r,s){ke(t,r,s),U(r,n,s),ke(o,r,s),i=!0},p(r,s){let l={};s[0]&67108864&&(l.text=r[26]),t.$set(l);let a={};s[1]&4194304&&(a.offset=r[53]),s[1]&8388608&&(a.opacity=r[54]),s[0]&4|s[12]&268435456&&(a.$$scope={dirty:s,ctx:r}),o.$set(a)},i(r){i||(I(t.$$.fragment,r),I(o.$$.fragment,r),i=!0)},o(r){F(t.$$.fragment,r),F(o.$$.fragment,r),i=!1},d(r){Ce(t,r),r&&H(n),Ce(o,r)}}}function X1(e){let t,n;return t=new Ru({props:{class:"PinturaStatusButton",offset:e[53],opacity:e[54],$$slots:{default:[D_]},$$scope:{ctx:e}}}),{c(){Pe(t.$$.fragment)},m(o,i){ke(t,o,i),n=!0},p(o,i){let r={};i[1]&4194304&&(r.offset=o[53]),i[1]&8388608&&(r.opacity=o[54]),i[0]&16384|i[12]&268435456&&(r.$$scope={dirty:i,ctx:o}),t.$set(r)},i(o){n||(I(t.$$.fragment,o),n=!0)},o(o){F(t.$$.fragment,o),n=!1},d(o){Ce(t,o)}}}function Y1(e){let t,n;return t=new a1({props:{progress:e[14].progressIndicator.progress}}),{c(){Pe(t.$$.fragment)},m(o,i){ke(t,o,i),n=!0},p(o,i){let r={};i[0]&16384&&(r.progress=o[14].progressIndicator.progress),t.$set(r)},i(o){n||(I(t.$$.fragment,o),n=!0)},o(o){F(t.$$.fragment,o),n=!1},d(o){Ce(t,o)}}}function q1(e){let t,n,o=[e[14].closeButton,{hideLabel:!0}],i={};for(let r=0;r<o.length;r+=1)i=Jt(i,o[r]);return t=new es({props:i}),{c(){Pe(t.$$.fragment)},m(r,s){ke(t,r,s),n=!0},p(r,s){let l=s[0]&16384?Hn(o,[Io(r[14].closeButton),o[1]]):{};t.$set(l)},i(r){n||(I(t.$$.fragment,r),n=!0)},o(r){F(t.$$.fragment,r),n=!1},d(r){Ce(t,r)}}}function D_(e){let t,n,o,i=e[14].progressIndicator.visible&&Y1(e),r=e[14].closeButton&&e[14].text&&q1(e);return{c(){i&&i.c(),t=xe(),r&&r.c(),n=en()},m(s,l){i&&i.m(s,l),U(s,t,l),r&&r.m(s,l),U(s,n,l),o=!0},p(s,l){s[14].progressIndicator.visible?i?(i.p(s,l),l[0]&16384&&I(i,1)):(i=Y1(s),i.c(),I(i,1),i.m(t.parentNode,t)):i&&(Ze(),F(i,1,1,()=>{i=null}),je()),s[14].closeButton&&s[14].text?r?(r.p(s,l),l[0]&16384&&I(r,1)):(r=q1(s),r.c(),I(r,1),r.m(n.parentNode,n)):r&&(Ze(),F(r,1,1,()=>{r=null}),je())},i(s){o||(I(i),I(r),o=!0)},o(s){F(i),F(r),o=!1},d(s){i&&i.d(s),s&&H(t),r&&r.d(s),s&&H(n)}}}function z_(e){let t,n=e[2].iconSupportError+"";return{c(){t=Rn("g")},m(o,i){U(o,t,i),t.innerHTML=n},p(o,i){i[0]&4&&n!==(n=o[2].iconSupportError+"")&&(t.innerHTML=n)},d(o){o&&H(t)}}}function W_(e){let t,n;return t=new go({props:{$$slots:{default:[z_]},$$scope:{ctx:e}}}),{c(){Pe(t.$$.fragment)},m(o,i){ke(t,o,i),n=!0},p(o,i){let r={};i[0]&4|i[12]&268435456&&(r.$$scope={dirty:i,ctx:o}),t.$set(r)},i(o){n||(I(t.$$.fragment,o),n=!0)},o(o){F(t.$$.fragment,o),n=!1},d(o){Ce(t,o)}}}function K1(e){let t,n,o,i,r,s,l,a,c,u=e[6]&&J1(e),f=e[19]&&e[17]&&Q1(e),h=[Z_,U_],m=[];function b(p,y){return p[19]?0:1}return o=b(e),i=m[o]=h[o](e),s=new Zh({props:{animate:e[40],pixelRatio:e[57],textPixelRatio:e[7],backgroundColor:e[22],maskRect:e[21],maskOpacity:e[48]?e[48].maskOpacity:1,maskFrameOpacity:.95,images:e[25],interfaceImages:e[58],loadImageData:e[9],willRequestResource:e[59],willRender:e[287],didRender:e[288]}}),{c(){u&&u.c(),t=xe(),f&&f.c(),n=xe(),i.c(),r=xe(),Pe(s.$$.fragment),l=xe(),a=$("div"),S(a,"class","PinturaRootPortal")},m(p,y){u&&u.m(p,y),U(p,t,y),f&&f.m(p,y),U(p,n,y),m[o].m(p,y),U(p,r,y),ke(s,p,y),U(p,l,y),U(p,a,y),e[289](a),c=!0},p(p,y){p[6]?u?(u.p(p,y),y[0]&64&&I(u,1)):(u=J1(p),u.c(),I(u,1),u.m(t.parentNode,t)):u&&(Ze(),F(u,1,1,()=>{u=null}),je()),p[19]&&p[17]?f?(f.p(p,y),y[0]&655360&&I(f,1)):(f=Q1(p),f.c(),I(f,1),f.m(n.parentNode,n)):f&&(Ze(),F(f,1,1,()=>{f=null}),je());let w=o;o=b(p),o===w?m[o].p(p,y):(Ze(),F(m[w],1,1,()=>{m[w]=null}),je(),i=m[o],i?i.p(p,y):(i=m[o]=h[o](p),i.c()),I(i,1),i.m(r.parentNode,r));let C={};y[1]&512&&(C.animate=p[40]),y[1]&67108864&&(C.pixelRatio=p[57]),y[0]&128&&(C.textPixelRatio=p[7]),y[0]&4194304&&(C.backgroundColor=p[22]),y[0]&2097152&&(C.maskRect=p[21]),y[1]&131072&&(C.maskOpacity=p[48]?p[48].maskOpacity:1),y[0]&33554432&&(C.images=p[25]),y[1]&134217728&&(C.interfaceImages=p[58]),y[0]&512&&(C.loadImageData=p[9]),y[1]&268435456&&(C.willRequestResource=p[59]),y[0]&1073774624|y[1]&536870926&&(C.willRender=p[287]),y[1]&480&&(C.didRender=p[288]),s.$set(C)},i(p){c||(I(u),I(f),I(i),I(s.$$.fragment,p),c=!0)},o(p){F(u),F(f),F(i),F(s.$$.fragment,p),c=!1},d(p){u&&u.d(p),p&&H(t),f&&f.d(p),p&&H(n),m[o].d(p),p&&H(r),Ce(s,p),p&&H(l),p&&H(a),e[289](null)}}}function J1(e){let t,n,o,i,r;return n=new Fa({props:{items:e[50]}}),{c(){t=$("div"),Pe(n.$$.fragment),S(t,"class","PinturaNav PinturaNavTools")},m(s,l){U(s,t,l),ke(n,t,null),o=!0,i||(r=[le(t,"measure",e[272]),vt(Ln.call(null,t))],i=!0)},p(s,l){let a={};l[1]&524288&&(a.items=s[50]),n.$set(a)},i(s){o||(I(n.$$.fragment,s),o=!0)},o(s){F(n.$$.fragment,s),o=!1},d(s){s&&H(t),Ce(n),i=!1,Et(r)}}}function Q1(e){let t,n,o;return n=new s1({props:{elasticity:e[4]*Ou,scrollDirection:e[46]?"y":"x",$$slots:{default:[N_]},$$scope:{ctx:e}}}),{c(){t=$("div"),Pe(n.$$.fragment),S(t,"class","PinturaNav PinturaNavMain")},m(i,r){U(i,t,r),ke(n,t,null),o=!0},p(i,r){let s={};r[0]&16&&(s.elasticity=i[4]*Ou),r[1]&32768&&(s.scrollDirection=i[46]?"y":"x"),r[0]&1048576|r[1]&6144|r[12]&268435456&&(s.$$scope={dirty:r,ctx:i}),n.$set(s)},i(i){o||(I(n.$$.fragment,i),o=!0)},o(i){F(n.$$.fragment,i),o=!1},d(i){i&&H(t),Ce(n)}}}function V_(e){let t,n=e[399].icon+"";return{c(){t=Rn("g")},m(o,i){U(o,t,i),t.innerHTML=n},p(o,i){i[12]&134217728&&n!==(n=o[399].icon+"")&&(t.innerHTML=n)},d(o){o&&H(t)}}}function H_(e){let t,n,o,i=e[399].label+"",r,s;return t=new go({props:{$$slots:{default:[V_]},$$scope:{ctx:e}}}),{c(){Pe(t.$$.fragment),n=xe(),o=$("span"),r=Ot(i)},m(l,a){ke(t,l,a),U(l,n,a),U(l,o,a),ie(o,r),s=!0},p(l,a){let c={};a[12]&402653184&&(c.$$scope={dirty:a,ctx:l}),t.$set(c),(!s||a[12]&134217728)&&i!==(i=l[399].label+"")&&Zt(r,i)},i(l){s||(I(t.$$.fragment,l),s=!0)},o(l){F(t.$$.fragment,l),s=!1},d(l){Ce(t,l),l&&H(n),l&&H(o)}}}function N_(e){let t,n,o=[e[42],{tabs:e[43]}],i={$$slots:{default:[H_,({tab:r})=>({399:r}),({tab:r})=>[0,0,0,0,0,0,0,0,0,0,0,0,r?134217728:0]]},$$scope:{ctx:e}};for(let r=0;r<o.length;r+=1)i=Jt(i,o[r]);return t=new Su({props:i}),t.$on("select",e[273]),{c(){Pe(t.$$.fragment)},m(r,s){ke(t,r,s),n=!0},p(r,s){let l=s[1]&6144?Hn(o,[s[1]&2048&&Io(r[42]),s[1]&4096&&{tabs:r[43]}]):{};s[12]&402653184&&(l.$$scope={dirty:s,ctx:r}),t.$set(l)},i(r){n||(I(t.$$.fragment,r),n=!0)},o(r){F(t.$$.fragment,r),n=!1},d(r){Ce(t,r)}}}function U_(e){let t,n,o;function i(s){e[282](s)}let r={class:"PinturaMain",content:{...e[23].find(e[281]),props:e[8][e[20]]},locale:e[2],isAnimated:e[40],stores:e[123]};return e[0][e[20]]!==void 0&&(r.component=e[0][e[20]]),t=new ku({props:r}),Bt.push(()=>Hi(t,"component",i)),t.$on("measure",e[283]),t.$on("show",e[284]),t.$on("hide",e[285]),t.$on("fade",e[286]),{c(){Pe(t.$$.fragment)},m(s,l){ke(t,s,l),o=!0},p(s,l){let a={};l[0]&9437440&&(a.content={...s[23].find(s[281]),props:s[8][s[20]]}),l[0]&4&&(a.locale=s[2]),l[1]&512&&(a.isAnimated=s[40]),!n&&l[0]&1048577&&(n=!0,a.component=s[0][s[20]],Kr(()=>n=!1)),t.$set(a)},i(s){o||(I(t.$$.fragment,s),o=!0)},o(s){F(t.$$.fragment,s),o=!1},d(s){Ce(t,s)}}}function Z_(e){let t,n,o=[{class:"PinturaMain"},{visible:e[35]},e[42],{panels:e[44]}],i={$$slots:{default:[j_,({panel:r,panelIsActive:s})=>({397:r,398:s}),({panel:r,panelIsActive:s})=>[0,0,0,0,0,0,0,0,0,0,0,0,(r?33554432:0)|(s?67108864:0)]]},$$scope:{ctx:e}};for(let r=0;r<o.length;r+=1)i=Jt(i,o[r]);return t=new _u({props:i}),t.$on("measure",e[280]),{c(){Pe(t.$$.fragment)},m(r,s){ke(t,r,s),n=!0},p(r,s){let l=s[1]&10256?Hn(o,[o[0],s[1]&16&&{visible:r[35]},s[1]&2048&&Io(r[42]),s[1]&8192&&{panels:r[44]}]):{};s[0]&25166085|s[1]&33554960|s[12]&369098752&&(l.$$scope={dirty:s,ctx:r}),t.$set(l)},i(r){n||(I(t.$$.fragment,r),n=!0)},o(r){F(t.$$.fragment,r),n=!1},d(r){Ce(t,r)}}}function j_(e){let t,n,o;function i(...u){return e[274](e[397],...u)}function r(u){e[275](u,e[397])}function s(){return e[277](e[397])}function l(){return e[278](e[397])}function a(...u){return e[279](e[397],...u)}let c={content:{...e[23].find(i),props:e[8][e[397]]},locale:e[2],isActive:e[398],isAnimated:e[40],stores:e[123]};return e[0][e[397]]!==void 0&&(c.component=e[0][e[397]]),t=new ku({props:c}),Bt.push(()=>Hi(t,"component",r)),t.$on("measure",e[276]),t.$on("show",s),t.$on("hide",l),t.$on("fade",a),{c(){Pe(t.$$.fragment)},m(u,f){ke(t,u,f),o=!0},p(u,f){e=u;let h={};f[0]&8388864|f[12]&33554432&&(h.content={...e[23].find(i),props:e[8][e[397]]}),f[0]&4&&(h.locale=e[2]),f[12]&67108864&&(h.isActive=e[398]),f[1]&512&&(h.isAnimated=e[40]),!n&&f[0]&1|f[12]&33554432&&(n=!0,h.component=e[0][e[397]],Kr(()=>n=!1)),t.$set(h)},i(u){o||(I(t.$$.fragment,u),o=!0)},o(u){F(t.$$.fragment,u),o=!1},d(u){Ce(t,u)}}}function $1(e){let t,n;return{c(){t=$("span"),S(t,"class","PinturaEditorOverlay"),S(t,"style",n=`opacity:${e[61]}`)},m(o,i){U(o,t,i)},p(o,i){i[1]&1073741824&&n!==(n=`opacity:${o[61]}`)&&S(t,"style",n)},d(o){o&&H(t)}}}function G_(e){let t,n,o,i,r;Vi(e[271]);let s=e[51]&&j1(e),l=e[61]>0&&$1(e);return{c(){t=$("div"),s&&s.c(),n=xe(),l&&l.c(),S(t,"id",e[3]),S(t,"class",e[45]),S(t,"data-env",e[47])},m(a,c){U(a,t,c),s&&s.m(t,null),ie(t,n),l&&l.m(t,null),e[290](t),o=!0,i||(r=[le(Yi,"keydown",e[138]),le(Yi,"keyup",e[139]),le(Yi,"blur",e[140]),le(Yi,"paste",e[144]),le(Yi,"resize",e[271]),le(t,"ping",function(){jt(e[52])&&e[52].apply(this,arguments)}),le(t,"contextmenu",e[141]),le(t,"touchstart",e[134],{passive:!1}),le(t,"touchmove",e[135]),le(t,"pointermove",e[136]),le(t,"transitionend",e[124]),le(t,"dropfiles",e[142]),le(t,"measure",e[291]),le(t,"click",function(){jt(e[27]?e[143]:ct)&&(e[27]?e[143]:ct).apply(this,arguments)}),vt(Ln.call(null,t,{observeViewRect:!0})),vt(O2.call(null,t)),vt(z2.call(null,t))],i=!0)},p(a,c){e=a,e[51]?s?(s.p(e,c),c[1]&1048576&&I(s,1)):(s=j1(e),s.c(),I(s,1),s.m(t,n)):s&&(Ze(),F(s,1,1,()=>{s=null}),je()),e[61]>0?l?l.p(e,c):(l=$1(e),l.c(),l.m(t,null)):l&&(l.d(1),l=null),(!o||c[0]&8)&&S(t,"id",e[3]),(!o||c[1]&16384)&&S(t,"class",e[45]),(!o||c[1]&65536)&&S(t,"data-env",e[47])},i(a){o||(I(s),o=!0)},o(a){F(s),o=!1},d(a){a&&H(t),s&&s.d(),l&&l.d(),e[290](null),i=!1,Et(r)}}}var X_=5,Y_=1,al="stage-overlay",q_=.85,xu=64,Ou=10,K_=5;function J_(e,t,n){let o,i,r,s,l,a,c,u,f,h,m,b,p,y,w,C,M,R,k,T,P,D,x,A,g,O,j,v,G,z,B,ee,ge,ve,Oe,Ve,J,Y,ue,be,He,ft,ae,rt,V,ye,L,q,Me,Be,Se,Ge,st,Q,Ke,Je,Lt,St,N,De,X,K,re,te,pe,Le,ne,Ee,de,ot,Te,me,Ne,_e,Qe,_t,Fe,we,yt,wt,Ye,tn,Wt,dn,Un,Gt,hn,Fn,$e,bo,cn,dt,nn,ln,xn,Pn,Zn,mn,un,ht,On,Zo,gn,Ki=tt,Ha=()=>(Ki(),Ki=jr(_l,d=>n(206,gn=d)),_l),pi,Ji,yi,so,jo,Xt,Qi=tt,Qt=()=>(Qi(),Qi=jr(co,d=>n(214,Xt=d)),co),bn,Go,Xo,$i,ss,er,ls,Yo,Si,lo,Yt,as,po,qo,jn,tr,Ko,Jo,Gn,Qo,_i,Ao,wi,Bn,$o,ei,yo,So,ki,Eo,vo,Ci,cs,nr,Ti,us;W(e,L2,d=>n(211,Ji=d)),e.$$.on_destroy.push(()=>Ki()),e.$$.on_destroy.push(()=>Qi());let or=Mo(),Ri=mo(),{class:fs=void 0}=t,{layout:ir=void 0}=t,{stores:Pi}=t,{locale:lt=void 0}=t,{id:fl=void 0}=t,{util:ti=void 0}=t,{utils:pn=void 0}=t,{animations:Xn="auto"}=t,{disabled:Mi=!1}=t,{status:Dn=void 0}=t,{previewUpscale:rr=!1}=t,{elasticityMultiplier:Ii=10}=t,{willRevert:sr=()=>Promise.resolve(!0)}=t,{willProcessImage:ds=()=>Promise.resolve(!0)}=t,{willRenderCanvas:lr=Ft}=t,{willRenderToolbar:ar=Ft}=t,{willSetHistoryInitialState:cr=Ft}=t,{enableButtonExport:hs=!0}=t,{enableButtonRevert:ur=!0}=t,{enableNavigateHistory:ms=!0}=t,{enableToolbar:fr=!0}=t,{enableUtils:gs=!0}=t,{enableButtonClose:Lo=!1}=t,{enableDropImage:bs=!1}=t,{enablePasteImage:ps=!1}=t,{enableBrowseImage:dr=!1}=t,{previewImageDataMaxSize:hr=void 0}=t,{previewImageTextPixelRatio:mr=void 0}=t,{layoutDirectionPreference:ys="auto"}=t,{layoutHorizontalUtilsPreference:Ss="left"}=t,{layoutVerticalUtilsPreference:Ai="bottom"}=t,{imagePreviewSrc:Fo=void 0}=t,{imageOrienter:ni={read:()=>1,apply:d=>d}}=t,{pluginComponents:_o=void 0}=t,{pluginOptions:xo={}}=t,Na=or.sub,fn={},{root:yn}=t,wo=We({});W(e,wo,d=>n(30,Ko=d)),da("redrawTrigger",wo);let Ei=[],gr=qe();W(e,gr,d=>n(61,us=d));let vi=bu()||1024,br=Cn(vi,vi),ko=yh(),{imageSourceToImageData:Li=d=>Ht(d)?fetch(d).then(E=>{if(E.status!==200)throw`${E.status} (${E.statusText})`;return E.blob()}).then(E=>H1(E,ni,ko)).then(E=>N1(E,r)):Zs(d)?new Promise(E=>E(Ds(d))):H1(d,ni,ko).then(E=>N1(E,r))}=t,_s=y_(),{file:ws,size:pr,loadState:yr,processState:ks,cropAspectRatio:Sr,cropLimitToImage:_,crop:se,cropMinSize:Re,cropMaxSize:at,cropRange:it,cropOrigin:Ie,cropRectAspectRatio:kt,rotation:Xe,rotationRange:Rt,targetSize:Ct,flipX:Dt,flipY:Yn,backgroundColor:an,colorMatrix:Mn,convolutionMatrix:$t,gamma:In,vignette:dl,noise:Cs,decoration:oi,annotation:ii,redaction:_r,frame:Sn,state:zn}=_s.stores;W(e,ws,d=>n(205,Zo=d)),W(e,pr,d=>n(193,cn=d)),W(e,yr,d=>n(187,we=d)),W(e,ks,d=>n(250,Yt=d)),W(e,Sr,d=>n(304,_t=d)),W(e,se,d=>n(188,yt=d)),W(e,an,d=>n(270,_i=d)),W(e,oi,d=>n(33,ei=d)),W(e,ii,d=>n(32,$o=d)),W(e,_r,d=>n(267,Gn=d)),W(e,Sn,d=>n(34,yo=d)),W(e,zn,d=>n(314,so=d));let{images:wr,shapePreprocessor:kr,imageScrambler:ri,willRequestResource:si}=Pi;W(e,wr,d=>n(184,Ne=d)),W(e,kr,d=>n(185,_e=d)),W(e,ri,d=>n(269,Qo=d)),W(e,si,d=>n(59,nr=d));let o0=zn.subscribe(d=>or.pub("update",d)),i0=We(),Ts=We([0,0,0]);W(e,Ts,d=>n(22,Pn=d));let hl=We([1,1,1]);W(e,hl,d=>n(316,Ao=d));let Rs=qe([1,1,1]);W(e,Rs,d=>n(317,wi=d));let qu=We(),Ua=We();W(e,Ua,d=>n(18,Qe=d));let Cr=We();W(e,Cr,d=>n(186,Fe=d));let r0=()=>{let d=_t,E=zt(Fe);d&&d===E||(Sr.set(zt(Fe)),af())},Tr=We(Do());W(e,Tr,d=>n(41,jo=d));let Ps=We(Do());W(e,Ps,d=>n(55,Eo=d));let Rr=We();W(e,Rr,d=>n(56,vo=d));let ml=V1("(pointer: fine)",d=>d?"pointer-fine":"pointer-coarse");W(e,ml,d=>n(236,$i=d));let gl=V1("(hover: hover)",d=>d?"pointer-hover":"pointer-no-hover");W(e,gl,d=>n(237,ss=d));let bl=We(!1);W(e,bl,d=>n(189,Ye=d));let Za=Ni(void 0,d=>{let E=qe(0),Z=Ae=>{E.set(Ae?1:0)},he=[bl.subscribe(Z),E.subscribe(d)];return()=>he.forEach(Ae=>Ae())});W(e,Za,d=>n(318,Bn=d));let ja=We(rr);W(e,ja,d=>n(191,Wt=d));let Ms=We();W(e,Ms,d=>n(306,tn=d));let Ga=We();W(e,Ga,d=>n(305,wt=d));let Ku=Ni(void 0,d=>{let E=qe(void 0,{precision:1e-4}),Z=()=>{if(!yt)return;let Ae=wt===void 0||Ye,Ue=i1(yt,wt,X_*Ii);E.set(Ue,{hard:Ae})},he=[se.subscribe(Z),E.subscribe(d)];return()=>he.forEach(Ae=>Ae())}),ao=We();W(e,ao,d=>n(309,Gt=d));let pl=We();W(e,pl,d=>n(313,nn=d));let Xa=We(void 0);W(e,Xa,d=>n(310,Fn=d));let Pr={left:0,right:0,top:0,bottom:0},Ju=Pt([Sn,ao],([d,E],Z)=>{E||Z(Pr);let he=s0(E,d);nt(Pr.top,4)===nt(he.top,4)&&nt(Pr.bottom,4)===nt(he.bottom,4)&&nt(Pr.right,4)===nt(he.right,4)&&nt(Pr.left,4)===nt(he.left,4)||(Pr=he,Z(he))}),Qu=Pt([Ju],([d],E)=>{E(Object.values(d).some(Z=>Z>0))}),li=Pt([Rr,Tr,Ps],([d,E,Z],he)=>{if(!d)return he(void 0);let Ae=0;w.length===1&&!o&&(Ae=Z.y+Z.height),he(Tn(d.x+E.x,d.y+E.y+Ae,d.width,d.height))});W(e,li,d=>n(192,$e=d));let Mr=Pt([li,se],([d,E],Z)=>{if(!d||!E||!!(tn||wt))return;let Ae=Math.min(d.width/E.width,d.height/E.height),Ue=Wt?Ae:Math.min(1,Ae);Z(Ue)});W(e,Mr,d=>n(311,bo=d));let s0=(d,E)=>{if(!E||!d)return{top:0,right:0,bottom:0,left:0};let Z=Ld(E,d,s),he=vd(Z,d);return{top:Math.abs(he.top),right:Math.abs(he.right),bottom:Math.abs(he.bottom),left:Math.abs(he.left)}},Ya=We(void 0),l0=Pt([se,li],([d,E])=>{if(!(!E||!d))return Math.min(E.width/d.width,E.height/d.height)}),Is=Pt([Ya,se,ao],([d,E,Z])=>!d||!E||!Z?1:Math.min(E.width/Z.width,E.height/Z.height)*d);W(e,Is,d=>n(307,dn=d));let Ir=We(Kt());W(e,Ir,d=>n(308,Un=d));let $u=We({scalar:dn,translation:Un}),ef=()=>{$u.set({scalar:void 0,translation:Kt()})},yl=Ni(void 0,d=>{let E=qe(void 0,{precision:1e-4}),Z=()=>{if(!Gt)return;let Ae=Ye||!hn,Ue=i1(Gt,Fn,Y_*Ii);Ue.width<0&&(Ue.width=0,Ue.x=Gt.x),Ue.height<0&&(Ue.height=0,Ue.y=Gt.y),Vr(Ue,$e),Vr(Ue,Un),di(Ue,dn),E.set(Ue,{hard:Ae})},he=[li.subscribe(Z),ao.subscribe(Z),Is.subscribe(Z),Ir.subscribe(Z),Sn.subscribe(Z),E.subscribe(d)];return()=>he.forEach(Ae=>Ae())});W(e,yl,d=>n(21,ln=d));let qa,tf=d=>{if(o&&qa&&zo(qa,d))return;qa=d;let Z=yt.width<=d.width&&yt.height<=d.height?Qf(d,Us(et(yt),bo||1)):En(d,zt(yt||cn));ao.set(Z)},nf=!1,a0=Mr.subscribe(d=>{nf||d===void 0||!yt||(tf($e),nf=!0)}),c0=li.subscribe(d=>{!d||bo===void 0||!yt||tf(d)}),Ka,u0=pl.subscribe(d=>{if(!d){Ka=void 0,fe(Ms,tn=void 0,tn);return}Ka=dt;let E=et(yt);Ms.set(E)}),f0=ao.subscribe(d=>{if(!d||!nn)return;let E=$g(et(d),nn);Kf(E,Ka);let Z=eb(et(tn),E);se.set(Z)}),d0=se.subscribe(d=>{if(Ye||nn||wt||!d||!Gt)return;let E=zt(Gt),Z=zt(d);if(nt(E,6)===nt(Z,6))return;let he=Math.min($e.width/yt.width,$e.height/yt.height),Ae=Cn(d.width*he,d.height*he),Ue=(Gt.width-Ae.width)*.5,Vt=(Gt.height-Ae.height)*.5,Kn=Tn(Gt.x+Ue,Gt.y+Vt,Ae.width,Ae.height);ao.set(Kn)}),of=Pt([Mr,se,ao],([d,E,Z],he)=>{if(!d||!E||!Z)return;let Ae=Z.width/E.width,Ue=Z.height/E.height,Vt=Math.max(Ae,Ue)/d;he(Vt)}),Sl=Pt([Mr,of],([d,E],Z)=>{if(!E)return;let he=d*E;Z(he)});W(e,Sl,d=>n(312,dt=d));let Ja=qe(.075,{stiffness:.03,damping:.4,precision:.001}),h0=Pt([Rs,Ts,Ja,yl,Is,Sn,Qu,Ju],([d,E,Z,he,Ae,Ue,Vt,Kn],Jn)=>{if(!he||o)return Jn([]);let{x:Wn,y:_n,width:wn,height:Co}=he;Wn+=.5,_n+=.5,wn-=.5,Co-=.5;let xi=[];if(Vt){xi.push({x:Wn,y:_n,width:wn-.5,height:Co-.5,strokeWidth:1,strokeColor:E,opacity:.85}),Z>.1&&xi.push({x:Wn,y:_n,width:wn-.5,height:Co-.5,strokeWidth:1,strokeColor:d,opacity:Z});let{left:Bs,right:gc,top:kf,bottom:Cf}=Kn;Bs*=Ae,gc*=Ae,kf*=Ae,Cf*=Ae,Jn([...xi,{x:Wn-Bs,y:_n-gc,width:wn+Bs+gc,height:Co+kf+Cf,strokeWidth:1,strokeColor:d,opacity:.05}]);return}let qt=Z1(d),Os=Ue&&Ue.frameColor&&Z1(Ue.frameColor);if(qt&&Os||!qt&&!qt){let Bs=qt?[1,1,1,.3]:[0,0,0,.075];xi.push({x:Wn,y:_n,width:wn,height:Co,strokeWidth:3.5,strokeColor:Bs,opacity:Z})}Jn([...xi,{x:Wn,y:_n,width:wn,height:Co,strokeWidth:1,strokeColor:d,opacity:Z}])}),As=We([]);W(e,As,d=>n(204,On=d));let rf=Pt([h0,As],([d,E],Z)=>{Z([...d,...E])});W(e,rf,d=>n(60,Ti=d));let Qa=qe(0,{precision:.001});W(e,Qa,d=>n(196,Zn=d));let $a=qe();W(e,$a,d=>n(195,xn=d));let ec=qe();W(e,ec,d=>n(198,mn=d));let tc=qe();W(e,tc,d=>n(200,un=d));let nc=qe();W(e,nc,d=>n(202,ht=d));let Es=We(!1);W(e,Es,d=>n(247,lo=d));let vs=We();W(e,vs,d=>n(207,pi=d));let m0=(d,E)=>new Promise((Z,he)=>{let Ae=qn.length?0:250,Ue=!1,Vt;E.cancel=()=>Ue=!0;let Kn=Date.now();Li(d).then(Jn=>{let Wn=Date.now()-Kn;clearTimeout(Vt),Vt=setTimeout(()=>{Ue||Z(Jn)},Math.max(0,Ae-Wn))}).catch(he)}),ai,_l=Pt([Es,vs],([d,E],Z)=>{if(!d||!E){Z(void 0);return}if(ai&&(ai.cancel(),n(178,ai=void 0)),la(E))return Z(g_(E));n(178,ai={cancel:ct}),m0(E,ai).then(Z).catch(he=>{fe(yr,we.error=he,we)}).finally(()=>{n(178,ai=void 0)})});Ha();let{imagePreviewCurrent:Ls=void 0}=t,oc=We({});W(e,oc,d=>n(239,ls=d));let wl=We([]);W(e,wl,d=>n(58,cs=d));let g0=()=>{Ir.set(Kt()),Ya.set(void 0),ef(),wl.set([])},kl=Pt([li,Cr,pr,Ku,ao,Sl,Xe,Dt,Yn,Is,Ir],([d,E,Z,he,Ae,Ue,Vt,Kn,Jn,Wn,_n],wn)=>{!d||!Ae||wn(T_(d,E,Z,he,Ae,Wn,_n,Ue,Vt,Kn,Jn))});W(e,kl,d=>n(238,er=d));let b0=Pt([Mn,$t,In,dl,Cs],([d,E,Z,he,Ae],Ue)=>{let Vt=d&&Object.keys(d).map(Jn=>d[Jn]).filter(Boolean),Kn={gamma:Z||void 0,vignette:he||void 0,noise:Ae||void 0,convolutionMatrix:E||void 0,colorMatrix:Vt&&Vt.length&&Zd(Vt)};Ue(Kn)}),Ar,Cl,sf=C_(),Tl=We({});W(e,Tl,d=>n(235,Xo=d));let lf=Pu(),ic=Ni(lf,d=>{let E=()=>d(Pu()),Z=matchMedia(`(resolution: ${lf}dppx)`);return Z.addListener(E),()=>Z.removeListener(E)});W(e,ic,d=>n(57,Ci=d));let Rl=We();W(e,Rl,d=>n(40,hn=d));let rc=We();W(e,rc,d=>n(212,yi=d));let co=R_(()=>so,d=>{fe(zn,so=d,so),Tr.set(jo)});Qt();let af=()=>{let d={x:0,y:0,...cn},E=ho(En(d,so.cropAspectRatio),Math.round),Z=cr({...so,rotation:0,crop:E},so),he=[Z];JSON.stringify(Z)!==JSON.stringify(so)&&he.push({...so}),co.set(he)},p0=yr.subscribe(d=>{!d||!d.complete||af()}),y0=()=>sr().then(d=>d&&co.revert()),Fi=We(!1);W(e,Fi,d=>n(216,bn=d));let S0=()=>{fe(Fi,bn=!0,bn),ds().then(d=>{if(!d){fe(Fi,bn=!1,bn);return}let E;E=Al.subscribe(Z=>{Z===1&&(E&&E(),Ri("processImage"))})})},_0=ks.subscribe(d=>{if(!d)return;fe(Fi,bn=!0,bn);let{complete:E,abort:Z}=d;(E||Z)&&fe(Fi,bn=!1,bn)}),qn=L_();W(e,qn,d=>n(25,Si=d));let w0=Ni(void 0,d=>qn.subscribe(Z=>{let{origin:he,translation:Ae,rotation:Ue,scale:Vt}=Z[0];d({origin:he,translation:Ae,rotation:Ue,scale:Vt})})),Pl=We();W(e,Pl,d=>n(231,Go=d));let cf=We(),uf={...Pi,imageFile:ws,imageSize:pr,imageBackgroundColor:an,imageCropAspectRatio:Sr,imageCropMinSize:Re,imageCropMaxSize:at,imageCropLimitToImage:_,imageCropRect:se,imageCropRectOrigin:Ie,imageCropRectSnapshot:Ms,imageCropRectAspectRatio:kt,imageCropRange:it,imageRotation:Xe,imageRotationRange:Rt,imageFlipX:Dt,imageFlipY:Yn,imageOutputSize:Ct,imageColorMatrix:Mn,imageConvolutionMatrix:$t,imageGamma:In,imageVignette:dl,imageNoise:Cs,imageDecoration:oi,imageAnnotation:ii,imageRedaction:_r,imageFrame:Sn,imagePreview:_l,imagePreviewSource:vs,imageTransforms:kl,imagePreviewModifiers:oc,history:co,animation:Rl,pixelRatio:ic,elasticityMultiplier:Ii,scrollElasticity:Ou,rangeInputElasticity:K_,pointerAccuracy:ml,pointerHoverable:gl,env:Tl,rootRect:Cr,stageRect:li,stageScalar:Mr,framePadded:Qu,presentationScalar:Sl,imagePreviewUpscale:cf,utilRect:Rr,rootBackgroundColor:Ts,rootForegroundColor:hl,rootLineColor:Rs,rootColorSecondary:qu,imageOutlineOpacity:Ja,utilTools:Pl,imageSelectionPan:Ir,imageSelectionZoom:Ya,imageSelectionStageFitScalar:l0,imageSelectionStoredState:$u,imageOverlayMarkup:As,interfaceImages:wl,isInteracting:bl,isInteractingFraction:Za,imageCropRectIntent:Ga,imageCropRectPresentation:Ku,imageSelectionRect:ao,imageSelectionRectIntent:Xa,imageSelectionRectPresentation:yl,imageSelectionRectSnapshot:pl,imageScalar:of,imageTransformsInterpolated:w0};delete uf.image;let k0=`util-${Fr()}`,Oo=[],ff=Po(),C0=(d,E)=>{if(!Fe)return"landscape";if(E==="auto")return d.width>d.height?"landscape":"portrait";if(E==="horizontal")return d.width<500?"portrait":"landscape";if(E==="vertical")return d.height<400?"landscape":"portrait"},T0=d=>{let E=He.getPropertyValue(d);return Lu(E)},Ml=(d,E)=>{let Z=T0(d);!Z||Z[3]===0||(Z.length=3,E.set(Z))},df=()=>{Ml("color",hl),Ml("background-color",Ts),Ml("outline-color",Rs),Ml("--color-secondary",qu)},R0=({target:d,propertyName:E})=>{d!==yn||!/background|outline/.test(E)||df()},hf=Pt([kl,b0,an],([d,E,Z])=>d&&{...d,...E,backgroundColor:Z});W(e,hf,d=>n(241,Yo=d));let P0=()=>{let d=qn.length?void 0:{resize:1.05},E=v_(gn,cn,d);qn.unshift(E),mf(Yo)},mf=d=>{qn.forEach((E,Z)=>{let he=Z===0?1:0,Ae=1;E.set({...d,opacity:he,resize:Ae},hn)})},Il,Al=su(void 0,{duration:500});W(e,Al,d=>n(28,po=d));let sc,El=We(!1);W(e,El,d=>n(259,as=d));let uo,vl=qe(void 0,{stiffness:.1,damping:.7,precision:.25});W(e,vl,d=>n(53,So=d));let Ll=qe(0,{stiffness:.1,precision:.05});W(e,Ll,d=>n(54,ki=d));let Fs=qe(0,{stiffness:.02,damping:.5,precision:.25});W(e,Fs,d=>n(263,jn=d));let lc=qe(void 0,{stiffness:.02,damping:.5,precision:.25});W(e,lc,d=>n(261,qo=d));let Fl=qe(void 0,{stiffness:.02,damping:.5,precision:.25});W(e,Fl,d=>n(264,tr=d));let xl,M0=d=>{let E=!!(uo&&uo.closeButton);lc.set(d.detail.width,{hard:E}),Fl.set(Math.round(-d.detail.width*.5),{hard:E})},I0=()=>{Ri("abortLoadImage")},A0=()=>{Ri("abortProcessImage"),fe(Fi,bn=!1,bn)},ac=d=>d.preventDefault(),E0=sf?d=>{let E=d.touches?d.touches[0]:d;E.pageX>10&&E.pageX<Ar-10||ac(d)}:ct,v0=Po()?ac:ct,L0=Po()?ac:ct,Er=We([]);W(e,Er,d=>n(315,Jo=d)),da("keysPressed",Er);let F0=d=>{let{keyCode:E,metaKey:Z,ctrlKey:he,shiftKey:Ae}=d;if(E===9&&Mi){d.preventDefault();return}if(d.target&&E===32&&yn.contains(d.target)&&!xa(d.target)&&d.preventDefault(),E===90&&(Z||he)){Ae&&Z?co.redo():co.undo();return}else if(E===89&&he){co.redo();return}if(E===229||Z||he)return;let Ue=new Set([...Jo,E]);Er.set(Array.from(Ue))},x0=({keyCode:d})=>{Er.set(Jo.filter(E=>E!==d))},O0=()=>{Er.set([])},B0=d=>{xa(d.target)||d.preventDefault()},cc=d=>{!d||Ql(d)&&!E_(d)||!Ql(d)&&!/^http/.test(d)||Ri("loadImage",d)},D0=d=>{!bs||cc(d.detail.resources[0])},z0=d=>{!d||cc(d)},W0=()=>{!dr||F_().then(z0)},V0=d=>{if(!ps)return;let E=Mt((Ar-Math.abs(Fe.x))/Fe.width,0,1),Z=Mt((Cl-Math.abs(Fe.y))/Fe.height,0,1);E<.75&&Z<.75||cc((d.clipboardData||window.clipboardData).files[0])},vr,H0=(d,E,Z,he)=>{if(!E)return;let Ae={dataSizeScalar:Z};he&&he[3]>0&&(Ae.backgroundColor=[...he]),E(d,Ae).then(Ue=>{vr&&rn(vr),n(182,vr=Ue)})},uc=[],xs,gf=We();da("rootPortal",gf),da("rootRect",Cr);let bf=()=>({foregroundColor:[...Ao],lineColor:[...wi],utilVisibility:{...T},isInteracting:Ye,isInteractingFraction:Bn,rootRect:et(Fe),stageRect:et($e),annotationShapesDirty:Bl,decorationShapesDirty:Dl,frameShapesDirty:zl,blendShapesDirty:Wl}),pf=(d,E,Z)=>Wi(d,Cn(E.width/Z,E.height/Z)),yf=(d,E,Z)=>(d._translate=Wf(E),d._scale=Z,d),Ol=d=>{let E=[];return d.forEach(Z=>E.push(N0(Z))),E.filter(Boolean)},N0=d=>Zr(d)?(d.points=[oe(d.x1,d.y1),oe(d.x2,d.y2)],d):na(d)?(d.points=[oe(d.x1,d.y1),oe(d.x2,d.y2),oe(d.x3,d.y3)],d):($b(d)&&(Oc(d)&&(d.width=5,d.height=d.lineHeight),d.strokeWidth=1,d.strokeColor=[1,1,1,.5],d.backgroundColor=[0,0,0,.1]),d),fc=[],dc=[],hc=[],mc=[],Sf,_f={},wf=(d,E,Z,he,Ae,Ue)=>{let{annotationShapesDirty:Vt,decorationShapesDirty:Kn,frameShapesDirty:Jn,blendShapesDirty:Wn,selectionRect:_n,scale:wn}=d,Co=Sf!==wn||!zo(_f,_n);Co&&(Sf=wn,_f=_n),(Vt||Z!==$o)&&(fc=Ol(Z.filter(ia).map(Xs).sort((qt,Os)=>qt.alwaysOnTop?1:Os.alwaysOnTop?-1:0).map(qt=>Wi(qt,cn)).map(s).flat())),Wn&&(dc=E.filter(ia).map(qt=>Wi(qt,cn))),(Kn||he!==ei||Co)&&(hc=Ol(he.filter(ia).map(Xs).sort((qt,Os)=>qt.alwaysOnTop?1:Os.alwaysOnTop?-1:0).map(qt=>pf(qt,_n,wn)).map(s).flat().map(qt=>yf(qt,_n,wn)))),(Jn||Ue!==yo||Co)&&(mc=Ue?Ol([Ue].map(Xs).map(qt=>pf(qt,_n,wn)).map(s).flat().map(qt=>yf(qt,_n,wn))):[]);let xi=Ol(Ae.filter(ia));return{blendShapesDirty:Wn,blendShapes:dc,annotationShapesDirty:Vt,annotationShapes:fc,decorationShapesDirty:Kn,decorationShapes:hc,frameShapesDirty:Jn,frameShapes:mc,interfaceShapes:xi}},Bl=!0,U0=()=>n(36,Bl=!0),Dl=!0,Z0=()=>n(37,Dl=!0),zl=!0,j0=()=>n(38,zl=!0),Wl=!0,G0=()=>n(39,Wl=!0);Vo(()=>{o0(),c0(),a0(),u0(),f0(),d0(),p0(),_0(),ml.destroy(),gl.destroy(),_s.destroy(),qn.clear(),n(148,Ls=void 0),n(179,Il=void 0),fc.length=0,dc.length=0,hc.length=0,mc.length=0});function X0(){n(12,Ar=Yi.innerWidth),n(13,Cl=Yi.innerHeight)}let Y0=d=>fe(Ps,Eo=d.detail,Eo),q0=({detail:d})=>n(20,k=d),K0=(d,E)=>E.id===d;function J0(d,E){e.$$.not_equal(fn[E],d)&&(fn[E]=d,n(0,fn),n(8,xo),n(175,_o))}let Q0=d=>fe(Rr,vo=d.detail,vo),$0=d=>n(35,Oo=Oo.concat(d)),eg=d=>n(35,Oo=Oo.filter(E=>E!==d)),tg=(d,{detail:E})=>n(24,T[d]=E,T),ng=d=>fe(Tr,jo=d.detail,jo),og=d=>d.id===k;function ig(d){e.$$.not_equal(fn[k],d)&&(fn[k]=d,n(0,fn),n(8,xo),n(175,_o))}let rg=d=>fe(Rr,vo=d.detail,vo),sg=()=>n(35,Oo=Oo.concat(k)),lg=()=>n(35,Oo=Oo.filter(d=>d!==k)),ag=({detail:d})=>n(24,T[k]=d,T),cg=d=>{let E={...d,...bf()},{annotationShapes:Z,decorationShapes:he,interfaceShapes:Ae,frameShapes:Ue}=lr({annotationShapes:$o,decorationShapes:ei,interfaceShapes:Ti,frameShapes:yo},E);return wf(E,uc,Z,he,Ae,Ue)},ug=()=>{n(36,Bl=!1),n(37,Dl=!1),n(38,zl=!1),n(39,Wl=!1)};function fg(d){Bt[d?"unshift":"push"](()=>{xs=d,n(16,xs)})}function dg(d){Bt[d?"unshift":"push"](()=>{yn=d,n(1,yn)})}let hg=d=>fe(Ua,Qe=d.detail,Qe);return e.$$set=d=>{"class"in d&&n(149,fs=d.class),"layout"in d&&n(150,ir=d.layout),"stores"in d&&n(151,Pi=d.stores),"locale"in d&&n(2,lt=d.locale),"id"in d&&n(3,fl=d.id),"util"in d&&n(152,ti=d.util),"utils"in d&&n(153,pn=d.utils),"animations"in d&&n(154,Xn=d.animations),"disabled"in d&&n(155,Mi=d.disabled),"status"in d&&n(147,Dn=d.status),"previewUpscale"in d&&n(156,rr=d.previewUpscale),"elasticityMultiplier"in d&&n(4,Ii=d.elasticityMultiplier),"willRevert"in d&&n(157,sr=d.willRevert),"willProcessImage"in d&&n(158,ds=d.willProcessImage),"willRenderCanvas"in d&&n(5,lr=d.willRenderCanvas),"willRenderToolbar"in d&&n(159,ar=d.willRenderToolbar),"willSetHistoryInitialState"in d&&n(160,cr=d.willSetHistoryInitialState),"enableButtonExport"in d&&n(161,hs=d.enableButtonExport),"enableButtonRevert"in d&&n(162,ur=d.enableButtonRevert),"enableNavigateHistory"in d&&n(163,ms=d.enableNavigateHistory),"enableToolbar"in d&&n(6,fr=d.enableToolbar),"enableUtils"in d&&n(164,gs=d.enableUtils),"enableButtonClose"in d&&n(165,Lo=d.enableButtonClose),"enableDropImage"in d&&n(166,bs=d.enableDropImage),"enablePasteImage"in d&&n(167,ps=d.enablePasteImage),"enableBrowseImage"in d&&n(168,dr=d.enableBrowseImage),"previewImageDataMaxSize"in d&&n(169,hr=d.previewImageDataMaxSize),"previewImageTextPixelRatio"in d&&n(7,mr=d.previewImageTextPixelRatio),"layoutDirectionPreference"in d&&n(170,ys=d.layoutDirectionPreference),"layoutHorizontalUtilsPreference"in d&&n(171,Ss=d.layoutHorizontalUtilsPreference),"layoutVerticalUtilsPreference"in d&&n(172,Ai=d.layoutVerticalUtilsPreference),"imagePreviewSrc"in d&&n(173,Fo=d.imagePreviewSrc),"imageOrienter"in d&&n(174,ni=d.imageOrienter),"pluginComponents"in d&&n(175,_o=d.pluginComponents),"pluginOptions"in d&&n(8,xo=d.pluginOptions),"root"in d&&n(1,yn=d.root),"imageSourceToImageData"in d&&n(9,Li=d.imageSourceToImageData),"imagePreviewCurrent"in d&&n(148,Ls=d.imagePreviewCurrent)},e.$$.update=()=>{if(e.$$.dirty[4]&67108864&&n(183,o=ir==="overlay"),e.$$.dirty[5]&268435968&&n(17,i=gs&&!o),e.$$.dirty[0]&257&&xo&&Object.entries(xo).forEach(([d,E])=>{Object.entries(E).forEach(([Z,he])=>{!fn[d]||n(0,fn[d][Z]=he,fn)})}),e.$$.dirty[0]&1|e.$$.dirty[5]&1048576){let d=!1;_o.forEach(([E])=>{fn[E]||(n(0,fn[E]={},fn),d=!0)}),d&&n(177,Ei=[..._o])}if(e.$$.dirty[5]&1&&gr.set(Mi?1:0),e.$$.dirty[5]&16384&&(r=hr?qg(hr,br):br),e.$$.dirty[5]&536870912&&_s.update(Ne[0]),e.$$.dirty[5]&1073741824&&(s=_e?d=>_e(d,{isPreview:!0}):Ft),e.$$.dirty[0]&262144&&Qe&&Cr.set(Tn(Qe.x,Qe.y,Qe.width,Qe.height)),e.$$.dirty[5]&268435456|e.$$.dirty[6]&3&&Fe&&o&&we&&we.complete&&r0(),e.$$.dirty[0]&4|e.$$.dirty[4]&536870912|e.$$.dirty[5]&4194304&&n(190,w=lt&&Ei.length?pn||Ei.map(([d])=>d):[]),e.$$.dirty[6]&16&&n(19,A=w.length>1),e.$$.dirty[0]&524288&&(A||Tr.set(Do())),e.$$.dirty[0]&64&&(fr||Ps.set(Do())),e.$$.dirty[5]&268435458&&ja.set(rr||o),e.$$.dirty[6]&4&&yt&&ef(),e.$$.dirty[5]&4194304|e.$$.dirty[6]&16&&n(217,C=Ei.filter(([d])=>w.includes(d))),e.$$.dirty[7]&1&&n(218,M=C.length),e.$$.dirty[4]&268435456|e.$$.dirty[6]&16|e.$$.dirty[7]&2&&n(20,k=ti&&typeof ti=="string"&&w.includes(ti)?ti:M>0?w[0]:void 0),e.$$.dirty[0]&1048576&&k&&Ja.set(.075),e.$$.dirty[0]&2097152|e.$$.dirty[6]&64&&ln){let d=ln.x-$e.x,E=$e.x+$e.width-(ln.x+ln.width),Z=ln.y-$e.y,he=$e.y+$e.height-(ln.y+ln.height),Ae=Math.min(d,Z,E,he);Qa.set(Ae>0?0:Math.min(q_,Math.abs(Ae/xu)))}if(e.$$.dirty[6]&64&&$e&&$a.set({x:0,y:$e.y,width:$e.x<xu?0:$e.x,height:$e.height}),e.$$.dirty[6]&65&&$e&&ec.set({x:0,y:0,width:Fe.width,height:$e.y}),e.$$.dirty[6]&65&&$e){let d=$e.x+$e.width,E=Fe.width-($e.x+$e.width);E<xu&&(d+=E,E=0),tc.set({x:d,y:$e.y,width:E,height:$e.height})}if(e.$$.dirty[6]&65&&$e&&nc.set({x:0,y:$e.y+$e.height,width:Fe.width,height:Fe.height-($e.y+$e.height)}),e.$$.dirty[0]&4194304|e.$$.dirty[6]&1536&&n(194,l=xn&&{id:al,backgroundColor:Pn,opacity:Zn,...xn}),e.$$.dirty[0]&4194304|e.$$.dirty[6]&5120&&n(197,a=mn&&{id:al,backgroundColor:Pn,opacity:Zn,...mn}),e.$$.dirty[0]&4194304|e.$$.dirty[6]&17408&&n(199,c=un&&{id:al,backgroundColor:Pn,opacity:Zn,...un}),e.$$.dirty[0]&4194304|e.$$.dirty[6]&66560&&n(201,u=ht&&{id:al,backgroundColor:Pn,opacity:Zn,...ht}),e.$$.dirty[6]&43264&&n(203,f=[a,c,u,l].filter(Boolean)),e.$$.dirty[6]&393216&&f&&On){let d=On.filter(E=>E.id!==al);As.set([...d,...f])}if(e.$$.dirty[5]&262144|e.$$.dirty[6]&524288&&vs.set(Fo||Zo||void 0),e.$$.dirty[0]&2|e.$$.dirty[4]&16777216|e.$$.dirty[6]&1048576&&(n(148,Ls=gn),gn&&yn.dispatchEvent(z1("loadpreview",Ls))),e.$$.dirty[6]&2097152&&pi&&g0(),e.$$.dirty[6]&4194312&&n(209,m=!Ye&&h),e.$$.dirty[6]&33554432&&n(210,b=!Ji),e.$$.dirty[4]&1073741824|e.$$.dirty[6]&25165824&&fe(Rl,hn=Xn==="always"?m:Xn==="never"?!1:m&&b,hn),e.$$.dirty[4]&1073741824|e.$$.dirty[6]&20971520&&fe(rc,yi=Xn==="always"?h:Xn==="never"?!1:h&&b,yi),e.$$.dirty[6]&268435456&&n(213,p=Xt.index>0),e.$$.dirty[6]&268435456&&n(215,y=Xt.index<Xt.length-1),e.$$.dirty[6]&32&&cf.set(Wt),e.$$.dirty[0]&4|e.$$.dirty[6]&16|e.$$.dirty[7]&1&&n(23,R=w.map(d=>{let E=C.find(([Z])=>d===Z);if(!!E)return{id:d,view:E[1],tabIcon:lt[`${d}Icon`],tabLabel:lt[`${d}Label`]}}).filter(Boolean)||[]),e.$$.dirty[0]&1048576&&i0.set(k),e.$$.dirty[0]&25165824&&n(24,T=R.reduce((d,E)=>(d[E.id]=T&&T[E.id]||0,d),{})),e.$$.dirty[0]&1048576&&n(42,P={name:k0,selected:k}),e.$$.dirty[0]&8388608&&n(43,D=R.map(d=>({id:d.id,icon:d.tabIcon,label:d.tabLabel}))),e.$$.dirty[0]&8388608&&n(44,x=R.map(d=>d.id)),e.$$.dirty[4]&33554432&&n(45,g=ze(["PinturaRoot","PinturaRootComponent",fs])),e.$$.dirty[6]&1&&n(219,O=Fe&&(Fe.width>1e3?"wide":Fe.width<600?"narrow":void 0)),e.$$.dirty[6]&1&&n(220,j=Fe&&(Fe.width<=320||Fe.height<=460)),e.$$.dirty[6]&1&&n(221,v=Fe&&(Fe.height>1e3?"tall":Fe.height<600?"short":void 0)),e.$$.dirty[0]&2&&n(222,G=yn&&yn.parentNode&&yn.parentNode.classList.contains("PinturaModal")),e.$$.dirty[0]&4096|e.$$.dirty[6]&1|e.$$.dirty[7]&32&&n(223,z=G&&Fe&&Ar>Fe.width),e.$$.dirty[0]&8192|e.$$.dirty[6]&1|e.$$.dirty[7]&32&&n(224,B=G&&Fe&&Cl>Fe.height),e.$$.dirty[7]&192&&n(225,ee=z&&B),e.$$.dirty[7]&4&&n(226,ge=O==="narrow"),e.$$.dirty[5]&32768|e.$$.dirty[6]&1&&n(227,ve=C0(Fe,ys)),e.$$.dirty[7]&1024&&n(46,Oe=ve==="landscape"),e.$$.dirty[7]&528&&n(228,Ve=ge||v==="short"),e.$$.dirty[0]&4096|e.$$.dirty[6]&1&&n(229,J=ff&&Fe&&Ar===Fe.width&&!sf),e.$$.dirty[7]&16384&&n(230,Y=Go&&Go.length),e.$$.dirty[5]&65536&&n(232,ue=`has-navigation-preference-${Ss}`),e.$$.dirty[5]&131072&&n(233,be=`has-navigation-preference-${Ai}`),e.$$.dirty[0]&2&&n(234,He=yn&&getComputedStyle(yn)),e.$$.dirty[7]&131072&&He&&df(),e.$$.dirty[0]&655424|e.$$.dirty[4]&67108864|e.$$.dirty[5]&1|e.$$.dirty[6]&67108864|e.$$.dirty[7]&1940988&&Tl.set({...Xo,layoutMode:ir,orientation:ve,horizontalSpace:O,verticalSpace:v,navigationHorizontalPreference:ue,navigationVerticalPreference:be,isModal:G,isDisabled:Mi,isCentered:ee,isCenteredHorizontally:z,isCenteredVertically:B,isAnimated:yi,pointerAccuracy:$i,pointerHoverable:ss,isCompact:Ve,hasSwipeNavigation:J,hasLimitedSpace:j,hasToolbar:fr,hasNavigation:A&&i,isIOS:ff}),e.$$.dirty[7]&262144&&n(47,ft=Object.entries(Xo).map(([d,E])=>/^is|has/.test(d)?E?W1(d):void 0:E).filter(Boolean).join(" ")),e.$$.dirty[0]&1048576&&k&&Pl.set([]),e.$$.dirty[7]&6291456&&n(48,ae=er&&Object.entries(ls).filter(([,d])=>d!=null).reduce((d,[,E])=>(d={...d,...E},d),{})),e.$$.dirty[6]&2&&n(240,L=we&&we.task==="any-to-file"),e.$$.dirty[7]&8388608&&L&&qn&&qn.clear(),e.$$.dirty[7]&16777216&&n(242,rt=!!Yo&&!!Yo.translation),e.$$.dirty[5]&16777216|e.$$.dirty[6]&1048576|e.$$.dirty[7]&33554432&&rt&&gn&&gn!==Il&&(n(179,Il=gn),P0()),e.$$.dirty[7]&50331648&&rt&&mf(Yo),e.$$.dirty[0]&33554432&&Si&&Si.length>1){let d=[];qn.forEach((E,Z)=>{Z!==0&&E.get().opacity<=0&&d.push(E)}),d.forEach(E=>qn.remove(E))}if(e.$$.dirty[0]&4|e.$$.dirty[7]&67108864&&n(26,ye=lt&&V.length&&lt.labelSupportError(V)),e.$$.dirty[6]&2&&n(244,q=we&&!!we.error),e.$$.dirty[6]&2&&n(27,Me=!we||!we.complete&&we.task===void 0),e.$$.dirty[6]&2&&n(245,Be=we&&(we.taskLengthComputable?we.taskProgress:1/0)),e.$$.dirty[7]&8388608&&L&&fe(Es,lo=!1,lo),e.$$.dirty[5]&33554432|e.$$.dirty[6]&2&&we&&we.complete){let d=500;clearTimeout(sc),n(180,sc=setTimeout(()=>{fe(Es,lo=!0,lo)},d))}if(e.$$.dirty[0]&134217728|e.$$.dirty[6]&2|e.$$.dirty[7]&1207959552&&n(246,Se=we&&!q&&!Me&&!lo),e.$$.dirty[5]&8388608|e.$$.dirty[6]&3145728&&n(248,Ge=!!pi&&(!gn||!!ai)),e.$$.dirty[6]&1073741824|e.$$.dirty[8]&4&&n(249,st=bn||Yt&&Yt.progress!==void 0&&!Yt.complete),e.$$.dirty[0]&134217728|e.$$.dirty[6]&2&&n(251,Q=we&&!(we.error||Me)),e.$$.dirty[0]&4|e.$$.dirty[6]&2&&n(252,Ke=lt&&(we?!we.complete||we.error?hu(lt.statusLabelLoadImage(we),we.error&&we.error.metadata,"{","}"):lt.statusLabelLoadImage({progress:1/0,task:"blob-to-bitmap"}):lt.statusLabelLoadImage(we))),e.$$.dirty[0]&4|e.$$.dirty[8]&4&&n(253,Je=Yt&&lt&&lt.statusLabelProcessImage(Yt)),e.$$.dirty[8]&4&&n(254,Lt=Yt&&(Yt.taskLengthComputable?Yt.taskProgress:1/0)),e.$$.dirty[8]&4&&n(255,St=Yt&&!Yt.error),e.$$.dirty[8]&4&&n(256,N=Yt&&Yt.error),e.$$.dirty[0]&134217732|e.$$.dirty[4]&8388608|e.$$.dirty[7]&939524096|e.$$.dirty[8]&507)if(Dn){let d,E,Z,he,Ae;Ht(Dn)&&(d=Dn),ut(Dn)?E=Dn:Array.isArray(Dn)&&([d,E,Ae]=Dn,E===!1&&(he=!0),ut(E)&&(Z=!0)),n(14,uo=(d||E)&&{text:d,aside:he||Z,progressIndicator:{visible:Z,progress:E},closeButton:he&&{label:lt.statusLabelButtonClose,icon:lt.statusIconButtonClose,onclick:Ae||(()=>n(147,Dn=void 0))}})}else lt&&Me||q||Se||Ge?n(14,uo={text:Ke,aside:q||Q,progressIndicator:{visible:Q,progress:Be},closeButton:q&&{label:lt.statusLabelButtonClose,icon:lt.statusIconButtonClose,onclick:I0}}):lt&&st&&Je?n(14,uo={text:Je,aside:N||St,progressIndicator:{visible:St,progress:Lt},closeButton:N&&{label:lt.statusLabelButtonClose,icon:lt.statusIconButtonClose,onclick:A0}}):n(14,uo=void 0);if(e.$$.dirty[4]&8388608&&n(257,De=Dn!==void 0),e.$$.dirty[7]&32|e.$$.dirty[8]&4&&G&&Yt&&Yt.complete&&(El.set(!0),setTimeout(()=>El.set(!1),100)),e.$$.dirty[0]&201326592|e.$$.dirty[7]&671088640|e.$$.dirty[8]&2563&&n(258,X=as||ye||Me||q||Se||Ge||st||De),e.$$.dirty[8]&1024&&fe(Al,po=X?1:0,po),e.$$.dirty[0]&268435456&&n(29,K=po>0),e.$$.dirty[0]&16384&&n(260,re=!!(uo&&uo.aside)),e.$$.dirty[0]&536887296|e.$$.dirty[5]&67108864|e.$$.dirty[8]&12288&&K&&uo)if(clearTimeout(xl),re){let d=!!uo.error;Ll.set(1),vl.set(qo,{hard:d}),n(181,xl=setTimeout(()=>{Fs.set(16)},1))}else Ll.set(0),n(181,xl=setTimeout(()=>{Fs.set(0)},1));if(e.$$.dirty[0]&536870912&&(K||(Fl.set(void 0,{hard:!0}),vl.set(void 0,{hard:!0}),Fs.set(0,{hard:!0}))),e.$$.dirty[8]&32768&&n(262,te=jn*.5),e.$$.dirty[8]&81920&&n(49,pe=`transform: translateX(${tr-te}px)`),e.$$.dirty[0]&1073741828|e.$$.dirty[5]&1488|e.$$.dirty[6]&671088640|e.$$.dirty[7]&287232&&n(50,Le=lt&&Ko&&x_(()=>ar([["div","alpha",{class:"PinturaNavGroup"},[["div","alpha-set",{class:"PinturaNavSet"},[Lo&&["Button","close",{label:lt.labelClose,icon:lt.iconButtonClose,onclick:()=>Ri("close"),hideLabel:!0}],ur&&["Button","revert",{label:lt.labelButtonRevert,icon:lt.iconButtonRevert,disabled:!p,onclick:y0,hideLabel:!0}]]]]],["div","beta",{class:"PinturaNavGroup PinturaNavGroupFloat"},[ms&&["div","history",{class:"PinturaNavSet"},[["Button","undo",{label:lt.labelButtonUndo,icon:lt.iconButtonUndo,disabled:!p,onclick:co.undo,hideLabel:!0}],["Button","redo",{label:lt.labelButtonRedo,icon:lt.iconButtonRedo,disabled:!y,onclick:co.redo,hideLabel:!0}]]],Y&&["div","plugin-tools",{class:"PinturaNavSet"},Go.filter(Boolean).map(([d,E,Z])=>[d,E,{...Z}])]]],["div","gamma",{class:"PinturaNavGroup"},[hs&&["Button","export",{label:lt.labelButtonExport,icon:ge&&lt.iconButtonExport,class:"PinturaButtonExport",onclick:S0,hideLabel:ge}]]]],{...Xo},()=>wo.set({})))),e.$$.dirty[0]&262144&&n(265,ne=Qe&&Qe.width>0&&Qe.height>0),e.$$.dirty[0]&4|e.$$.dirty[7]&2|e.$$.dirty[8]&131072&&n(51,Ee=ne&&lt&&M),e.$$.dirty[8]&524288&&n(266,de=Gn&&!!Gn.length),e.$$.dirty[6]&128|e.$$.dirty[8]&786432&&n(268,ot=de&&jd(cn,Gn)),e.$$.dirty[6]&1048576|e.$$.dirty[8]&7602176&&de&&H0(gn,Qo,ot,_i),e.$$.dirty[5]&134217728|e.$$.dirty[6]&128|e.$$.dirty[8]&524288&&Gn&&vr&&cn){let{width:d,height:E}=cn;n(15,uc=Gn.map(Z=>{let he=Tn(Z.x,Z.y,Z.width,Z.height),Ue=Di(et(he),Z.rotation).map(Vt=>oe(Vt.x/d,Vt.y/E));return{...Z,id:"redaction",flipX:!1,flipY:!1,cornerRadius:0,strokeWidth:0,strokeColor:void 0,backgroundColor:[0,0,0],backgroundImage:vr,backgroundImageRendering:"pixelated",backgroundCorners:Ue}}))}e.$$.dirty[0]&65536&&xs&&gf.set(xs),e.$$.dirty[0]&67108864|e.$$.dirty[6]&1048576&&n(31,me=gn&&!ye),e.$$.dirty[0]&2|e.$$.dirty[1]&1&&me&&yn.dispatchEvent(z1("ready")),e.$$.dirty[1]&2&&U0(),e.$$.dirty[1]&4&&Z0(),e.$$.dirty[1]&8&&j0(),e.$$.dirty[0]&32768&&G0()},n(208,h=!du()),n(243,V=[!A_()&&"WebGL"].filter(Boolean)),n(52,Te=S_(or.pub)),[fn,yn,lt,fl,Ii,lr,fr,mr,xo,Li,_l,co,Ar,Cl,uo,uc,xs,i,Qe,A,k,ln,Pn,R,T,Si,ye,Me,po,K,Ko,me,$o,ei,yo,Oo,Bl,Dl,zl,Wl,hn,jo,P,D,x,g,Oe,ft,ae,pe,Le,Ee,Te,So,ki,Eo,vo,Ci,cs,nr,Ti,us,wo,gr,ws,pr,yr,ks,Sr,se,an,oi,ii,_r,Sn,zn,wr,kr,ri,si,Ts,hl,Rs,Ua,Cr,Tr,Ps,Rr,ml,gl,bl,Za,ja,Ms,Ga,ao,pl,Xa,li,Mr,Is,Ir,yl,Sl,As,rf,Qa,$a,ec,tc,nc,Es,vs,oc,wl,kl,Tl,ic,Rl,rc,Fi,qn,Pl,uf,R0,hf,Al,El,vl,Ll,Fs,lc,Fl,M0,E0,v0,L0,Er,F0,x0,O0,B0,D0,W0,V0,bf,wf,Dn,Ls,fs,ir,Pi,ti,pn,Xn,Mi,rr,sr,ds,ar,cr,hs,ur,ms,gs,Lo,bs,ps,dr,hr,ys,Ss,Ai,Fo,ni,_o,Na,Ei,ai,Il,sc,xl,vr,o,Ne,_e,Fe,we,yt,Ye,w,Wt,$e,cn,l,xn,Zn,a,mn,c,un,u,ht,f,On,Zo,gn,pi,h,m,b,Ji,yi,p,Xt,y,bn,C,M,O,j,v,G,z,B,ee,ge,ve,Ve,J,Y,Go,ue,be,He,Xo,$i,ss,er,ls,L,Yo,rt,V,q,Be,Se,lo,Ge,st,Yt,Q,Ke,Je,Lt,St,N,De,X,as,re,qo,te,jn,tr,ne,de,Gn,ot,Qo,_i,X0,Y0,q0,K0,J0,Q0,$0,eg,tg,ng,og,ig,rg,sg,lg,ag,cg,ug,fg,dg,hg]}var Bu=class extends bt{constructor(t){super();pt(this,t,J_,G_,gt,{class:149,layout:150,stores:151,locale:2,id:3,util:152,utils:153,animations:154,disabled:155,status:147,previewUpscale:156,elasticityMultiplier:4,willRevert:157,willProcessImage:158,willRenderCanvas:5,willRenderToolbar:159,willSetHistoryInitialState:160,enableButtonExport:161,enableButtonRevert:162,enableNavigateHistory:163,enableToolbar:6,enableUtils:164,enableButtonClose:165,enableDropImage:166,enablePasteImage:167,enableBrowseImage:168,previewImageDataMaxSize:169,previewImageTextPixelRatio:7,layoutDirectionPreference:170,layoutHorizontalUtilsPreference:171,layoutVerticalUtilsPreference:172,imagePreviewSrc:173,imageOrienter:174,pluginComponents:175,pluginOptions:8,sub:176,pluginInterface:0,root:1,imageSourceToImageData:9,imagePreview:10,imagePreviewCurrent:148,history:11},[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1])}get class(){return this.$$.ctx[149]}set class(t){this.$set({class:t}),ce()}get layout(){return this.$$.ctx[150]}set layout(t){this.$set({layout:t}),ce()}get stores(){return this.$$.ctx[151]}set stores(t){this.$set({stores:t}),ce()}get locale(){return this.$$.ctx[2]}set locale(t){this.$set({locale:t}),ce()}get id(){return this.$$.ctx[3]}set id(t){this.$set({id:t}),ce()}get util(){return this.$$.ctx[152]}set util(t){this.$set({util:t}),ce()}get utils(){return this.$$.ctx[153]}set utils(t){this.$set({utils:t}),ce()}get animations(){return this.$$.ctx[154]}set animations(t){this.$set({animations:t}),ce()}get disabled(){return this.$$.ctx[155]}set disabled(t){this.$set({disabled:t}),ce()}get status(){return this.$$.ctx[147]}set status(t){this.$set({status:t}),ce()}get previewUpscale(){return this.$$.ctx[156]}set previewUpscale(t){this.$set({previewUpscale:t}),ce()}get elasticityMultiplier(){return this.$$.ctx[4]}set elasticityMultiplier(t){this.$set({elasticityMultiplier:t}),ce()}get willRevert(){return this.$$.ctx[157]}set willRevert(t){this.$set({willRevert:t}),ce()}get willProcessImage(){return this.$$.ctx[158]}set willProcessImage(t){this.$set({willProcessImage:t}),ce()}get willRenderCanvas(){return this.$$.ctx[5]}set willRenderCanvas(t){this.$set({willRenderCanvas:t}),ce()}get willRenderToolbar(){return this.$$.ctx[159]}set willRenderToolbar(t){this.$set({willRenderToolbar:t}),ce()}get willSetHistoryInitialState(){return this.$$.ctx[160]}set willSetHistoryInitialState(t){this.$set({willSetHistoryInitialState:t}),ce()}get enableButtonExport(){return this.$$.ctx[161]}set enableButtonExport(t){this.$set({enableButtonExport:t}),ce()}get enableButtonRevert(){return this.$$.ctx[162]}set enableButtonRevert(t){this.$set({enableButtonRevert:t}),ce()}get enableNavigateHistory(){return this.$$.ctx[163]}set enableNavigateHistory(t){this.$set({enableNavigateHistory:t}),ce()}get enableToolbar(){return this.$$.ctx[6]}set enableToolbar(t){this.$set({enableToolbar:t}),ce()}get enableUtils(){return this.$$.ctx[164]}set enableUtils(t){this.$set({enableUtils:t}),ce()}get enableButtonClose(){return this.$$.ctx[165]}set enableButtonClose(t){this.$set({enableButtonClose:t}),ce()}get enableDropImage(){return this.$$.ctx[166]}set enableDropImage(t){this.$set({enableDropImage:t}),ce()}get enablePasteImage(){return this.$$.ctx[167]}set enablePasteImage(t){this.$set({enablePasteImage:t}),ce()}get enableBrowseImage(){return this.$$.ctx[168]}set enableBrowseImage(t){this.$set({enableBrowseImage:t}),ce()}get previewImageDataMaxSize(){return this.$$.ctx[169]}set previewImageDataMaxSize(t){this.$set({previewImageDataMaxSize:t}),ce()}get previewImageTextPixelRatio(){return this.$$.ctx[7]}set previewImageTextPixelRatio(t){this.$set({previewImageTextPixelRatio:t}),ce()}get layoutDirectionPreference(){return this.$$.ctx[170]}set layoutDirectionPreference(t){this.$set({layoutDirectionPreference:t}),ce()}get layoutHorizontalUtilsPreference(){return this.$$.ctx[171]}set layoutHorizontalUtilsPreference(t){this.$set({layoutHorizontalUtilsPreference:t}),ce()}get layoutVerticalUtilsPreference(){return this.$$.ctx[172]}set layoutVerticalUtilsPreference(t){this.$set({layoutVerticalUtilsPreference:t}),ce()}get imagePreviewSrc(){return this.$$.ctx[173]}set imagePreviewSrc(t){this.$set({imagePreviewSrc:t}),ce()}get imageOrienter(){return this.$$.ctx[174]}set imageOrienter(t){this.$set({imageOrienter:t}),ce()}get pluginComponents(){return this.$$.ctx[175]}set pluginComponents(t){this.$set({pluginComponents:t}),ce()}get pluginOptions(){return this.$$.ctx[8]}set pluginOptions(t){this.$set({pluginOptions:t}),ce()}get sub(){return this.$$.ctx[176]}get pluginInterface(){return this.$$.ctx[0]}get root(){return this.$$.ctx[1]}set root(t){this.$set({root:t}),ce()}get imageSourceToImageData(){return this.$$.ctx[9]}set imageSourceToImageData(t){this.$set({imageSourceToImageData:t}),ce()}get imagePreview(){return this.$$.ctx[10]}get imagePreviewCurrent(){return this.$$.ctx[148]}set imagePreviewCurrent(t){this.$set({imagePreviewCurrent:t}),ce()}get history(){return this.$$.ctx[11]}},Q_=["klass","stores","isVisible","isActive","isActiveFraction","locale"],$_=["history","klass","stores","navButtons","pluginComponents","pluginInterface","pluginOptions","sub","imagePreviewSrc","imagePreview","imagePreviewCurrent"],Du,em=new Set([]),Ba={},zu=new Map,ew=(...e)=>{e.filter(t=>!!t.util).forEach(t=>{let[n,o]=t.util;zu.has(n)||(zu.set(n,o),wu(o).filter(i=>!Q_.includes(i)).forEach(i=>{if(em.add(i),Ba[i]){Ba[i].push(n);return}Ba[i]=[n]}))})};var tw=(e,t)=>{let n={},o=new Bu({target:e,props:{stores:t,pluginComponents:Array.from(zu)}}),i=!1,r=()=>{i||(on()&&window.removeEventListener("pagehide",r),!!o&&(i=!0,o.$destroy()))};Du||(Du=new Set(wu(Bu).filter(l=>!$_.includes(l)))),Du.forEach(l=>{Object.defineProperty(n,l,{get:()=>o[l],set:a=>o[l]=a})}),Object.defineProperty(n,"previewImageData",{get:()=>o.imagePreviewCurrent}),em.forEach(l=>{let a=Ba[l],c=a[0];Object.defineProperty(n,l,{get:()=>o.pluginInterface[c][l],set:u=>{let f=a.reduce((h,m)=>(h[m]={...o.pluginOptions[m],[l]:u},h),{});o.pluginOptions={...o.pluginOptions,...f}}})}),Object.defineProperty(n,"element",{get:()=>o.root,set:()=>{}});let s=o.history;return Qs(n,{on:(l,a)=>{if(i)return()=>{};if(/undo|redo|revert/.test(l))return s.on(l,a);let c=[o.sub(l,a),o.$on(l,u=>a(u instanceof CustomEvent&&!u.detail?void 0:u))].filter(Boolean);return()=>c.forEach(u=>u())},updateImagePreview:l=>{o.imagePreviewSrc=l},close:()=>!i&&o.pub("close"),destroy:r}),Object.defineProperty(n,"history",{get:()=>({undo:()=>s.undo(),redo:()=>s.redo(),revert:()=>s.revert(),get:()=>s.get(),getCollapsed:()=>s.get().splice(0,s.index+1),set:l=>s.set(l),write:l=>s.write(l),get length(){return s.length()},get index(){return s.index}})}),on()&&window.addEventListener("pagehide",r),n},tm=[...gh,"init","undo","redo","update","revert","destroy","show","hide","close","ready","loadpreview","selectshape","updateshape","addshape","removeshape","selectstyle"],nw=(e,t,n)=>e.dispatchEvent(new CustomEvent(t,{detail:n,bubbles:!0,cancelable:!0})),ow=(e,t,n={})=>{let{prefix:o="pintura:"}=n;return tm.map(i=>e.on(i,r=>Zs(t)?nw(t,`${o}${i}`,r):t(i,r)))},Wu=e=>{if(e===void 0||ut(e))return e;if(!Ht(e))return!1;let t=e;if(!t.length)return;let[n,o]=t.split(/\/|:/g).map(i=>parseFloat(i.replace(/,/,"."))).filter(Boolean);return n?o?Math.abs(n/o):n:!1},iw=(e,t,n)=>(e.splice(t,0,n),e),rw=e=>Ht(e[0]),sw=e=>!rw(e),nm=e=>e[1],om=e=>e[3]||[];function im(e,t,n,o){return Array.isArray(n)&&(o=n,n={}),[e,t,n||{},o||[]]}var lw=(e,t,n,o=i=>i)=>{let i=Vu(t,n),r=i.findIndex(s=>nm(s)===t);iw(i,o(r),e)},rm=(e,t,n)=>lw(e,t,n);var Vu=(e,t)=>sw(t)?t.find(n=>nm(n)===e)?t:t.find(n=>Vu(e,om(n))):Vu(e,om(t));var X5=[["brightness",e=>e.finetuneLabelBrightness],["contrast",e=>e.finetuneLabelContrast],["saturation",e=>e.finetuneLabelSaturation],["exposure",e=>e.finetuneLabelExposure],["temperature",e=>e.finetuneLabelTemperature],["gamma",e=>e.finetuneLabelGamma],!du()&&["clarity",e=>e.finetuneLabelClarity],["vignette",e=>e.finetuneLabelVignette]].filter(Boolean);var aw=(e,t,n)=>{let o=Math.max(e,t,n),i=o-Math.min(e,t,n),r=i&&(o==e?(t-n)/i:o==t?2+(n-e)/i:4+(e-t)/i);return[60*(r<0?r+6:r)/360,o&&i/o,o]},sm=(e,t,n)=>{let o,i,r,s=Math.floor(e*6),l=e*6-s,a=n*(1-t),c=n*(1-l*t),u=n*(1-(1-l)*t);switch(s%6){case 0:o=n,i=u,r=a;break;case 1:o=c,i=n,r=a;break;case 2:o=a,i=n,r=u;break;case 3:o=a,i=c,r=n;break;case 4:o=u,i=a,r=n;break;case 5:o=n,i=a,r=c;break}return[o,i,r]};function cw(e){let t,n,o;return{c(){t=$("div"),n=$("span"),S(t,"class","PinturaColorPreview"),S(t,"title",e[0]),S(t,"style",o=`--color:${e[1]}`)},m(i,r){U(i,t,r),ie(t,n)},p(i,[r]){r&1&&S(t,"title",i[0]),r&2&&o!==(o=`--color:${i[1]}`)&&S(t,"style",o)},i:tt,o:tt,d(i){i&&H(t)}}}function uw(e,t,n){let o,{color:i=void 0}=t,{title:r=void 0}=t;return e.$$set=s=>{"color"in s&&n(2,i=s.color),"title"in s&&n(0,r=s.title)},e.$$.update=()=>{e.$$.dirty&4&&n(1,o=i?vn(i):"transparent")},[r,o,i]}var Hu=class extends bt{constructor(t){super();pt(this,t,uw,cw,gt,{color:2,title:0})}};function lm(e){let t,n;return{c(){t=$("span"),n=Ot(e[0])},m(o,i){U(o,t,i),ie(t,n)},p(o,i){i[0]&1&&Zt(n,o[0])},d(o){o&&H(t)}}}function fw(e){let t,n,o,i;n=new Hu({props:{color:e[4],title:Nn(e[8],e[10])}});let r=!e[9]&&lm(e);return{c(){t=$("span"),Pe(n.$$.fragment),o=xe(),r&&r.c(),S(t,"slot","label"),S(t,"class","PinturaButtonLabel")},m(s,l){U(s,t,l),ke(n,t,null),ie(t,o),r&&r.m(t,null),i=!0},p(s,l){let a={};l[0]&16&&(a.color=s[4]),l[0]&1280&&(a.title=Nn(s[8],s[10])),n.$set(a),s[9]?r&&(r.d(1),r=null):r?r.p(s,l):(r=lm(s),r.c(),r.m(t,null))},i(s){i||(I(n.$$.fragment,s),i=!0)},o(s){F(n.$$.fragment,s),i=!1},d(s){s&&H(t),Ce(n),r&&r.d()}}}function am(e){let t,n,o,i,r,s,l,a,c,u,f,h,m;c=new La({props:{class:"PinturaHuePicker",knobStyle:`background-color:${e[19]}`,onchange:e[24],value:e[14],min:0,max:1,step:.01}});let b=e[11]&&cm(e);return{c(){t=$("div"),n=$("div"),o=$("div"),i=$("div"),a=xe(),Pe(c.$$.fragment),u=xe(),b&&b.c(),S(i,"role","button"),S(i,"aria-label","Saturation slider"),S(i,"class","PinturaPickerKnob"),S(i,"tabindex","0"),S(i,"style",r=`background-color:${e[18]};`),S(o,"class","PinturaPickerKnobController"),S(o,"style",s=`transform:translate(${e[21]}%,${e[22]}%)`),S(n,"class","PinturaSaturationPicker"),S(n,"style",l=`background-color: ${e[19]}`),S(t,"class","PinturaPicker")},m(p,y){U(p,t,y),ie(t,n),ie(n,o),ie(o,i),e[31](n),ie(t,a),ke(c,t,null),ie(t,u),b&&b.m(t,null),f=!0,h||(m=[le(i,"nudge",e[27]),vt(il.call(null,i)),le(n,"pointerdown",e[26])],h=!0)},p(p,y){(!f||y[0]&262144&&r!==(r=`background-color:${p[18]};`))&&S(i,"style",r),(!f||y[0]&6291456&&s!==(s=`transform:translate(${p[21]}%,${p[22]}%)`))&&S(o,"style",s),(!f||y[0]&524288&&l!==(l=`background-color: ${p[19]}`))&&S(n,"style",l);let w={};y[0]&524288&&(w.knobStyle=`background-color:${p[19]}`),y[0]&16384&&(w.value=p[14]),c.$set(w),p[11]?b?(b.p(p,y),y[0]&2048&&I(b,1)):(b=cm(p),b.c(),I(b,1),b.m(t,null)):b&&(Ze(),F(b,1,1,()=>{b=null}),je())},i(p){f||(I(c.$$.fragment,p),I(b),f=!0)},o(p){F(c.$$.fragment,p),F(b),f=!1},d(p){p&&H(t),e[31](null),Ce(c),b&&b.d(),h=!1,Et(m)}}}function cm(e){let t,n;return t=new La({props:{class:"PinturaOpacityPicker",knobStyle:`background-color: ${e[16]}`,trackStyle:`background-image: linear-gradient(to right, ${e[17]}, ${e[18]})`,onchange:e[25],value:e[15],min:0,max:1,step:.01}}),{c(){Pe(t.$$.fragment)},m(o,i){ke(t,o,i),n=!0},p(o,i){let r={};i[0]&65536&&(r.knobStyle=`background-color: ${o[16]}`),i[0]&393216&&(r.trackStyle=`background-image: linear-gradient(to right, ${o[17]}, ${o[18]})`),i[0]&32768&&(r.value=o[15]),t.$set(r)},i(o){n||(I(t.$$.fragment,o),n=!0)},o(o){F(t.$$.fragment,o),n=!1},d(o){Ce(t,o)}}}function um(e){let t,n;return t=new sl({props:{label:"Presets",class:ze(["PinturaColorPresets",e[9]?"PinturaColorPresetsGrid":"PinturaColorPresetsList"]),hideLabel:!1,name:e[1],value:e[4],optionGroupClass:"PinturaListOptionGroup",optionClass:"PinturaListOption",options:e[2].map(e[32]),selectedIndex:e[3],optionMapper:e[7],optionLabelClass:e[6],onchange:e[33],$$slots:{option:[hw,({option:o})=>({44:o}),({option:o})=>[0,o?8192:0]],group:[dw,({option:o})=>({44:o}),({option:o})=>[0,o?8192:0]]},$$scope:{ctx:e}}}),{c(){Pe(t.$$.fragment)},m(o,i){ke(t,o,i),n=!0},p(o,i){let r={};i[0]&512&&(r.class=ze(["PinturaColorPresets",o[9]?"PinturaColorPresetsGrid":"PinturaColorPresetsList"])),i[0]&2&&(r.name=o[1]),i[0]&16&&(r.value=o[4]),i[0]&1028&&(r.options=o[2].map(o[32])),i[0]&8&&(r.selectedIndex=o[3]),i[0]&128&&(r.optionMapper=o[7]),i[0]&64&&(r.optionLabelClass=o[6]),i[0]&512|i[1]&24576&&(r.$$scope={dirty:i,ctx:o}),t.$set(r)},i(o){n||(I(t.$$.fragment,o),n=!0)},o(o){F(t.$$.fragment,o),n=!1},d(o){Ce(t,o)}}}function dw(e){let t,n=e[44].label+"",o;return{c(){t=$("span"),o=Ot(n),S(t,"slot","group")},m(i,r){U(i,t,r),ie(t,o)},p(i,r){r[1]&8192&&n!==(n=i[44].label+"")&&Zt(o,n)},d(i){i&&H(t)}}}function fm(e){let t,n=e[44].label+"",o;return{c(){t=$("span"),o=Ot(n),S(t,"class","PinturaButtonLabel")},m(i,r){U(i,t,r),ie(t,o)},p(i,r){r[1]&8192&&n!==(n=i[44].label+"")&&Zt(o,n)},d(i){i&&H(t)}}}function hw(e){let t,n,o,i;n=new Hu({props:{title:e[44].label,color:e[44].value}});let r=!e[9]&&fm(e);return{c(){t=$("span"),Pe(n.$$.fragment),o=xe(),r&&r.c(),S(t,"slot","option")},m(s,l){U(s,t,l),ke(n,t,null),ie(t,o),r&&r.m(t,null),i=!0},p(s,l){let a={};l[1]&8192&&(a.title=s[44].label),l[1]&8192&&(a.color=s[44].value),n.$set(a),s[9]?r&&(r.d(1),r=null):r?r.p(s,l):(r=fm(s),r.c(),r.m(t,null))},i(s){i||(I(n.$$.fragment,s),i=!0)},o(s){F(n.$$.fragment,s),i=!1},d(s){s&&H(t),Ce(n),r&&r.d()}}}function mw(e){let t,n,o,i=e[13]&&am(e),r=e[12]&&um(e);return{c(){t=$("div"),i&&i.c(),n=xe(),r&&r.c(),S(t,"slot","details"),S(t,"class","PinturaColorPickerPanel")},m(s,l){U(s,t,l),i&&i.m(t,null),ie(t,n),r&&r.m(t,null),o=!0},p(s,l){s[13]?i?(i.p(s,l),l[0]&8192&&I(i,1)):(i=am(s),i.c(),I(i,1),i.m(t,n)):i&&(Ze(),F(i,1,1,()=>{i=null}),je()),s[12]?r?(r.p(s,l),l[0]&4096&&I(r,1)):(r=um(s),r.c(),I(r,1),r.m(t,null)):r&&(Ze(),F(r,1,1,()=>{r=null}),je())},i(s){o||(I(i),I(r),o=!0)},o(s){F(i),F(r),o=!1},d(s){s&&H(t),i&&i.d(),r&&r.d()}}}function gw(e){let t,n;return t=new rl({props:{buttonClass:ze(["PinturaColorPickerButton",e[5]]),$$slots:{details:[mw],label:[fw]},$$scope:{ctx:e}}}),{c(){Pe(t.$$.fragment)},m(o,i){ke(t,o,i),n=!0},p(o,i){let r={};i[0]&32&&(r.buttonClass=ze(["PinturaColorPickerButton",o[5]])),i[0]&8388575|i[1]&16384&&(r.$$scope={dirty:i,ctx:o}),t.$set(r)},i(o){n||(I(t.$$.fragment,o),n=!0)},o(o){F(t.$$.fragment,o),n=!1},d(o){Ce(t,o)}}}function bw(e,t,n){let o,i,{label:r=void 0}=t,{name:s=void 0}=t,{options:l=[]}=t,{selectedIndex:a=-1}=t,{value:c=void 0}=t,{buttonClass:u=void 0}=t,{optionLabelClass:f=void 0}=t,{optionMapper:h=void 0}=t,{onchange:m=void 0}=t,{title:b=void 0}=t,{hidePresetLabel:p=!0}=t,{locale:y=void 0}=t,{enableOpacity:w=!0}=t,{enablePresets:C=!0}=t,{enablePicker:M=!0}=t,R,k,T,P,D,x,A,g,O,j=(V,ye)=>{if(D=[V[0],V[1],V[2]],ye){let L=aw(...D);n(14,R=L[0]),n(29,k=L[1]),n(30,T=L[2]),n(15,P=ut(V[3])?V[3]:1)}n(16,x=vn(V)),n(17,A=vn([...D,0])),n(18,g=vn([...D,1])),n(19,O=vn(sm(R,1,1)))};c&&j(c,!0);let v=()=>{let ye=[...sm(R,k,T),P];j(ye),m(ye)},G=V=>{let ye=V.length===3?[...V,1]:V;j(ye,!0),m(ye)},z=V=>{n(14,R=V),P===0&&n(15,P=1),v()},B=(V,ye)=>{n(29,k=V),n(30,T=ye),P===0&&n(15,P=1),v()},ee=V=>{n(15,P=V),v()},ge=(V,ye)=>{let L=Mt(V.x/ye.width,0,1),q=Mt(V.y/ye.height,0,1);B(L,1-q)},ve,Oe,Ve,J,Y=V=>{V.stopPropagation(),Oe=Cn(ve.offsetWidth,ve.offsetHeight),Ve=Ng(V),J=Vf(V),ge(Ve,Oe),document.documentElement.addEventListener("pointermove",ue),document.documentElement.addEventListener("pointerup",be)},ue=V=>{let ye=kn(Vf(V),J);ge(Vn(At(Ve),ye),Oe)},be=V=>{Oe=void 0,document.documentElement.removeEventListener("pointermove",ue),document.documentElement.removeEventListener("pointerup",be)},He=V=>{Oe=Cn(ve.offsetWidth,ve.offsetHeight);let ye=o/100*Oe.width,L=i/100*Oe.height;ge({x:ye+V.detail.x,y:L+V.detail.y},Oe)};function ft(V){Bt[V?"unshift":"push"](()=>{ve=V,n(20,ve)})}let ae=([V,ye])=>[V,Qn(ye)?ye(y):ye],rt=V=>G(V.value);return e.$$set=V=>{"label"in V&&n(0,r=V.label),"name"in V&&n(1,s=V.name),"options"in V&&n(2,l=V.options),"selectedIndex"in V&&n(3,a=V.selectedIndex),"value"in V&&n(4,c=V.value),"buttonClass"in V&&n(5,u=V.buttonClass),"optionLabelClass"in V&&n(6,f=V.optionLabelClass),"optionMapper"in V&&n(7,h=V.optionMapper),"onchange"in V&&n(28,m=V.onchange),"title"in V&&n(8,b=V.title),"hidePresetLabel"in V&&n(9,p=V.hidePresetLabel),"locale"in V&&n(10,y=V.locale),"enableOpacity"in V&&n(11,w=V.enableOpacity),"enablePresets"in V&&n(12,C=V.enablePresets),"enablePicker"in V&&n(13,M=V.enablePicker)},e.$$.update=()=>{e.$$.dirty[0]&536870912&&n(21,o=k*100),e.$$.dirty[0]&1073741824&&n(22,i=100-T*100)},[r,s,l,a,c,u,f,h,b,p,y,w,C,M,R,P,x,A,g,O,ve,o,i,G,z,ee,Y,He,m,k,T,ft,ae,rt]}var cl=class extends bt{constructor(t){super();pt(this,t,bw,gw,gt,{label:0,name:1,options:2,selectedIndex:3,value:4,buttonClass:5,optionLabelClass:6,optionMapper:7,onchange:28,title:8,hidePresetLabel:9,locale:10,enableOpacity:11,enablePresets:12,enablePicker:13},[-1,-1])}},os=e=>e.charAt(0).toUpperCase()+e.slice(1),ul=null,Nu=()=>{if(ul===null)if(!on())ul=!1;else try{ul=document.fonts.check("16px TestNonExistingFont")===!1}catch(e){ul=!1}return ul},Uu=(e,t)=>n=>n[t?`${t}${os(e)}`:e],pw=e=>[e,`${e}`],Da=(e,t)=>n=>[e[n],Uu(n,t)],is=[1,.2549,.2118],dm=[1,1,1,0],hm={path:()=>({points:[],disableErase:!1}),eraser:()=>({eraseRadius:0}),line:()=>({x1:0,y1:0,x2:0,y2:0,disableErase:!1}),rectangle:()=>({x:0,y:0,width:0,height:0}),ellipse:()=>({x:0,y:0,rx:0,ry:0}),text:()=>({x:0,y:0,text:"Text"})},qi=(e,t={},n={position:"relative"})=>hm[e]?[{...hm[e](),...t},n]:void 0,yw=e=>({sharpie:qi("path",{strokeWidth:"0.5%",strokeColor:[...is],disableMove:!0}),eraser:qi("eraser"),line:qi("line",{strokeColor:[...is],strokeWidth:"0.5%"}),arrow:qi("line",{lineStart:"none",lineEnd:"arrow-solid",strokeColor:[...is],strokeWidth:"0.5%"}),rectangle:qi("rectangle",{strokeColor:[...dm],backgroundColor:[...is]}),ellipse:qi("ellipse",{strokeColor:[...dm],backgroundColor:[...is]}),text:qi("text",{color:[...is],fontSize:"2%"}),...e}),Zu=(e,t,n)=>[e,t||Uu(e,"shapeLabelTool"),{icon:Uu(e,"shapeIconTool"),...n}],Sw=(e=["sharpie","eraser","line","arrow","rectangle","ellipse","text","preset"])=>e.map(t=>{if(Ht(t))return Zu(t);if(Array.isArray(t))return Ws(t[1])?Zu(t[0],void 0,t[1]):Zu(t[0],t[1],t[2])}).filter(Boolean),_w=()=>({transparent:[1,1,1,0],white:[1,1,1],silver:[.8667,.8667,.8667],gray:[.6667,.6667,.6667],black:[0,0,0],navy:[0,.1216,.2471],blue:[0,.4549,.851],aqua:[.498,.8588,1],teal:[.2235,.8,.8],olive:[.2392,.6,.4392],green:[.1804,.8,.251],yellow:[1,.8627,0],orange:[1,.5216,.1059],red:[1,.2549,.2118],maroon:[.5216,.0784,.2941],fuchsia:[.9412,.0706,.7451],purple:[.6941,.051,.7882]});var ww=()=>({extraSmall:"2%",small:"4%",mediumSmall:"8%",medium:"10%",mediumLarge:"15%",large:"20%",extraLarge:"25%"}),kw=()=>({extraSmall:"40%",small:"60%",mediumSmall:"100%",medium:"120%",mediumLarge:"140%",large:"180%",extraLarge:"220%"});var Cw=()=>({extraSmall:"0.25%",small:"0.5%",mediumSmall:"1%",medium:"1.75%",mediumLarge:"2.5%",large:"3.5%",extraLarge:"5%"}),Tw=()=>["bar","arrow","arrowSolid","circle","circleSolid","square","squareSolid"],Rw=()=>[["Helvetica, Arial, Verdana, 'Droid Sans', sans-serif","Sans Serif"],["'Arial Black', 'Avenir-Black', 'Arial Bold'","Black"],["'Arial Narrow', 'Futura-CondensedMedium'","Narrow"],["'Trebuchet MS'","Humanist"],["Georgia, 'Avenir-Black', 'Times New Roman', 'Droid Serif', serif","Serif"],["Palatino","Old-Style"],["'Times New Roman', 'TimesNewRomanPSMT'","Transitional"],["Menlo, Monaco, 'Lucida Console', monospace","Monospaced"],["'Courier New', monospace","Slab Serif"]],Pw=()=>["left","center","right"],Mw=()=>[["normal","bold"],["italic","normal"],["italic","bold"]],Iw=e=>Object.keys(e).map(Da(e,"shapeTitleColor"));var Aw=e=>Object.keys(e).map(Da(e,"labelSize"));var Ew=e=>Object.keys(e).map(Da(e,"labelSize"));var vw=e=>Object.keys(e).map(Da(e,"labelSize")),Lw=e=>[...e],Fw=e=>e.map(t=>[t,n=>n[`shapeLabelFontStyle${t.filter(o=>o!=="normal").map(os).join("")}`]]),xw=e=>e.map(t=>[W1(t),n=>n[`shapeTitleLineDecoration${os(t)}`],{icon:n=>n[`shapeIconLineDecoration${os(t)}`]}]),Ow=e=>e.map(t=>[t,n=>n[`shapeTitleTextAlign${os(t)}`],{hideLabel:!0,icon:n=>n[`shapeIconTextAlign${os(t)}`]}]),to=(e,t)=>{let{defaultKey:n,defaultValue:o,defaultOptions:i}=t||{},r=[];return n&&(r[0]=[o,s=>s[n],{...i}]),[...r,...e]},mm=e=>e.split(",").map(t=>t.trim()).some(t=>document.fonts.check(`16px ${t}`)),Bw=(e,t={})=>[cl,{title:n=>n.labelColor,options:to(e),...t}],gm=(e={})=>[vu,{...e}],bm="PinturaFontTest",Dw=(e,t={defaultKey:"labelDefault"})=>[Uo,{title:n=>n.shapeTitleFontFamily,onload:({options:n=[]})=>{!Nu()||n.map(([o])=>o).filter(Boolean).filter(o=>!mm(o)).forEach(o=>{let i=`${bm}-${o.replace(/[^a-zA-Z0-9]+/g,"").toLowerCase()}`;document.getElementById(i)||document.body.append(Tt("span",{textContent:" ",id:i,class:bm,style:`font-family:${o};font-size:0;color:transparent;`}))})},ondestroy:()=>{if(!Nu())return;document.querySelectorAll(".PinturaFontTest").forEach(o=>o.remove())},optionLabelStyle:n=>`font-family: ${n}`,options:to(e,t),optionFilter:n=>{if(!Nu())return!0;let[o]=n;return o?mm(o):!0}}],zw=(e,t={})=>[cl,{title:n=>n.shapeTitleBackgroundColor,options:to(e),...t}],Ww=(e,t={})=>[cl,{title:n=>n.shapeTitleStrokeColor,options:to(e),buttonClass:"PinturaColorPickerButtonStroke",onchange:(n,o)=>{let i=o.strokeWidth;(ut(i)||Ht(i)?parseFloat(i):0)>0||(o.strokeWidth=t&&t.defaultStrokeWidth||"0.5%")},...t}],Vw=e=>[Uo,{title:t=>t.shapeTitleStrokeWidth,options:t=>mt(t,"backgroundColor")?to(e,{defaultKey:"shapeLabelStrokeNone"}):to(e),onchange:(t,n)=>{if(!t)return;let o=n.strokeColor||[];if(o[3])return;let i=[...o];i[3]=1,n.strokeColor[3]=i}}],pm=(e,t,n)=>[Uo,{title:o=>o[t],options:to(e,{defaultKey:"labelNone",defaultOptions:{icon:'<g stroke="currentColor" stroke-linecap="round" stroke-width=".125em"><path d="M5,12 H14"/></g>'}}),optionIconStyle:n}],Hw=e=>pm(e,"shapeTitleLineStart","transform: scaleX(-1)"),Nw=e=>pm(e,"shapeTitleLineEnd"),Uw=e=>[cl,{title:t=>t.shapeTitleTextColor,options:to(e)}],Zw=e=>[Uo,{title:t=>t.shapeTitleFontStyle,optionLabelStyle:t=>t&&`font-style:${t[0]};font-weight:${t[1]}`,options:to(e,{defaultKey:"shapeLabelFontStyleNormal"})}],jw=e=>{let t;return e.find(([n])=>n==="4%")||(t={defaultKey:"labelAuto",defaultValue:"4%"}),[Uo,{title:n=>n.shapeTitleFontSize,options:to(e,t)}]},Gw=e=>[sl,{title:t=>t.shapeTitleTextAlign,options:to(e)}],Xw=e=>{let t;return e.find(([n])=>n==="120%")||(t={defaultKey:"labelAuto",defaultValue:"120%"}),[Uo,{title:n=>n.shapeTitleLineHeight,options:to(e,t)}]},Yw=e=>e.map(pw),qw=(e={})=>{let{colorOptions:t=Iw(_w()),lineEndStyleOptions:n=xw(Tw()),fontFamilyOptions:o=Lw(Rw()),fontStyleOptions:i=Fw(Mw()),textAlignOptions:r=Ow(Pw())}=e,{strokeWidthOptions:s=vw(Cw()),fontSizeOptions:l=Aw(ww()),lineHeightOptions:a=Ew(kw())}=e;[l,a,s]=[l,a,s].map(u=>Array.isArray(u)&&u.every(ut)?Yw(u):u);let c={defaultColor:t&&Bw(t),defaultNumber:gm(),defaultPercentage:gm({getValue:u=>parseFloat(u),setValue:u=>`${u}%`,step:.05,label:(u,f,h)=>`${Math.round(u/h*100)}%`,labelClass:"PinturaPercentageLabel"}),backgroundColor:t&&zw(t),strokeColor:t&&Ww(t),strokeWidth:s&&Vw(s),lineStart:n&&Hw(n),lineEnd:n&&Nw(n),color:t&&Uw(t),fontFamily:o&&Dw(o),fontStyle_fontWeight:i&&Zw(i),fontSize:l&&jw(l),lineHeight:a&&Xw(a),textAlign:r&&Gw(r),frameColor:["defaultColor"],frameSize:["defaultPercentage",{min:.2,max:10,title:u=>u.labelSize}],frameInset:["defaultPercentage",{min:.5,max:10,title:u=>u.labelInset}],frameOffset:["defaultPercentage",{min:.5,max:10,title:u=>u.labelOffset}],frameRadius:["defaultPercentage",{min:.5,max:10,title:u=>u.labelRadius}],frameAmount:["defaultNumber",{min:1,max:5,step:1,title:u=>u.labelAmount}]};return Object.entries(e).forEach(([u,f])=>{c[u]||(c[u]=f)}),c};function Kw(e){let t,n,o,i,r=e[3].default,s=Nt(r,e,e[2],null);return{c(){t=$("div"),s&&s.c(),S(t,"class",e[0])},m(l,a){U(l,t,a),s&&s.m(t,null),n=!0,o||(i=[le(t,"measure",e[1]),vt(Ln.call(null,t))],o=!0)},p(l,[a]){s&&s.p&&a&4&&Ut(s,r,l,l[2],a,null,null),(!n||a&1)&&S(t,"class",l[0])},i(l){n||(I(s,l),n=!0)},o(l){F(s,l),n=!1},d(l){l&&H(t),s&&s.d(l),o=!1,Et(i)}}}function Jw(e,t,n){let{$$slots:o={},$$scope:i}=t,r=mo(),{class:s=null}=t,l=({detail:a})=>r("measure",a);return e.$$set=a=>{"class"in a&&n(0,s=a.class),"$$scope"in a&&n(2,i=a.$$scope)},[s,l,i,o]}var ym=class extends bt{constructor(t){super();pt(this,t,Jw,Kw,gt,{class:0})}},Qw=e=>({}),Sm=e=>({}),$w=e=>({}),_m=e=>({}),e5=e=>({}),wm=e=>({});function km(e){let t,n,o=e[4].header,i=Nt(o,e,e[3],wm);return{c(){t=$("div"),i&&i.c(),S(t,"class","PinturaUtilHeader")},m(r,s){U(r,t,s),i&&i.m(t,null),n=!0},p(r,s){i&&i.p&&s&8&&Ut(i,o,r,r[3],s,e5,wm)},i(r){n||(I(i,r),n=!0)},o(r){F(i,r),n=!1},d(r){r&&H(t),i&&i.d(r)}}}function t5(e){let t,n;return t=new ym({props:{class:"PinturaStage"}}),t.$on("measure",e[5]),{c(){Pe(t.$$.fragment)},m(o,i){ke(t,o,i),n=!0},p:tt,i(o){n||(I(t.$$.fragment,o),n=!0)},o(o){F(t.$$.fragment,o),n=!1},d(o){Ce(t,o)}}}function Cm(e){let t,n,o=e[4].footer,i=Nt(o,e,e[3],Sm);return{c(){t=$("div"),i&&i.c(),S(t,"class","PinturaUtilFooter")},m(r,s){U(r,t,s),i&&i.m(t,null),n=!0},p(r,s){i&&i.p&&s&8&&Ut(i,o,r,r[3],s,Qw,Sm)},i(r){n||(I(i,r),n=!0)},o(r){F(i,r),n=!1},d(r){r&&H(t),i&&i.d(r)}}}function n5(e){let t,n,o,i,r,s,l=e[1]&&km(e),a=e[4].main,c=Nt(a,e,e[3],_m),u=c||t5(e),f=e[2]&&Cm(e),h=!1;return{c(){l&&l.c(),t=xe(),n=$("div"),u&&u.c(),o=xe(),f&&f.c(),i=xe(),r=en(),S(n,"class","PinturaUtilMain")},m(m,b){l&&l.m(m,b),U(m,t,b),U(m,n,b),u&&u.m(n,null),e[6](n),U(m,o,b),f&&f.m(m,b),U(m,i,b),U(m,r,b),s=!0},p(m,[b]){m[1]?l?(l.p(m,b),b&2&&I(l,1)):(l=km(m),l.c(),I(l,1),l.m(t.parentNode,t)):l&&(Ze(),F(l,1,1,()=>{l=null}),je()),c&&c.p&&b&8&&Ut(c,a,m,m[3],b,$w,_m),m[2]?f?(f.p(m,b),b&4&&I(f,1)):(f=Cm(m),f.c(),I(f,1),f.m(i.parentNode,i)):f&&(Ze(),F(f,1,1,()=>{f=null}),je())},i(m){s||(I(l),I(u,m),I(f),I(h),s=!0)},o(m){F(l),F(u,m),F(f),F(h),s=!1},d(m){l&&l.d(m),m&&H(t),m&&H(n),u&&u.d(m),e[6](null),m&&H(o),f&&f.d(m),m&&H(i),m&&H(r)}}}function o5(e,t,n){let{$$slots:o={},$$scope:i}=t,{hasHeader:r=!!t.$$slots.header}=t,{hasFooter:s=!!t.$$slots.footer}=t,{root:l=void 0}=t;function a(u){qr(e,u)}function c(u){Bt[u?"unshift":"push"](()=>{l=u,n(0,l)})}return e.$$set=u=>{n(7,t=Jt(Jt({},t),Wc(u))),"hasHeader"in u&&n(1,r=u.hasHeader),"hasFooter"in u&&n(2,s=u.hasFooter),"root"in u&&n(0,l=u.root),"$$scope"in u&&n(3,i=u.$$scope)},t=Wc(t),[l,r,s,i,o,a,c]}var Tm=class extends bt{constructor(t){super();pt(this,t,o5,n5,gt,{hasHeader:1,hasFooter:2,root:0})}};function Rm(e){let t,n;return{c(){t=$("div"),S(t,"class","PinturaRangeInputMeter"),S(t,"style",n=`transform: translateX(${e[8].x-e[9].x}px) translateY(${e[8].y-e[9].y}px)`)},m(o,i){U(o,t,i),t.innerHTML=e[6]},p(o,i){i[0]&64&&(t.innerHTML=o[6]),i[0]&256&&n!==(n=`transform: translateX(${o[8].x-o[9].x}px) translateY(${o[8].y-o[9].y}px)`)&&S(t,"style",n)},d(o){o&&H(t)}}}function i5(e){let t,n,o,i,r,s,l,a,c,u,f,h=e[8]&&Rm(e);return{c(){t=$("div"),n=$("span"),o=Ot(e[3]),i=xe(),r=$("button"),s=Ot(e[1]),a=xe(),c=$("div"),h&&h.c(),S(n,"class","PinturaRangeInputValue"),S(r,"class","PinturaRangeInputReset"),S(r,"type","button"),r.disabled=l=e[0]===e[2],S(c,"class","PinturaRangeInputInner"),S(c,"style",e[7]),S(c,"data-value-limited",e[5]),S(t,"class","PinturaRangeInput"),S(t,"tabindex","0")},m(m,b){U(m,t,b),ie(t,n),ie(n,o),ie(t,i),ie(t,r),ie(r,s),ie(t,a),ie(t,c),h&&h.m(c,null),u||(f=[le(r,"click",e[14]),le(c,"interactionstart",e[10]),le(c,"interactionupdate",e[12]),le(c,"interactionend",e[13]),le(c,"interactionrelease",e[11]),vt(Aa.call(null,c,{inertia:!0})),le(c,"measure",e[32]),vt(Ln.call(null,c)),le(t,"wheel",e[16],{passive:!1}),le(t,"nudge",e[17]),vt(il.call(null,t,{direction:"horizontal"}))],u=!0)},p(m,b){b[0]&8&&Zt(o,m[3]),b[0]&2&&Zt(s,m[1]),b[0]&5&&l!==(l=m[0]===m[2])&&(r.disabled=l),m[8]?h?h.p(m,b):(h=Rm(m),h.c(),h.m(c,null)):h&&(h.d(1),h=null),b[0]&128&&S(c,"style",m[7]),b[0]&32&&S(c,"data-value-limited",m[5])},i:tt,o:tt,d(m){m&&H(t),h&&h.d(),u=!1,Et(f)}}}var r5=2,s5=.75,l5=10,a5=5,ju=40;function c5(e,t,n){let o,i,r,s,l,a,c,u,{labelReset:f="Reset"}=t,{direction:h="x"}=t,{min:m=0}=t,{max:b=1}=t,{base:p=m}=t,{value:y=0}=t,{valueLabel:w=0}=t,{valueMin:C=void 0}=t,{valueMax:M=void 0}=t,{oninputstart:R=ct}=t,{oninputmove:k=ct}=t,{oninputend:T=ct}=t,{elasticity:P=0}=t,D=(L,q,Me)=>Math.ceil((L-Me)/q)*q+Me,x,A,g,O={x:2,y:0},j=(L,q,Me)=>`M ${L-Me} ${q} a ${Me} ${Me} 0 1 0 0 -1`;function v(L,q){let Me=1/ju,Be=ll(L,m,b),Se=ll(q,m,b),Ge=nt(D(Be,Me,0)-Me*.5),st=nt(D(Se,Me,0)-Me*.5);return`--range-mask-from:${Ge*100}%;--range-mask-to:${st*100}%`}let G,z=!1,B,ee={snap:!1,elastic:!1},ge=()=>{z=!1,G=Wo(ue),B=[be(C??m,h),be(M??b,h)],R()},ve=()=>{z=!0},Oe=({detail:L})=>{ee.snap=!z,ee.elastic=!z,J(G,L.translation,ee)},Ve=({detail:L})=>{ee.snap=!1,ee.elastic=!1;let q=J(G,L.translation,ee);if(G=void 0,B=void 0,Math.abs(q-p)<.01)return T(p);T(q)},J=(L,q,Me)=>{let Be=L[h]+q[h],Se=Mt(Be,B[1][h],B[0][h]),Ge=P?Se+ts(Be-Se,P):Se,st=Me.elastic?Ge:Se,Q=oe(0,0);return Q[h]=st,ue.set(Q,{hard:Me.snap}),Mt(He(Q,h),m,b)},Y=()=>{n(0,y=Mt(p,i,r)),R(),T(y)},ue=qe();W(e,ue,L=>n(8,u=L));let be=(L,q)=>{let Me=(x[q]-s[q])*.5,Se=ll(L,m,b)*s[q]-s[q]*.5,Ge=Me-Se;return{x:q==="x"?Ge:0,y:q==="y"?Ge:0}},He=(L,q)=>{let Be=-((L[q]-x[q]*.5)/s[q]);return m+Be*o},ft=ue.subscribe(L=>{!L||!G||k(Mt(He(L,h),m,b))}),ae=L=>{let q=[be(C??m,h),be(M??b,h)],Me={x:h==="x"?u.x+L:0,y:h==="y"?u.y+L:0},Be=Mt(Me[h],q[1][h],q[0][h]),Se={...u,[h]:Be};fe(ue,u=Se,u);let Ge=Mt(He(Se,h),m,b);R(),k(Ge),T(Ge)},rt=L=>{L.preventDefault(),L.stopPropagation();let q=8,Me=Cu(L)*q;ae(Me)},V=({detail:L})=>{ae(L[h]*8)};Vo(()=>{ft()});let ye=L=>n(4,x=Hg(L.detail));return e.$$set=L=>{"labelReset"in L&&n(1,f=L.labelReset),"direction"in L&&n(18,h=L.direction),"min"in L&&n(19,m=L.min),"max"in L&&n(20,b=L.max),"base"in L&&n(2,p=L.base),"value"in L&&n(0,y=L.value),"valueLabel"in L&&n(3,w=L.valueLabel),"valueMin"in L&&n(21,C=L.valueMin),"valueMax"in L&&n(22,M=L.valueMax),"oninputstart"in L&&n(23,R=L.oninputstart),"oninputmove"in L&&n(24,k=L.oninputmove),"oninputend"in L&&n(25,T=L.oninputend),"elasticity"in L&&n(26,P=L.elasticity)},e.$$.update=()=>{if(e.$$.dirty[0]&1572864&&n(28,o=b-m),e.$$.dirty[0]&2621440&&n(29,i=C!=null?Math.max(C,m):m),e.$$.dirty[0]&5242880&&n(30,r=M!=null?Math.min(M,b):b),e.$$.dirty[0]&1572868&&n(31,l=ll(p,m,b)),e.$$.dirty[0]&16|e.$$.dirty[1]&1&&x){let L=x.y*.5,q=ju*l,Me="",Be,Se=x.y,Ge="";for(let st=0;st<=ju;st++){let Q=O.x+st*l5,Ke=L,Je=st%a5==0?r5:s5;Me+=j(Q,Ke,Je)+" ",Be=Q+O.x,st===q&&(Ge=`<path d="M${Q} ${Ke-4} l2 3 l-2 -1 l-2 1 z"/>`)}n(6,A=`<svg width="${Be}" height="${Se}" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 ${Be} ${Se}" aria-hidden="true" focusable="false">
        ${Ge}
        <rect rx="4" ry="4" y="${L-4}"" height="8"/>
        <path fill-rule="evenodd" d="${Me.trim()}"/></svg>`),n(27,g={x:Be-O.x*2,y:Se})}e.$$.dirty[0]&134217744&&(s=x&&g),e.$$.dirty[0]&1612185600&&n(5,a=i!==m||r!==b),e.$$.dirty[0]&1610612768&&n(7,c=a?v(i,r):""),e.$$.dirty[0]&268697617&&o&&x&&x.x&&x.y&&ue.set(be(y,h))},[y,f,p,w,x,a,A,c,u,O,ge,ve,Oe,Ve,Y,ue,rt,V,h,m,b,C,M,R,k,T,P,g,o,i,r,l,ye]}var Gu=class extends bt{constructor(t){super();pt(this,t,c5,i5,gt,{labelReset:1,direction:18,min:19,max:20,base:2,value:0,valueLabel:3,valueMin:21,valueMax:22,oninputstart:23,oninputmove:24,oninputend:25,elasticity:26},[-1,-1])}};function u5(e){let t,n,o,i,r,s=e[7].default,l=Nt(s,e,e[6],null);return{c(){t=$("div"),n=$("div"),l&&l.c(),S(n,"class","PinturaToolbarInner"),S(t,"class","PinturaToolbar"),S(t,"data-layout",e[1]),S(t,"data-overflow",e[0])},m(a,c){U(a,t,c),ie(t,n),l&&l.m(n,null),o=!0,i||(r=[le(n,"measure",e[3]),vt(Ln.call(null,n)),le(t,"measure",e[2]),vt(Ln.call(null,t))],i=!0)},p(a,[c]){l&&l.p&&c&64&&Ut(l,s,a,a[6],c,null,null),(!o||c&2)&&S(t,"data-layout",a[1]),(!o||c&1)&&S(t,"data-overflow",a[0])},i(a){o||(I(l,a),o=!0)},o(a){F(l,a),o=!1},d(a){a&&H(t),l&&l.d(a),i=!1,Et(r)}}}function f5(e,t,n){let o,{$$slots:i={},$$scope:r}=t,s=0,l=0,a=0,c,u=()=>{n(0,c=o==="compact"&&s>a?"overflow":void 0)},f=({detail:m})=>{let{width:b}=m;n(5,a=b),u()},h=({detail:m})=>{let{width:b}=m;b>l&&n(4,l=b),s=b,c||u()};return e.$$set=m=>{"$$scope"in m&&n(6,r=m.$$scope)},e.$$.update=()=>{e.$$.dirty&48&&n(1,o=l>a?"compact":"default")},[c,o,f,h,l,a,r,i]}var Pm=class extends bt{constructor(t){super();pt(this,t,f5,u5,gt,{})}},Xu={Top:"t",Right:"r",Bottom:"b",Left:"l",TopLeft:"tl",TopRight:"tr",BottomRight:"br",BottomLeft:"bl"},{Top:hi,Right:mi,Bottom:gi,Left:bi,TopLeft:no,TopRight:oo,BottomRight:io,BottomLeft:ro}=Xu,d5={[hi]:e=>({x:e.x,y:e.y}),[oo]:e=>({x:e.x+e.width,y:e.y}),[mi]:e=>({x:e.x+e.width,y:e.y}),[io]:e=>({x:e.x+e.width,y:e.y+e.height}),[gi]:e=>({x:e.x,y:e.y+e.height}),[ro]:e=>({x:e.x,y:e.y+e.height}),[bi]:e=>({x:e.x,y:e.y}),[no]:e=>({x:e.x,y:e.y})};function Mm(e,t,n){let o=e.slice();return o[12]=t[n].key,o[13]=t[n].translate,o[14]=t[n].scale,o[15]=t[n].type,o[16]=t[n].opacity,o}function Im(e,t){let n,o,i,r,s,l,a,c;return{key:e,first:null,c(){n=$("div"),S(n,"role","button"),S(n,"aria-label",o=`Drag ${t[15]} ${t[12]}`),S(n,"tabindex",i=t[15]==="edge"?-1:0),S(n,"class","PinturaRectManipulator"),S(n,"data-direction",r=t[12]),S(n,"data-shape",s=`${t[15]==="edge"?"edge":`${t[0]}`}`),S(n,"style",l=`transform: translate3d(${t[13].x}px, ${t[13].y}px, 0) scale(${t[14].x}, ${t[14].y}); opacity: ${t[16]}`),this.first=n},m(u,f){U(u,n,f),a||(c=[le(n,"nudge",function(){jt(t[5](t[12]))&&t[5](t[12]).apply(this,arguments)}),vt(il.call(null,n)),le(n,"interactionstart",function(){jt(t[4]("resizestart",t[12]))&&t[4]("resizestart",t[12]).apply(this,arguments)}),le(n,"interactionupdate",function(){jt(t[4]("resizemove",t[12]))&&t[4]("resizemove",t[12]).apply(this,arguments)}),le(n,"interactionend",function(){jt(t[4]("resizeend",t[12]))&&t[4]("resizeend",t[12]).apply(this,arguments)}),vt(Aa.call(null,n))],a=!0)},p(u,f){t=u,f&2&&o!==(o=`Drag ${t[15]} ${t[12]}`)&&S(n,"aria-label",o),f&2&&i!==(i=t[15]==="edge"?-1:0)&&S(n,"tabindex",i),f&2&&r!==(r=t[12])&&S(n,"data-direction",r),f&3&&s!==(s=`${t[15]==="edge"?"edge":`${t[0]}`}`)&&S(n,"data-shape",s),f&2&&l!==(l=`transform: translate3d(${t[13].x}px, ${t[13].y}px, 0) scale(${t[14].x}, ${t[14].y}); opacity: ${t[16]}`)&&S(n,"style",l)},d(u){u&&H(n),a=!1,Et(c)}}}function h5(e){let t=[],n=new Map,o,i=e[1],r=s=>s[12];for(let s=0;s<i.length;s+=1){let l=Mm(e,i,s),a=r(l);n.set(a,t[s]=Im(a,l))}return{c(){for(let s=0;s<t.length;s+=1)t[s].c();o=en()},m(s,l){for(let a=0;a<t.length;a+=1)t[a].m(s,l);U(s,o,l)},p(s,[l]){l&51&&(i=s[1],t=Jr(t,l,r,1,s,i,n,o.parentNode,Hp,Im,o,Mm))},i:tt,o:tt,d(s){for(let l=0;l<t.length;l+=1)t[l].d(s);s&&H(o)}}}function m5(e,t,n){let o,i,r,{rect:s=null}=t,{visible:l=!1}=t,{style:a=void 0}=t,c=qe(void 0,{precision:1e-4,stiffness:.2,damping:.4});W(e,c,p=>n(8,i=p));let u=qe(0,{precision:.001});W(e,u,p=>n(9,r=p));let f,h=mo(),m=(p,y)=>({detail:w})=>{f&&y!==f||p!=="resizestart"&&f===void 0||(p==="resizestart"&&(f=y),p==="resizeend"&&(f=void 0),h(p,{direction:y,translation:w&&w.translation}))},b=p=>({detail:y})=>{h("resizestart",{direction:p,translation:{x:0,y:0}}),h("resizemove",{direction:p,translation:y}),h("resizeend",{direction:p,translation:{x:0,y:0}})};return e.$$set=p=>{"rect"in p&&n(6,s=p.rect),"visible"in p&&n(7,l=p.visible),"style"in p&&n(0,a=p.style)},e.$$.update=()=>{e.$$.dirty&128&&c.set(l?1:.5),e.$$.dirty&128&&u.set(l?1:0),e.$$.dirty&832&&n(1,o=Object.keys(Xu).map((p,y)=>{let w=Xu[p],C=d5[w](s),M=w.length===1?"edge":"corner",R=M==="corner";return{key:w,type:M,scale:{x:/^(t|b)$/.test(w)?s.width:R?Mt(i,.5,1.25):1,y:/^(r|l)$/.test(w)?s.height:R?Mt(i,.5,1.25):1},translate:{x:C.x,y:C.y},opacity:r}}))},[a,o,c,u,m,b,s,l,i,r]}var Am=class extends bt{constructor(t){super();pt(this,t,m5,h5,gt,{rect:6,visible:7,style:0})}},g5=e=>{function t(s,l){e.dispatchEvent(new CustomEvent(s,{detail:l}))}let n=s=>{s.preventDefault(),e.addEventListener("gesturechange",o),e.addEventListener("gestureend",i),t("gesturedown")},o=s=>{s.preventDefault(),t("gestureupdate",s.scale)},i=s=>{t("gestureup",s.scale),s.preventDefault(),r()},r=()=>{e.removeEventListener("gesturechange",o),e.removeEventListener("gestureend",i)};return e.addEventListener("gesturestart",n),{destroy:()=>{r(),e.removeEventListener("gesturestart",n)}}},Em=e=>oe(e.clientX,e.clientY),b5=(e,t,n)=>{let o=Em(e);return kn(kn(o,t),n)},vm={[hi]:gi,[mi]:bi,[gi]:hi,[bi]:mi,[no]:io,[oo]:ro,[io]:no,[ro]:oo},za={[hi]:[.5,0],[mi]:[1,.5],[gi]:[.5,1],[bi]:[0,.5],[no]:[0,0],[oo]:[1,0],[io]:[1,1],[ro]:[0,1]},Lm=e=>{let t=e===mi||e===oo||e===io,n=e===bi||e===ro||e===no,o=e===hi||e===oo||e===no,i=e===gi||e===io||e===ro,r=e===bi||e===mi,s=e===hi||e===gi;return[t,n,o,i,r,s,r||s]},p5=(e,t,n,o={})=>{let{target:i,translate:r}=t,{aspectRatio:s,minSize:l,maxSize:a}=o,c=vm[i],u=za[c],f=Vn(oe(e.x,e.y),oe(u[0]*e.width,u[1]*e.height)),h=za[i],m=Vn(et(e),oe(h[0]*e.width,h[1]*e.height)),[b,p,y,w,C,M,R]=Lm(i),k=r.x,T=r.y;C?T=0:M&&(k=0);let P=y5(f,i,n,{aspectRatio:s,minSize:l,maxSize:a}),[D,x,A,g]=Tc(e);if(b?g=f.x:p&&(x=f.x),w?D=f.y:y&&(A=f.y),b){let O=P.inner.x+P.inner.width,j=P.outer.x+P.outer.width;x=Mt(m.x+k,O,j)}else if(p){let O=P.outer.x,j=P.inner.x;g=Mt(m.x+k,O,j)}if(w){let O=P.inner.y+P.inner.height,j=P.outer.y+P.outer.height;A=Mt(m.y+T,O,j)}else if(y){let O=P.outer.y,j=P.inner.y;D=Mt(m.y+T,O,j)}if(s)if(R){let O=x-g,j=A-D;C?(j=O/s,D=f.y-j*.5,A=f.y+j*.5):M&&(O=j*s,g=f.x-O*.5,x=f.x+O*.5)}else{let O=oe(m.x+k-f.x,m.y+T-f.y);i===oo?(O.x=Math.max(0,O.x),O.y=Math.min(0,O.y)):i===io?(O.x=Math.max(0,O.x),O.y=Math.max(0,O.y)):i===ro?(O.x=Math.min(0,O.x),O.y=Math.max(0,O.y)):i===no&&(O.x=Math.min(0,O.x),O.y=Math.min(0,O.y));let j=Or(O),v=Or(oe(P.inner.width,P.inner.height)),G=Or(oe(P.outer.width,P.outer.height)),z=Mt(j,v,G),B=oe(s,1),ee=Dr(Oi(B),z);i===oo?(x=f.x+ee.x,D=f.y-ee.y):i===io?(x=f.x+ee.x,A=f.y+ee.y):i===ro?(g=f.x-ee.x,A=f.y+ee.y):i===no&&(g=f.x-ee.x,D=f.y-ee.y)}return Tn(g,D,x-g,A-D)},y5=(e,t,n,o)=>{let{aspectRatio:i,minSize:r,maxSize:s}=o,l=t===mi||t===oo||t===io,a=t===bi||t===ro||t===no,c=t===hi||t===oo||t===no,u=t===gi||t===io||t===ro,f=t===bi||t===mi,h=t===hi||t===gi,m=et(n);l?(m.x=e.x,m.width-=e.x):a&&(m.width=e.x),u?(m.y=e.y,m.height-=e.y):c&&(m.height=e.y);let b=Qg(Math.min(m.width,s.width),Math.min(m.height,s.height));if(i){if(f){let P=Math.min(e.y,n.height-e.y);b.height=Math.min(P*2,b.height)}else if(h){let P=Math.min(e.x,n.width-e.x);b.width=Math.min(P*2,b.width)}}let p=i?fi(En(b,i)):b,y=i?fi(Kl(An(r),i)):r,w,C,M,R;l?w=e.x:a&&(C=e.x),u?M=e.y:c&&(R=e.y),l?C=w+y.width:a&&(w=C-y.width),u?R=M+y.height:c&&(M=R-y.height),f?(M=e.y-y.height*.5,R=e.y+y.height*.5):h&&(w=e.x-y.width*.5,C=e.x+y.width*.5);let k=Ro([oe(w,M),oe(C,R)]);l?C=w+p.width:a&&(w=C-p.width),u?R=M+p.height:c&&(M=R-p.height),f?(M=e.y-p.height*.5,R=e.y+p.height*.5):h&&(w=e.x-p.width*.5,C=e.x+p.width*.5);let T=Ro([oe(w,M),oe(C,R)]);return{inner:k,outer:T}},Fm=(e,t,n={})=>{let{target:o,translate:i}=t,{aspectRatio:r}=n,s=vm[o],l=za[s],a=Vn(et(e),oe(l[0]*e.width,l[1]*e.height)),c=za[o],u=Vn(et(e),oe(c[0]*e.width,c[1]*e.height)),[f,h,m,b,p,y,w]=Lm(o),C=i.x,M=i.y;p?M=0:y&&(C=0);let[R,k,T,P]=Tc(e);if(f?P=a.x:h&&(k=a.x),b?R=a.y:m&&(T=a.y),f?k=u.x+C:h&&(P=u.x+C),b?T=u.y+M:m&&(R=u.y+M),r)if(w){let D=k-P,x=T-R;p?(x=D/r,R=a.y-x*.5,T=a.y+x*.5):y&&(D=x*r,P=a.x-D*.5,k=a.x+D*.5)}else{let D=oe(u.x+C-a.x,u.y+M-a.y);o===oo?(D.x=Math.max(0,D.x),D.y=Math.min(0,D.y)):o===io?(D.x=Math.max(0,D.x),D.y=Math.max(0,D.y)):o===ro?(D.x=Math.min(0,D.x),D.y=Math.max(0,D.y)):o===no&&(D.x=Math.min(0,D.x),D.y=Math.min(0,D.y));let x=Or(D),A=oe(r,1),g=Dr(Oi(A),x);o===oo?(k=a.x+g.x,R=a.y-g.y):o===io?(k=a.x+g.x,T=a.y+g.y):o===ro?(P=a.x-g.x,T=a.y+g.y):o===no&&(P=a.x-g.x,R=a.y-g.y)}return Tn(P,R,k-P,T-R)},xm=e=>e*180/Math.PI;function S5(e){let t,n,o;return n=new Gu({props:{elasticity:e[5],min:e[7],max:e[8],value:e[12],valueMin:e[0],valueMax:e[1],labelReset:e[6],base:e[11],valueLabel:`${Math.round(xm(e[12]))}\xB0`,oninputstart:e[2],oninputmove:e[14],oninputend:e[15]}}),{c(){t=$("div"),Pe(n.$$.fragment),S(t,"class","PinturaImageRotator")},m(i,r){U(i,t,r),ke(n,t,null),o=!0},p(i,[r]){let s={};r&32&&(s.elasticity=i[5]),r&128&&(s.min=i[7]),r&256&&(s.max=i[8]),r&4096&&(s.value=i[12]),r&1&&(s.valueMin=i[0]),r&2&&(s.valueMax=i[1]),r&64&&(s.labelReset=i[6]),r&2048&&(s.base=i[11]),r&4096&&(s.valueLabel=`${Math.round(xm(i[12]))}\xB0`),r&4&&(s.oninputstart=i[2]),r&1544&&(s.oninputmove=i[14]),r&1552&&(s.oninputend=i[15]),n.$set(s)},i(i){o||(I(n.$$.fragment,i),o=!0)},o(i){F(n.$$.fragment,i),o=!1},d(i){i&&H(t),Ce(n)}}}var Om=1e-9;function _5(e,t,n){let o,i,r,s,l,a,c=Math.PI/2,u=Math.PI/4,{rotation:f}=t,{valueMin:h}=t,{valueMax:m}=t,{oninputstart:b=ct}=t,{oninputmove:p=ct}=t,{oninputend:y=ct}=t,{elasticity:w=0}=t,{labelReset:C=void 0}=t,M=k=>p(s*l+k),R=k=>y(s*l+k);return e.$$set=k=>{"rotation"in k&&n(13,f=k.rotation),"valueMin"in k&&n(0,h=k.valueMin),"valueMax"in k&&n(1,m=k.valueMax),"oninputstart"in k&&n(2,b=k.oninputstart),"oninputmove"in k&&n(3,p=k.oninputmove),"oninputend"in k&&n(4,y=k.oninputend),"elasticity"in k&&n(5,w=k.elasticity),"labelReset"in k&&n(6,C=k.labelReset)},e.$$.update=()=>{e.$$.dirty&384&&n(11,r=o+(i-o)*.5),e.$$.dirty&8192&&n(9,s=Math.sign(f)),e.$$.dirty&8192&&n(10,l=Math.round(Math.abs(f)/c)*c),e.$$.dirty&9728&&n(12,a=f-s*l)},n(7,o=-u+Om),n(8,i=u-Om),[h,m,b,p,y,w,C,o,i,s,l,r,a,f,M,R]}var Bm=class extends bt{constructor(t){super();pt(this,t,_5,S5,gt,{rotation:13,valueMin:0,valueMax:1,oninputstart:2,oninputmove:3,oninputend:4,elasticity:5,labelReset:6})}};function w5(e){let t,n,o,i,r;return{c(){t=$("div"),n=$("p"),o=Ot(e[0]),i=Ot(" \xD7 "),r=Ot(e[1]),S(t,"class","PinturaImageInfo")},m(s,l){U(s,t,l),ie(t,n),ie(n,o),ie(n,i),ie(n,r)},p(s,[l]){l&1&&Zt(o,s[0]),l&2&&Zt(r,s[1])},i:tt,o:tt,d(s){s&&H(t)}}}function k5(e,t,n){let{width:o}=t,{height:i}=t;return e.$$set=r=>{"width"in r&&n(0,o=r.width),"height"in r&&n(1,i=r.height)},[o,i]}var Dm=class extends bt{constructor(t){super();pt(this,t,k5,w5,gt,{width:0,height:1})}},C5=(e,t={})=>{let{width:n=24,height:o=24,bounds:i=16,radius:r=3}=t,s=sn(e)?ci(e[0],e[1]):e,l=!!s;s=l?s:1;let a,c,u,f;u=s>1?i:s*i,f=u/s,a=Math.round((n-u)*.5),c=Math.round((o-f)*.5);let h=l?"currentColor":"none",m=l?"none":"currentColor",b=n/16,p=[n/12,n/6].join(" ");return`<rect fill="${h}" stroke="${m}" stroke-width="${b}" stroke-dasharray="${p}" x="${a}" y="${c}" width="${u}" height="${f}" rx="${r}"/>`};function T5(e){let t,n;return t=new sl({props:{class:"PinturaPresetListFilter",layout:"row",options:e[9],selectedIndex:e[7],onchange:e[10]}}),{c(){Pe(t.$$.fragment)},m(o,i){ke(t,o,i),n=!0},p(o,i){let r={};i&512&&(r.options=o[9]),i&128&&(r.selectedIndex=o[7]),t.$set(r)},i(o){n||(I(t.$$.fragment,o),n=!0)},o(o){F(t.$$.fragment,o),n=!1},d(o){Ce(t,o)}}}function R5(e){let t,n;return t=new Uo({props:{icon:e[0],label:e[1],labelClass:e[2],hideLabel:e[3],options:e[8],selectedIndex:e[4],onchange:e[5],optionMapper:e[6],$$slots:{controls:[T5]},$$scope:{ctx:e}}}),{c(){Pe(t.$$.fragment)},m(o,i){ke(t,o,i),n=!0},p(o,[i]){let r={};i&1&&(r.icon=o[0]),i&2&&(r.label=o[1]),i&4&&(r.labelClass=o[2]),i&8&&(r.hideLabel=o[3]),i&256&&(r.options=o[8]),i&16&&(r.selectedIndex=o[4]),i&32&&(r.onchange=o[5]),i&64&&(r.optionMapper=o[6]),i&262784&&(r.$$scope={dirty:i,ctx:o}),t.$set(r)},i(o){n||(I(t.$$.fragment,o),n=!0)},o(o){F(t.$$.fragment,o),n=!1},d(o){Ce(t,o)}}}var zm='fill="none" stroke="currentColor"';function P5(e,t,n){let o,i,r,{icon:s}=t,{label:l}=t,{labelClass:a}=t,{hideLabel:c}=t,{options:u}=t,{selectedIndex:f}=t,{onchange:h}=t,{optionMapper:m}=t,{filter:b="landscape"}=t,{onfilterchange:p=ct}=t,y=(k,T,P,D,x)=>`
    <rect ${zm} x="${k}" y="${T}" width="${P}" height="${D}" rx="${x}"/>`,w=(k,T)=>`<path ${zm} d="M${k} ${T} l2 2 l3 -4"/>`,C=(k,T)=>(k||[]).map(P=>Ht(P[0])?(P[1]=P[1].map(T),P):T(P)),M=k=>T=>{let[P,D,x={}]=T;return ut(P)&&(x.hidden=k==="landscape"?P<1:P>1),[P,D,x]},R=k=>{n(11,b=k.value),p(k.value)};return e.$$set=k=>{"icon"in k&&n(0,s=k.icon),"label"in k&&n(1,l=k.label),"labelClass"in k&&n(2,a=k.labelClass),"hideLabel"in k&&n(3,c=k.hideLabel),"options"in k&&n(12,u=k.options),"selectedIndex"in k&&n(4,f=k.selectedIndex),"onchange"in k&&n(5,h=k.onchange),"optionMapper"in k&&n(6,m=k.optionMapper),"filter"in k&&n(11,b=k.filter),"onfilterchange"in k&&n(13,p=k.onfilterchange)},e.$$.update=()=>{e.$$.dirty&6144&&n(8,o=C(u,M(b))),e.$$.dirty&2048&&n(7,i=b==="landscape"?0:1),e.$$.dirty&128&&n(9,r=[["landscape","Landscape",{hideLabel:!0,icon:y(2,6,19,12,2)+(i===0?w(9,12):"")}],["portrait","Portrait",{hideLabel:!0,icon:y(5,3,13,18,2)+(i===1?w(9,12):"")}]])},[s,l,a,c,f,h,m,i,o,r,R,b,u,p]}var Wm=class extends bt{constructor(t){super();pt(this,t,P5,R5,gt,{icon:0,label:1,labelClass:2,hideLabel:3,options:12,selectedIndex:4,onchange:5,optionMapper:6,filter:11,onfilterchange:13})}};function M5(e){let t,n;return t=new Fa({props:{items:e[8]}}),{c(){Pe(t.$$.fragment)},m(o,i){ke(t,o,i),n=!0},p(o,i){let r={};i[0]&256&&(r.items=o[8]),t.$set(r)},i(o){n||(I(t.$$.fragment,o),n=!0)},o(o){F(t.$$.fragment,o),n=!1},d(o){Ce(t,o)}}}function I5(e){let t,n,o;return n=new Pm({props:{$$slots:{default:[M5]},$$scope:{ctx:e}}}),{c(){t=$("div"),Pe(n.$$.fragment),S(t,"slot","header")},m(i,r){U(i,t,r),ke(n,t,null),o=!0},p(i,r){let s={};r[0]&256|r[6]&65536&&(s.$$scope={dirty:r,ctx:i}),n.$set(s)},i(i){o||(I(n.$$.fragment,i),o=!0)},o(i){F(n.$$.fragment,i),o=!1},d(i){i&&H(t),Ce(n)}}}function Vm(e){let t,n;return t=new es({props:{onclick:e[83],label:e[3].cropLabelButtonRecenter,icon:e[3].cropIconButtonRecenter,class:"PinturaButtonCenter",disabled:!e[10],hideLabel:!0,style:`opacity: ${e[27]}; transform: translate3d(${e[28].x}px, ${e[28].y}px, 0)`}}),{c(){Pe(t.$$.fragment)},m(o,i){ke(t,o,i),n=!0},p(o,i){let r={};i[0]&8&&(r.label=o[3].cropLabelButtonRecenter),i[0]&8&&(r.icon=o[3].cropIconButtonRecenter),i[0]&1024&&(r.disabled=!o[10]),i[0]&402653184&&(r.style=`opacity: ${o[27]}; transform: translate3d(${o[28].x}px, ${o[28].y}px, 0)`),t.$set(r)},i(o){n||(I(t.$$.fragment,o),n=!0)},o(o){F(t.$$.fragment,o),n=!1},d(o){Ce(t,o)}}}function Hm(e){let t,n;return t=new Am({props:{rect:e[11],visible:e[9],style:e[1]}}),t.$on("resizestart",e[63]),t.$on("resizemove",e[64]),t.$on("resizeend",e[65]),{c(){Pe(t.$$.fragment)},m(o,i){ke(t,o,i),n=!0},p(o,i){let r={};i[0]&2048&&(r.rect=o[11]),i[0]&512&&(r.visible=o[9]),i[0]&2&&(r.style=o[1]),t.$set(r)},i(o){n||(I(t.$$.fragment,o),n=!0)},o(o){F(t.$$.fragment,o),n=!1},d(o){Ce(t,o)}}}function Nm(e){let t,n;return t=new Dm({props:{width:Math.round(e[6].width),height:Math.round(e[6].height)}}),{c(){Pe(t.$$.fragment)},m(o,i){ke(t,o,i),n=!0},p(o,i){let r={};i[0]&64&&(r.width=Math.round(o[6].width)),i[0]&64&&(r.height=Math.round(o[6].height)),t.$set(r)},i(o){n||(I(t.$$.fragment,o),n=!0)},o(o){F(t.$$.fragment,o),n=!1},d(o){Ce(t,o)}}}function A5(e){let t,n,o,i,r,s,l,a,c=e[17]&&e[18]&&Vm(e),u=e[17]&&Hm(e),f=e[16]&&Nm(e);return{c(){t=$("div"),n=$("div"),c&&c.c(),o=xe(),u&&u.c(),r=xe(),f&&f.c(),S(n,"class","PinturaStage"),S(t,"slot","main")},m(h,m){U(h,t,m),ie(t,n),c&&c.m(n,null),ie(n,o),u&&u.m(n,null),e[155](n),ie(t,r),f&&f.m(t,null),s=!0,l||(a=[le(n,"measure",e[153]),vt(Ln.call(null,n)),le(n,"wheel",function(){jt(e[2]&&e[82])&&(e[2]&&e[82]).apply(this,arguments)},{passive:!1}),le(n,"interactionstart",e[69]),le(n,"interactionupdate",e[70]),le(n,"interactionrelease",e[72]),le(n,"interactionend",e[71]),vt(i=Aa.call(null,n,{drag:!0,pinch:e[2],inertia:!0,shouldStartInteraction:Zm,getEventPosition:e[156]})),le(n,"gesturedown",e[79]),le(n,"gestureupdate",e[80]),le(n,"gestureup",e[81]),vt(g5.call(null,n))],l=!0)},p(h,m){e=h,e[17]&&e[18]?c?(c.p(e,m),m[0]&393216&&I(c,1)):(c=Vm(e),c.c(),I(c,1),c.m(n,o)):c&&(Ze(),F(c,1,1,()=>{c=null}),je()),e[17]?u?(u.p(e,m),m[0]&131072&&I(u,1)):(u=Hm(e),u.c(),I(u,1),u.m(n,null)):u&&(Ze(),F(u,1,1,()=>{u=null}),je()),i&&jt(i.update)&&m[0]&32772&&i.update.call(null,{drag:!0,pinch:e[2],inertia:!0,shouldStartInteraction:Zm,getEventPosition:e[156]}),e[16]?f?(f.p(e,m),m[0]&65536&&I(f,1)):(f=Nm(e),f.c(),I(f,1),f.m(t,null)):f&&(Ze(),F(f,1,1,()=>{f=null}),je())},i(h){s||(I(c),I(u),I(f),s=!0)},o(h){F(c),F(u),F(f),s=!1},d(h){h&&H(t),c&&c.d(),u&&u.d(),e[155](null),f&&f.d(),l=!1,Et(a)}}}function Um(e){let t,n,o,i,r=[{class:"PinturaControlList"},{tabs:e[12]},e[21]],s={$$slots:{default:[E5,({tab:c})=>({201:c}),({tab:c})=>[0,0,0,0,0,0,c?32768:0]]},$$scope:{ctx:e}};for(let c=0;c<r.length;c+=1)s=Jt(s,r[c]);t=new Su({props:s}),t.$on("select",e[154]);let l=[{class:"PinturaControlPanels"},{panelClass:"PinturaControlPanel"},{panels:e[22]},e[21]],a={$$slots:{default:[F5,({panel:c})=>({200:c}),({panel:c})=>[0,0,0,0,0,0,c?16384:0]]},$$scope:{ctx:e}};for(let c=0;c<l.length;c+=1)a=Jt(a,l[c]);return o=new _u({props:a}),{c(){Pe(t.$$.fragment),n=xe(),Pe(o.$$.fragment)},m(c,u){ke(t,c,u),U(c,n,u),ke(o,c,u),i=!0},p(c,u){let f=u[0]&2101248?Hn(r,[r[0],u[0]&4096&&{tabs:c[12]},u[0]&2097152&&Io(c[21])]):{};u[6]&98304&&(f.$$scope={dirty:u,ctx:c}),t.$set(f);let h=u[0]&6291456?Hn(l,[l[0],l[1],u[0]&4194304&&{panels:c[22]},u[0]&2097152&&Io(c[21])]):{};u[0]&117457032|u[6]&81920&&(h.$$scope={dirty:u,ctx:c}),o.$set(h)},i(c){i||(I(t.$$.fragment,c),I(o.$$.fragment,c),i=!0)},o(c){F(t.$$.fragment,c),F(o.$$.fragment,c),i=!1},d(c){Ce(t,c),c&&H(n),Ce(o,c)}}}function E5(e){let t,n=e[201].label+"",o;return{c(){t=$("span"),o=Ot(n)},m(i,r){U(i,t,r),ie(t,o)},p(i,r){r[6]&32768&&n!==(n=i[201].label+"")&&Zt(o,n)},d(i){i&&H(t)}}}function v5(e){let t,n;return t=new Gu({props:{elasticity:e[36]*e[37],base:D5,min:e[14],max:B5,valueMin:e[25][0],valueMax:e[25][1],value:e[26],labelReset:e[3].labelReset,valueLabel:`${Math.round(e[26]*100)}%`,oninputstart:e[76],oninputmove:e[77],oninputend:e[78]}}),{c(){Pe(t.$$.fragment)},m(o,i){ke(t,o,i),n=!0},p(o,i){let r={};i[0]&16384&&(r.min=o[14]),i[0]&33554432&&(r.valueMin=o[25][0]),i[0]&33554432&&(r.valueMax=o[25][1]),i[0]&67108864&&(r.value=o[26]),i[0]&8&&(r.labelReset=o[3].labelReset),i[0]&67108864&&(r.valueLabel=`${Math.round(o[26]*100)}%`),t.$set(r)},i(o){n||(I(t.$$.fragment,o),n=!0)},o(o){F(t.$$.fragment,o),n=!1},d(o){Ce(t,o)}}}function L5(e){let t,n;return t=new Bm({props:{elasticity:e[36]*e[37],rotation:e[7],labelReset:e[3].labelReset,valueMin:e[24][0],valueMax:e[24][1],oninputstart:e[66],oninputmove:e[67],oninputend:e[68]}}),{c(){Pe(t.$$.fragment)},m(o,i){ke(t,o,i),n=!0},p(o,i){let r={};i[0]&128&&(r.rotation=o[7]),i[0]&8&&(r.labelReset=o[3].labelReset),i[0]&16777216&&(r.valueMin=o[24][0]),i[0]&16777216&&(r.valueMax=o[24][1]),t.$set(r)},i(o){n||(I(t.$$.fragment,o),n=!0)},o(o){F(t.$$.fragment,o),n=!1},d(o){Ce(t,o)}}}function F5(e){let t,n,o,i,r=[L5,v5],s=[];function l(a,c){return a[200]===a[88]+"-rotation"?0:a[200]===a[88]+"-zoom"?1:-1}return~(t=l(e))&&(n=s[t]=r[t](e)),{c(){n&&n.c(),o=en()},m(a,c){~t&&s[t].m(a,c),U(a,o,c),i=!0},p(a,c){let u=t;t=l(a),t===u?~t&&s[t].p(a,c):(n&&(Ze(),F(s[u],1,1,()=>{s[u]=null}),je()),~t?(n=s[t],n?n.p(a,c):(n=s[t]=r[t](a),n.c()),I(n,1),n.m(o.parentNode,o)):n=null)},i(a){i||(I(n),i=!0)},o(a){F(n),i=!1},d(a){~t&&s[t].d(a),a&&H(o)}}}function x5(e){let t,n,o=e[20]&&Um(e);return{c(){t=$("div"),o&&o.c(),S(t,"slot","footer"),S(t,"style",e[23])},m(i,r){U(i,t,r),o&&o.m(t,null),n=!0},p(i,r){i[20]?o?(o.p(i,r),r[0]&1048576&&I(o,1)):(o=Um(i),o.c(),I(o,1),o.m(t,null)):o&&(Ze(),F(o,1,1,()=>{o=null}),je()),(!n||r[0]&8388608)&&S(t,"style",i[23])},i(i){n||(I(o),n=!0)},o(i){F(o),n=!1},d(i){i&&H(t),o&&o.d()}}}function O5(e){let t,n,o;function i(s){e[157](s)}let r={hasHeader:e[19],$$slots:{footer:[x5],main:[A5],header:[I5]},$$scope:{ctx:e}};return e[13]!==void 0&&(r.root=e[13]),t=new Tm({props:r}),Bt.push(()=>Hi(t,"root",i)),t.$on("measure",e[158]),{c(){Pe(t.$$.fragment)},m(s,l){ke(t,s,l),o=!0},p(s,l){let a={};l[0]&524288&&(a.hasHeader=s[19]),l[0]&536338430|l[6]&65536&&(a.$$scope={dirty:l,ctx:s}),!n&&l[0]&8192&&(n=!0,a.root=s[13],Kr(()=>n=!1)),t.$set(a)},i(s){o||(I(t.$$.fragment,s),o=!0)},o(s){F(t.$$.fragment,s),o=!1},d(s){Ce(t,s)}}}var B5=1,D5=0,Zm=(e,t)=>e.target===t;function z5(e,t,n){let o,i,r,s,l,a,c,u,f,h,m,b,p,y,w,C,M,R,k,T,P,D,x,A,g,O,j,v,G,z,B,ee,ge,ve,Oe,Ve,J,Y,ue,be,He,ft,ae=tt,rt=()=>(ae(),ae=jr(me,_=>n(9,ft=_)),me),V,ye,L,q,Me,Be,Se,Ge,st,Q,Ke,Je,Lt,St,N,De,X,K,re,te,pe,Le,ne,Ee,de,ot;e.$$.on_destroy.push(()=>ae());let Te="crop",{isActive:me}=t;rt();let{stores:Ne}=t,{cropImageSelectionCornerStyle:_e="circle"}=t,{cropWillRenderImageSelectionGuides:Qe=(_,se)=>{let Re=_=="rotate";return{rows:Re?5:3,cols:Re?5:3,opacity:se*.25}}}=t,{cropAutoCenterImageSelectionTimeout:_t=void 0}=t,{cropEnableZoomMatchImageAspectRatio:Fe=!0}=t,{cropEnableRotateMatchImageAspectRatio:we="never"}=t,{cropEnableRotationInput:yt=!0}=t,{cropEnableZoom:wt=!0}=t,{cropEnableZoomInput:Ye=!0}=t,{cropEnableZoomAutoHide:tn=!0}=t,{cropEnableImageSelection:Wt=!0}=t,{cropEnableInfoIndicator:dn=!1}=t,{cropEnableZoomTowardsWheelPosition:Un=!0}=t,{cropEnableLimitWheelInputToCropSelection:Gt=!0}=t,{cropEnableCenterImageSelection:hn=!0}=t,{cropEnableButtonRotateLeft:Fn=!0}=t,{cropEnableButtonRotateRight:$e=!1}=t,{cropEnableButtonFlipHorizontal:bo=!0}=t,{cropEnableButtonFlipVertical:cn=!1}=t,{cropSelectPresetOptions:dt=void 0}=t,{cropEnableSelectPreset:nn=!0}=t,{cropEnableFilterMatchAspectRatio:ln=!0}=t,{cropSelectPresetFilter:xn=!1}=t,{cropEnableButtonToggleCropLimit:Pn=!1}=t,{cropWillRenderTools:Zn=Ft}=t,{cropActiveTransformTool:mn="rotation"}=t,{cropMinimizeToolbar:un="auto"}=t,{locale:ht={}}=t,On="idle",Zo=We();W(e,Zo,_=>n(118,G=_));let gn=()=>v===void 0,Ki=_=>1/_,Ha=_=>{!ln||xn===_||(n(90,xn=_),!(!v||v===1)&&(!pi()||fe(So,v=Ki(v),v)))},pi=()=>{if(v===1||!o)return!1;let _=Ki(v);return!!Ea(G).find(([se])=>se===_)},Ji=(_,se,Re)=>To(Re)?se.width===Math.round(_.height)||se.height===Math.round(_.width):se.width===Math.round(_.width)||se.height===Math.round(_.height),yi=(_,se,Re)=>{let at=Wr(Zf(eo(se),Re),kt=>Math.abs(Math.round(kt))),it=Xl(at),Ie=xt(_);return Nf(it,Ie)},so=()=>(gn()||we==="always"&&pi())&&yi(z,B,ee)&&Ji(z,B,ee),jo=_=>{if(we!=="never"&&so()){fe(jn,ee+=_,ee);let se=To(ee),Re=se?B.height:B.width,at=se?B.width:B.height;fe(Bn,z=Tn(0,0,Re,at),z),gn()||fe(So,v=ci(Re,at),v)}else fe(jn,ee+=_,ee)},{history:Xt,env:Qi,isInteracting:Qt,isInteractingFraction:bn,rootRect:Go,stageRect:Xo,utilRect:$i,rootLineColor:ss,animation:er,elasticityMultiplier:ls,rangeInputElasticity:Yo,presentationScalar:Si,utilTools:lo,imagePreviewModifiers:Yt,imageOutlineOpacity:as,imageFlipX:po,imageFlipY:qo,imageRotation:jn,imageRotationRange:tr,imageOutputSize:Ko,imageSelectionRect:Jo,imageSelectionRectSnapshot:Gn,imageSelectionRectIntent:Qo,imageSelectionRectPresentation:_i,imageCropRectIntent:Ao,imageCropRectOrigin:wi,imageCropRect:Bn,imageCropMinSize:$o,imageCropMaxSize:ei,imageCropRange:yo,imageCropAspectRatio:So,imageCropLimitToImage:ki,imageSize:Eo,imageScalar:vo,imageOverlayMarkup:Ci,framePadded:cs}=Ne;W(e,Qi,_=>n(128,be=_)),W(e,Qt,_=>n(130,V=_)),W(e,Go,_=>n(15,Ke=_)),W(e,Xo,_=>n(135,Je=_)),W(e,$i,_=>n(134,Se=_)),W(e,er,_=>n(151,te=_)),W(e,Si,_=>n(133,q=_)),W(e,lo,_=>n(169,He=_)),W(e,Yt,_=>n(146,X=_)),W(e,po,_=>n(122,Oe=_)),W(e,qo,_=>n(121,ve=_)),W(e,jn,_=>n(7,ee=_)),W(e,tr,_=>n(24,Le=_)),W(e,Ko,_=>n(168,J=_)),W(e,Jo,_=>n(132,L=_)),W(e,Gn,_=>n(131,ye=_)),W(e,Qo,_=>n(171,Be=_)),W(e,_i,_=>n(138,St=_)),W(e,Ao,_=>n(173,st=_)),W(e,wi,_=>n(172,Ge=_)),W(e,Bn,_=>n(6,z=_)),W(e,$o,_=>n(126,Y=_)),W(e,ei,_=>n(170,Me=_)),W(e,yo,_=>n(174,Q=_)),W(e,So,_=>n(167,v=_)),W(e,ki,_=>n(127,ue=_)),W(e,Eo,_=>n(119,B=_)),W(e,vo,_=>n(144,N=_)),W(e,Ci,_=>n(176,K=_)),W(e,cs,_=>n(145,De=_));let nr=Ys("redrawTrigger");W(e,nr,_=>n(120,ge=_));let Ti,us,or,Ri=()=>{On="select",fe(Qt,V=!0,V),fe(Gn,ye=et(L),ye),Ti=q,us=Uf(eo(Y),Ti),or=Uf(eo(Me),Ti)},fs=({detail:_})=>{let{boundsLimited:se,boundsIntent:Re}=Pi(_.direction,_.translation);fe(Qo,Be=Re,Be),fe(Jo,L=se,L)},ir=({detail:_})=>{let{boundsLimited:se}=Pi(_.direction,_.translation);fe(Qt,V=!1,V),fe(Qo,Be=void 0,Be),Or(_.translation)&&(fe(Jo,L=se,L),Xt.write()),fe(Gn,ye=void 0,ye),On=void 0},Pi=(_,se)=>{let Re={target:_,translate:se},at=Fm(ye,Re,{aspectRatio:v}),it,Ie=fi(Kf(et(at),q));if(Kc(B,ee),Ie.width<Y.width||Ie.height<Y.height){let Xe=se.y<0,Rt=se.x>0,Ct=se.x<0,Dt=se.y>0,Yn=_==="t"&&Xe||_==="r"&&Rt||_==="b"&&Dt||_==="l"&&Ct||_==="tr"&&(Rt||Xe)||_==="tl"&&(Ct||Xe)||_==="br"&&(Rt||Dt)||_==="bl"&&(Ct||Dt),an=zt(Ie),Mn=Ui(B,ee,an);if(Yn&&(Mn.width<Y.width||Mn.height<Y.height)){if(ee!==0){let $t=Math.sign(ee),In=Math.round(Math.abs(ee)/$n)*$n,dl=ee-$t*In,Cs=In/$n%2==1,oi=Cs?B.height:B.width,ii=Cs?B.width:B.height,_r=Math.abs(dl),Sn=Math.sin(_r),zn=Math.cos(_r);if(Ie.width<Y.width){Ie.width=Y.width;let wr=zn*Ie.width+Sn*Ie.height,kr=Sn*Ie.width+zn*Ie.height,ri=oi-wr,si=ii-kr;ri<si?Ie.height=(oi-zn*Ie.width)/Sn:si<ri&&(Ie.height=(ii-Sn*Ie.width)/zn)}if(Ie.height<Y.height){Ie.height=Y.height;let wr=zn*Ie.width+Sn*Ie.height,kr=Sn*Ie.width+zn*Ie.height,ri=oi-wr,si=ii-kr;ri<si?Ie.width=(oi-Sn*Ie.height)/zn:si<ri&&(Ie.width=(ii-zn*Ie.height)/Sn)}}else Ie.width<Y.width&&(Ie.width=Y.width,Ie.height=B.height),Ie.height<Y.height&&(Ie.height=Y.height,Ie.width=B.width);it=zt(Ie)}}return it&&(at=Fm(ye,Re,{aspectRatio:it||v})),{boundsLimited:p5(ye,Re,Se,{aspectRatio:v||it,minSize:us,maxSize:or}),boundsIntent:at}},lt=()=>{On="rotate",fe(Qt,V=!0,V),fe(wi,Ge=et(z),Ge)},fl=_=>{fe(jn,ee=_,ee)},ti=_=>{fe(Qt,V=!1,V),fe(jn,ee=_,ee),Xt.write(),fe(wi,Ge=void 0,Ge)},pn,Xn,Mi=()=>{On="pan",Xn=void 0,fe(Qt,V=!0,V),pn=et(z)},Dn=({detail:_})=>sr(_),rr=({detail:_})=>{fe(Qt,V=!1,V),(Or(_.translation)>0||_.scalar!==0)&&(sr(_),Xt.write()),fe(Ao,st=void 0,st),pn=void 0},Ii=({detail:_})=>{Xn=_.translation,fe(Qt,V=!1,V)},sr=({translation:_,scalar:se})=>{let Re=Math.min(L.width/z.width,L.height/z.height),at=Dr(At(_),1/Re),it;if(!Xn)it=Vr(et(pn),Hf(At(at))),se!==void 0&&di(it,1/se);else{let Ie=kn(At(Xn),_);Xn=_,it=Vr(et(z),Ie)}fe(Ao,st=it,st),fe(Bn,z=it,z)},ds=(_,se,Re)=>To(Re)?1-1/Math.min(_.height/se.width,_.width/se.height):1-1/Math.min(_.width/se.width,_.height/se.height),lr=Pt([yo,Bn],([_,se],Re)=>{if(!se)return;let[at,it]=_,Ie=zt(se);Re([fi(ho(Kl(at,Ie),nt)),fi(ho(En(it,Ie),nt))])});W(e,lr,_=>n(175,Lt=_));let ar=Pt([Eo,ki,$o,ei,yo,jn],([_,se,Re,at,it,Ie],kt)=>{if(!_)return;let Xe=it[0],Rt=it[1],Ct,Dt;se?(Ct=ds(_,Rt,Ie),Dt=Math.min(Xe.width/Re.width,Xe.height/Re.height)):(Dt=1,Ct=-1);let Yn=[nt(Ct),nt(Dt)];kt(Yn)});W(e,ar,_=>n(25,ne=_));let cr=Pt([Eo,Bn,yo,jn],([_,se,Re,at],it)=>{if(!_||!se)return it(0);let Ie,kt=Re[0],Xe=Re[1],Rt=se.width,Ct=se.height,Dt=zt(se),Yn=To(at)?Cn(_.height,_.width):_,an=En(Yn,Dt);if(Rt<=an.width||Ct<=an.height){let Mn=an.width-kt.width,$t=an.height-kt.height;Mn===0||$t===0?Ie=1:Ie=1-Math.min((Rt-kt.width)/Mn,(Ct-kt.height)/$t)}else{let Mn=Xe.width-an.width,$t=Xe.height-an.height,In=En({width:Mn,height:$t},Dt);Ie=-Math.min((Rt-an.width)/In.width,(Ct-an.height)/In.height)}it(Ie)});W(e,cr,_=>n(26,Ee=_));let hs=()=>{pn=et(z)},ur=_=>{let se=zt(pn),Re,at,it,Ie=To(ee)?Cn(B.height,B.width):B,kt=En(Ie,se);if(_>=0){let Ct=kt.width-Q[0].width,Dt=kt.height-Q[0].height;Re=kt.width-Ct*_,at=kt.height-Dt*_,it=Kl({width:Re,height:at},se)}else{let Ct=Q[1].width-kt.width,Dt=Q[1].height-kt.height;Re=kt.width+Ct*-_,at=kt.height+Dt*-_,it=En({width:Re,height:at},se)}Re=it.width,at=it.height;let Xe=pn.x+pn.width*.5-Re*.5,Rt=pn.y+pn.height*.5-at*.5;fe(Bn,z={x:Xe,y:Rt,width:Re,height:at},z)},ms=()=>{On="zoom",fe(Qt,V=!0,V),hs()},fr=_=>{ur(_)},gs=_=>{ur(_),Xt.write(),fe(Qt,V=!1,V),pn=void 0},Lo,bs=()=>{On="zoom",!pn&&(Lo=et(z),fe(Qt,V=!0,V))},ps=({detail:_})=>{!Lo||dr(_)},dr=_=>{let se=di(et(Lo),1/_);fe(Ao,st=se,st),fe(Bn,z=se,z)},hr=({detail:_})=>{!Lo||(fe(Qt,V=!1,V),dr(_),fe(Ao,st=void 0,st),Lo=void 0,Xt.write())},mr,ys=_=>{let se=b5(_,Ke,Je);if(Gt&&!$f(L,se))return;On="zoom",fe(Qt,V=!0,V),_.preventDefault(),_.stopPropagation();let Re=Cu(_),at=1+Re/100,it=et(z),Ie=Math.min(z.width/Y.width,z.height/Y.height)===1;if(Fe&&ue){let Rt=Ji(z,B,ee);if(gn()&&Rt&&Re>0&&u){fe(Qt,V=!1,V);let Ct=To(ee)?An({height:B.width,width:B.height}):An(B);if(zo(it,Ct)||(clearTimeout(mr),zo(Xt.state.crop,Ct)))return;fe(Bn,z=Ct,z),Xt.write();return}}let kt=xt(z);if(Un&&Re<0&&!Ie){let Rt=kn(At(se),L),Ct=Math.min(L.width/z.width,L.height/z.height),Dt=di(et(L),1.1);kt=$f(Dt,se)?Vn(et(z),Dr(Rt,1/Ct)):kt}let Xe=di(et(z),at,kt);if(jf(Lt[1],Xe)||(Xe=qf(xt(Xe),Lt[1])),jf(Xe,Lt[0])||(Xe=qf(xt(Xe),Lt[0])),zo(it,Xe,nt)){fe(Qt,V=!1,V);return}fe(Bn,z=ho(Xe,Rt=>nt(Rt,5)),z),fe(Qt,V=!1,V),clearTimeout(mr),mr=setTimeout(()=>{Xt.write()},500)},Ss=mo(),Ai=()=>{Ss("measure",et(Se))},Fo,ni=qe(0,{precision:1e-4});W(e,ni,_=>n(27,de=_));let _o=qe();W(e,_o,_=>n(28,ot=_));let xo=Pt([So,Ko,Zo],([_,se,Re],at)=>{if(!o)return;let it=Ea(Re),Ie=[...it].map(Xe=>Xe[0]).sort((Xe,Rt)=>sn(Xe[0])&&!sn(Rt[0])?1:-1).find(Xe=>{if(sn(Xe)&&se){let[Rt,Ct]=Xe,Dt=se.width===Rt&&se.height===Ct,Yn=_===ci(Rt,Ct);return Dt&&Yn}return Xe===_}),kt=it.map(Xe=>Xe[0]).findIndex(Xe=>sn(Xe)?$s(Xe,Ie):Xe===Ie);at(kt)});W(e,xo,_=>n(124,Ve=_));let Na=(_,se)=>{if(!o||_===-1||_===void 0)return;let Re=Ea(se)[_][0];return Re?sn(Re)?ci(Re[0],Re[1]):Re:void 0},fn=Pt([ss,_i,bn],([_,se,Re],at)=>{let{rows:it,cols:Ie,opacity:kt}=Qe(On,Re);if(!se||kt<=0)return at([]);let{x:Xe,y:Rt,width:Ct,height:Dt}=se,Yn=Ct/Ie,an=Dt/it,Mn=[];for(let $t=1;$t<=it-1;$t++){let In=Rt+an*$t;Mn.push({id:`image-selection-guide-row-${$t}`,points:[oe(Xe,In),oe(Xe+Ct,In)],opacity:kt,strokeWidth:1,strokeColor:_})}for(let $t=1;$t<=Ie-1;$t++){let In=Xe+Yn*$t;Mn.push({id:`image-selection-guide-col-${$t}`,points:[oe(In,Rt),oe(In,Rt+Dt)],opacity:kt,strokeWidth:1,strokeColor:_})}at(Mn)});W(e,fn,_=>n(147,re=_));let yn=()=>{let _=K.filter(se=>!/^image\-selection\-guide/.test(se.id));ft?fe(Ci,K=[..._,...re],K):fe(Ci,K=_,K)},wo=`crop-${Fr()}`,Ei=yt?mn:"zoom",gr=wo+"-"+Ei,vi=gr,br,ko,Li=qe(te?20:0);W(e,Li,_=>n(152,pe=_));function _s(_){qr(e,_)}let ws=({detail:_})=>n(4,vi=_);function pr(_){Bt[_?"unshift":"push"](()=>{ko=_,n(5,ko)})}let yr=_=>Em(_);function ks(_){br=_,n(13,br)}function Sr(_){qr(e,_)}return e.$$set=_=>{"isActive"in _&&rt(n(0,me=_.isActive)),"stores"in _&&n(92,Ne=_.stores),"cropImageSelectionCornerStyle"in _&&n(1,_e=_.cropImageSelectionCornerStyle),"cropWillRenderImageSelectionGuides"in _&&n(93,Qe=_.cropWillRenderImageSelectionGuides),"cropAutoCenterImageSelectionTimeout"in _&&n(94,_t=_.cropAutoCenterImageSelectionTimeout),"cropEnableZoomMatchImageAspectRatio"in _&&n(95,Fe=_.cropEnableZoomMatchImageAspectRatio),"cropEnableRotateMatchImageAspectRatio"in _&&n(96,we=_.cropEnableRotateMatchImageAspectRatio),"cropEnableRotationInput"in _&&n(97,yt=_.cropEnableRotationInput),"cropEnableZoom"in _&&n(2,wt=_.cropEnableZoom),"cropEnableZoomInput"in _&&n(98,Ye=_.cropEnableZoomInput),"cropEnableZoomAutoHide"in _&&n(99,tn=_.cropEnableZoomAutoHide),"cropEnableImageSelection"in _&&n(100,Wt=_.cropEnableImageSelection),"cropEnableInfoIndicator"in _&&n(101,dn=_.cropEnableInfoIndicator),"cropEnableZoomTowardsWheelPosition"in _&&n(102,Un=_.cropEnableZoomTowardsWheelPosition),"cropEnableLimitWheelInputToCropSelection"in _&&n(103,Gt=_.cropEnableLimitWheelInputToCropSelection),"cropEnableCenterImageSelection"in _&&n(104,hn=_.cropEnableCenterImageSelection),"cropEnableButtonRotateLeft"in _&&n(105,Fn=_.cropEnableButtonRotateLeft),"cropEnableButtonRotateRight"in _&&n(106,$e=_.cropEnableButtonRotateRight),"cropEnableButtonFlipHorizontal"in _&&n(107,bo=_.cropEnableButtonFlipHorizontal),"cropEnableButtonFlipVertical"in _&&n(108,cn=_.cropEnableButtonFlipVertical),"cropSelectPresetOptions"in _&&n(109,dt=_.cropSelectPresetOptions),"cropEnableSelectPreset"in _&&n(110,nn=_.cropEnableSelectPreset),"cropEnableFilterMatchAspectRatio"in _&&n(111,ln=_.cropEnableFilterMatchAspectRatio),"cropSelectPresetFilter"in _&&n(90,xn=_.cropSelectPresetFilter),"cropEnableButtonToggleCropLimit"in _&&n(112,Pn=_.cropEnableButtonToggleCropLimit),"cropWillRenderTools"in _&&n(113,Zn=_.cropWillRenderTools),"cropActiveTransformTool"in _&&n(114,mn=_.cropActiveTransformTool),"cropMinimizeToolbar"in _&&n(115,un=_.cropMinimizeToolbar),"locale"in _&&n(3,ht=_.locale)},e.$$.update=()=>{e.$$.dirty[3]&65536&&n(117,o=dt&&Array.isArray(dt)&&dt.length),e.$$.dirty[3]&16842752&&Zo.set(o?dt:[]),e.$$.dirty[4]&16&&n(129,m=be.layoutMode==="overlay"),e.$$.dirty[3]&131072|e.$$.dirty[4]&32&&n(123,k=nn&&!m),e.$$.dirty[4]&1280&&n(139,a=Se&&L&&Qf(Se,L)),e.$$.dirty[4]&33024&&n(140,c=!!(L&&a)),e.$$.dirty[4]&98560&&n(125,u=c&&zo(L,a,_=>nt(_,5))),e.$$.dirty[0]&136|e.$$.dirty[2]&268435456|e.$$.dirty[3]&2132340736|e.$$.dirty[4]&31&&n(8,i=ge&&Zn([Fn&&["Button","rotate-left",{label:ht.cropLabelButtonRotateLeft,labelClass:"PinturaToolbarContentWide",icon:ht.cropIconButtonRotateLeft,onclick:()=>{jo(-Math.PI/2),Xt.write()}}],$e&&["Button","rotate-right",{label:ht.cropLabelButtonRotateRight,labelClass:"PinturaToolbarContentWide",icon:ht.cropIconButtonRotateRight,onclick:()=>{jo(Math.PI/2),Xt.write()}}],bo&&["Button","flip-horizontal",{label:ht.cropLabelButtonFlipHorizontal,labelClass:"PinturaToolbarContentWide",icon:ht.cropIconButtonFlipHorizontal,onclick:()=>{To(ee)?fe(qo,ve=!ve,ve):fe(po,Oe=!Oe,Oe),Xt.write()}}],cn&&["Button","flip-vertical",{label:ht.cropLabelButtonFlipVertical,labelClass:"PinturaToolbarContentWide",icon:ht.cropIconButtonFlipVertical,onclick:()=>{To(ee)?fe(po,Oe=!Oe,Oe):fe(qo,ve=!ve,ve),Xt.write()}}],k&&o&&[xn===!1?"Dropdown":Wm,"select-preset",{icon:Nn(ht.cropIconSelectPreset,ht,Na(Ve,G)),label:ht.cropLabelSelectPreset,labelClass:"PinturaToolbarContentWide",options:G,filter:xn,onfilterchange:Ha,selectedIndex:Ve,onchange:({value:_})=>{sn(_)?(fe(So,v=ci(_[0],_[1]),v),fe(Ko,J=jg(_),J)):fe(So,v=_,v),u&&Ai(),Xt.write()},optionMapper:_=>{let se=!1,Re=sn(_.value)?_.value[0]/_.value[1]:_.value;if(Re){let at=Ui(B,ee,Re);se=at.width<Y.width||at.height<Y.height}return _.icon=C5(_.value,{bounds:14}),{..._,disabled:se}}}],Pn&&["Dropdown","select-crop-limit",{icon:Nn(ht.cropIconCropBoundary,ht,ue),label:ht.cropLabelCropBoundary,labelClass:"PinturaToolbarContentWide",onchange:({value:_})=>{fe(ki,ue=_,ue),Xt.write()},options:[[!0,ht.cropLabelCropBoundaryEdge,{icon:Nn(ht.cropIconCropBoundary,ht,!0)}],[!1,ht.cropLabelCropBoundaryNone,{icon:Nn(ht.cropIconCropBoundary,ht,!1)}]]}]].filter(Boolean),be,()=>nr.set({})).filter(Boolean)),e.$$.dirty[0]&768|e.$$.dirty[3]&4194304|e.$$.dirty[4]&48&&fe(lo,He=ft&&(un==="always"||be.verticalSpace==="short"||m)?i.map(([_,se,Re])=>Array.isArray(Re)?[_,se,Re]:[_,se,{...Re,hideLabel:!0}]):[],He),e.$$.dirty[0]&512&&ft&&as.set(1),e.$$.dirty[4]&8&&n(14,r=ue?0:-1),e.$$.dirty[4]&3072&&n(136,s=Se&&oe(-(Je.x-Se.x),-(Je.y-Se.y))),e.$$.dirty[4]&20480&&n(137,l=St&&oe(Iu(St.x+St.width*.5+s.x),Iu(St.y+St.height*.5+s.y))),e.$$.dirty[4]&128&&n(141,f=ye!=null),e.$$.dirty[4]&33792&&n(142,h=Se&&a&&(a.height===Se.height||a.width===Se.width)),e.$$.dirty[4]&1311232&&n(143,b=!h&&q<1&&N<1),e.$$.dirty[4]&720898&&n(10,p=c&&!f&&(!u||b)),e.$$.dirty[0]&64|e.$$.dirty[3]&256|e.$$.dirty[4]&32&&n(16,y=dn&&!!z&&!m),e.$$.dirty[4]&20480&&n(11,M=St&&s&&{x:St.x+s.x,y:St.y+s.y,width:St.width,height:St.height}),e.$$.dirty[0]&2048|e.$$.dirty[3]&128|e.$$.dirty[4]&32&&n(17,w=Wt&&!!M&&!m),e.$$.dirty[3]&2050|e.$$.dirty[4]&8192&&n(18,C=hn&&!!l&&!_t),e.$$.dirty[0]&1024|e.$$.dirty[3]&8388610|e.$$.dirty[4]&64&&p&&_t&&!V&&(clearTimeout(Fo),n(116,Fo=setTimeout(Ai,_t))),e.$$.dirty[3]&8388608|e.$$.dirty[4]&64&&V&&clearTimeout(Fo),e.$$.dirty[0]&1024&&ni.set(p?1:0),e.$$.dirty[4]&8192&&_o.set(l),e.$$.dirty[0]&512|e.$$.dirty[4]&6291456&&(ft&&!De?fe(Yt,X.crop={maskOpacity:.85,maskMarkupOpacity:.85},X):delete X.crop),e.$$.dirty[4]&8388608&&re&&yn(),e.$$.dirty[4]&16&&n(148,R=be.verticalSpace!=="short"),e.$$.dirty[3]&4194304|e.$$.dirty[4]&16777248&&n(19,T=R&&!m&&un!=="always"),e.$$.dirty[0]&4|e.$$.dirty[3]&32&&n(149,P=wt&&Ye),e.$$.dirty[3]&64|e.$$.dirty[4]&50331648&&n(150,D=tn?R&&P:P),e.$$.dirty[3]&16|e.$$.dirty[4]&67108864&&n(20,x=yt||D),e.$$.dirty[4]&67108864&&(D||n(4,vi=gr)),e.$$.dirty[0]&16&&n(21,A={name:wo,selected:vi}),e.$$.dirty[0]&8|e.$$.dirty[3]&16|e.$$.dirty[4]&67108864&&n(12,g=[yt&&{id:wo+"-rotation",label:ht.cropLabelTabRotation},D&&{id:wo+"-zoom",label:ht.cropLabelTabZoom}].filter(Boolean)),e.$$.dirty[0]&4096&&n(22,O=g.map(_=>_.id)),e.$$.dirty[0]&32|e.$$.dirty[4]&32&&ko&&!ko.children.length&&m&&ko.dispatchEvent(new CustomEvent("measure",{detail:ko.rect})),e.$$.dirty[0]&512|e.$$.dirty[4]&134217728&&te&&Li.set(ft?0:20),e.$$.dirty[4]&268435456&&n(23,j=pe?`transform: translateY(${pe}px)`:void 0)},[me,_e,wt,ht,vi,ko,z,ee,i,ft,p,M,g,br,r,Ke,y,w,C,T,x,A,O,j,Le,ne,Ee,de,ot,Zo,Qi,Qt,Go,Xo,$i,er,ls,Yo,Si,lo,Yt,po,qo,jn,tr,Ko,Jo,Gn,Qo,_i,Ao,wi,Bn,$o,ei,yo,So,ki,Eo,vo,Ci,cs,nr,Ri,fs,ir,lt,fl,ti,Mi,Dn,rr,Ii,lr,ar,cr,ms,fr,gs,bs,ps,hr,ys,Ai,ni,_o,xo,fn,wo,Li,xn,Te,Ne,Qe,_t,Fe,we,yt,Ye,tn,Wt,dn,Un,Gt,hn,Fn,$e,bo,cn,dt,nn,ln,Pn,Zn,mn,un,Fo,o,G,B,ge,ve,Oe,k,Ve,u,Y,ue,be,m,V,ye,L,q,Se,Je,s,l,St,a,c,f,h,b,N,De,X,re,R,P,D,te,pe,_s,ws,pr,yr,ks,Sr]}var jm=class extends bt{constructor(t){super();pt(this,t,z5,O5,gt,{name:91,isActive:0,stores:92,cropImageSelectionCornerStyle:1,cropWillRenderImageSelectionGuides:93,cropAutoCenterImageSelectionTimeout:94,cropEnableZoomMatchImageAspectRatio:95,cropEnableRotateMatchImageAspectRatio:96,cropEnableRotationInput:97,cropEnableZoom:2,cropEnableZoomInput:98,cropEnableZoomAutoHide:99,cropEnableImageSelection:100,cropEnableInfoIndicator:101,cropEnableZoomTowardsWheelPosition:102,cropEnableLimitWheelInputToCropSelection:103,cropEnableCenterImageSelection:104,cropEnableButtonRotateLeft:105,cropEnableButtonRotateRight:106,cropEnableButtonFlipHorizontal:107,cropEnableButtonFlipVertical:108,cropSelectPresetOptions:109,cropEnableSelectPreset:110,cropEnableFilterMatchAspectRatio:111,cropSelectPresetFilter:90,cropEnableButtonToggleCropLimit:112,cropWillRenderTools:113,cropActiveTransformTool:114,cropMinimizeToolbar:115,locale:3},[-1,-1,-1,-1,-1,-1,-1])}get name(){return this.$$.ctx[91]}get isActive(){return this.$$.ctx[0]}set isActive(t){this.$set({isActive:t}),ce()}get stores(){return this.$$.ctx[92]}set stores(t){this.$set({stores:t}),ce()}get cropImageSelectionCornerStyle(){return this.$$.ctx[1]}set cropImageSelectionCornerStyle(t){this.$set({cropImageSelectionCornerStyle:t}),ce()}get cropWillRenderImageSelectionGuides(){return this.$$.ctx[93]}set cropWillRenderImageSelectionGuides(t){this.$set({cropWillRenderImageSelectionGuides:t}),ce()}get cropAutoCenterImageSelectionTimeout(){return this.$$.ctx[94]}set cropAutoCenterImageSelectionTimeout(t){this.$set({cropAutoCenterImageSelectionTimeout:t}),ce()}get cropEnableZoomMatchImageAspectRatio(){return this.$$.ctx[95]}set cropEnableZoomMatchImageAspectRatio(t){this.$set({cropEnableZoomMatchImageAspectRatio:t}),ce()}get cropEnableRotateMatchImageAspectRatio(){return this.$$.ctx[96]}set cropEnableRotateMatchImageAspectRatio(t){this.$set({cropEnableRotateMatchImageAspectRatio:t}),ce()}get cropEnableRotationInput(){return this.$$.ctx[97]}set cropEnableRotationInput(t){this.$set({cropEnableRotationInput:t}),ce()}get cropEnableZoom(){return this.$$.ctx[2]}set cropEnableZoom(t){this.$set({cropEnableZoom:t}),ce()}get cropEnableZoomInput(){return this.$$.ctx[98]}set cropEnableZoomInput(t){this.$set({cropEnableZoomInput:t}),ce()}get cropEnableZoomAutoHide(){return this.$$.ctx[99]}set cropEnableZoomAutoHide(t){this.$set({cropEnableZoomAutoHide:t}),ce()}get cropEnableImageSelection(){return this.$$.ctx[100]}set cropEnableImageSelection(t){this.$set({cropEnableImageSelection:t}),ce()}get cropEnableInfoIndicator(){return this.$$.ctx[101]}set cropEnableInfoIndicator(t){this.$set({cropEnableInfoIndicator:t}),ce()}get cropEnableZoomTowardsWheelPosition(){return this.$$.ctx[102]}set cropEnableZoomTowardsWheelPosition(t){this.$set({cropEnableZoomTowardsWheelPosition:t}),ce()}get cropEnableLimitWheelInputToCropSelection(){return this.$$.ctx[103]}set cropEnableLimitWheelInputToCropSelection(t){this.$set({cropEnableLimitWheelInputToCropSelection:t}),ce()}get cropEnableCenterImageSelection(){return this.$$.ctx[104]}set cropEnableCenterImageSelection(t){this.$set({cropEnableCenterImageSelection:t}),ce()}get cropEnableButtonRotateLeft(){return this.$$.ctx[105]}set cropEnableButtonRotateLeft(t){this.$set({cropEnableButtonRotateLeft:t}),ce()}get cropEnableButtonRotateRight(){return this.$$.ctx[106]}set cropEnableButtonRotateRight(t){this.$set({cropEnableButtonRotateRight:t}),ce()}get cropEnableButtonFlipHorizontal(){return this.$$.ctx[107]}set cropEnableButtonFlipHorizontal(t){this.$set({cropEnableButtonFlipHorizontal:t}),ce()}get cropEnableButtonFlipVertical(){return this.$$.ctx[108]}set cropEnableButtonFlipVertical(t){this.$set({cropEnableButtonFlipVertical:t}),ce()}get cropSelectPresetOptions(){return this.$$.ctx[109]}set cropSelectPresetOptions(t){this.$set({cropSelectPresetOptions:t}),ce()}get cropEnableSelectPreset(){return this.$$.ctx[110]}set cropEnableSelectPreset(t){this.$set({cropEnableSelectPreset:t}),ce()}get cropEnableFilterMatchAspectRatio(){return this.$$.ctx[111]}set cropEnableFilterMatchAspectRatio(t){this.$set({cropEnableFilterMatchAspectRatio:t}),ce()}get cropSelectPresetFilter(){return this.$$.ctx[90]}set cropSelectPresetFilter(t){this.$set({cropSelectPresetFilter:t}),ce()}get cropEnableButtonToggleCropLimit(){return this.$$.ctx[112]}set cropEnableButtonToggleCropLimit(t){this.$set({cropEnableButtonToggleCropLimit:t}),ce()}get cropWillRenderTools(){return this.$$.ctx[113]}set cropWillRenderTools(t){this.$set({cropWillRenderTools:t}),ce()}get cropActiveTransformTool(){return this.$$.ctx[114]}set cropActiveTransformTool(t){this.$set({cropActiveTransformTool:t}),ce()}get cropMinimizeToolbar(){return this.$$.ctx[115]}set cropMinimizeToolbar(t){this.$set({cropMinimizeToolbar:t}),ce()}get locale(){return this.$$.ctx[3]}set locale(t){this.$set({locale:t}),ce()}},W5={util:["crop",jm]};var Yu='<path fill="none" d="M9 15 L12 9 L15 15 M10 13.5 h3" stroke="currentColor" stroke-width=".125em"/>';var Y5={shapeLabelButtonSelectSticker:"Select image",shapeIconButtonSelectSticker:'<g fill="none" stroke="currentColor" stroke-width="0.0625em"><path d="M8 21 L15 11 L19 15"/><path d="M15 2 v5 h5"/><path d="M8 2 h8 l4 4 v12 q0 4 -4 4 h-8 q-4 0 -4 -4 v-12 q0 -4 4 -4z"/></g><circle fill="currentColor" cx="10" cy="8" r="1.5"/>',shapeIconButtonFlipHorizontal:'<g stroke="currentColor" stroke-width=".125em"><path fill="none" d="M6 6.5h5v11H6z"/><path fill="currentColor" d="M15 6.5h3v11h-3z"/><path d="M11 4v16" fill="currentColor"/></g>',shapeIconButtonFlipVertical:'<g stroke="currentColor" stroke-width=".125em"><rect x="7" y="8" width="11" height="5" fill="none"/><rect x="7" y="17" width="11" height="2" fill="currentColor"/><line x1="5" y1="13" x2="20" y2="13"/></g>',shapeIconButtonRemove:'<g fill="none" fill-rule="evenodd"><path stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" d="M7.5 7h9z"/><path d="M7.916 9h8.168a1 1 0 01.99 1.14l-.972 6.862a2 2 0 01-1.473 1.653c-.877.23-1.753.345-2.629.345-.876 0-1.752-.115-2.628-.345a2 2 0 01-1.473-1.653l-.973-6.862A1 1 0 017.916 9z" fill="currentColor"/><rect fill="currentColor" x="10" y="5" width="4" height="3" rx="1"/></g>',shapeIconButtonDuplicate:'<g fill="none" fill-rule="evenodd"><path d="M15 13.994V16a2 2 0 01-2 2H8a2 2 0 01-2-2v-5a2 2 0 012-2h2.142" stroke="currentColor" stroke-width=".125em"/><path d="M15 9V8a1 1 0 00-2 0v1h-1a1 1 0 000 2h1v1a1 1 0 002 0v-1h1a1 1 0 000-2h-1zm-4-4h6a2 2 0 012 2v6a2 2 0 01-2 2h-6a2 2 0 01-2-2V7a2 2 0 012-2z" fill="currentColor"/></g>',shapeIconButtonMoveToFront:'<g fill="none" fill-rule="evenodd"><rect fill="currentColor" x="11" y="13" width="8" height="2" rx="1"/><rect fill="currentColor" x="9" y="17" width="10" height="2" rx="1"/><path d="M11.364 8H10a5 5 0 000 10M12 6.5L14.5 8 12 9.5z" stroke="currentColor" stroke-width=".125em" stroke-linecap="round"/></g>',shapeIconButtonTextLayoutAutoWidth:`${Yu}`,shapeIconButtonTextLayoutAutoHeight:`<g fill="currentColor"><circle cx="4" cy="12" r="1.5"/><circle cx="20" cy="12" r="1.5"/></g>${Yu}`,shapeIconButtonTextLayoutFixedSize:`<g fill="currentColor"><circle cx="5" cy="6" r="1.5"/><circle cx="19" cy="6" r="1.5"/><circle cx="19" cy="19" r="1.5"/><circle cx="5" cy="19" r="1.5"/></g>${Yu}`,shapeTitleButtonTextLayoutAutoWidth:"Auto width",shapeTitleButtonTextLayoutAutoHeight:"Auto height",shapeTitleButtonTextLayoutFixedSize:"Fixed size",shapeTitleButtonFlipHorizontal:"Flip Horizontal",shapeTitleButtonFlipVertical:"Flip Vertical",shapeTitleButtonRemove:"Remove",shapeTitleButtonDuplicate:"Duplicate",shapeTitleButtonMoveToFront:"Move to front",shapeLabelInputText:"Edit text",shapeIconInputCancel:'<g fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor" stroke-width=".125em"><path d="M18 6L6 18M6 6l12 12"/></g>',shapeIconInputConfirm:'<g fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor" stroke-width=".125em"><polyline points="20 6 9 17 4 12"/></g>',shapeLabelInputCancel:"Cancel",shapeLabelInputConfirm:"Confirm",shapeLabelStrokeNone:"No outline",shapeLabelFontStyleNormal:"Normal",shapeLabelFontStyleBold:"Bold",shapeLabelFontStyleItalic:"Italic",shapeLabelFontStyleItalicBold:"Bold Italic",shapeTitleBackgroundColor:"Fill color",shapeTitleFontFamily:"Font",shapeTitleFontSize:"Font size",shapeTitleFontStyle:"Font style",shapeTitleLineHeight:"Line height",shapeTitleLineStart:"Start",shapeTitleLineEnd:"End",shapeTitleStrokeWidth:"Line width",shapeTitleStrokeColor:"Line color",shapeTitleLineDecorationBar:"Bar",shapeTitleLineDecorationCircle:"Circle",shapeTitleLineDecorationSquare:"Square",shapeTitleLineDecorationArrow:"Arrow",shapeTitleLineDecorationCircleSolid:"Circle solid",shapeTitleLineDecorationSquareSolid:"Square solid",shapeTitleLineDecorationArrowSolid:"Arrow solid",shapeIconLineDecorationBar:'<g stroke="currentColor" stroke-linecap="round" stroke-width=".125em"><path d="M5,12 H16"/><path d="M16,8 V16"/></g>',shapeIconLineDecorationCircle:'<g stroke="currentColor" stroke-linecap="round"><path stroke-width=".125em" d="M5,12 H12"/><circle fill="none" stroke-width=".125em" cx="16" cy="12" r="4"/></g>',shapeIconLineDecorationSquare:'<g stroke="currentColor" stroke-linecap="round"><path stroke-width=".125em" d="M5,12 H12"/><rect fill="none" stroke-width=".125em" x="12" y="8" width="8" height="8"/></g>',shapeIconLineDecorationArrow:'<g stroke="currentColor" stroke-linecap="round" stroke-width=".125em"><path d="M5,12 H16 M13,7 l6,5 l-6,5" fill="none"/></g>',shapeIconLineDecorationCircleSolid:'<g stroke="currentColor" stroke-linecap="round"><path stroke-width=".125em" d="M5,12 H12"/><circle fill="currentColor" cx="16" cy="12" r="4"/></g>',shapeIconLineDecorationSquareSolid:'<g stroke="currentColor" stroke-linecap="round"><path stroke-width=".125em" d="M5,12 H12"/><rect fill="currentColor" x="12" y="8" width="8" height="8"/></g>',shapeIconLineDecorationArrowSolid:'<g stroke="currentColor" stroke-linecap="round" stroke-width=".125em"><path d="M5,12 H16"/><path d="M13,7 l6,5 l-6,5z" fill="currentColor"/></g>',shapeTitleColorTransparent:"Transparent",shapeTitleColorWhite:"White",shapeTitleColorSilver:"Silver",shapeTitleColorGray:"Gray",shapeTitleColorBlack:"Black",shapeTitleColorNavy:"Navy",shapeTitleColorBlue:"Blue",shapeTitleColorAqua:"Aqua",shapeTitleColorTeal:"Teal",shapeTitleColorOlive:"Olive",shapeTitleColorGreen:"Green",shapeTitleColorYellow:"Yellow",shapeTitleColorOrange:"Orange",shapeTitleColorRed:"Red",shapeTitleColorMaroon:"Maroon",shapeTitleColorFuchsia:"Fuchsia",shapeTitleColorPurple:"Purple",shapeTitleTextColor:"Font color",shapeTitleTextAlign:"Text align",shapeTitleTextAlignLeft:"Left align text",shapeTitleTextAlignCenter:"Center align text",shapeTitleTextAlignRight:"Right align text",shapeIconTextAlignLeft:'<g stroke-width=".125em" stroke="currentColor"><line x1="5" y1="8" x2="15" y2="8"/><line x1="5" y1="12" x2="19" y2="12"/><line x1="5" y1="16" x2="14" y2="16"/></g>',shapeIconTextAlignCenter:'<g stroke-width=".125em" stroke="currentColor"><line x1="7" y1="8" x2="17" y2="8"/><line x1="5" y1="12" x2="19" y2="12"/><line x1="8" y1="16" x2="16" y2="16"/></g>',shapeIconTextAlignRight:'<g stroke-width=".125em" stroke="currentColor"><line x1="9" y1="8" x2="19" y2="8"/><line x1="5" y1="12" x2="19" y2="12"/><line x1="11" y1="16" x2="19" y2="16"/></g>',shapeLabelToolSharpie:"Sharpie",shapeLabelToolEraser:"Eraser",shapeLabelToolRectangle:"Rectangle",shapeLabelToolEllipse:"Ellipse",shapeLabelToolArrow:"Arrow",shapeLabelToolLine:"Line",shapeLabelToolText:"Text",shapeLabelToolPreset:"Stickers",shapeIconToolSharpie:'<g stroke-width=".125em" stroke="currentColor" fill="none"><path d="M2.025 5c5.616-2.732 8.833-3.857 9.65-3.374C12.903 2.351.518 12.666 2.026 14 3.534 15.334 16.536.566 17.73 2.566 18.924 4.566 3.98 17.187 4.831 18c.851.813 9.848-6 11.643-6 1.087 0-2.53 5.11-2.92 7-.086.41 3.323-1.498 4.773-1 .494.17.64 2.317 1.319 3 .439.443 1.332.776 2.679 1" stroke="currentColor" stroke-width=".125em" fill="none" fill-rule="evenodd" stroke-linejoin="round"/></g>',shapeIconToolEraser:'<g stroke-width=".125em" stroke="currentColor" stroke-linecap="round" fill="none"><g transform="translate(3, 15) rotate(-45)"><rect x="0" y="0" width="18" height="10" rx="3"/></g><line x1="11" y1="21" x2="18" y2="21"/><line x1="20" y1="21" x2="22" y2="21"/></g>',shapeIconToolRectangle:'<g stroke-width=".125em" stroke="currentColor" fill="none"><rect x="2" y="2" width="20" height="20" rx="3"/></g>',shapeIconToolEllipse:'<g stroke-width=".125em" stroke="currentColor" fill="none"><circle cx="12" cy="12" r="11"/></g>',shapeIconToolArrow:'<g stroke-width=".125em" stroke="currentColor" fill="none"><line x1="20" y1="3" x2="6" y2="21"/><path d="m10 5 L22 1 L21 13" fill="currentColor" stroke="none"/></g>',shapeIconToolLine:'<g stroke-width=".125em" stroke="currentColor" fill="none"><line x1="20" y1="3" x2="6" y2="21"/></g>',shapeIconToolText:'<g stroke="none" fill="currentColor" transform="translate(6,0)"><path d="M8.14 20.085c.459 0 .901-.034 1.329-.102a8.597 8.597 0 001.015-.21v1.984c-.281.135-.695.247-1.242.336a9.328 9.328 0 01-1.477.133c-3.312 0-4.968-1.745-4.968-5.235V6.804H.344v-1.25l2.453-1.078L3.89.819h1.5v3.97h4.97v2.015H5.39v10.078c0 1.031.245 1.823.735 2.375s1.161.828 2.015.828z"/>',shapeIconToolPreset:'<g fill="none" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor" stroke-width=".125em"><path d="M12 22c2.773 0 1.189-5.177 3-7 1.796-1.808 7-.25 7-3 0-5.523-4.477-10-10-10S2 6.477 2 12s4.477 10 10 10z"></path><path d="M20 17c-3 3-5 5-8 5"></path></g>'};var Wa=(e,t)=>{let n=Object.getOwnPropertyDescriptors(e);Object.keys(n).forEach(o=>{n[o].get?Object.defineProperty(t,o,{get:()=>e[o],set:i=>e[o]=i}):t[o]=e[o]})},V5=()=>on()&&document.doctype!==null,Gm=e=>{let t={},{sub:n,pub:o}=Mo();V5()||console.warn("Browser is in quirks mode, add <!DOCTYPE html> to page to fix render issues");let i=ph();Wa(i,t);let r=tw(e,i.stores);Wa(r,t);let s=["loadImage","processImage","abortProcessImage","abortLoadImage"].map(c=>r.on(c,u=>{let f=i[c](u&&u.detail);f instanceof Promise&&f.catch(ct)})),l=(c,u)=>{let f=n(c,u),h=i.on(c,u),m=r.on(c,u);return()=>{f(),h(),m()}};t.handleEvent=ct;let a=tm.map(c=>l(c,u=>t.handleEvent(c,u)));return Qs(t,{on:l,updateImage:c=>new Promise((u,f)=>{let h=t.history.get(),m=t.imageState;i.loadImage(c).then(b=>{t.history.set(h),t.imageState=m,u(b)}).catch(f)}),close:()=>{o("close")},destroy:()=>{[...s,...a].forEach(c=>c()),r.destroy(),i.destroy(),o("destroy")}}),setTimeout(()=>o("init",t),0),t};var q5=on()&&class extends HTMLElement{constructor(){super();this._editor=void 0,this._unsubs=void 0}static get observedAttributes(){return["src"]}attributeChangedCallback(e,t,n){this[e]=n}connectedCallback(){this._editor=Gm(this),Wa(this._editor,this),this._editor.src=this.getAttribute("src"),this._unsubs=ow(this._editor,this)}disconnectedCallback(){this._editor.destroy(),this._unsubs.forEach(e=>e())}};var{document:Xm,window:Va}=lh;function H5(e){let t,n,o,i;return Vi(e[27]),{c(){t=xe(),n=$("div"),S(n,"class",e[5]),S(n,"style",e[4])},m(r,s){U(r,t,s),U(r,n,s),e[28](n),o||(i=[le(Va,"keydown",e[10]),le(Va,"orientationchange",e[11]),le(Va,"resize",e[27]),le(Xm.body,"focusin",function(){jt(!e[1]&&e[7])&&(!e[1]&&e[7]).apply(this,arguments)}),le(Xm.body,"focusout",function(){jt(e[2]&&e[8])&&(e[2]&&e[8]).apply(this,arguments)}),le(n,"wheel",e[9],{passive:!1})],o=!0)},p(r,s){e=r,s[0]&32&&S(n,"class",e[5]),s[0]&16&&S(n,"style",e[4])},i:tt,o:tt,d(r){r&&H(t),r&&H(n),e[28](null),o=!1,Et(i)}}}function N5(e,t,n){let o,i,r,s,l,a,c,u,f=mo(),{root:h}=t,{preventZoomViewport:m=!0}=t,{preventScrollBodyIfNeeded:b=!0}=t,{preventFooterOverlapIfNeeded:p=!0}=t,{class:y=void 0}=t,w=!0,C=!1,M=!1,R=on()&&document.documentElement,k=on()&&document.body,T=on()&&document.head,P=qe(0,{precision:.001,damping:.5});W(e,P,q=>n(23,u=q));let D=P.subscribe(q=>{M&&q>=1?(n(19,M=!1),n(1,w=!1),f("show")):C&&q<=0&&(n(18,C=!1),n(1,w=!0),f("hide"))}),x=!1,A,g,O,j=()=>document.querySelector("meta[name=viewport]"),v=()=>Array.from(document.querySelectorAll("meta[name=theme-color]")),G=()=>{if(M||!w)return;n(19,M=!0);let q=j()||Tt("meta",{name:"viewport"});A=!A&&q.getAttribute("content"),q.setAttribute("content",i+(/cover/.test(A)?",viewport-fit=cover":"")),q.parentNode||T.append(q);let Me=getComputedStyle(h).getPropertyValue("--color-background"),Be=v();if(Be.length)g=Be.map(Se=>Se.getAttribute("content"));else{let Se=Tt("meta",{name:"theme-color"});T.append(Se),Be.push(Se)}Be.forEach(Se=>Se.setAttribute("content",`rgb(${Me})`)),clearTimeout(O),O=setTimeout(()=>P.set(1),250)},z=()=>{if(C||w)return;clearTimeout(O),n(18,C=!0);let q=j();A?q.setAttribute("content",A):q.remove();let Me=v();g?Me.forEach((Be,Se)=>{Be.setAttribute("content",g[Se])}):Me.forEach(Be=>Be.remove()),P.set(0)},B,ee,ge=q=>{!xa(q.target)||(n(2,x=!0),ee=Y)},ve=q=>{if(!!xa(q.target))if(clearTimeout(B),ee===Y)n(2,x=!1);else{let Me=Y;Oe(()=>Y!==Me,()=>n(2,x=!1))}},Oe=(q,Me)=>{let Be=()=>{if(q()){Me();return}requestAnimationFrame(Be)};requestAnimationFrame(Be)},Ve=q=>{q.target&&/PinturaStage/.test(q.target.className)&&q.preventDefault()},J=q=>{let{key:Me}=q;if(!/escape/i.test(Me))return;let Be=q.target;if(Be&&/input|textarea/i.test(Be.nodeName))return;let Se=document.querySelectorAll(".PinturaModal");Se[Se.length-1]===h&&f("close")},Y=0,ue,be,He,ft=()=>{be||(be=Tt("div",{style:"position:fixed;height:100vh;top:0"}),k.append(be))};fa(()=>{!p||!Po()||ft()}),nh(()=>{!be||(n(21,He=be.offsetHeight),be.remove(),be=void 0)});let ae,rt=()=>R.style.setProperty("--pintura-document-height",`${window.innerHeight}px`),V=q=>{q?(ae=window.scrollY,R.classList.add("PinturaDocumentLock"),rt(),window.addEventListener("resize",rt)):(window.removeEventListener("resize",rt),R.classList.remove("PinturaDocumentLock"),ut(ae)&&window.scrollTo(0,ae),ae=void 0)};Vo(()=>{R.classList.remove("PinturaModalBodyLock"),D()});function ye(){n(3,Y=Va.innerHeight)}function L(q){Bt[q?"unshift":"push"](()=>{h=q,n(0,h)})}return e.$$set=q=>{"root"in q&&n(0,h=q.root),"preventZoomViewport"in q&&n(12,m=q.preventZoomViewport),"preventScrollBodyIfNeeded"in q&&n(13,b=q.preventScrollBodyIfNeeded),"preventFooterOverlapIfNeeded"in q&&n(14,p=q.preventFooterOverlapIfNeeded),"class"in q&&n(15,y=q.class)},e.$$.update=()=>{e.$$.dirty[0]&9175042&&n(22,o=M||C?u:w?0:1),e.$$.dirty[0]&4096&&(i="width=device-width,height=device-height,initial-scale=1"+(m?",maximum-scale=1,user-scalable=0":"")),e.$$.dirty[0]&786434&&n(24,r=!M&&!w&&!C),e.$$.dirty[0]&12&&(x||n(20,ue=Y)),e.$$.dirty[0]&2097160&&n(25,s=ut(He)?`--viewport-pad-footer:${He>Y?0:1}`:""),e.$$.dirty[0]&38797312&&n(4,l=`opacity:${o};height:${ue}px;--editor-modal:1;${s}`),e.$$.dirty[0]&32768&&n(5,a=ze(["pintura-editor","PinturaModal",y])),e.$$.dirty[0]&8192&&n(26,c=b&&Po()&&/15_/.test(navigator.userAgent)),e.$$.dirty[0]&83886080&&c&&V(r)},[h,w,x,Y,l,a,P,ge,ve,Ve,J,ft,m,b,p,y,G,z,C,M,ue,He,o,u,r,s,c,ye,L]}var Ym=class extends bt{constructor(t){super();pt(this,t,N5,H5,gt,{root:0,preventZoomViewport:12,preventScrollBodyIfNeeded:13,preventFooterOverlapIfNeeded:14,class:15,show:16,hide:17},[-1,-1])}get root(){return this.$$.ctx[0]}set root(t){this.$set({root:t}),ce()}get preventZoomViewport(){return this.$$.ctx[12]}set preventZoomViewport(t){this.$set({preventZoomViewport:t}),ce()}get preventScrollBodyIfNeeded(){return this.$$.ctx[13]}set preventScrollBodyIfNeeded(t){this.$set({preventScrollBodyIfNeeded:t}),ce()}get preventFooterOverlapIfNeeded(){return this.$$.ctx[14]}set preventFooterOverlapIfNeeded(t){this.$set({preventFooterOverlapIfNeeded:t}),ce()}get class(){return this.$$.ctx[15]}set class(t){this.$set({class:t}),ce()}get show(){return this.$$.ctx[16]}get hide(){return this.$$.ctx[17]}},U5=(e={},t)=>new Ym({target:t||document.body,props:{class:e.class,preventZoomViewport:e.preventZoomViewport,preventScrollBodyIfNeeded:e.preventScrollBodyIfNeeded,preventFooterOverlapIfNeeded:e.preventFooterOverlapIfNeeded}}),Z5=(e={},t)=>{let{sub:n,pub:o}=Mo(),i={},r=U5(e,t),s=()=>{!r.hide||r.hide()},l=()=>{!r.show||r.show()},a=Gm(r.root);Wa(a,i),i.handleEvent=ct,a.handleEvent=(h,m)=>{if(h==="init")return i.handleEvent(h,i);i.handleEvent(h,m)},a.on("close",async()=>{let{willClose:h}=e;if(!h)return s();await h()&&s()});let c=(h,m)=>/show|hide/.test(h)?n(h,m):a.on(h,m),u=["show","hide"].map(h=>c(h,m=>i.handleEvent(h,m))),f=()=>{u.forEach(h=>h()),s(),r.$destroy(),a.destroy()};return Qs(i,{on:c,destroy:f,hide:s,show:l}),Object.defineProperty(i,"modal",{get:()=>r.root,set:()=>{}}),r.$on("close",a.close),r.$on("show",()=>o("show")),r.$on("hide",()=>{o("hide"),e.enableAutoDestroy!==!1&&f()}),e.enableAutoHide!==!1&&a.on("process",s),a.on("loadstart",l),e.enableButtonClose!==!1&&(e.enableButtonClose=!0),delete e.class,Object.assign(i,e),i};var qm=Ph,Km=Mh,Jm=()=>({read:Rg,apply:Lf});var K5={markupEditorToolbar:Sw(),markupEditorToolStyles:yw(),markupEditorShapeStyleControls:qw()},Qm=ew,$m=W5;var e0=Z5;Qm($m);var rs,t0,n0=(e,{log:t,env:{locale:n,banner:o,pageIsBright:i,willShowEditor:r,willHideEditor:s,didShowEditor:l,didHideEditor:a},requirements:{editor:c,field:u}})=>new Promise((f,h)=>{let{enableHeadlessMode:m,theme:b,guide:p,mask:y}=u,w=Rf(e),{imageWriter:C,imageReader:M,imageBackgroundColor:R,imageCropAspectRatio:k,...T}=c;if(y==="circle"&&(C.postprocessImageData=A=>new Promise(g=>{let O=document.createElement("canvas");O.width=A.width,O.height=A.height;let j=O.getContext("2d");j.putImageData(A,0,0),j.globalCompositeOperation="destination-in",j.fillStyle="#000",j.beginPath(),j.arc(A.width*.5,A.height*.5,A.width*.5,0,2*Math.PI),j.fill(),g(j.getImageData(0,0,A.width,A.height))})),typeof R=="string")try{T.imageBackgroundColor=Lu(R)}catch(A){t("failed to convert imageBackgroundColor to color array",R),T.imageBackgroundColor=void 0}T.imageCropAspectRatio=typeof k=="string"?Wu(k):k;let P={...T,imageReader:qm(M),imageWriter:Km(C),imageOrienter:Jm()};if(m)return t("headless mode",w,P),ou(w,P).then(({dest:A})=>f(A)).catch(h);t("editor mode",e,P),Array.isArray(T.cropSelectPresetOptions)&&(P.cropSelectPresetOptions=T.cropSelectPresetOptions.map(([A,g])=>[Wu(A),g]).filter(([A])=>A!==!1)),p==="circle"&&(P.willRenderCanvas=(A,g)=>{let{utilVisibility:O,selectionRect:j,lineColor:v,backgroundColor:G}=g,{x:z,y:B,width:ee,height:ge}=j;return{...A,interfaceShapes:[{x:z+ee*.5,y:B+ge*.5,rx:ee*.5,ry:ge*.5,inverted:!0,backgroundColor:[...G,.75],strokeWidth:1,strokeColor:[...v,Math.max(O.crop,.075)]},...A.interfaceShapes]}}),rs?(clearTimeout(t0),Object.assign(rs,{src:w,...P})):(r(),o&&(P.willRenderToolbar=A=>(rm(im("div","credits",{innerHTML:'we use <a href="https://crop.guide/" target="_blank" rel="noopener" style="font-weight:700;">crop.guide</a>',style:"font-weight:300;font-size:.675em;opacity:.65;pointer-events:all;margin-right:.5em;"}),"export",A[A.length-1]),A)),P.class=b==="auto"?i?"PinturaThemeBright":"PinturaThemeDark":b==="system"?"PinturaThemeSystem":b==="dark"?"PinturaThemeDark":"PinturaThemeBright",rs=e0({...P,src:w,locale:n,enableNavigateHistory:!1,enableAutoHide:!1,preventScrollBodyIfNeeded:!1}));let D=()=>{t0=setTimeout(()=>{s(),rs.hide()},100)},x={show:l,hide:()=>{a(),rs=void 0},close:()=>{s()},loadabort:A=>{/image too small/i.test(A.error)&&(D(),h(A))},loaderror:A=>{/image too small/i.test(A.error)||h(A)},process:({dest:A})=>{f(A),D()},processerror:h};rs.handleEvent=(A,g)=>{let O=x[A];!O||O(g)}});(e=>{Tf("https://cdn.crop.guide/client/l.css"),e.parent.$cropguide._setEditor(n0)})(window);})();
/*!
 * Pintura Image Editor 8.26.4
 * (c) 2018-2022 PQINA Inc. - All Rights Reserved
 * License: https://pqina.nl/pintura/license/
 */
